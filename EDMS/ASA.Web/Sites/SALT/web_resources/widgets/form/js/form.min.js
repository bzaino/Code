(function(a){a(document).ready(function(){a(".form-datepicker").datepicker({showOn:"button",buttonImage:"/web_resources/widgets/form/images/calendar.gif",dateFormat:"d M, yy",buttonImageOnly:true,changeMonth:true,changeYear:true,onClose:function(d,c){a(this).trigger("focusout")}});function b(e){var h=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var c=e.toLowerCase().match(h);var f=c[2],g=c[3],d=c[4]||"";if((f=="http:"&&d==":80")||(f=="https:"&&d==":443")){d=""}return f+"//"+g+d}a(".perc-form").find("form").each(function(){var e=a(this).attr("action");if(e&&e.indexOf("/perc-form-processor")==0){var c=a.isFunction(a.getCm1License)?a.getCm1License():"";var d=a.isFunction(a.getCm1Version)?a.getCm1Version():"";e=a.getDeliveryServiceBase()+e+((e.indexOf("?")!=-1)?"&":"?")+"perc-tid="+c+"&perc-version="+d;a(this).attr("action",e);a(this).append(a("<input/>").attr("type","hidden").attr("name","perc_hostUrl").attr("value",b(location.href)))}var f={};a(this).find("input[type=text], textarea").each(function(){if(a(this).attr("fieldmaxlength")>0){if(typeof(f[a(this).attr("name")])==="undefined"){f[a(this).attr("name")]={}}f[a(this).attr("name")]["maxlength"]=a(this).attr("fieldmaxlength")}});a(this).validate({errorClass:"form-error-msg",errorPlacement:function(g,h){if(h.attr("type")=="checkbox"){g.appendTo(h.parent().parent())}else{g.appendTo(h.parent())}},rules:f})})})})(jQuery);
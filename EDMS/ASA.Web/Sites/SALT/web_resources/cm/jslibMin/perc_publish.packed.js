/* jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Form Plugin
 * version: 2.60
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(d){d.fn.ajaxSubmit=function(G){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof G=="function"){G={success:G}}var x=this.attr("action");var f=(typeof x==="string")?d.trim(x):"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}f=f||window.location.href||"";G=d.extend(true,{url:f,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},G);var H={};this.trigger("form-pre-serialize",[this,G,H]);if(H.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(G.beforeSerialize&&G.beforeSerialize(this,G)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var p,D,B=this.formToArray(G.semantic);if(G.data){G.extraData=G.data;for(p in G.data){if(G.data[p] instanceof Array){for(var y in G.data[p]){B.push({name:p,value:G.data[p][y]})}}else{D=G.data[p];D=d.isFunction(D)?D():D;B.push({name:p,value:D})}}}if(G.beforeSubmit&&G.beforeSubmit(B,this,G)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[B,this,G,H]);if(H.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var e=d.param(B);if(G.type.toUpperCase()=="GET"){G.url+=(G.url.indexOf("?")>=0?"&":"?")+e;G.data=null}else{G.data=e}var F=this,A=[];if(G.resetForm){A.push(function(){F.resetForm()})}if(G.clearForm){A.push(function(){F.clearForm()})}if(!G.dataType&&G.target){var E=G.success||function(){};A.push(function(q){var n=G.replaceTarget?"replaceWith":"html";d(G.target)[n](q).each(E,arguments)})}else{if(G.success){A.push(G.success)}}G.success=function(J,q,K){var I=G.context||G;for(var v=0,n=A.length;v<n;v++){A[v].apply(I,[J,q,K||F,F])}};var w=d("input:file",this).length>0;var h="multipart/form-data";var z=(F.attr("enctype")==h||F.attr("encoding")==h);if(G.iframe!==false&&(w||G.iframe||z)){if(G.closeKeepAlive){d.get(G.closeKeepAlive,C)}else{C()}}else{d.ajax(G)}this.trigger("form-submit-notify",[this,G]);return this;function C(){var v=F[0];if(d(":input[name=submit],:input[id=submit]",v).length){alert('Error: Form elements must not have name or id of "submit".');return}var N=d.extend(true,{},d.ajaxSettings,G);N.context=N.context||N;var Q="jqFormIO"+(new Date().getTime()),L="_"+Q;var I=d('<iframe id="'+Q+'" name="'+Q+'" src="'+N.iframeSrc+'" />');var M=I[0];I.css({position:"absolute",top:"-1000px",left:"-1000px"});var J={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;I.attr("src",N.iframeSrc)}};var V=N.global;if(V&&!d.active++){d.event.trigger("ajaxStart")}if(V){d.event.trigger("ajaxSend",[J,N])}if(N.beforeSend&&N.beforeSend.call(N.context,J,N)===false){if(N.global){d.active--}return}if(J.aborted){return}var R=false;var U=0;var K=v.clk;if(K){var S=K.name;if(S&&!K.disabled){N.extraData=N.extraData||{};N.extraData[S]=K.value;if(K.type=="image"){N.extraData[S+".x"]=v.clk_x;N.extraData[S+".y"]=v.clk_y}}}function T(){var ab=F.attr("target"),Z=F.attr("action");v.setAttribute("target",Q);if(v.getAttribute("method")!="POST"){v.setAttribute("method","POST")}if(v.getAttribute("action")!=N.url){v.setAttribute("action",N.url)}if(!N.skipEncodingOverride){F.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(N.timeout){setTimeout(function(){U=true;P()},N.timeout)}var aa=[];try{if(N.extraData){for(var ac in N.extraData){aa.push(d('<input type="hidden" name="'+ac+'" value="'+N.extraData[ac]+'" />').appendTo(v)[0])}}I.appendTo("body");M.attachEvent?M.attachEvent("onload",P):M.addEventListener("load",P,false);v.submit()}finally{v.setAttribute("action",Z);if(ab){v.setAttribute("target",ab)}else{F.removeAttr("target")}d(aa).remove()}}if(N.forceSync){T()}else{setTimeout(T,10)}var X,Y,W=50;function P(){Y=M.contentWindow?M.contentWindow.document:M.contentDocument?M.contentDocument:M.document;if(!Y||Y.location.href==N.iframeSrc){return}M.detachEvent?M.detachEvent("onload",P):M.removeEventListener("load",P,false);var aa=true;try{if(U){throw"timeout"}var ae=N.dataType=="xml"||Y.XMLDocument||d.isXMLDoc(Y);b("isXml="+ae);if(!ae&&window.opera&&(Y.body==null||Y.body.innerHTML=="")){if(--W){b("requeing onLoad callback, DOM not available");setTimeout(P,250);return}}R=true;J.responseText=Y.body?Y.body.innerHTML:Y.documentElement?Y.documentElement.innerHTML:null;J.responseXML=Y.XMLDocument?Y.XMLDocument:Y;J.getResponseHeader=function(ag){var af={"content-type":N.dataType};return af[ag]};var ad=/(json|script)/.test(N.dataType);if(ad||N.textarea){var Z=Y.getElementsByTagName("textarea")[0];if(Z){J.responseText=Z.value}else{if(ad){var ac=Y.getElementsByTagName("pre")[0];var n=Y.getElementsByTagName("body")[0];if(ac){J.responseText=ac.textContent}else{if(n){J.responseText=n.innerHTML}}}}}else{if(N.dataType=="xml"&&!J.responseXML&&J.responseText!=null){J.responseXML=O(J.responseText)}}X=q(J,N.dataType,N)}catch(ab){b("error caught:",ab);aa=false;J.error=ab;N.error.call(N.context,J,"error",ab);V&&d.event.trigger("ajaxError",[J,N,ab])}if(J.aborted){b("upload aborted");aa=false}if(aa){N.success.call(N.context,X,"success",J);V&&d.event.trigger("ajaxSuccess",[J,N])}V&&d.event.trigger("ajaxComplete",[J,N]);if(V&&!--d.active){d.event.trigger("ajaxStop")}N.complete&&N.complete.call(N.context,J,aa?"success":"error");setTimeout(function(){I.removeData("form-plugin-onload");I.remove();J.responseXML=null},100)}var O=d.parseXML||function(n,Z){if(window.ActiveXObject){Z=new ActiveXObject("Microsoft.XMLDOM");Z.async="false";Z.loadXML(n)}else{Z=(new DOMParser()).parseFromString(n,"text/xml")}return(Z&&Z.documentElement&&Z.documentElement.nodeName!="parsererror")?Z:null};var q=d.httpData||function(ad,ab,aa){var Z=ad.getResponseHeader("content-type")||"",n=ab==="xml"||!ab&&Z.indexOf("xml")>=0,ac=n?ad.responseXML:ad.responseText;if(n&&ac.documentElement.nodeName==="parsererror"){d.error("parsererror")}if(aa&&aa.dataFilter){ac=aa.dataFilter(ac,ab)}if(typeof ac==="string"){if(ab==="json"||!ab&&Z.indexOf("json")>=0){ac=d.parseJSON(ac)}else{if(ab==="script"||!ab&&Z.indexOf("javascript")>=0){d.globalEval(ac)}}}return ac}}};d.fn.ajaxForm=function(e){if(this.length===0){var f={s:this.selector,c:this.context};if(!d.isReady&&f.s){b("DOM not ready, queuing ajaxForm");d(function(){d(f.s,f.c).ajaxForm(e)});return this}b("terminating; zero elements found by selector"+(d.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(h){if(!h.isDefaultPrevented()){h.preventDefault();d(this).ajaxSubmit(e)}}).bind("click.form-plugin",function(v){var q=v.target;var n=d(q);if(!(n.is(":submit,input:image"))){var h=n.closest(":submit");if(h.length==0){return}q=h[0]}var p=this;p.clk=q;if(q.type=="image"){if(v.offsetX!=undefined){p.clk_x=v.offsetX;p.clk_y=v.offsetY}else{if(typeof d.fn.offset=="function"){var w=n.offset();p.clk_x=v.pageX-w.left;p.clk_y=v.pageY-w.top}else{p.clk_x=v.pageX-q.offsetLeft;p.clk_y=v.pageY-q.offsetTop}}}setTimeout(function(){p.clk=p.clk_x=p.clk_y=null},100)})};d.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};d.fn.formToArray=function(C){var B=[];if(this.length===0){return B}var f=this[0];var q=C?f.getElementsByTagName("*"):f.elements;if(!q){return B}var x,w,p,D,h,z,e;for(x=0,z=q.length;x<z;x++){h=q[x];p=h.name;if(!p){continue}if(C&&f.clk&&h.type=="image"){if(!h.disabled&&f.clk==h){B.push({name:p,value:d(h).val()});B.push({name:p+".x",value:f.clk_x},{name:p+".y",value:f.clk_y})}continue}D=d.fieldValue(h,true);if(D&&D.constructor==Array){for(w=0,e=D.length;w<e;w++){B.push({name:p,value:D[w]})}}else{if(D!==null&&typeof D!="undefined"){B.push({name:p,value:D})}}}if(!C&&f.clk){var y=d(f.clk),A=y[0];p=A.name;if(p&&!A.disabled&&A.type=="image"){B.push({name:p,value:y.val()});B.push({name:p+".x",value:f.clk_x},{name:p+".y",value:f.clk_y})}}return B};d.fn.formSerialize=function(e){return d.param(this.formToArray(e))};d.fn.fieldSerialize=function(f){var e=[];this.each(function(){var w=this.name;if(!w){return}var p=d.fieldValue(this,f);if(p&&p.constructor==Array){for(var q=0,h=p.length;q<h;q++){e.push({name:w,value:p[q]})}}else{if(p!==null&&typeof p!="undefined"){e.push({name:this.name,value:p})}}});return d.param(e)};d.fn.fieldValue=function(q){for(var p=[],h=0,e=this.length;h<e;h++){var n=this[h];var f=d.fieldValue(n,q);if(f===null||typeof f=="undefined"||(f.constructor==Array&&!f.length)){continue}f.constructor==Array?d.merge(p,f):p.push(f)}return p};d.fieldValue=function(e,x){var h=e.name,C=e.type,D=e.tagName.toLowerCase();if(x===undefined){x=true}if(x&&(!h||e.disabled||C=="reset"||C=="button"||(C=="checkbox"||C=="radio")&&!e.checked||(C=="submit"||C=="image")&&e.form&&e.form.clk!=e||D=="select"&&e.selectedIndex==-1)){return null}if(D=="select"){var y=e.selectedIndex;if(y<0){return null}var A=[],f=e.options;var q=(C=="select-one");var z=(q?y+1:f.length);for(var p=(q?y:0);p<z;p++){var w=f[p];if(w.selected){var B=w.value;if(!B){B=(w.attributes&&w.attributes.value&&!(w.attributes.value.specified))?w.text:w.value}if(q){return B}A.push(B)}}return A}return d(e).val()};d.fn.clearForm=function(){return this.each(function(){d("input,select,textarea",this).clearFields()})};d.fn.clearFields=d.fn.clearInputs=function(){return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(f=="text"||f=="password"||e=="textarea"){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};d.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};d.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};d.fn.selected=function(e){if(e===undefined){e=true}return this.each(function(){var f=this.type;if(f=="checkbox"||f=="radio"){this.checked=e}else{if(this.tagName.toLowerCase()=="option"){var h=d(this).parent("select");if(e&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=e}}})};function b(){if(d.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(e)}else{if(window.opera&&window.opera.postError){window.opera.postError(e)}}}}})(jQuery);
/*
 * jQuery blockUI plugin
 * Version 2.31 (06-JAN-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(v){if(/1\.(0|1|2)\.(0|1|2)/.test(v.fn.jquery)||/^1.1/.test(v.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+v.fn.jquery);return}v.fn._fadeIn=v.fn.fadeIn;var e=function(){};var w=document.documentMode||0;var h=v.browser.msie&&((v.browser.version<8&&!w)||w<8);var n=v.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!w;v.blockUI=function(C){f(window,C)};v.unblockUI=function(C){q(window,C)};v.growlUI=function(G,E,F,C){var D=v('<div class="growlUI"></div>');if(G){D.append("<h1>"+G+"</h1>")}if(E){D.append("<h2>"+E+"</h2>")}if(F==undefined){F=3000}v.blockUI({message:D,fadeIn:700,fadeOut:1000,centerY:false,timeout:F,showOverlay:false,onUnblock:C,css:v.blockUI.defaults.growlCSS})};v.fn.block=function(C){return this.unblock({fadeOut:0}).each(function(){if(v.css(this,"position")=="static"){this.style.position="relative"}if(v.browser.msie){this.style.zoom=1}f(this,C)})};v.fn.unblock=function(C){return this.each(function(){q(this,C)})};v.blockUI.version=2.31;v.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var d=null;var p=[];function f(E,P){var K=(E==window);var H=P&&P.message!==undefined?P.message:undefined;P=v.extend({},v.blockUI.defaults,P||{});P.overlayCSS=v.extend({},v.blockUI.defaults.overlayCSS,P.overlayCSS||{});var M=v.extend({},v.blockUI.defaults.css,P.css||{});var X=v.extend({},v.blockUI.defaults.themedCSS,P.themedCSS||{});H=H===undefined?P.message:H;if(K&&d){q(window,{fadeOut:0})}if(H&&typeof H!="string"&&(H.parentNode||H.jquery)){var S=H.jquery?H[0]:H;var Z={};v(E).data("blockUI.history",Z);Z.el=S;Z.parent=S.parentNode;Z.display=S.style.display;Z.position=S.style.position;if(Z.parent){Z.parent.removeChild(S)}}var L=P.baseZ;var W=(v.browser.msie||P.forceIframe)?v('<iframe class="blockUI" style="z-index:'+(L++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+P.iframeSrc+'"></iframe>'):v('<div class="blockUI" style="display:none"></div>');var V=v('<div class="blockUI blockOverlay" style="z-index:'+(L++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var U;if(P.theme&&K){var Q='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+L+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(P.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';U=v(Q)}else{U=K?v('<div class="blockUI blockMsg blockPage" style="z-index:'+L+';display:none;position:fixed"></div>'):v('<div class="blockUI blockMsg blockElement" style="z-index:'+L+';display:none;position:absolute"></div>')}if(H){if(P.theme){U.css(X);U.addClass("ui-widget-content")}else{U.css(M)}}if(!P.applyPlatformOpacityRules||!(v.browser.mozilla&&/Linux/.test(navigator.platform))){V.css(P.overlayCSS)}V.css("position",K?"fixed":"absolute");if(v.browser.msie||P.forceIframe){W.css("opacity",0)}var J=[W,V,U],Y=K?v("body"):v(E);v.each(J,function(){this.appendTo(Y)});if(P.theme&&P.draggable&&v.fn.draggable){U.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var G=h&&(!v.boxModel||v("object,embed",K?null:E).length>0);if(n||G){if(K&&P.allowBodyStretch&&v.boxModel){v("html,body").css("height","100%")}if((n||!v.boxModel)&&!K){var O=z(E,"borderTopWidth"),T=z(E,"borderLeftWidth");var I=O?"(0 - "+O+")":0;var N=T?"(0 - "+T+")":0}v.each([W,V,U],function(aa,ae){var ab=ae[0].style;ab.position="absolute";if(aa<2){K?ab.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+P.quirksmodeOffsetHack+') + "px"'):ab.setExpression("height",'this.parentNode.offsetHeight + "px"');K?ab.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):ab.setExpression("width",'this.parentNode.offsetWidth + "px"');if(N){ab.setExpression("left",N)}if(I){ab.setExpression("top",I)}}else{if(P.centerY){if(K){ab.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}ab.marginTop=0}else{if(!P.centerY&&K){var ac=(P.css&&P.css.top)?parseInt(P.css.top):0;var ad="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+ac+') + "px"';ab.setExpression("top",ad)}}}})}if(H){if(P.theme){U.find(".ui-widget-content").append(H)}else{U.append(H)}if(H.jquery||H.nodeType){v(H).show()}}if((v.browser.msie||P.forceIframe)&&P.showOverlay){W.show()}if(P.fadeIn){var R=P.onBlock?P.onBlock:e;var D=(P.showOverlay&&!H)?R:e;var C=H?R:e;if(P.showOverlay){V._fadeIn(P.fadeIn,D)}if(H){U._fadeIn(P.fadeIn,C)}}else{if(P.showOverlay){V.show()}if(H){U.show()}if(P.onBlock){P.onBlock()}}y(1,E,P);if(K){d=U[0];p=v(":input:enabled:visible",d);if(P.focusInput){setTimeout(B,20)}}else{b(U[0],P.centerX,P.centerY)}if(P.timeout){var F=setTimeout(function(){K?v.unblockUI(P):v(E).unblock(P)},P.timeout);v(E).data("blockUI.timeout",F)}}function q(F,G){var E=(F==window);var D=v(F);var H=D.data("blockUI.history");var I=D.data("blockUI.timeout");if(I){clearTimeout(I);D.removeData("blockUI.timeout")}G=v.extend({},v.blockUI.defaults,G||{});y(0,F,G);var C;if(E){C=v("body").children().filter(".blockUI").add("body > .blockUI")}else{C=v(".blockUI",F)}if(E){d=p=null}if(G.fadeOut){C.fadeOut(G.fadeOut);setTimeout(function(){x(C,H,G,F)},G.fadeOut)}else{x(C,H,G,F)}}function x(C,F,E,D){C.each(function(G,H){if(this.parentNode){this.parentNode.removeChild(this)}});if(F&&F.el){F.el.style.display=F.display;F.el.style.position=F.position;if(F.parent){F.parent.appendChild(F.el)}v(D).removeData("blockUI.history")}if(typeof E.onUnblock=="function"){E.onUnblock(D,E)}}function y(C,G,H){var F=G==window,E=v(G);if(!C&&(F&&!d||!F&&!E.data("blockUI.isBlocked"))){return}if(!F){E.data("blockUI.isBlocked",C)}if(!H.bindEvents||(C&&!H.showOverlay)){return}var D="mousedown mouseup keydown keypress";C?v(document).bind(D,H,A):v(document).unbind(D,A)}function A(F){if(F.keyCode&&F.keyCode==9){if(d&&F.data.constrainTabKey){var E=p;var D=!F.shiftKey&&F.target==E[E.length-1];var C=F.shiftKey&&F.target==E[0];if(D||C){setTimeout(function(){B(C)},10);return false}}}if(v(F.target).parents("div.blockMsg").length>0){return true}return v(F.target).parents().children().filter("div.blockUI").length==0}function B(C){if(!p){return}var D=p[C===true?p.length-1:0];if(D){D.focus()}}function b(G,C,I){var H=G.parentNode,F=G.style;var D=((H.offsetWidth-G.offsetWidth)/2)-z(H,"borderLeftWidth");var E=((H.offsetHeight-G.offsetHeight)/2)-z(H,"borderTopWidth");if(C){F.left=D>0?(D+"px"):"0"}if(I){F.top=E>0?(E+"px"):"0"}}function z(C,D){return parseInt(v.css(C,D))||0}})(jQuery);(function(b){b.fn.caret=function(B,x){var f,p,z=this[0];if(typeof B==="object"&&typeof B.start==="number"&&typeof B.end==="number"){f=B.start;p=B.end}else{if(typeof B==="number"&&typeof x==="number"){f=B;p=x}else{if(typeof B==="string"){if((f=z.value.indexOf(B))>-1){p=f+B.length}else{f=null}}else{if(Object.prototype.toString.call(B)==="[object RegExp]"){var y=B.exec(z.value);if(y!=null){f=y.index;p=f+y[0].length}}}}}if(typeof f!="undefined"){if(b.browser.msie){var v=this[0].createTextRange();v.collapse(true);v.moveStart("character",f);v.moveEnd("character",p-f);v.select()}else{this[0].selectionStart=f;this[0].selectionEnd=p}this[0].focus();return this}else{if(b.browser.msie){if(this[0].tagName.toLowerCase()!="textarea"){var h=this.val();var q=document.selection.createRange().duplicate();q.moveEnd("character",h.length);var A=(q.text==""?h.length:h.lastIndexOf(q.text));q=document.selection.createRange().duplicate();q.moveStart("character",-h.length);var w=q.text.length}else{var q=document.selection.createRange();var d=q.duplicate();d.moveToElementText(this[0]);d.setEndPoint("EndToEnd",q);var A=d.text.length-q.text.length;var w=A+q.text.length}}else{var A=z.selectionStart,w=z.selectionEnd}var n=z.value.substring(A,w);return{start:A,end:w,text:n,replace:function(e){return z.value.substring(0,A)+e+z.value.substring(w,z.value.length)}}}return this}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercViewReadyManager={wrappers:[],isInitialized:false,init:function(){this.isInitialized=true},setWrapper:function(d){if(!this.isInitialized){return false}var f=false;var e=this;b(d.components).each(function(h,p){var n=p;if(e.getWrapper(n)!=null){f=true;return}});if(f){return false}b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing");this.wrappers.push(d);d.init();this.logMessage("Added wrapper '"+d.wrapperName+"' to manager");return true},setProcessingFlag:function(){b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing")},getWrapper:function(d){var e=null;b(this.wrappers).each(function(){if(this.isComponentInWrapper(d,true)){e=this;return}});return e},logMessage:function(d){if(window.console&&gDebug){console.log(d)}},handleWrapperComplete:function(d){this.wrappers.splice(b.inArray(d,this.wrappers),1);this.logMessage("Removed wrapper '"+d+"' from manager");if(this.wrappers.length==0){b("#perc-ui-view-indicator").removeClass("perc-ui-view-processing").addClass("perc-ui-view-ready");this.logMessage("The view is ready.")}},showRenderingProgressWarning:function(){b.perc_utils.alert_dialog({content:"Please wait for the page components to finish rendering.",title:"Warning"})}};b.PercComponentWrapper=function(e,f){var d={wrapperName:e,wrapperStatus:"initialized",processedComponents:[],components:f,isWrapperComplete:function(){return this.wrapperStatus=="processed"},isComponentInWrapper:function(h,n){return n?b.inArray(h,this.components)!=-1&&b.inArray(h,this.processedComponents)==-1:b.inArray(h,this.components)!=-1},handleComponentProgress:function(q,p){if(b.inArray(q,this.components)==-1){b.PercViewReadyManager.logMessage("The component '"+q+"' doesn't exist in the wrapper."+this.wrapperName);return}if(p=="complete"){this.processedComponents.push(q);var n=b("#"+q);n.remove();var h=b("[perc-ui-component='"+q+"']");h.addClass("perc-ui-component-ready").removeClass("perc-ui-component-processing");if(this.components.length==this.processedComponents.length){this.wrapperStatus="processed";b.PercViewReadyManager.handleWrapperComplete(this.wrapperName)}}else{b(".perc-ui-component-overlay").each(function(){var x=b(this);var w=b("[perc-ui-component='"+x.attr("id")+"']");var v=w.position();if(v==null){return}x.css("top",v.top).css("left",v.left).css("height",w.height()).css("width",w.width())})}},init:function(){b(this.components).each(function(){var q=this;var p=b("[perc-ui-component='"+q+"']");p.addClass("perc-ui-component-processing").removeClass("perc-ui-component-ready");var h=p.position();var n=b("<div class='perc-ui-component-overlay ui-widget-overlay' style='position:absolute; background-color:silver; opacity:0.3; border-radius: 6px; border: 1px solid silver; z-index:9000'><img src='/cm/images/images/Busy.gif' style='margin: auto;  position: absolute;  top: 0; left: 0; bottom: 0; right: 0;'></div>");n.attr("id",q).css("top",h.top).css("left",h.left).css("height",p.height()).css("width",p.width());p.after(n)})}};return d}})(jQuery);var $j=jQuery.noConflict();$j.perc={};(function(b){b.perc_redirect=function(e,d){var h=window.location.href.indexOf("debug=true")!=-1;var f=e.indexOf("?")!=-1;if(h){if(d==null||d=="undefined"){d=new Object()}d.debug="true"}var n=(d==null||d=="undefined")?"":b.param(d);if(n.length>0){n=(f?"&":"?")+n}var p=e+n;window.location.href=p}})(jQuery);(function(b){b.perc_textAutoFill=function(p,q,f,d,n){var e=false;var h=false;d=typeof(d)!="undefined"?d:false;n=typeof(n)!="undefined"?n:-1;b(p).bind("focus.textAutoFill",function(v){var w=b(q).val();e=(w=="undefined"||w==null||w==""||d==true);h=true});b(p).bind("keyup.textAutoFill",{filter:f},function(w){var v=b(q).attr("disabled");if(!h){var z=b(q).val();e=(z=="undefined"||z==null||z=="");h=true}var x=function(A){return A};if(typeof w.data.filter=="function"){x=w.data.filter}if(e&&!v){if(n>0&&b(p).val().length>n){var y=b(p).val().substring(0,n);b(q).val(x(y))}else{b(q).val(x(b(p).val()))}}})}})(jQuery);(function(b){b.perc_filterField=function(f,d,e){b(f).bind("keypress.filterField",{filter:d},function(C){var n=function(D){return D};var A=C.charCode?C.charCode:C.which;if(A==0||A==8||A==13){return}var y=String.fromCharCode(A);if(typeof C.data.filter=="function"){n=C.data.filter}var z=n(y);if(z.length==0){C.preventDefault()}else{if(y!=z){var B=C.target;var h=b(B).caret().start;var q=b(B).caret().end;var x=B.value.slice(0,h);var w=B.value.slice(q);var p=x+z+w;B.value=p;var v=x.length+1;b(B).caret({start:v,end:v});C.preventDefault()}}});b(f).bind("blur.filterField",{filter:d},function(h){f.val(h.data.filter(f.val()));if(b.isFunction(e)){e(b(f))}})}})(jQuery);(function(b){b.perc_filterFieldText=function(f,d,e){b(f).bind("keypress.filterField",{filter:d},function(E){var n=function(F){return F};var C=E.charCode?E.charCode:E.which;if(C==0||C==8){return}var z=String.fromCharCode(C);if(typeof E.data.filter=="function"){n=E.data.filter}var x=b(E.target).caret().start;var q=f.val();var y=f.attr("maxlength");if(typeof(y)!="undefined"&&q.length==y){return}q=q.substring(0,x)+z+q.substring(x,q.length);var B="";if(typeof(e)!="undefined"&&e.length==1){var A=q.split(e);for(var w=0;w<A.length;w++){A[w]=n(A[w])}B=A.join(e)}else{B=n(q)}if(B.length==0){E.preventDefault()}else{if(q!=B){var D=E.target;var h=b(D).caret().start;var p=B;D.value=b.trim(p);var v=h+1;b(D).caret({start:v,end:v});E.preventDefault()}}});b(f).bind("blur.filterField",{filter:d},function(h){theText=f.val();var n="";if(typeof(e)!="undefined"&&e.length==1){var q=theText.split(e);for(var p=0;p<q.length;p++){q[p]=d(q[p])}n=q.join(e)}else{n=h.data.filter(theText)}f.val(b.trim(n))})}})(jQuery);(function(b){b.perc_textFilters={URL:function(d){return d.replace(/[ ]/g,"-").replace(/[\\\/\:\*\?\"<\>\|\#\;\%\']/g,"")},HOSTNAME:function(d){return d.replace(/[^a-zA-Z0-9\-\.]/g,"")},NOSPACES:function(d){return d.replace(/ /g,"")},NOBACKSLASH:function(d){return d.replace(/[\\]/g,"")},IDNAMECDATA:function(d){return d.replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(d){var e=d.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(e.length>0&&e.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){e=e.substring(1,e.length)}return e},PATH:function(d){return d.replace(/[\\\:\*\?\"<\>\|\#\;\%]/g,"")},ID:function(d){return d.replace(/[^a-zA-Z0-9\-\.\:\_]/g,"")},ID_WITH_SPACE:function(d){return d.replace(/[^a-zA-Z0-9\-\.\:\_ ]/g,"")},ONLY_DIGITS:function(d){return d.replace(/[^0-9]/g,"")},ALPHA_NUMERIC:function(d){return d.replace(/[^a-zA-Z0-9]/g,"")},DIGITS_DOT:function(d){return d.replace(/[^0-9\.]/g,"")},DESCRIPTION:function(d){return d.replace(/[<>&]/g,"")},WINDOWS_FILE_NAME:function(d){return d.replace(/\.*$/g,"")}}})(jQuery);(function(b){b.perc_autoFillTextFilters={URL:function(d){return d.replace(/[ \_]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"").replace(/[-]+/g,"-").toLowerCase()},IDNAMECDATA:function(d){return d.replace(/[:\ \.]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(d){var e=d.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(e.length>0&&e.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){e=e.substring(1,e.length)}return e}}})(jQuery);(function(b){b.PercBlockUI=function(f,e){var d={};if(typeof(f)!="object"||f==null){f=b.PercBlockUIMode.OVERLAY}b.extend(d,f);if(typeof(e)!="undefined"&&e!=null&&e!=""){b.extend(d,{message:e})}b.blockUI(f)};b.PercBlockUIMode={OVERLAY:{message:'<img src="/cm/images/images/Busy.gif"/><br/>Processing. Please wait...',css:{border:"none",backgroundColor:"#fff",opacity:"0.9",color:"#000",fontFamily:"Verdana",fontSize:"11px","-webkit-border-radius":"10px","-moz-border-radius":"10px",padding:"5px",width:"25%"},overlayCSS:{opacity:"0.6"},fadeIn:40,fadeOut:40,baseZ:9999},CURSORONLY:{message:null,overlayCSS:{opacity:0},fadeIn:0,fadeOut:0,baseZ:9999}}})(jQuery);(function(e){var d=false;var b=[];e(document).ready(function(){e("body").ajaxSend(function(){d=true});e("body").ajaxComplete(function(){d=false;f()})});function f(){if(b.length>0&&!d){var h=b.shift();h();f()}}e.PercQueuePostAJAX=function(h){if(typeof(h)=="function"){b.push(h);f()}}})(jQuery);(function(b){b.PercTruncateText=function(f,e){if(f.length<=e){return f}var d=e-3;return f.substr(0,d)+"..."}})(jQuery);(function(b){b.PercTextOverflow=function(d,e){if(b.browser.msie||b.browser.safari){d.css("white-space","nowrap").css("text-overflow","ellipsis").css("width",e).css("overflow","hidden")}else{d.textOverflow("...",false)}}})(jQuery);(function(b){b.fn.binder=b.fn.binder||function(d,e,h){var f=b(this);if((h||false)){f.bind(d,e,h)}else{h=e;f.bind(d,h)}return f};b.fn.singleclick=b.fn.singleclick||function(d,e){return b(this).binder("singleclick",d,e)};b.event.special.singleclick=b.event.special.singleclick||{setup:function(e,d){b(this).bind("click",b.event.special.singleclick.handler)},teardown:function(d){b(this).unbind("click",b.event.special.singleclick.handler)},handler:function(f){var d=function(n){var q=this;var h=b(q);var p=h.data("singleclick-timeout")||false;if(p){clearTimeout(p)}p=false;h.data("singleclick-timeout",p)};var e=function(n){var q=this;d.call(q);var h=b(q);h.data("singleclick-clicks",(h.data("singleclick-clicks")||0)+1);var p=setTimeout(function(){var v=h.data("singleclick-clicks");d.apply(q,[n]);h.data("singleclick-clicks",0);if(v===1){n.type="singleclick";b.event.handle.apply(q,[n])}},500);h.data("singleclick-timeout",p)};e.apply(this,[f])}}})(jQuery);(function(b){b(document).ready(function(){b.editable.addInputType("filteredText",{element:function(f,e){var d=b('<input type="text">');if(f.width!="none"){d.width(f.width)}if(f.height!="none"){d.height(f.height)}d.attr("autocomplete","off");b.perc_filterField(d,b.perc_textFilters.URL);d.attr("id",f.fieldid);b(this).append(d);return(d)}})})})(jQuery);
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(f){var e=document.documentElement.style,h=("textOverflow" in e||"OTextOverflow" in e),n=document.createRange!==undefined,d=function(q){var p=[];f.each(q[0].childNodes,function(){if(this.nodeType===3){p.push(this)}else{f.each(this.childNodes,arguments.callee)}});return f(p)},b=function(w,A,q){var v=document.createRange(),y=0,p=w.length,x=0,z;if(q<=A){return f(w)}if(p===1||!n){return f.map(w,function(B){return B.textContent}).join("").substr(A,q)}for(;y<p;y+=1){z=w[y];if(A>=x&&A<=x+z.length){v.setStart(z,A-x)}if(x<=q&&x+z.length>=q){v.setEnd(z,q-x);break}x+=z.length}return f(v.cloneContents())};f.extend(f.fn,{textOverflow:function(v,p){var q=v||"…";if(!h){return this.each(function(){var A=f(this),C=A.clone(),F=A.clone(),z=A.text(),w=A.width(),B=d(F),D=0,E=0,y=z.length,x=function(){if(w!==A.width()){A.replaceWith(F);A=F;F=A.clone();A.textOverflow(v,false);w=A.width()}};A.after(C.hide());if(C.width()>w){while(D<y){E=Math.floor(D+((y-D)/2));C.empty().append(b(B,0,E)).append(q);if(C.width()<w){D=E+1}else{y=E}}if(D<z.length){A.empty().append(b(B,0,D-1)).append(q)}}C.remove();if(p){setInterval(x,200)}})}else{return this}}})})(jQuery);(function(h){var n="/Rhythmyx";var f=n+"/services";var p="/cm";var d={ANALYTICS:f+"/analytics",PAGEMGT:f+"/pagemanagement",SITEMGT:f+"/sitemanage",MIGRATIONMGT:f+"/migrationmanagement",PATHMGT:f+"/pathmanagement",ASSETMGT:f+"/assetmanagement",DELIVERY:f+"/delivery",ITEMMGT:f+"/itemmanagement",USERMGT:f+"/user",UTILS:f+"/utils",METADATAMGT:f+"/metadatamanagement",ACTIVITY:f+"/activitymanagement",FINDER:f+"/searchmanagement",WORKFLOW:f+"/workflowmanagement",ROLEMGT:f+"/rolemanagement",DESIGN:f+"/design",FOLDERMGT:f+"/foldermanagement",LICENSE:f+"/licensemanagement",PUBMGT:f+"/publishmanagement",SHARE:f+"/share",WDGMGT:f+"/widgetmanagement",PAGEOPTMGT:f+"/pageoptimizermanagement",RECMGT:f+"/recentmanagement",REDMGT:f+"/redirectmanagement",CLDSVC:f+"/cloudservicemanagement",CATMGT:f+"/categorymanagement"};var b="Assets";var e="Sites";var v="Search";var q="Design";h.perc_displayformats={"/":"","/Design":"CM1_Design"};h.perc_paths={PATH_ADD_FOLDER:d.PATHMGT+"/path/addFolder",PATH_ADD_NEW_FOLDER:d.PATHMGT+"/path/addNewFolder",PATH_FOLDER:d.PATHMGT+"/path/folder",PATH_CHILD_FOLDERS:d.PATHMGT+"/path/childFolders",PATH_PAGINATED_FOLDER:d.PATHMGT+"/path/paginatedFolder",PATH_ITEM:d.PATHMGT+"/path/item",PATH_ITEM_BY_ID:d.PATHMGT+"/path/item/id",PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE:d.PATHMGT+"/path/item/wfState",PATH_ITEM_MOVE:d.PATHMGT+"/path/moveItem",PATH_ITEM_PROPERTIES:d.PATHMGT+"/path/itemProperties",PATH_VALIDATE_DELETE_FOLDER:d.PATHMGT+"/path/validateFolderDelete",PATH_DELETE_FOLDER:d.PATHMGT+"/path/deleteFolder",PATH_RENAME_FOLDER:d.PATHMGT+"/path/renameFolder",PATH_GET_FOLDER_PROPERTIES:d.PATHMGT+"/path/folderProperties",PATH_SAVE_FOLDER_PROPERTIES:d.PATHMGT+"/path/saveFolderProperties",PATH_LAST_EXISTING:d.PATHMGT+"/path/lastExisting",PATH_VALIDATE_EXIST:d.PATHMGT+"/path/validate",DISPLAY_FORMAT:f+"/ui/uicomps/displayformat/name/",TEMPLATES_ALL:d.PAGEMGT+"/template/summary/all",TEMPLATE_HTML_PARSE:d.PAGEMGT+"/render/parse",TEMPLATE_EXPORT:d.PAGEMGT+"/template/export",TEMPLATE_IMPORT:d.PAGEMGT+"/template/import",TEMPLATES_USER:d.PAGEMGT+"/template/summary/all/user",TEMPLATE_LOAD_SAVE:d.PAGEMGT+"/template",TEMPLATE_LOAD_METADATA:d.PAGEMGT+"/template/loadTemplateMetadata",TEMPLATE_SAVE_METADATA:d.PAGEMGT+"/template/saveTemplateMetadata",TEMPLATE_CREATE_FROM_URL:d.SITEMGT+"/sitetemplates/createFromUrl",TEMPLATE_CREATE_FROM_URL_ASYNC:d.SITEMGT+"/sitetemplates/createFromUrlAsync",TEMPLATE_CREATE_FROM_URL_RESULT:d.SITEMGT+"/sitetemplates/getImportedTemplate",TEMPLATE_CREATE_FROM_PAGE:d.SITEMGT+"/sitetemplates/createFromPage",TEMPLATE_RENDER:d.PAGEMGT+"/render/template",TEMPLATE_RENDER_SCRIPTSOFF:d.PAGEMGT+"/render/template/scriptsoff",TEMPLATES_BY_SITE:d.SITEMGT+"/sitetemplates/templates",TEMPLATES_WITH_NOSITE:d.SITEMGT+"/sitetemplates/nosite",TEMPLATES_READONLY:d.PAGEMGT+"/template/summary/all/readonly",TEMPLATES_SAVE:d.SITEMGT+"/sitetemplates",PAGE_CREATE:d.PAGEMGT+"/page",SAVE_PAGE_METADATA:d.PAGEMGT+"/page/savePageMetadata",PAGES_WITH_TEMPLATE:d.PAGEMGT+"/page/pagesByTemplate",UNASSIGNED_PAGES_BY_SITE:d.PAGEMGT+"/page/unassignedPagesBySite",MIGRATION_EMPTY_FLAG:d.PAGEMGT+"/page/migrationEmptyFlag",CLEAR_MIGRATION_EMPTY_FLAG:d.PAGEMGT+"/page/clearMigrationEmptyFlag",RENDER_LINK_PREVIEW:d.PAGEMGT+"/renderlink/preview",BLOG_LOAD:d.SITEMGT+"/section/blogs",POST_LOAD:d.SITEMGT+"/section/blogPosts",SECTION_CREATE:d.SITEMGT+"section/create",SECTION_CREATE_SECTION_LINK:d.SITEMGT+"/section/createSectionLink",SECTION_DELETE_SECTION_LINK:d.SITEMGT+"/section/deleteSectionLink",SECTION_CREATE_EXTERNAL_LINK:d.SITEMGT+"/section/createExternalLinkSection",SECTION_SECTION_FROM_FOLDER:d.SITEMGT+"/section/createSectionFromFolder",SECTION_CONVERT_TO_FOLDER:d.SITEMGT+"/section/convertToFolder/",SECTION_DELETE:d.SITEMGT+"section",SECTION_LOAD:d.SITEMGT+"section",SECTION_MOVE:d.SITEMGT+"section/move",SECTION_REPLACE_LANDING_PAGE:d.SITEMGT+"section/replaceLandingPage",SECTION_UPDATE:d.SITEMGT+"section/update",SECTION_LINK_UPDATE:d.SITEMGT+"section/updateSectionLink",SECTION_EXTERNAL_LINK_UPDATE:d.SITEMGT+"section/updateExternalLink",SECTION_GET_ROOT:d.SITEMGT+"section/root",SECTION_GET_TREE:d.SITEMGT+"section/tree",SECTION_GET_CHILDREN:d.SITEMGT+"section/childSections",SECTION_GET_PROPERTIES:d.SITEMGT+"section/properties",PAGE_DELETE:d.PAGEMGT+"/page",PAGE_FORCE_DELETE:d.PAGEMGT+"/page/forceDelete",PAGE_VALIDATE_DELETE:d.PAGEMGT+"/page/validateDelete",PAGE_COPY:d.PAGEMGT+"/page/copy",PAGE_CHANGE_TEMPLATE:d.PAGEMGT+"/page/changeTemplate",PAGE_EDIT:d.PAGEMGT+"/render/page/editmode",PAGE_EDIT_SCRIPTSOFF:d.PAGEMGT+"/render/page/editmode/scriptsoff",PAGE_PREVIEW:d.PAGEMGT+"/render/page/",PAGE_EDITURL:d.PAGEMGT+"/page/pageEditUrl",PAGE_VIEWURL:d.PAGEMGT+"/page/pageViewUrl",PAGE_NONSEO:d.PAGEMGT+"/page/nonSEOPages",WIDGETS_ALL:d.PAGEMGT+"/widget",WIDGET_FULL:d.PAGEMGT+"/widget/full",WIDGET_INFO:d.PAGEMGT+"/widget/packageinfo",THEME_CSS:d.PAGEMGT+"/theme/css",REGION_CSS:d.PAGEMGT+"/theme/regioncss",REGION_CSS_MERGE:d.PAGEMGT+"/theme/regioncss/merge",REGION_CSS_PREPARE_FOR_EDIT:d.PAGEMGT+"/theme/regioncss/prepareForEdit",REGION_CSS_CLEAR_CACHE:d.PAGEMGT+"/theme/regioncss/clearCache",THEME_SUMMARY_ALL:d.PAGEMGT+"/theme/summary/all",RICHTEXT_CUSTOM_STYLES:d.PAGEMGT+"/theme/customstyles",ANALYTICS_GET_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_STORE_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_DELETE_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_TEST_CONNECTION:d.ANALYTICS+"/provider/testConnection",ANALYTICS_GET_PROFILES:d.ANALYTICS+"/provider/profiles",CONTENT_EDIT_CRITERIA:d.ASSETMGT+"/asset/contentEditCriteria",ASSET_WIDGET_REL:d.ASSETMGT+"/asset/createAssetWidgetRelationship",ASSET_FROM_LOCALCONTENT:d.ASSETMGT+"/asset/shareLocalContent",ASSET_WIDGET_PROMOTE:d.ASSETMGT+"/asset/promoteAssetWidget",ASSET_WIDGET_REL_UPDATE:d.ASSETMGT+"/asset/updateAssetWidgetRelationship",ASSET_ADD_TO_FOLDER:d.ASSETMGT+"/asset/addAssetToFolder",ASSET_WIDGET_DROP_CRITERIA:d.ASSETMGT+"/asset/assetWidgetDropCriteria/",ASSET_WIDGET_REL_DEL:d.ASSETMGT+"/asset/clearAssetWidgetRelationship",ASSET_ORPHAN_WIDGET_REL_DEL:d.ASSETMGT+"/asset/clearOrphanAssetsWidgetRelationship",ASSET_EDITOR_LIBRARY:d.ASSETMGT+"/asset/assetEditors",ASSET_TYPES:d.ASSETMGT+"/asset/assetTypes",ASSET_EDITOR:d.ASSETMGT+"/asset/assetEditor",ASSET_EDITOR_URL_FOR_ASSET_ID:d.ASSETMGT+"/asset/assetEditUrl",ASSET_VIEW_URL_FOR_ASSET_ID:d.ASSETMGT+"/asset/assetViewUrl",ASSET_DELETE:d.ASSETMGT+"/asset",ASSET_FORCE_DELETE:d.ASSETMGT+"/asset/forceDelete",ASSET_VALIDATE_DELETE:d.ASSETMGT+"/asset/validateDelete",ASSET_REMOVE:d.ASSETMGT+"/asset/remove",ASSET_FORCE_REMOVE:d.ASSETMGT+"/asset/forceRemove",ASSET_UPDATE:d.ASSETMGT+"/asset/updateAsset",ASSET_UNUSED:d.ASSETMGT+"/asset/unusedAssets",ASSET_PROMOTE:d.ASSETMGT+"/asset/promoteAsset",CONVERT_WIDGET:d.ASSETMGT+"/asset/createWidgetAsset",UPDATE_INSPECTED_ELEMENT:d.ASSETMGT+"/asset/updateInspectedElements",SITES_ALL:d.SITEMGT+"/site",SAAS_SITES_NAMES:d.SITEMGT+"/site/sass/sitenames",SITES_ALL_CHOICES:d.SITEMGT+"/site/choices",SITES_BY_TEMPLATE:d.SITEMGT+"/sitetemplates/sites",SITE_CREATE:d.SITEMGT+"/site",SITE_CREATE_FROM_URL:d.SITEMGT+"/site/importFromUrl",SITE_CREATE_FROM_URL_ASYNC:d.SITEMGT+"/site/importFromUrlAsync",SITE_CREATE_FROM_URL_RESULT:d.SITEMGT+"/site/getImportedSite",VIEW_IMPORT_LOG:d.SITEMGT+"/site/importLogViewer",SITE_GET_PROPERTIES:d.SITEMGT+"/site/properties",SITE_IS_BEING_IMPORTED:d.SITEMGT+"/site/isSiteImporting",SITE_PUBLISH:d.SITEMGT+"/publish",SITE_ITEM_PUBLISH_ACTIONS:d.SITEMGT+"/publish/publishingActions",PAGE_PUBLISH:d.SITEMGT+"/publish/page",RESOURCE_PUBLISH:d.SITEMGT+"/publish/resource",PAGE_TAKEDOWN:d.SITEMGT+"/publish/takedown/page",RESOURCE_TAKEDOWN:d.SITEMGT+"/publish/takedown/resource",INCREMENTAL_LIST:d.SITEMGT+"/publish/incremental/content/",INCREMENTAL_PUBLISH:d.SITEMGT+"/publish/incremental/publish/",SITE_UPDATE_PROPERTIES:d.SITEMGT+"/site/updateProperties",SITE_DELETE:d.SITEMGT+"/site",PUBLISH_CURRENT_STATUS:d.SITEMGT+"pubstatus/current",PUBLISH_LOGS:d.SITEMGT+"pubstatus/logs",PUBLISH_PURGE:d.SITEMGT+"pubstatus/purge",PUBLISH_LOGS_DETAILS:d.SITEMGT+"pubstatus/details",SITE_GET_PUBLISH_PROPERTIES:d.SITEMGT+"/site/publishProperties",SITE_UPDATE_PUBLISH_PROPERTIES:d.SITEMGT+"/site/updatePublishProperties",SITE_COPY:d.SITEMGT+"/site/copy",SITE_COPY_VALIDATE_FOLDERS:d.SITEMGT+"/site/copy/validateFolders",SITE_COPY_INFO:d.SITEMGT+"/site/copysiteinfo",SITE_STATS_SUMMARY:d.SITEMGT+"/site/statistics",SITE_ARCHITECTURE:d.SITEMGT+"/siteArchitecture",URL_ADMIN:p+"/jsp/admin.jsp",URL_ARCHITECTURE:p+"/jsp/siteArchitecture.jsp",URL_DASHBOARD:p+"/jsp/dashboard.jsp",URL_WEBMGT:p+"/jsp/webmgt.jsp",IMAGE_ROOT:p+"/images",METADATA_FIND:d.METADATAMGT+"/metadata",METADATA_DELETE_BY_PREFIX:d.METADATAMGT+"/metadata/byprefix",METADATA_FIND_BY_PREFIX:d.METADATAMGT+"/metadata/byprefix",METADATA_DELETE:d.METADATAMGT+"/metadata",METADATA_SAVE:d.METADATAMGT+"/metadata",METADATA_SAVE_GLOBAL_VARIABLES:d.METADATAMGT+"/metadata/globalvariables",PROCESS_STATUS_ALL:d.SITEMGT+"/monitor/all",WORKFLOW_CHECKOUT:d.ITEMMGT+"/workflow/checkOut",WORKFLOW_CHECKIN:d.ITEMMGT+"/workflow/checkIn",WORKFLOW_FORCE_CHECKOUT:d.ITEMMGT+"/workflow/forceCheckOut",WORKFLOW_TRANSITION:d.ITEMMGT+"/workflow/transition",WORKFLOW_TRANSITION_COMMENT:d.ITEMMGT+"/workflow/transitionWithComments",WORKFLOW_TRANSITIONS:d.ITEMMGT+"/workflow/getTransitions",WORKFLOW_CHECKED_OUT_TO_USER:d.ITEMMGT+"/workflow/isCheckedOutToCurrentUser",WORKFLOW_IS_APPROVE_ALLOWED:d.ITEMMGT+"/workflow/isApproveAvailableToCurrentUser",WORKFLOW_BULK_APPROVE:d.ITEMMGT+"/workflow/bulkApprove",WORKFLOW_STEPPED:d.WORKFLOW+"/workflows/",WORKFLOW_META:d.WORKFLOW+"/workflows/metadata",DEFAULT_WORKFLOW_META:d.WORKFLOW+"/workflows/metadata/default",USER_USERS:d.USERMGT+"/user/users",USER_USERS_NAMES:d.USERMGT+"/user/users/names",USER_ROLES:d.USERMGT+"/user/roles",USER_FIND:d.USERMGT+"/user/find",USER_EXTERNAL_FIND:d.USERMGT+"/user/external/find",USER_EXTERNAL_IMPORT:d.USERMGT+"/user/import",USER_EXTERNAL_STATUS:d.USERMGT+"/user/external/status",USER_STATUS:d.USERMGT+"/user/status",USER_DELETE:d.USERMGT+"/user/delete",USER_UPDATE:d.USERMGT+"/user/update",USER_CREATE:d.USERMGT+"/user/create",USER_CURRENT:d.USERMGT+"/user/current",USER_ACCESS_LEVEL:d.USERMGT+"/user/accessLevel",ROLE_FIND:d.ROLEMGT+"/role/find",ROLE_DELETE:d.ROLEMGT+"/role/delete",ROLE_UPDATE:d.ROLEMGT+"/role/update",ROLE_CREATE:d.ROLEMGT+"/role/create",ROLE_AVAILABLE_USERS:d.ROLEMGT+"/role/availableUsers",ROLE_DELETE_VALIDATE:d.ROLEMGT+"/role/validateForDelete",ROLE_REMOVE_USERS_VALIDATE:d.ROLEMGT+"/role/validateDeleteUsers",CAT_ALL:d.CATMGT+"/category/all",CAT_UPDATE:d.CATMGT+"/category/update",CAT_LOCK_INFO:d.CATMGT+"/category/lockinfo",CAT_LOCK_TAB:d.CATMGT+"/category/locktab",CAT_REMOVE_TAB_LOCK:d.CATMGT+"/category/removelocktab",CAT_UPDATE_IN_DTS:d.CATMGT+"/category/updateindts",UTIL_GET_MAXINTERVAL:d.UTILS+"/utility/maxInactiveInterval",UTIL_GET_PRIVATE_KEYS:d.UTILS+"/utility/privatekeys",UTIL_ENCRYPT_STRING:d.UTILS+"/utility/encryptstring",UTIL_ENCRYPT_STRINGS:d.UTILS+"/utility/encryptstrings",UTIL_DECRYPT_STRING:d.UTILS+"/utility/decryptstring",UTIL_LOG_DATA:d.UTILS+"/utility/log",ITEM_REVISIONS:d.ITEMMGT+"/item/revisions",ITEM_PROMOTE_REVISION:d.ITEMMGT+"/item/restoreRevision",ITEM_SETDATES:d.ITEMMGT+"/item/setitemdates",ITEM_GETDATES:d.ITEMMGT+"/item/getitemdates",ITEM_LAST_COMMENT:d.ITEMMGT+"/item/lastComment",ASSET_SITE_IMPACT:d.ITEMMGT+"/item/siteimpact/asset",ADD_TO_MYPAGES:d.ITEMMGT+"/item/addtomypages",REMOVE_FROM_MYPAGES:d.ITEMMGT+"/item/removefrommypages",IS_MY_PAGE:d.ITEMMGT+"/item/ismypage",MY_CONTENT:d.ITEMMGT+"/item/mycontent",ITEM_SETSOPROMETA:d.ITEMMGT+"/item/setsoprometadata",ITEM_GETSOPROMETA:d.ITEMMGT+"/item/getsoprometadata",ASSETS_ROOT_NO_SLASH:b,SITES_ROOT_NO_SLASH:e,DESIGN_ROOT_NO_SLASH:q,SEARCH_ROOT_NO_SLASH:v,ASSETS_ROOT:"/"+b,SITES_ROOT:"/"+e,DESIGN_ROOT:"/"+q,SEARCH_ROOT:"/"+v,FINDER_SEARCH:d.FINDER+"/search/get",DESIGN_THEMES:"/"+q+"/web_resources/themes",ACTIVITY_CONTENT:d.ACTIVITY+"/activity/contentactivity",ACTIVITY_TRAFFIC:d.ACTIVITY+"/activity/contenttraffic",ACTIVITY_TRAFFIC_DETAILS:d.ACTIVITY+"/activity/trafficdetails",ACTIVITY_EFFECTIVENESS:d.ACTIVITY+"/activity/effectiveness",GADGETLIST:p+"/gadgets/listing",ASSET_FORMS:d.ASSETMGT+"/asset/forms",ASSET_FORMS_EXPORT:d.DELIVERY+"/form/submissions",ASSET_FORMS_CLEAR:d.DELIVERY+"/form",COMMENTS_DEFAULT_MODERATION:d.DELIVERY+"/comment/defaultModerationState",COMMENTS_SET_MODERATIONS:d.DELIVERY+"/comment/moderate",COMMENTS_GET_ALL:d.DELIVERY+"/comment/pageswithcomments",COMMENTS_GET_PAGE:d.DELIVERY+"/comment/commentsonpage",COMMENTS_GET_ARTICLE:d.PAGEMGT+"/page/folderpath/Sites",WEBRESOURCESMGT:d.DESIGN+"/webresources",WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD:d.DESIGN+"/webresources/validateFileUpload",WEBRESOURCESMGT_FILE_UPLOAD:d.DESIGN+"/webresources/uploadFile",FOLDERMGT_FOLDERS_WITH_WORKFLOW:d.FOLDERMGT+"/folders",FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/start/",FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/status/",FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/cancel/",FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN:d.FOLDERMGT+"/folders/workflowassignment",FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS:d.FOLDERMGT+"/folders/workflowassignment/isInProgress",FOLDERMGT_FOLDER_PAGES:d.FOLDERMGT+"/folders/folderpages/id/",MEMBERSHIP_GET_ALL:d.DELIVERY+"/membership/admin/users",MEMBERSHIP_ACT_BLK_DEL_ACCOUNT:d.DELIVERY+"/membership/admin/account",MEMBERSHIP_ACT_SAVE_GROUP:d.DELIVERY+"/membership/admin/user/group",LICENSE_ACTIVATE:d.LICENSE+"/license/activate",LICENSE_GET_INFORMATION:d.LICENSE+"/license/status",LICENSE_GET_NETSUITE_METHOD:d.LICENSE+"/license/methodWithCheckUrl",LICENSE_GET_MODULE:d.LICENSE+"/license/module/",LICENSE_SAVE_MODULE:d.LICENSE+"/license/module/save",SERVER_DETAILS:d.PUBMGT+"/servers/",DEFAULT_PUB_PATH:d.PUBMGT+"/servers/defaultFolderLocation/",DEFAULT_SERVER_MODIFIED:d.PUBMGT+"/servers/isDefaultServerModified/",STOP_PUB_SERVER:d.PUBMGT+"/servers/stopPublishing/",JOB_STATUS:d.SHARE+"/jobstatus",TEMPLATE_MIGRATE_CONTENT:d.MIGRATIONMGT+"/contentmigration/migrate",WIDGET_DEFS_SUMMARIES:d.WDGMGT+"/widgetbuilder/summaries",WIDGET_DEF:d.WDGMGT+"/widgetbuilder/definition/",WIDGET_DEF_VALIDATE:d.WDGMGT+"/widgetbuilder/validate/",WIDGET_DEF_DEPLOY:d.WDGMGT+"/widgetbuilder/deploy/",CLDSVC_ACTIVE:d.CLDSVC+"/cloudservice/active/",CLDSVC_ACTIVE_FMT:d.CLDSVC+"/cloudservice/%s/active/",CLDSVC_ACTIVESTATES:d.CLDSVC+"/cloudservice/activestates/",CLDSVC_INFO:d.CLDSVC+"/cloudservice/info/",CLDSVC_INFO_FMT:d.CLDSVC+"/cloudservice/%s/info/",CLDSVC_DATA:d.CLDSVC+"/cloudservice/pagedata/",CLDSVC_DATA_FMT:d.CLDSVC+"/cloudservice/%s/pagedata/",PAGE_OPT_ACTIVE:d.PAGEOPTMGT+"/pageoptimizer/active/",PAGE_OPT_DATA:d.PAGEOPTMGT+"/pageoptimizer/pagedata/",PAGE_OPT_INFO:d.PAGEOPTMGT+"/pageoptimizer/info/",RECENT_ROOT:d.RECMGT+"/recent/",REDIRECT_ROOT:d.REDMGT+"/redirect/",ITEM_PUB_HISTORY:d.ITEMMGT+"/item/pubhistory/"}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function n(d,x){var w=d.nodeName.toLowerCase();if("area"===w){var v=d.parentNode,q=v.name,p;return !d.href||!q||v.nodeName.toLowerCase()!=="map"?!1:(p=f("img[usemap=#"+q+"]")[0],!!p&&h(p))}return(/input|select|textarea|button|object/.test(w)?!d.disabled:"a"==w?d.href||x:x)&&h(d)}function h(d){return !f(d).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(d,p){return typeof d=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),p&&p.call(b)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?d=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):d=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!d.length?f(document):d},zIndex:function(v){if(v!==e){return this.css("zIndex",v)}if(this.length){var q=f(this[0]),p,b;while(q.length&&q[0]!==document){p=q.css("position");if(p==="absolute"||p==="relative"||p==="fixed"){b=parseInt(q.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}q=q.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(x,w){function b(y,B,A,z){return f.each(v,function(){B-=parseFloat(f.curCSS(y,"padding"+this,!0))||0,A&&(B-=parseFloat(f.curCSS(y,"border"+this+"Width",!0))||0),z&&(B-=parseFloat(f.curCSS(y,"margin"+this,!0))||0)}),B}var v=w==="Width"?["Left","Right"]:["Top","Bottom"],q=w.toLowerCase(),p={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+w]=function(d){return d===e?p["inner"+w].call(this):this.each(function(){f(this).css(q,b(this,d)+"px")})},f.fn["outer"+w]=function(d,y){return typeof d!="number"?p["outer"+w].call(this,d):this.each(function(){f(this).css(q,b(this,d,!0,y)+"px")})}}),f.extend(f.expr[":"],{data:function(p,v,q){return !!f.data(p,q[3])},focusable:function(d){return n(d,!isNaN(f.attr(d,"tabindex")))},tabbable:function(p){var v=f.attr(p,"tabindex"),q=isNaN(v);return(q||v>=0)&&n(p,!q)}}),f(function(){var d=document.body,p=d.appendChild(p=document.createElement("div"));p.offsetHeight,f.extend(p.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=p.offsetHeight===100,f.support.selectstart="onselectstart" in p,d.removeChild(p).style.display="none"}),f.extend(f.ui,{plugin:{add:function(p,x,w){var v=f.ui[p].prototype;for(var q in w){v.plugins[q]=v.plugins[q]||[],v.plugins[q].push([x,w[q]])}},call:function(q,p,x){var w=q.plugins[p];if(!w||!q.element[0].parentNode){return}for(var v=0;v<w.length;v++){q.options[w[v][0]]&&w[v][1].apply(q.element,x)}}},contains:function(p,d){return document.compareDocumentPosition?p.compareDocumentPosition(d)&16:p!==d&&p.contains(d)},hasScroll:function(p,w){if(f(p).css("overflow")==="hidden"){return !1}var v=w&&w==="left"?"scrollLeft":"scrollTop",q=!1;return p[v]>0?!0:(p[v]=1,q=p[v]>0,p[v]=0,q)},isOverAxis:function(p,d,q){return p>d&&p<d+q},isOver:function(p,y,x,w,v,q){return f.ui.isOverAxis(p,x,v)&&f.ui.isOverAxis(y,w,q)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var n=f.cleanData;f.cleanData=function(p){for(var w=0,v;(v=p[w])!=null;w++){try{f(v).triggerHandler("remove")}catch(q){}}n(p)}}else{var h=f.fn.remove;f.fn.remove=function(d,p){return this.each(function(){return p||(!d||f.filter(d,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(q){}}),h.call(f(this),d,p)})}}f.widget=function(p,y,x){var w=p.split(".")[0],v;p=p.split(".")[1],v=w+"-"+p,x||(x=y,y=f.Widget),f.expr[":"][v]=function(b){return !!f.data(b,p)},f[w]=f[w]||{},f[w][p]=function(z,d){arguments.length&&this._createWidget(z,d)};var q=new y;q.options=f.extend(!0,{},q.options),f[w][p].prototype=f.extend(!0,q,{namespace:w,widgetName:p,widgetEventPrefix:f[w][p].prototype.widgetEventPrefix||p,widgetBaseClass:v},x),f.widget.bridge(p,f[w][p])},f.widget.bridge=function(p,b){f.fn[p]=function(w){var v=typeof w=="string",q=Array.prototype.slice.call(arguments,1),d=this;return w=!v&&q.length?f.extend.apply(null,[!0,w].concat(q)):w,v&&w.charAt(0)==="_"?d:(v?this.each(function(){var y=f.data(this,p),x=y&&f.isFunction(y[w])?y[w].apply(y,q):y;if(x!==y&&x!==e){return d=x,!1}}):this.each(function(){var x=f.data(this,p);x?x.option(w||{})._init():f.data(this,p,new b(w,this))}),d)}},f.Widget=function(p,d){arguments.length&&this._createWidget(p,d)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(p,v){f.data(v,this.widgetName,this),this.element=f(v),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),p);var q=this;this.element.bind("remove."+this.widgetName,function(){q.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(q,p){var b=q;if(arguments.length===0){return f.extend({},this.options)}if(typeof q=="string"){if(p===e){return this.options[q]}b={},b[q]=p}return this._setOptions(b),this},_setOptions:function(d){var p=this;return f.each(d,function(v,q){p._setOption(v,q)}),this},_setOption:function(p,d){return this.options[p]=d,p==="disabled"&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(p,y,x){var w,v,q=this.options[p];x=x||{},y=f.Event(y),y.type=(p===this.widgetEventPrefix?p:this.widgetEventPrefix+p).toLowerCase(),y.target=this.element[0],v=y.originalEvent;if(v){for(w in v){w in y||(y[w]=v[w])}}return this.element.trigger(y,x),!(f.isFunction(q)&&q.call(this.element[0],y,x)===!1||y.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(b){return h._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,h.widgetName+".preventClickEvent")){return e.removeData(b.target,h.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(h){if(f){return}this._mouseStarted&&this._mouseUp(h),this._mouseDownEvent=h;var q=this,p=h.which==1,n=typeof this.options.cancel=="string"&&h.target.nodeName?e(h.target).closest(this.options.cancel).length:!1;if(!p||n||!this._mouseCapture(h)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){q.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)){this._mouseStarted=this._mouseStart(h)!==!1;if(!this._mouseStarted){return h.preventDefault(),!0}}return !0===e.data(h.target,this.widgetName+".preventClickEvent")&&e.removeData(h.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return q._mouseMove(b)},this._mouseUpDelegate=function(b){return q._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),h.preventDefault(),f=!0,!0},_mouseMove:function(h){return !e.browser.msie||document.documentMode>=9||!!h.button?this._mouseStarted?(this._mouseDrag(h),h.preventDefault()):(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,h)!==!1,this._mouseStarted?this._mouseDrag(h):this._mouseUp(h)),!this._mouseStarted):this._mouseUp(h)},_mouseUp:function(h){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,h.target==this._mouseDownEvent.target&&e.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(p,n){p.ui=p.ui||{};var z=/left|center|right/,y=/top|center|bottom/,x="center",w={},v=p.fn.position,q=p.fn.offset;p.fn.position=function(e){if(!e||!e.of){return v.apply(this,arguments)}e=p.extend({},e);var D=p(e.of),C=D[0],B=(e.collision||"flip").split(" "),A=e.offset?e.offset.split(" "):[0,0],f,d,E;return C.nodeType===9?(f=D.width(),d=D.height(),E={top:0,left:0}):C.setTimeout?(f=D.width(),d=D.height(),E={top:D.scrollTop(),left:D.scrollLeft()}):C.preventDefault?(e.at="left top",f=d=0,E={top:e.of.pageY,left:e.of.pageX}):(f=D.outerWidth(),d=D.outerHeight(),E=D.offset()),p.each(["my","at"],function(){var b=(e[this]||"").split(" ");b.length===1&&(b=z.test(b[0])?b.concat([x]):y.test(b[0])?[x].concat(b):[x,x]),b[0]=z.test(b[0])?b[0]:x,b[1]=y.test(b[1])?b[1]:x,e[this]=b}),B.length===1&&(B[1]=B[0]),A[0]=parseInt(A[0],10)||0,A.length===1&&(A[1]=A[0]),A[1]=parseInt(A[1],10)||0,e.at[0]==="right"?E.left+=f:e.at[0]===x&&(E.left+=f/2),e.at[1]==="bottom"?E.top+=d:e.at[1]===x&&(E.top+=d/2),E.left+=A[0],E.top+=A[1],this.each(function(){var M=p(this),L=M.outerWidth(),K=M.outerHeight(),J=parseInt(p.curCSS(this,"marginLeft",!0))||0,I=parseInt(p.curCSS(this,"marginTop",!0))||0,H=L+J+(parseInt(p.curCSS(this,"marginRight",!0))||0),G=K+I+(parseInt(p.curCSS(this,"marginBottom",!0))||0),F=p.extend({},E),b;e.my[0]==="right"?F.left-=L:e.my[0]===x&&(F.left-=L/2),e.my[1]==="bottom"?F.top-=K:e.my[1]===x&&(F.top-=K/2),w.fractions||(F.left=Math.round(F.left),F.top=Math.round(F.top)),b={left:F.left-J,top:F.top-I},p.each(["left","top"],function(N,h){p.ui.position[B[N]]&&p.ui.position[B[N]][h](F,{targetWidth:f,targetHeight:d,elemWidth:L,elemHeight:K,collisionPosition:b,collisionWidth:H,collisionHeight:G,offset:A,my:e.my,at:e.at})}),p.fn.bgiframe&&M.bgiframe(),M.offset(p.extend(F,{using:e.using}))})},p.ui.position={fit:{left:function(f,B){var A=p(window),h=B.collisionPosition.left+B.collisionWidth-A.width()-A.scrollLeft();f.left=h>0?f.left-h:Math.max(f.left-B.collisionPosition.left,f.left)},top:function(f,B){var A=p(window),h=B.collisionPosition.top+B.collisionHeight-A.height()-A.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-B.collisionPosition.top,f.top)}},flip:{left:function(e,F){if(F.at[0]===x){return}var E=p(window),D=F.collisionPosition.left+F.collisionWidth-E.width()-E.scrollLeft(),C=F.my[0]==="left"?-F.elemWidth:F.my[0]==="right"?F.elemWidth:0,B=F.at[0]==="left"?F.targetWidth:-F.targetWidth,A=-2*F.offset[0];e.left+=F.collisionPosition.left<0?C+B+A:D>0?C+B+A:0},top:function(e,F){if(F.at[1]===x){return}var E=p(window),D=F.collisionPosition.top+F.collisionHeight-E.height()-E.scrollTop(),C=F.my[1]==="top"?-F.elemHeight:F.my[1]==="bottom"?F.elemHeight:0,B=F.at[1]==="top"?F.targetHeight:-F.targetHeight,A=-2*F.offset[1];e.top+=F.collisionPosition.top<0?C+B+A:D>0?C+B+A:0}}},p.offset.setOffset||(p.offset.setOffset=function(A,G){/static/.test(p.curCSS(A,"position"))&&(A.style.position="relative");var F=p(A),E=F.offset(),D=parseInt(p.curCSS(A,"top",!0),10)||0,C=parseInt(p.curCSS(A,"left",!0),10)||0,B={top:G.top-E.top+D,left:G.left-E.left+C};"using" in G?G.using.call(A,B):F.css(B)},p.fn.offset=function(d){var e=this[0];return !e||!e.ownerDocument?null:d?p.isFunction(d)?this.each(function(b){p(this).offset(d.call(this,b,p(this).offset()))}):this.each(function(){p.offset.setOffset(this,d)}):q.call(this)}),function(){var f=document.getElementsByTagName("body")[0],G=document.createElement("div"),F,E,D,C,B;F=document.createElement(f?"div":"body"),D={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},f&&p.extend(D,{position:"absolute",left:"-1000px",top:"-1000px"});for(var A in D){F.style[A]=D[A]}F.appendChild(G),E=f||document.documentElement,E.insertBefore(F,E.firstChild),G.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",C=p(G).offset(function(e,d){return d}).offset(),F.innerHTML="",E.removeChild(F),B=C.top+C.left+(f?2000:0),w.fractions=B>21&&B<22}()})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(f){var h=this.options;return this.helper||h.disabled||e(f.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(f),this.handle?(h.iframeFix&&e(h.iframeFix===!0?"iframe":h.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(f){var h=this.options;return this.helper=this._createHelper(f),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(f),this.originalPageX=f.pageX,this.originalPageY=f.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),h.containment&&this._setContainment(),this._trigger("start",f)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!h.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,f),this._mouseDrag(f,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,f),!0)},_mouseDrag:function(f,n){this.position=this._generatePosition(f),this.positionAbs=this._convertPositionTo("absolute");if(!n){var h=this._uiHash();if(this._trigger("drag",f,h)===!1){return this._mouseUp({}),!1}this.position=h.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return e.ui.ddmanager&&e.ui.ddmanager.drag(this,f),!1},_mouseStop:function(h){var v=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(v=e.ui.ddmanager.drop(this,h)),this.dropped&&(v=this.dropped,this.dropped=!1);var q=this.element[0],p=!1;while(q&&(q=q.parentNode)){q==document&&(p=!0)}if(!p&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!v||this.options.revert=="valid"&&v||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,v)){var n=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",h)!==!1&&n._clear()})}else{this._trigger("stop",h)!==!1&&this._clear()}return !1},_mouseUp:function(f){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,f),e.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(f){var h=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==f.target&&(h=!0)}),h},_createHelper:function(f){var n=this.options,h=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[f])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return h.parents("body").length||h.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),h[0]!=this.element[0]&&!/(fixed|absolute)/.test(h.css("position"))&&h.css("position","absolute"),h},_adjustOffsetFromHelper:function(f){typeof f=="string"&&(f=f.split(" ")),e.isArray(f)&&(f={left:+f[0],top:+f[1]||0}),"left" in f&&(this.offset.click.left=f.left+this.margins.left),"right" in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left),"top" in f&&(this.offset.click.top=f.top+this.margins.top),"bottom" in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:e(window).scrollLeft())+e(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:e(window).scrollTop())+(e(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){var v=e(h.containment),q=v[0];if(!q){return}var p=v.offset(),n=e(q).css("overflow")!="hidden";this.containment=[(parseInt(e(q).css("borderLeftWidth"),10)||0)+(parseInt(e(q).css("paddingLeft"),10)||0),(parseInt(e(q).css("borderTopWidth"),10)||0)+(parseInt(e(q).css("paddingTop"),10)||0),(n?Math.max(q.scrollWidth,q.offsetWidth):q.offsetWidth)-(parseInt(e(q).css("borderLeftWidth"),10)||0)-(parseInt(e(q).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(q.scrollHeight,q.offsetHeight):q.offsetHeight)-(parseInt(e(q).css("borderTopWidth"),10)||0)-(parseInt(e(q).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=v}else{h.containment.constructor==Array&&(this.containment=h.containment)}},_convertPositionTo:function(h,w){w||(w=this.position);var v=h=="absolute"?1:-1,q=this.options,p=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(p[0].tagName);return{top:w.top+this.offset.relative.top*v+this.offset.parent.top*v-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:p.scrollTop())*v),left:w.left+this.offset.relative.left*v+this.offset.parent.left*v-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:p.scrollLeft())*v)}},_generatePosition:function(B){var A=this.options,z=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,y=/(html|body)/i.test(z[0].tagName),x=B.pageX,w=B.pageY;if(this.originalPosition){var v;if(this.containment){if(this.relative_container){var q=this.relative_container.offset();v=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]}else{v=this.containment}B.pageX-this.offset.click.left<v[0]&&(x=v[0]+this.offset.click.left),B.pageY-this.offset.click.top<v[1]&&(w=v[1]+this.offset.click.top),B.pageX-this.offset.click.left>v[2]&&(x=v[2]+this.offset.click.left),B.pageY-this.offset.click.top>v[3]&&(w=v[3]+this.offset.click.top)}if(A.grid){var p=A.grid[1]?this.originalPageY+Math.round((w-this.originalPageY)/A.grid[1])*A.grid[1]:this.originalPageY;w=v?p-this.offset.click.top<v[1]||p-this.offset.click.top>v[3]?p-this.offset.click.top<v[1]?p+A.grid[1]:p-A.grid[1]:p:p;var n=A.grid[0]?this.originalPageX+Math.round((x-this.originalPageX)/A.grid[0])*A.grid[0]:this.originalPageX;x=v?n-this.offset.click.left<v[0]||n-this.offset.click.left>v[2]?n-this.offset.click.left<v[0]?n+A.grid[0]:n-A.grid[0]:n:n}}return{top:w-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():y?0:z.scrollTop()),left:x-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():y?0:z.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(f,n,h){return h=h||this._uiHash(),e.ui.plugin.call(this,f,[n,h]),f=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,f,n,h)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.21"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(h,v){var q=e(this).data("draggable"),p=q.options,n=e.extend({},v,{item:q.element});q.sortables=[],e(p.connectToSortable).each(function(){var b=e.data(this,"sortable");b&&!b.options.disabled&&(q.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",h,n))})},stop:function(f,p){var n=e(this).data("draggable"),h=e.extend({},p,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(f),this.instance.options.helper=this.instance.options._helper,n.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",f,h))})},drag:function(h,v){var q=e(this).data("draggable"),p=this,n=function(E){var D=this.offset.click.top,C=this.offset.click.left,B=this.positionAbs.top,A=this.positionAbs.left,z=E.height,y=E.width,x=E.top,w=E.left;return e.ui.isOver(B+D,A+C,x,w,z,y)};e.each(q.sortables,function(b){this.instance.positionAbs=q.positionAbs,this.instance.helperProportions=q.helperProportions,this.instance.offset.click=q.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(p).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return v.helper[0]},h.target=this.instance.currentItem[0],this.instance._mouseCapture(h,!0),this.instance._mouseStart(h,!0,!0),this.instance.offset.click.top=q.offset.click.top,this.instance.offset.click.left=q.offset.click.left,this.instance.offset.parent.left-=q.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=q.offset.parent.top-this.instance.offset.parent.top,q._trigger("toSortable",h),q.dropped=this.instance.element,q.currentItem=q.element,this.instance.fromOutside=q),this.instance.currentItem&&this.instance._mouseDrag(h)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",h,this.instance._uiHash(this.instance)),this.instance._mouseStop(h,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),q._trigger("fromSortable",h),q.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(f,p){var n=e("body"),h=e(this).data("draggable").options;n.css("cursor")&&(h._cursor=n.css("cursor")),n.css("cursor",h.cursor)},stop:function(f,n){var h=e(this).data("draggable").options;h._cursor&&e("body").css("cursor",h._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(f,p){var n=e(p.helper),h=e(this).data("draggable").options;n.css("opacity")&&(h._opacity=n.css("opacity")),n.css("opacity",h.opacity)},stop:function(f,n){var h=e(this).data("draggable").options;h._opacity&&e(n.helper).css("opacity",h._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(f,n){var h=e(this).data("draggable");h.scrollParent[0]!=document&&h.scrollParent[0].tagName!="HTML"&&(h.overflowOffset=h.scrollParent.offset())},drag:function(h,v){var q=e(this).data("draggable"),p=q.options,n=!1;if(q.scrollParent[0]!=document&&q.scrollParent[0].tagName!="HTML"){if(!p.axis||p.axis!="x"){q.overflowOffset.top+q.scrollParent[0].offsetHeight-h.pageY<p.scrollSensitivity?q.scrollParent[0].scrollTop=n=q.scrollParent[0].scrollTop+p.scrollSpeed:h.pageY-q.overflowOffset.top<p.scrollSensitivity&&(q.scrollParent[0].scrollTop=n=q.scrollParent[0].scrollTop-p.scrollSpeed)}if(!p.axis||p.axis!="y"){q.overflowOffset.left+q.scrollParent[0].offsetWidth-h.pageX<p.scrollSensitivity?q.scrollParent[0].scrollLeft=n=q.scrollParent[0].scrollLeft+p.scrollSpeed:h.pageX-q.overflowOffset.left<p.scrollSensitivity&&(q.scrollParent[0].scrollLeft=n=q.scrollParent[0].scrollLeft-p.scrollSpeed)}}else{if(!p.axis||p.axis!="x"){h.pageY-e(document).scrollTop()<p.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-p.scrollSpeed):e(window).height()-(h.pageY-e(document).scrollTop())<p.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+p.scrollSpeed))}if(!p.axis||p.axis!="y"){h.pageX-e(document).scrollLeft()<p.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-p.scrollSpeed):e(window).width()-(h.pageX-e(document).scrollLeft())<p.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+p.scrollSpeed))}}n!==!1&&e.ui.ddmanager&&!p.dropBehaviour&&e.ui.ddmanager.prepareOffsets(q,h)}}),e.ui.plugin.add("draggable","snap",{start:function(f,p){var n=e(this).data("draggable"),h=n.options;n.snapElements=[],e(h.snap.constructor!=String?h.snap.items||":data(draggable)":h.snap).each(function(){var q=e(this),v=q.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:q.outerWidth(),height:q.outerHeight(),top:v.top,left:v.left})})},drag:function(N,M){var L=e(this).data("draggable"),K=L.options,J=K.snapTolerance,I=M.offset.left,H=I+L.helperProportions.width,G=M.offset.top,F=G+L.helperProportions.height;for(var E=L.snapElements.length-1;E>=0;E--){var D=L.snapElements[E].left,C=D+L.snapElements[E].width,B=L.snapElements[E].top,A=B+L.snapElements[E].height;if(!(D-J<I&&I<C+J&&B-J<G&&G<A+J||D-J<I&&I<C+J&&B-J<F&&F<A+J||D-J<H&&H<C+J&&B-J<G&&G<A+J||D-J<H&&H<C+J&&B-J<F&&F<A+J)){L.snapElements[E].snapping&&L.options.snap.release&&L.options.snap.release.call(L.element,N,e.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=!1;continue}if(K.snapMode!="inner"){var z=Math.abs(B-F)<=J,y=Math.abs(A-G)<=J,x=Math.abs(D-H)<=J,w=Math.abs(C-I)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B-L.helperProportions.height,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D-L.helperProportions.width}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C}).left-L.margins.left)}var v=z||y||x||w;if(K.snapMode!="outer"){var z=Math.abs(B-G)<=J,y=Math.abs(A-F)<=J,x=Math.abs(D-I)<=J,w=Math.abs(C-H)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A-L.helperProportions.height,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C-L.helperProportions.width}).left-L.margins.left)}!L.snapElements[E].snapping&&(z||y||x||w||v)&&L.options.snap.snap&&L.options.snap.snap.call(L.element,N,e.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=z||y||x||w||v}}}),e.ui.plugin.add("draggable","stack",{start:function(h,v){var q=e(this).data("draggable").options,p=e.makeArray(e(q.stack)).sort(function(f,w){return(parseInt(e(f).css("zIndex"),10)||0)-(parseInt(e(w).css("zIndex"),10)||0)});if(!p.length){return}var n=parseInt(p[0].style.zIndex)||0;e(p).each(function(b){this.style.zIndex=n+b}),this[0].style.zIndex=n+p.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(f,p){var n=e(p.helper),h=e(this).data("draggable").options;n.css("zIndex")&&(h._zIndex=n.css("zIndex")),n.css("zIndex",h.zIndex)},stop:function(f,n){var h=e(this).data("draggable").options;h._zIndex&&e(n.helper).css("zIndex",h._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var f=this.options,h=f.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(h)?h:function(b){return b.is(h)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[f.scope]=e.ui.ddmanager.droppables[f.scope]||[],e.ui.ddmanager.droppables[f.scope].push(this),f.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var f=e.ui.ddmanager.droppables[this.options.scope];for(var h=0;h<f.length;h++){f[h]==this&&f.splice(h,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(f,h){f=="accept"&&(this.accept=e.isFunction(h)?h:function(b){return b.is(h)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(f){var h=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),h&&this._trigger("activate",f,this.ui(h))},_deactivate:function(f){var h=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),h&&this._trigger("deactivate",f,this.ui(h))},_over:function(f){var h=e.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",f,this.ui(h)))},_out:function(f){var h=e.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",f,this.ui(h)))},_drop:function(f,p){var n=p||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0]){return !1}var h=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var q=e.data(this,"droppable");if(q.options.greedy&&!q.options.disabled&&q.options.scope==n.options.scope&&q.accept.call(q.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(q,{offset:q.element.offset()}),q.options.tolerance)){return h=!0,!1}}),h?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",f,this.ui(n)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.21"}),e.ui.intersect=function(G,F,E){if(!F.offset){return !1}var D=(G.positionAbs||G.position.absolute).left,C=D+G.helperProportions.width,B=(G.positionAbs||G.position.absolute).top,A=B+G.helperProportions.height,z=F.offset.left,y=z+F.proportions.width,x=F.offset.top,w=x+F.proportions.height;switch(E){case"fit":return z<=D&&C<=y&&x<=B&&A<=w;case"intersect":return z<D+G.helperProportions.width/2&&C-G.helperProportions.width/2<y&&x<B+G.helperProportions.height/2&&A-G.helperProportions.height/2<w;case"pointer":var v=(G.positionAbs||G.position.absolute).left+(G.clickOffset||G.offset.click).left,q=(G.positionAbs||G.position.absolute).top+(G.clickOffset||G.offset.click).top,p=e.ui.isOver(q,v,x,z,F.proportions.height,F.proportions.width);return p;case"touch":return(B>=x&&B<=w||A>=x&&A<=w||B<x&&A>w)&&(D>=z&&D<=y||C>=z&&C<=y||D<z&&C>y);default:return !1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(n,y){var x=e.ui.ddmanager.droppables[n.options.scope]||[],w=y?y.type:null,v=(n.currentItem||n.element).find(":data(droppable)").andSelf();g:for(var q=0;q<x.length;q++){if(x[q].options.disabled||n&&!x[q].accept.call(x[q].element[0],n.currentItem||n.element)){continue}for(var p=0;p<v.length;p++){if(v[p]==x[q].element[0]){x[q].proportions.height=0;continue g}}x[q].visible=x[q].element.css("display")!="none";if(!x[q].visible){continue}w=="mousedown"&&x[q]._activate.call(x[q],y),x[q].offset=x[q].element.offset(),x[q].proportions={width:x[q].element[0].offsetWidth,height:x[q].element[0].offsetHeight}}},drop:function(f,n){var h=!1;return e.each(e.ui.ddmanager.droppables[f.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&e.ui.intersect(f,this,this.options.tolerance)&&(h=this._drop.call(this,n)||h),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),h},dragStart:function(f,h){f.element.parents(":not(body,html)").bind("scroll.droppable",function(){f.options.refreshPositions||e.ui.ddmanager.prepareOffsets(f,h)})},drag:function(f,h){f.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(f,h),e.each(e.ui.ddmanager.droppables[f.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var q=e.ui.intersect(f,this,this.options.tolerance),p=!q&&this.isover==1?"isout":q&&this.isover==0?"isover":null;if(!p){return}var n;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(n=e.data(b[0],"droppable"),n.greedyChild=p=="isover"?1:0)}n&&p=="isover"&&(n.isover=0,n.isout=1,n._out.call(n,h)),this[p]=1,this[p=="isout"?"isover":"isout"]=0,this[p=="isover"?"_over":"_out"].call(this,h),n&&p=="isout"&&(n.isout=0,n.isover=1,n._over.call(n,h))})},dragStop:function(f,h){f.element.parents(":not(body,html)").unbind("scroll.droppable"),f.options.refreshPositions||e.ui.ddmanager.prepareOffsets(f,h)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var p=this,z=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!z.aspectRatio,aspectRatio:z.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:z.helper||z.ghost||z.animate?z.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=z.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var y=this.handles.split(",");this.handles={};for(var x=0;x<y.length;x++){var w=f.trim(y[x]),v="ui-resizable-"+w,q=f('<div class="ui-resizable-handle '+v+'"></div>');q.css({zIndex:z.zIndex}),"se"==w&&q.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[w]=".ui-resizable-"+w,this.element.append(q)}}this._renderAxis=function(A){A=A||this.element;for(var E in this.handles){this.handles[E].constructor==String&&(this.handles[E]=f(this.handles[E],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var D=f(this.handles[E],this.element),C=0;C=/sw|ne|nw|se|n|s/.test(E)?D.outerHeight():D.outerWidth();var B=["padding",/ne|nw|n/.test(E)?"Top":/se|sw|s/.test(E)?"Bottom":/^e$/.test(E)?"Right":"Left"].join("");A.css(B,C),this._proportionallyResize()}if(!f(this.handles[E]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!p.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}p.axis=b&&b[1]?b[1]:"se"}}),z.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(z.disabled){return}f(this).removeClass("ui-resizable-autohide"),p._handles.show()},function(){if(z.disabled){return}p.resizing||(f(this).addClass("ui-resizable-autohide"),p._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(q){f(q).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var p=this.element;p.after(this.originalElement.css({position:p.css("position"),width:p.outerWidth(),height:p.outerHeight(),top:p.css("top"),left:p.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),this},_mouseCapture:function(p){var v=!1;for(var q in this.handles){f(this.handles[q])[0]==p.target&&(v=!0)}return !this.options.disabled&&v},_mouseStart:function(p){var z=this.options,y=this.element.position(),x=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(x.is(".ui-draggable")||/absolute/.test(x.css("position")))&&x.css({position:"absolute",top:y.top,left:y.left}),this._renderProxy();var w=n(this.helper.css("left")),v=n(this.helper.css("top"));z.containment&&(w+=f(z.containment).scrollLeft()||0,v+=f(z.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:w,top:v},this.size=this._helper?{width:x.outerWidth(),height:x.outerHeight()}:{width:x.width(),height:x.height()},this.originalSize=this._helper?{width:x.outerWidth(),height:x.outerHeight()}:{width:x.width(),height:x.height()},this.originalPosition={left:w,top:v},this.sizeDiff={width:x.outerWidth()-x.width(),height:x.outerHeight()-x.height()},this.originalMousePosition={left:p.pageX,top:p.pageY},this.aspectRatio=typeof z.aspectRatio=="number"?z.aspectRatio:this.originalSize.width/this.originalSize.height||1;var q=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",q=="auto"?this.axis+"-resize":q),x.addClass("ui-resizable-resizing"),this._propagate("start",p),!0},_mouseDrag:function(F){var E=this.helper,D=this.options,C={},B=this,A=this.originalMousePosition,z=this.axis,y=F.pageX-A.left||0,x=F.pageY-A.top||0,w=this._change[z];if(!w){return !1}var v=w.apply(this,[F,y,x]),q=f.browser.msie&&f.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(F.shiftKey);if(this._aspectRatio||F.shiftKey){v=this._updateRatio(v,F)}return v=this._respectSize(v,F),this._propagate("resize",F),E.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(v),this._trigger("resize",F,this.ui()),!1},_mouseStop:function(C){this.resizing=!1;var B=this.options,A=this;if(this._helper){var z=this._proportionallyResizeElements,y=z.length&&/textarea/i.test(z[0].nodeName),x=y&&f.ui.hasScroll(z[0],"left")?0:A.sizeDiff.height,w=y?0:A.sizeDiff.width,v={width:A.helper.width()-w,height:A.helper.height()-x},q=parseInt(A.element.css("left"),10)+(A.position.left-A.originalPosition.left)||null,p=parseInt(A.element.css("top"),10)+(A.position.top-A.originalPosition.top)||null;B.animate||this.element.css(f.extend(v,{top:p,left:q})),A.helper.height(A.size.height),A.helper.width(A.size.width),this._helper&&!B.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",C),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(p){var d=this.options,y,x,w,v,q;q={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||p){y=q.minHeight*this.aspectRatio,w=q.minWidth/this.aspectRatio,x=q.maxHeight*this.aspectRatio,v=q.maxWidth/this.aspectRatio,y>q.minWidth&&(q.minWidth=y),w>q.minHeight&&(q.minHeight=w),x<q.maxWidth&&(q.maxWidth=x),v<q.maxHeight&&(q.maxHeight=v)}this._vBoundaries=q},_updateCache:function(p){var d=this.options;this.offset=this.helper.offset(),h(p.left)&&(this.position.left=p.left),h(p.top)&&(this.position.top=p.top),h(p.height)&&(this.size.height=p.height),h(p.width)&&(this.size.width=p.width)},_updateRatio:function(p,d){var x=this.options,w=this.position,v=this.size,q=this.axis;return h(p.height)?p.width=p.height*this.aspectRatio:h(p.width)&&(p.height=p.width/this.aspectRatio),q=="sw"&&(p.left=w.left+(v.width-p.width),p.top=null),q=="nw"&&(p.top=w.top+(v.height-p.height),p.left=w.left+(v.width-p.width)),p},_respectSize:function(H,G){var F=this.helper,E=this._vBoundaries,D=this._aspectRatio||G.shiftKey,C=this.axis,B=h(H.width)&&E.maxWidth&&E.maxWidth<H.width,A=h(H.height)&&E.maxHeight&&E.maxHeight<H.height,z=h(H.width)&&E.minWidth&&E.minWidth>H.width,y=h(H.height)&&E.minHeight&&E.minHeight>H.height;z&&(H.width=E.minWidth),y&&(H.height=E.minHeight),B&&(H.width=E.maxWidth),A&&(H.height=E.maxHeight);var x=this.originalPosition.left+this.originalSize.width,w=this.position.top+this.size.height,v=/sw|nw|w/.test(C),q=/nw|ne|n/.test(C);z&&v&&(H.left=x-E.minWidth),B&&v&&(H.left=x-E.maxWidth),y&&q&&(H.top=w-E.minHeight),A&&q&&(H.top=w-E.maxHeight);var d=!H.width&&!H.height;return d&&!H.left&&H.top?H.top=null:d&&!H.top&&H.left&&(H.left=null),H},_proportionallyResize:function(){var p=this.options;if(!this._proportionallyResizeElements.length){return}var y=this.helper||this.element;for(var x=0;x<this._proportionallyResizeElements.length;x++){var w=this._proportionallyResizeElements[x];if(!this.borderDif){var v=[w.css("borderTopWidth"),w.css("borderRightWidth"),w.css("borderBottomWidth"),w.css("borderLeftWidth")],q=[w.css("paddingTop"),w.css("paddingRight"),w.css("paddingBottom"),w.css("paddingLeft")];this.borderDif=f.map(v,function(A,z){var C=parseInt(A,10)||0,B=parseInt(q[z],10)||0;return C+B})}if(!f.browser.msie||!f(y).is(":hidden")&&!f(y).parents(":hidden").length){w.css({height:y.height()-this.borderDif[0]-this.borderDif[2]||0,width:y.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var p=this.element,x=this.options;this.elementOffset=p.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var w=f.browser.msie&&f.browser.version<7,v=w?1:0,q=w?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+q,height:this.element.outerHeight()+q,position:"absolute",left:this.elementOffset.left-v+"px",top:this.elementOffset.top-v+"px",zIndex:++x.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(p,d,q){return{width:this.originalSize.width+d}},w:function(q,p,y){var x=this.options,w=this.originalSize,v=this.originalPosition;return{left:v.left+p,width:w.width-p}},n:function(q,p,y){var x=this.options,w=this.originalSize,v=this.originalPosition;return{top:v.top+y,height:w.height-y}},s:function(p,d,q){return{height:this.originalSize.height+q}},se:function(p,v,q){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[p,v,q]))},sw:function(p,v,q){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[p,v,q]))},ne:function(p,v,q){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[p,v,q]))},nw:function(p,v,q){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[p,v,q]))}},_propagate:function(d,p){f.ui.plugin.call(this,d,[p,this.ui()]),d!="resize"&&this._trigger(d,p,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(p,x){var w=f(this).data("resizable"),v=w.options,q=function(d){f(d).each(function(){var y=f(this);y.data("resizable-alsoresize",{width:parseInt(y.width(),10),height:parseInt(y.height(),10),left:parseInt(y.css("left"),10),top:parseInt(y.css("top"),10)})})};typeof v.alsoResize=="object"&&!v.alsoResize.parentNode?v.alsoResize.length?(v.alsoResize=v.alsoResize[0],q(v.alsoResize)):f.each(v.alsoResize,function(b){q(b)}):q(v.alsoResize)},resize:function(p,A){var z=f(this).data("resizable"),y=z.options,x=z.originalSize,w=z.originalPosition,v={height:z.size.height-x.height||0,width:z.size.width-x.width||0,top:z.position.top-w.top||0,left:z.position.left-w.left||0},q=function(B,C){f(B).each(function(){var d=f(this),F=f(this).data("resizable-alsoresize"),E={},D=C&&C.length?C:d.parents(A.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(D,function(H,G){var I=(F[G]||0)+(v[G]||0);I&&I>=0&&(E[G]=I||null)}),d.css(E)})};typeof y.alsoResize=="object"&&!y.alsoResize.nodeType?f.each(y.alsoResize,function(B,d){q(B,d)}):q(y.alsoResize)},stop:function(d,p){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(D,C){var B=f(this).data("resizable"),A=B.options,z=B._proportionallyResizeElements,y=z.length&&/textarea/i.test(z[0].nodeName),x=y&&f.ui.hasScroll(z[0],"left")?0:B.sizeDiff.height,w=y?0:B.sizeDiff.width,v={width:B.size.width-w,height:B.size.height-x},q=parseInt(B.element.css("left"),10)+(B.position.left-B.originalPosition.left)||null,p=parseInt(B.element.css("top"),10)+(B.position.top-B.originalPosition.top)||null;B.element.animate(f.extend(v,p&&q?{top:p,left:q}:{}),{duration:A.animateDuration,easing:A.animateEasing,step:function(){var b={width:parseInt(B.element.css("width"),10),height:parseInt(B.element.css("height"),10),top:parseInt(B.element.css("top"),10),left:parseInt(B.element.css("left"),10)};z&&z.length&&f(z[0]).css({width:b.width,height:b.height}),B._updateCache(b),B._propagate("resize",D)}})}}),f.ui.plugin.add("resizable","containment",{start:function(H,G){var F=f(this).data("resizable"),E=F.options,D=F.element,C=E.containment,B=C instanceof f?C.get(0):/parent/.test(C)?D.parent().get(0):C;if(!B){return}F.containerElement=f(B);if(/document/.test(C)||C==document){F.containerOffset={left:0,top:0},F.containerPosition={left:0,top:0},F.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var A=f(B),z=[];f(["Top","Right","Left","Bottom"]).each(function(p,d){z[p]=n(A.css("padding"+d))}),F.containerOffset=A.offset(),F.containerPosition=A.position(),F.containerSize={height:A.innerHeight()-z[3],width:A.innerWidth()-z[1]};var y=F.containerOffset,x=F.containerSize.height,w=F.containerSize.width,v=f.ui.hasScroll(B,"left")?B.scrollWidth:w,q=f.ui.hasScroll(B)?B.scrollHeight:x;F.parentData={element:B,left:y.left,top:y.top,width:v,height:q}}},resize:function(I,H){var G=f(this).data("resizable"),F=G.options,E=G.containerSize,D=G.containerOffset,C=G.size,B=G.position,A=G._aspectRatio||I.shiftKey,z={top:0,left:0},y=G.containerElement;y[0]!=document&&/static/.test(y.css("position"))&&(z=D),B.left<(G._helper?D.left:0)&&(G.size.width=G.size.width+(G._helper?G.position.left-D.left:G.position.left-z.left),A&&(G.size.height=G.size.width/G.aspectRatio),G.position.left=F.helper?D.left:0),B.top<(G._helper?D.top:0)&&(G.size.height=G.size.height+(G._helper?G.position.top-D.top:G.position.top),A&&(G.size.width=G.size.height*G.aspectRatio),G.position.top=G._helper?D.top:0),G.offset.left=G.parentData.left+G.position.left,G.offset.top=G.parentData.top+G.position.top;var x=Math.abs((G._helper?G.offset.left-z.left:G.offset.left-z.left)+G.sizeDiff.width),w=Math.abs((G._helper?G.offset.top-z.top:G.offset.top-D.top)+G.sizeDiff.height),v=G.containerElement.get(0)==G.element.parent().get(0),q=/relative|absolute/.test(G.containerElement.css("position"));v&&q&&(x-=G.parentData.left),x+G.size.width>=G.parentData.width&&(G.size.width=G.parentData.width-x,A&&(G.size.height=G.size.width/G.aspectRatio)),w+G.size.height>=G.parentData.height&&(G.size.height=G.parentData.height-w,A&&(G.size.width=G.size.height*G.aspectRatio))},stop:function(E,D){var C=f(this).data("resizable"),B=C.options,A=C.position,z=C.containerOffset,y=C.containerPosition,x=C.containerElement,w=f(C.helper),v=w.offset(),q=w.outerWidth()-C.sizeDiff.width,p=w.outerHeight()-C.sizeDiff.height;C._helper&&!B.animate&&/relative/.test(x.css("position"))&&f(this).css({left:v.left-y.left-z.left,width:q,height:p}),C._helper&&!B.animate&&/static/.test(x.css("position"))&&f(this).css({left:v.left-y.left-z.left,width:q,height:p})}}),f.ui.plugin.add("resizable","ghost",{start:function(p,x){var w=f(this).data("resizable"),v=w.options,q=w.size;w.ghost=w.originalElement.clone(),w.ghost.css({opacity:0.25,display:"block",position:"relative",height:q.height,width:q.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof v.ghost=="string"?v.ghost:""),w.ghost.appendTo(w.helper)},resize:function(p,w){var v=f(this).data("resizable"),q=v.options;v.ghost&&v.ghost.css({position:"relative",height:v.size.height,width:v.size.width})},stop:function(p,w){var v=f(this).data("resizable"),q=v.options;v.ghost&&v.helper&&v.helper.get(0).removeChild(v.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(D,C){var B=f(this).data("resizable"),A=B.options,z=B.size,y=B.originalSize,x=B.originalPosition,w=B.axis,v=A._aspectRatio||D.shiftKey;A.grid=typeof A.grid=="number"?[A.grid,A.grid]:A.grid;var q=Math.round((z.width-y.width)/(A.grid[0]||1))*(A.grid[0]||1),p=Math.round((z.height-y.height)/(A.grid[1]||1))*(A.grid[1]||1);/^(se|s|e)$/.test(w)?(B.size.width=y.width+q,B.size.height=y.height+p):/^(ne)$/.test(w)?(B.size.width=y.width+q,B.size.height=y.height+p,B.position.top=x.top-p):/^(sw)$/.test(w)?(B.size.width=y.width+q,B.size.height=y.height+p,B.position.left=x.left-q):(B.size.width=y.width+q,B.size.height=y.height+p,B.position.top=x.top-p,B.position.left=x.left-q)}});var n=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var f=this;this.element.addClass("ui-selectable"),this.dragged=!1;var h;this.refresh=function(){h=e(f.options.filter,f.element[0]),h.addClass("ui-selectee"),h.each(function(){var n=e(this),p=n.offset();e.data(this,"selectable-item",{element:this,$element:n,left:p.left,top:p.top,right:p.left+n.outerWidth(),bottom:p.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=h.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(f){var n=this;this.opos=[f.pageX,f.pageY];if(this.options.disabled){return}var h=this.options;this.selectees=e(h.filter,this.element[0]),this._trigger("start",f),e(h.appendTo).append(this.helper),this.helper.css({left:f.clientX,top:f.clientY,width:0,height:0}),h.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=!0,!f.metaKey&&!f.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,n._trigger("unselecting",f,{unselecting:b.element}))}),e(f.target).parents().andSelf().each(function(){var p=e.data(this,"selectable-item");if(p){var b=!f.metaKey&&!f.ctrlKey||!p.$element.hasClass("ui-selected");return p.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),p.unselecting=!b,p.selecting=b,p.selected=b,b?n._trigger("selecting",f,{selecting:p.element}):n._trigger("unselecting",f,{unselecting:p.element}),!1}})},_mouseDrag:function(n){var z=this;this.dragged=!0;if(this.options.disabled){return}var y=this.options,x=this.opos[0],w=this.opos[1],v=n.pageX,q=n.pageY;if(x>v){var p=v;v=x,x=p}if(w>q){var p=q;q=w,w=p}return this.helper.css({left:x,top:w,width:v-x,height:q-w}),this.selectees.each(function(){var f=e.data(this,"selectable-item");if(!f||f.element==z.element[0]){return}var b=!1;y.tolerance=="touch"?b=!(f.left>v||f.right<x||f.top>q||f.bottom<w):y.tolerance=="fit"&&(b=f.left>x&&f.right<v&&f.top>w&&f.bottom<q),b?(f.selected&&(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,z._trigger("selecting",n,{selecting:f.element}))):(f.selecting&&((n.metaKey||n.ctrlKey)&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),f.unselecting=!0),z._trigger("unselecting",n,{unselecting:f.element}))),f.selected&&!n.metaKey&&!n.ctrlKey&&!f.startselected&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,z._trigger("unselecting",n,{unselecting:f.element})))}),!1},_mouseStop:function(f){var n=this;this.dragged=!1;var h=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,n._trigger("unselected",f,{unselected:b.element})}),e(".ui-selecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,n._trigger("selected",f,{selected:b.element})}),this._trigger("stop",f),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var f=this.items.length-1;f>=0;f--){this.items[f].item.removeData(this.widgetName+"-item")}return this},_setOption:function(f,h){f==="disabled"?(this.options[f]=h,this.widget()[h?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(n,y){var x=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(n);var w=null,v=this,q=e(n.target).parents().each(function(){if(e.data(this,x.widgetName+"-item")==v){return w=e(this),!1}});e.data(n.target,x.widgetName+"-item")==v&&(w=e(n.target));if(!w){return !1}if(this.options.handle&&!y){var p=!1;e(this.options.handle,w).find("*").andSelf().each(function(){this==n.target&&(p=!0)});if(!p){return !1}}return this.currentItem=w,this._removeCurrentsFromItems(),!0},_mouseStart:function(h,w,v){var q=this.options,p=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,q.cursorAt&&this._adjustOffsetFromHelper(q.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),q.containment&&this._setContainment(),q.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",q.cursor)),q.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",q.opacity)),q.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",q.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!v){for(var n=this.containers.length-1;n>=0;n--){this.containers[n]._trigger("activate",h,p._uiHash(this))}}return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!q.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(n){this.position=this._generatePosition(n),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var y=this.options,x=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-n.pageY<y.scrollSensitivity?this.scrollParent[0].scrollTop=x=this.scrollParent[0].scrollTop+y.scrollSpeed:n.pageY-this.overflowOffset.top<y.scrollSensitivity&&(this.scrollParent[0].scrollTop=x=this.scrollParent[0].scrollTop-y.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-n.pageX<y.scrollSensitivity?this.scrollParent[0].scrollLeft=x=this.scrollParent[0].scrollLeft+y.scrollSpeed:n.pageX-this.overflowOffset.left<y.scrollSensitivity&&(this.scrollParent[0].scrollLeft=x=this.scrollParent[0].scrollLeft-y.scrollSpeed)):(n.pageY-e(document).scrollTop()<y.scrollSensitivity?x=e(document).scrollTop(e(document).scrollTop()-y.scrollSpeed):e(window).height()-(n.pageY-e(document).scrollTop())<y.scrollSensitivity&&(x=e(document).scrollTop(e(document).scrollTop()+y.scrollSpeed)),n.pageX-e(document).scrollLeft()<y.scrollSensitivity?x=e(document).scrollLeft(e(document).scrollLeft()-y.scrollSpeed):e(window).width()-(n.pageX-e(document).scrollLeft())<y.scrollSensitivity&&(x=e(document).scrollLeft(e(document).scrollLeft()+y.scrollSpeed))),x!==!1&&e.ui.ddmanager&&!y.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,n)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var w=this.items.length-1;w>=0;w--){var v=this.items[w],q=v.item[0],p=this._intersectsWithPointer(v);if(!p){continue}if(q!=this.currentItem[0]&&this.placeholder[p==1?"next":"prev"]()[0]!=q&&!e.ui.contains(this.placeholder[0],q)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],q):!0)){this.direction=p==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(v)){this._rearrange(n,v)}else{break}this._trigger("change",n,this._uiHash());break}}return this._contactContainers(n),e.ui.ddmanager&&e.ui.ddmanager.drag(this,n),this._trigger("sort",n,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(f,p){if(!f){return}e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,f);if(this.options.revert){var n=this,h=n.placeholder.offset();n.reverting=!0,e(this.helper).animate({left:h.left-this.offset.parent.left-n.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-n.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(f)})}else{this._clear(f,p)}return !1},cancel:function(){var f=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("deactivate",null,f._uiHash(this)),this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",null,f._uiHash(this)),this.containers[h].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(f){var n=this._getItemsAsjQuery(f&&f.connected),h=[];return f=f||{},e(n).each(function(){var b=(e(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);b&&h.push((f.key||b[1]+"[]")+"="+(f.key&&f.expression?b[1]:b[2]))}),!h.length&&f.key&&h.push(f.key+"="),h.join("&")},toArray:function(f){var n=this._getItemsAsjQuery(f&&f.connected),h=[];return f=f||{},n.each(function(){h.push(e(f.item||this).attr(f.attribute||"id")||"")}),h},_intersectsWith:function(D){var C=this.positionAbs.left,B=C+this.helperProportions.width,A=this.positionAbs.top,z=A+this.helperProportions.height,y=D.left,x=y+D.width,w=D.top,v=w+D.height,q=this.offset.click.top,p=this.offset.click.left,n=A+q>w&&A+q<v&&C+p>y&&C+p<x;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>D[this.floating?"width":"height"]?n:y<C+this.helperProportions.width/2&&B-this.helperProportions.width/2<x&&w<A+this.helperProportions.height/2&&z-this.helperProportions.height/2<v},_intersectsWithPointer:function(h){var w=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height),v=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width),q=w&&v,p=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return q?this.floating?n&&n=="right"||p=="down"?2:1:p&&(p=="down"?2:1):!1},_intersectsWithSides:function(h){var v=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),q=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),p=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?n=="right"&&q||n=="left"&&!q:p&&(p=="down"&&v||p=="up"&&!v)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(A){var z=this,y=[],x=[],w=this._connectWith();if(w&&A){for(var v=w.length-1;v>=0;v--){var q=e(w[v]);for(var p=q.length-1;p>=0;p--){var n=e.data(q[p],this.widgetName);n&&n!=this&&!n.options.disabled&&x.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n])}}}x.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var v=x.length-1;v>=0;v--){x[v][0].each(function(){y.push(this)})}return e(y)},_removeCurrentsFromItems:function(){var h=this.currentItem.find(":data("+this.widgetName+"-item)");for(var f=0;f<this.items.length;f++){for(var n=0;n<h.length;n++){h[n]==this.items[f].item[0]&&this.items.splice(f,1)}}},_refreshItems:function(F){this.items=[],this.containers=[this];var E=this.items,D=this,C=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],F,{item:this.currentItem}):e(this.options.items,this.element),this]],B=this._connectWith();if(B&&this.ready){for(var A=B.length-1;A>=0;A--){var z=e(B[A]);for(var y=z.length-1;y>=0;y--){var x=e.data(z[y],this.widgetName);x&&x!=this&&!x.options.disabled&&(C.push([e.isFunction(x.options.items)?x.options.items.call(x.element[0],F,{item:this.currentItem}):e(x.options.items,x.element),x]),this.containers.push(x))}}}for(var A=C.length-1;A>=0;A--){var w=C[A][1],v=C[A][0];for(var y=0,q=v.length;y<q;y++){var p=e(v[y]);p.data(this.widgetName+"-item",w),E.push({item:p,instance:w,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var v=this.items.length-1;v>=0;v--){var q=this.items[v];if(q.instance!=this.currentContainer&&this.currentContainer&&q.item[0]!=this.currentItem[0]){continue}var p=this.options.toleranceElement?e(this.options.toleranceElement,q.item):q.item;h||(q.width=p.outerWidth(),q.height=p.outerHeight());var n=p.offset();q.left=n.left,q.top=n.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var v=this.containers.length-1;v>=0;v--){var n=this.containers[v].element.offset();this.containers[v].containerCache.left=n.left,this.containers[v].containerCache.top=n.top,this.containers[v].containerCache.width=this.containers[v].element.outerWidth(),this.containers[v].containerCache.height=this.containers[v].element.outerHeight()}}return this},_createPlaceholder:function(f){var p=f||this,n=p.options;if(!n.placeholder||n.placeholder.constructor==String){var h=n.placeholder;n.placeholder={element:function(){var q=e(document.createElement(p.currentItem[0].nodeName)).addClass(h||p.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return h||(q.style.visibility="hidden"),q},update:function(v,q){if(h&&!n.forcePlaceholderSize){return}q.height()||q.height(p.currentItem.innerHeight()-parseInt(p.currentItem.css("paddingTop")||0,10)-parseInt(p.currentItem.css("paddingBottom")||0,10)),q.width()||q.width(p.currentItem.innerWidth()-parseInt(p.currentItem.css("paddingLeft")||0,10)-parseInt(p.currentItem.css("paddingRight")||0,10))}}}p.placeholder=e(n.placeholder.element.call(p.element,p.currentItem)),p.currentItem.after(p.placeholder),n.placeholder.update(p,p.placeholder)},_contactContainers:function(A){var z=null,y=null;for(var x=this.containers.length-1;x>=0;x--){if(e.ui.contains(this.currentItem[0],this.containers[x].element[0])){continue}if(this._intersectsWith(this.containers[x].containerCache)){if(z&&e.ui.contains(this.containers[x].element[0],z.element[0])){continue}z=this.containers[x],y=x}else{this.containers[x].containerCache.over&&(this.containers[x]._trigger("out",A,this._uiHash(this)),this.containers[x].containerCache.over=0)}}if(!z){return}if(this.containers.length===1){this.containers[y]._trigger("over",A,this._uiHash(this)),this.containers[y].containerCache.over=1}else{if(this.currentContainer!=this.containers[y]){var w=10000,v=null,q=this.positionAbs[this.containers[y].floating?"left":"top"];for(var p=this.items.length-1;p>=0;p--){if(!e.ui.contains(this.containers[y].element[0],this.items[p].item[0])){continue}var n=this.containers[y].floating?this.items[p].item.offset().left:this.items[p].item.offset().top;Math.abs(n-q)<w&&(w=Math.abs(n-q),v=this.items[p],this.direction=n-q>0?"down":"up")}if(!v&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[y],v?this._rearrange(A,v,null,!0):this._rearrange(A,null,this.containers[y].element,!0),this._trigger("change",A,this._uiHash()),this.containers[y]._trigger("change",A,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[y]._trigger("over",A,this._uiHash(this)),this.containers[y].containerCache.over=1}}},_createHelper:function(f){var n=this.options,h=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[f,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return h.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(h[0]),h[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(h[0].style.width==""||n.forceHelperSize)&&h.width(this.currentItem.width()),(h[0].style.height==""||n.forceHelperSize)&&h.height(this.currentItem.height()),h},_adjustOffsetFromHelper:function(f){typeof f=="string"&&(f=f.split(" ")),e.isArray(f)&&(f={left:+f[0],top:+f[1]||0}),"left" in f&&(this.offset.click.left=f.left+this.margins.left),"right" in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left),"top" in f&&(this.offset.click.top=f.top+this.margins.top),"bottom" in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;f.containment=="parent"&&(f.containment=this.helper[0].parentNode);if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(f.containment)){var p=e(f.containment)[0],n=e(f.containment).offset(),h=e(p).css("overflow")!="hidden";this.containment=[n.left+(parseInt(e(p).css("borderLeftWidth"),10)||0)+(parseInt(e(p).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(p).css("borderTopWidth"),10)||0)+(parseInt(e(p).css("paddingTop"),10)||0)-this.margins.top,n.left+(h?Math.max(p.scrollWidth,p.offsetWidth):p.offsetWidth)-(parseInt(e(p).css("borderLeftWidth"),10)||0)-(parseInt(e(p).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(h?Math.max(p.scrollHeight,p.offsetHeight):p.offsetHeight)-(parseInt(e(p).css("borderTopWidth"),10)||0)-(parseInt(e(p).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,w){w||(w=this.position);var v=h=="absolute"?1:-1,q=this.options,p=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,n=/(html|body)/i.test(p[0].tagName);return{top:w.top+this.offset.relative.top*v+this.offset.parent.top*v-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():n?0:p.scrollTop())*v),left:w.left+this.offset.relative.left*v+this.offset.parent.left*v-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():n?0:p.scrollLeft())*v)}},_generatePosition:function(n){var z=this.options,y=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,x=/(html|body)/i.test(y[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var w=n.pageX,v=n.pageY;if(this.originalPosition){this.containment&&(n.pageX-this.offset.click.left<this.containment[0]&&(w=this.containment[0]+this.offset.click.left),n.pageY-this.offset.click.top<this.containment[1]&&(v=this.containment[1]+this.offset.click.top),n.pageX-this.offset.click.left>this.containment[2]&&(w=this.containment[2]+this.offset.click.left),n.pageY-this.offset.click.top>this.containment[3]&&(v=this.containment[3]+this.offset.click.top));if(z.grid){var q=this.originalPageY+Math.round((v-this.originalPageY)/z.grid[1])*z.grid[1];v=this.containment?q-this.offset.click.top<this.containment[1]||q-this.offset.click.top>this.containment[3]?q-this.offset.click.top<this.containment[1]?q+z.grid[1]:q-z.grid[1]:q:q;var p=this.originalPageX+Math.round((w-this.originalPageX)/z.grid[0])*z.grid[0];w=this.containment?p-this.offset.click.left<this.containment[0]||p-this.offset.click.left>this.containment[2]?p-this.offset.click.left<this.containment[0]?p+z.grid[0]:p-z.grid[0]:p:p}}return{top:v-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():x?0:y.scrollTop()),left:w-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():x?0:y.scrollLeft())}},_rearrange:function(n,h,w,v){w?w[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var q=this,p=this.counter;window.setTimeout(function(){p==q.counter&&q.refreshPositions(!v)},0)},_clear:function(h,v){this.reverting=!1;var q=[],p=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS){if(this._storedCSS[n]=="auto"||this._storedCSS[n]=="static"){this._storedCSS[n]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!v&&q.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!v&&q.push(function(b){this._trigger("update",b,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){v||q.push(function(b){this._trigger("remove",b,this._uiHash())});for(var n=this.containers.length-1;n>=0;n--){e.ui.contains(this.containers[n].element[0],this.currentItem[0])&&!v&&(q.push(function(b){return function(f){b._trigger("receive",f,this._uiHash(this))}}.call(this,this.containers[n])),q.push(function(b){return function(f){b._trigger("update",f,this._uiHash(this))}}.call(this,this.containers[n])))}}for(var n=this.containers.length-1;n>=0;n--){v||q.push(function(b){return function(f){b._trigger("deactivate",f,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(q.push(function(b){return function(f){b._trigger("out",f,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0)}this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!v){this._trigger("beforeStop",h,this._uiHash());for(var n=0;n<q.length;n++){q[n].call(this,h)}this._trigger("stop",h,this._uiHash())}return !1}v||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!v){for(var n=0;n<q.length;n++){q[n].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(f){var h=f||this;return{helper:h.helper,placeholder:h.placeholder||e([]),position:h.position,originalPosition:h.originalPosition,offset:h.positionAbs,item:h.currentItem,sender:f?f.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var f=this,p=f.options;f.running=0,f.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),f.headers=f.element.find(p.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(p.disabled){return}e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(p.disabled){return}e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(p.disabled){return}e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(p.disabled){return}e(this).removeClass("ui-state-focus")}),f.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(p.navigation){var n=f.element.find("a").filter(p.navigationFilter).eq(0);if(n.length){var h=n.closest(".ui-accordion-header");h.length?f.active=h:f.active=n.closest(".ui-accordion-content").prev()}}f.active=f._findActive(f.active||p.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),f.active.next().addClass("ui-accordion-content-active"),f._createIcons(),f.resize(),f.element.attr("role","tablist"),f.headers.attr("role","tab").bind("keydown.accordion",function(b){return f._keydown(b)}).next().attr("role","tabpanel"),f.headers.not(f.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),f.active.length?f.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):f.headers.eq(0).attr("tabIndex",0),e.browser.safari||f.headers.find("a").attr("tabIndex",-1),p.event&&f.headers.bind(p.event.split(" ").join(".accordion ")+".accordion",function(b){f._clickHandler.call(f,b,this),b.preventDefault()})},_createIcons:function(){var f=this.options;f.icons&&(e("<span></span>").addClass("ui-icon "+f.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(f.icons.header).toggleClass(f.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var f=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var h=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(f.autoHeight||f.fillHeight)&&h.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(f,h){e.Widget.prototype._setOption.apply(this,arguments),f=="active"&&this.activate(h),f=="icons"&&(this._destroyIcons(),h&&this._createIcons()),f=="disabled"&&this.headers.add(this.headers.next())[h?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(this.options.disabled||h.altKey||h.ctrlKey){return}var v=e.ui.keyCode,q=this.headers.length,p=this.headers.index(h.target),n=!1;switch(h.keyCode){case v.RIGHT:case v.DOWN:n=this.headers[(p+1)%q];break;case v.LEFT:case v.UP:n=this.headers[(p-1+q)%q];break;case v.SPACE:case v.ENTER:this._clickHandler({target:h.target},h.target),h.preventDefault()}return n?(e(h.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),!1):!0},resize:function(){var f=this.options,n;if(f.fillSpace){if(e.browser.msie){var h=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",h),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else{f.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).height("").height())}).height(n))}return this},activate:function(h){this.options.active=h;var f=this._findActive(h)[0];return this._clickHandler({target:f},f),this},_findActive:function(f){return f?typeof f=="number"?this.headers.filter(":eq("+f+")"):this.headers.not(this.headers.not(f)):f===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(B,A){var z=this.options;if(z.disabled){return}if(!B.target){if(!z.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(z.icons.headerSelected).addClass(z.icons.header),this.active.next().addClass("ui-accordion-content-active");var y=this.active.next(),x={options:z,newHeader:e([]),oldHeader:z.active,newContent:e([]),oldContent:y},w=this.active=e([]);this._toggle(w,y,x);return}var v=e(B.currentTarget||A),q=v[0]===this.active[0];z.active=z.collapsible&&q?!1:this.headers.index(v);if(this.running||!z.collapsible&&q){return}var p=this.active,w=v.next(),y=this.active.next(),x={options:z,newHeader:q&&z.collapsible?e([]):v,oldHeader:this.active,newContent:q&&z.collapsible?e([]):w,oldContent:y},n=this.headers.index(this.active[0])>this.headers.index(v[0]);this.active=q?e([]):v,this._toggle(w,y,x,q,n),p.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(z.icons.headerSelected).addClass(z.icons.header),q||(v.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(z.icons.header).addClass(z.icons.headerSelected),v.next().addClass("ui-accordion-content-active"));return},_toggle:function(D,C,B,A,z){var y=this,x=y.options;y.toShow=D,y.toHide=C,y.data=B;var w=function(){if(!y){return}return y._completed.apply(y,arguments)};y._trigger("changestart",null,y.data),y.running=C.size()===0?D.size():C.size();if(x.animated){var v={};x.collapsible&&A?v={toShow:e([]),toHide:C,complete:w,down:z,autoHeight:x.autoHeight||x.fillSpace}:v={toShow:D,toHide:C,complete:w,down:z,autoHeight:x.autoHeight||x.fillSpace},x.proxied||(x.proxied=x.animated),x.proxiedDuration||(x.proxiedDuration=x.duration),x.animated=e.isFunction(x.proxied)?x.proxied(v):x.proxied,x.duration=e.isFunction(x.proxiedDuration)?x.proxiedDuration(v):x.proxiedDuration;var q=e.ui.accordion.animations,p=x.duration,n=x.animated;n&&!q[n]&&!e.easing[n]&&(n="slide"),q[n]||(q[n]=function(b){this.slide(b,{easing:n,duration:p||700})}),q[n](v)}else{x.collapsible&&A?D.toggle():(C.hide(),D.show()),w(!0)}C.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),D.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.21",animations:{slide:function(A,z){A=e.extend({easing:"swing",duration:300},A,z);if(!A.toHide.size()){A.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},A);return}if(!A.toShow.size()){A.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},A);return}var y=A.toShow.css("overflow"),x=0,w={},v={},q=["height","paddingTop","paddingBottom"],p,n=A.toShow;p=n[0].style.width,n.width(n.parent().width()-parseFloat(n.css("paddingLeft"))-parseFloat(n.css("paddingRight"))-(parseFloat(n.css("borderLeftWidth"))||0)-(parseFloat(n.css("borderRightWidth"))||0)),e.each(q,function(h,f){v[f]="hide";var b=(""+e.css(A.toShow[0],f)).match(/^([\d+-.]+)(.*)$/);w[f]={value:b[1],unit:b[2]||"px"}}),A.toShow.css({height:0,overflow:"hidden"}).show(),A.toHide.filter(":hidden").each(A.complete).end().filter(":visible").animate(v,{step:function(b,f){f.prop=="height"&&(x=f.end-f.start===0?0:(f.now-f.start)/(f.end-f.start)),A.toShow[0].style[f.prop]=x*w[f.prop].value+w[f.prop].unit},duration:A.duration,easing:A.easing,complete:function(){A.autoHeight||A.toShow.css("height",""),A.toShow.css({width:p,overflow:y}),A.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var h=this,p=this.element[0].ownerDocument,n;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(q){if(h.options.disabled||h.element.propAttr("readOnly")){return}n=!1;var b=e.ui.keyCode;switch(q.keyCode){case b.PAGE_UP:h._move("previousPage",q);break;case b.PAGE_DOWN:h._move("nextPage",q);break;case b.UP:h._keyEvent("previous",q);break;case b.DOWN:h._keyEvent("next",q);break;case b.ENTER:case b.NUMPAD_ENTER:h.menu.active&&(n=!0,q.preventDefault());case b.TAB:if(!h.menu.active){return}h.menu.select(q);break;case b.ESCAPE:h.element.val(h.term),h.close(q);break;default:clearTimeout(h.searching),h.searching=setTimeout(function(){h.term!=h.element.val()&&(h.selectedItem=null,h.search(null,q))},h.options.delay)}}).bind("keypress.autocomplete",function(b){n&&(n=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(h.options.disabled){return}h.selectedItem=null,h.previous=h.element.val()}).bind("blur.autocomplete",function(b){if(h.options.disabled){return}clearTimeout(h.searching),h.closing=setTimeout(function(){h.close(b),h._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",p)[0]).mousedown(function(q){var b=h.menu.element[0];e(q.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(v){v.target!==h.element[0]&&v.target!==b&&!e.ui.contains(b,v.target)&&h.close()})},1),setTimeout(function(){clearTimeout(h.closing)},13)}).menu({focus:function(b,v){var q=v.item.data("item.autocomplete");!1!==h._trigger("focus",b,{item:q})&&/^key/.test(b.originalEvent.type)&&h.element.val(q.value)},selected:function(b,w){var v=w.item.data("item.autocomplete"),q=h.previous;h.element[0]!==p.activeElement&&(h.element.focus(),h.previous=q,setTimeout(function(){h.previous=q,h.selectedItem=v},1)),!1!==h._trigger("select",b,{item:v})&&h.element.val(v.value),h.term=h.element.val(),h.close(b),h.selectedItem=v},blur:function(b,q){h.menu.element.is(":visible")&&h.element.val()!==h.term&&h.element.val(h.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),h.beforeunloadHandler=function(){h.element.removeAttr("autocomplete")},e(window).bind("beforeunload",h.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(h,n){e.Widget.prototype._setOption.apply(this,arguments),h==="source"&&this._initSource(),h==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),h==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var h=this,p,n;e.isArray(this.options.source)?(p=this.options.source,this.source=function(q,v){v(e.ui.autocomplete.filter(p,q.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(q,b){h.xhr&&h.xhr.abort(),h.xhr=e.ajax({url:n,data:q,dataType:"json",success:function(w,v){b(w)},error:function(){b([])}})}):this.source=this.options.source},search:function(n,h){n=n!=null?n:this.element.val(),this.term=this.element.val();if(n.length<this.options.minLength){return this.close(h)}clearTimeout(this.closing);if(this._trigger("search",h)===!1){return}return this._search(n)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var n=this,h=++f;return function(b){h===f&&n.__response(b),n.pending--,n.pending||n.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(h){return h.length&&h[0].label&&h[0].value?h:e.map(h,function(n){return typeof n=="string"?{label:n,value:n}:e.extend({label:n.label||n.value,value:n.value||n.label},n)})},_suggest:function(h){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,h),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(h,p){var n=this;e.each(p,function(b,q){n._renderItem(h,q)})},_renderItem:function(h,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(h)},_move:function(n,h){if(!this.menu.element.is(":visible")){this.search(null,h);return}if(this.menu.first()&&/^previous/.test(n)||this.menu.last()&&/^next/.test(n)){this.element.val(this.term),this.menu.deactivate();return}this.menu[n](h)},widget:function(){return this.menu.element},_keyEvent:function(n,h){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(n,h),h.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(h,p){var n=new RegExp(e.ui.autocomplete.escapeRegex(p),"i");return e.grep(h,function(b){return n.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){if(!b(e.target).closest(".ui-menu-item a").length){return}e.preventDefault(),d.select(e)}),this.refresh()},refresh:function(){var d=this,e=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");e.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(f){d.activate(f,b(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var q=f.offset().top-this.element.offset().top,p=this.element.scrollTop(),n=this.element.height();q<0?this.element.scrollTop(p+q):q>=n&&this.element.scrollTop(p+q-n+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,n){if(!this.active){this.activate(n,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(n,h):this.activate(n,this.element.children(e))},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(".ui-menu-item:first"));return}var p=this.active.offset().top,n=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-p-n+b(this).height();return d<10&&d>-10});h.length||(h=this.element.children(".ui-menu-item:last")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"));return}var p=this.active.offset().top,n=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-p+n-b(this).height();return d<10&&d>-10});h.length||(h=this.element.children(".ui-menu-item:first")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(C,B){var A,z,y,x,w="ui-button ui-widget ui-state-default ui-corner-all",v="ui-state-hover ui-state-active ",q="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var d=C(this).find(":ui-button");setTimeout(function(){d.button("refresh")},1)},n=function(f){var E=f.name,D=f.form,h=C([]);return E&&(D?h=C(D).find("[name='"+E+"']"):h=C("[name='"+E+"']",f.ownerDocument).filter(function(){return !this.form})),h};C.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",p),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,E=this.options,D=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(D?"":" ui-state-active"),d="ui-state-focus";E.label===null&&(E.label=this.buttonElement.html()),this.buttonElement.addClass(w).attr("role","button").bind("mouseenter.button",function(){if(E.disabled){return}C(this).addClass("ui-state-hover"),this===A&&C(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(E.disabled){return}C(this).removeClass(f)}).bind("click.button",function(b){E.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){e.buttonElement.addClass(d)}).bind("blur.button",function(){e.buttonElement.removeClass(d)}),D&&(this.element.bind("change.button",function(){if(x){return}e.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(E.disabled){return}x=!1,z=b.pageX,y=b.pageY}).bind("mouseup.button",function(b){if(E.disabled){return}if(z!==b.pageX||y!==b.pageY){x=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(E.disabled||x){return !1}C(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(E.disabled||x){return !1}C(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var b=e.element[0];n(b).not(b).map(function(){return C(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(E.disabled){return !1}C(this).addClass("ui-state-active"),A=this,C(document).one("mouseup",function(){A=null})}).bind("mouseup.button",function(){if(E.disabled){return !1}C(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(E.disabled){return !1}(h.keyCode==C.ui.keyCode.SPACE||h.keyCode==C.ui.keyCode.ENTER)&&C(this).addClass("ui-state-active")}).bind("keyup.button",function(){C(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===C.ui.keyCode.SPACE&&C(this).click()})),this._setOption("disabled",E.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),d="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(d),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(d),this.buttonElement.length||(this.buttonElement=e.find(d))),this.element.addClass("ui-helper-hidden-accessible");var f=this.element.is(":checked");f&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",f)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(w+" "+v+" "+q).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),C.Widget.prototype.destroy.call(this)},_setOption:function(d,e){C.Widget.prototype._setOption.apply(this,arguments);if(d==="disabled"){e?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var d=this.element.is(":disabled");d!==this.options.disabled&&this._setOption("disabled",d),this.type==="radio"?n(this.element[0]).each(function(){C(this).is(":checked")?C(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):C(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var h=this.buttonElement.removeClass(q),G=C("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(h.empty()).text(),F=this.options.icons,E=F.primary&&F.secondary,D=[];F.primary||F.secondary?(this.options.text&&D.push("ui-button-text-icon"+(E?"s":F.primary?"-primary":"-secondary")),F.primary&&h.prepend("<span class='ui-button-icon-primary ui-icon "+F.primary+"'></span>"),F.secondary&&h.append("<span class='ui-button-icon-secondary ui-icon "+F.secondary+"'></span>"),this.options.text||(D.push(E?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||h.attr("title",G))):D.push("ui-button-text-only"),h.addClass(D.join(" "))}}),C.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(d,e){d==="disabled"&&this.buttons.button("option",d,e),C.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var d=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return C(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(d?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(d?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return C(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),C.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(n,h){var w="ui-dialog ui-widget ui-widget-content ui-corner-all ",v={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},q={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},p=n.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};n.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(d){var e=n(this).css(d).offset().top;e<0&&n(this).css("top",d.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var G=this,F=G.options,E=F.title||"&#160;",D=n.ui.dialog.getTitleId(G.element),C=(G.uiDialog=n("<div></div>")).appendTo(document.body).hide().addClass(w+F.dialogClass).css({zIndex:F.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){F.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===n.ui.keyCode.ESCAPE&&(G.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":D}).mousedown(function(b){G.moveToTop(!1,b)}),B=G.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(C),A=(G.uiDialogTitlebar=n("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(C),z=n('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){z.addClass("ui-state-hover")},function(){z.removeClass("ui-state-hover")}).focus(function(){z.addClass("ui-state-focus")}).blur(function(){z.removeClass("ui-state-focus")}).click(function(b){return G.close(b),!1}).appendTo(A),y=(G.uiDialogTitlebarCloseText=n("<span></span>")).addClass("ui-icon ui-icon-closethick").text(F.closeText).appendTo(z),x=n("<span></span>").addClass("ui-dialog-title").attr("id",D).html(E).prependTo(A);n.isFunction(F.beforeclose)&&!n.isFunction(F.beforeClose)&&(F.beforeClose=F.beforeclose),A.find("*").add(A).disableSelection(),F.draggable&&n.fn.draggable&&G._makeDraggable(),F.resizable&&n.fn.resizable&&G._makeResizable(),G._createButtons(F.buttons),G._isOpen=!1,n.fn.bgiframe&&C.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(f){var z=this,y,x;if(!1===z._trigger("beforeClose",f)){return}return z.overlay&&z.overlay.destroy(),z.uiDialog.unbind("keypress.ui-dialog"),z._isOpen=!1,z.options.hide?z.uiDialog.hide(z.options.hide,function(){z._trigger("close",f)}):(z.uiDialog.hide(),z._trigger("close",f)),n.ui.dialog.overlay.resize(),z.options.modal&&(y=0,n(".ui-dialog").each(function(){this!==z.uiDialog[0]&&(x=n(this).css("z-index"),isNaN(x)||(y=Math.max(y,x)))}),n.ui.dialog.maxZ=y),z},isOpen:function(){return this._isOpen},moveToTop:function(x,B){var A=this,z=A.options,y;return z.modal&&!x||!z.stack&&!z.modal?A._trigger("focus",B):(z.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=z.zIndex),A.overlay&&(n.ui.dialog.maxZ+=1,A.overlay.$el.css("z-index",n.ui.dialog.overlay.maxZ=n.ui.dialog.maxZ)),y={scrollTop:A.element.scrollTop(),scrollLeft:A.element.scrollLeft()},n.ui.dialog.maxZ+=1,A.uiDialog.css("z-index",n.ui.dialog.maxZ),A.element.attr(y),A._trigger("focus",B),A)},open:function(){if(this._isOpen){return}var e=this,x=e.options,f=e.uiDialog;return e.overlay=x.modal?new n.ui.dialog.overlay(e):null,e._size(),e._position(x.position),f.show(x.show),e.moveToTop(!0),x.modal&&f.bind("keydown.ui-dialog",function(y){if(y.keyCode!==n.ui.keyCode.TAB){return}var B=n(":tabbable",this),A=B.filter(":first"),z=B.filter(":last");if(y.target===z[0]&&!y.shiftKey){return A.focus(1),!1}if(y.target===A[0]&&y.shiftKey){return z.focus(1),!1}}),n(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e},_createButtons:function(f){var A=this,z=!1,y=n("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),x=n("<div></div>").addClass("ui-dialog-buttonset").appendTo(y);A.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof f=="object"&&f!==null&&n.each(f,function(){return !(z=!0)}),z&&(n.each(f,function(B,D){D=n.isFunction(D)?{click:D,text:B}:D;var C=n('<button type="button"></button>').click(function(){D.click.apply(A.element[0],arguments)}).appendTo(x);n.each(D,function(e,d){if(e==="click"){return}e in p?C[e](d):C.attr(e,d)}),n.fn.button&&C.button()}),y.appendTo(A.uiDialog))},_makeDraggable:function(){function y(b){return{position:b.position,offset:b.offset}}var x=this,B=x.options,A=n(document),z;x.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,b){z=B.height==="auto"?"auto":n(this).height(),n(this).height(n(this).height()).addClass("ui-dialog-dragging"),x._trigger("dragStart",e,y(b))},drag:function(b,d){x._trigger("drag",b,y(d))},stop:function(d,b){B.position=[b.position.left-A.scrollLeft(),b.position.top-A.scrollTop()],n(this).removeClass("ui-dialog-dragging").height(z),x._trigger("dragStop",d,y(b)),n.ui.dialog.overlay.resize()}})},_makeResizable:function(B){function b(d){return{originalPosition:d.originalPosition,originalSize:d.originalSize,position:d.position,size:d.size}}B=B===h?this.options.resizable:B;var A=this,z=A.options,y=A.uiDialog.css("position"),x=typeof B=="string"?B:"n,e,s,w,se,sw,ne,nw";A.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:A.element,maxWidth:z.maxWidth,maxHeight:z.maxHeight,minWidth:z.minWidth,minHeight:A._minHeight(),handles:x,start:function(d,e){n(this).addClass("ui-dialog-resizing"),A._trigger("resizeStart",d,b(e))},resize:function(e,d){A._trigger("resize",e,b(d))},stop:function(d,e){n(this).removeClass("ui-dialog-resizing"),z.height=n(this).height(),z.width=n(this).width(),A._trigger("resizeStop",d,b(e)),n.ui.dialog.overlay.resize()}}).css("position",y).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var z=[],y=[0,0],x;if(f){if(typeof f=="string"||typeof f=="object"&&"0" in f){z=f.split?f.split(" "):[f[0],f[1]],z.length===1&&(z[1]=z[0]),n.each(["left","top"],function(e,d){+z[e]===z[e]&&(y[e]=z[e],z[e]=d)}),f={my:z.join(" "),at:z.join(" "),offset:y.join(" ")}}f=n.extend({},n.ui.dialog.prototype.options.position,f)}else{f=n.ui.dialog.prototype.options.position}x=this.uiDialog.is(":visible"),x||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(n.extend({of:window},f)),x||this.uiDialog.hide()},_setOptions:function(d){var y=this,x={},e=!1;n.each(d,function(z,f){y._setOption(z,f),z in v&&(e=!0),z in q&&(x[z]=f)}),e&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",x)},_setOption:function(x,C){var B=this,A=B.uiDialog;switch(x){case"beforeclose":x="beforeClose";break;case"buttons":B._createButtons(C);break;case"closeText":B.uiDialogTitlebarCloseText.text(""+C);break;case"dialogClass":A.removeClass(B.options.dialogClass).addClass(w+C);break;case"disabled":C?A.addClass("ui-dialog-disabled"):A.removeClass("ui-dialog-disabled");break;case"draggable":var z=A.is(":data(draggable)");z&&!C&&A.draggable("destroy"),!z&&C&&B._makeDraggable();break;case"position":B._position(C);break;case"resizable":var y=A.is(":data(resizable)");y&&!C&&A.resizable("destroy"),y&&typeof C=="string"&&A.resizable("option","handles",C),!y&&C!==!1&&B._makeResizable(C);break;case"title":n(".ui-dialog-title",B.uiDialogTitlebar).html(""+(C||"&#160;"))}n.Widget.prototype._setOption.apply(B,arguments)},_size:function(){var x=this.options,B,A,z=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),x.minWidth>x.width&&(x.width=x.minWidth),B=this.uiDialog.css({height:"auto",width:x.width}).height(),A=Math.max(0,x.minHeight-B);if(x.height==="auto"){if(n.support.minHeight){this.element.css({minHeight:A,height:"auto"})}else{this.uiDialog.show();var y=this.element.css("height","auto").height();z||this.uiDialog.hide(),this.element.height(Math.max(y,A))}}else{this.element.height(Math.max(x.height-B,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),n.extend(n.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(e){var d=e.attr("id");return d||(this.uuid+=1,d=this.uuid),"ui-dialog-title-"+d},overlay:function(d){this.$el=n.ui.dialog.overlay.create(d)}}),n.extend(n.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:n.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(d){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(f){if(n(f.target).zIndex()<n.ui.dialog.overlay.maxZ){return !1}})},1),n(document).bind("keydown.dialog-overlay",function(b){d.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===n.ui.keyCode.ESCAPE&&(d.close(b),b.preventDefault())}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var e=(this.oldInstances.pop()||n("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&e.bgiframe(),this.instances.push(e),e},destroy:function(e){var x=n.inArray(e,this.instances);x!=-1&&this.oldInstances.push(this.instances.splice(x,1)[0]),this.instances.length===0&&n([document,window]).unbind(".dialog-overlay"),e.remove();var f=0;n.each(this.instances,function(){f=Math.max(f,this.css("z-index"))}),this.maxZ=f},height:function(){var d,e;return n.browser.msie&&n.browser.version<7?(d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),e=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),d<e?n(window).height()+"px":d+"px"):n(document).height()+"px"},width:function(){var d,e;return n.browser.msie?(d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),d<e?n(window).width()+"px":d+"px"):n(document).width()+"px"},resize:function(){var d=n([]);n.each(n.ui.dialog.overlay.instances,function(){d=d.add(this)}),d.css({width:0,height:0}).css({width:n.ui.dialog.overlay.width(),height:n.ui.dialog.overlay.height()})}}),n.extend(n.ui.dialog.overlay.prototype,{destroy:function(){n.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n=this,y=this.options,x=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),w="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",v=y.values&&y.values.length||1,q=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(y.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),y.range&&(y.range===!0&&(y.values||(y.values=[this._valueMin(),this._valueMin()]),y.values.length&&y.values.length!==2&&(y.values=[y.values[0],y.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(y.range==="min"||y.range==="max"?" ui-slider-range-"+y.range:"")));for(var p=x.length;p<v;p+=1){q.push(w)}this.handles=x.add(e(q.join("")).appendTo(n.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){y.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){y.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(h){e(this).data("index.ui-slider-handle",h)}),this.handles.keydown(function(D){var C=e(this).data("index.ui-slider-handle"),B,A,z,b;if(n.options.disabled){return}switch(D.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:D.preventDefault();if(!n._keySliding){n._keySliding=!0,e(this).addClass("ui-state-active"),B=n._start(D,C);if(B===!1){return}}}b=n.options.step,n.options.values&&n.options.values.length?A=z=n.values(C):A=z=n.value();switch(D.keyCode){case e.ui.keyCode.HOME:z=n._valueMin();break;case e.ui.keyCode.END:z=n._valueMax();break;case e.ui.keyCode.PAGE_UP:z=n._trimAlignValue(A+(n._valueMax()-n._valueMin())/f);break;case e.ui.keyCode.PAGE_DOWN:z=n._trimAlignValue(A-(n._valueMax()-n._valueMin())/f);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(A===n._valueMax()){return}z=n._trimAlignValue(A+b);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(A===n._valueMin()){return}z=n._trimAlignValue(A-b)}n._slide(D,C,z)}).keyup(function(h){var b=e(this).data("index.ui-slider-handle");n._keySliding&&(n._keySliding=!1,n._stop(h,b),n._change(h,b),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(C){var B=this.options,A,z,y,x,w,v,q,p,n;return B.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),A={x:C.pageX,y:C.pageY},z=this._normValueFromMouse(A),y=this._valueMax()-this._valueMin()+1,w=this,this.handles.each(function(h){var D=Math.abs(z-w.values(h));y>D&&(y=D,x=e(this),v=h)}),B.range===!0&&this.values(1)===B.min&&(v+=1,x=e(this.handles[v])),q=this._start(C,v),q===!1?!1:(this._mouseSliding=!0,w._handleIndex=v,x.addClass("ui-state-active").focus(),p=x.offset(),n=!e(C.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:C.pageX-p.left-x.width()/2,top:C.pageY-p.top-x.height()/2-(parseInt(x.css("borderTopWidth"),10)||0)-(parseInt(x.css("borderBottomWidth"),10)||0)+(parseInt(x.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(C,v,z),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(n){var h={x:n.pageX,y:n.pageY},p=this._normValueFromMouse(h);return this._slide(n,this._handleIndex,p),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(n){var h,w,v,q,p;return this.orientation==="horizontal"?(h=this.elementSize.width,w=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(h=this.elementSize.height,w=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),v=w/h,v>1&&(v=1),v<0&&(v=0),this.orientation==="vertical"&&(v=1-v),q=this._valueMax()-this._valueMin(),p=this._valueMin()+v*q,this._trimAlignValue(p)},_start:function(n,h){var p={handle:this.handles[h],value:this.value()};return this.options.values&&this.options.values.length&&(p.value=this.values(h),p.values=this.values()),this._trigger("start",n,p)},_slide:function(n,h,w){var v,q,p;this.options.values&&this.options.values.length?(v=this.values(h?0:1),this.options.values.length===2&&this.options.range===!0&&(h===0&&w>v||h===1&&w<v)&&(w=v),w!==this.values(h)&&(q=this.values(),q[h]=w,p=this._trigger("slide",n,{handle:this.handles[h],value:w,values:q}),v=this.values(h?0:1),p!==!1&&this.values(h,w,!0))):w!==this.value()&&(p=this._trigger("slide",n,{handle:this.handles[h],value:w}),p!==!1&&this.value(w))},_stop:function(n,h){var p={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(p.value=this.values(h),p.values=this.values()),this._trigger("stop",n,p)},_change:function(n,h){if(!this._keySliding&&!this._mouseSliding){var p={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(p.value=this.values(h),p.values=this.values()),this._trigger("change",n,p)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(h,v){var q,p,n;if(arguments.length>1){this.options.values[h]=this._trimAlignValue(v),this._refreshValue(),this._change(null,h);return}if(!arguments.length){return this._values()}if(!e.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(h):this.value()}q=this.options.values,p=arguments[0];for(n=0;n<q.length;n+=1){q[n]=this._trimAlignValue(p[n]),this._change(null,n)}this._refreshValue()},_setOption:function(h,q){var p,n=0;e.isArray(this.options.values)&&(n=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(h){case"disabled":q?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(p=0;p<n;p+=1){this._change(null,p)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(n){var h,q,p;if(arguments.length){return h=this.options.values[n],h=this._trimAlignValue(h),h}q=this.options.values.slice();for(p=0;p<q.length;p+=1){q[p]=this._trimAlignValue(q[p])}return q},_trimAlignValue:function(n){if(n<=this._valueMin()){return this._valueMin()}if(n>=this._valueMax()){return this._valueMax()}var h=this.options.step>0?this.options.step:1,q=(n-this._valueMin())%h,p=n-q;return Math.abs(q)*2>=h&&(p+=q>0?h:-h),parseFloat(p.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var B=this.options.range,A=this.options,z=this,y=this._animateOff?!1:A.animate,x,w={},v,q,p,n;this.options.values&&this.options.values.length?this.handles.each(function(h,C){x=(z.values(h)-z._valueMin())/(z._valueMax()-z._valueMin())*100,w[z.orientation==="horizontal"?"left":"bottom"]=x+"%",e(this).stop(1,1)[y?"animate":"css"](w,A.animate),z.options.range===!0&&(z.orientation==="horizontal"?(h===0&&z.range.stop(1,1)[y?"animate":"css"]({left:x+"%"},A.animate),h===1&&z.range[y?"animate":"css"]({width:x-v+"%"},{queue:!1,duration:A.animate})):(h===0&&z.range.stop(1,1)[y?"animate":"css"]({bottom:x+"%"},A.animate),h===1&&z.range[y?"animate":"css"]({height:x-v+"%"},{queue:!1,duration:A.animate}))),v=x}):(q=this.value(),p=this._valueMin(),n=this._valueMax(),x=n!==p?(q-p)/(n-p)*100:0,w[z.orientation==="horizontal"?"left":"bottom"]=x+"%",this.handle.stop(1,1)[y?"animate":"css"](w,A.animate),B==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[y?"animate":"css"]({width:x+"%"},A.animate),B==="max"&&this.orientation==="horizontal"&&this.range[y?"animate":"css"]({width:100-x+"%"},{queue:!1,duration:A.animate}),B==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[y?"animate":"css"]({height:x+"%"},A.animate),B==="max"&&this.orientation==="vertical"&&this.range[y?"animate":"css"]({height:100-x+"%"},{queue:!1,duration:A.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(n,h){function q(){return ++w}function p(){return ++v}var w=0,v=0;n.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,d){if(e=="selected"){if(this.options.collapsible&&d==this.options.selected){return}this.select(d)}else{this.options[e]=d,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+q()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+p());return n.cookie.apply(null,[d].concat(n.makeArray(arguments)))},_ui:function(e,d){return{tab:e,panel:d,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=n(this);d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(I){function y(d,e){d.css("display",""),!n.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var H=this,G=this.options,F=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=n(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return n("a",this)[0]}),this.panels=n([]),this.anchors.each(function(d,M){var L=n(M).attr("href"),K=L.split("#")[0],J;K&&(K===location.toString().split("#")[0]||(J=n("base")[0])&&K===J.href)&&(L=M.hash,M.href=L);if(F.test(L)){H.panels=H.panels.add(H.element.find(H._sanitizeSelector(L)))}else{if(L&&L!=="#"){n.data(M,"href.tabs",L),n.data(M,"load.tabs",L.replace(/#.*$/,""));var f=H._tabId(M);M.href="#"+f;var e=H.element.find("#"+f);e.length||(e=n(G.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(H.panels[d-1]||H.list),e.data("destroy.tabs",!0)),H.panels=H.panels.add(e)}else{G.disabled.push(d)}}}),I?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),G.selected===h?(location.hash&&this.anchors.each(function(e,d){if(d.hash==location.hash){return G.selected=e,!1}}),typeof G.selected!="number"&&G.cookie&&(G.selected=parseInt(H._cookie(),10)),typeof G.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(G.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),G.selected=G.selected||(this.lis.length?0:-1)):G.selected===null&&(G.selected=-1),G.selected=G.selected>=0&&this.anchors[G.selected]||G.selected<0?G.selected:0,G.disabled=n.unique(G.disabled.concat(n.map(this.lis.filter(".ui-state-disabled"),function(e,d){return H.lis.index(e)}))).sort(),n.inArray(G.selected,G.disabled)!=-1&&G.disabled.splice(n.inArray(G.selected,G.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),G.selected>=0&&this.anchors.length&&(H.element.find(H._sanitizeSelector(H.anchors[G.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(G.selected).addClass("ui-tabs-selected ui-state-active"),H.element.queue("tabs",function(){H._trigger("show",null,H._ui(H.anchors[G.selected],H.element.find(H._sanitizeSelector(H.anchors[G.selected].hash))[0]))}),this.load(G.selected)),n(window).bind("unload",function(){H.lis.add(H.anchors).unbind(".tabs"),H.lis=H.anchors=H.panels=null})):G.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[G.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),G.cookie&&this._cookie(G.selected,G.cookie);for(var E=0,D;D=this.lis[E];E++){n(D)[n.inArray(E,G.disabled)!=-1&&!n(D).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}G.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(G.event!=="mouseover"){var C=function(e,d){d.is(":not(.ui-state-disabled)")&&d.addClass("ui-state-"+e)},B=function(e,d){d.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){C("hover",n(this))}),this.lis.bind("mouseout.tabs",function(){B("hover",n(this))}),this.anchors.bind("focus.tabs",function(){C("focus",n(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){B("focus",n(this).closest("li"))})}var A,z;G.fx&&(n.isArray(G.fx)?(A=G.fx[0],z=G.fx[1]):A=z=G.fx);var x=z?function(d,e){n(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(z,z.duration||"normal",function(){y(e,z),H._trigger("show",null,H._ui(d,e[0]))})}:function(d,e){n(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),H._trigger("show",null,H._ui(d,e[0]))},b=A?function(e,d){d.animate(A,A.duration||"normal",function(){H.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),y(d,A),H.element.dequeue("tabs")})}:function(e,d,f){H.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),H.element.dequeue("tabs")};this.anchors.bind(G.event+".tabs",function(){var d=this,K=n(d).closest("li"),J=H.panels.filter(":not(.ui-tabs-hide)"),e=H.element.find(H._sanitizeSelector(d.hash));if(K.hasClass("ui-tabs-selected")&&!G.collapsible||K.hasClass("ui-state-disabled")||K.hasClass("ui-state-processing")||H.panels.filter(":animated").length||H._trigger("select",null,H._ui(this,e[0]))===!1){return this.blur(),!1}G.selected=H.anchors.index(this),H.abort();if(G.collapsible){if(K.hasClass("ui-tabs-selected")){return G.selected=-1,G.cookie&&H._cookie(G.selected,G.cookie),H.element.queue("tabs",function(){b(d,J)}).dequeue("tabs"),this.blur(),!1}if(!J.length){return G.cookie&&H._cookie(G.selected,G.cookie),H.element.queue("tabs",function(){x(d,e)}),H.load(H.anchors.index(this)),this.blur(),!1}}G.cookie&&H._cookie(G.selected,G.cookie);if(e.length){J.length&&H.element.queue("tabs",function(){b(d,J)}),H.element.queue("tabs",function(){x(d,e)}),H.load(H.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}n.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var d=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var e=n.data(this,"href.tabs");e&&(this.href=e);var f=n(this).unbind(".tabs");n.each(["href","load","cache"],function(y,x){f.removeData(x+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){n.data(this,"destroy.tabs")?n(this).remove():n(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),d.cookie&&this._cookie(null,d.cookie),this},add:function(D,C,B){B===h&&(B=this.anchors.length);var A=this,z=this.options,y=n(z.tabTemplate.replace(/#\{href\}/g,D).replace(/#\{label\}/g,C)),x=D.indexOf("#")?this._tabId(n("a",y)[0]):D.replace("#","");y.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var b=A.element.find("#"+x);return b.length||(b=n(z.panelTemplate).attr("id",x).data("destroy.tabs",!0)),b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),B>=this.lis.length?(y.appendTo(this.list),b.appendTo(this.list[0].parentNode)):(y.insertBefore(this.lis[B]),b.insertBefore(this.panels[B])),z.disabled=n.map(z.disabled,function(e,d){return e>=B?++e:e}),this._tabify(),this.anchors.length==1&&(z.selected=0,y.addClass("ui-tabs-selected ui-state-active"),b.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){A._trigger("show",null,A._ui(A.anchors[0],A.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[B],this.panels[B])),this},remove:function(f){f=this._getIndex(f);var z=this.options,y=this.lis.eq(f).remove(),x=this.panels.eq(f).remove();return y.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(f+(f+1<this.anchors.length?1:-1)),z.disabled=n.map(n.grep(z.disabled,function(b,d){return b!=f}),function(b,d){return b>=f?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(y.find("a")[0],x[0])),this},enable:function(d){d=this._getIndex(d);var e=this.options;if(n.inArray(d,e.disabled)==-1){return}return this.lis.eq(d).removeClass("ui-state-disabled"),e.disabled=n.grep(e.disabled,function(b,f){return b!=d}),this._trigger("enable",null,this._ui(this.anchors[d],this.panels[d])),this},disable:function(e){e=this._getIndex(e);var d=this,f=this.options;return e!=f.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),f.disabled.push(e),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(x){x=this._getIndex(x);var C=this,B=this.options,A=this.anchors.eq(x)[0],z=n.data(A,"load.tabs");this.abort();if(!z||this.element.queue("tabs").length!==0&&n.data(A,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(x).addClass("ui-state-processing");if(B.spinner){var y=n("span",A);y.data("label.tabs",y.html()).html(B.spinner)}return this.xhr=n.ajax(n.extend({},B.ajaxOptions,{url:z,success:function(e,d){C.element.find(C._sanitizeSelector(A.hash)).html(e),C._cleanup(),B.cache&&n.data(A,"cache.tabs",!0),C._trigger("load",null,C._ui(C.anchors[x],C.panels[x]));try{B.ajaxOptions.success(e,d)}catch(b){}},error:function(b,e,d){C._cleanup(),C._trigger("load",null,C._ui(C.anchors[x],C.panels[x]));try{B.ajaxOptions.error(b,e,x,A)}catch(d){}}})),C.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,d){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",d),this},length:function(){return this.anchors.length}}),n.extend(n.ui.tabs,{version:"1.8.21"}),n.extend(n.ui.tabs.prototype,{rotation:null,rotate:function(y,x){var C=this,B=this.options,A=C._rotate||(C._rotate=function(d){clearTimeout(C.rotation),C.rotation=setTimeout(function(){var b=B.selected;C.select(++b<C.anchors.length?b:0)},y),d&&d.stopPropagation()}),z=C._unrotate||(C._unrotate=x?function(b){A()}:function(b){b.clientX&&C.rotate(null)});return y?(this.element.bind("tabsshow",A),this.anchors.bind(B.event+".tabs",z),A()):(clearTimeout(C.rotation),this.element.unbind("tabsshow",A),this.anchors.unbind(B.event+".tabs",z),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===d?this._value():(this._setOption("value",b),this)},_setOption:function(f,h){f==="value"&&(this.options.value=h,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var h=this.value(),f=this._percentage();this.oldValue!==h&&(this.oldValue=h,this._trigger("change")),this.valueDiv.toggle(h>this.min).toggleClass("ui-corner-right",h===this.options.max).width(f.toFixed(0)+"%"),this.element.attr("aria-valuenow",h)}}),e.extend(e.ui.progressbar,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(D,C){function B(d){var e;return d&&d.constructor==Array&&d.length==3?d:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d))?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(d))?[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:(e=/rgba\(0, 0, 0, 0\)/.exec(d))?z.transparent:z[D.trim(d).toLowerCase()]}function A(f,E){var h;do{h=D.curCSS(f,E);if(h!=""&&h!="transparent"||D.nodeName(f,"body")){break}E="backgroundColor"}while(f=f.parentNode);return B(h)}function w(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},G,F;if(h&&h.length&&h[0]&&h[h[0]]){var E=h.length;while(E--){G=h[E],typeof h[G]=="string"&&(F=G.replace(/\-(\w)/g,function(e,d){return d.toUpperCase()}),f[F]=h[G])}}else{for(G in h){typeof h[G]=="string"&&(f[G]=h[G])}}return f}function v(e){var h,f;for(h in e){f=e[h],(f==null||D.isFunction(f)||h in x||/scrollbar/.test(h)||!/color/i.test(h)&&isNaN(parseFloat(f)))&&delete e[h]}return e}function q(f,e){var E={_:0},h;for(h in e){f[h]!=e[h]&&(E[h]=e[h])}return E}function p(f,F,E,h){typeof f=="object"&&(h=F,E=null,F=f,f=F.effect),D.isFunction(F)&&(h=F,E=null,F={});if(typeof F=="number"||D.fx.speeds[F]){h=E,E=F,F={}}return D.isFunction(E)&&(h=E,E=null),F=F||{},E=E||F.duration,E=D.fx.off?0:typeof E=="number"?E:E in D.fx.speeds?D.fx.speeds[E]:D.fx.speeds._default,h=h||F.complete,[f,F,E,h]}function n(d){return !d||typeof d=="number"||D.fx.speeds[d]?!0:typeof d=="string"&&!D.effects[d]?!0:!1}D.effects={},D.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(d,f){D.fx.step[f]=function(b){b.colorInit||(b.start=A(b.elem,f),b.end=B(b.end),b.colorInit=!0),b.elem.style[f]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var z={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},y=["add","remove","toggle"],x={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};D.effects.animateClass=function(f,F,E,h){return D.isFunction(E)&&(h=E,E=null),this.queue(function(){var G=D(this),e=G.attr("style")||" ",d=v(w.call(this)),b,H=G.attr("class")||"";D.each(y,function(I,J){f[J]&&G[J+"Class"](f[J])}),b=v(w.call(this)),G.attr("class",H),G.animate(q(d,b),{queue:!1,duration:F,easing:E,complete:function(){D.each(y,function(I,J){f[J]&&G[J+"Class"](f[J])}),typeof G.attr("style")=="object"?(G.attr("style").cssText="",G.attr("style").cssText=e):G.attr("style",e),h&&h.apply(this,arguments),D.dequeue(this)}})})},D.fn.extend({_addClass:D.fn.addClass,addClass:function(f,F,E,h){return F?D.effects.animateClass.apply(this,[{add:f},F,E,h]):this._addClass(f)},_removeClass:D.fn.removeClass,removeClass:function(f,F,E,h){return F?D.effects.animateClass.apply(this,[{remove:f},F,E,h]):this._removeClass(f)},_toggleClass:D.fn.toggleClass,toggleClass:function(G,F,E,h,b){return typeof F=="boolean"||F===C?E?D.effects.animateClass.apply(this,[F?{add:G}:{remove:G},E,h,b]):this._toggleClass(G,F):D.effects.animateClass.apply(this,[{toggle:G},F,E,h])},switchClass:function(h,H,G,F,E){return D.effects.animateClass.apply(this,[{add:H,remove:h},G,F,E])}}),D.extend(D.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(e,d){return d=="toggle"&&(d=e.is(":hidden")?"show":"hide"),d},getBaseline:function(f,e){var E,h;switch(f[0]){case"top":E=0;break;case"middle":E=0.5;break;case"bottom":E=1;break;default:E=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:E}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var H={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},G=D("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),F=document.activeElement;try{F.id}catch(E){F=document.body}return h.wrap(G),(h[0]===F||D.contains(h[0],F))&&D(F).focus(),G=h.parent(),h.css("position")=="static"?(G.css({position:"relative"}),h.css({position:"relative"})):(D.extend(H,{position:h.css("position"),zIndex:h.css("z-index")}),D.each(["top","left","bottom","right"],function(b,e){H[e]=h.css(e),isNaN(parseInt(H[e],10))&&(H[e]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),G.css(H).show()},removeWrapper:function(e){var h,f=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(h=e.parent().replaceWith(e),(e[0]===f||D.contains(e[0],f))&&D(f).focus(),h):e},setTransition:function(f,F,E,h){return h=h||{},D.each(F,function(b,e){var d=f.cssUnit(e);d[0]>0&&(h[e]=d[0]*E+d[1])}),h}}),D.fn.extend({effect:function(E,L,K,J){var I=p.apply(this,arguments),H={options:I[1],duration:I[2],callback:I[3]},G=H.options.mode,F=D.effects[E];return D.fx.off||!F?G?this[G](H.duration,H.callback):this.each(function(){H.callback&&H.callback.call(this)}):F.call(this,H)},_show:D.fn.show,show:function(e){if(n(e)){return this._show.apply(this,arguments)}var d=p.apply(this,arguments);return d[1].mode="show",this.effect.apply(this,d)},_hide:D.fn.hide,hide:function(e){if(n(e)){return this._hide.apply(this,arguments)}var d=p.apply(this,arguments);return d[1].mode="hide",this.effect.apply(this,d)},__toggle:D.fn.toggle,toggle:function(d){if(n(d)||typeof d=="boolean"||D.isFunction(d)){return this.__toggle.apply(this,arguments)}var e=p.apply(this,arguments);return e[1].mode="toggle",this.effect.apply(this,e)},cssUnit:function(e){var h=this.css(e),f=[];return D.each(["em","px","%","pt"],function(E,d){h.indexOf(d)>0&&(f=[parseFloat(h),d])}),f}}),D.easing.jswing=D.easing.swing,D.extend(D.easing,{def:"easeOutQuad",swing:function(h,H,G,F,E){return D.easing[D.easing.def](h,H,G,F,E)},easeInQuad:function(h,f,G,F,E){return F*(f/=E)*f+G},easeOutQuad:function(h,f,G,F,E){return -F*(f/=E)*(f-2)+G},easeInOutQuad:function(h,f,G,F,E){return(f/=E/2)<1?F/2*f*f+G:-F/2*(--f*(f-2)-1)+G},easeInCubic:function(h,f,G,F,E){return F*(f/=E)*f*f+G},easeOutCubic:function(h,f,G,F,E){return F*((f=f/E-1)*f*f+1)+G},easeInOutCubic:function(h,f,G,F,E){return(f/=E/2)<1?F/2*f*f*f+G:F/2*((f-=2)*f*f+2)+G},easeInQuart:function(h,f,G,F,E){return F*(f/=E)*f*f*f+G},easeOutQuart:function(h,f,G,F,E){return -F*((f=f/E-1)*f*f*f-1)+G},easeInOutQuart:function(h,f,G,F,E){return(f/=E/2)<1?F/2*f*f*f*f+G:-F/2*((f-=2)*f*f*f-2)+G},easeInQuint:function(h,f,G,F,E){return F*(f/=E)*f*f*f*f+G},easeOutQuint:function(h,f,G,F,E){return F*((f=f/E-1)*f*f*f*f+1)+G},easeInOutQuint:function(h,f,G,F,E){return(f/=E/2)<1?F/2*f*f*f*f*f+G:F/2*((f-=2)*f*f*f*f+2)+G},easeInSine:function(h,f,G,F,E){return -F*Math.cos(f/E*(Math.PI/2))+F+G},easeOutSine:function(h,f,G,F,E){return F*Math.sin(f/E*(Math.PI/2))+G},easeInOutSine:function(h,f,G,F,E){return -F/2*(Math.cos(Math.PI*f/E)-1)+G},easeInExpo:function(h,f,G,F,E){return f==0?G:F*Math.pow(2,10*(f/E-1))+G},easeOutExpo:function(h,f,G,F,E){return f==E?G+F:F*(-Math.pow(2,-10*f/E)+1)+G},easeInOutExpo:function(h,f,G,F,E){return f==0?G:f==E?G+F:(f/=E/2)<1?F/2*Math.pow(2,10*(f-1))+G:F/2*(-Math.pow(2,-10*--f)+2)+G},easeInCirc:function(h,f,G,F,E){return -F*(Math.sqrt(1-(f/=E)*f)-1)+G},easeOutCirc:function(h,f,G,F,E){return F*Math.sqrt(1-(f=f/E-1)*f)+G},easeInOutCirc:function(h,f,G,F,E){return(f/=E/2)<1?-F/2*(Math.sqrt(1-f*f)-1)+G:F/2*(Math.sqrt(1-(f-=2)*f)+1)+G},easeInElastic:function(F,E,L,K,J){var I=1.70158,H=0,G=K;if(E==0){return L}if((E/=J)==1){return L+K}H||(H=J*0.3);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return -(G*Math.pow(2,10*(E-=1))*Math.sin((E*J-I)*2*Math.PI/H))+L},easeOutElastic:function(F,E,L,K,J){var I=1.70158,H=0,G=K;if(E==0){return L}if((E/=J)==1){return L+K}H||(H=J*0.3);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return G*Math.pow(2,-10*E)*Math.sin((E*J-I)*2*Math.PI/H)+K+L},easeInOutElastic:function(F,E,L,K,J){var I=1.70158,H=0,G=K;if(E==0){return L}if((E/=J/2)==2){return L+K}H||(H=J*0.3*1.5);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return E<1?-0.5*G*Math.pow(2,10*(E-=1))*Math.sin((E*J-I)*2*Math.PI/H)+L:G*Math.pow(2,-10*(E-=1))*Math.sin((E*J-I)*2*Math.PI/H)*0.5+K+L},easeInBack:function(b,H,G,F,E,h){return h==C&&(h=1.70158),F*(H/=E)*H*((h+1)*H-h)+G},easeOutBack:function(b,H,G,F,E,h){return h==C&&(h=1.70158),F*((H=H/E-1)*H*((h+1)*H+h)+1)+G},easeInOutBack:function(b,H,G,F,E,h){return h==C&&(h=1.70158),(H/=E/2)<1?F/2*H*H*(((h*=1.525)+1)*H-h)+G:F/2*((H-=2)*H*(((h*=1.525)+1)*H+h)+2)+G},easeInBounce:function(h,H,G,F,E){return F-D.easing.easeOutBounce(h,E-H,0,F,E)+G},easeOutBounce:function(h,f,G,F,E){return(f/=E)<1/2.75?F*7.5625*f*f+G:f<2/2.75?F*(7.5625*(f-=1.5/2.75)*f+0.75)+G:f<2.5/2.75?F*(7.5625*(f-=2.25/2.75)*f+0.9375)+G:F*(7.5625*(f-=2.625/2.75)*f+0.984375)+G},easeInOutBounce:function(h,H,G,F,E){return H<E/2?D.easing.easeInBounce(h,H*2,0,F,E)*0.5+G:D.easing.easeOutBounce(h,H*2-E,0,F,E)*0.5+F*0.5+G}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.blind=function(f){return this.queue(function(){var y=e(this),x=["position","top","bottom","left","right"],w=e.effects.setMode(y,f.options.mode||"hide"),v=f.options.direction||"vertical";e.effects.save(y,x),y.show();var q=e.effects.createWrapper(y).css({overflow:"hidden"}),p=v=="vertical"?"height":"width",n=v=="vertical"?q.height():q.width();w=="show"&&q.css(p,0);var b={};b[p]=w=="show"?n:0,q.animate(b,f.duration,f.options.easing,function(){w=="hide"&&y.hide(),e.effects.restore(y,x),e.effects.removeWrapper(y),f.callback&&f.callback.apply(y[0],arguments),y.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.bounce=function(f){return this.queue(function(){var F=e(this),E=["position","top","bottom","left","right"],D=e.effects.setMode(F,f.options.mode||"effect"),C=f.options.direction||"up",B=f.options.distance||20,A=f.options.times||5,z=f.duration||250;/show|hide/.test(D)&&E.push("opacity"),e.effects.save(F,E),F.show(),e.effects.createWrapper(F);var y=C=="up"||C=="down"?"top":"left",x=C=="up"||C=="left"?"pos":"neg",B=f.options.distance||(y=="top"?F.outerHeight({margin:!0})/3:F.outerWidth({margin:!0})/3);D=="show"&&F.css("opacity",0).css(y,x=="pos"?-B:B),D=="hide"&&(B=B/(A*2)),D!="hide"&&A--;if(D=="show"){var w={opacity:1};w[y]=(x=="pos"?"+=":"-=")+B,F.animate(w,z/2,f.options.easing),B=B/2,A--}for(var v=0;v<A;v++){var q={},b={};q[y]=(x=="pos"?"-=":"+=")+B,b[y]=(x=="pos"?"+=":"-=")+B,F.animate(q,z/2,f.options.easing).animate(b,z/2,f.options.easing),B=D=="hide"?B*2:B/2}if(D=="hide"){var w={opacity:0};w[y]=(x=="pos"?"-=":"+=")+B,F.animate(w,z/2,f.options.easing,function(){F.hide(),e.effects.restore(F,E),e.effects.removeWrapper(F),f.callback&&f.callback.apply(this,arguments)})}else{var q={},b={};q[y]=(x=="pos"?"-=":"+=")+B,b[y]=(x=="pos"?"+=":"-=")+B,F.animate(q,z/2,f.options.easing).animate(b,z/2,f.options.easing,function(){e.effects.restore(F,E),e.effects.removeWrapper(F),f.callback&&f.callback.apply(this,arguments)})}F.queue("fx",function(){F.dequeue()}),F.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.clip=function(f){return this.queue(function(){var z=e(this),y=["position","top","bottom","left","right","height","width"],x=e.effects.setMode(z,f.options.mode||"hide"),w=f.options.direction||"vertical";e.effects.save(z,y),z.show();var v=e.effects.createWrapper(z).css({overflow:"hidden"}),q=z[0].tagName=="IMG"?v:z,p={size:w=="vertical"?"height":"width",position:w=="vertical"?"top":"left"},n=w=="vertical"?q.height():q.width();x=="show"&&(q.css(p.size,0),q.css(p.position,n/2));var b={};b[p.size]=x=="show"?n:0,b[p.position]=x=="show"?0:n/2,q.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){x=="hide"&&z.hide(),e.effects.restore(z,y),e.effects.removeWrapper(z),f.callback&&f.callback.apply(z[0],arguments),z.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.drop=function(f){return this.queue(function(){var y=e(this),x=["position","top","bottom","left","right","opacity"],w=e.effects.setMode(y,f.options.mode||"hide"),v=f.options.direction||"left";e.effects.save(y,x),y.show(),e.effects.createWrapper(y);var q=v=="up"||v=="down"?"top":"left",p=v=="up"||v=="left"?"pos":"neg",n=f.options.distance||(q=="top"?y.outerHeight({margin:!0})/2:y.outerWidth({margin:!0})/2);w=="show"&&y.css("opacity",0).css(q,p=="pos"?-n:n);var b={opacity:w=="show"?1:0};b[q]=(w=="show"?p=="pos"?"+=":"-=":p=="pos"?"-=":"+=")+n,y.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){w=="hide"&&y.hide(),e.effects.restore(y,x),e.effects.removeWrapper(y),f.callback&&f.callback.apply(this,arguments),y.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.explode=function(f){return this.queue(function(){var y=f.options.pieces?Math.round(Math.sqrt(f.options.pieces)):3,x=f.options.pieces?Math.round(Math.sqrt(f.options.pieces)):3;f.options.mode=f.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":f.options.mode;var w=e(this).show().css("visibility","hidden"),v=w.offset();v.top-=parseInt(w.css("marginTop"),10)||0,v.left-=parseInt(w.css("marginLeft"),10)||0;var q=w.outerWidth(!0),p=w.outerHeight(!0);for(var n=0;n<y;n++){for(var b=0;b<x;b++){w.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(q/x),top:-n*(p/y)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:q/x,height:p/y,left:v.left+b*(q/x)+(f.options.mode=="show"?(b-Math.floor(x/2))*(q/x):0),top:v.top+n*(p/y)+(f.options.mode=="show"?(n-Math.floor(y/2))*(p/y):0),opacity:f.options.mode=="show"?0:1}).animate({left:v.left+b*(q/x)+(f.options.mode=="show"?0:(b-Math.floor(x/2))*(q/x)),top:v.top+n*(p/y)+(f.options.mode=="show"?0:(n-Math.floor(y/2))*(p/y)),opacity:f.options.mode=="show"?1:0},f.duration||500)}}setTimeout(function(){f.options.mode=="show"?w.css({visibility:"visible"}):w.css({visibility:"visible"}).hide(),f.callback&&f.callback.apply(w[0]),w.dequeue(),e("div.ui-effects-explode").remove()},f.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.fade=function(f){return this.queue(function(){var h=e(this),b=e.effects.setMode(h,f.options.mode||"hide");h.animate({opacity:b},{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){f.callback&&f.callback.apply(this,arguments),h.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.fold=function(f){return this.queue(function(){var F=e(this),E=["position","top","bottom","left","right"],D=e.effects.setMode(F,f.options.mode||"hide"),C=f.options.size||15,B=!!f.options.horizFirst,A=f.duration?f.duration/2:e.fx.speeds._default/2;e.effects.save(F,E),F.show();var z=e.effects.createWrapper(F).css({overflow:"hidden"}),y=D=="show"!=B,x=y?["width","height"]:["height","width"],w=y?[z.width(),z.height()]:[z.height(),z.width()],v=/([0-9]+)%/.exec(C);v&&(C=parseInt(v[1],10)/100*w[D=="hide"?0:1]),D=="show"&&z.css(B?{height:0,width:C}:{height:C,width:0});var q={},b={};q[x[0]]=D=="show"?w[0]:C,b[x[1]]=D=="show"?w[1]:0,z.animate(q,A,f.options.easing).animate(b,A,f.options.easing,function(){D=="hide"&&F.hide(),e.effects.restore(F,E),e.effects.removeWrapper(F),f.callback&&f.callback.apply(F[0],arguments),F.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.highlight=function(f){return this.queue(function(){var p=e(this),n=["backgroundImage","backgroundColor","opacity"],h=e.effects.setMode(p,f.options.mode||"show"),b={backgroundColor:p.css("backgroundColor")};h=="hide"&&(b.opacity=0),e.effects.save(p,n),p.show().css({backgroundImage:"none",backgroundColor:f.options.color||"#ffff99"}).animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){h=="hide"&&p.hide(),e.effects.restore(p,n),h=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),f.callback&&f.callback.apply(this,arguments),p.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.pulsate=function(f){return this.queue(function(){var x=e(this),w=e.effects.setMode(x,f.options.mode||"show"),v=(f.options.times||5)*2-1,q=f.duration?f.duration/2:e.fx.speeds._default/2,p=x.is(":visible"),n=0;p||(x.css("opacity",0).show(),n=1),(w=="hide"&&p||w=="show"&&!p)&&v--;for(var b=0;b<v;b++){x.animate({opacity:n},q,f.options.easing),n=(n+1)%2}x.animate({opacity:n},q,f.options.easing,function(){n==0&&x.hide(),f.callback&&f.callback.apply(this,arguments)}),x.queue("fx",function(){x.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.puff=function(f){return this.queue(function(){var q=e(this),p=e.effects.setMode(q,f.options.mode||"hide"),n=parseInt(f.options.percent,10)||150,h=n/100,b={height:q.height(),width:q.width()};e.extend(f.options,{fade:!0,mode:p,percent:p=="hide"?n:100,from:p=="hide"?b:{height:b.height*h,width:b.width*h}}),q.effect("scale",f.options,f.duration,f.callback),q.dequeue()})},e.effects.scale=function(f){return this.queue(function(){var y=e(this),x=e.extend(!0,{},f.options),w=e.effects.setMode(y,f.options.mode||"effect"),v=parseInt(f.options.percent,10)||(parseInt(f.options.percent,10)==0?0:w=="hide"?0:100),q=f.options.direction||"both",p=f.options.origin;w!="effect"&&(x.origin=p||["middle","center"],x.restore=!0);var n={height:y.height(),width:y.width()};y.from=f.options.from||(w=="show"?{height:0,width:0}:n);var b={y:q!="horizontal"?v/100:1,x:q!="vertical"?v/100:1};y.to={height:n.height*b.y,width:n.width*b.x},f.options.fade&&(w=="show"&&(y.from.opacity=0,y.to.opacity=1),w=="hide"&&(y.from.opacity=1,y.to.opacity=0)),x.from=y.from,x.to=y.to,x.mode=w,y.effect("size",x,f.duration,f.callback),y.dequeue()})},e.effects.size=function(f){return this.queue(function(){var H=e(this),G=["position","top","bottom","left","right","width","height","overflow","opacity"],F=["position","top","bottom","left","right","overflow","opacity"],E=["width","height","overflow"],D=["fontSize"],C=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],B=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],A=e.effects.setMode(H,f.options.mode||"effect"),z=f.options.restore||!1,y=f.options.scale||"both",x=f.options.origin,w={height:H.height(),width:H.width()};H.from=f.options.from||w,H.to=f.options.to||w;if(x){var v=e.effects.getBaseline(x,w);H.from.top=(w.height-H.from.height)*v.y,H.from.left=(w.width-H.from.width)*v.x,H.to.top=(w.height-H.to.height)*v.y,H.to.left=(w.width-H.to.width)*v.x}var b={from:{y:H.from.height/w.height,x:H.from.width/w.width},to:{y:H.to.height/w.height,x:H.to.width/w.width}};if(y=="box"||y=="both"){b.from.y!=b.to.y&&(G=G.concat(C),H.from=e.effects.setTransition(H,C,b.from.y,H.from),H.to=e.effects.setTransition(H,C,b.to.y,H.to)),b.from.x!=b.to.x&&(G=G.concat(B),H.from=e.effects.setTransition(H,B,b.from.x,H.from),H.to=e.effects.setTransition(H,B,b.to.x,H.to))}(y=="content"||y=="both")&&b.from.y!=b.to.y&&(G=G.concat(D),H.from=e.effects.setTransition(H,D,b.from.y,H.from),H.to=e.effects.setTransition(H,D,b.to.y,H.to)),e.effects.save(H,z?G:F),H.show(),e.effects.createWrapper(H),H.css("overflow","hidden").css(H.from);if(y=="content"||y=="both"){C=C.concat(["marginTop","marginBottom"]).concat(D),B=B.concat(["marginLeft","marginRight"]),E=G.concat(C).concat(B),H.find("*[width]").each(function(){var n=e(this);z&&e.effects.save(n,E);var h={height:n.height(),width:n.width()};n.from={height:h.height*b.from.y,width:h.width*b.from.x},n.to={height:h.height*b.to.y,width:h.width*b.to.x},b.from.y!=b.to.y&&(n.from=e.effects.setTransition(n,C,b.from.y,n.from),n.to=e.effects.setTransition(n,C,b.to.y,n.to)),b.from.x!=b.to.x&&(n.from=e.effects.setTransition(n,B,b.from.x,n.from),n.to=e.effects.setTransition(n,B,b.to.x,n.to)),n.css(n.from),n.animate(n.to,f.duration,f.options.easing,function(){z&&e.effects.restore(n,E)})})}H.animate(H.to,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){H.to.opacity===0&&H.css("opacity",H.from.opacity),A=="hide"&&H.hide(),e.effects.restore(H,z?G:F),e.effects.removeWrapper(H),f.callback&&f.callback.apply(this,arguments),H.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.shake=function(f){return this.queue(function(){var F=e(this),E=["position","top","bottom","left","right"],D=e.effects.setMode(F,f.options.mode||"effect"),C=f.options.direction||"left",B=f.options.distance||20,A=f.options.times||3,z=f.duration||f.options.duration||140;e.effects.save(F,E),F.show(),e.effects.createWrapper(F);var y=C=="up"||C=="down"?"top":"left",x=C=="up"||C=="left"?"pos":"neg",w={},v={},q={};w[y]=(x=="pos"?"-=":"+=")+B,v[y]=(x=="pos"?"+=":"-=")+B*2,q[y]=(x=="pos"?"-=":"+=")+B*2,F.animate(w,z,f.options.easing);for(var b=1;b<A;b++){F.animate(v,z,f.options.easing).animate(q,z,f.options.easing)}F.animate(v,z,f.options.easing).animate(w,z/2,f.options.easing,function(){e.effects.restore(F,E),e.effects.removeWrapper(F),f.callback&&f.callback.apply(this,arguments)}),F.queue("fx",function(){F.dequeue()}),F.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.slide=function(f){return this.queue(function(){var y=e(this),x=["position","top","bottom","left","right"],w=e.effects.setMode(y,f.options.mode||"show"),v=f.options.direction||"left";e.effects.save(y,x),y.show(),e.effects.createWrapper(y).css({overflow:"hidden"});var q=v=="up"||v=="down"?"top":"left",p=v=="up"||v=="left"?"pos":"neg",n=f.options.distance||(q=="top"?y.outerHeight({margin:!0}):y.outerWidth({margin:!0}));w=="show"&&y.css(q,p=="pos"?isNaN(n)?"-"+n:-n:n);var b={};b[q]=(w=="show"?p=="pos"?"+=":"-=":p=="pos"?"-=":"+=")+n,y.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){w=="hide"&&y.hide(),e.effects.restore(y,x),e.effects.removeWrapper(y),f.callback&&f.callback.apply(this,arguments),y.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.transfer=function(f){return this.queue(function(){var w=e(this),v=e(f.options.to),q=v.offset(),p={top:q.top,left:q.left,height:v.innerHeight(),width:v.innerWidth()},n=w.offset(),b=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(f.options.className).css({top:n.top,left:n.left,height:w.innerHeight(),width:w.innerWidth(),position:"absolute"}).animate(p,f.duration,f.options.easing,function(){b.remove(),f.callback&&f.callback.apply(w[0],arguments),w.dequeue()})})}})(jQuery);(function(e,d){if(e.ui&&e.ui.dialog){e.ui.dialog.overlay.events=e.map("focus,keydown,keypress".split(","),function(b){return b+".dialog-overlay"}).join(" ")}}(jQuery));(function(e){var d=e.ui.dialog.prototype._createButtons;var b=e.ui.dialog.prototype._setData;e.ui.dialog.prototype._createButtons=function(h){var f=this;d.apply(this,[h]);if(typeof(this.options.percButtons)!="undefined"&&this.options.percButtons!=null){f._createPercButtons(this.options.percButtons)}};e.ui.dialog.prototype._setData=function(h,n){var f=this;if(h=="perc-buttons"){f._createPercButtons(n)}b.apply(this,[h,n])};e.ui.dialog.prototype._createPercButtons=function(n){var h=this;var f=false;var q=window.location.protocol+"//"+window.location.host+"/cm";uiDialogButtonPane=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");var p={Ok:{bgimage:"url("+q+"/images/images/buttonOk.png)",bgimageOver:"url("+q+"/images/images/buttonOkOver.png)",width:"78px",height:"29px",cls:"perc-ok",display:"block"},Override:{bgimage:"url("+q+"/images/images/buttonOverride.png)",bgimageOver:"url("+q+"/images/images/buttonOverrideOver.png)",width:"126px",height:"29px",cls:"perc-ok",display:"block"},Move:{bgimage:"url("+q+"/images/images/buttonMove.png)",bgimageOver:"url("+q+"/images/images/buttonMoveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Select:{bgimage:"url("+q+"/images/images/buttonSelect.png)",bgimageOver:"url("+q+"/images/images/buttonSelectOver.png)",width:"100px",height:"29px",cls:"perc-save",display:"block"},Yes:{bgimage:"url("+q+"/images/images/buttonYes.png)",bgimageOver:"url("+q+"/images/images/buttonYesOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Preferred":{bgimage:"url("+q+"/images/images/ButtonYesBlue.png)",bgimageOver:"url("+q+"/images/images/ButtonYesBlueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Silver":{bgimage:"url("+q+"/images/images/buttonYesNoFocus.png)",bgimageOver:"url("+q+"/images/images/buttonYesOverNoFocus.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Continue:{bgimage:"url("+q+"/images/images/buttonContinue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Continue Preferred":{bgimage:"url("+q+"/images/images/buttonContinueBlue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueBlueOver.png)",width:"126px",height:"29px",cls:"perc-save",display:"block"},"New Folder":{bgimage:"url("+q+"/images/images/buttonSave.gif)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.gif)",width:"auto",height:"22px",cls:"perc-save",display:"block"},Save:{bgimage:"url("+q+"/images/images/buttonSave.png)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Don't Save":{bgimage:"url("+q+"/images/images/buttonDontSave.png)",bgimageOver:"url("+q+"/images/images/buttonDontSaveOver.png)",width:"88px",height:"29px",cls:"perc-dont-save",display:"block"},Cancel:{bgimage:"url("+q+"/images/images/buttonCancel.gif)",bgimageOver:"url("+q+"/images/images/buttonCancelOver.gif)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"Cancel Blue":{bgimage:"url("+q+"/images/images/buttonCancelBlue.png)",bgimageOver:"url("+q+"/images/images/buttonCancelBlueOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},No:{bgimage:"url("+q+"/images/images/buttonNo.png)",bgimageOver:"url("+q+"/images/images/buttonNoOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"No Silver":{bgimage:"url("+q+"/images/images/ButtonNoSilver.png)",bgimageOver:"url("+q+"/images/images/ButtonNoSilverOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},Next:{bgimage:"url("+q+"/images/images/buttonNext.png)",bgimageOver:"url("+q+"/images/images/buttonNextOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Back:{bgimage:"url("+q+"/images/images/buttonBack.gif)",bgimageOver:"url("+q+"/images/images/buttonBack.gif)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Finish:{bgimage:"url("+q+"/images/images/buttonFinish.png)",bgimageOver:"url("+q+"/images/images/buttonFinishOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Close:{bgimage:"url("+q+"/images/images/buttonClose.png)",bgimageOver:"url("+q+"/images/images/buttonCloseOver.png)",width:"78px",height:"29px",cls:"perc-close",display:"block"},"Close Normal":{bgimage:"url("+q+"/images/images/buttonCloseNormal.png)",bgimageOver:"url("+q+"/images/images/buttonCloseNormalOver.png)",width:"78px",height:"29px",cls:"perc-close-normal",display:"block"},Done:{bgimage:"url("+q+"/images/images/buttonDone.png)",bgimageOver:"url("+q+"/images/images/buttonDoneOver.png)",width:"78px",height:"29px",cls:"perc-done",display:"block"},"Done Disabled":{bgimage:"url("+q+"/images/images/buttonDoneDisabled.png)",width:"78px",height:"29px",cls:"perc-done-disabled",display:"block"},Import:{bgimage:"url("+q+"/images/images/buttonImport.png)",bgimageOver:"url("+q+"/images/images/buttonImportOver.png)",width:"78px",height:"29px",cls:"perc-import",display:"block"},Activate:{bgimage:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",bgimageOver:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",width:"78px",height:"29px",cls:"perc-activate",display:"block"},Start:{bgimage:"url("+q+"/images/images/buttonStart.png)",bgimageOver:"url("+q+"/images/images/buttonStartOver.png)",width:"78px",height:"29px",cls:"perc-start",display:"block"},Search:{bgimage:"url("+q+"/images/images/blueButtonSearch.png)",bgimageOver:"url("+q+"/images/images/blueButtonSearchOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Submit:{bgimage:"url("+q+"/images/images/buttonWfsubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfsubmitOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Approve:{bgimage:"url("+q+"/images/images/buttonWfapprove.png)",bgimageOver:"url("+q+"/images/images/buttonWfapproveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"},Reject:{bgimage:"url("+q+"/images/images/buttonWfreject.png)",bgimageOver:"url("+q+"/images/images/buttonWfrejectOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Resubmit:{bgimage:"url("+q+"/images/images/buttonWfresubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfresubmitOver.png)",width:"126px",height:"29px",cls:"perc-search",display:"block"},Archive:{bgimage:"url("+q+"/images/images/buttonWfarchive.png)",bgimageOver:"url("+q+"/images/images/buttonWfarchiveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"}};this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof n=="object"&&n!==null&&e.each(n,function(){return !(f=true)}));if(f){e.each(n,function(v,w){e("<div></div>").attr("id",w.id).css("background-image",p[v].bgimage).css("display",p[v].display).css("float","right").css("height",p[v].height).css("width",p[v].width).addClass(p[v].cls).addClass(w.cls).click(function(){w.click.apply(h.element[0],arguments)}).hover(function(){e(this).css("background-image",p[v].bgimageOver)},function(){e(this).css("background-image",p[v].bgimage)}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}).appendTo(uiDialogButtonPane)});uiDialogButtonPane.appendTo(this.uiDialog)}}})(jQuery);(function(W){W.globalEventIds={"#perc_head #perc-links":"#perc_head #perc_topnav"};document.onclick=function(){W.each(W.globalEventIds,function(ax,aw){if(W(ax).hasClass("perc-visible")){W(aw).click()}})};W.ajaxSetup({cache:false});W.Percussion=W.Percussion||{};W.perc_fakes={path_service:false,page_service:{create_page:false,render_page:false,new_asset:false,get_widget_ctypes:false},template_service:{get_template_css:false,set_template_css:false}};W.perc_utils={id:aa,acop:ar,acat:K,odiff:w,a_o:U,o_a:p,elem:aj,show_error:ac,alert_dialog:y,prompt_dialog:aq,confirm_dialog:ak,choose_icon:L,path_id:at,input:d,handleLinks:h,handleObjects:S,select:ag,extract_path:au,extract_path_end:af,click_and_double_click:an,unxml:Q,rexml:Y,arem:N,deep_get:G,debug:J,info:ao,error:P,isBlankString:ad,convertCXFArray:am,encodeURL:al,preLoadImages:M,replaceURLWithHTMLLinks:x,sortCaseInsensitive:I,formatTimeFromDate:B,copyRegionObject:copyRegionObject,max:H,min:ap,addArrays:V,newArray:v,splitDateTime:ah,addAutoScroll:R,removeAutoScroll:D,formatFileSize:Z,parseUTCintoDate:av,getDisplayFormat:b,makeFolderEditable:C,contains:T,encodePathArray:E,isPathUnderDesign:ae,percParseInt:f,logToServer:n};function f(ay){var aw=null;if(ay){try{aw=parseInt(ay,10)}catch(ax){}}return aw}function b(ay){if(typeof ay!=="string"){return""}var aw=ay.split("/");var ax="";while(aw.length>0){ax=W.perc_displayformats[aw.join("/")];if(ax!=undefined){return ax}aw.pop()}return""}function n(aw,ay,ax){if(!(W.type(aw)==="string")){return}if(aw==="debug"){J(ax)}else{if(aw==="error"){P(ax)}else{ao(ax)}}W.PercUtilService.logToServer(aw,ay,ax)}function av(ay){var aw=ay.replace(/(\d\d)-(\d\d)-(\d\d)/,"$1/$2/$3").replace(/([+-]\d\d):(\d\d)/,"$1$2").replace(/\.\d\d\d/,"").replace("T"," ");var ax=new Date(aw);return ax}function ah(ax,aw){var az=new Date(ax);if(typeof(az)=="undefined"||isNaN(az)){az=av(ax)}if(!aw){aw="M d, yy"}var ay=W.datepicker.formatDate(aw,az);var aA=B(az);return{date:ay,time:aA}}function am(aw){if(typeof(aw)=="undefined"){return[]}if(!W.isArray(aw)){return[aw]}return aw}function ad(aw){return !aw||aw==null||typeof aw!="string"||W.trim(aw).length<1}function aj(ay,ax){var aw=W.grep(ax,function(az){return az==ay});return aw.length>0}function ag(ax,aw,ay){return"<label for='"+ay+"'>"+ax+"</label><br/><select name='"+aw+"' id='"+ay+"' ></select><br/>"}function d(ax,aw,aA,az,ay){ay=ay||"text";return"<label for='"+aA+"'>"+ax+"</label><br/><input type='"+ay+"' name='"+aw+"' id='"+aA+"' ></input><br/>"}function au(ax){var aw=ax.split("/");if(aw.length>1&&aw[aw.length-1]==""){aw.pop()}return aw}function at(aw){return W.map(aw,function(ax){return ax}).join("-")}W.fn.perc_dialog=function(ax){ax.dialogClass="perc-dialog perc-dialog-corner-all";ax.zIndex=9500;var ay=W(this).dialog(ax);var aw=ay.closest(".ui-dialog");if(ax.id){aw.attr("id",ax.id)}W(window).trigger("resize").trigger("resize");return ay};function X(aw,ax){var ay=W("<div/>").addClass("perc-show-again").append(W("<input/>").attr("type","checkBox").attr("id","perc_show_again_check")).append(W("<label/>").attr("for","perc_show_again_check").text("Do not show again"));W(this).parent().find(".ui-dialog-buttonpane").append(ay)}function e(ay){var ax=W.PercNavigationManager.getUserName();var az="dontShowAgain-"+ax+"-"+ay;var aw=W.cookie(az);return aw=="true"}function z(ay,az){var aB=W(this).parent().find("#perc_show_again_check").is(":checked");if(aB){var aw=W.PercNavigationManager.getUserName();var ax=W(this).parent().attr("id");var aA="dontShowAgain-"+aw+"-"+ax;W.cookie(aA,"true")}}function ak(ay){var aA={title:"Please Confirm",question:"Do you really want to do this ?",type:"OK_CANCEL",cancel:function(){},success:function(){},showAgainCheck:false,dontShowAgainAction:null};function ax(){aA.success();az.dialog("close");az.remove()}function aC(){aA.cancel();az.dialog("close");az.remove()}W.extend(aA,ay);var aB={};if(aA.type=="YES_NO"){aB={Yes:{click:ax,id:"perc-confirm-generic-yes"},No:{click:aC,id:"perc-confirm-generic-no"}}}else{if(aA.type=="YES_PREFERRED_NO"){aB={"Yes Preferred":{click:ax,id:"perc-confirm-generic-yes"},"No Silver":{click:aC,id:"perc-confirm-generic-no"}}}else{if(aA.type=="YES_NO_PREFERRED"){aB={"Yes Silver":{click:function(){aA.success();az.remove()},id:"perc-confirm-generic-yes"},No:{click:function(){aA.cancel();az.remove()},id:"perc-confirm-generic-no"}}}else{if(aA.type=="OK"){aB={Ok:{click:ax,id:"perc-confirm-generic-ok"}}}else{if(aA.type=="OVERRIDE_OK"){aB={Ok:{click:aC,id:"perc-confirm-generic-ok"},Override:{click:ax,id:"perc-confirm-generic-override"}}}else{if(aA.type=="SAVE_BEFORE_CONTINUE"){aB={Save:{click:function(){aA.save(ax)},id:"perc-confirm-generic-save"},Cancel:{click:aC,id:"perc-confirm-generic-cancel"},"Don't Save":{click:function(){aA.dontSaveCallback();az.dialog("close");az.remove()},id:"perc-confirm-generic-continue"}}}else{if(aA.type=="CANCEL_CONTINUE"){aB={Continue:{click:ax,id:"perc-confirm-generic-continue"},"Cancel Blue":{click:aC,id:"perc-confirm-generic-cancel"}}}else{if(aA.type=="CANCEL_START"){aB={Start:{click:ax,id:"perc-confirm-generic-start"},Cancel:{click:aC,id:"perc-confirm-generic-cancel"}}}else{aB={Ok:{click:ax,id:"perc-confirm-generic-ok"},Cancel:{click:aC,id:"perc-confirm-generic-cancel"}}}}}}}}}}var az;var aw={dialogClass:"perc-confirm-dialog",title:aA.title,modal:true,resizable:false,percButtons:aB,id:aA.id};if(ay.height){aw.height=ay.height}if(ay.width){aw.width=ay.width}if(aA.showAgainCheck){if(e(aw.id)){if(typeof(ay.dontShowAgainAction)=="function"){ay.dontShowAgainAction()}else{ay.success()}return""}aw.open=X;aw.beforeclose=z}az=W("<div/>").append(aA.question).perc_dialog(aw)}function y(ax){var az={title:"Please Confirm",content:"Something is wrong!",okCallBack:function(){}};W.extend(az,ax);var aw=(az.width==undefined||az.width==null)?Math.max(az.title.length*35,400):az.width;var ay;ay=W("<div/>").append(az.content).perc_dialog({dialogClass:"perc-alert-dialog",title:az.title,modal:true,width:aw,resizable:false,id:az.id,percButtons:{Ok:{click:function(){ay.remove();az.okCallBack()},id:"perc-alert-generic-ok"}}})}function aq(ax){var az={title:"Beg Pardon?",question:"I'm sorry, what was the thing you needed to do?",cancel:function(){},success:function(){}};W.extend(az,ax);var aw=W("<input type='text' id='perc-prompt-dialog-question' />");var ay=W("<div/>").append(W("<label for='perc-prompt-dialog-question'/>").append(az.question)).append(W("<br/>")).append(aw).dialog({dialogClass:"perc-prompt-dialog",title:az.title,modal:true,resizable:false,percButtons:{Yes:{click:function(){var aA=aw.val();ay.remove();az.success(aA)},id:"perc-prompt-generic-yes"},No:{click:function(){ay.remove();az.cancel()},id:"perc-prompt-generic-no"}},id:az.id})}function aa(aw){return aw}function ar(aw){return W.map(aw,aa)}function K(ax,aw){return ar(ax).concat(ar(aw))}function w(aw,ax){var ay={};W.each(aw,function(aA,az){if(!ax[aA]){ay[aA]=az}});return ay}function N(aw,ax){W.each(aw,function(ay){if(aw[ay]===ax){delete aw[ay]}})}function U(ax){var aw=[];W.each(ax,function(ay){aw.push([ay,this])});return aw}function p(aw){var ax={};W.each(aw,function(){ax[this.k]=this.v});return ax}function af(ax){var aw=ax.split("/");if(aw[aw.length-1]===""){aw.pop()}return aw[aw.length-1]}function ac(aw){if(aw){alert(aw)}}W.fn.perc_button=function(){this.addClass("ui-state-default ui-corner-all").hover(function(){if(!W(this).hasClass("ui-state-disabled")){W(this).addClass("ui-state-hover")}},function(){W(this).removeClass("ui-state-hover")});return this};function Z(ay){var ax=1024;var az=(1024*1024);var aw=parseFloat(ay);if(isNaN(aw)){return""}if(aw<ax){return aw+" B"}if(aw>az){return(aw/az).toFixed(0)+" MB"}return(aw/ax).toFixed(0)+" KB"}function L(ay,ax,az){var aw={site:"../images/images/iconWebsite.gif",folder:"../images/images/iconFolder.gif",percPage:"../images/images/iconPage.gif"};if(az==","+W.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/iconLibrary.gif"}if(az==","+W.perc_paths.SITES_ROOT_NO_SLASH){return"../images/images/iconWebsite.gif"}if(az==","+W.perc_paths.DESIGN_ROOT_NO_SLASH){return"../images/images/iconDesign.png"}if(az==",Search"){return"../images/images/searchIcon.png"}if(ax){return ax}if(ay&&aw[ay]){return aw[ay]}if(ay=="percImageAsset"){return"../images/images/genericImage.png"}if(ay=="percFileAsset"||ay=="percFlashAsset"){return"../images/images/genericFile.png"}if(ay&&az[1]==W.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/genericAsset.png"}if(ay){return"../images/images/iconPage.gif"}return"../images/images/iconFolder.gif"}W.fn.percWidLibMaximizer=function(ay){var aB="#perc-layout-menu";if($j("#tabs-3").length){aB="#tabs-3 #perc-layout-menu"}if($j(aB).parent().find(".perc-template-container").hasClass("perc-visible")){$j(aB).parent().find(".perc-template-container").removeClass("perc-visible").addClass("perc-hidden");$j(aB).parent().find("#perc-wid-lib-expander").removeClass("perc-whitebg");$j(aB).parent().find("#perc-wid-lib-minimizer").replaceWith('<a id="perc-wid-lib-maximizer" style="float: left;" href="#"></a>')}else{var ax=$j(aB).parent().find(".perc-region-library-container");if(ax.hasClass("perc-visible")){W.fn.percRegionLibraryMaximizer(ay)}$j(aB).parent().find(".perc-template-container").removeClass("perc-hidden").addClass("perc-visible");$j(aB).parent().find("#perc-wid-lib-expander").addClass("perc-whitebg");$j(aB).parent().find("#perc-wid-lib-maximizer").replaceWith('<a id="perc-wid-lib-minimizer" style="float: left;" href="#"></a>')}var az=W("#frame");var aA=W(".perc-main");var aw=W("#bottom");fixIframeHeight(aA,aw,az)};W.fn.percRegionLibraryMaximizer=function(aB){var aA="#perc-layout-menu";if($j("#tabs-3").length){aA="#tabs-3 #perc-layout-menu"}var aG=$j(aA).parent();var aF=$j(aG.find(".perc-region-library-container"));var aE=$j(aA).parent().find(".perc-template-container");var aD=$j(aG.find("#perc-region-library-expander"));var ay=$j(aG.find("#perc-region-library-maximizer"));var aC=$j(aG.find("#perc-region-library-minimizer"));if(aF.hasClass("perc-visible")){aF.removeClass("perc-visible").addClass("perc-hidden");aD.removeClass("perc-whitebg");aC.replaceWith('<a id="perc-region-library-maximizer" style="float: left;" href="#"></a>')}else{if(aE.hasClass("perc-visible")){W.fn.percWidLibMaximizer(aB)}aF.removeClass("perc-hidden").addClass("perc-visible");aD.addClass("perc-whitebg");ay.replaceWith('<a id="perc-region-library-minimizer" style="float: left;" href="#"></a>')}var ax=W("#frame");var az=W(".perc-main");var aw=W("#bottom");fixIframeHeight(az,aw,ax)};W.fn.percOrphanAssetsMaximizer=function(aC){var aB="#perc-layout-menu";if($j("#tabs-2").length){aB="#tabs-2 #perc-content-menu"}var aF=$j(aB).parent();var aD=aF.find("#perc_asset_library");var aE=aF.find("#perc_orphan_assets_expander");if(aD.hasClass("perc-visible")){var az=aF.find("#perc_orphan_assets_minimizer");aD.removeClass("perc-visible").addClass("perc-hidden");aE.removeClass("perc-whitebg");az.replaceWith('<a id="perc_orphan_assets_maximizer" style="float: left;" href="#"></a>')}else{var ay=aF.find("#perc_orphan_assets_maximizer");aD.removeClass("perc-hidden").addClass("perc-visible");aE.addClass("perc-whitebg");ay.replaceWith('<a id="perc_orphan_assets_minimizer" style="float: left;" href="#"></a>')}var ax=W("#frame");var aA=W(".perc-main");var aw=W("#bottom");fixIframeHeight(aA,aw,ax)};function an(az,aA,ay){var ax=false;var aw=500;az.click(function(){if(ax){}else{ax=true;setTimeout(function(){ax=false},aw);aA()}});az.dblclick(ay)}W.fn.perc_toggle=function(aw){if(W(aw).length&&W(aw).hasClass("perc-hidden")){W(aw).removeClass("perc-hidden");W(aw).addClass("perc-visible")}else{W(aw).removeClass("perc-visible");W(aw).addClass("perc-hidden")}return this};W.fn.perc_toggle_padding=function(){var ax=W.fn.perc_toggle_padding.arguments;for(var aw=0;aw<ax.length;aw++){if(W(ax[aw]).length&&W(ax[aw]).hasClass("perc-nopadding")){W(ax[aw]).removeClass("perc-nopadding")}else{W(ax[aw]).addClass("perc-nopadding")}}return this};var q=0;function R(){W("#frame").percAutoScroll({offsetY:10,width:10,speed:10,directions:"n, s"});W("#frame").percAutoScroll.postScrollView=function(aw,ax){W("div.ui-droppable").each(function(){if(!W(this).hasClass("ui-layout-ignore")){W(this).css("top",W(this).position().top-ax)}})}}function D(){W("#frame").percAutoScroll.remove()}function Q(aA,aB){if(W.isFunction(aA)){aA=aA(aB.get(0).tagName)}if(aA.valueOf()==="$"){return aB.text()}if(W.isArray(aA)){var ay=[];var ax=aA[0];var az=aB.children();if(az.length==0&&ax=="$"){var aw=aB.length;for(i=0;i<aw;i++){ay.unshift(W(aB[i]).text())}}else{az.each(function(){var aC=Q(ax,W(this));aC._tagName=W(this)[0].tagName;ay.push(aC)})}return ay}var ay={};W.each(aA,function(aD){var aC=[];var aE=aB.children().filter(function(){aC.push(this.tagName);return this.tagName.toLowerCase()==aD.toLowerCase()});if(aE.length){ay[aD]=Q(this,aE)}else{J("Expected to find child: "+aD+", tags found: "+aC)}});return ay}function Y(ax,aw){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+ab(ax,aw)}function ab(az,ax,aA){if(W.isFunction(az)){az=az(ax._tagName)}if(az.valueOf()==="$"){if(!ax){J("Unexpected null in rexml");return""}else{if(typeof(ax)==="string"){return ax.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}else{return ax}}}else{if(W.isArray(az)){var ay="";if(az.length==1&&az[0]=="$"){var aw=ax.length;for(i=0;i<aw;i++){ay+="<"+aA+">"+ax[i]+"</"+aA+">"}}else{if(W.isArray(ax)){W.each(ax,function(){ay+="<"+this._tagName+">"+ab(az[0],this,this.tagName)+"</"+this._tagName+">"})}else{J("Expected array, got %o instead",ax)}}return ay}else{var ay="";W.each(az,function(aB){if(aB in ax){var aC=W.isArray(az[aB])&&az[aB].length==1&&(az[aB])[0]=="$";if(!aC){ay+="<"+aB+">"}ay+=ab(az[aB],ax[aB],aB);if(!aC){ay+="</"+aB+">"}}else{J("Can't find "+aB+" in %o",ax)}});return ay}}}function G(ay,az){var aw=az.split(" ");var ax;while((ax=shift(aw))){if(ax in ay){ay=ay[ax]}else{return null}}return ay}function al(aw){return encodeURIComponent(aw).replace(/%2F/g,"/")}var F=false;function ai(){return F}function J(aw){if(!ai()){return}var ax;if(arguments.length>1){ax="DEBUG ["+arguments[0]+"] "+arguments[1]}else{ax="[DEBUG] "+arguments[0]}A(ax)}function ao(aw){var ax;if(arguments.length>1){ax="INFO ["+arguments[0]+"] "+arguments[1]}else{ax="[INFO] "+arguments[0]}A(ax)}function P(aw){var ax;if(arguments.length>1){ax="ERROR ["+arguments[0]+"] "+arguments[1]}else{ax="[ERROR] "+arguments[0]}A(ax)}function A(aw){if(window.console&&console&&console.log){if(W.browser.msie){console.log(aw)}else{console.log.apply(console,arguments)}}}var O=[];function M(){var ay=arguments.length;for(var ax=ay;ax--;){var aw=document.createElement("img");aw.src=arguments[ax];O.push(aw)}}function x(ax){var aw=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return ax.replace(aw,"<a href='$1'>$1</a>")}function S(ax){var aw=0;ax.contents().find(".perc-flash").find("object").each(function(){aw++;var aD=W(this).attr("width");var az=W(this).attr("height");var ay=aD;var aB=az;if(aD==""){var aA=W(this).children("embed").attr("width");if(aA==""){ay="100%"}else{ay=aA}}if(az==""){var aC=W(this).children("embed").attr("height");if(aC==""){aB="100%"}else{aB=aC}}if(ay.lastIndexOf("%")<0&&ay.lastIndexOf("px")<0){ay=ay+"px"}if(aB.lastIndexOf("%")<0&&aB.lastIndexOf("px")<0){aB=aB+"px"}W(this).replaceWith(W('<div id="perc-object-placeholder-'+aw+'" class="perc-object-placeholder" style="width: '+ay+"; height: "+aB+';"></div>'))})}function h(aw){aw.contents().find("a").each(function(){var ax=W(this).attr("href");W(this).attr("tempURL",ax);W(this).removeAttr("target");W(this).attr("href","javascript:void(0)")});if(W.browser.msie){aw.contents().find("iframe").each(function(){var ax=W(this).attr("src");if(ax.length>0){var ay="wmode=transparent";if(ax.indexOf("?")!=-1){W(this).attr("src",ax+"&"+ay)}else{W(this).attr("src",ax+"?"+ay)}}})}}function I(aw){if(W.isArray(aw)){aw.sort(function(ay,aA){var az=String(ay).toUpperCase();var ax=String(aA).toUpperCase();if(az>ax){return 1}if(az<ax){return -1}return 0})}}function B(az,ax){var aB;var aw=az.getHours();var aA=az.getMinutes();var aC=az.getSeconds();var ay=(aw>=12?" PM":" AM");aA=(aA<10?"0":"")+aA;aw=aw%12;if(aw==0){aw=12}aB=aw+":"+aA;if(ax){aB+=":"+(aC<10?"0"+aC:aC)}aB+=ay;return aB}function H(ax){var aw=-1;for(a=0;a<ax.length;a++){if(aw<ax[a]){aw=ax[a]}}return aw}function ap(ax){var aw=10000000;for(a=0;a<ax.length;a++){if(ax[a]<aw){aw=ax[a]}}return aw}function V(ay,aw){var ax=[];for(i=0;i<ay.length;i++){ax[i]=ay[i]+aw[i]}return ax}function v(aw){var ax=new Array(aw);for(i=0;i<aw;i++){ax[i]=0}return ax}W.percHideBodyScrollbars=function(){W("body").css("overflow","hidden")};W.percShowBodyScrollbars=function(){W("body").css("position","").css("overflow","")};function C(ay){var az=W("#perc-finder-listing-"+ay.id);var aw=az.children(".perc-finder-item-name");var ax=ay.type;aw.editable(function(aD,aB){var aD=W.trim(aD);aD=W.perc_textFilters.WINDOWS_FILE_NAME(aD);if(ax!="FSFolder"){aD=aD.replace(/ /g,"-")}var aC=W(this);var aA=aC.parent().attr("title");if(aD.length==0){return aA}if(aD!=aA){W.PercBlockUI(W.PercBlockUIMode.CURSORONLY);W.PercPathService.renameFolder(ay.path,aD,function(aF,aE,aH){if(aF==W.PercServiceUtils.STATUS_SUCCESS){var aI=W.perc_finder().lastClickPath;if(W.perc_finder().lastClickPath==null){aI=aE.PathItem.path.split("/");aI.push(aD)}W.perc_finder().lastClickPath=null;W.perc_finder().open(aI);W.unblockUI()}else{aC.text(aA);W.unblockUI();var aG="";if(aH=="renameFolderItem.reservedName"||aH=="renameFolderItem.longName"||aH=="renameFolderItem.invalidCharInName"){aG=aE.replace("<old_name>",aA).replace("<new_name>",aD)}else{aG="Cannot rename folder '"+aA+"' to '"+aD+"' because an object with the same name already exists."}W.perc_utils.alert_dialog({id:"perc-finder-rename-folder-error",title:"Error",content:aG})}})}else{W.perc_finder().refresh()}return aD},{type:"filteredText",event:"dblclick",height:"14px",width:"125px",select:true,onblur:"submit",fieldid:"perc_finder_inline_field_edit",onedit:function(aA){W("#perc_finder_inline_field_edit").blur()},data:function(aB,aA){return W(this).parent().attr("title")}});W("#perc-finder-listing-"+ay.id).children(".perc-finder-item-name").trigger("dblclick")}function T(aw,az){var ax=aw.entries;if(!W.isArray(ax)){var ay=[];ay.push(ax);ax=ay}for(i=0;i<ax.length;i++){if(ax[i].value==az){return true}}return false}function E(aw){if(typeof(aw)=="undefined"){return}var ax=[];W(aw).each(function(ay,aA){var az=al(aA);ax.push(az)});return ax}function ae(aw){if(aw.length==0){return false}if(aw[1]=="Design"){return true}else{return false}}})(jQuery);function copyRegionObject(d,b){b.vertical=d.vertical;b.children=d.children;b.widgets=d.widgets;b.width=d.width;b.height=d.height;b.owner=d.owner}function htmlEntities(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#39;")}(function(b){b.perc_sessionTimeout=function(h){var q={serverCheck:10,sessionStateUrl:"/Rhythmyx/sessioncheck",logoutUrl:"/Rhythmyx/logout",dialogTitle:"Are you still there?",dialogMessageTimeout:"You will be automatically logged out in"};var x=q;if(h){x=b.extend(q,h)}var B={expiry:0,warning:0,counter:0};var D=null;var v;var y;var z=new Date().getTime();var d=(window.opener&&window.opener!==window);function f(H){var I="";if(H){I="extendSession=true";w()}var G=new Date().getTime();b.ajax({url:x.sessionStateUrl,type:"get",cache:false,data:I,contentType:"application/json; charset=utf-8",dataType:"json",success:function(J){B=J;z=G;A()},error:function(J,L,K){console.log("error :"+J.responseText);B.expiry=B.expiry+G-z;z=G;A()}})}function A(){if(B.expiry<=0){E()}else{if(B.expiry<B.warning){if(D===null){C()}}else{if(D!==null){w()}window.clearInterval(y);if(B.warning<B.expiry){y=window.setTimeout(function(){f(false)},B.expiry-B.warning)}}}}function e(){var H=new Date().getTime();var G=(H-z);var I=B.expiry-G;if(I>0){b("#logouttime").html(n(I));if(G>x.serverCheck*1000){f(false)}}else{w();f(false)}}function C(){D=p();window.clearInterval(v);e();v=window.setInterval(function(){e()},1000)}function w(){window.clearInterval(v);if(D!==null){D.remove();D=null}}function n(J){var K=Math.floor((J/1000)%60);var I=Math.floor((J/1000/60)%60);var G=Math.floor((J/(1000*60*60))%24);var H="";if(G>0){H+=G+" hour";if(G>1){H+="s"}H+=" "}return H+I+" min "+K+"s"}function E(){w();if(d){b.get("/Rhythmyx/logout",function(G){window.close()})}else{top.document.location.href="/Rhythmyx/logout"}}function F(){w();f(true)}function p(){D=G();function G(){var H="<div id='perc-session-timeout-content'><p>"+x.dialogMessageTimeout+'</p><p><span id="logouttime"/></p></div>';var I=b(H).perc_dialog({title:x.dialogTitle,id:"perc-session-timeout-dialog",width:400,resizable:false,modal:true,buttons:{"Extend Session":function(){F()},Logout:function(){E()}}});return b(I)}return D}f(false)}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,A){var p,B=A.location,x=Array.prototype.slice,D=decodeURIComponent,b=$.param,e,w,H,d=$.bbq=$.bbq||{},C,G,q,h=$.event.special,f="hashchange",M="querystring",P="fragment",K="elemUrlAttr",v="href",F="src",J=/^.*\?|#.*$/g,I=/^.*\#/,O={};function Q(R){return typeof R==="string"}function N(S){var R=x.call(arguments,1);return function(){return S.apply(this,R.concat(x.call(arguments)))}}function y(R){return R.replace(/^[^#]*#?(.*)$/,"$1")}function z(R){return R.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function n(T,Y,R,U,S){var aa,X,W,Z,V;if(U!==p){W=R.match(T?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);V=W[3]||"";if(S===2&&Q(U)){X=U.replace(T?I:J,"")}else{Z=w(W[2]);U=Q(U)?w[T?P:M](U):U;X=S===2?U:S===1?$.extend({},U,Z):$.extend({},Z,U);X=b(X)}aa=W[1]+(T?"#":X||!W[1]?"?":"")+X+V}else{aa=Y(R!==p?R:B[v])}return aa}b[M]=N(n,0,z);b[P]=e=N(n,1,y);$.deparam=w=function(U,R){var T={},S={"true":!0,"false":!1,"null":null};$.each(U.replace(/\+/g," ").split("&"),function(X,ac){var W=ac.split("="),ab=D(W[0]),V,aa=T,Y=0,ad=ab.split("]["),Z=ad.length-1;if(/\[/.test(ad[0])&&/\]$/.test(ad[Z])){ad[Z]=ad[Z].replace(/\]$/,"");ad=ad.shift().split("[").concat(ad);Z=ad.length-1}else{Z=0}if(W.length===2){V=D(W[1]);if(R){V=V&&!isNaN(V)?+V:V==="undefined"?p:S[V]!==p?S[V]:V}if(Z){for(;Y<=Z;Y++){ab=ad[Y]===""?aa.length:ad[Y];aa=aa[ab]=Y<Z?aa[ab]||(ad[Y+1]&&isNaN(ad[Y+1])?{}:[]):V}}else{if($.isArray(T[ab])){T[ab].push(V)}else{if(T[ab]!==p){T[ab]=[T[ab],V]}else{T[ab]=V}}}}else{if(ab){T[ab]=R?p:""}}});return T};function L(T,R,S){if(R===p||typeof R==="boolean"){S=R;R=b[T?P:M]()}else{R=Q(R)?R.replace(T?I:J,""):R}return w(R,S)}w[M]=N(L,0);w[P]=H=N(L,1);$[K]||($[K]=function(R){return $.extend(O,R)})({a:v,base:v,iframe:F,img:F,input:F,form:"action",link:v,script:F});q=$[K];function E(U,S,T,R){if(!Q(T)&&typeof T!=="object"){R=T;T=S;S=p}return this.each(function(){var X=$(this),V=S||q()[(this.nodeName||"").toLowerCase()]||"",W=V&&X.attr(V)||"";X.attr(V,b[U](W,T,R))})}$.fn[M]=N(E,M);$.fn[P]=N(E,P);d.pushState=C=function(U,R){if(Q(U)&&/^#/.test(U)&&R===p){R=2}var T=U!==p,S=e(B[v],T?U:{},T?R:2);B[v]=S+(/#/.test(S)?"":"#")};d.getState=G=function(R,S){return R===p||typeof R==="boolean"?H(R):H(S)[R]};d.removeState=function(R){var S={};if(R!==p){S=G();$.each($.isArray(R)?R:arguments,function(U,T){delete S[T]})}C(S,2)};h[f]=$.extend(h[f],{add:function(R,T,S){return function(V){var U=V[P]=e();V.getState=function(W,X){return W===p||typeof W==="boolean"?w(U,W):w(U,X)[W]};R.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var n=p.location,q,v=$.event.special,d="hashchange",f=$.browser,h=f.msie&&f.version<8,e="on"+d in p&&!h;function b(w){w=w||n.href;return w.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;v[d]=$.extend(v[d],{setup:function(){if(e){return false}q.start()},teardown:function(){if(e){return false}q.stop()}});q=(function(){var w={},B,x,y,A;function z(){y=A=function(C){return C};if(h){x=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;A=function(){return b(x.document.location.href)};y=function(E,C){if(E!==C){var D=x.document;D.open().close();D.location.hash="#"+E}};y(b())}}w.start=function(){if(B){return}var D=b();y||z();(function C(){var F=b(),E=A(D);if(F!==D){y(D=F,E);$(p).trigger(d)}else{if(E!==D){n.href=n.href.replace(/#.*/,"")+"#"+E}}B=setTimeout(C,$[d+"Delay"])})()};w.stop=function(){if(!x){B&&clearTimeout(B);B=0}};return w})()})(jQuery,this);jQuery.cookie=function(d,v,y){if(typeof v!="undefined"){y=y||{};if(v===null){v="";y.expires=-1}var h="";if(y.expires&&(typeof y.expires=="number"||y.expires.toUTCString)){var n;if(typeof y.expires=="number"){n=new Date();n.setTime(n.getTime()+(y.expires*24*60*60*1000))}else{n=y.expires}h="; expires="+n.toUTCString()}var x=y.path?"; path="+(y.path):"";var p=y.domain?"; domain="+(y.domain):"";var b=y.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(v),h,x,p,b].join("")}else{var f=null;if(document.cookie&&document.cookie!=""){var w=document.cookie.split(";");for(var q=0;q<w.length;q++){var e=jQuery.trim(w[q]);if(e.substring(0,d.length+1)==(d+"=")){f=decodeURIComponent(e.substring(d.length+1));break}}}return f}};(function(h){var E="success";var f="error";var A="abort";var F="DELETE";var d="GET";var e="POST";var p="PUT";h.PercServiceUtils={STATUS_ERROR:f,STATUS_SUCCESS:E,STATUS_ABORT:A,TYPE_DELETE:F,TYPE_GET:d,TYPE_POST:e,TYPE_PUT:p,makeJsonRequest:v,makeXmlRequest:D,makeRequest:C,makeXdmJsonRequest:q,makeDeleteRequest:n,extractDefaultErrorMessage:y,extractFieldErrorCode:b,extractGlobalErrorCode:x,makeXdmXmlRequest:B,convertMapToArray:z};h.ajaxSetup({timeout:60000});function v(J,O,Q,R,K,L,P){var S=this;var I=h.isFunction(h.getCm1License)?h.getCm1License():"";var M=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var H=h.perc_utils.percParseInt(P);var N={dataType:"json",async:!Q,contentType:"application/json",type:O,url:J,headers:{"perc-tid":I,"perc-version":M},success:function(V,U){var T={data:V,textstatus:U};R(S.STATUS_SUCCESS,T)},error:function(W,U,V){if(W.status==204||W.status==1223){var T={data:{},textstatus:W.statusText};R(S.STATUS_SUCCESS,T);return}else{if(W.status>0){var T={request:W,textstatus:U,error:V};R(S.STATUS_ERROR,T)}else{if(h.isFunction(L)){L(S.STATUS_ABORT)}}}}};if(K){h.extend(N,{data:JSON.stringify(K)})}if(H){h.extend(N,{timeout:H})}return h.ajax(N)}function C(I,O,P,S,J,R,Q,M,K){var T=this;var H=h.isFunction(h.getCm1License)?h.getCm1License():"";var L=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var N={dataType:Q,async:!P,contentType:R,type:O,url:(M)?I:escape(I),headers:{"perc-tid":H,"perc-version":L},success:function(W,V){var U={data:W,textstatus:V};S(T.STATUS_SUCCESS,U)},error:function(X,V,W){if(X.status==204||X.status==1223){var U={data:{},textstatus:X.statusText};S(T.STATUS_SUCCESS,U);return}else{if(X.status>0){var U={request:X,textstatus:V,error:W};S(T.STATUS_ERROR,U)}else{if(h.isFunction(K)){K(T.STATUS_ABORT)}}}}};if(J){h.extend(N,{data:JSON.stringify(J)})}h.ajax(N)}function B(K,I,O,P,L){var Q=this;var J=h.isFunction(h.getCm1License)?h.getCm1License():"";var N=h.isFunction(h.getCm1Version)?h.getCm1Version():"";if(typeof(easyXDM)=="undefined"){Q.makeJsonRequest(I,O,false,P,L);return}if(P==null||typeof(P)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(O==Q.TYPE_GET||O==Q.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(K==null||typeof(K)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){K=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var M=new easyXDM.Rpc({remote:K+"/perc-common-ui/cors/"},{remote:{request:{}}});var H={url:I,headers:{"Content-Type":"application/json",Accept:"application/xml,text/plain","perc-tid":J,"perc-version":N},method:O,timeout:60000};if(L!=null&&L!=""&&typeof(L)!="undefined"){H.data=easyXDM.getJSONObject().stringify(L)}M.request(H,function(R){var S=R.headers["Content-Type"]=="application/json";var T={data:S?JSON.parse(R.data):R.data,status:R.status};P(Q.STATUS_SUCCESS,T)},function(R){var S={message:R.message,status:R.status};P(Q.STATUS_ERROR,S)})}function q(K,I,O,P,L){var Q=this;var J=h.isFunction(h.getCm1License)?h.getCm1License():"";var N=h.isFunction(h.getCm1Version)?h.getCm1Version():"";if(typeof(easyXDM)=="undefined"){Q.makeJsonRequest(I,O,false,P,L);return}if(P==null||typeof(P)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(O==Q.TYPE_GET||O==Q.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(K==null||typeof(K)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){K=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var M=new easyXDM.Rpc({remote:K+"/perc-common-ui/cors/"},{remote:{request:{}}});var H={url:I,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":J,"perc-version":N},method:O,timeout:60000};if(L!=null&&L!=""&&typeof(L)!="undefined"){H.data=easyXDM.getJSONObject().stringify(L)}M.request(H,function(R){var S=R.headers["Content-Type"]=="application/json";var T={data:S?JSON.parse(R.data):R.data,status:R.status};P(Q.STATUS_SUCCESS,T)},function(R){var S={message:R.message,status:R.status};P(Q.STATUS_ERROR,S)})}function D(H,N,O,P,K,J){var Q=this;var I=h.isFunction(h.getCm1License)?h.getCm1License():"";var L=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var M={dataType:"xml",async:!O,contentType:"text/xml",type:N,url:H,headers:{"perc-tid":I,"perc-version":L},success:function(T,S){var R={data:T,textstatus:S};P(Q.STATUS_SUCCESS,R)},error:function(U,S,T){if(U.status>0){var R={request:U,textstatus:S,error:T};P(Q.STATUS_ERROR,R)}else{if(h.isFunction(J)){J(Q.STATUS_ABORT)}}}};if(K){h.extend(M,{data:K})}h.ajax(M)}function n(H,N,O,K,J){var P=this;var I=h.isFunction(h.getCm1License)?h.getCm1License():"";var L=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var M={dataType:"text",async:!N,contentType:"text/xml",type:P.TYPE_DELETE,url:H,headers:{"perc-tid":I,"perc-version":L},success:function(S,R){var Q={data:S,textstatus:R};O(P.STATUS_SUCCESS,Q)},error:function(T,R,S){if(T.status>0){var Q={request:T,textstatus:R,error:S};O(P.STATUS_ERROR,Q)}else{if(h.isFunction(J)){J(P.STATUS_ABORT)}}}};if(K){h.extend(M,{data:K})}h.ajax(M)}function y(K){var O="";if(K==null||typeof(K)=="undefined"){return""}if(typeof(K.responseText)=="undefined"&&typeof(K.message)!="undefined"){K.responseText=K.message}if(K.responseText==null||K.responseText.length==0){return""}var J=null;try{J=JSON.parse(K.responseText);if(h.browser.msie&&!J&&typeof(K.responseText)=="string"&&K.responseText.length>0){return K.responseText}}catch(N){}if(J!=null&&J.Errors){var M="";if(typeof(J.defaultMessage)!="undefined"){M=J.defaultMessage}else{if(typeof(J.Errors.globalError.defaultMessage)!="undefined"){M=J.Errors.globalError.defaultMessage}else{if(typeof(J.Errors.localizedMessage)!="undefined"){M=J.Errors.localizedMessage}else{if(typeof(J.Errors.globalError.code)!="undefined"){var L=K.status==500?"Server Error: ":"";M=L+J.Errors.globalError.code}}}}O+=M}else{if(J!=null&&J.ValidationErrors!=undefined){var I=J.ValidationErrors;if(I.fieldErrors!=undefined){O+=w(I.fieldErrors)}else{if(I.globalErrors!=undefined){O+=w(I.globalErrors)}else{if(I.globalError!=undefined){O+=w(I.globalError)}}}}}var H;if(typeof(K.responseText)!="undefined"&&K.responseText.indexOf("<?xml")!=-1){H=h(K.responseText)}else{if(typeof(K)=="string"&&K.indexOf("<?xml")!=-1){H=h(K)}}if(typeof(H)!="undefined"&&H.is("ValidationErrors")){if(H.find("globalErrors").find("defaultMessage").text()!=""){O+=H.find("globalErrors").find("defaultMessage").text()}else{if(H.find("globalError").find("defaultMessage").text()!=""){O+=H.find("globalError").find("defaultMessage").text()!=""}else{if(H.next("defaultMessage")){O+=H.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(O==""){O=K.responseText}return O}function w(H){H=h.makeArray(H);var I="";for(var J=0;J<H.length;J++){var K=H[J];if(K.defaultMessage){I+=G(K.defaultMessage,K.arguments)}else{if(K.code){I+=K.code}}}return I}function G(K,H){H=h.makeArray(H);var J="";for(var I=0;I<H.length;I++){J=new RegExp("\\{"+I+"\\}","g");K=K.replace(J,H[I])}return K}function b(J){var I=JSON.parse(J.responseText);if(I.ValidationErrors==undefined){return""}var H=I.ValidationErrors;if(H.fieldErrors!=undefined){return H.fieldErrors.code}return""}function x(J){var I=JSON.parse(J.responseText);if(I.ValidationErrors==undefined){return""}var H=I.ValidationErrors;if(H.globalError!=undefined){return H.globalError.code}return""}function z(I){var J=[];if(h.isArray(I.entry)){J=I.entry}else{if(I.entry){J.push(I.entry)}}var H=[];h(J).each(function(){H[this.key]=this.value});return H}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:500,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.curCSS($E[0],"display",true)=="none"){hidden=true;visibility=$.curCSS($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.curCSS($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.curCSS($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.curCSS($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.curCSS($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.curCSS($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");input.attr("id",settings.fieldid);$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}textarea.attr("id",settings.fieldid);$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");select.attr("id",settings.fieldid);$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},fieldid:"jeditable_inline_field"}})(jQuery);(function(d){d.tools=d.tools||{};d.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var e;function b(B,z){var E=this,C=d(this),f=!z.vertical,h=B.children(),x=0,v;if(!e){e=E}d.each(z,function(F,G){if(d.isFunction(G)){C.bind(F,G)}});if(h.length>1){h=d(z.items,B)}function y(G){var F=d(G);return z.globalNav?F:B.parent().find(G)}B.data("finder",y);var n=y(z.prev),q=y(z.next),p=y(z.prevPage),A=y(z.nextPage);d.extend(E,{getIndex:function(){return x},getClickIndex:function(){var F=E.getItems();return F.index(F.filter("."+z.activeClass))},getConf:function(){return z},getSize:function(){return E.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/z.size)},getPageIndex:function(){return Math.ceil(x/z.size)},getNaviButtons:function(){return n.add(q).add(p).add(A)},getRoot:function(){return B},getItemWrap:function(){return h},updateItemWrap:function(){h=E.getRoot().children()},getItems:function(){return h.children(z.item)},getVisibleItems:function(){return E.getItems().slice(x,x+z.size)},seekTo:function(F,J,G){if(F<0){F=0}if(x===F){return E}if(d.isFunction(J)){G=J}if(F>E.getSize()-z.size){return z.loop?E.begin():this.end()}var H=E.getItems().eq(F);if(!H.length){return E}var I=d.Event("onBeforeSeek");C.trigger(I,[F]);if(I.isDefaultPrevented()){return E}if(J===undefined||d.isFunction(J)){J=z.speed}function K(){if(G){G.call(E,F)}C.trigger("onSeek",[F])}if(f){h.animate({left:-H.position().left},J,z.easing,K)}else{h.animate({top:-H.position().top},J,z.easing,K)}e=E;x=F;I=d.Event("onStart");C.trigger(I,[F]);if(I.isDefaultPrevented()){return E}n.add(p).toggleClass(z.disabledClass,F===0);q.add(A).toggleClass(z.disabledClass,F>=E.getSize()-z.size);return E},move:function(H,G,F){v=H>0;return this.seekTo(x+H,G,F)},next:function(G,F){return this.move(1,G,F)},prev:function(G,F){return this.move(-1,G,F)},movePage:function(J,I,H){v=J>0;var F=z.size*J;var G=x%z.size;if(G>0){F+=(J>0?-G:z.size-G)}return this.move(F,I,H)},prevPage:function(G,F){return this.movePage(-1,G,F)},nextPage:function(G,F){return this.movePage(1,G,F)},setPage:function(G,H,F){return this.seekTo(G*z.size,H,F)},begin:function(G,F){v=false;return this.seekTo(0,G,F)},end:function(G,F){v=true;var H=this.getSize()-z.size;return H>0?this.seekTo(H,G,F):E},reload:function(){C.trigger("onReload");return E},focus:function(){e=E;return E},click:function(H){var I=E.getItems().eq(H),F=z.activeClass,G=z.size;if(H<0||H>=E.getSize()){return E}if(G==1){if(z.loop){return E.next()}if(H===0||H==E.getSize()-1){v=(v===undefined)?true:!v}return v===false?E.prev():E.next()}if(G==2){if(H==x){H--}E.getItems().removeClass(F);I.addClass(F);return E.seekTo(H,time,fn)}if(!I.hasClass(F)){E.getItems().removeClass(F);I.addClass(F);var K=Math.floor(G/2);var J=H-K;if(J>E.getSize()-G){J=E.getSize()-G}if(J!==H){return E.seekTo(J)}}return E},bind:function(F,G){C.bind(F,G);return E},unbind:function(F){C.unbind(F);return E}});d.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(F,G){E[G]=function(H){return E.bind(G,H)}});n.addClass(z.disabledClass).click(function(){E.prev()});q.click(function(){E.next()});A.click(function(){E.nextPage()});if(E.getSize()<z.size){q.add(A).addClass(z.disabledClass)}p.addClass(z.disabledClass).click(function(){E.prevPage()});var w=z.hoverClass,D="keydown."+Math.random().toString().substring(10);E.onReload(function(){if(w){E.getItems().hover(function(){d(this).addClass(w)},function(){d(this).removeClass(w)})}if(z.clickable){E.getItems().each(function(F){d(this).unbind("click.scrollable").bind("click.scrollable",function(G){if(d(G.target).is("a")){return}return E.click(F)})})}if(z.keyboard){d(document).unbind(D).bind(D,function(F){if(F.altKey||F.ctrlKey){return}if(z.keyboard!="static"&&e!=E){return}var G=z.keyboardSteps;if(f&&(F.keyCode==37||F.keyCode==39)){E.move(F.keyCode==37?-G:G);return F.preventDefault()}if(!f&&(F.keyCode==38||F.keyCode==40)){E.move(F.keyCode==38?-G:G);return F.preventDefault()}return true})}else{d(document).unbind(D)}});E.reload()}d.fn.scrollable=function(f){var h=this.eq(typeof f=="number"?f:0).data("scrollable");if(h){return h}var n=d.extend({},d.tools.scrollable.conf);f=d.extend(n,f);f.keyboardSteps=f.keyboardSteps||f.size;this.each(function(){h=new b(d(this),f);d(this).data("scrollable",h)});return f.api?h:this}})(jQuery);(function(d){d.fn.wheel=function(h){return this[h?"bind":"trigger"]("wheel",h)};d.event.special.wheel={setup:function(){d.event.add(this,f,e,{})},teardown:function(){d.event.remove(this,f,e)}};var f=!d.browser.mozilla?"mousewheel":"DOMMouseScroll"+(d.browser.version<"1.9"?" mousemove":"");function e(h){switch(h.type){case"mousemove":return d.extend(h.data,{clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY});case"DOMMouseScroll":d.extend(h,h.data);h.delta=-h.detail/3;break;case"mousewheel":h.delta=h.wheelDelta/120;break}h.type="wheel";return d.event.handle.call(this,h,h.delta)}var b=d.tools.scrollable;b.plugins=b.plugins||{};b.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};d.fn.mousewheel=function(n){var p=d.extend({},b.plugins.mousewheel.conf),h;if(typeof n=="number"){n={speed:n}}n=d.extend(p,n);this.each(function(){var q=d(this).scrollable();if(q){h=q}q.getRoot().wheel(function(v,w){q.move(w<0?1:-1,n.speed||50);return false})});return n.api?h:this}})(jQuery);
/* jQuery Validation Plugin - v1.10.0 - 9/7/2012
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2012 Jörn Zaefferer; Licensed MIT, GPL */
(function(b){b.extend(b.fn,{validate:function(d){if(!this.length){d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var e=b.data(this[0],"validator");return e?e:(this.attr("novalidate","novalidate"),e=new b.validator(d,this[0]),b.data(this[0],"validator",e),e.settings.onsubmit&&(this.validateDelegate(":submit","click",function(f){e.settings.submitHandler&&(e.submitButton=f.target),b(f.target).hasClass("cancel")&&(e.cancelSubmit=!0)}),this.submit(function(f){function h(){var n;return e.settings.submitHandler?(e.submitButton&&(n=b("<input type='hidden'/>").attr("name",e.submitButton.name).val(e.submitButton.value).appendTo(e.currentForm)),e.settings.submitHandler.call(e,e.currentForm,f),e.submitButton&&n.remove(),!1):!0}return e.settings.debug&&f.preventDefault(),e.cancelSubmit?(e.cancelSubmit=!1,h()):e.form()?e.pendingRequest?(e.formSubmitted=!0,!1):h():(e.focusInvalid(),!1)})),e)},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}var d=!0,e=b(this[0].form).validate();return this.each(function(){d&=e.element(this)}),d},removeAttrs:function(e){var h={},f=this;return b.each(e.split(/\s/),function(n,d){h[d]=f.attr(d),f.removeAttr(d)}),h},rules:function(A,z){var y=this[0];if(A){var x=b.data(y.form,"validator").settings,w=x.rules,v=b.validator.staticRules(y);switch(A){case"add":b.extend(v,b.validator.normalizeRule(z)),w[y.name]=v,z.messages&&(x.messages[y.name]=b.extend(x.messages[y.name],z.messages));break;case"remove":if(!z){return delete w[y.name],v}var q={};return b.each(z.split(/\s/),function(e,d){q[d]=v[d],delete v[d]}),q}}var p=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(y),b.validator.classRules(y),b.validator.attributeRules(y),b.validator.staticRules(y)),y);if(p.required){var n=p.required;delete p.required,p=b.extend({required:n},p)}return p}}),b.extend(b.expr[":"],{blank:function(d){return !b.trim(""+d.value)},filled:function(d){return !!b.trim(""+d.value)},unchecked:function(d){return !d.checked}}),b.validator=function(d,e){this.settings=b.extend(!0,{},b.validator.defaults,d),this.currentForm=e,this.init()},b.validator.format=function(d,e){return arguments.length===1?function(){var f=b.makeArray(arguments);return f.unshift(d),b.validator.format.apply(this,f)}:(arguments.length>2&&e.constructor!==Array&&(e=b.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),b.each(e,function(f,h){d=d.replace(new RegExp("\\{"+f+"\\}","g"),h)}),d)},b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,d){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,d){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,d){if(d.which===9&&this.elementValue(e)===""){return}(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,d){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).addClass(h).removeClass(f):b(e).addClass(h).removeClass(f)},unhighlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).removeClass(h).addClass(f):b(e).removeClass(h).addClass(f)}},setDefaults:function(d){b.extend(b.validator.defaults,d)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function f(n){var q=b.data(this[0].form,"validator"),p="on"+n.type.replace(/^validate/,"");q.settings[p]&&q.settings[p].call(q,this[0],n)}this.labelContainer=b(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm),this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};b.each(this.settings.groups,function(p,n){b.each(n.split(/\s/),function(q,v){e[v]=p})});var h=this.settings.rules;b.each(h,function(n,p){h[n]=b.validator.normalizeRule(p)}),b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f),this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),b.extend(this.submitted,this.errorMap),this.invalid=b.extend({},this.errorMap),this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,d=this.currentElements=this.elements();d[e];e++){this.check(d[e])}return this.valid()},element:function(d){d=this.validationTargetFor(this.clean(d)),this.lastElement=d,this.prepareElement(d),this.currentElements=b(d);var e=this.check(d)!==!1;return e?delete this.invalid[d.name]:this.invalid[d.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(d){if(d){b.extend(this.errorMap,d),this.errorList=[];for(var e in d){this.errorList.push({message:d[e],element:this.findByName(e)[0]})}this.successList=b.grep(this.successList,function(f){return !(f.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var d=0;for(var f in e){d++}return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(d){}}},findLastActive:function(){var d=this.lastActive;return d&&b.grep(this.errorList,function(e){return e.element.name===d.name}).length===1&&d},elements:function(){var d=this,e={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in e||!d.objectLength(b(this).rules())?!1:(e[this.name]=!0,!0)})},clean:function(d){return b(d)[0]},errors:function(){var d=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+d,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=b([]),this.toHide=b([]),this.currentElements=b([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(d){this.reset(),this.toHide=this.errorsFor(d)},elementValue:function(e){var h=b(e).attr("type"),f=b(e).val();return h==="radio"||h==="checkbox"?b('input[name="'+b(e).attr("name")+'"]:checked').val():typeof f=="string"?f.replace(/\r/g,""):f},check:function(n){n=this.validationTargetFor(this.clean(n));var z=b(n).rules(),y=!1,x=this.elementValue(n),w;for(var v in z){var q={method:v,parameters:z[v]};try{w=b.validator.methods[v].call(this,x,n,q.parameters);if(w==="dependency-mismatch"){y=!0;continue}y=!1;if(w==="pending"){this.toHide=this.toHide.not(this.errorsFor(n));return}if(!w){return this.formatAndAdd(n,q),!1}}catch(p){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+n.id+", check the '"+q.method+"' method",p),p}}if(y){return}return this.objectLength(z)&&this.successList.push(n),!0},customMetaMessage:function(e,h){if(!b.metadata){return}var f=this.settings.meta?b(e).metadata()[this.settings.meta]:b(e).metadata();return f&&f.messages&&f.messages[h]},customDataMessage:function(d,e){return b(d).data("msg-"+e.toLowerCase())||d.attributes&&b(d).attr("data-msg-"+e.toLowerCase())},customMessage:function(e,d){var f=this.settings.messages[e];return f&&(f.constructor===String?f:f[d])},findDefined:function(){for(var d=0;d<arguments.length;d++){if(arguments[d]!==undefined){return arguments[d]}}return undefined},defaultMessage:function(d,e){return this.findDefined(this.customMessage(d.name,e),this.customDataMessage(d,e),this.customMetaMessage(d,e),!this.settings.ignoreTitle&&d.title||undefined,b.validator.messages[e],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(f,p){var n=this.defaultMessage(f,p.method),h=/\$?\{(\d+)\}/g;typeof n=="function"?n=n.call(this,p.parameters,f):h.test(n)&&(n=b.validator.format(n.replace(h,"{$1}"),p.parameters)),this.errorList.push({message:n,element:f}),this.errorMap[f.name]=n,this.submitted[f.name]=n},addWrapper:function(d){return this.settings.wrapper&&(d=d.add(d.parent(this.settings.wrapper))),d},defaultShowErrors:function(){var e,d;for(e=0;this.errorList[e];e++){var f=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,f.element,this.settings.errorClass,this.settings.validClass),this.showLabel(f.element,f.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success){for(e=0;this.successList[e];e++){this.showLabel(this.successList[e])}}if(this.settings.unhighlight){for(e=0,d=this.validElements();d[e];e++){this.settings.unhighlight.call(this,d[e],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(e,h){var f=this.errorsFor(e);f.length?(f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.attr("generated")&&f.html(h)):(f=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(h||""),this.settings.wrapper&&(f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,b(e)):f.insertAfter(e))),!h&&this.settings.success&&(f.text(""),typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f,e)),this.toShow=this.toShow.add(f)},errorsFor:function(d){var e=this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")===e})},idOrName:function(d){return this.groups[d.name]||(this.checkable(d)?d.name:d.id||d.name)},validationTargetFor:function(d){return this.checkable(d)&&(d=this.findByName(d.name).not(this.settings.ignore)[0]),d},checkable:function(d){return/radio|checkbox/i.test(d.type)},findByName:function(d){return b(this.currentForm).find('[name="'+d+'"]')},getLength:function(d,e){switch(e.nodeName.toLowerCase()){case"select":return b("option:selected",e).length;case"input":if(this.checkable(e)){return this.findByName(e.name).filter(":checked").length}}return d.length},depend:function(e,d){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,d):!0},dependTypes:{"boolean":function(e,d){return e},string:function(d,e){return !!b(d,e.form).length},"function":function(e,d){return e(d)}},optional:function(d){var e=this.elementValue(d);return !b.validator.methods.required.call(this,e,d)&&"dependency-mismatch"},startRequest:function(d){this.pending[d.name]||(this.pendingRequest++,this.pending[d.name]=!0)},stopRequest:function(d,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[d.name],e&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!e&&this.pendingRequest===0&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(d){return b.data(d,"previousValue")||b.data(d,"previousValue",{old:null,valid:!0,message:this.defaultMessage(d,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(d,e){d.constructor===String?this.classRuleSettings[d]=e:b.extend(this.classRuleSettings,d)},classRules:function(e){var h={},f=b(e).attr("class");return f&&b.each(f.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(h,b.validator.classRuleSettings[this])}),h},attributeRules:function(h){var v={},q=b(h);for(var p in b.validator.methods){var n;p==="required"?(n=q.get(0).getAttribute(p),n===""&&(n=!0),n=!!n):n=q.attr(p),n?v[p]=n:q[0].getAttribute("type")===p&&(v[p]=!0)}return v.maxlength&&/-1|2147483647|524288/.test(v.maxlength)&&delete v.maxlength,v},metadataRules:function(d){if(!b.metadata){return{}}var e=b.data(d.form,"validator").settings.meta;return e?b(d).metadata()[e]:b(d).metadata()},staticRules:function(e){var h={},f=b.data(e.form,"validator");return f.settings.rules&&(h=b.validator.normalizeRule(f.settings.rules[e.name])||{}),h},normalizeRules:function(d,e){return b.each(d,function(p,n){if(n===!1){delete d[p];return}if(n.param||n.depends){var h=!0;switch(typeof n.depends){case"string":h=!!b(n.depends,e.form).length;break;case"function":h=n.depends.call(e,e)}h?d[p]=n.param!==undefined?n.param:!0:delete d[p]}}),b.each(d,function(h,f){d[h]=b.isFunction(f)?f(e):f}),b.each(["minlength","maxlength","min","max"],function(){d[this]&&(d[this]=Number(d[this]))}),b.each(["rangelength","range"],function(){d[this]&&(d[this]=[Number(d[this][0]),Number(d[this][1])])}),b.validator.autoCreateRanges&&(d.min&&d.max&&(d.range=[d.min,d.max],delete d.min,delete d.max),d.minlength&&d.maxlength&&(d.rangelength=[d.minlength,d.maxlength],delete d.minlength,delete d.maxlength)),d.messages&&delete d.messages,d},normalizeRule:function(d){if(typeof d=="string"){var e={};b.each(d.split(/\s/),function(){e[this]=!0}),d=e}return d},addMethod:function(e,h,f){b.validator.methods[e]=h,b.validator.messages[e]=f!==undefined?f:b.validator.messages[e],h.length<3&&b.validator.addClassRules(e,b.validator.normalizeRule(e))},methods:{required:function(f,p,n){if(!this.depend(n,p)){return"dependency-mismatch"}if(p.nodeName.toLowerCase()==="select"){var h=b(p).val();return h&&h.length>0}return this.checkable(p)?this.getLength(f,p)>0:b.trim(f).length>0},remote:function(h,w,v){if(this.optional(w)){return"dependency-mismatch"}var q=this.previousValue(w);this.settings.messages[w.name]||(this.settings.messages[w.name]={}),q.originalMessage=this.settings.messages[w.name].remote,this.settings.messages[w.name].remote=q.message,v=typeof v=="string"&&{url:v}||v;if(this.pending[w.name]){return"pending"}if(q.old===h){return q.valid}q.old=h;var p=this;this.startRequest(w);var n={};return n[w.name]=h,b.ajax(b.extend(!0,{url:v,mode:"abort",port:"validate"+w.name,dataType:"json",data:n,success:function(z){p.settings.messages[w.name].remote=q.originalMessage;var y=z===!0||z==="true";if(y){var x=p.formSubmitted;p.prepareElement(w),p.formSubmitted=x,p.successList.push(w),delete p.invalid[w.name],p.showErrors()}else{var f={},e=z||p.defaultMessage(w,"remote");f[w.name]=q.message=b.isFunction(e)?e(h):e,p.invalid[w.name]=!0,p.showErrors(f)}q.valid=y,p.stopRequest(w,y)}},v)),"pending"},minlength:function(f,p,n){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),p);return this.optional(p)||h>=n},maxlength:function(f,p,n){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),p);return this.optional(p)||h<=n},rangelength:function(f,p,n){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),p);return this.optional(p)||h>=n[0]&&h<=n[1]},min:function(e,d,f){return this.optional(d)||e>=f},max:function(e,d,f){return this.optional(d)||e<=f},range:function(e,d,f){return this.optional(d)||e>=f[0]&&e<=f[1]},email:function(e,d){return this.optional(d)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,d){return this.optional(d)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,d){return this.optional(d)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,d){return this.optional(d)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,d){return this.optional(d)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,d){return this.optional(d)||/^\d+$/.test(e)},creditcard:function(n,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(n)){return !1}var x=0,w=0,v=!1;n=n.replace(/\D/g,"");for(var q=n.length-1;q>=0;q--){var p=n.charAt(q);w=parseInt(p,10),v&&(w*=2)>9&&(w-=9),x+=w,v=!v}return x%10===0},equalTo:function(f,p,n){var h=b(n);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(p).valid()}),f===h.val()}}}),b.format=b.validator.format})(jQuery),function(e){var d={};if(e.ajaxPrefilter){e.ajaxPrefilter(function(b,p,n){var h=b.port;b.mode==="abort"&&(d[h]&&d[h].abort(),d[h]=n)})}else{var f=e.ajax;e.ajax=function(n){var h=("mode" in n?n:e.ajaxSettings).mode,b=("port" in n?n:e.ajaxSettings).port;return h==="abort"?(d[b]&&d[b].abort(),d[b]=f.apply(this,arguments)):f.apply(this,arguments)}}}(jQuery),function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(e,h){function f(d){return d=b.event.fix(d),d.type=h,b.event.handle.call(this,d)}b.event.special[h]={setup:function(){this.addEventListener(e,f,!0)},teardown:function(){this.removeEventListener(e,f,!0)},handler:function(n){var p=arguments;return p[0]=b.event.fix(n),p[0].type=h,b.event.handle.apply(this,p)}}}),b.extend(b.fn,{validateDelegate:function(e,h,f){return this.bind(h,function(n){var d=b(n.target);if(d.is(e)){return f.apply(d,arguments)}})}})}(jQuery);(function(h){var d={},x,z,B,w=h.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),b=false;h.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){h.tooltip.blocked=!h.tooltip.blocked}};h.fn.extend({tooltip:function(C){C=h.extend({},h.tooltip.defaults,C);q(C);return this.each(function(){h.data(this,"tooltip",C);this.tOpacity=d.parent.css("opacity");this.tooltipText=this.title;h(this).removeAttr("title");this.alt=""}).mouseover(y).mouseout(n).click(n)},fixPNG:w?function(){return this.each(function(){var C=h(this).css("backgroundImage");if(C.match(/^url\(["']?(.*\.png)["']?\)$/i)){C=RegExp.$1;h(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+C+"')"}).each(function(){var D=h(this).css("position");if(D!="absolute"&&D!="relative"){h(this).css("position","relative")}})}})}:function(){return this},unfixPNG:w?function(){return this.each(function(){h(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){h(this)[h(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function q(C){if(d.parent){return}d.parent=h('<div id="'+C.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(h.fn.bgiframe){d.parent.bgiframe()}d.title=h("h3",d.parent);d.body=h("div.body",d.parent);d.url=h("div.url",d.parent)}function e(C){return h.data(C,"tooltip")}function p(C){if(e(this).delay){B=setTimeout(A,e(this).delay)}else{A()}b=!!e(this).track;h(document.body).bind("mousemove",f);f(C)}function y(){if(h.tooltip.blocked||this==x||(!this.tooltipText&&!e(this).bodyHandler)){return}x=this;z=this.tooltipText;if(e(this).bodyHandler){d.title.hide();var F=e(this).bodyHandler.call(this);if(F.nodeType||F.jquery){d.body.empty().append(F)}else{d.body.html(F)}d.body.show()}else{if(e(this).showBody){var E=z.split(e(this).showBody);d.title.html(E.shift()).show();d.body.empty();for(var D=0,C;(C=E[D]);D++){if(D>0){d.body.append("<br/>")}d.body.append(C)}d.body.hideWhenEmpty()}else{d.title.html(z).show();d.body.hide()}}if(e(this).showURL&&h(this).url()){d.url.html(h(this).url().replace("http://","")).show()}else{d.url.hide()}d.parent.addClass(e(this).extraClass);if(e(this).fixPNG){d.parent.fixPNG()}p.apply(this,arguments)}function A(){B=null;if((!w||!h.fn.bgiframe)&&e(x).fade){if(d.parent.is(":animated")){d.parent.stop().show().fadeTo(e(x).fade,x.tOpacity)}else{d.parent.is(":visible")?d.parent.fadeTo(e(x).fade,x.tOpacity):d.parent.fadeIn(e(x).fade)}}else{d.parent.show()}f()}function f(F){if(h.tooltip.blocked){return}if(F&&F.target.tagName=="OPTION"){return}if(!b&&d.parent.is(":visible")){h(document.body).unbind("mousemove",f)}if(x==null){h(document.body).unbind("mousemove",f);return}d.parent.removeClass("viewport-right").removeClass("viewport-bottom");var H=d.parent[0].offsetLeft;var G=d.parent[0].offsetTop;if(F){H=F.pageX+e(x).left;G=F.pageY+e(x).top;var D="auto";if(e(x).positionLeft){D=h(window).width()-H;H="auto"}d.parent.css({left:H,right:D,top:G})}var C=v(),E=d.parent[0];if(C.x+C.cx<E.offsetLeft+E.offsetWidth){H-=E.offsetWidth+20+e(x).left;d.parent.css({left:H+"px"}).addClass("viewport-right")}if(C.y+C.cy<E.offsetTop+E.offsetHeight){G-=E.offsetHeight+20+e(x).top;d.parent.css({top:G+"px"}).addClass("viewport-bottom")}}function v(){return{x:h(window).scrollLeft(),y:h(window).scrollTop(),cx:h(window).width(),cy:h(window).height()}}function n(E){if(h.tooltip.blocked){return}if(B){clearTimeout(B)}x=null;var D=e(this);function C(){d.parent.removeClass(D.extraClass).hide().css("opacity","")}if((!w||!h.fn.bgiframe)&&D.fade){if(d.parent.is(":animated")){d.parent.stop().fadeTo(D.fade,0,C)}else{d.parent.stop().fadeOut(D.fade,C)}}else{C()}if(e(this).fixPNG){d.parent.unfixPNG()}}})(jQuery);(function(d){var b=["3gp","3g2","7z","ace","air","swf","fxp","pdf","ppd","aac","aif","avi","dxf","dwf","bin","bmp","sh","btif","bz","bz2","csh","dae","cgm","wbs","dvi","dtd","dra","dts","dwg","xif","f4v","flv","gtar","gif","h261","h263","h264","ico","ief","jad","jar","class","jnlp","jpm","jpg","jpeg","jpgv","m3u","m4v","mdb","asf","exe","cab","clp","mdi","xls","xlsb","xltm","xlsm","chm","mny","xlsx","xltx","docx","dotx","ppt","mpp","pub","vsd","wm","wma","doc","wps","xps","mid","mpga","mpeg","mp4a","mp4","oda","ogx","oga","ogv","osf","odb","odi","odp","ots","odt","sxd","otf","psd","pic","pbm","png","ai","pbd","qt","rar","rm","rtf","rtx","svg","sdc","sda","sdd","smf","sdw","sgl","au","tiff","tar","ttf","vcd","wav","hlp","wsdl","zip"];d.validator.addMethod("noBinary",function(n,h){var f=d.trim(n).match(/[\w_.-]*?(?=[\?#])|[\w_.-]*$/i);if(typeof(f[0])!="undefined"){var e=f[0].split(".")}if(typeof(e[e.length-1])!="undefined"){var p=e[e.length-1]}return this.optional(h)||d.inArray(p.toLowerCase(),b)==-1});d.validator.addMethod("perc_remote",function(q,f,v){if(this.optional(f)){return"dependency-mismatch"}var n=this.previousValue(f);if(!this.settings.messages[f.name]){this.settings.messages[f.name]={}}v=typeof v=="string"&&{url:v}||v;var h=null;if("handler" in v){h=v.handler}if(n.old!==q){n.old=q;var e=this;this.startRequest(f);var p={};p[f.name]=q;d.ajax(d.extend(true,{url:v,mode:"abort",port:"validate"+f.name,dataType:"json",data:p,success:function(x){var y=h==null?x===true:h(e,f.name,q,x);if(y){var w=e.formSubmitted;e.prepareElement(f);e.formSubmitted=w;e.successList.push(f);e.showErrors()}else{var z={};if(typeof(x)!="string"){x=false}z[f.name]=n.message=x||e.defaultMessage(f,"perc_remote");e.showErrors(z)}n.valid=y;e.stopRequest(f,y)}},v));return"pending"}else{if(this.pending[f.name]){return"pending"}}return n.valid})})(jQuery);(function(b){b.PercDirtyController={dirtyState:false,dirtyObjectType:"object",utils:b.perc_utils,saveCallback:function(){},navigationEvent:function(){if(this.dirtyState){return"This "+this.dirtyObjectType+" contains unsaved changes.\nIf you continue, all changes will be lost.\nClick OK to proceed and discard changes,\nCancel to return to the "+this.dirtyObjectType+" you were editing."}},setDirty:function(e,d){this.dirtyState=e;this.dirtyObjectType=d;this.saveCallback=function(){}},setDirty:function(f,e,d){this.dirtyState=f;this.dirtyObjectType=e;this.saveCallback=d},isDirty:function(){return this.dirtyState},confirmIfDirty:function(h,d,e){if(this.dirtyState){var f=this.setConfirmDialogOptions(h,d,e);this.utils.confirm_dialog(f)}else{h()}},setConfirmDialogOptions:function(p,f,h){var d=this.dirtyObjectType;f=f||function(){};var e=this;var n={id:"perc-editor-page-dirty",title:"Unsaved Edits",success:function(){e.setDirty(false);p()},cancel:f,yes:"Continue anyway"};if(e.isSaveOptionAllowed()){n.dontSaveCallback=h&&h.dontSaveCallback?function(){e.setDirty(false);h.dontSaveCallback()}:n.success;n.type="SAVE_BEFORE_CONTINUE";n.question="You will lose your edits if you do not save. Save your edits before leaving this tab?";n.width="356px";n.save=e.saveCallback||function(){}}else{n.type="CANCEL_CONTINUE";n.question="This page contains unsaved edits. All edits will be lost. CONTINUE?";n.width="326px"}h=h||{};b.extend(n,h);return n},isSaveOptionAllowed:function(){var d=b.PercNavigationManager.getView();return(d==b.PercNavigationManager.VIEW_EDIT_TEMPLATE||d==b.PercNavigationManager.VIEW_EDITOR||d==b.PercNavigationManager.VIEW_WIDGET_BUILDER)}}})(jQuery);(function(O){O.PercNavigationManager={};var q="";var G={};var f="";var w="";var W="";var z="";var y={};var B="";var S="";var X=false;var D=false;var ad=false;var J="";var I=false;var F=false;var M=[];var n={};var ab=false;var aa=false;var E;var v="";var x=null;var V={URL_BASE:"/cm/app/",MODE_EDIT:"edit",MODE_READONLY:"readonly",VIEW_EDIT_ASSET:"editAsset",VIEW_HOME:"home",VIEW_DASHBOARD:"dash",VIEW_DESIGN:"design",VIEW_EDITOR:"editor",VIEW_SITE_ARCH:"arch",VIEW_PUBLISH:"publish",VIEW_USERS:"users",VIEW_WORKFLOW:"workflow",VIEW_WIDGET_BUILDER:"widgetbuilder",PATH_TYPE_PAGE:"page",PATH_TYPE_ASSET:"asset",PATH_TYPE_UNKNOWN:"unknown",VIEW_EDIT_TEMPLATE:"editTemplate"};function Z(){O.perc_sessionTimeout();p();L();if(v){alert(v)}}function T(af){var ae=af.type;switch(ae){case"site":U(af);break;case"percPage":R(af);break;case"Folder":K(af);break;case"FSFolder":K(af);break;default:if(af.category=="ASSET"){Y(af)}}}function U(af){if(!(X||D)){O.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this site."});return}var ae=V.VIEW_SITE_ARCH;if(f==V.VIEW_DESIGN){ae=V.VIEW_DESIGN}if(f==V.VIEW_PUBLISH){ae=V.VIEW_PUBLISH}Q(af.id,ae,w,null,null,af.path,null,null)}function R(ag,af){var ae=O.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(ae!=null){O.PercViewReadyManager.showRenderingProgressWarning();return}O.PercFolderHelper().getAccessLevelById(ag.id,false,function(ai,ah){if(ai==O.PercFolderHelper().PERMISSION_ERROR){O.perc_utils.alert_dialog({title:"Error",content:ah});return}else{if(af&&ah==O.PercFolderHelper().PERMISSION_READ){O.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the page '"+ag.name+"'."})}else{var ak=H(ag.path);var aj=af?V.MODE_EDIT:V.MODE_READONLY;Q(ak,V.VIEW_EDITOR,aj,ag.id,ag.name,ag.path,V.PATH_TYPE_PAGE,null)}}})}function K(af){if(af.type=="FSFolder"){var ae=af.path;var ag=ae.split("/");if(O.Percussion.getCurrentFinderView()!=O.Percussion.PERC_FINDER_VIEW_COLUMN){return}else{if(ag.length>5){O.perc_utils.makeFolderEditable(af)}else{O.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  It cannot be renamed."});return}}}}function Y(af,ae){O.PercFolderHelper().getAccessLevelById(af.id,false,function(ah,ag){if(ah==O.PercFolderHelper().PERMISSION_ERROR){O.perc_utils.alert_dialog({title:"Error",content:ag});return}else{if(ae&&ag==O.PercFolderHelper().PERMISSION_READ){O.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the asset '"+af.name+"'."})}else{var ai=ae?V.MODE_EDIT:V.MODE_READONLY;Q(null,V.VIEW_EDIT_ASSET,ai,af.id,af.name,af.path,V.PATH_TYPE_ASSET,null)}}})}function Q(al,ai,ah,ag,am,ak,aj,ae){var af=h(al,ai,ah,ag,am,ak,aj,ae);O.PercBlockUI(O.PercBlockUIMode.CURSORONLY);O.PercQueuePostAJAX(function(){C(af)})}function ac(ae){return O.param.querystring(V.URL_BASE,ae)}function h(al,ai,ah,ag,am,ak,aj,ae){var af={view:ai};if(!N(al)){O.extend(af,{site:al})}if(!N(ah)){O.extend(af,{mode:ah})}if(!N(ag)){O.extend(af,{id:ag})}if(!N(am)){O.extend(af,{name:am})}if(!N(ak)){O.extend(af,{path:ak})}if(I){O.extend(af,{debug:"true"})}if(F){O.extend(af,{at:"true"})}if(ae!=null&&typeof(ae)=="object"){O.extend(af,{memento:JSON.stringify(ae)})}if(!N(aj)){O.extend(af,{pathType:aj})}if(aa){O.extend(af,{disableJS:"true"})}return af}function P(){var ah=window.location;var ai=ah.protocol;ai+="//";ai+=ah.host;var af=0;for(var ae in y){++af}var ag=af==0?null:encodeURIComponent(y);ai+=ac(h(q,f,w,S,B,W,z,ag));return ai}function d(ae){var af=V.PATH_TYPE_UNKNOWN;if(ae){if(ae.indexOf(O.perc_paths.ASSETS_ROOT+"/")==0){af=V.PATH_TYPE_ASSET}if(ae.indexOf(O.perc_paths.SITES_ROOT+"/")==0){af=V.PATH_TYPE_PAGE}}return af}function H(af){var ae=O.perc_paths.SITES_ROOT+"/";if(af.indexOf(ae)===0){var ag=af.indexOf("/",ae.length);if(ag==-1){ag=af.length-1}return af.substring(ae.length,ag)}return""}function p(){var ae=O.deparam.querystring();q=ae.site;f=ae.view;w=ae.mode;W=ae.path;S=ae.id;B=ae.name;I=ae.debug;F=ae.at;z=ae.pathType;v=ae.warningMessage;aa=(ae.disableJS=="true"?true:false);if(typeof(ae.memento)!="undefined"){y=JSON.parse(decodeURIComponent(ae.memento))}}function L(){J=O.cookie("perc_userName");X=O.cookie("perc_isAdmin")=="true"?true:false;D=O.cookie("perc_isDesigner")=="true"?true:false;ad=O.cookie("perc_isAccessibilityUser")=="true"?true:false;O.perc_utils.info("UserInfo","userName: "+J+", isAdmin: "+X+", isDesigner: "+D+", isAccessibilityUser: "+ad)}function C(ah){var af=ac(ah);var ae=M.length;if(ae==0){window.location.href=af;return}var ai=b();n[ai]={url:af,listenerTotal:ae,continueFlag:true,listenersComplete:0};for(var ag=0;ag<ae;ag++){O.unblockUI();M[ag](af,ai,A,ah)}}function A(ag,ae){var af=n[ag];af.continueFlag&=ae;++af.listenersComplete;if(af.listenersComplete==af.listenerTotal){if(af.continueFlag){O.PercBlockUI(O.PercBlockUIMode.CURSORONLY);window.location.href=af.url}else{delete n[ag];O.unblockUI()}}}function b(){var ah=[];var ae="0123456789ABCDEF";for(var af=0;af<32;af++){ah[af]=ae.substr(Math.floor(Math.random()*16),1)}ah[12]="4";ah[16]=ae.substr((ah[16]&3)|8,1);var ag=ah.join("");return ag}function N(ae){return(ae==null||ae.length==0)}var e={getBookmark:P,getSiteName:function(){return q},getMemento:function(){return y},clearMemento:function(){y={}},getView:function(){return f},getMode:function(){return w},setMode:function(ae){w=ae},clearId:function(){S=""},getId:function(){return S},getName:function(){return B},setName:function(ae){B=ae},getPath:function(){return W},setPath:function(ae){W=ae},getUserName:function(){return J},isAutoTest:function(){return F},isDebug:function(){return I},isAdmin:function(){return X},isDesigner:function(){return D},isAccessibilityUser:function(){return ad},isJavascriptOff:function(){return aa},isReopenAllowed:function(){return ab},setReopenAllowed:function(ae){ab=ae},getPathType:function(){if(z){return z}return d(W)},goTo:function(af,ae){if(ae){Q(q,af,null,null,null,W,null,null)}else{Q(q,af,null,S,B,W,z,null)}},goToDashboard:function(){e.goTo(V.VIEW_DASHBOARD,true)},goToLocation:function(ai,al,ag,aj,ak,af,ah,ae){Q(al,ai,ag,aj,ak,af,ah,ae)},handleOpenAsset:Y,handleOpenPage:R,registerFinder:function(af){x=af;af.addOpenListener(T);af.addPathChangedListener(function(ai){if(af.finderOpenInProgress){return}var ag=ai.slice(1);var ah="/"+ag.join("/");W=ah});var ae=W;W=W?W:"/Sites";if(W){x.open(W.split("/"),function(){W=ae})}},addLocationChangeListener:function(ae){if(O.inArray(ae,M)==-1){M.push(ae)}},removeLocationChangeListener:function(ag){if(O.inArray(ag,openListeners)>-1){var ae=M.length;for(var af=0;af<ae;af++){if(M[af]===ag){M.splice(af,1);return}}}},openPathItem:function(ae){O.PercPathService.getPathItemForPath(ae,function(af,ag){if(af==O.PercServiceUtils.STATUS_SUCCESS){ag.PathItem.path=ae;T(ag.PathItem)}else{O.perc_utils.alert_dialog({title:"Error",content:ag});return}})},openPage:function(af,ae){O.PercPathService.getPathItemForPath(af,function(ag,ah){if(ag==O.PercServiceUtils.STATUS_SUCCESS){ah.PathItem.path=af;R(ah.PathItem,ae)}else{O.perc_utils.alert_dialog({title:"Error",content:ah});return}})},openAsset:function(ae){O.PercPathService.getPathItemById(ae.id,function(af,ag){if(af==O.PercServiceUtils.STATUS_SUCCESS){ag.PathItem.path=ae.path;Y(ag.PathItem,false)}else{O.perc_utils.alert_dialog({title:"Error",content:ag});return}})},openFolderDialog:function(ae){O.PercPathService.getPathItemForPath(ae,function(af,ag){if(af==O.PercServiceUtils.STATUS_SUCCESS){ag.PathItem.path=ae;K(ag.PathItem)}else{O.perc_utils.alert_dialog({title:"Error",content:ag});return}})},loadSiteProperties:function(ae,af){O.PercSiteService.getSiteProperties(ae,function(ah,ag){if(ah==O.PercServiceUtils.STATUS_SUCCESS){G=ag.SiteProperties;if(typeof(af)=="function"){af(ag.SiteProperties)}}})},getSiteProperties:function(){return G},setTemplateModel:function(ae){E=ae},getTemplateModel:function(ae){return E}};O.extend(O.PercNavigationManager,e);O.extend(O.PercNavigationManager,V);Z()})(jQuery);(function(b){b.PercFolderHelper=function(){var e={getAccessLevelByPath:d,getAccessLevelById:f};var n={PERMISSION_READ:"READ",PERMISSION_WRITE:"WRITE",PERMISSION_ADMIN:"ADMIN",PERMISSION_SUCCESS:"SUCCESS",PERMISSION_ERROR:"ERROR"};var h={};b.extend(h,e);b.extend(h,n);return h;function d(v,p,w){var q=b.perc_finder().getPathItemByPath(v);if(!p||!q){b.PercPathService.getPathItemForPath(v,function(y,x){if(y==b.PercServiceUtils.STATUS_ERROR){w(n.PERMISSION_ERROR,x);return}w(n.PERMISSION_SUCCESS,x.PathItem.accessLevel)})}else{w(n.PERMISSION_SUCCESS,q.accessLevel)}}function f(p,q,w){var v=b.perc_finder().getPathItemById(p);if(!q||!v){b.PercPathService.getPathItemById(p,function(y,x,z){if(y==b.PercServiceUtils.STATUS_ERROR){w(n.PERMISSION_ERROR,x,z);return}w(n.PERMISSION_SUCCESS,x.PathItem.accessLevel)})}else{w(n.PERMISSION_SUCCESS,v.accessLevel)}}}})(jQuery);(function(b){b.PercFolderPropertiesDialog=function(){var h;var e="";var f="";var n="";function d(w,C){b.PercPathService.getFolderProperties(w.id,E);var p=30;var B;var A;var x=undefined;function E(G,N){var L=this;if(G==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Folder not found: "+w.path});C("",false);return}var I=w.path.split("/");if(!e){e=w.folderPath;f=w.folderPaths;n=w.type}var J=(I!=undefined&&I.length==4&&I[1]=="Assets");var M=b.PercFolderHelper().PERMISSION_ADMIN;var H=N.data.FolderProperties;var K=[];if(H.permission){M=H.permission.accessLevel;if(H.permission.writePrincipals){K=H.permission.writePrincipals;K=b.isArray(K)?K:[K]}}var F=[];F[0]=M==b.PercFolderHelper().PERMISSION_READ?" selected='true' ":"";F[1]=M==b.PercFolderHelper().PERMISSION_WRITE?" selected='true' ":"";F[2]=M==b.PercFolderHelper().PERMISSION_ADMIN?" selected='true' ":"";A=b("<div><p class='perc-field-error' id='perc-save-error'></p><div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-folder-general-properties-container'><div><label for='perc-folder-name'class='perc-required-field'>"+I18N.message("perc.ui.folderPropsDialog.label@Name")+":</label> <br/> <input type='text' class='required' tabindex='"+p+"' id='perc-folder-name' name='folder_name' maxlength='50' value=\""+H.name+"\"/> <br/><label id='perc_folder_duplicate_error' style='display: none;' class='perc_field_error'></label><br/></div></div></div><div class='fieldGroup'><div id='perc-user-permissions-container'><label for='perc-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/><select name='perc-folder-permission' id='perc-folder-permission'>     <option id='perc-folder-permission-option-read'  "+F[0]+" value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' "+F[1]+" value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option>     <option id='perc-folder-permission-option-admin' "+F[2]+" value='"+b.PercFolderHelper().PERMISSION_ADMIN+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Admin")+"</option></select><input type='hidden' id='perc-folder-id' value='"+H.id+"'></input><input type='hidden' id='perc-folder-oldname' value=\""+H.name+"\"></input><div id='perc-folder-permission-users'/></div></div><div class='fieldGroup' id='perc-asset-folder-security' style='display:none;'><div id='perc-asset-folder-sites-container'><label>Assets in this folder are available to:<br/></label></div></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.folderPropsDialog.title@Folder Properties"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var O=new Array();if(L.listEdit.isEnabled()){var P=L.listEdit.getListItems();for(u=0;u<P.length;u++){O[u]={name:P[u],type:"USER"}}}y(O)},id:"perc-folder-props-save"},Cancel:{click:function(){D()},id:"perc-folder-props-cancel"}},id:"perc-folder-props-dialog",width:"500px"});var v=[];for(u=0;u<K.length;u++){v[u]=K[u].name}b.PercUserService.getUsers(function(O,P){if(O==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",P);return}L.listEdit=b.PercListEditorWidget({container:"perc-folder-permission-users",items:v,results:b.perc_utils.convertCXFArray(P.UserList.users),toggler:b("#perc-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")});q();if(J){b.PercServiceUtils.makeJsonRequest(b.perc_paths.SITES_ALL+"/",b.PercServiceUtils.TYPE_GET,false,function(R,Z){if(R==b.PercServiceUtils.STATUS_SUCCESS){b("#perc-asset-folder-security").show();var X=A.find("#perc-asset-folder-sites-container");var U=b("<select name='allowed-sites' id='allowed-sites' multiple='multiple'></select>");X.append(U);var T=[];if(H.allowedSites!=undefined){if(typeof(H.allowedSites)=="number"){T.push(H.allowedSites.toString())}else{T=H.allowedSites.split(",")}}h=T.sort().join(",");var W=Z.data.SiteSummary;for(var Y=0;Y<W.length;Y++){var Q=(b.inArray(W[Y].siteId.toString(),T)>=0);var S=b("<option/>").attr("value",W[Y].siteId).attr("title",W[Y].name).text(W[Y].name);if(Q){S.attr("selected","selected")}U.append(S)}x=b("#allowed-sites").multiselect({height:175,minWidth:225,checkAllText:"Select all",uncheckAllText:"Deselect all",noneSelectedText:"All sites allowed",selectedText:function(ab,ac,aa){if(ab==0){return"All sites allowed"}else{return"Some sites allowed"}}});b("input[name=multiselect_allowed-sites]").unbind("click");b("input[name=multiselect_allowed-sites]").bind("click",function(aa){b("#allowed-sites").multiselect("update")});b("a.ui-multiselect-all").unbind("click.multiselect");b("a.ui-multiselect-all").bind("click.multiselect",function(aa){b("#allowed-sites").multiselect("checkAll")});b("a.ui-multiselect-none").unbind("click.multiselect");b("a.ui-multiselect-none").bind("click.multiselect",function(aa){b("#allowed-sites").multiselect("uncheckAll")})}else{var V=b.PercServiceUtils.extractDefaultErrorMessage(Z.request);b.perc_utils.alert_dialog({title:"Error",content:V})}})}else{b("#perc-asset-folder-security").hide()}})}function D(){A.remove()}function y(I){if(b.trim(b("#perc-folder-name").val()).length<1){b("#perc-folder-name").val("");b("#perc_folder_duplicate_error").text("This field is required.");b("#perc_folder_duplicate_error").show();return}var H=b.trim(b("#perc-folder-name").val());H=b.perc_textFilters.WINDOWS_FILE_NAME(H);var G={FolderProperties:{name:H,id:b("#perc-folder-id").val(),permission:{accessLevel:b("#perc-folder-permission").val(),writePrincipals:I}}};if(x!=undefined){var F=[];b.each(x.multiselect("getChecked"),function(J){F.push(b(this).val())});if(F.length>0){G.FolderProperties.allowedSites=F.sort().join(",")}else{G.FolderProperties.allowedSites=""}}if(h!=undefined&&G.FolderProperties.allowedSites!=h){var v={id:"perc-folder-properties-changed-allowed-sites-warning",title:"Warning",content:"Please note that content already queued for incremental publish will not be affected by this security change.",okCallBack:function(){b.PercPathService.saveFolderProperties(G,z)}};b.perc_utils.alert_dialog(v)}else{b.PercPathService.saveFolderProperties(G,z)}}function z(G,v){if(G==b.PercServiceUtils.STATUS_SUCCESS){var F=b.trim(b("#perc-folder-name").val());A.remove();if(e.match("^/Sites/")||e.match("^//Sites/")){b.PercRedirectHandler.createRedirect(e,f+"/"+F,"folder").fail(function(K){b.perc_utils.alert_dialog({title:"Redirect creation error",content:K,okCallBack:function(){C(F)}})}).done(function(){C(F)})}else{C(F)}}else{var J=b.PercServiceUtils.extractDefaultErrorMessage(v.request);var H=b.PercServiceUtils.extractFieldErrorCode(v.request);if(H=="`FolderProperties#name"){var I="Cannot rename folder '"+b("#perc-folder-oldname").val()+"' to '"+b.trim(b("#perc-folder-name").val())+"' because an object with the same name already exists.";b("#perc_folder_duplicate_error").text(I);b("#perc_folder_duplicate_error").show()}else{if(H=="saveFolderProperties#reservedName"){b("#perc_folder_duplicate_error").text(J);b("#perc_folder_duplicate_error").show()}else{b.perc_utils.alert_dialog({title:"Error",content:J})}}}}function q(){var F=b("#perc-folder-props-dialog");var v=[{groupName:"perc-folder-general-properties-container",groupLabel:"General"},{groupName:"perc-user-permissions-container",groupLabel:"Permissions"},{groupName:"perc-asset-folder-sites-container",groupLabel:"Security"}];b.each(v,function(H){var I=(H==0)?"perc-section-items-minimizer":"perc-section-items-maximizer";var G="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span class='perc-min-max "+I+"' ></span>"+this.groupLabel+"</div></div>";F.find("#"+this.groupName).before(G);H!=0&&F.find("#"+this.groupName).hide()});F.find(".perc-section-label").unbind().click(function(){var G=b(this);G.find(".perc-min-max").toggleClass("perc-section-items-minimizer").toggleClass("perc-section-items-maximizer");F.find("#"+G.attr("groupName")).toggle()})}b.perc_filterField(b("#perc-folder-name"),b.perc_textFilters.URL)}return{open:d}}})(jQuery);(function(e){var b=13;var d=5;e.PercFinderTreeConstants={ROOT_PATH_ALL:"All",ROOT_PATH_SITES:"Sites",ROOT_PATH_ASSETS:"Assets",FOLDERS_ONLY:"Folders",SECTIONS_ONLY:"Sections",MAX_RESULTS:200,FOLDER_ID:null,convertFolderPathToPath:function(f){var h=null;if(!f){return h}if(f.indexOf("//Sites")!=-1){h=f.replace("//Sites",e.perc_paths.SITES_ROOT)}else{if(f.indexOf("//Folders/$System$/Assets")!=-1){h=f.replace("//Folders/$System$/Assets",e.perc_paths.ASSETS_ROOT)}}return h}};e.widget("ui.PercFinderTree",{settings:{rootPath:e.PercFinderTreeConstants.ROOT_PATH_ALL,showFoldersOnly:false,filter:null,height:"200px",width:"290px",onClick:function(f){},onRenderComplete:function(f,h){},classNames:{},initialPath:null,getInitialPathItem:function(f){},onQueryActivate:function(){return true},onQuerySelect:function(){return true},clickFolderMode:3,acceptableTypes:"",acceptableCategories:""},_init:function(){var f=this;e.extend(this.settings,this.options);var h=this.settings.rootPath;if(!(h==e.PercFinderTreeConstants.ROOT_PATH_ALL||h==e.PercFinderTreeConstants.ROOT_PATH_SITES||h==e.PercFinderTreeConstants.ROOT_PATH_ASSETS)){this.settings.rootPath=e.PercFinderTreeConstants.ROOT_PATH_ALL}e(this.element).css("width",this.settings.width);e(this.element).css("height",this.settings.height);e(this.element).css("overflow","auto");e(this.element).append(e("<div id='perc-finder-tree'></div>"));this.intialPathExpanded=true;this.initialRenderCompleted=false;this.intialPathKey=null;if(this.settings.initialPath&&this.settings.initialPath!=null&&e.trim(this.settings.initialPath).length>0){this.intialPathExpanded=false;this.intialPathKey=this._generateKey(this.settings.initialPath)}e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_FOLDER+"/",e.PercServiceUtils.GET,false,function(p,n){if(p==e.PercServiceUtils.STATUS_ERROR){var q=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:q});dtnode.setLazyNodeStatus(DTNodeStatus_Error)}else{f._initTree(n.data)}},null)},_initTree:function(p){var h=this;var q=[];var f=h._normalizedPath(h.settings.initialPath);e.each(p.PathItem,function(){var v=h.settings.rootPath==e.PercFinderTreeConstants.ROOT_PATH_ALL||h.settings.rootPath==this.name;if(this.name=="Design"||this.name=="Search"){v=false}if(v){var x=h._makeDtNode(this);e.extend(x,{unselectable:true});var w=h._normalizedPath(this.path);if(f==w){e.extend(x,{activate:true});h.intialPathExpanded=true}q.push(x)}});var n=e(this.element).find("#perc-finder-tree").dynatree({selectMode:1,rootVisible:false,autoFocus:false,imagePath:" ",children:q,clickFolderMode:h.settings.clickFolderMode,onQuerySelect:h.settings.onQuerySelect,onQueryActivate:h.settings.onQueryActivate,classNames:h.settings.classNames,onRender:function(x){if(x.data.type!=="SHOW_MORE"){var v=e(x.span);var w=v.parents("ul").length-1;v.css("padding-left",w*b+d)}else{var v=e(x.span);var w=v.parents("ul").length-3;v.css("padding-left",w*b+d)}},onLazyRead:function(v){h._loadChildren(v)},onClick:function(v){if(v.data.type==="SHOW_MORE"&&!v.data.isShowing){v.data.isShowing=true;v.data.icon="/cm/css/dynatree/skin/loading.gif";v.render();h._loadMoreChildren(v);return}h._onClick(v);h.getFolderID(v)},onExpand:function(v,w){if(w.type==="SHOW_MORE"){return}h._onExpand(v,w)}});n.dynatree("getRoot").visit(function(v){v.expand(true)})},_loadChildren:function(q){var h=this,n,f=q.data,p;if(h.settings.showFoldersOnly){n=e.perc_paths.PATH_FOLDER+f.pathItem.path}else{n=e.perc_paths.PATH_PAGINATED_FOLDER+f.pathItem.path+"?startIndex=1&maxResults="+e.PercFinderTreeConstants.MAX_RESULTS;if(h.settings.acceptableTypes){n+="&type="+h.settings.acceptableTypes}if(h.settings.acceptableCategories){n+="&category="+h.settings.acceptableCategories}}e.PercServiceUtils.makeJsonRequest(n,e.PercServiceUtils.GET,false,function(w,v){if(w==e.PercServiceUtils.STATUS_ERROR){var x=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:x});q.setLazyNodeStatus(DTNodeStatus_Error)}else{h._addChildren(q,v.data)}},null)},_addChildren:function(v,q){var p=null,h=this;var f=h.settings.showFoldersOnly?q.PathItem:q.PagedItemList.childrenInPage;if(!f){v.setLazyNodeStatus(DTNodeStatus_Ok);return}if(!e.isArray(f)){f=[f]}e.each(f,function(){var y=h.settings.showFoldersOnly&&this.leaf;if(typeof this.category!="undefined"&&h.settings.filter!=null){y=y||(h.settings.filter==e.PercFinderTreeConstants.FOLDERS_ONLY&&this.category!="FOLDER"&&this.category!="SYSTEM");y=y||(h.settings.filter==e.PercFinderTreeConstants.SECTIONS_ONLY&&this.category!="SECTION_FOLDER")}if(!y){var A=h._makeDtNode(this);var x=v.addChild(A);if(!h.intialPathExpanded){var z=h._normalizedPath(this.path);var w=h._normalizedPath(h.settings.initialPath);if(w==z){x.activate();h.settings.getInitialPathItem(x.data.pathItem);h.intialPathExpanded=true}else{if(w.indexOf(z)!=-1){p=x}}}}});if(!h.settings.showFoldersOnly&&q.PagedItemList.startIndex+e.PercFinderTreeConstants.MAX_RESULTS-1<q.PagedItemList.childrenCount){var n=h._makeMoreResultsDtNode(q.PagedItemList.startIndex+e.PercFinderTreeConstants.MAX_RESULTS,v);v.addChild(n)}h._adjustScrollWidths();v.setLazyNodeStatus(DTNodeStatus_Ok);if(p){p.expand(true)}else{if(!h.initialRenderCompleted){h.settings.onRenderComplete(v.data.pathItem,v);h.initialRenderCompleted=true}}},_loadMoreChildren:function(p){var h=this,n,f=p.data;n=e.perc_paths.PATH_PAGINATED_FOLDER+f.parentNode.data.pathItem.path+"?startIndex="+f.startIndex+"&maxResults="+e.PercFinderTreeConstants.MAX_RESULTS;e.PercServiceUtils.makeJsonRequest(n,e.PercServiceUtils.GET,false,function(v,q){if(v==e.PercServiceUtils.STATUS_ERROR){var w=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:w});p.setLazyNodeStatus(DTNodeStatus_Error)}else{h._addChildren(f.parentNode,q.data);p.remove()}},null)},_onExpand:function(f,h){this._adjustScrollWidths()},_adjustScrollWidths:function(f){},_onClick:function(f){this.settings.onClick(f.data.pathItem)},getSelectedItems:function(){var h=[];var f=e("#perc-finder-tree").dynatree("getSelectedNodes");e.each(f,function(){h.push(this.data.pathItem)});return h},getFolderID:function(p){var h=p.data.pathItem.id;if(typeof h!="undefined"){var n=h.split("-");var f=n[2];e.PercFinderTreeConstants.FOLDER_ID=f}return f},getDynaTree:function(){return e("#perc-finder-tree").dynatree("getTree")},_makeDtNode:function(v){var f=this;var n=e.perc_utils.extract_path(v.path);var p=e.perc_utils.choose_icon(v.type,v.icon,n);var h=this._generateKey(v.path);var q={title:v.name,isFolder:!v.leaf,isLazy:true,icon:p,tooltip:v.name,pathItem:v,key:h};if(v.leaf){e.extend(q,{addClass:"perc-hide-node-expander"})}return q},_makeMoreResultsDtNode:function(q,f){var h=this;var n="-- Show More --";var p={title:n,isLazy:true,tooltip:n,addClass:"perc-hide-node-expander",startIndex:q,type:"SHOW_MORE",isShowing:false,parentNode:f};return p},_generateKey:function(f){if(!f){return null}if(f&&f.length>1&&f.substring(f.length-1)=="/"){f=f.slice(0,f.length-1)}return f.replace(/[^a-zA-Z0-9/]/g,"_").replace(/\//g,"-")},_normalizedPath:function(f){if(!f||f.length<1){return f}if(f.substring(f.length-1,f.length)!="/"){return f+"/"}return f}})})(jQuery);(function(d){d.PercPathSelectionDialog={open:b};function b(z){var p={okCallback:function(){},cancelCallback:function(){},dialogTitle:"Select path",rootPath:d.PercFinderTreeConstants.ROOT_PATH_SITES,emptySelectionMessage:"Please select a page.",initialPath:null,createNew:{},showFoldersOnly:false,selectedItemValidator:d.noop,acceptableTypes:"",acceptableCategories:""};var h=null;var n=d.extend(p,z);if(!n.initialPath){n.initialPath=null}var f=null;var q=null;var e=y(n);var v={};var w={click:function(){if(n.selectedItemValidator&&d.isFunction(n.selectedItemValidator)){var A=n.selectedItemValidator(f);if(A!=null){e.find("label[for='perc-path-location']").text(A).show();return}}q.remove();n.okCallback(f)},id:"perc-path-selection-dialog-save"};var x={click:function(){q.remove();n.cancelCallback()},id:"perc-path-selection-dialog-cancel"};v.Ok=w;v.Cancel=x;q=d(e).perc_dialog({resizable:false,title:n.dialogTitle,modal:true,closeOnEscape:true,percButtons:v,id:"perc-path-selection-dialog",width:400});function y(){var D=n.initialPath?n.initialPath:"";var B=d('<div class="perc-path-selector-container"><div class="perc-label" style="height:10px;"><span style="float:left;font-weight:bold">Select from path:</span><span class="perc-create-new-button" style="float:right;margin-right:55px;display:none"></span></div></div>');if(n.createNew&&n.createNew.label&&n.createNew.onclick){var A=function(E){q.remove();n.okCallback(E)};var C=function(){};B.find(".perc-create-new-button").show().click(function(){n.createNew.onclick(A,C)}).append('<a class="perc-font perc-font-button" href="#"><i class="'+n.createNew.iconclass+'"></i> '+n.createNew.label+"</a>")}h=d("<div class='perc-path-selection-tree' style='margin-top:20px;'>").PercFinderTree({rootPath:n.rootPath,initialPath:n.initialPath,showFoldersOnly:n.showFoldersOnly,acceptableTypes:n.acceptableTypes,acceptableCategories:n.acceptableCategories,height:"230px",width:"600px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},getInitialPathItem:function(E){f=E},onClick:function(E){f=E;d("#perc_selected_path").html(E.path);if(d.inArray(E.category,n.selectableTypes)!=-1){e.find("label[for='perc-select-blog-location-tree']").hide()}}});B.append(h);B.append('<div style="margin-top:10px;"><span style="color:gray; font-weight:bold">Selected item path:</span> <span id="perc_selected_path">'+D+"</span></div>");B.append('<label for="perc-path-location" class="perc_field_error" style="display: none;"></label>');return B}}})(jQuery);(function(f){f.PercCreateNewAssetDialog=function(q,p,w){f.PercCreateNewAssetDialogData={};f.PercCreateNewAssetDialogData.successCallback=p;f.PercCreateNewAssetDialogData.cancelCallback=w;f.PercAssetService.getAssetEditor(q,function(y,x){if(y==f.PercServiceUtils.STATUS_ERROR){f.perc_utils.alert_dialog({title:"Error creating new asset",content:x})}if(f.PercFinderTreeConstants.FOLDER_ID!=null){x.AssetEditor.legacyFolderId=f.PercFinderTreeConstants.FOLDER_ID}f.PercCreateNewAssetDialogData.assetEditor=x.AssetEditor;v()});function v(){var z=f.PercCreateNewAssetDialogData.assetEditor;var y=z.url+"&sys_folderid="+z.legacyFolderId+"&sys_workflowid="+z.workflowId;var x="<div id='create-new-asset-content-dlg'><iframe name='create-new-asset-content-frame' id='create-new-asset-content-frame'height='100%' FRAMEBORDER='0' width='100%' src='"+y+"'></iframe></div>";dialog=f(x).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:815,width:965,percButtons:{Save:{click:function(){d(p)},id:"perc-create-new-asset-save-button"},Cancel:{click:function(){dialog.remove();f.PercCreateNewAssetDialogData.cancelCallback()},id:"perc-create-new-asset-cancel-button"}},id:"perc-create-new-asset-dialog"})}};function d(p){f.PercBlockUI();var q=f.PercCreateNewAssetDialogData.assetEditor;n("#perc-content-edit-sys_workflowid").val(q.workflowId);var w=q.url;w=w.split("?")[0];var x=q.legacyFolderId;w=w+"?sys_folderid="+x+"&sys_asset_folderid="+x;n("#perc-content-form").attr("action",w);var v=true;f.each(f.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){v=false}});if(!v){f.unblockUI();return}f.PercContentPreSubmitHandlers.clearHandlers();f("#create-new-asset-content-frame").contents().find("#perc-content-form").submit();f("#create-new-asset-content-frame").unbind("load",b).load(b)}function e(v,q,p){return true}function b(){if(f("#create-new-asset-content-frame").contents().find("#perc-content-edit-errors").length>0){f.unblockUI();return}var p="-1-101-"+f("#create-new-asset-content-frame").contents().find("[name=sys_contentid]").val();f("#create-new-asset-content-frame").remove();f("#create-new-asset-content-dlg").remove();f.PercPathService.getPathItemById(p,function(v,q){f.unblockUI();if(v==f.PercServiceUtils.STATUS_ERROR){f.perc_utils.alert_dialog({title:"Error Selecting Asset",content:"The asset has been saved, but failed to select it."});f.PercCreateNewAssetDialogData.cancelCallback();return}f.PercCreateNewAssetDialogData.successCallback(q.PathItem)})}function n(p){var q=h();return f(p,q)}function h(){var p=null;for(i=0;i<frames.length;i++){if(frames[i].name=="create-new-asset-content-frame"){p=frames[i].document;break}}return p}})(jQuery);(function(b){b.fn.extend({autocomplete:function(d,e){var f=typeof d=="string";e=b.extend({},b.Autocompleter.defaults,{url:f?d:null,data:f?null:d,delay:f?b.Autocompleter.defaults.delay:10,max:e&&!e.scroll?10:150},e);e.highlight=e.highlight||function(h){return h};e.formatMatch=e.formatMatch||e.formatItem;return this.each(function(){new b.Autocompleter(this,e)})},result:function(d){return this.bind("result",d)},search:function(d){return this.trigger("search",[d])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(d){return this.trigger("setOptions",[d])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(y,p){var e={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var d=b(y).attr("autocomplete","off").addClass(p.inputClass);var w;var C="";var z=b.Autocompleter.Cache(p);var h=0;var H;var K={mouseDownOnSelect:false};var E=b.Autocompleter.Select(p,y,f,K);var J;b.browser.opera&&b(y.form).bind("submit.autocomplete",function(){if(J){J=false;return false}});d.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(L){H=L.keyCode;switch(L.keyCode){case e.UP:L.preventDefault();if(E.visible()){E.prev()}else{G(0,true)}break;case e.DOWN:L.preventDefault();if(E.visible()){E.next()}else{G(0,true)}break;case e.PAGEUP:L.preventDefault();if(E.visible()){E.pageUp()}else{G(0,true)}break;case e.PAGEDOWN:L.preventDefault();if(E.visible()){E.pageDown()}else{G(0,true)}break;case p.multiple&&b.trim(p.multipleSeparator)==","&&e.COMMA:case e.TAB:case e.RETURN:if(f()){L.preventDefault();J=true;return false}break;case e.ESC:E.hide();break;default:clearTimeout(w);w=setTimeout(G,p.delay);break}}).focus(function(){h++}).blur(function(){h=0;if(!K.mouseDownOnSelect){F()}}).click(function(){if(h++>1&&!E.visible()){G(0,true)}}).bind("search",function(){var L=(arguments.length>1)?arguments[1]:null;function M(Q,P){var N;if(P&&P.length){for(var O=0;O<P.length;O++){if(P[O].result.toLowerCase()==Q.toLowerCase()){N=P[O];break}}}if(typeof L=="function"){L(N)}else{d.trigger("result",N&&[N.data,N.value])}}b.each(q(d.val()),function(N,O){n(O,M,M)})}).bind("flushCache",function(){z.flush()}).bind("setOptions",function(){b.extend(p,arguments[1]);if("data" in arguments[1]){z.populate()}}).bind("unautocomplete",function(){E.unbind();d.unbind();b(y.form).unbind(".autocomplete")});function f(){var M=E.selected();if(!M){return false}var L=M.result;C=L;if(p.multiple){var N=q(d.val());if(N.length>1){L=N.slice(0,N.length-1).join(p.multipleSeparator)+p.multipleSeparator+L}L+=p.multipleSeparator}d.val(L);I();d.trigger("result",[M.data,M.value]);return true}function G(N,M){if(H==e.DEL){E.hide();return}var L=d.val();if(!M&&L==C){return}C=L;L=v(L);if(L.length>=p.minChars){d.addClass(p.loadingClass);if(!p.matchCase){L=L.toLowerCase()}n(L,x,I)}else{A();E.hide()}}function q(M){if(!M){return[""]}var N=M.split(p.multipleSeparator);var L=[];b.each(N,function(O,P){if(b.trim(P)){L[O]=b.trim(P)}});return L}function v(L){if(!p.multiple){return L}var M=q(L);return M[M.length-1]}function D(L,M){if(p.autoFill&&(v(d.val()).toLowerCase()==L.toLowerCase())&&H!=e.BACKSPACE){d.val(d.val()+M.substring(v(C).length));b.Autocompleter.Selection(y,C.length,C.length+M.length)}}function F(){clearTimeout(w);w=setTimeout(I,200)}function I(){var L=E.visible();E.hide();clearTimeout(w);A();if(p.mustMatch){d.search(function(M){if(!M){if(p.multiple){var N=q(d.val()).slice(0,-1);d.val(N.join(p.multipleSeparator)+(N.length?p.multipleSeparator:""))}else{d.val("")}}})}if(L){b.Autocompleter.Selection(y,y.value.length,y.value.length)}}function x(M,L){if(L&&L.length&&h){A();E.display(L,M);D(M,L[0].value);E.show()}else{I()}}function n(M,O,L){if(!p.matchCase){M=M.toLowerCase()}var N=z.load(M);if(N&&N.length){O(M,N)}else{if((typeof p.url=="string")&&(p.url.length>0)){var P={timestamp:+new Date()};b.each(p.extraParams,function(Q,R){P[Q]=typeof R=="function"?R():R});b.ajax({mode:"abort",port:"autocomplete"+y.name,dataType:p.dataType,url:p.url,data:b.extend({q:v(M),limit:p.max},P),success:function(R){var Q=p.parse&&p.parse(R)||B(R);z.add(M,Q);O(M,Q)}})}else{E.emptyList();L(M)}}}function B(O){var L=[];var N=O.split("\n");for(var M=0;M<N.length;M++){var P=b.trim(N[M]);if(P){P=P.split("|");L[L.length]={data:P,value:P[0],result:p.formatResult&&p.formatResult(P,P[0])||P[0]}}}return L}function A(){d.removeClass(p.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(d){return d[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(e,d){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};b.Autocompleter.Cache=function(e){var n={};var f=0;function q(x,w){if(!e.matchCase){x=x.toLowerCase()}var v=x.indexOf(w);if(e.matchContains=="word"){v=x.toLowerCase().search("\\b"+w.toLowerCase())}if(v==-1){return false}return v==0||e.matchContains}function p(w,v){if(f>e.cacheLength){d()}if(!n[w]){f++}n[w]=v}function h(){if(!e.data){return false}var w={},v=0;if(!e.url){e.cacheLength=1}w[""]=[];for(var y=0,x=e.data.length;y<x;y++){var B=e.data[y];B=(typeof B=="string")?[B]:B;var A=e.formatMatch(B,y+1,e.data.length);if(A===false){continue}var z=A.charAt(0).toLowerCase();if(!w[z]){w[z]=[]}var C={value:A,data:B,result:e.formatResult&&e.formatResult(B)||A};w[z].push(C);if(v++<e.max){w[""].push(C)}}b.each(w,function(D,E){e.cacheLength++;p(D,E)})}setTimeout(h,25);function d(){n={};f=0}return{flush:d,add:p,populate:h,load:function(y){if(!e.cacheLength||!f){return null}if(!e.url&&e.matchContains){var x=[];for(var v in n){if(v.length>0){var z=n[v];b.each(z,function(B,A){if(q(A.value,y)){x.push(A)}})}}return x}else{if(n[y]){return n[y]}else{if(e.matchSubset){for(var w=y.length-1;w>=e.minChars;w--){var z=n[y.substr(0,w)];if(z){var x=[];b.each(z,function(B,A){if(q(A.value,y)){x[x.length]=A}});return x}}}}}return null}}};b.Autocompleter.Select=function(h,w,y,C){var v={ACTIVE:"ac_over"};var x,n=-1,E,z="",F=true,e,B;function A(){if(!F){return}e=b("<div/>").hide().addClass(h.resultsClass).css("position","absolute").appendTo(document.body);B=b("<ul/>").appendTo(e).mouseover(function(G){if(D(G).nodeName&&D(G).nodeName.toUpperCase()=="LI"){n=b("li",B).removeClass(v.ACTIVE).index(D(G));b(D(G)).addClass(v.ACTIVE)}}).click(function(G){b(D(G)).addClass(v.ACTIVE);y();w.focus();return false}).mousedown(function(){C.mouseDownOnSelect=true}).mouseup(function(){C.mouseDownOnSelect=false});if(h.width>0){e.css("width",h.width)}F=false}function D(H){var G=H.target;while(G&&G.tagName!="LI"){G=G.parentNode}if(!G){return[]}return G}function q(G){x.slice(n,n+1).removeClass(v.ACTIVE);p(G);var I=x.slice(n,n+1).addClass(v.ACTIVE);if(h.scroll){var H=0;x.slice(0,n).each(function(){H+=this.offsetHeight});if((H+I[0].offsetHeight-B.scrollTop())>B[0].clientHeight){B.scrollTop(H+I[0].offsetHeight-B.innerHeight())}else{if(H<B.scrollTop()){B.scrollTop(H)}}}}function p(G){n+=G;if(n<0){n=x.size()-1}else{if(n>=x.size()){n=0}}}function d(G){return h.max&&h.max<G?h.max:G}function f(){B.empty();var H=d(E.length);for(var I=0;I<H;I++){if(!E[I]){continue}var J=h.formatItem(E[I].data,I+1,H,E[I].value,z);if(J===false){continue}var G=b("<li/>").html(h.highlight(J,z)).addClass(I%2==0?"ac_even":"ac_odd").appendTo(B)[0];b.data(G,"ac_data",E[I])}x=B.find("li");if(h.selectFirst){x.slice(0,1).addClass(v.ACTIVE);n=0}if(b.fn.bgiframe){B.bgiframe()}}return{display:function(H,G){A();E=H;z=G;f()},next:function(){q(1)},prev:function(){q(-1)},pageUp:function(){if(n!=0&&n-8<0){q(-n)}else{q(-8)}},pageDown:function(){if(n!=x.size()-1&&n+8>x.size()){q(x.size()-1-n)}else{q(8)}},hide:function(){e&&e.hide();x&&x.removeClass(v.ACTIVE);n=-1},visible:function(){return e&&e.is(":visible")},current:function(){return this.visible()&&(x.filter("."+v.ACTIVE)[0]||h.selectFirst&&x[0])},show:function(){var I=b(w).offset();e.css({width:typeof h.width=="string"||h.width>0?h.width:b(w).width(),top:I.top+w.offsetHeight,left:I.left}).show();if(h.scroll){B.scrollTop(0);B.css({maxHeight:h.scrollHeight,overflow:"auto"});if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var G=0;x.each(function(){G+=this.offsetHeight});var H=G>h.scrollHeight;B.css("height",H?h.scrollHeight:G);if(!H){x.width(B.width()-parseInt(x.css("padding-left"))-parseInt(x.css("padding-right")))}}}},selected:function(){var G=x&&x.filter("."+v.ACTIVE).removeClass(v.ACTIVE);return G&&G.length&&b.data(G[0],"ac_data")},emptyList:function(){B&&B.empty()},unbind:function(){e&&e.remove()}}};b.Autocompleter.Selection=function(f,h,e){if(f.createTextRange){var d=f.createTextRange();d.collapse(true);d.moveStart("character",h);d.moveEnd("character",e);d.select()}else{if(f.setSelectionRange){f.setSelectionRange(h,e)}else{if(f.selectionStart){f.selectionStart=h;f.selectionEnd=e}}}f.focus()}})(jQuery);(function(b){b.PercListEditorWidget=function(q){var G={isEnabled:V,setListItems:w,getListItems:P,removeListItems:O,addListItem:L,removeListItem:E,enable:D,disable:h,highlightListItem:N,scrollToListItem:U};var B='<div id="perc-ui-listedit-header">        <div id="perc-ui-listedit-title">            <div id="perc-ui-permission-users-title">                '+q.title1+'            </div>            <div id="perc-ui-permission-users-write">                '+q.title2+'            </div>        </div>        <div id="perc-ui-permission-addstartbutton"/>    </div>    <div id="perc-ui-listedit-listitemfield">        <input id="perc-ui-permission-usernamefield" name="perc-ui-permission-usernamefield"/>        <div id="perc-ui-permission-plusbutton" title="Add user"/>    </div>    <div id="perc-ui-permission-user-list-scroll-pane">        <ul id="perc-ui-permission-user-list">            <li>                <span>Username</span>                <div class="perc-ui-permission-deletebutton" id="Username"/>            </li>        </ul>    </div>';var C='            <li>                <span>_username_</span>                <div class="perc-ui-permission-deletebutton" id="_username_" title="Remove user"/>            </li>';var I=b("#"+q.container);I.empty();I.html(B);var T=I.find("#perc-ui-permission-user-list");var d=I.find("#perc-ui-permission-addstartbutton");var f=I.find("#perc-ui-listedit-listitemfield");var x=I.find("#perc-ui-permission-usernamefield");var M=I.find("#perc-ui-permission-plusbutton");var n=I.find("#perc-ui-permission-user-list-scroll-pane");var W=I.find("#perc-ui-listedit-title");var v;var z="";if(q.help!=undefined&&q.help!=null){z=q.help}else{z=I18N.message("perc.ui.folderPropsDialog.inputField@Enter a username")}var H=[];var y=true;var e=null;q.toggler.change(function(){p()});d.unbind().click(function(){f.toggle()});M.click(function(){var X=x.val();L(X)});x.keypress(function(Z){var Y=(Z.keyCode?Z.keyCode:Z.which);var X=x.val();if(Y==13){if(A(X)){L(X)}}}).click(function(){x.focus();Q();R("clear");T.find("li").removeClass("perc-ui-listedit-itemselected")}).keyup(function(){Q()}).change(function(){Q()}).blur(function(){R("help")}).focus(function(){R("clear")});if(q.results!=undefined&&q.results!=null){e=q.results;x.autocomplete(e,{minChars:0,max:e.length,width:(b.browser.msie)?336:334,scrollHeight:101}).result(function(){Q()})}if(b.browser.msie){M.css("margin-right","18px")}w(q.items);p();d.hide();J();R("help");return G;function R(Y){var X=x.val();if(Y=="help"&&X==""){x.css("font-style","italic");x.css("color","gray");x.val(z)}else{if(Y=="clear"){if(X==z){x.val("")}x.css("font-style","normal");x.css("color","black")}}}function Q(){var X=x.val();var Y=A(X);if(Y){F()}else{J()}}function A(X){for(r=0;r<e.length;r++){if(X.toLowerCase()==e[r].toLowerCase()){return true}}return false}function w(X){H=[];if(X!=undefined&&X!=null&&X.length>0){for(u=0;u<X.length;u++){H.splice(0,0,X[u]);K(X[u])}}S()}function P(){return H}function V(){return y}function O(){H=[];S()}function K(X){if(e!=null){e=b.grep(e,function(Y){return Y!=X});x.setOptions({data:e})}}function L(ab){if(ab==null||ab==undefined||ab==""){return}for(li=0;li<H.length;li++){if(ab.toLowerCase()==H[li].toLowerCase()){return}}H.splice(0,0,ab);x.val("");K(ab);S();var Y=-1;for(li=0;li<H.length;li++){if(ab==H[li]){Y=li;break}}var aa=Y+1;var Z=T.find("li:nth-child("+aa+")");var X=T.find("li").height();if(Y!=-1){n.scrollTop(Y*X)}Z.addClass("perc-ui-listedit-itemselected");Q()}function S(){b.perc_utils.sortCaseInsensitive(H);T.empty();for(u=0;u<H.length;u++){var X=C.replace(/_username_/g,H[u]);T.append(X)}v=b(".perc-ui-permission-deletebutton");v.click(function(){var Y=b(this).attr("id");E(Y)})}function E(Y){var X=-1;for(li=0;li<H.length;li++){if(Y==H[li]){X=li;break}}if(X!=-1){H.splice(X,1);if(e!=null){e[e.length]=Y;b.perc_utils.sortCaseInsensitive(e);x.setOptions({data:e})}S()}}function D(){y=true;x.removeAttr("disabled");var X=x.val();if(X!=z){x.css("color","black")}if(X==""){R("help")}n.removeClass("disabled").css("color","black");W.css("color","black");v.show();Q();d.unbind().removeClass("disabled").click(function(){f.toggle()})}function h(){y=false;x.attr("disabled","disabled").css("color","gray");n.addClass("disabled").css("color","gray");W.css("color","gray");v.hide();J();d.addClass("disabled").unbind();T.find("li").removeClass("perc-ui-listedit-itemselected")}function J(){M.addClass("disabled").unbind()}function F(){M.removeClass("disabled").click(function(){var X=x.val();L(X)})}function p(){var X=q.toggler.val();if(b.inArray(X,q.toggleroff)!=-1){h()}else{D()}}function N(X){}function U(X){}}})(jQuery);(function(d){d.fn.superfish=function(w){var n=d.fn.superfish,v=n.c,h=d(['<span class="',v.arrowClass,'"> &#187;</span>'].join("")),q=function(){var x=d(this),y=e(x);clearTimeout(y.sfTimer);x.showSuperfishUl().siblings().hideSuperfishUl()},f=function(){var x=d(this),z=e(x),y=n.op;clearTimeout(z.sfTimer);z.sfTimer=setTimeout(function(){y.retainPath=(d.inArray(x[0],y.$path)>-1);x.hideSuperfishUl();if(y.$path.length&&x.parents(["li.",y.hoverClass].join("")).length<1){q.call(y.$path)}},y.delay)},e=function(x){var y=x.parents(["ul.",v.menuClass,":first"].join(""))[0];n.op=n.o[y.serial];return y},p=function(x){x.addClass(v.anchorClass).append(h.clone())};return this.each(function(){var x=this.serial=n.o.length;var z=d.extend({},n.defaults,w);z.$path=d("li."+z.pathClass,this).slice(0,z.pathLevels).each(function(){d(this).addClass([z.hoverClass,v.bcClass].join(" ")).filter("li:has(ul)").removeClass(z.pathClass)});n.o[x]=n.op=z;d("li:has(ul)",this)[(d.fn.hoverIntent&&!z.disableHI)?"hoverIntent":"hover"](q,f).each(function(){if(z.autoArrows){p(d(">a:first-child",this))}}).not("."+v.bcClass).hideSuperfishUl();var y=d("a",this);y.each(function(A){var B=y.eq(A).parents("li");y.eq(A).focus(function(){q.call(B)}).blur(function(){f.call(B)})});z.onInit.call(this)}).each(function(){var x=[v.menuClass];if(n.op.dropShadows&&!(d.browser.msie&&d.browser.version<7)){x.push(v.shadowClass)}d(this).addClass(x.join(" "))})};var b=d.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var e=b.op;if(d.browser.msie&&d.browser.version>6&&e.dropShadows&&e.animation.opacity!=undefined){this.toggleClass(b.c.shadowClass+"-off")}};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};d.fn.extend({hideSuperfishUl:function(){var h=b.op,f=(h.retainPath===true)?h.$path:"";h.retainPath=false;var e=d(["li.",h.hoverClass].join(""),this).add(this).not(f).removeClass(h.hoverClass).find(">ul").hide().css("visibility","hidden");h.onHide.call(e);return this},showSuperfishUl:function(){var h=b.op,f=b.c.shadowClass+"-off",e=this.addClass(h.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(e);h.onBeforeShow.call(e);e.animate(h.animation,h.speed,function(){b.IE7fix.call(e);h.onShow.call(e)});return this}})})(jQuery);(function(f){var b={percDropdownRootClass:"perc-view",percDropdownOptionLabels:["Title","Option1","Option2"],percDropdownOptionElements:null,percDropdownCallbacks:[function(q){alert(q)},function(q){alert(q)},function(q){alert(q)}],percDropdownCallbackData:["Title","Option1","Option2"],percDropdownDisabledFlag:[true,true,true,true,true],percDropdownItemImage:null,percDropdownTitleImage:null,percDropdownTitleImageOver:null,percDropdownShowExpandIcon:true,percDropdownResizeToElement:null,percDropdownDisabledItemImage:null,delay:50,dropShadows:true};var h="<ul class='sf-menu perc-dropdown'><li class='current'><a class='perc-dropdown-title'>_TITLE_</a><ul class='perc-dropdown-option-list'><li class='perc-dropdown-option-item-template '><a href='#' class='perc-dropdown-option'>_OPTION_</a></li></ul></li></ul>";var p;var n=4;f.fn.PercDropdown=function(x){x=f.extend({},b,x);p=f(h);p.addClass(x.percDropdownRootClass).data("config",x);if(x.percDropdownResizeToElement){x.onBeforeShow=e}var E=x.percDropdownCallbacks;var q=x.percDropdownCallbackData;var C=x.percDropdownOptionLabels;var z=x.percDropdownDisabledFlag;var J=x.percDropdownItemImage;var I=x.percDropdownDisabledItemImage;var G=p.find(".perc-dropdown-title");if(x.percDropdownTitleImage==null){G.css("cursor","default").html(C[0])}else{var D=x.percDropdownRootClass?x.percDropdownRootClass+"-split-button-arrow":"perc-split-button-arrow";G.html("&nbsp;").css("background","url("+x.percDropdownTitleImage+") no-repeat").css("cursor","pointer").addClass(D).hover(function(){f(this).css("background","url("+x.percDropdownTitleImageOver+") no-repeat").css("overflow","visible")},function(){f(this).css("background","url("+x.percDropdownTitleImage+") no-repeat").css("overflow","visible")});var w=p.find(".perc-dropdown-option-list");w.css("margin","4px 0 0 0")}G.addClass("perc-dropdown-title-"+C[0]).data("callback",E[0]).data("callbackData",q[0]).click(d);var B=p.find(".perc-dropdown-option-list");var A=p.find(".perc-dropdown-option-item-template");var y=0;for(l=1;l<C.length;l++){y=l;var F=C[l];var H=A.clone();H.removeClass("perc-dropdown-option-item-template");var v;if(x.percDropdownOptionElements!=null){H.find("a").replaceWith(x.percDropdownOptionElements[l]);v=x.percDropdownOptionElements[l].addClass("perc-dropdown-option-"+f.perc_textFilters.IDNAMECDATA(F))}else{v=H.find("a").html(F).addClass("perc-dropdown-option-"+f.perc_textFilters.IDNAMECDATA(F))}if(J!=null){v.css("background-image","url("+J[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}if(!(z[l])){y=0;v.addClass("perc-drop-disabled").css("color","#9FA3AA");if(I!=null){v.css("background-image","url("+I[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}}B.append(H);H.data("callback",E[y]).data("callbackData",q[y]).click(d)}A.remove();p.superfish(x);if(x.percDropdownShowExpandIcon===false){G.find(".sf-sub-indicator").hide()}else{}this.append(p)};function d(v){var w=f(this).data("callback");var q=f(this).data("callbackData");w(q)}function e(){var x=f(this);var y=f(x.parents(".perc-dropdown")[0]);var q=y.data("config");if(typeof(q)!="undefined"){var w=f(q.percDropdownResizeToElement);var v=w.width();x.width(v-n)}}})(jQuery);(function(d,e){var b=0;d.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:false,multiple:true,position:{}},_create:function(){var p=this.element.hide(),v=this.options;this.speed=d.fx.speeds._default;this._isOpen=false;var n=(this.button=d('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(v.classes).attr({title:p.attr("title"),"aria-haspopup":true,tabIndex:p.attr("tabIndex")}).insertAfter(p),f=(this.buttonlabel=d("<span />")).html(v.noneSelectedText).appendTo(n),q=(this.menu=d("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(v.classes).appendTo(document.body),x=(this.header=d("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(q),h=(this.headerLinkContainer=d("<ul />")).addClass("ui-helper-reset").html(function(){if(v.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+v.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+v.uncheckAllText+"</span></a></li>"}else{if(typeof v.header==="string"){return"<li>"+v.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(x),w=(this.checkboxContainer=d("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(q);this._bindEvents();this.refresh(true);if(!v.multiple){q.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(v){var n=this.element,q=this.options,p=this.menu,x=this.checkboxContainer,f=[],h=[],w=n.attr("id")||b++;n.find("option").each(function(A){var B=d(this),F=this.parentNode,D=this.innerHTML,H=this.title,E=this.value,z=this.id||"ui-multiselect-"+w+"-option-"+A,I=this.disabled,y=this.selected,C=["ui-corner-all"],G;if(F.tagName.toLowerCase()==="optgroup"){G=F.getAttribute("label");if(d.inArray(G,f)===-1){h.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+G+"</a></li>");f.push(G)}}if(I){C.push("ui-state-disabled")}if(y&&!q.multiple){C.push("ui-state-active")}h.push('<li class="'+(I?"ui-multiselect-disabled":"")+'">');h.push('<label for="'+z+'" title="'+H+'" class="'+C.join(" ")+'">');h.push('<input id="'+z+'" name="multiselect_'+w+'" type="'+(q.multiple?"checkbox":"radio")+'" value="'+E+'" title="'+D+'"');if(y){h.push(' checked="checked"');h.push(' aria-selected="true"')}if(I){h.push(' disabled="disabled"');h.push(' aria-disabled="true"')}h.push(" /><span>"+D+"</span></label></li>")});x.html(h.join(""));this.labels=p.find("label");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!v){this._trigger("refresh")}},update:function(){var q=this.options,h=this.labels.find("input"),f=h.filter(":checked"),n=f.length,p;if(n===0){p=q.noneSelectedText}else{if(d.isFunction(q.selectedText)){p=q.selectedText.call(this,n,h.length,f.get())}else{if(/\d/.test(q.selectedList)&&q.selectedList>0&&n<=q.selectedList){p=f.map(function(){return d(this).next().text()}).get().join(", ")}else{p=q.selectedText.replace("#",n).replace("#",h.length)}}}this.buttonlabel.html(p);return p},_bindEvents:function(){var f=this,h=this.button;function n(){f[f._isOpen?"close":"open"]();return false}h.find("span").bind("click.multiselect",n);h.bind({click:n,keypress:function(p){switch(p.which){case 27:case 38:case 37:f.close();break;case 39:case 40:f.open();break}},mouseenter:function(){if(!h.hasClass("ui-state-disabled")){d(this).addClass("ui-state-hover")}},mouseleave:function(){d(this).removeClass("ui-state-hover")},focus:function(){if(!h.hasClass("ui-state-disabled")){d(this).addClass("ui-state-focus")}},blur:function(){d(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(p){if(d(this).hasClass("ui-multiselect-close")){f.close()}else{f[d(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}p.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(x){x.preventDefault();var w=d(this),v=w.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),p=v.get(),q=w.parent().text();if(f._trigger("beforeoptgrouptoggle",x,{inputs:p,label:q})===false){return}f._toggleChecked(v.filter("[checked]").length!==v.length,v);f._trigger("optgrouptoggle",x,{inputs:p,label:q,checked:p[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!d(this).hasClass("ui-state-disabled")){f.labels.removeClass("ui-state-hover");d(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(p){p.preventDefault();switch(p.which){case 9:case 27:f.close();break;case 38:case 40:case 37:case 39:f._traverse(p.which,this);break;case 13:d(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(w){var v=d(this),x=this.value,q=this.checked,p=f.element.find("option");if(this.disabled||f._trigger("click",w,{value:x,text:this.title,checked:q})===false){w.preventDefault();return}v.focus();v.attr("aria-selected",q);p.each(function(){if(this.value===x){this.selected=q}else{if(!f.options.multiple){this.selected=false}}});if(!f.options.multiple){f.labels.removeClass("ui-state-active");v.closest("label").toggleClass("ui-state-active",q);f.close()}f.element.trigger("change");setTimeout(d.proxy(f.update,f),10)});d(document).bind("mousedown.multiselect",function(p){if(f._isOpen&&!d.contains(f.menu[0],p.target)&&!d.contains(f.button[0],p.target)&&p.target!==f.button[0]){d("html").click(function(){f.close()})}});d(this.element[0].form).bind("reset.multiselect",function(){setTimeout(d.proxy(f.refresh,f),10)})},_setButtonWidth:function(){var f=this.element.outerWidth(),h=this.options;if(/\d/.test(h.minWidth)&&f<h.minWidth){f=h.minWidth}this.button.width(f)},_setMenuWidth:function(){var f=this.menu,h=this.button.outerWidth()-parseInt(f.css("padding-left"),10)-parseInt(f.css("padding-right"),10)-parseInt(f.css("border-right-width"),10)-parseInt(f.css("border-left-width"),10);f.width(h||this.button.outerWidth())},_traverse:function(q,v){var n=d(v),h=q===38||q===37,f=n.parent()[h?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[h?"last":"first"]();if(!f.length){var p=this.menu.find("ul").last();this.menu.find("label")[h?"last":"first"]().trigger("mouseover");p.scrollTop(h?p.height():0)}else{f.find("label").trigger("mouseover")}},_toggleState:function(h,f){return function(){if(!this.disabled){this[h]=f}if(f){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(f,q){var p=(q&&q.length)?q:this.labels.find("input"),n=this;p.each(this._toggleState("checked",f));p.eq(0).focus();this.update();var h=p.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&d.inArray(this.value,h)>-1){n._toggleState("selected",f).call(this)}});if(p.length){this.element.trigger("change")}},_toggleDisabled:function(f){this.button.attr({disabled:f,"aria-disabled":f})[f?"addClass":"removeClass"]("ui-state-disabled");this.menu.find("input").attr({disabled:f,"aria-disabled":f}).parent()[f?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:f,"aria-disabled":f})},open:function(q){var x=this,p=this.button,f=this.menu,n=this.speed,h=this.options;if(this._trigger("beforeopen")===false||p.hasClass("ui-state-disabled")||this._isOpen){return}var w=f.find("ul").last(),y=h.show,v=p.offset();if(d.isArray(h.show)){y=h.show[0];n=h.show[1]||x.speed}w.scrollTop(0).height(h.height);if(d.ui.position&&!d.isEmptyObject(h.position)){h.position.of=h.position.of||p;f.show().position(h.position).hide().show(y,n)}else{f.css({top:v.top+p.outerHeight(),left:v.left}).show(y,n)}this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");p.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var n=this.options,f=n.hide,h=this.speed;if(d.isArray(n.hide)){f=n.hide[0];h=n.hide[1]||this.speed}this.menu.hide(f,h);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(f){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){d.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(f,h){var n=this.menu;switch(f){case"header":n.find("div.ui-multiselect-header")[h?"show":"hide"]();break;case"checkAllText":n.find("a.ui-multiselect-all span").eq(-1).text(h);break;case"uncheckAllText":n.find("a.ui-multiselect-none span").eq(-1).text(h);break;case"height":n.find("ul").last().height(parseInt(h,10));break;case"minWidth":this.options[f]=parseInt(h,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[f]=h;this.update();break;case"classes":n.add(this.button).removeClass(this.options.classes).addClass(h);break}d.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*
 * jQuery UI Timepicker 0.2.1
 *
 * Copyright (c) 2009 Martin Milesich (http://milesich.com/)
 *
 * Some parts are
 *   Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 *
 * $Id: timepicker.js 28 2009-08-11 20:31:23Z majlo $
 *
 * Depends:
 *  ui.core.js
 *  ui.datepicker.js
 *  ui.slider.js
 */
(function(d){d.extend(d.datepicker._defaults,{stepMinutes:1,stepHours:1,time24h:false,showTime:false,altTimeField:""});d.datepicker._setDateFromFieldOverride=d.datepicker._setDateFromField;d.datepicker._setDateFromField=function(h,f){var e=h.input.val().split(" ");if(e.length>0){h.input.val(e[0]);d.datepicker._setDateFromFieldOverride(h,f);h.input.val(e.join(" "))}};d.datepicker._connectDatepickerOverride=d.datepicker._connectDatepicker;d.datepicker._connectDatepicker=function(h,f){d.datepicker._connectDatepickerOverride(h,f);if(this._get(f,"showTime")){f.settings.showButtonPanel=true}var e=this._get(f,"showOn");if(e=="button"||e=="both"){f.trigger.unbind("click");f.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==h){d.datepicker._hideDatepicker(null)}else{d.datepicker._showDatepicker(h)}return false})}};d.datepicker._showDatepickerOverride=d.datepicker._showDatepicker;d.datepicker._showDatepicker=function(f){d.datepicker._showDatepickerOverride(f);f=f.target||f;if(f.nodeName.toLowerCase()!="input"){f=d("input",f.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(f)){return}var h=d.datepicker._getInst(f);var e=d.datepicker._get(h,"showTime");if(e){d.timepicker.show(f)}};d.datepicker._checkExternalClickOverride=d.datepicker._checkExternalClick;d.datepicker._checkExternalClick=function(f){if(!d.datepicker._curInst){return}var e=d(f.target);if((e.parents("#"+d.timepicker._mainDivId).length==0)){inst=d.datepicker._getInst(e[0]);if(((e[0].id!=d.datepicker._mainDivId&&e.parents("#"+d.datepicker._mainDivId).length==0&&!e.hasClass(d.datepicker.markerClassName)&&!e.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)))||(e.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=inst)){d("html").click(function(){d.datepicker._hideDatepicker()})}}return};d.datepicker._hideDatepickerOverride=d.datepicker._hideDatepicker;d.datepicker._hideDatepicker=function(f,n){var h=this._curInst;if(!h||(f&&h!=d.data(f,PROP_NAME))){return}var e=this._get(h,"showTime");if(f===undefined&&e){if(h.input){h.input.val(this._formatDate(h));h.input.trigger("change")}this._updateAlternate(h);if(e){d.timepicker.update(this._formatDate(h))}}d.datepicker._hideDatepickerOverride(f,n);if(e){d.timepicker.hide()}};d.datepicker._selectDate=function(q,f){var p=d(q);var n=this._getInst(p[0]);var e=this._get(n,"showTime");f=(f!=null?f:this._formatDate(n));if(!e){if(n.input){n.input.val(f)}this._updateAlternate(n)}var h=this._get(n,"onSelect");if(h){h.apply((n.input?n.input[0]:null),[f,n])}else{if(n.input&&!e){n.input.trigger("change")}}if(n.inline){this._updateDatepicker(n)}else{if(!n.stayOpen){if(e){this._updateDatepicker(n)}else{this._hideDatepicker(null,this._get(n,"duration"));this._lastInput=n.input[0];if(typeof(n.input[0])!="object"){n.input[0].focus()}this._lastInput=null}}}};d.datepicker._updateDatepickerOverride=d.datepicker._updateDatepicker;d.datepicker._updateDatepicker=function(e){d.datepicker._updateDatepickerOverride(e);d.timepicker.resize()};function b(){}b.prototype={init:function(){this._mainDivId="ui-timepicker-div";this._inputId=null;this._orgValue=null;this._orgHour=null;this._orgMinute=null;this._colonPos=-1;this._visible=false;this.tpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style=" display: none; position: absolute;"></div>');this._generateHtml()},show:function(w){var n=d.datepicker._getInst(w);this._time24h=d.datepicker._get(n,"time24h");this._altTimeField=d.datepicker._get(n,"altTimeField");var e=parseInt(d.datepicker._get(n,"stepMinutes"),10)||1;var v=parseInt(d.datepicker._get(n,"stepHours"),10)||1;if(60%e!=0){e=1}if(24%v!=0){v=1}d("#hourSlider").slider("option","max",24-v);d("#hourSlider").slider("option","step",v);d("#minuteSlider").slider("option","max",60-e);d("#minuteSlider").slider("option","step",e);this._inputId=w.id;if(!this._visible){this._parseTime();this._orgValue=d("#"+this._inputId).val()}this.resize();d("#"+this._mainDivId).show();this._visible=true;var f=d("#"+d.datepicker._mainDivId);var q=f.position();var p=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+d(document).scrollLeft();var x=this.tpDiv.offset().left+this.tpDiv.outerWidth();if(x>p){f.css("left",q.left-(x-p)-5);this.tpDiv.css("left",f.offset().left+f.outerWidth()+"px")}var h=d("#"+this._inputId).offset();f.css("top",h.top+25);this.tpDiv.css("top",h.top+25)},update:function(f){var h=d("#"+this._mainDivId+" span.fragHours").text()+":"+d("#"+this._mainDivId+" span.fragMinutes").text();if(!this._time24h){h+=" "+d("#"+this._mainDivId+" span.fragAmpm").text()}var e=d("#"+this._inputId).val();d("#"+this._inputId).val(f+" "+h);if(this._altTimeField){d(this._altTimeField).each(function(){d(this).val(h)})}},hide:function(){this._visible=false;d("#"+this._mainDivId).hide()},resize:function(){var f=d("#"+d.datepicker._mainDivId);var h=f.position();var e=d("#"+d.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();d("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",e);this.tpDiv.css({height:f.height(),top:h.top,left:h.left+f.outerWidth()+"px"});d("#hourSlider").css("height",this.tpDiv.height()-(3.5*e));d("#minuteSlider").css("height",this.tpDiv.height()-(3.5*e))},_generateHtml:function(){var f="";f+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">';f+='<div class="ui-datepicker-title" style="margin:0">';f+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div><table>';f+="<tr><th>Hour</th><th>Minute</th></tr>";f+='<tr><td align="center"><div id="hourSlider" class="slider"></div></td><td align="center"><div id="minuteSlider" class="slider"></div></td></tr>';f+="</table>";this.tpDiv.empty().append(f);d("body").append(this.tpDiv);var e=this;d("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(h,n){e._writeTime("hour",n.value)},stop:function(h,n){d("#"+e._inputId).focus()}});d("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:59,step:1,slide:function(h,n){e._writeTime("minute",n.value)},stop:function(h,n){d("#"+e._inputId).focus()}});d("#hourSlider > a").css("padding",0);d("#minuteSlider > a").css("padding",0)},_writeTime:function(e,f){if(e=="hour"){if(!this._time24h){if(f<12){d("#"+this._mainDivId+" span.fragAmpm").text("am")}else{d("#"+this._mainDivId+" span.fragAmpm").text("pm");f-=12}if(f==0){f=12}}else{d("#"+this._mainDivId+" span.fragAmpm").text("")}if(f<10){f="0"+f}d("#"+this._mainDivId+" span.fragHours").text(f)}if(e=="minute"){if(f<10){f="0"+f}d("#"+this._mainDivId+" span.fragMinutes").text(f)}},_parseTime:function(){var p=d("#"+this._inputId).val();this._colonPos=p.search(":");var e=0,n=0,f="";if(this._colonPos!=-1){n=parseInt(p.substr(this._colonPos-2,2),10);e=parseInt(p.substr(this._colonPos+1,2),10);f=jQuery.trim(p.substr(this._colonPos+3,3))}f=f.toLowerCase();if(f!="am"&&f!="pm"){f=""}if(n<0){n=0}if(e<0){e=0}if(n>23){n=23}if(e>59){e=59}if(f=="pm"&&n<12){n+=12}if(f=="am"&&n==12){n=0}this._setTime("hour",n);this._setTime("minute",e);this._orgHour=n;this._orgMinute=e},_setTime:function(e,f){if(isNaN(f)){f=0}if(f<0){f=0}if(f>23&&e=="hour"){f=23}if(f>59&&e=="minute"){f=59}if(e=="hour"){d("#hourSlider").slider("value",f)}if(e=="minute"){d("#minuteSlider").slider("value",f)}this._writeTime(e,f)}};d.timepicker=new b();d("document").ready(function(){d.timepicker.init()})})(jQuery);(function(e){e.PercRecentListService={getRecentList:b,setRecent:d,RECENT_TYPE_ITEM:"item",RECENT_TYPE_TEMPLATE:"template",RECENT_TYPE_SITE_FOLDER:"site-folder",RECENT_TYPE_ASSET_FOLDER:"asset-folder",RECENT_TYPES:[this.RECENT_TYPE_ITEM,this.RECENT_TYPE_TEMPLATE,this.RECENT_TYPE_SITE_FOLDER,this.RECENT_TYPE_ASSET_FOLDER]};function b(p,n){var f=e.Deferred();if(!e.inArray(p,e.PercRecentListService.RECENT_TYPES)){f.reject("Invalid type passed in for getting recent items.")}else{var h=e.perc_paths.RECENT_ROOT+p;if(p==e.PercRecentListService.RECENT_TYPE_TEMPLATE||p==e.PercRecentListService.RECENT_TYPE_SITE_FOLDER){h+="/"+n}var q=function(w,v){if(w==e.PercServiceUtils.STATUS_SUCCESS){f.resolve(v)}else{var x=e.PercServiceUtils.extractDefaultErrorMessage(v.request);e.perc_utils.info("Error accessing cm1 page optimizer service: "+x);f.reject(x)}};e.PercServiceUtils.makeJsonRequest(h,e.PercServiceUtils.TYPE_GET,true,q)}return f.promise()}function d(q,v,n){var f=e.Deferred();if(!e.inArray(q,e.PercRecentListService.RECENT_TYPES)){f.reject("Invalid type passed in for getting recent items.")}else{var h=e.perc_paths.RECENT_ROOT+q;if(q==e.PercRecentListService.RECENT_TYPE_TEMPLATE||q==e.PercRecentListService.RECENT_TYPE_SITE_FOLDER){h+="/"+n}var p={value:v};e.ajax({url:h,type:"POST",data:p,contentType:"application/x-www-form-urlencoded",dataType:"json"}).done(function(){f.resolve()}).fail(function(w,x){f.reject("Failed to add item to recent list")})}return f.promise()}})(jQuery);(function(h){h.PercRedirectHandler={createRedirect:q};function q(A,z,x){var w=h.Deferred();if(A==z){w.resolve("Both from and to are same no need for a redirect")}else{if(!gIsSaaSEnvironment){w.resolve("This is a non SaaS environment, skipping redirect creation.")}else{var y={data:{fromPath:A,toPath:z,type:x}};v(y).done(function(B){n(A,z,B).done(function(C){w.resolve(C)}).fail(function(C){w.reject(C)})}).fail(function(B){w.reject(B)})}}return w.promise()}function v(y){var w=h.Deferred();var x=h.perc_paths.REDIRECT_ROOT+"validate";h.PercServiceUtils.makeJsonRequest(x,h.PercServiceUtils.TYPE_POST,false,function(A,z){if(A==h.PercServiceUtils.STATUS_SUCCESS){w.resolve(z.data)}else{var B=h.PercServiceUtils.extractDefaultErrorMessage(z.request);w.reject(B)}},y,function(z){w.reject("Redirect service request timed out.")});return w.promise()}function n(z,y,x){var w=h.Deferred();if(x.response.status=="Error"){w.reject(x.response.errorMessage)}if(x.response.status=="NotApplicable"){w.resolve("Redirects are not applicable for this scenario.")}else{if(x.response.status=="Published"){e(z,y,x).done(function(A){w.resolve(A)}).fail(function(A){w.reject(A)})}else{w.resolve("Redirect is not required for this case.")}}return w.promise()}function d(C,B,A){C=f(C);B=f(B);var y=h.Deferred();var w=A.response.redirectLicense;var x={category:"AUTOGEN",condition:C,enabled:true,key:w.key,permanent:true,redirectTo:B,site:A.response.bucketName,type:"CM1"};var z={id:w.key,type:w.name,token:w.handshake};h.ajax({type:"POST",beforeSend:function(D){D.setRequestHeader("Authorization",JSON.stringify(z))},url:w.apiProvider+"/rest/redirect/entries?replace=true",data:JSON.stringify(x),contentType:"application/json",}).done(function(F,D,E){y.resolve("Created redirect successfully")}).fail(function(G,D,F){var E="A redirect rule cannot be created at this time, Please note the time and date and submit this problem to Percussion support.";if(G&&G.responseText){E=JSON.parse(G.responseText).message}y.reject(E)});return y.promise()}function e(A,z,y){var w=h.Deferred();var x;h.unblockUI();x=h(b(A,z)).perc_dialog({title:"Manage Redirects",modal:true,percButtons:{Yes:{click:function(){if(!z){z=x.find("#perc-redirect-to-path").val()}if(!z){x.find("div.perc_field_error[for=perc-redirect-to-path]").show();return}else{x.find("div.perc_field_error[for=perc-redirect-to-path]").hide()}h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);d(A,z,y).fail(function(B){w.reject(B)}).always(function(){h.unblockUI();x.remove();w.resolve("Redirect created successfully.")})},id:"perc-redirect-yes"},No:{click:function(){x.remove();w.resolve("User doesn't want to create redirect.")},id:"perc-redirect-no"}},id:"perc-redirect-dialog",width:700});p(x);return w.promise()}function b(y,w){var x=h("<div/>",{id:"perc-redirect-container"});x.append('<div><label>This change could cause a visitor to your website to see a "page not found" error. Would you like to redirect those users?</label><br/><br/></div>');x.append("<div><label>From path:</label><br/></div>");x.append('<div class="readonlyinput">'+f(y)+"</div><br/>");x.append("<div><label>To path:</label><br/></div>");if(w){x.append('<div class="readonlyinput">'+f(w)+"</div>")}else{x.append("<div><input type='text' class='required' readonly='true' name='perc-redirect-to-path' id='perc-redirect-to-path'/><img id='perc-redirect-to-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div>");x.append("<div for='perc-redirect-to-path' class='perc_field_error' style='display:none'>To path is required to create redirect.</div>")}return x}function p(w){w.find("#perc-redirect-to-path-button").click(function(){var A="Select redirect to path";var B="To path";var z=function(D){var C=D.path;if(C.substring(0,1)==="/"&&!(C.substring(0,2)==="//")){C="/"+C}if(!C){C=D.folderPaths.split("$System$")[1]}C=f(C);w.find("#perc-redirect-to-path").val(C).attr("title",C)};var x=function(D){var C=null;if(!D){C="Please select a folder or page."}else{if(D.path=="/Sites/"){C="Your current selection is sites root, please select a folder or page."}else{if(D.type=="site"){C="Your current selection is a site, please select a folder or page."}}}return C};var y={okCallback:z,dialogTitle:A,rootPath:"Sites",initialPath:w.find("#perc-convert-folder-path").val(),selectedItemValidator:x,showFoldersOnly:false};h.PercPathSelectionDialog.open(y)})}function f(w){w=w.replace("//Sites/","");w=w.replace("/Sites/","");w=w.substring(w.indexOf("/"));if(w.charAt(w.length-1)=="/"){w=w.substr(0,w.length-1)}return w}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(q){q.PercDataList={init:A,selectItem:v,updateList:h,getCurrentItem:d,disableButtons:n,enableButtons:w,enableDeleteButton:x,unhighlightAllItems:D,disableDeleteButton:f,getCurrentList:b,hideButtons:C};var y={listItem:[],title:"",addTitle:"Add",deleteTitle:"Delete",enableDelete:true,enableAdd:true,collapsible:false,createItem:function(){},deleteItem:function(){},selectedItem:function(){},truncateEntries:false,truncateEntriesCount:5};var p=[];var e=new Object();var z="";function A(G,H){options=q.extend(true,{},y,H);G.data("options",options);var I=q('<div class="perc-item-list-label" />').html(options.title);G.append(I);if(options.enableDelete){G.find(".perc-item-list-label").append(q('<div class="perc-item-delete-button" />').attr("title",options.deleteTitle))}if(options.enableAdd){G.find(".perc-item-list-label").append(q('<div class="perc-item-add-button"/>').attr("title",options.addTitle))}if(options.collapsible){G.find(".perc-item-list-label").append(q('<span style="float: left;" id="perc-wf-min-max" class = "perc-items-minimizer" />'))}var J=q('<div class="perc-itemname-list" />').append(q("<ul/>"));G.append(J);h(G,[]);G.find(".perc-item-add-button").unbind().click(function(){var K=G.data("options");if(typeof(K.createItem)=="function"){K.createItem()}});G.find("#perc-wf-min-max").unbind().click(function(){q(this).toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");G.find(".perc-itemname-list").slideToggle("fast")});G.find(".perc-item-delete-button").unbind().click(function(L){var K=G.data("options");L.stopPropagation();if(typeof(K.deleteItem)=="function"){K.deleteItem(z)}})}function h(H,G){p=G;var J=H.data("options");var I=H.find(".perc-itemname-list>ul");I.html("");q.each(G,function(L){var M=G[L].toString();var N="perc-item-id-"+L;e[M]=N;var K=q('<li class="perc-itemname" />').attr("id",N).attr("title",M).html(M).data("item",M).addClass("perc-ellipsis");if(J.truncateEntries&&L>=J.truncateEntriesCount){K.addClass("perc-more-list perc-hidden").hide()}I.append(K);if(J.truncateEntries&&L==J.truncateEntriesCount){I.append('<li class="perc-moreLink perc-visible" style = "display:block" title = "more">more</li>')}if(J.truncateEntries&&L==G.length-1){I.append('<li class="perc-lessLink perc-hidden" style = "display:none" title = "less">less</li>')}});E(H);I.find(".perc-itemname").unbind().click(function(L){var K=q(this).data("item");dirtyController.confirmIfDirty(function(){if(typeof(J.selectedItem)=="function"){J.selectedItem(K)}})})}function E(G){q(G).find(".perc-moreLink, .perc-lessLink").click(function(){q(G).find(".perc-more-list, .perc-moreLink, .perc-lessLink").toggle().toggleClass("perc-visible perc-hidden")})}function d(){return z}function b(){return p}function v(G,J){var H=J;J=J.replace(/\\/g,"\\\\").replace(/\'/g,"\\'");var I=G.find(".perc-itemname[title='"+J+"']").attr("id");z=H;D(G);G.find("#"+I).css("background-color","#caf589").addClass("perc-item-selected")}function D(G){G.find("ul li").css("background-color","").removeClass("perc-item-selected");G.find("ul li div").css("background-color","")}function F(G){var H=G.data("options");if(H.enableAdd){G.find(".perc-item-add-button").unbind().click(function(){if(typeof(H.createItem)=="function"){H.createItem()}}).removeClass("perc-item-disabled").addClass("perc-item-enabled")}}function x(G){var H=G.data("options");if(H.enableDelete){G.find(".perc-item-delete-button").unbind().click(function(I){I.stopPropagation();if(typeof(H.deleteItem)=="function"){H.deleteItem(z)}}).removeClass("perc-item-disabled").addClass("perc-item-enabled")}}function w(G){F(G);x(G)}function B(G){var H=G.data("options");if(H.enableAdd){G.find(".perc-item-add-button").unbind().addClass("perc-item-disabled").removeClass("perc-item-enabled")}}function f(G){var H=G.data("options");if(H.enableDelete){G.find(".perc-item-delete-button").unbind().removeClass("perc-item-enabled").addClass("perc-item-disabled")}}function n(G){B(G);f(G)}function C(G){G.find(".perc-item-add-button").hide();G.find(".perc-item-delete-button").hide()}})(jQuery);(function(b){b.Perc_Template_Summary=function(f,e,d){d=d+"";this.sourceId=f;this.templateId=e;this.baseTemplateName=d;this.templateName=d;this.templateNameLowerCase=d.toLowerCase();this.siteIds=new Array();this.imageUrl=null;this.persisted=false;this.deleteFlag=false;this.isBase=false;this.contentMigrationVersion=0;this.getBaseTemplateName=function(){return this.baseTemplateName};this.getSourceId=function(){return this.sourceId};this.getTemplateId=function(){return this.templateId};this.getTemplateName=function(){return this.templateName};this.getTemplateNameLowerCase=function(){return this.templateNameLowerCase};this.getAssignedSites=function(){return this.siteIds};this.getImageUrl=function(){return this.imageUrl};this.isMarkedForDelete=function(){return this.deleteFlag};this.isBaseTemplate=function(){return this.isBase};this.isPersisted=function(){return this.persisted};this.getContentMigrationVersion=function(){return this.contentMigrationVersion};this.setSourceId=function(h){this.sourceId=h};this.setTemplateId=function(h){this.templateId=h};this.setTemplateName=function(h){this.templateName=h;this.templateNameLowerCase=h.toLowerCase()};this.setContentMigrationVersion=function(h){this.contentMigrationVersion=h};this.setAssignedSites=function(h){if(h==null||h=="undefined"){h=new Array()}this.siteIds=h};this.assignToSite=function(h){if(!this.containsSite(h)){this.siteIds.push(h)}};this.unassignFromSite=function(h){for(s in this.siteIds){if(h==this.siteIds[s]){this.siteIds.splice(s,1)}}};this.containsSite=function(h){for(s in this.siteIds){if(h==this.siteIds[s]){return true}}return false};this.setImageUrl=function(h){this.imageUrl=h};this.setPersisted=function(h){this.persisted=h};this.setDeleteFlag=function(h){this.deleteFlag(h)};this.setBaseTemplate=function(h){this.isBase=h};this.clone=function(){var h=b.extend(true,{},this);h.setPersisted(false);return h};this.isOrphan=function(){return(!this.isBase&&this.siteIds.length==0)}}})(jQuery);(function(f){f.PercUtilService={getPrivateKeys:h,encryptString:p,encryptStrings:d,decryptString:b,logToServer:e};function h(w,v){var q=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.UTIL_GET_PRIVATE_KEYS,f.PercServiceUtils.TYPE_GET,!v,function(y,x){if(y==f.PercServiceUtils.STATUS_SUCCESS){w(f.PercServiceUtils.STATUS_SUCCESS,x)}else{var z=f.PercServiceUtils.extractDefaultErrorMessage(x.request);w(f.PercServiceUtils.STATUS_ERROR,z)}})}function p(x,y,w){var q=this;var v={psmap:{entries:{entry:{key:"string",value:x}}}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.UTIL_ENCRYPT_STRING,f.PercServiceUtils.TYPE_POST,!w,function(A,z){if(A==f.PercServiceUtils.STATUS_SUCCESS){y(f.PercServiceUtils.STATUS_SUCCESS,z.data.psmap.entries.entry.value)}else{var B=f.PercServiceUtils.extractDefaultErrorMessage(z.request);y(f.PercServiceUtils.STATUS_ERROR,B)}},v)}function d(v,y,x){var q=this;var w={pslist:{list:[]}};w.pslist.list=v;f.PercServiceUtils.makeJsonRequest(f.perc_paths.UTIL_ENCRYPT_STRINGS,f.PercServiceUtils.TYPE_POST,!x,function(A,z){if(A==f.PercServiceUtils.STATUS_SUCCESS){y(f.PercServiceUtils.STATUS_SUCCESS,n(z.data.psmap.entries))}else{var B=f.PercServiceUtils.extractDefaultErrorMessage(z.request);y(f.PercServiceUtils.STATUS_ERROR,B)}},w)}function n(v){var w=[];if(!f.isArray(v.entry)){w.push(v.entry)}else{w=v.entry}var q=[];f(w).each(function(){q[this.key]=this.value});return q}function b(x,y,w){var q=this;var v={psmap:{entries:{entry:{key:"string",value:x}}}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.UTIL_DECRYPT_STRING,f.PercServiceUtils.TYPE_POST,!w,function(A,z){if(A==f.PercServiceUtils.STATUS_SUCCESS){y(f.PercServiceUtils.STATUS_SUCCESS,z.data.psmap.entries.entry.value)}else{var B=f.PercServiceUtils.extractDefaultErrorMessage(z.request);y(f.PercServiceUtils.STATUS_ERROR,B)}},v)}function e(v,x,w){if(!w){return}var q={LogData:{type:v,category:x,message:w}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.UTIL_LOG_DATA,f.PercServiceUtils.TYPE_POST,false,f.noop,q,f.noop)}})(jQuery);(function(n){n.PercTemplateService=function(){return{getThemeList:F,getThemeCSS:K,getRegionCSS:e,deleteTemplate:f,deleteRegionCSS:D,saveTemplates:I,saveRegionCSS:B,regionCSSPrepareForEdit:C,regionCSSClearCache:z,regionCSSMerge:b,getAssetDropCriteria:x,loadTemplateMetadata:h,saveTemplateMetadata:v,exportTemplate:J,getSiteProperties:A,updateInspectedElements:w,checkImportLogExists:G,createTemplateFromUrl:q,createTemplateFromUrlAsync:y,createTemplateFromUrlStatus:L,createTemplateFromUrlResult:H,createTemplateFromPage:E,assignTemplateAndMigrateContent:d,applyTemplate:p}};function F(M){n.ajax({url:n.perc_paths.THEME_SUMMARY_ALL,dataType:"json",type:"GET",success:function(O,N){M(true,O)},error:function(P,N,O){M(false,[N,O])}});return}function K(M,N){n.ajax({url:n.perc_paths.THEME_CSS+"/"+M,dataType:"xml",type:"GET",success:function(P,O){$cssObject=n(P);$cssData=$cssObject.find("ThemeCSS CSS");N(true,$cssData)},error:function(Q,O,P){N(false,[textStatus,P])}});return}function e(P,M,O,Q,R){var N=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS+"/"+P+"/"+M+"/"+O+"/"+Q,n.PercServiceUtils.TYPE_GET,false,function(T,S){if(T==n.PercServiceUtils.STATUS_SUCCESS){R(n.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=n.PercServiceUtils.extractDefaultErrorMessage(S.request);R(n.PercServiceUtils.STATUS_ERROR,U)}})}function C(O,M,P){var N=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS_PREPARE_FOR_EDIT+"/"+O+"/"+M,n.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==n.PercServiceUtils.STATUS_SUCCESS){P(n.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=n.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(n.PercServiceUtils.STATUS_ERROR,S)}})}function z(O,M,P){var N=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS_CLEAR_CACHE+"/"+O+"/"+M,n.PercServiceUtils.TYPE_DELETE,false,function(R,Q){if(R==n.PercServiceUtils.STATUS_SUCCESS){P(n.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=n.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(n.PercServiceUtils.STATUS_ERROR,S)}})}function b(P,N,M,Q){var O=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS_MERGE+"/"+P+"/"+N,n.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==n.PercServiceUtils.STATUS_SUCCESS){Q(n.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=n.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(n.PercServiceUtils.STATUS_ERROR,T)}},M)}function B(P,M,O,Q){var N=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS+"/"+P+"/"+M,n.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==n.PercServiceUtils.STATUS_SUCCESS){Q(n.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=n.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(n.PercServiceUtils.STATUS_ERROR,T)}},O)}function D(P,M,O,Q,R){var N=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.REGION_CSS+"/"+P+"/"+M+"/"+O+"/"+Q,n.PercServiceUtils.TYPE_DELETE,false,function(T,S){if(T==n.PercServiceUtils.STATUS_SUCCESS){R(n.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=n.PercServiceUtils.extractDefaultErrorMessage(S.request);R(n.PercServiceUtils.STATUS_ERROR,U)}})}function f(M,N){n.ajax({url:n.perc_paths.TEMPLATE_LOAD_SAVE+"/"+M,type:"DELETE",success:function(P,Q){var O=[P,Q];N(true,O)},error:function(Q,R,O){var P=[Q,R,O];N(false,P)}});return}function I(M,N){n.ajax({url:n.perc_paths.TEMPLATES_SAVE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(M),success:function(P,Q){var O=[P,Q];N(true,O)},error:function(Q,R,O){var P=[Q,R,O];N(false,P)}})}function x(M,P,Q,N){function O(R){var S={};n.each(R.AssetDropCriteria,function(){S[this.widgetId]=new n.PercAssetDropCriteriaModel(this.widgetId,this.appendSupport,this.existingAsset,this.multiItemSupport,this.ownerId,this.supportedCtypes,this.assetShared,this.relationshipId)});Q(S)}n.ajax({url:n.perc_paths.ASSET_WIDGET_DROP_CRITERIA+M+"/"+P,type:"GET",dataType:"json",success:O,error:N})}function h(O,P,M){function N(Q){P(true,Q)}n.ajax({url:n.perc_paths.TEMPLATE_LOAD_METADATA+"/"+O,type:"GET",dataType:"json",success:N,error:M})}function v(M,N){n.ajax({url:n.perc_paths.TEMPLATE_SAVE_METADATA+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(M),success:function(P,Q){var O=[P,Q];N(true,O)},error:function(Q,R,O){var P=[Q,R,O];N(false,P)}})}function J(O,M,Q){var N=n.perc_paths.TEMPLATE_EXPORT+"/"+O+"/"+M+".xml";var P=function(R,S){if(R==n.PercServiceUtils.STATUS_ERROR){Q(false,[S.request,S.textstatus,S.error])}else{Q(true,S.data)}};n.PercServiceUtils.makeRequest(N,n.PercServiceUtils.TYPE_GET,true,P)}function A(N,O){var M=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_GET_PROPERTIES+"/"+N,n.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==n.PercServiceUtils.STATUS_SUCCESS){O(n.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=n.PercServiceUtils.extractDefaultErrorMessage(P.request);O(n.PercServiceUtils.STATUS_ERROR,R)}})}function w(N,P){var M=n.perc_paths.UPDATE_INSPECTED_ELEMENT;var O=function(Q,R){if(Q==n.PercServiceUtils.STATUS_ERROR){P(false,[R.request,R.textstatus,R.error])}else{P(true,R.data)}};n.PercServiceUtils.makeJsonRequest(M,n.PercServiceUtils.TYPE_POST,true,O,N)}function G(N,P){var M=n.perc_paths.VIEW_IMPORT_LOG+"?templateId="+N+"&exists=true";var O=function(Q,R){P(Q,R)};n.PercServiceUtils.makeJsonRequest(M,n.PercServiceUtils.TYPE_GET,true,O)}function q(O,N,P){var M={SiteTemplates:{importTemplate:[{url:O,siteIds:[N]}]}};n.ajaxSetup({timeout:600000});n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_CREATE_FROM_URL,n.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==n.PercServiceUtils.STATUS_SUCCESS){P(n.PercServiceUtils.STATUS_SUCCESS,Q.data.TemplateSummary)}else{var S=n.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(n.PercServiceUtils.STATUS_ERROR,S)}},M)}function y(O,N,Q){var M={SiteTemplates:{importTemplate:[{url:O,siteIds:[N]}]}};n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_CREATE_FROM_URL_ASYNC,n.PercServiceUtils.TYPE_POST,false,function P(S,R){if(S==n.PercServiceUtils.STATUS_SUCCESS){Q(n.PercServiceUtils.STATUS_SUCCESS,R.data)}else{defaultMsg="There was an unexpected error during the import process.";Q(n.PercServiceUtils.STATUS_ERROR,defaultMsg)}},M)}function L(M,O){n.PercServiceUtils.makeJsonRequest(n.perc_paths.JOB_STATUS+"/"+M,n.PercServiceUtils.TYPE_GET,false,function N(Q,P){var S,R=n.PercServiceUtils.STATUS_SUCCESS;if(Q==n.PercServiceUtils.STATUS_SUCCESS){S=P.data.asyncJobStatus}else{R=n.PercServiceUtils.STATUS_ERROR;S="There was an unexpected error during the import process."}O(R,S)})}function H(M,O){n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_CREATE_FROM_URL_RESULT+"/"+M,n.PercServiceUtils.TYPE_GET,false,function N(Q,P){var S,R=n.PercServiceUtils.STATUS_SUCCESS;if(Q==n.PercServiceUtils.STATUS_SUCCESS){S=P.data.TemplateSummary}else{R=n.PercServiceUtils.STATUS_ERROR;S="There was an unexpected error during the import process."}O(R,S)})}function E(N,O,P){var M={PageToTemplatePair:{pageId:N,siteId:O}};n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_CREATE_FROM_PAGE,n.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==n.PercServiceUtils.STATUS_SUCCESS){P(n.PercServiceUtils.STATUS_SUCCESS,Q.data.Template)}else{var S="There was an error creating a template from the selected page";P(n.PercServiceUtils.STATUS_ERROR,S)}},M)}function d(M,N){n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_MIGRATE_CONTENT,n.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==n.PercServiceUtils.STATUS_SUCCESS){N(n.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q="There was an error migrating content.";N(n.PercServiceUtils.STATUS_ERROR,Q)}},M)}function p(M,N,O){n.PercServiceUtils.makeJsonRequest(n.perc_paths.TEMPLATE_MIGRATE_CONTENT+"/"+M+"/"+N,n.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==n.PercServiceUtils.STATUS_SUCCESS){O(n.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R="Error";O(n.PercServiceUtils.STATUS_ERROR,R)}})}})(jQuery);(function(v){v.PercPublisherService=function(){return{publishSite:q,getJobStatus:e,getPublishingLogs:b,getPublishingLogDetails:h,purgeJob:d,getSitePublishProperties:n,updateSitePublishProperties:x,getServersList:p,getServerProperties:A,createUpdateSiteServer:D,getAvailableDrivers:C,deleteSiteServer:y,stopPubJob:f,getLocalFolderPath:z,getIncrementalItems:B,incrementalPublishSite:w,PUBLISHER_JOB_STATUS_FORBIDDEN:"FORBIDDEN",PUBLISHER_JOB_STATUS_BADCONFIG:"BADCONFIG"}};function q(F,I,H){var E=v.perc_paths.SITE_PUBLISH+"/"+F+"/"+I;var G=function(J,K){if(J==v.PercServiceUtils.STATUS_ERROR){H(false,[K.request,K.textstatus,K.error])}else{H(true,[K.data,K.textstatus])}};v.PercServiceUtils.makeRequest(E,v.PercServiceUtils.TYPE_GET,false,G)}function e(F,H){var E=v.perc_paths.PUBLISH_CURRENT_STATUS+"/"+F;var G=function(I,J){if(I==v.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,[J.data,J.textstatus])}};v.PercServiceUtils.makeJsonRequest(E,v.PercServiceUtils.TYPE_GET,false,G,"")}function b(F,H){var E=v.perc_paths.PUBLISH_LOGS+"/";var G=function(I,J){if(I==v.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,[J.data,J.textstatus])}};v.PercServiceUtils.makeJsonRequest(E,v.PercServiceUtils.TYPE_POST,false,G,F)}function n(F,G){var E=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_GET_PUBLISH_PROPERTIES+"/"+F,v.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==v.PercServiceUtils.STATUS_SUCCESS){G(v.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=v.PercServiceUtils.extractDefaultErrorMessage(H.request);G(v.PercServiceUtils.STATUS_ERROR,J)}})}function x(F,G){var E=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_UPDATE_PUBLISH_PROPERTIES,v.PercServiceUtils.TYPE_POST,false,function(I,H){if(I==v.PercServiceUtils.STATUS_SUCCESS){G(v.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=v.PercServiceUtils.extractDefaultErrorMessage(H.request);G(v.PercServiceUtils.STATUS_ERROR,J)}},F)}function h(F,I){var E=v.perc_paths.PUBLISH_LOGS_DETAILS+"/";var G={SitePublishLogDetailsRequest:{jobid:F}};var H=function(J,K){if(J==v.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,[K.data,K.textstatus])}};v.PercServiceUtils.makeJsonRequest(E,v.PercServiceUtils.TYPE_POST,false,H,G)}function d(G,K){var E=v.perc_paths.PUBLISH_PURGE+"/";var F="text";var J="application/json";var H={SitePublishPurgeRequest:{jobids:[G]}};var I=function(L,M){if(L==v.PercServiceUtils.STATUS_ERROR){K(false,[M.request,M.textstatus,M.error])}else{K(true,[M.data,M.textstatus])}};v.PercServiceUtils.makeRequest(E,v.PercServiceUtils.TYPE_POST,false,I,H,J,F)}function p(F,H){var E=v.perc_paths.SERVER_DETAILS+F;var G=function(I,J){if(I==v.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,[J.data,J.textstatus])}};v.PercServiceUtils.makeRequest(E,v.PercServiceUtils.TYPE_GET,false,G)}function A(G,E,I){var F=v.perc_paths.SERVER_DETAILS+G+"/"+E;var H=function(J,K){if(J==v.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{var L=K.data;I(true,[L,K.textstatus])}};v.PercServiceUtils.makeJsonRequest(F,v.PercServiceUtils.TYPE_GET,false,H)}function D(G,F,J,I){var E=v.perc_paths.SERVER_DETAILS+G+"/"+F;var H=function(K,L){if(K==v.PercServiceUtils.STATUS_ERROR){I(false,L)}else{I(true,[L.data,L.textstatus])}};if(J.serverInfo.serverId==null||J.serverInfo.serverId==""||J.serverInfo.serverId=="undefined"){v.PercServiceUtils.makeJsonRequest(E,v.PercServiceUtils.TYPE_POST,false,H,J)}else{v.PercServiceUtils.makeJsonRequest(E,v.PercServiceUtils.TYPE_PUT,false,H,J)}}function y(G,E,I){var F=v.perc_paths.SERVER_DETAILS+G+"/"+E;var H=function(J,K){if(J==v.PercServiceUtils.STATUS_ERROR){var L=v.PercServiceUtils.extractDefaultErrorMessage(K.request);I(false,L)}else{I(true,[K.data,K.textstatus])}};v.PercServiceUtils.makeRequest(F,v.PercServiceUtils.TYPE_DELETE,false,H)}function C(F){serviceUrl=v.perc_paths.SERVER_DETAILS+"availableDrivers";var E=function(G,H){if(G==v.PercServiceUtils.STATUS_ERROR){F(false,[H.request,H.textstatus,H.error])}else{F(true,[H.data,H.textstatus])}};v.PercServiceUtils.makeRequest(serviceUrl,v.PercServiceUtils.TYPE_GET,false,E)}function f(E,G){serviceUrl=v.perc_paths.STOP_PUB_SERVER+E;var F=function(H,I){if(H==v.PercServiceUtils.STATUS_ERROR){G(false,[I.request,I.textstatus,I.error])}else{G(true,[I.data,I.textstatus])}};v.PercServiceUtils.makeJsonRequest(serviceUrl,v.PercServiceUtils.TYPE_POST,false,F)}function z(F,E,H){serviceUrl=v.perc_paths.DEFAULT_PUB_PATH+F+"/File/Local/"+E.toUpperCase();var G=function(I,J){if(I==v.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,[J.data,J.textstatus])}};v.PercServiceUtils.makeRequest(serviceUrl,v.PercServiceUtils.TYPE_GET,false,G)}function B(G,J,F,E,I){serviceUrl=v.perc_paths.INCREMENTAL_LIST+G+"/"+J+"?startIndex="+F+"&pageSize="+E;var H=function(K,L){if(K==v.PercServiceUtils.STATUS_ERROR){I(false,v.PercServiceUtils.extractDefaultErrorMessage(L.request))}else{I(true,L.data)}};v.PercServiceUtils.makeJsonRequest(serviceUrl,v.PercServiceUtils.TYPE_GET,false,H)}function w(F,I,H){var E=v.perc_paths.INCREMENTAL_PUBLISH+F+"/"+I;var G=function(J,K){if(J==v.PercServiceUtils.STATUS_ERROR){H(false,v.PercServiceUtils.extractDefaultErrorMessage(K.request))}else{H(true,[K.data,K.textstatus])}};v.PercServiceUtils.makeRequest(E,v.PercServiceUtils.TYPE_GET,false,G)}})(jQuery);(function(I){I.PercSiteTemplatesController=function(Z){return{getTemplates:n,getTemplateById:V,getSites:Y,getAssignedSitesByTemplate:P,saveTemplateChanges:M,isDirty:O,load:R,clearChanges:f,renameTemplate:W,getAllTemplates:b,addTemplate:E,getBaseTemplates:F,getTemplatesForSite:G,assignTemplateToSite:N,unassignTemplateFromSite:J,copyTemplate:y,getSitesWithTemplates:X,deleteTemplate:Q,loadTemplateMetadata:e,saveTemplateMetadata:w,createTemplateFromUrl:K}};var C=new Object();var p="perc-pseudo-temp-";var q=0;var A=null;var S=false;var d=I.PercTemplateService();var B=null;var H=null;var z=null;function X(){sites=new Array();for(t in C.templates){assignedSites=C.templates[t].getAssignedSites();for(s in assignedSites){contains=false;for(ss in sites){if(assignedSites[s]==sites[ss]){contains=true}}if(!contains){sites.push(assignedSites[s])}}}return sites}function b(){return n("all")}function E(Z){C.templates[Z.getTemplateId()]=Z}function F(){return n("base")}function G(Z){return n("site",Z)}function V(Z){return C.templates[Z]}function N(Z,aa){Z.assignToSite(aa);Z.setPersisted(false)}function J(Z,aa){Z.unassignFromSite(aa);Z.setPersisted(false)}function y(ab,ac){ab=ab.replace("perc-template-","");var ad=this.getTemplateById(ab);var aa=ad.clone();aa.setSourceId(ad.getTemplateId());aa.setTemplateId(h());var Z=ad.getTemplateName().replace("perc.base.","");Z=Z.replace("perc.resp.","");aa.setTemplateName(D(Z,ac));if(ac!=null){aa.setAssignedSites(null);aa.assignToSite(ac)}E(aa);return aa}function Q(aa,ad){var Z=this;var ac=parseInt(aa.charAt(0));if(isNaN(ac)||ac==0){delete (C.templates[aa]);ad()}else{var ab=V(aa);d.deleteTemplate(aa,function(ag,ae){if(ag){delete (C.templates[aa]);ad(true)}else{var af=I.PercServiceUtils.extractDefaultErrorMessage(ae[0]);I.perc_utils.alert_dialog({title:"Error",content:af});ad(false)}})}}function e(aa,Z){function ab(ad,ac){Z(ac)}d.loadTemplateMetadata(aa,ab)}function w(aa,Z){d.saveTemplateMetadata(aa,Z)}function n(ab,Z){var aa=null;if(ab=="all"){return T(C.templates,function(ac){return !ac.isBaseTemplate()})}else{if(ab=="base"){return T(C.templates,function(ac){return ac.isBaseTemplate()})}else{if(ab=="other"){return T(C.templates,function(ac){return ac.isOrphan()})}else{if(ab=="site"){return T(C.templates,function(ac){return ac.containsSite(Z)})}else{if(ab=="dirty"){return T(C.templates,function(ac){return !ac.isPersisted()})}}}}}}function Y(Z,aa){if(Z){C.sites=null}if(C.sites!=null&&C.sites!="undefined"){aa(I.merge([],C.sites));return}I.PercServiceUtils.makeJsonRequest(I.perc_paths.SITES_ALL+"/",I.PercServiceUtils.TYPE_GET,false,function(ac,ab){if(ac==I.PercServiceUtils.STATUS_SUCCESS){var ag=ab.data.SiteSummary;var af=new Array();for(i=0;i<ag.length;i++){var ae=ag[i];af.push(ae.name)}C.sites=I.merge([],af);aa(af)}else{var ad=I.PercServiceUtils.extractDefaultErrorMessage(ab.request);var ah="Unable to get sites. Error "+ad;I.perc_utils.alert_dialog({title:"Error",content:ah})}},null,null)}function P(aa){var Z=_getAssignedTemplateById(aa);if(Z==null){return new Array()}var ab=Z.getAssignedSites();if(ab==null||ab=="undefined"){return new Array()}return ab}function M(aa){var ad={};var ab="success";var ae=null;ad.SiteTemplates={};var ag=[];var Z=n("dirty");if(Z.length==0){aa(ab);return}var af=new Array();var ah=new Array();for(var ac=0;ac<Z.length;ac++){var ai=Z[ac];if(L(ai)){ag.push(ai.getTemplateId());ah.push({sourceTemplateId:ai.getSourceId(),name:ai.getTemplateName(),siteIds:ai.getAssignedSites()})}else{af.push({templateId:ai.getTemplateId(),name:ai.getTemplateName(),siteIds:ai.getAssignedSites()})}}if(af.length>0){ad.SiteTemplates.assignTemplates=af}if(ah.length>0){ad.SiteTemplates.createTemplates=ah}d.saveTemplates(ad,function(am,al){if(am){var aj=al[1];I.each(ag,function(){delete (C.templates[this])});v(al[0].TemplateSummary,function(){aa(aj)})}else{var ak=al[2];aa("Unable to create or assign templates to sites.\nError: ",ak)}})}function O(){return n("dirty").length>0}var U=[];function R(ac,ab,Z){if(I.inArray(ac,U)==-1){U.push(ac)}if(ab===true){C.templates=null}if(C.templates!=null&&Z===""){return}if(C.templates==null){C.templates=new Array()}var aa;if((aa=I.PercNavigationManager.getSiteName())!=null&&Z==null){aa="/"+aa}else{if(Z!=null){aa="/"+Z}else{aa="/unknown"}}I.PercServiceUtils.makeJsonRequest(I.perc_paths.TEMPLATES_ALL+aa,I.PercServiceUtils.TYPE_GET,false,function(ad,ae){if(ad==I.PercServiceUtils.STATUS_SUCCESS){var ag=ae.data.TemplateSummary;v(ag,function(){for(var ai=0;ai<U.length;ai++){U[ai]()}})}else{var af=I.PercServiceUtils.extractDefaultErrorMessage(result.request);var ah="Unable to load templates.\nError: "+af;I.perc_utils.alert_dialog({title:"Error",content:ah})}},null,null)}function v(aa,ae){for(var ab=0;ab<aa.length;ab++){var ac=aa[ab];var ad=ac.readOnly==true;var Z=new I.Perc_Template_Summary(null,ac.id,ac.name);Z.setImageUrl(ac.imageThumbPath);Z.setPersisted(true);Z.setBaseTemplate(ad);Z.setContentMigrationVersion(ac.contentMigrationVersion);if(!ad){x(ac.id,function(af){Z.setAssignedSites(af)})}C.templates[ac.id]=Z}ae()}function f(){}function W(ac,ab){if(ab==""||ab==null){var af="Template names can not be blank.";I.perc_utils.alert_dialog({title:"Error",content:af});return}var Z=I.PercNavigationManager.getSiteName();var ae=ab.toLowerCase();for(tempId in C.templates){var ad=C.templates[tempId];if(ad.containsSite(Z)&&ae==ad.getTemplateNameLowerCase()){var af="Template name '"+ab+"' is already in use in the current site.\nPlease use a different name for the template.\nNote that template names are case insensitive.";return af}}var aa=C.templates[ac];aa.setTemplateName(ab);aa.setPersisted(false);return null}function h(){return p+(q++)}function L(Z){var aa=Z.getTemplateId();return aa.substr(0,p.length)===p}function D(ah,Z){var af=n("site",Z);var ad=n("dirty");var ac=af.concat(ad);var ag=2;var ai=true;var aa=ah.indexOf("-Copy");if(aa!=-1){ah=ah.substring(0,aa)}var ab=ah+"-Copy";do{ai=true;for(var ae=0;ae<ac.length;ae++){if(ac[ae].templateName==ab){ab=ah+"-Copy("+ag+")";ag++;ai=false;break}}}while(!ai);return ab}function x(Z,aa){I.PercServiceUtils.makeJsonRequest(I.perc_paths.SITES_BY_TEMPLATE+"/"+Z,I.PercServiceUtils.TYPE_GET,true,function(ac,ab){if(ac==I.PercServiceUtils.STATUS_SUCCESS){var ag=ab.data.SiteSummary;var af=new Array();for(i=0;i<ag.length;i++){var ae=ag[i];af.push(ae.name)}aa(af)}else{var ad=I.PercServiceUtils.extractDefaultErrorMessage(ab.request);var ah="Unable to load sites for template "+Z+"\nError: "+ad;I.perc_utils.alert_dialog({title:"Error",content:ah})}},null,null)}function T(aa,ad,Z){var ab=[];for(var ac in aa){if(!Z!=!ad(aa[ac])){ab.push(aa[ac])}}return ab}function K(aa,ae){var ab=I.PercNavigationManager.getSiteName();var ac={view:I.Percussion.getCurrentTemplatesView(),tabId:"perc-tab-layout"};function Z(af,ag){if(af!=I.PercServiceUtils.STATUS_SUCCESS){if(ae!==undefined){ae(ag)}return}ac.templateName=ag.name;ac.templateId=ag.id;I.PercPageService.getPagesWithTemplate(ag.id,{maxResults:1},ad,function(ah,ai){ae(ai)})}function ad(ag,ah){var af=$j.deparam.querystring();ac.pageId=ah.firstItemId;$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,af.site,null,null,null,af.path,null,ac)}I.PercImportProgressDialog({backgroundRefreshCallback:function(){R(function af(){I("#perc-assigned-templates").template_selected("refresh")},true)},onSuccessCallback:function(af){Z("success",af)},startProgressCallback:function(af){I.PercTemplateService().createTemplateFromUrlAsync(aa,ab,function(ah,ag){af(ah,ag)})},pollingProgressCallback:I.PercTemplateService().createTemplateFromUrlStatus,importResultCallback:I.PercTemplateService().createTemplateFromUrlResult})}})(jQuery);(function(b){b.widget("ui.template_library",{controller:null,templates:null,_init:function(){this.controller=b.PercSiteTemplatesController(false);var d=this;b("#perc-templates-filter").change(function(){d._loadTemplates()});b.PercBlockUI();d.controller.getSites(false,function(e){d._updateTemplatesFilter(e);d._loadTemplates();b.unblockUI()})},_loadTemplates:function(){var e=this;var q=b("#perc-templates-filter :selected").val();var p=e.controller.getBaseTemplates();if(q===""||q==="base"){e.templates=jQuery.grep(p,function(w,v){return(w.getTemplateName().indexOf("perc.base.")==0)});d(e)}else{if(q==="resp"){e.templates=jQuery.grep(p,function(w,v){return(w.getTemplateName().indexOf("perc.resp.")==0)});d(e)}else{n(q)}}function n(v){if(b.PercSiteTemplatesController(false).getTemplates("site",q)!=""){e.templates=b.PercSiteTemplatesController(false).getTemplates("site",q);d(e)}else{b.when(h(q)).then(function(w){d(e)},function(w){console.log(w+", sites not yet loaded.")},function(w){b("body").append(w)})}}function h(w){var v=b.Deferred();b.PercSiteTemplatesController(false).load(function(){e.templates=b.PercSiteTemplatesController(false).getTemplates("site",q);v.resolve()},false,w);return v.promise()}function d(x){x.templates.sort(function(B,D){var C=String(B.getTemplateName()).toUpperCase();var A=String(D.getTemplateName()).toUpperCase();if(C>A){return 1}if(C<A){return -1}return 0});x.element.html("");if(!x.templates||x.templates.length===0){return}x.element.append("<table ><tr>\n");global_templates=x.templates;var z="";var v=x.templates.length;for(var w=0;w<v;w++){template=x.templates[w];lastTemp=template;z+='<td><div percBaseTemplateName="'+template.getTemplateName()+'" id="perc-template-'+template.getTemplateId()+'" class="template" style="display:table-cell; ">\n';z+='<img style="border:1px solid #E6E6E9" src="'+template.getImageUrl()+'" class="perc-template-thumbnail"/>\n';var y=template.getTemplateName().replace("perc.base.","");y=y.replace("perc.resp.","");z+='<span title="'+y+'">';z+=b.PercTruncateText(y,22)+"</span>\n";z+="</div></td>\n"}x.element.find("tr").append(z);f()}function f(){var v=b(".template").click("singleclick",function(){b("#perc-template-lib .perc-selected").removeClass("perc-selected");b(this).addClass("perc-selected")});b(v[0]).addClass("perc-selected")}},_updateTemplatesFilter:function(e){b("#perc-templates-filter").html('<option value="base">Base</option><option value="resp">Responsive</option>');if(e){for(var d=0;d<e.length;d++){b("#perc-templates-filter").append('<option value="'+e[d]+'">'+e[d]+"</option>")}}},destroy:function(){b.widget.prototype.apply(this,arguments)}});b.extend(b.ui.template_library,{getter:"value length",defaults:{option1:"defaultValue",dummyvalue:"dummyvalue"}})})(jQuery);(function(d){d.PercAddTemplateDialog=function b(x){var w={IDS:{MAIN_DIALOG:"perc_add_template_dialog",MAIN_DIALOG_SAVE_BUTTON:"perc_add_template_dialog_save",MAIN_DIALOG_CANCEL_BUTTON:"perc_add_template_dialog_cancel",CREATE_FROM_URL_RADIO:"perc_add_template_dialog_from_url"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.AddTemplateDialog.title@Add Template"),SELECT_SITE_ERROR_TEXT:I18N.message("perc.ui.AddTemplateDialog.text@Please select a site first.")}};var E={Save:{id:w.IDS.MAIN_DIALOG_SAVE_BUTTON,click:v},Cancel:{id:w.IDS.MAIN_DIALOG_CANCEL_BUTTON,click:function(){y.remove()}}};var h={id:w.IDS.MAIN_DIALOG,title:w.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:false,width:660,height:"auto",percButtons:E};var B="";var y;var p;var D=function(){};var q;function f(F){if(F!==undefined&&typeof(F)==="function"){D=F}B+="<div>";B+='<p class="hint">Select an existing page to begin your template or choose a Percussion template.</p><br/>';B+='<form action="">';B+='<fieldset class="perc_url_field">';B+='<input class="perc_dialog_input radio-left" type="radio" name="template_from" id="perc_add_template_dialog_from_url" value="from_url" checked="checked">';B+='<label class="perc_dialog_label" for="perc_add_template_dialog_from_url">Enter page URL from existing site:</label><br>';B+='<input class="perc_dialog_input perc_dialog_field" id="url" name="url" maxlength="2048" type="text">';B+="</fieldset>";B+='<fieldset class="perc_percussion_template_field">';B+='<input class="perc_dialog_input radio-left" type="radio" name="template_from" id="perc_add_template_dialog_from_percussion_templates" value="from_percussion_templates">';B+='<label class="perc_dialog_label" for="perc_add_template_dialog_from_percussion_templates">Percussion Templates</label>';B+='<div class="auto-disable">';B+='<select id="perc-templates-filter" name="perc-templates-filter"><option value="base">Base</option><option value="resp">Responsive</option></select>';B+="</div>";B+='<div id="perc-template-lib" class="auto-disable">';B+='<div class="perc-select" id="perc_templates_filter_block"></div>';B+="</div>";B+="</fieldset>";B+="</form>";B+="</div>";y=d(B).perc_dialog(h);y.find("#perc-template-lib").template_library();A()}function A(){function G(){var J=y.find('input[name="url"]');var K={url:{required:"input[type=radio]#perc_add_template_dialog_from_url:checked",maxlength:2000,noBinary:"noBinary"}};var I={url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."}};p=y.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:K,messages:I})}function F(){y.find("input[type=radio]").change(function(I){var J=this;y.find("fieldset").each(function(){var K=d(this);if(K.find(J).length===0){K.trigger("perc-add-template-dialog-disable-fieldset")}else{K.trigger("perc-add-template-dialog-enable-fieldset")}});p.form()})}function H(){y.find("fieldset.perc_url_field").bind("perc-add-template-dialog-disable-fieldset",function(I){d(this).find('input[name="url"]').attr("readonly","readonly").attr("disabled","true")}).bind("perc-add-template-dialog-enable-fieldset",function(I){d(this).find('input[name="url"]').removeAttr("readonly").removeAttr("disabled")});y.find("fieldset.perc_percussion_template_field").bind("perc-add-template-dialog-disable-fieldset",function(I){d(this).addClass("disabled")}).bind("perc-add-template-dialog-enable-fieldset",function(I){d(this).removeClass("disabled")})}G();F();H();y.find("fieldset.perc_percussion_template_field").trigger("perc-add-template-dialog-disable-fieldset")}function C(G){var F=G.next();if(F.find(".perc_field_error").length>0){G.removeClass("perc_field_error");F.remove()}}function v(){if(p.form()){d("#perc_add_template_dialog .ui-icon-closethick").click();z()}}function z(){var G=d.PercNavigationManager.getSiteName();function H(I){d.unblockUI();if(!I){perc_utils.alert_dialog({title:"Error",content:result})}D(q);y.remove()}if(G===""){alert(w.TEXT.SELECT_SITE_ERROR_TEXT);return}var F=y.find("input[type=radio]").filter(":checked");if(F.attr("id")==w.IDS.CREATE_FROM_URL_RADIO){e()}else{d.PercBlockUI();n(G,H)}}function n(G,I){var H=d("#perc-template-lib .perc-selected").attr("id");var F=d.PercSiteTemplatesController(false);q=F.copyTemplate(H,G).getTemplateName();F.saveTemplateChanges(I)}function e(){var G=d.trim(y.find('input[name="url"]').val());if(!(/^(https?):\/\//i).test(G)){G="http://"+G}d.PercSiteTemplatesController(false).createTemplateFromUrl(G,function F(H){d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:H})})}f(x)}})(jQuery);(function(n){n.widget("ui.template_selected",{controller:null,templates:null,siteFilterSelection:"all",DEFAULT_ITEMS:5,PAGE_GROUP_SIZE:5,firstPagesArray:null,_init:function(){var q=this;q.firstPagesArray=new Object();this.controller=n.PercSiteTemplatesController(false);this.controller.load(function(){q._afterLoad()});n("#perc-template-name-button").click(function(){q._renameTemplate()})},_afterLoad:function(){var q=this;this._setupEvents();this.controller.getSites(false,function(w){q._setSites(w);var x;x=$j.PercNavigationManager.getMemento();if(x.view!=null){n.Percussion.setCurrentTemplatesView(x.view)}if(n("#perc-assigned-templates").data("scrollable")!=null){n("#perc-assigned-templates").data("scrollable").updateItemWrap()}if(q.selectedTemplateName!=null&&q.selectedTemplateName!=""){var v=n("#perc-assigned-templates .perc-template-item .perc-template-label[title='"+q.selectedTemplateName+"']").parent().attr("id");q.selectedTemplateName=null;q._selectTemplate(v);q.autoscrollToSelected()}else{if(n("#perc-assigned-templates .perc-selected").length!=0){q._selectTemplate(n("#perc-assigned-templates .perc-selected").attr("id"));q.autoscrollToSelected()}else{if(gSelectTemp!=null&&gSelectTemp!=""){q._selectTemplate(gSelectTemp);q.autoscrollToSelected()}else{if(x.templateId){q._selectTemplate(x.templateId);q.autoscrollToSelected()}else{if(n("#perc-assigned-templates").data("scrollable")!=null){n("#perc-assigned-templates").data("scrollable").begin()}}}}}})},autoscrollToSelected:function(){this.updateTemplatesPagingSize();if(n("#perc-assigned-templates .perc-selected").length!=0){if(n.Percussion.getCurrentTemplatesView()==n.Percussion.VIEW_MODE_CATALOG){var v=n("#perc-assigned-templates .perc-selected");var q=n("div#"+v.attr("id")).data("positionInCarousel");n("#perc-assigned-templates").data("scrollable").seekTo(q);n(".perc-templates-layout").animate({scrollTop:0},500)}else{var v=n("#perc-assigned-templates .perc-selected");var w=v.offset().top;n(".perc-templates-layout").animate({scrollTop:w-v.height()},500)}}},refresh:function(){this._updateSiteTemplates()},_setupEvents:function(){var q=this;n("#perc-site-filter").change(function(v,w){q._updateSiteTemplates()});n("#perc-activated-templates-scrollable").bind("autoscroll",function(){q.autoscrollToSelected()})},_setSites:function(q){this.sites=q;this._updateSiteTemplates()},updateTemplatesPagingSize:function(){var q=parseInt((n("#perc-assigned-templates-container").width())/268);if(q<1){q=1}if(n("#perc-assigned-templates .perc-template-item").length>q){n("#perc-assigned-templates").data("scrollable").getConf().size=q}},_updateSiteTemplates:function(){var M=this;var W=M.PAGE_GROUP_SIZE;var K=n.PercNavigationManager.getSiteName();if(K==""){}else{this.templates=this.controller.getTemplates("site",K);this.templates.sort(function(Y,aa){var Z=String(Y.getTemplateName()).toUpperCase();var X=String(aa.getTemplateName()).toUpperCase();if(Z>X){return 1}if(Z<X){return -1}return 0})}var w=n("#perc-assigned-templates");w.html("");var R;R=n('<div class="perc-items" />');w.append(R);buffer="";w.append(buffer);w.css("width","auto");var D=this.templates.length;if(D==0){R.append('<div class="perc-template-item-empty" />');n(".perc-items").width("100%").css("text-align","center")}var y="";if(n.Percussion.getCurrentTemplatesView()==n.Percussion.VIEW_MODE_THUMBNAILS){y=' style="display: none"';n(".perc-items").width("auto")}for(var I=0;I<D;I++){var V=this.templates[I];var G=V.getTemplateName();var Q="";if(this.selectedTemplateName==V.getTemplateName()){Q="class='perc-selected'"}buffer='<div class="perc-template-item" id="'+V.getTemplateId()+'" '+Q+">";buffer+='    <div class="perc-apply" id="'+V.getTemplateId()+'-apply" title="Match Content to Template Layout"></div>';buffer+='    <div class="perc-edit" id="'+V.getTemplateId()+'-edit" title="Edit template"></div>';buffer+='    <div class="perc-delete" id="'+V.getTemplateId()+'-delete" title="Delete template"></div>';buffer+='    <div class="perc-template-label" title="'+G+'" alt="'+G+'" id="'+V.getTemplateId()+'-name">'+G+"</div>";buffer+='    <div percBaseTemplateName="'+V.getBaseTemplateName()+'" id="'+V.getTemplateId()+'id" class="perc-template-thumbnail-container perc-template-background">';buffer+='         <img height = "122px" width="174px" src = "'+V.getImageUrl()+'" />';buffer+="    </div>";buffer+=' <div class="perc-template-paging-container"'+y+">";buffer+='    <ul class="perc-template-pages" templateVersion ="'+V.getContentMigrationVersion()+'"templateId="'+V.getTemplateId()+'">';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+="    </ul>";buffer+='    <form action="#" class="perc-template-pages-controls">';buffer+='        <div style="right:56px;" class="previous">Prev</div>';buffer+='        <input type="text" class="perc-jump" name="perc-template-pages-controls-jump" autocomplete="off" />';buffer+='        <div style="right:0px;" class="next">Next</div>';buffer+="    </form>";buffer+='    <div class="perc-template-showing" style="width: 100px; margin: 6px 0pt 0px 24px;">';buffer+='        Items: <span class="perc-template-page-group-range">0-0</span>';buffer+="    </div>";buffer+='    <div class="perc-template-showing" style="width: 100px; margin: 8px 0pt 13px 24px;">';buffer+='        Total Items: <span class="perc-template-total">0</span>';buffer+="    </div>";buffer+="    </div>";buffer+="</div>";R.append(buffer);R.find("div#"+V.getTemplateId()).data("positionInCarousel",I);n("#"+V.getTemplateId()+" li").click(function(X){if(n(this).attr("title")==null||n(this).attr("title")==""){return}n(".perc-template-item .perc-template-paging-container li").removeClass("perc-template-page-highlighted-color");n(this).addClass("perc-template-page-highlighted-color");M.selectedPageId=n(this).data("pageInfo").id;M.selectedPageIdOriginalTemplateId=n(this).parents(".perc-template-item").attr("id")});n("#"+V.getTemplateId()+"-name").editable(function(Z,Y){var X=this.id.substr(0,this.id.length-5);Z=n.perc_textFilters.URL(Z);var aa=null;if(n(this).attr("title")!=Z){aa=M._renameTemplate(X,Z)}if(aa!=null){n.perc_utils.alert_dialog({title:"Error",content:aa})}return Z},{event:"dblclick",style:"padding:0px",cssclass:"perc-template-edit-label",width:"198px",height:"14px",select:true,onblur:"submit",fieldid:"perc_inline_field_edit",data:function(Y,X){return n(this).attr("title")},callback:function(){J()}})}n(".perc-template-pages").droppable({accept:".perc-imported-page, .perc-template-pages-items",activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(ac,ae){var ab=n(this).attr("templateId");var aa=n(this).find("li.perc-template-pages-items").not(".perc-require-migration").first().attr("id");var X=[];X.push(n(ae.draggable).attr("id"));var ad=n(ae.draggable).parent().attr("templateId");if(ab==ad){return}n.PercBlockUI();var Z=ad?"TEMPLATE":"UNASSIGNED";var Y={MigrateContentRestData:{siteName:n.PercNavigationManager.getSiteName(),templateId:ab,refPageId:aa,pageIds:X,sourceType:Z}};n.PercTemplateService().assignTemplateAndMigrateContent(Y,function(ag,af){if(ag){if(af.MigrateResponse.status=="ERROR"){n.perc_utils.alert_dialog({title:"Error",content:af.MigrateResponse.message})}F(ab,1);if(ae.helper.dropCallback&&n.isFunction(ae.helper.dropCallback)){ae.helper.dropCallback()}if(ad){F(ad,1)}}n.unblockUI()})}});if(n.Percussion.getCurrentTemplatesView()==n.Percussion.VIEW_MODE_CATALOG){if(n(".perc-prev-templates-carousel").length==0){var O=n('<div class="perc-prev-templates-carousel" />').append(n('<a id="perc_prev_templates_carousel_arrow" class="prevPageCarousel perc-prev-templates-carousel-arrow"></a>'));w.css("overflow","hidden");var N=n('<div class="perc-next-templates-carousel" />').append(n('<a id="perc_next_templates_carousel_arrow" class="nextPageCarousel perc-next-templates-carousel-arrow"></a>'));w.parents("#perc-activated-templates-scrollable").prepend(N);w.parents("#perc-activated-templates-scrollable").prepend(O)}w.addClass("perc-scrollable-templates");var z=w.scrollable({items:".perc-items",size:M.DEFAULT_ITEMS,globalNav:true,prev:".prevCarousel",next:".nextCarousel",prevPage:".prevPageCarousel",nextPage:".nextPageCarousel",keyboard:false,clickable:false});w.parents("#perc-activated-templates-scrollable").append(n('<div class="resetPaging">'));n(window).resize(function(){M.updateTemplatesPagingSize()})}else{n(".perc-template-item-middle-droppable").height(n(".perc-template-item").css("min-height"))}n(".perc-template-item").each(function(){var X=n(this).attr("id");F(X,1);n.perc_filterField(n("#"+X).find(".perc-template-pages-controls .perc-jump"),n.perc_textFilters.ONLY_DIGITS)});n("#perc-activated-templates .perc-template-pages-controls .next").click(function(){var aa=n(this).parents(".perc-template-item");var X=n(aa).attr("id");var ab=U(X);var Y=ab+W;var Z=parseInt(n(aa).find(".perc-template-total").html());if(Y<=Z){F(X,Y)}else{return false}});n(".resetPaging").click(function(Y){if(typeof Y.deletedPageId!=="undefined"&&Y.deletedPageId==M.selectedPageId){var X=M.firstPagesArray[M.selectedPageIdOriginalTemplateId];M.selectedPageId=X;n(".perc-template-pages li#"+X).addClass("perc-template-page-highlighted-color")}});n("#perc-activated-templates .perc-template-pages-controls .previous").click(function(){var Z=n(this).parents(".perc-template-item");var X=n(Z).attr("id");var aa=U(X);var Y=aa-W;if(Y>0){F(X,Y)}else{return false}});n("#perc-activated-templates .perc-template-pages-controls").submit(function(){var Z=n(this).parents(".perc-template-item").attr("id");var aa=B(Z);var Y=n(this).find(".perc-jump");if(aa==0){Y.val(1);return false}var X=Y.val();if(X!=undefined&&X!=""){A(Z,X)}else{var ac=U(Z);var ab=Math.ceil(ac/W);n(this).find(".perc-jump").val(ab)}return false});n("#perc-assigned-templates-container").on("click",".perc-apply",function(){var X=n(this).attr("id");X=X.replace("-apply","");C(X)});function C(X){n.PercBlockUI();n.PercTemplateService().applyTemplate(X,"ALL",function(Z,Y){if(Z){if(Y.MigrateResponse.status=="ERROR"){n.perc_utils.alert_dialog({title:"Error",content:Y.MigrateResponse.message})}F(X,1)}n.unblockUI()})}function F(Y,aa){var Z;var X;Z=$j.PercNavigationManager.getMemento();if(Z.templateId&&Z.pageId&&Y==Z.templateId){X=Z.pageId;Z.pageId=null}n.PercPageService.getPagesWithTemplate(Y,{startIndex:aa,pageId:X,maxResults:W},function(ad,ae){if(ad===n.PercServiceUtils.STATUS_SUCCESS){ae.childrenInPage=n.perc_utils.convertCXFArray(ae.childrenInPage);var ah=n("#"+Y+" .perc-template-pages li.perc-template-pages-items");var af=n("#"+Y+" .perc-template-pages").attr("templateVersion");ah.removeClass("perc-template-page-highlighted-color");if(ae.firstItemId!=null){M.firstPagesArray[Y]=ae.firstItemId}for(var ag=0;ag<ah.length;ag++){n(ah[ag]).html("").attr("title","").removeClass("perc-require-migration")}for(var ag=0;ag<ae.childrenInPage.length;ag++){var aj=ae.childrenInPage[ag].path.replace("//"+n.perc_paths.SITES_ROOT_NO_SLASH,"");var al=ae.childrenInPage[ag].id;var ac=ah.eq(ag);if(al==M.selectedPageId||(X&&al==X)){ac.addClass("perc-template-page-highlighted-color")}else{ac.removeClass("perc-template-page-highlighted-color")}if(M.selectedPageId==null&&X){M.selectedPageId=X;M.selectedPageIdOriginalTemplateId=Z.templateId}var ak=e(ae.childrenInPage[ag].typeProperties.entries);var ai='<span class="perc-template-pages-items-dropdown"></span>';var ab=ak.migrationEmptyWidgetFlag=="yes"?"<span><img src='../images/images/errorIcon.gif' title='Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray.'/></span>":"";ac.attr("title",aj).attr("id",al).data("pageInfo",ae.childrenInPage[ag]).html('<span class="perc-template-pages-items-thumbnail"><img src="../images/images/inspectButton.png" /></span><div class="perc-template-page-title">'+ae.childrenInPage[ag].name+"</div>"+ab+ai);ac.find(".perc-template-pages-items-thumbnail img").attr("data",JSON.stringify(ae.childrenInPage[ag]));if(ak.contentMigrationVersion!=af){ac.find(".perc-template-pages-items-thumbnail img").addClass("perc-require-migration")}ac.find(".perc-template-pages-items-dropdown").PercDropdown({percDropdownRootClass:"perc-dropdown-template-pages-items-dropdown",percDropdownOptionLabels:["","Open Page","Change Template"],percDropdownCallbacks:[function(){},v,S],percDropdownCallbackData:["",{pageId:al,templateId:Y},{pageId:al,templateId:Y}]})}H(Y,ae.childrenCount,ae.startIndex);n(".perc-template-pages-items .perc-template-pages-items-thumbnail img").PercImageTooltip()}else{n.perc_utils.alert_dialog({title:I18N.message("perc.ui.labels@Error"),content:I18N.message("perc.ui.sitetemplates.error@Get pages by template error")})}})}function S(X){var Z=X.templateId;var Y=X.pageId;n.PercChangeTemplateDialog().openDialog(Y,Z,$j.PercNavigationManager.getSiteName(),function(){window.location.reload()})}function v(X){P(X.pageId)}function H(X,Y,af){var ad=n("#"+X).find(".perc-template-total");n(ad).html(Y);var ah=n("#"+X).find(".perc-template-page-group-range");var ab=af+W-1;var aa=0;var ag=0;if(Y==0||Y==1){ah.html(Y);ag=Y}else{aa=af;ag=ab;if(Y<af){aa=0}if(ab>Y){ag=Y}ah.html(aa+"-"+ag)}var ae=Math.ceil(ag/W);if(ae<1){ae=1}var ai=n("#"+X).find(".perc-jump");ai.val(ae);if(af<=1){n("#"+X).find(".perc-template-pages-controls div.previous").removeClass("previous").addClass("previous-disabled")}else{var Z=n("#"+X).find(".perc-template-pages-controls div.previous-disabled");if(Z!=undefined){n(Z).removeClass("previous-disabled").addClass("previous")}}if(ab>=Y){n("#"+X).find(".perc-template-pages-controls div.next").removeClass("next").addClass("next-disabled")}else{var ac=n("#"+X).find(".perc-template-pages-controls div.next-disabled");if(ac!=undefined){n(ac).removeClass("next-disabled").addClass("next")}}}function A(Y,X){var aa=T(X);var Z=B(Y);if(aa<1){n(this).find(".perc-jump").val(1);F(Y,1)}else{F(Y,aa)}}function T(X){return(X*W)-W+1}function B(X){return parseInt(n("#"+X).find(".perc-template-total").html())}function U(Y){var X=n("#"+Y).find(".perc-template-page-group-range").html();var Z=parseInt(X.split("-")[0]);return Z}function E(ab){var Z=null;if(ab==M.selectedPageIdOriginalTemplateId&&n.Percussion.getCurrentTemplatesView()==n.Percussion.VIEW_MODE_CATALOG){Z=M.selectedPageId}var Y=n.Percussion.getCurrentTemplatesView();var X=$j.deparam.querystring();var aa=n("#"+ab).find(".perc-template-thumbnail-container").attr("percbasetemplatename");var ac={templateName:aa,templateId:ab,pageId:Z,view:Y,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,X.site,null,null,null,X.path,null,ac)}n.perc_filterField(n("div.perc-template-label"),n.perc_textFilters.URL);function J(){n.PercTextOverflow(n("div.perc-template-label"),202)}J();fixBottomHeight();var M=this;n(".perc-template-thumbnail-container").parent().click(function(X){if(M.selectedTemplateId==n(this).attr("id")){return}if(n(X.target).hasClass("perc-edit")){return}if((n(X.target).parent().hasClass("perc-template-pages-items")||n(X.target).hasClass("perc-template-pages-items"))&&(n(X.target).attr("title")!="")){M._selectTemplate(n(this).attr("id"),false)}else{M._selectTemplate(n(this).attr("id"),true)}});n(".perc-template-pages-items").dblclick(function(Z){var Y=n(Z.target).parents(".perc-template-item").attr("id");var X=n(Z.target).attr("id");if(X==null){X=n(Z.target).parents(".perc-template-pages-items").attr("id")}M.selectedPageIdOriginalTemplateId=Y;M.selectedPageId=X;E(Y)});function L(Y,X){n(Y).parents(".perc-template-item").find(".perc-template-thumbnail-container img").attr("src","/Rhythmyx/rx_resources/images/TemplateImages/"+n.PercNavigationManager.getSiteName()+"/"+X+"-page.jpg?nocache="+Math.random())}function x(Y){var X=n(Y).parents(".perc-template-pages-items").attr("id");P(X)}function P(X){n.PercPathService.getPathItemById(X,function(Z,ab){if(Z==n.PercServiceUtils.STATUS_SUCCESS){var Y=$j.deparam.querystring();var aa=true;ab.PathItem.path=ab.PathItem.folderPaths.replace("//","/")+"/"+ab.PathItem.name;n.PercNavigationManager.handleOpenPage(ab.PathItem,aa)}else{n.perc_utils.alert_dialog({title:"Error",content:ab});return}})}n(".perc-template-thumbnail-container").dblclick(function(){var X=n(this).parent().attr("id");E(X)});n(".perc-copy").click(function(){var X=n(this).parent().attr("id");M.controller.copyTemplate(X,null);M._updateSiteTemplates()});n(".perc-edit").click(function(){var X=n(this).parent().attr("id");if(X!=M.selectedTemplateId||typeof M.selectedPageId=="undefined"||M.selectedPageId==null||n(this).closest(".perc-template-item").find("#"+M.selectedPageId).length==0){M._selectTemplate(X,true)}E(X)});n(".perc-delete").click(function(){var Y=n(this).parent().attr("id");var X={id:"perc-template-delete-confirm",title:"Delete Template",question:"Template: "+n("#"+Y+"-name").text()+"<br/><br/>"+I18N.message("perc.ui.sitetemplates.warning@Confirm"),cancel:function(){},success:function(){n.PercBlockUI();M.controller.deleteTemplate(Y,function(Z){n.unblockUI();if(Z){M._updateSiteTemplates();M._setSelectedTemplateIndicator("");n("#perc-assigned-templates").data("scrollable").updateItemWrap();n("#perc-assigned-templates").data("scrollable").begin()}})}};n.perc_utils.confirm_dialog(X)});var q=n.cookie("templateImport");if(q==null){return""}else{jQuery("div[title ='"+q+"']").click();n.cookie("templateImport",null)}},_renameTemplate:function(q,w){var v=this.controller.renameTemplate(q,w);this._save();return v},_save:function(){n.PercBlockUI();var q=this;q.controller.saveTemplateChanges(function(w,v){n.unblockUI();if(!w){perc_utils.alert_dialog({title:"Error",content:v})}else{q._afterLoad()}})},_selectTemplate:function(w,v){n(".perc-template-item").removeClass("perc-template-page-highlighted-color").removeClass("perc-template-highlighted-color-border").removeClass("perc-selected");if(v){n(".perc-template-pages li").removeClass("perc-template-page-highlighted-color");var y=this.firstPagesArray[w];this.selectedPageId=y;this.selectedPageIdOriginalTemplateId=w;n(".perc-template-pages li#"+y).addClass("perc-template-page-highlighted-color");n(".perc-template-pages li#"+y).parents(".perc-template-item").find(".perc-template-thumbnail-container img").attr("src","/Rhythmyx/rx_resources/images/TemplateImages/"+n.PercNavigationManager.getSiteName()+"/"+y+"-page.jpg?nocache="+Math.random())}var A=n("#"+w);A.addClass("perc-selected");A.addClass("perc-template-highlighted-color-border");this._setSelectedTemplateIndicator("Selected template: "+n("#"+w+"-name").attr("title"));this.selectedTemplateId=w;var x=this.controller.getTemplateById(w);var q=x.getTemplateName();n("#perc-template-name-field").attr("value",q);gSelectTemp=w;sGalleryThemeName="";var z={templateId:w,templateName:q};this._trigger(".change",null,z)},_assignSiteToCurrentlySelectedTemplate:function(q){template=this.controller.getTemplateById(this.selectedTemplateId);if(q.checked){this.controller.assignTemplateToSite(template,q.id)}else{this.controller.unassignTemplateFromSite(template,q.id)}},_setSelectedTemplateIndicator:function(q){n("#perc_selected_template_name").text(q)},destroy:function(){n.widget.prototype.apply(this,arguments)},refresh:function(q){if(selectedTemplate!==undefined||selectedTemplate!==""){this.selectedTemplateName=q}this._afterLoad()}});function b(w){var q=this;var v="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='41px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp'></iframe></div>";if(w){v="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='83px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp?status=PERC_ERROR&message=The file you attempted to import is not a valid XML file. Choose a valid CM1 template XML file for upload'></iframe></div>"}dialog=n(v).perc_dialog({resizable:false,title:"Import Template",modal:true,closeOnEscape:true,percButtons:{Import:{click:function(){var x=n.perc_paths.TEMPLATE_IMPORT;n.PercTemplateService().getSiteProperties(n.PercNavigationManager.getSiteName(),function(z,y){if(z){x=x+"/"+y.SiteProperties.id;var A=n("#perc-import-template-frame").contents().find(".perc-template-import-field").val();if(A==""){n("#perc-import-template-frame").css("height","67px");n("#perc-import-template-frame").contents().find(".perc-import-error").show();return}n("#perc-import-template-frame").contents().find("#perc-import-template-form").attr("action",x);n("#perc-import-template-frame").contents().find("#perc-import-template-form").submit();n("#perc-import-template-frame").load(function(){p()})}})},id:"perc-template-import"},Cancel:{click:function(){dialog.remove()},id:"perc-import-dialog-cancel"}},id:"perc-import-dialog",width:490})}function p(){var q=n("#perc-import-template-frame").contents().find("body").text();if(q!="null"){dialog.remove();n.cookie("templateImport",q);location.reload()}else{dialog.remove();b(true)}}function f(){b()}function h(){n.PercAddTemplateDialog(function q(v){n("#perc-assigned-templates").template_selected("refresh",v)})}function e(v){var w=[];if(!n.isArray(v.entry)){w.push(v.entry)}else{w=v.entry}var q=[];n(w).each(function(){q[this.key]=this.value});return q}function d(v){var w=n("#perc-activated-templates").find(".perc-selected").attr("id");var q=n("#"+w).find(".perc-template-thumbnail-container").attr("percbasetemplatename");n.PercTemplateService().exportTemplate(w,q,function(y,x){if(y){}else{perc_utils.alert_dialog({title:"Error",content:x})}})}n.extend(n.ui.template_selected,{getter:"value length",defaults:{option1:"defaultValue"}})})(jQuery);(function(p){var y="";var b="";var z="PRODUCTION";p.PercEditorRenderer=function(){return{renderEditor:q,setReadOnlyProperties:e,loadLocalFolderPath:f}};p(document).ready(function(){p("#perc-servers-container").on("change","#publishType",function(){var C=p(this).val();p("#perc-editor-wrapper").html("");p("#perc-servers-container").find("span.perc_field_error").remove();h(C)});p("#perc-servers-container").on("change","#perc-driver",function(){p("#perc-servers-container").find("span.perc_field_error").remove();var C=p(this).val();if(C=="Select"){p("#perc-editor-wrapper").html("");return}p("#perc-editor-wrapper").load("../jsp/includes/serverEditors/propEditor.jsp?editorName="+C,function(){if(C=="FTP"){B();A();w()}if(C=="Local"){v()}})});p("#perc-servers-container").on("click","#perc-define-secure-ftp-input",A);p("#perc-servers-container").on("click","#perc-ftp-password-rb, #perc-ftp-private-file-key-rb",w);p("#perc-servers-container").on("click","#perc-defaultServer, #perc-ownServer",v)});function f(C){service.getLocalFolderPath(C,"PRODUCTION",function(E,D){if(E){y=D[0]}else{}});service.getLocalFolderPath(C,"STAGING",function(E,D){if(E){b=D[0]}else{}})}function q(E,C,D){z=D;p("#perc-editor-summary").html("");p("#perc-server-name-wrapper").hide();p("#perc-editor-form").load("../jsp/includes/serverEditors/serverEditor.jsp",function(){if(!(p.isEmptyObject(C))){p("#publishType").val(C.serverInfo.type);var G=x(C.serverInfo.properties);var F=G.driver;h(C.serverInfo.type);p("#perc-driver").val(F);p("#perc-editor-wrapper").load("../jsp/includes/serverEditors/propEditor.jsp?editorName="+F,function(){d(C);if(F=="FTP"){B(G.privateKey);A();w()}if(F=="Local"){v()}})}if(D=="STAGING"){p("#perc-pub-now").hide();p("#perc-pub-now-wrapper").hide();p("#perc-ignore-unmodified-assets").css("margin-left","0px")}})}function d(G){var E=p("#perc-servers-wrapper");var F=p(E.find('input[percName="isDefault"]'));E.find('input[percName="serverName"]').val(G.serverInfo.serverName);F.prop("checked",G.serverInfo.isDefault);var D=p(E.find('input[percName="ignoreUnModifiedAssets"]'));D.prop("checked",G.serverInfo.ignoreUnModifiedAssets);if(G.serverInfo.isDefault){F.attr("disabled",true)}var C=[];if(!p.isArray(G.serverInfo.properties)){C.push(G.serverInfo.properties)}else{C=G.serverInfo.properties}p.each(C,function(J,M){var I="";var N="";p.each(this,function(P,O){if(P=="key"){I=O}if(P=="value"){propertyValue=O}});var L=I;var H=E.find("input[percName="+L+"]");var K=H.attr("type");if(K=="text"||K=="password"){H.val(propertyValue)}else{if(K=="checkbox"||K=="radio"){H.prop("checked",propertyValue)}}})}function x(E){var C=[];var D=[];if(!p.isArray(E)){D.push(E)}else{D=E}p.each(D,function(G,H){var F="";var I="";p.each(this,function(K,J){if(K=="key"){F=J}if(K=="value"){propertyValue=J}C[F]=propertyValue})});return C}function e(E){var D=p("#perc-editor-prop");var C=[];if(!p.isArray(E.serverInfo.properties)){C.push(E.serverInfo.properties)}else{C=E.serverInfo.properties}p.each(C,function(H,I){var G="";var F="";p.each(this,function(K,J){if(K=="key"){G=J}if(K=="value"){F=J}});if(G=="ignoreUnModifiedAssets"){if(F==true){p("#perc-editor-prop-container").find("span[percName="+G+"]").text("Only modified assets will be published.")}else{p("#perc-editor-prop-container").find("span[percName="+G+"]").text("All assets will be published.")}}else{if(G!="driver"){D.find("span[percName="+G+"]").text(F)}}});if(E.serverInfo.isDefault){D.find("#perc-default-server").show()}}function B(C){var E=$j.PercUtilService;var D=E.getPrivateKeys(function(H,F){if(H==p.PercServiceUtils.STATUS_SUCCESS){var G=p("#perc-ftp-private-file-key");G.html("");if(F.data.PrivateKeys!=""){var I=p.perc_utils.convertCXFArray(F.data.PrivateKeys.keyNames);p.each(I,function(K,J){if(C!="undefined"&&C==J){G.append(p('<option selected="selected"></option>').val(J).html(J))}else{G.append(p("<option></option>").val(J).html(J))}});flagPrivateKeysLoaded=true}else{n()}}else{n()}})}function n(){if(p("#perc-define-secure-ftp-input").is(":checked")){p("#perc-ftp-private-file-key-rb").attr("disabled","true")}}function h(C){p("#perc-driver").val("Select").removeAttr("disabled").css("background-color","#FFFFFF");if(C=="File"){p(".file-driver, .database-driver").remove();p("#perc-driver-filter").show();p("select#perc-driver").append(p('<option  class="file-driver" name="FTP" ></option>').html("FTP")).append(p('<option  class="file-driver" name="LOCAL" ></option>').html("Local")).append(p('<option  class="file-driver" name="AMAZONS3" value="AMAZONS3"></option>').html("Amazon S3"))}else{if(C=="Database"){p(".file-driver, .database-driver").remove();p("#perc-driver-filter").show();p("select#perc-driver").append(p('<option  class="database-driver" name="MSSQL" value="MSSQL"></option>').html("MS SQL")).append(p('<option  class="database-driver" name="MYSQL" value="MySQL"></option>').html("MySQL")).append(p('<option  class="database-driver" name="ORACLE" value="Oracle"></option>').html("Oracle"));p.PercPublisherService().getAvailableDrivers(function(E,D){if(E){availabelDrivers=p.parseJSON(D[0]);p.each(availabelDrivers,function(G,F){if(!(F)){p("#perc-driver-filter").find("option[name="+G+"]").attr("disabled",true)}})}})}else{if(C=="Select"){p("#perc-driver").attr("disabled",true).css("background-color","#CCCCCC")}}}}function A(){var C=p("#perc-define-secure-ftp-input").is(":checked");if(C){p("#perc-ftp-private-file-key-rb").removeAttr("disabled");p("#perc-ftp-private-file-key-rb").attr("selected","")}else{p("#perc-ftp-private-file-key-rb, #perc-ftp-private-file-key").attr("disabled","true");p("#perc-ftp-password-rb").prop("checked",true)}w()}function w(){var C=p("#perc-ftp-password-rb").is(":checked");if(C){p("#perc-ftp-private-file-key").attr("disabled",true).val("").css("background-color","#CCCCCC");p("#perc-ftp-password").removeAttr("disabled").css("background-color","#FFFFFF")}else{p("#perc-ftp-private-file-key").removeAttr("disabled",false).css("background-color","#FFFFFF");p("#perc-ftp-password").attr("disabled",true).val("").css("background-color","#CCCCCC")}}function v(){var C=p("#perc-defaultServer").is(":checked");if(C&&z=="PRODUCTION"){p("#perc-local-own-location").hide();p("#perc-local-default-location").show().val(y)}else{if(C&&z=="STAGING"){p("#perc-local-own-location").hide();p("#perc-local-default-location").show().val(b)}else{if(p("#perc-site-id").data("secureSite")){p.perc_utils.alert_dialog({content:"Selecting your own web server (exact path), the site will not be secured",title:"Warning"})}p("#perc-local-own-location").show();p("#perc-local-default-location").hide()}}}})(jQuery);(function($){var pubStatusId=0;var prevStatusCount=-1;this.service=$j.PercPublisherService(false);this.utilService=$j.PercUtilService;var dirtyController=$.PercDirtyController;siteName=$j.PercNavigationManager.getSiteName();$j.fn.dataTableExt.afnSortData["dom-elapsed-time"]=function(oSettings,iColumn){var aData=[];$("td:eq("+iColumn+")",oSettings.oApi._fnGetTrNodes(oSettings)).each(function(){var data=$(this).text();var dataNum=new Number(data.substring(0,data.indexOf("s")));aData.push(dataNum)});return aData};milliSecondsToHHMMSS=function(t){t=t/1000;var h=Math.floor(t/3600);t%=3600;var m=Math.floor(t/60);var s=Math.floor(t%60);h=h>0?h:0;m=m>0?m:0;s=s>0?s:0;function _formatUnit(val){return(val<=9?"0":"")+val}return _formatUnit(h)+":"+_formatUnit(m)+":"+_formatUnit(s)+" s"};onDeleteToggle=function(){var disable=true;$j("#perc-publish-logs .perc-log-delete").each(function(i){if($j(this).is(":checked")){disable=false;return true}});if((!disable&&!$j("#perc-publish-log-delete").hasClass("perc-disabled"))||(disable&&$j("#perc-publish-log-delete").hasClass("perc-disabled"))){return}if(disable){disableDelete()}else{enableDelete()}};disableDelete=function(){$j("#perc-publish-log-delete").addClass("perc-disabled");$j("#perc-publish-log-delete").unbind("click")};enableDelete=function(){$j("#perc-publish-log-delete").removeClass("perc-disabled");$j("#perc-publish-log-delete").click(function(){purgeLogs()})};FoldToggle=function(self,onFold){if($j(self).hasClass("perc-opened")){$j(self).removeClass("perc-opened");$j(self).parent().find(".perc-container").removeClass("perc-visible").addClass("perc-hidden")}else{if(onFold){onFold()}$j(self).addClass("perc-opened");$j(self).parent().find(".perc-container").removeClass("perc-hidden").addClass("perc-visible")}};publishCurrentSite=function(){var siteVal=siteName;if(siteVal=="base"){$.perc_utils.alert_dialog({content:"Invalid site, please select another site.",title:"Site Publish"});$j("perc-manual-publish-widget").find("perc-foldable").click(FoldToggle(this));return true}this.service=$j.PercPublisherService(false);this.service.publishSite(siteVal,function(status,result){if(result[1]=="success"){$.perc_utils.alert_dialog({content:"Site '"+siteVal+"' has started publishing.",title:"Site Publish",id:"perc-publish-success"});var foldable=$j("#perc-publish-jobs-widget").find(".perc-foldable");if(!foldable.hasClass("perc-opened")){foldable.click()}else{startPublishCurrentStatus()}}else{$.perc_utils.alert_dialog({content:"Unable to publish the site "+siteVal,title:"Site Publish",id:"perc-publish-failure"})}})};publishCurrentStatus=function(){var siteId=$("#perc-site-id").val();this.service.getJobStatus(siteId,function(status,result){if(result[1]=="success"){var result0=eval(result[0]);renderLogs(result0.SitePublishJob)}else{$.perc_utils.alert_dialog({content:"Unable to retrieve job status",title:"Current status of Jobs"})}});function renderLogs(results){var logString="<table class='perc-table-statusofcurrentjobs' width='100%'><thead><tr><th align='left' class='perc-header-sitename'>"+I18N.message("perc.ui.publish.title@SiteName")+"</th><th align='left' class='perc-header-status'>"+I18N.message("perc.ui.publish.title@Status")+"</th><th align='left' class='perc-header-time'>"+I18N.message("perc.ui.publish.title@Time")+"</th><th align='left' class='perc-header-elapsedtime'>"+I18N.message("perc.ui.publish.title@Elapsed Time")+"</th><th align='left' class='perc-header-completed' style='background-position:left center;'>% Completed</th><th width = '60px' align='left' class='perc-header-elapsedtime'>Action</th></tr></thead><tbody>";var resLength=results.length;if(resLength<prevStatusCount){publishLogs()}prevStatusCount=resLength;if(resLength==0){logString+="<tr><td>No jobs currently running</td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td width = '60px' class = 'perc-ellipsis'></td></tr>";stopPublishCurrentStatus()}else{for(r in results){var queued=0;var totalItems=results[r].totalItems;if(totalItems>0){queued=(results[r].completedItems/totalItems*100).toFixed(0)}if(results[r].isStopping){var $stopPubButton=$("<div><div class = 'perc-stop-button perc-stop-inactive' id='"+results[r].jobId+"'></div></div>")}else{var $stopPubButton=$("<div><div class = 'perc-stop-button perc-stop-active' id='"+results[r].jobId+"'></div></div>")}logString+="<tr><td><b>"+results[r].siteName+"</b></td><td class = 'perc-ellipsis'>"+results[r].status+"</td><td class = 'perc-ellipsis'>"+results[r].startTime+"</td><td class = 'perc-ellipsis'>"+milliSecondsToHHMMSS(results[r].elapsedTime)+"</td><td class = 'perc-ellipsis'>"+queued+"</td><td width = '60px' class = 'perc-ellipsis'>"+$stopPubButton.html()+"</td></tr>"}}logString+="</tbody></table>";$j("#perc-publish-current-jobs").html(logString);$j("#perc-publish-current-jobs").find("table").dataTable({bFilter:false,bInfo:false,bPaginate:false,bAutoWidth:false,aoColumns:[{sType:"string",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"},{sType:"date",sSortDataType:"dom-text"},{sType:"date",sSortDataType:"dom-text"},{fnRender:function(oObj){if(oObj.aData[4]>0){var barWdith=oObj.aData[4];return"<div class = 'perc-que-bar' style = 'width:"+barWdith+"%'>"+oObj.aData[4]+"% Completed</div>"}else{var barWdith=0;return"<div style = 'width:"+barWdith+"%'>"+oObj.aData[4]+"</div>"}},sType:"string",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"}],fnDrawCallback:function(){}})}};publishLogs=function(){var self=this;var serverId=$j("#perc-servers").val();var days=$j("#perc-view-last").val();var maxCount=$j("#perc-show").val();var siteId=$("#perc-site-id").val();var pubObject={SitePublishLogRequest:[{siteId:siteId,maxcount:maxCount,days:days,pubServerId:serverId}]};this.service.getPublishingLogs(pubObject,function(status,result){if(status){renderLogs(result[0].SitePublishJob)}else{$.perc_utils.alert_dialog({content:"Unable to retrieve logs",title:"Logs of published jobs"})}});function renderLogs(results){var logString="<table class='perc-table-publishinglog' width='100%'><thead><tr><th align='left' class='perc-header-status'>"+I18N.message("perc.ui.publish.title@Status")+"</th><th align='left' class='perc-header-date'>"+I18N.message("perc.ui.publish.title@Date")+"</th><th align='left' class='perc-header-servername'>Server</th><th align='left' class='perc-header-elapsedtime'>"+I18N.message("perc.ui.publish.title@Elapsed Time")+"</th><th align='left' class='perc-header-published'>"+I18N.message("perc.ui.publish.title@Published")+"</th><th align='left' class='perc-header-actions'>"+I18N.message("perc.ui.publish.title@Actions")+"</th><th align='right' class='perc-header-todelete'>"+I18N.message("perc.ui.publish.title@To Delete")+"</th></tr></thead><tbody>";if(results.length==0){logString+="<tr><td>No logs currently exist</td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td class = 'perc-ellipsis'></td><td align='right' class = 'perc-ellipsis'></td></tr>"}else{for(r in results){logString+="<tr><td class = 'perc-ellipsis'>"+results[r].status+"</td><td class = 'perc-ellipsis'>"+results[r].startDate+" "+results[r].startTime+"</td><td class = 'perc-ellipsis'><b>"+results[r].pubServerName+"</b></td><td class = 'perc-ellipsis'>"+milliSecondsToHHMMSS(results[r].elapsedTime)+"</td><td class = 'perc-ellipsis'>"+results[r].completedItems+"</td><td class = 'perc-ellipsis'><a id='perc-view-detail-"+r+"' class='perc-view-detail' href='#'>View Details</a></td><td align='right' class = 'perc-ellipsis'><input class='perc-log-delete' type='checkbox' value='"+results[r].jobId+"' onchange='onDeleteToggle();'></input></td>";$j("#perc-publish-logs").append(logString)}}logString+="</tbody></table>";$j("#perc-publish-logs").html(logString);var _ROW_DATA_NAME="rowData";function _handleViewDetails(){var rowData=$(this).data(_ROW_DATA_NAME);getLogDetails(rowData.jobId,rowData)}for(r in results){var node=$j("#perc-view-detail-"+r);node.data(_ROW_DATA_NAME,results[r]);node.click(_handleViewDetails)}$j("#perc-publish-logs").find("table").dataTable({bFilter:false,bInfo:false,aaSorting:[[1,"desc"]],bPaginate:false,bAutoWidth:false,aoColumns:[{sType:"string",sSortDataType:"dom-text"},{sType:"date",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"},{bSortable:false},{bSortable:false}],fnDrawCallback:function(){}})}};purgeLogs=function(){var selectedJobList=new Array();$j.each($("#perc-publish-logs input:checked"),function(){selectedJobList.push($(this).val())});var title="Delete Logs";var options={title:title,question:"Are you sure you want to delete the selected logs?",cancel:function(){},success:function(){this.service=$j.PercPublisherService(false);this.service.purgeJob(selectedJobList,function(status,result){if(status){disableDelete()}else{$.perc_utils.alert_dialog({content:"Unable to delete selected logs, please try again later.",title:title})}$j("#perc-publish-logs-widget").find(".perc-foldable").click().click()})}};$.perc_utils.confirm_dialog(options)};getLogDetails=function(val,publishRecord){this.service.getPublishingLogDetails(val,function(status,result){if(status){renderLogs(result[0].SitePublishItem,publishRecord);$j.fn.perc_toggle("#perc-publish-log-details-widget");$j.fn.perc_toggle("#perc-publish-logs-widget");if($j("#perc-publish-log-details-widget").find(".perc-opened").length==0){$j("#perc-publish-log-details-widget").find(".perc-foldable").click()}}else{$.perc_utils.alert_dialog({content:"Unable to get log details, please try later."})}});function renderLogs(results,publishRecord){var logString="<table class='perc-publish-detail-first-table' width='50%'><tr><td>Site Name:</td><td>"+publishRecord.siteName+"</td><td>Published:</td><td>"+publishRecord.completedItems+"</td></tr><tr><td>Date:</td><td>"+publishRecord.startDate+"</td><td>Removed:</td><td>"+publishRecord.removedItems+"</td></tr><tr><td>Job ID:</td><td>"+publishRecord.jobId+"</td><td>Elapsed Time:</td><td>"+milliSecondsToHHMMSS(publishRecord.elapsedTime)+"</td><td></td><td></td><td></td><td></td><td></td><td></td></tr></table>";logString+="<BR/><H2>Publishing Logs:</H2>";logString+="<table class='perc-identifier-next' width='100%'><thead><tr align='left'><th class='perc-header-status' align='left' style=\"width: 12%\">"+I18N.message("perc.ui.publish.title@Status")+"</th><th class='perc-header-filenameandlocation' align='left' style=\"width: 58%\">"+I18N.message("perc.ui.publish.title@File Name and Location")+"</th><th class='perc-header-elapsedtime' align='left' style=\"width: 12%\">"+I18N.message("perc.ui.publish.title@Elapsed Time")+"</th><th class='perc-header-error' align='left' style=\"width: 18%\">"+I18N.message("perc.ui.publish.title@Error")+"</th></tr></thead><tbody>";for(r in results){var errMsg=results[r].errorMessage;if(errMsg===undefined||errMsg==null){errMsg=""}logString+="<tr><td>"+results[r].status+"</td><td title='"+results[r].fileLocation+"' class='perc-datatable-columnrow perc-ellipsis'>"+results[r].fileLocation+"</td><td>"+results[r].elapsedTime/1000+" s</td><td>"+errMsg+"</td></tr>"}logString+="</tbody></table>";$j("#perc-publish-logs-details").html(logString);$j("#perc-publish-logs-details").find(".perc-identifier-next").dataTable({bFilter:false,bInfo:false,bPaginate:false,bAutoWidth:false,aoColumns:[{sType:"string",sSortDataType:"dom-text"},{sType:"string",sSortDataType:"dom-text"},{sType:"numeric",sSortDataType:"dom-elapsed-time"},{sType:"string",sSortDataType:"dom-text"}],fnDrawCallback:function(){}})}};startPublishCurrentStatus=function(){pubStatusId=setInterval(publishCurrentStatus,500)};stopPublishCurrentStatus=function(){if(pubStatusId>0){clearInterval(pubStatusId);pubStatusId=0}};function getServersList(siteName){$("#perc-servers").html("");service.getServersList(siteName,function(status,result){var serversListContainer=$("#perc-servers");$("#perc-servers").append($("<option></option>").val(" ").html("All"));if(status){var serverProperties=$.parseJSON(result[0]);var servers=[];if(!$.isArray(serverProperties.serverInfo)){servers.push(serverProperties.serverInfo);servers=serverProperties.serverInfo}else{servers=serverProperties.serverInfo}$.each(servers,function(){$("#perc-servers").append($("<option></option>").val(this.serverId).html(this.serverName))})}else{$.perc_utils.alert_dialog({content:"Unable to get the list of servers for site "+siteName,title:"Error"})}})}stopPublishing=function(){var pubId=$(this).attr("id");service.stopPubJob(pubId,function(status,result){if(status){}else{$.perc_utils.alert_dialog({content:"Unable to stop the publishing server",title:"Error"})}})};$j(document).ready(function(){$j("#perc-publish-jobs-widget").find(".perc-foldable").click(function(){if($j(this).hasClass("perc-opened")){stopPublishCurrentStatus()}FoldToggle(this,function(){startPublishCurrentStatus()})});$j("#perc-publish-logs-widget").find(".perc-foldable").click(function(){FoldToggle(this,publishLogs);disableDelete()});$j("#perc-publish-log-details-widget").find(".perc-foldable").click(function(){FoldToggle(this)});$j("#perc-publish-back").click(function(){$j.fn.perc_toggle("#perc-publish-log-details-widget");$j.fn.perc_toggle("#perc-publish-logs-widget")});$j("#perc-publish-current-jobs").on("click",".perc-stop-active",stopPublishing)})})(jQuery);(function(I){var J;var K;var n;var f;var U;var h=0;var L=1;var d=$j.PercPublisherService(false);this.utilService=$j.PercUtilService;var p=I.PercDirtyController;var P=I.PercEditorRenderer;var M={};var w=false;var S="PRODUCTION";var W=[];J=$j.PercNavigationManager.getSiteName();$j(document).ready(function(){$j("#tabs").tabs({selected:0,show:function(){fixBottomHeight()},select:function(X,Y){if(p.isDirty()){p.confirmIfDirty(function(){p.setDirty(false);e();$j("#tabs").tabs("select",Y.index)});return false}if(Y.index==h){O()}if(Y.index==L){I("#perc-servers").html("");y(function(ab){var aa=I("#perc-servers");I("#perc-servers").append(I("<option></option>").val(" ").html("All"));I.each(ab,function(){I("#perc-servers").append(I("<option></option>").val(this.serverId).html(this.serverName))});var Z=I("#perc-publish-jobs-widget").find(".perc-foldable");if(Z.hasClass("perc-opened")){Z.click().click()}})}}});I("#perc-servers-wrapper").on("click","#perc-server-edit",V);I("#perc-servers-wrapper").on("click","a#perc-define-save",save);I("#perc-servers-container").on("click","#perc-define-cancel",e);I("#perc-servers-container").on("click","#perc-publish-now",Q);I("#perc-servers-container").on("click","#perc-full-publish-now",Q);if(J!=null){O(function(){P().loadLocalFolderPath(K);E()})}});function H(){I("#perc-servers-container").find("span.perc_field_error").remove()}function x(){S="PRODUCTION";if(I("#perc-servers-list").find(".perc-staging-server-marker").length<1){C().done(function(X){S=X;G()}).fail(function(){})}else{G()}}function G(){var Z="";var Y={};var X=I("#perc-servers-list");w=true;p.setDirty(true);I.PercDataList.disableButtons(X);I.PercDataList.unhighlightAllItems(X);P().renderEditor(Z,Y,S)}function C(){var X=I.Deferred();var Y;var Z="PRODUCTION";I.unblockUI();Y=I(z(Y)).perc_dialog({title:"Create Publishing Server",modal:true,percButtons:{Ok:{click:function(){Y.remove();X.resolve(Z)},id:"perc-selection"},Cancel:{click:function(){Y.remove();X.reject()},id:"perc-cancel"}},id:"perc-server-type-dialog",width:700});Y.find("#perc-staging-server-button").click(function(){I(".perc-text-button-selected").removeClass("perc-text-button-selected");Y.find("#perc-staging-server-button").addClass("perc-text-button-selected");Z="STAGING"});Y.find("#perc-production-server-button").click(function(){I(".perc-text-button-selected").removeClass("perc-text-button-selected");Y.find("#perc-production-server-button").addClass("perc-text-button-selected");Z="PRODUCTION"});return X.promise()}function z(X){var Y=I("<div/>",{id:"perc-prompt-server-type-container"});Y.append("<div><label>Please select the type of publishing server you would like to create.</label></div>");Y.append("<div><button id='perc-staging-server-button' name='perc-staging-server-button' class='perc-text-button' type='button'>Staging</button><button id='perc-production-server-button'  name='perc-production-server-button' class='perc-text-button perc-text-button-selected' type='button'>Production</button></div>");return Y}function T(){var X=I(".perc-itemname[title='"+n+"']").prev().attr("title");if(typeof(X)=="undefined"){X=I(".perc-itemname[title='"+n+"']").next().attr("title")}var Y={id:"perc-server-delete",title:"Confirm Server Deletion",type:"YES_NO",question:"You are about to delete the server: '"+n+"'<br /><br />Are you sure you want to delete this server?",success:function(){$j.PercPublisherService().deleteSiteServer(K,f,function(ab,aa){if(ab){var Z=I.parseJSON(aa[0]).serverInfo.serverName;E(X);p.setDirty(false)}else{var ac=aa;I.perc_utils.alert_dialog({content:ac,title:"Error"});return}})}};I.perc_utils.confirm_dialog(Y)}function V(){var X=I("#perc-servers-list");w=false;p.setDirty(true);I.PercDataList.disableButtons(X);d.getServerProperties(K,f,function(Z,Y){if(Z){P().renderEditor(n,Y[0],Y[0].serverInfo.serverType)}else{}})}function q(){I("#perc-editor-form").html("");d.getServerProperties(K,f,function(Y,X){if(Y){M=X[0];f=M.serverInfo.serverId;var aa=B(M.serverInfo.properties);var Z=aa.driver;I("#perc-editor-summary").load("../jsp/includes/serverEditors/propReadOnlyEditor.jsp?editorName="+Z,function(){I("#perc-server-name").text(n);I("#perc-server-name-wrapper").show();P().setReadOnlyProperties(M);if(Z=="FTP"||Z=="Local"){var ab=aa.HTML;if(ab){I("#perc-editor-prop").find("span[percName ='format']").text("HTML")}else{I("#perc-editor-prop").find("span[percName ='format']").text("XML")}}if(Z=="FTP"){var ad=aa.secure;if(ad){I("#perc-editor-prop").find("span[percName ='secure']").text("Yes")}else{I("#perc-editor-prop").find("span[percName ='secure']").text("No")}}R(M.serverInfo);b(M);var ac=I("#perc-servers-container").find("#perc-publish-now");if(M.serverInfo.isModified){ac.addClass("perc-disabled");I(".perc-warning-message").show();I("#perc-default-server").addClass("perc-disabled")}else{ac.removeClass("perc-disabled");I(".perc-warning-message").hide();I("#perc-default-server").removeClass("perc-disabled")}})}else{I.perc_utils.alert_dialog({content:"The server you are trying to act on no longer exists in the system.",title:"Error",okCallBack:function(){E()}})}})}function b(X){if(X.serverInfo.canIncrementalPublish&&!X.serverInfo.isModified){if(X.serverInfo.isFullPublishRequired){I("#perc-publish-button").append("<div id='perc-full-publish-now' class='perc-publish' style=''></div>")}else{F()}}else{I("#perc-publish-button").append("<div id='perc-publish-now' class='perc-publish' style=''></div>")}}function R(Z){var X="-----";if(Z.lastFullPublishDate){var aa=I.perc_utils.splitDateTime(Z.lastFullPublishDate);X=aa.date+", "+aa.time}var ab="<li><span class = 'perc-prop-name'>Last Full Publish: </span><span percName ='fullpublishdate' class = 'perc-prop-value'>"+X+"</span></li>";if(Z.canIncrementalPublish){var Y="-----";if(Z.lastIncrementalPublishDate){var aa=I.perc_utils.splitDateTime(Z.lastIncrementalPublishDate);Y=aa.date+", "+aa.time}ab+="<li><span class = 'perc-prop-name'>Last Incremental Publish: </span><span percName ='incpublishdate' class = 'perc-prop-value'>"+Y+"</span></li>"}I("#perc-editor-prop-container").append(ab)}function F(){var ab=["Incremental Publish","Full Publish"];var Z=[];var Y=[v,Q];var ac="/cm/images/images/splitButtonArrow.gif";var X="/cm/images/images/splitButtonArrowOn.gif";var ae=I("#perc-publish-button").addClass("perc-publish-split-button");ae.append(I("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-publish-split-button-incremental")).append(I("<div />").addClass("perc-publish").css("display","inline-block"));ae.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-publish",percDropdownOptionLabels:ab,percDropdownCallbacks:Y,percDropdownCallbackData:Z,percDropdownTitleImage:ac,percDropdownTitleImageOver:X,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-publish"});ae.find(".perc-dropdown-title").unbind("click");ae.children("a").click(function(){A()});var ad="An incremental publish will only publish those pages that have been approved since the last time the site was published.  Full publish will publish all site content including theme files. Full publish is needed if pages are renamed, folder structure is changed, or navigation is modified. Full publish is required when a publishing server definition is modified or after a system upgrade.";var aa=I('<a style="display:inline-block;float:right;" title="'+ad+'"><span id="perc-publish-button-help" style="margin-top: 3px;background-color: #e6e6e9;color:#a1a1a1;" class="perc-font-icon icon-info-sign"></span></a>');aa.tooltip({delay:500,left:-25,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+ad+"</p>"}});I("#tooltip").css("z-index",9999);I("#perc-publish-button").append(aa)}function B(Z){var X=[];var Y=[];if(!I.isArray(Z)){Y.push(Z)}else{Y=Z}I.each(Y,function(ab,ac){var aa="";var ad="";I.each(this,function(af,ae){if(af=="key"){aa=ae}if(af=="value"){propertyValue=ae}});X[aa]=propertyValue});return X}function N(Y){n=Y;var X=I("#perc-servers-list");I.PercDataList.selectItem(X,n);I.PercDataList.enableButtons(X);f=W["perc-"+n];if(n==U.name){I(".perc-item-delete-button").unbind().addClass("perc-item-disabled")}else{I(".perc-item-delete-button").removeClass("perc-item-disabled").unbind().click(function(){T()})}q()}function Q(){if(M.serverInfo.isModified){return}I.PercBlockUI();I.PercPublisherService().publishSite(J,n,function(Y,X){I.unblockUI();if(X[1]=="success"){var Y=JSON.parse(X[0]).SitePublishResponse.status;var Z="";if(Y===I.PercPublisherService().PUBLISHER_JOB_STATUS_FORBIDDEN){Z=I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")}else{if(Y===I.PercPublisherService().PUBLISHER_JOB_STATUS_BADCONFIG){Z=I18N.message("perc.ui.publish.errordialog.message@Bad configuration")}else{Z="Server '"+n+"' has started publishing."}}I.perc_utils.alert_dialog({content:Z,title:"Server Publish",id:"perc-publish-success"})}else{I.perc_utils.alert_dialog({content:"Unable to publish the server "+n,title:"Server Publish",id:"perc-publish-failure"})}})}function A(){I.PercIncrementalPreviewDialog.open(J,n,function(X){if(X==I.PercIncrementalPreviewDialog.CONTINUE){v()}})}function v(){if(M.serverInfo.isModified){return}I.PercBlockUI();I.PercPublisherService().incrementalPublishSite(J,n,function(Z,Y){I.unblockUI();if(Z){var X=JSON.parse(Y[0]).SitePublishResponse.status;var aa="";if(X===I.PercPublisherService().PUBLISHER_JOB_STATUS_FORBIDDEN){aa=I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed");I.perc_utils.alert_dialog({content:aa,title:"Server Publish",id:"perc-publish-success"})}else{if(X===I.PercPublisherService().PUBLISHER_JOB_STATUS_BADCONFIG){aa=I18N.message("perc.ui.publish.errordialog.message@Bad configuration");I.perc_utils.alert_dialog({content:aa,title:"Server Publish",id:"perc-publish-success"})}}}else{I.perc_utils.alert_dialog({content:"Unable to publish the server "+n,title:"Server Publish",id:"perc-publish-failure"})}})}function y(X){d.getServersList(K,function(aa,Y){if(aa){var Z=I.parseJSON(Y[0]);var ab=[];if(!I.isArray(Z.serverInfo)){ab.push(Z.serverInfo);ab=Z.serverInfo}else{ab=Z.serverInfo}if(X){X(ab)}}else{I.perc_utils.alert_dialog({content:"Unable to get the list of servers for site "+J,title:"Error"})}})}function E(X){y(function(ae){var ad=[];var ab=null;I.each(ae,function(){ad.push(this.serverName);if(this.isDefault){U={name:this.serverName,isModified:this.isModified}}if(this.serverType=="STAGING"){ab=this.serverName}W["perc-"+this.serverName]=this.serverId});I("#perc-servers-list").html("");var Z=I("#perc-servers-list");var ac={listItem:[],title:"Servers",addTitle:"Add new server",deleteTitle:"Delete server",enableDelete:true,collapsible:true,createItem:x,deleteItem:T,selectedItem:N,truncateEntries:true,truncateEntriesCount:10};I.PercDataList.init(Z,ac);I.PercDataList.updateList(Z,ad);if(X){N(X)}else{N(ad[0])}if(ab){var aa=Z.find(".perc-itemname[title='"+ab+"']");aa.addClass("perc-staging-server-marker")}if(typeof(U)!="undefined"){var Y=Z.find(".perc-itemname[title='"+U.name+"']");Y.addClass("perc-default-server-marker");if(U.isModified){Y.addClass("perc-disabled")}}})}function O(X){d.getSitePublishProperties(J,function(Y,aa){if(Y){var Z=aa.SitePublishProperties;if(Z!=null){K=Z.id;I("#perc-site-id").val(Z.id).data("secureSite",Z.secure)}if(typeof(X)=="function"){X()}}else{I.perc_utils.alert_dialog({content:"Unable to retrieve the site properties",title:"Site properties"})}})}validateFields=function(Y){if(Y.error=="Bad Request"){var X=I.parseJSON(Y.request.responseText).ValidationErrors.fieldErrors;var Z=[];if(!I.isArray(X)){Z.push(X)}else{Z=X}I.each(Z,function(){var ac=this.field;var ab=this.defaultMessage;I("#perc-servers-container").find("*[name="+ac+"]").parent().append("<span class = 'perc_field_error'>"+ab+"</span>")})}else{var aa=I.PercServiceUtils.extractDefaultErrorMessage(Y.request);if(aa=="The server you are trying to act on no longer exists in the system."||aa=="Only one staging server is allowed per site."){I.perc_utils.alert_dialog({content:aa,title:"Error",okCallBack:function(){E()}})}else{I.perc_utils.alert_dialog({content:aa,title:"Error"})}}};function e(){p.setDirty(false);E(n)}save=function(){if(w){sId="";server=""}else{sId=f;server=f}H();var ab=J;if(ab!=null){var Y=I("#perc-servers-container");var ae=Y.find('input[percName="serverName"]').val();var aa=Y.find('input[percName="isDefault"]').is(":checked");var ac=Y.find("select#publishType").val();var ad=Y.find('input[percName="ignoreUnModifiedAssets"]').is(":checked");if(ac=="Select"){ac=""}var af=Y.find("select#perc-driver").val();if(af=="Select"){af=""}var X=function(){var ag=I("#perc-editor-wrapper").find("*[percName]");var ah=[];I.each(ag,function(ak,am){var aj=I(am);var al=aj.attr("percName");var ao=aj.attr("type");var ai;var an=false;if(ao=="radio"){ai=aj.prop("checked")}else{if(ao=="checkbox"){ai=aj.prop("checked")}else{ai=aj.val()}}var ap={key:al,value:ai};ah.push(ap)});ah.push({key:"driver",value:af});ah.push({key:"ignoreUnModifiedAssets",value:ad});return ah};var Z={serverInfo:{isDefault:aa,serverId:sId,serverName:ae,type:ac,isModified:"",properties:X(),serverType:S}};if(!sId){server=ae}d.createUpdateSiteServer(K,server,Z,function(ah,ai){if(ah){w=false;var ag=ai[0].serverInfo.serverName;E(ag);p.setDirty(false)}else{validateFields(ai);p.setDirty(true)}})}};function D(X){var Z=X.attr("title");if(Z===""){return true}var Y=X.parents("td").width();X.css("width",Y)}})(jQuery);(function(h){h.PercIncrementalPreviewDialog={open:e,CANCEL:"cancel",CONTINUE:"continue",PAGE_SIZE:15};var v;var q;var p;function e(x,z,y){v=x;q=z;var w=h("<div id='perc-incremental-preview'><div id='perc-incremental-preview-table'/><div id='perc-incremental-preview-paging'/></div>");p=b(w,y);n(1)}function b(x,y){var w=x.perc_dialog({resizable:false,title:"Incremental Publishing Preview",modal:true,closeOnEscape:true,percButtons:{"Continue Preferred":{click:function(){w.remove();y(h.PercIncrementalPreviewDialog.CONTINUE)},id:"perc-incremental-dialog-continue"},Cancel:{click:function(){w.remove();y(h.PercIncrementalPreviewDialog.CANCEL)},id:"perc-incremental-dialog-close"}},id:"perc-incremental-dialog",width:1000,height:650});return w}function d(w){p.find("#perc-incremental-preview-table").empty();p.find("#perc-incremental-preview-paging").empty();n(w)}function n(w){h.PercPublisherService().getIncrementalItems(v,q,w,h.PercIncrementalPreviewDialog.PAGE_SIZE,function(B,C){if(B){var y=[f("sys_title","Filename","string","150",function(K,L){return"<div title='"+L.path+"'>"+L[K]+"</div>"}),f("name","Title","string","-1",null),f("sys_contentlastmodifieddate","Last Modified","html","100",h.PercDataTableUtil.dateColumnDataBuilder),f("sys_contentlastmodifier","Last Modified By","string","100",null),f("sys_postdate","Last Published","html","100",h.PercDataTableUtil.dateColumnDataBuilder)];if(C.PagedItemList.childrenCount<1){h("#perc-incremental-dialog-continue").hide()}var z=h.PercDataTableUtil.buildDataTableConfig(y,C);var G=z.percData;var H=z.percTypes;var F=z.percHeaders;var A=z.percColNames;var D=z.percWidths;var E=D;var J={percRowClickCallback:h.noop,percRowDblclickCallback:h.noop,percColumnWidths:E,percData:G,percHeaders:F,aoColumns:H};J.oLanguage={sZeroRecords:"No items are available for incremental publishing."};J.bPaginate=false;J.bInfo=false;J.bSort=false;J.sortFunction=z.sortFunction;J.sortColumn=z.sortColumn;J.sortOrder=z.sortOrder;J.percColNames=A;J.iDisplayLength=h.PercIncrementalPreviewDialog.PAGE_SIZE;var x=p.find("#perc-incremental-preview-table");x.empty();x.PercDataTable(J);if(C.PagedItemList.childrenCount>0){var I={totalItems:C.PagedItemList.childrenCount,startIndex:w,pageSize:h.PercIncrementalPreviewDialog.PAGE_SIZE,pagingCallback:d};p.find("#perc-incremental-preview-paging").PercPagingBar(I)}}})}function f(x,w,z,y,A){var B=h.extend({},h.PercDataTableUtil.defaultColInfo);B.name=x;B.label=w;B.type=z;B.width=y;B.dataUpdater=A;return B}})(jQuery);(function(d){d.PercDataTableUtil={convertToDataTableData:f,buildDataTableConfig:e,dateColumnDataBuilder:b,defaultColInfo:{name:"",label:"",type:"",width:"",dataUpdater:function(h,n){return""}}};function f(h,q){var y=[];if(q.PagedItemList.childrenCount<1){return y}var A=q.PagedItemList.childrenInPage;if(!d.isArray(A)){A=[q.PagedItemList.childrenInPage]}for(i=0;i<A.length;i++){var z=A[i];var w=z.columnData.column;for(j=0;j<w.length;j++){var n=w[j]["@name"];z[n]=w[j]["$"]}var v=[];for(k=0;k<h.length;k++){var n=h[k].name;var p=h[k].dataUpdater;v.push(d.isFunction(p)?p(n,z):z[n])}var x={rowContent:v,rowData:z};y.push(x)}return y}function e(q,h){var p={};p.percData=f(q,h);p.percColNames=[];p.percHeaders=[];p.percWidths=[];p.percTypes=[];for(c=0;c<q.length;c++){var n=q[c];p.percColNames.push(n.name);p.percHeaders.push(n.label);p.percWidths.push((n.width==-1?"*":(d.browser.msie?n.width-20:n.width)));p.percTypes.push({sType:n.type})}return p}function b(n,v){var p=v[n];var q="&nbsp;";if(p){var h=d.perc_utils.splitDateTime(p);var w=h.date+", "+h.time;q="<div title='"+w+"'>"+h.date+"</div>"}return q}d.fn.PercPagingBar=function(F){var n=F.totalItems;var E=F.pageSize;var p=F.startIndex;var z=F.pagingCallback;var H=Math.ceil(n/E);var B=Math.ceil(p/E);var h=d("<span class='paginate_button'></span>");var q=h.clone().text("<<").addClass("perc-paging-first").data("startIndex",1);var x=((B-2)*E+1)<1?1:(B-2)*E+1;var y=h.clone().text("<").addClass("perc-paging-prev").data("startIndex",x);x=((B*E)+1)>H*E?((B-1)*E)+1:B*E+1;var A=h.clone().text(">").addClass("perc-paging-next").data("startIndex",x);var v=h.clone().text(">>").addClass("perc-paging-last").data("startIndex",(H-1)*E+1);var w=[];w.push(B);for(i=1;i<=4&&w.length<5;i++){if(B-i>0){w.unshift(B-i)}if(B+i<=H){w.push(B+i)}}var I=d("<span/>");for(i=0;i<w.length;i++){var G=B==w[i]?"paginate_active":"perc-paging-number";var D=h.clone().text(w[i]).addClass(G).data("startIndex",((w[i]-1)*E)+1);I.append(D);if(i<w.length-1){I.append(",")}I.append("&nbsp;")}var C=d("<div class='perc-paging-bar'/>");C.append(q).append("&nbsp;").append(y).append("&nbsp;").append(I).append(A).append("&nbsp;").append(v);C.find(".paginate_button").click(function(){z(d(this).data("startIndex"))});C.find(".paginate_button").each(function(){if(d(this).data("startIndex")==(B-1)*E+1){d(this).addClass("perc-disabled").unbind()}});d(this).append(C)}})(jQuery);jQuery.fn.toXML=function(){var d="";if(this.length>0){if(typeof XMLSerializer=="function"||typeof XMLSerializer=="object"){var b=new XMLSerializer();this.each(function(){d+=b.serializeToString(this)})}else{if(this[0].xml!==undefined){this.each(function(){d+=this.xml})}else{}}}return d};(function(f){function b(B,z,D){var A;var C;if(!f.perc_fakes.template_service.get_template_css){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+B,dataType:"xml",type:"GET",success:function(F,E){$templateObject=f(F);A=$templateObject.find("Template cssOverride");z(A.text())},error:function(G,E,F){D(F)}})}else{}}function h(C,G,B,E,A,D){var F;var z;if(!f.perc_fakes.template_service.set_template_css){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+C,dataType:"xml",type:"GET",success:function(I,H){F=f(I);z=F.find("Template theme");if(z.length==0){F.append("<theme>"+newCSS+"</theme>")}else{z.text(G)}A(F.toXML());if(!D){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:F.toXML(),processData:false,success:function(K,J){B(G)},error:function(K,J){E(J)}})}},error:function(J,H,I){alert("error grabbing template record to save! ")}})}}function q(z,A){var B;if(!f.perc_fakes.template_service.get_template_css){f.ajax({url:f.perc_paths.THEME_SUMMARY_ALL,dataType:"xml",type:"GET",success:function(D,C){$templateObject=f(D);$themeSummaryObjects=$templateObject.find("ThemeSummarys ThemeSummary");z($themeSummaryObjects)},error:function(E,C,D){A(D)}})}else{}}function e(C,z,B){var A;if(!f.perc_fakes.template_service.get_template_css){f.ajax({url:f.perc_paths.THEME_CSS+"/"+C,dataType:"xml",type:"GET",success:function(E,D){A=f(E);$themeCSS=A.find("ThemeCSS CSS");z($themeCSS)},error:function(F,D,E){B(E)}})}else{}}function x(C,G,A,E,z,D){var F;var B;if(!f.perc_fakes.template_service.set_template_css){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+C,dataType:"xml",type:"GET",success:function(I,H){F=f(I);B=F.find("Template cssOverride");if(B.length==0){F.append("<cssOverride>"+G+"</cssOverride>")}else{B.text(G)}z(F.toXML());if(!D){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:F.toXML(),processData:false,success:function(K,J){A(K)},error:function(K,J){E(K)}})}},error:function(J,H,I){alert("error grabbing template record to save! ")}})}}function v(B,A,D){var C;var E;var z;f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+B,dataType:"xml",type:"GET",success:function(G,F){E=f(G);z=E.find("Template theme");A(z)},error:function(H,F,G){D(G)}})}function y(B,E,A,D,z,C){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+B,dataType:"xml",type:"GET",success:function(G,F){$templateObject=f(G);$cssTheme=$templateObject.find("Template theme");if($cssTheme.length==0){$templateObject.append("<theme>"+E+"</theme>")}else{$cssTheme.text(E)}z($templateObject.toXML());if(!C){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:$templateObject.toXML(),processData:false,success:function(I,H){A(E)},error:function(I,H){f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(I)})}})}},error:function(H,F,G){alert("error grabbing template record to save! ")}})}function p(A,z){}function w(z,A){f.ajax({url:f.perc_paths.TEMPLATE_LOAD_SAVE+"/"+z,dataType:"text",type:"GET",success:A,error:function(D,B,C){f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(D)})}})}function d(z,C,B,D){if(C){var A=f.perc_paths.TEMPLATE_LOAD_SAVE+"/page/"+memento.pageId}else{A=f.perc_paths.TEMPLATE_LOAD_SAVE+"/"}f.ajax({url:A,type:"POST",data:B,contentType:"text/xml",success:D,error:function(G,E,F){f.unblockUI();f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(G)})}})}function n(B,A,z,D){var C=f.perc_paths.TEMPLATE_RENDER+"/"+B;if(z){C=f.perc_paths.TEMPLATE_RENDER+"/"+z+"/"+B}f.ajax({url:C,type:"POST",contentType:"text/xml",dataType:"xml",data:A,processData:false,success:D,error:function(G,E,F){f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(G)})}})}f.perc_templatemanager={load_template:w,save_template:d,render_region:n,preview_template:p,get_template_css:b,set_template_css:x,get_theme_list:q,set_theme_for_template:y,get_theme_for_template:v,get_theme_css_data:e}})(jQuery);
/*
 * jQuery xmlDOM Plugin v1.0
 * http://outwestmedia.com/jquery-plugins/xmldom/
 *
 * Released: 2009-04-06
 * Version: 1.0
 *
 * Copyright (c) 2009 Jonathan Sharp, Out West Media LLC.
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 */
(function(b){if(window.DOMParser==undefined&&window.ActiveXObject){DOMParser=function(){};DOMParser.prototype.parseFromString=function(e){var d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(e);return d}}b.xmlDOM=function(d,q){try{var h=(new DOMParser()).parseFromString(d,"text/xml");if(b.isXMLDoc(h)){var f=b("parsererror",h);if(f.length==1){throw ("Error: "+b(h).text())}}else{throw ("Unable to parse XML")}}catch(n){var p=(n.name==undefined?n:n.name+": "+n.message);if(b.isFunction(q)){q(p)}else{b(document).trigger("xmlParseError",[p])}return b([])}return b(h)}})(jQuery);(function(b){b.widget("ui.perc_imageselect",{_idPostfix:"_perc_is",_class:"perc_imageselect",_pseudoCtl:null,_init:function(){var d=this;options=this.options;if(this.element[0].nodeName.toLowerCase()!="select"){window.alert("Error! the perc_imageselect widget can only be used on a 'SELECT' html element.")}d._addPseudoControl();d._bindEvents(false)},_addPseudoControl:function(){var d=this;var h="";var f=this.element[0].id;if(f=="undefined"||f==null||f==""){window.alert("Error! An id attribute is required on the select element.")}h+="<div id='";h+=(f+this._idPostfix);h+="' class='";h+=this._class;h+="'>";var e=this.element.children("option");e.each(function(){h+=d._getItemHtml(this.value,this.text)});h+="</div>";this.element.hide();this.element.after(h);this._pseudoCtl=b("#"+this.element[0].id+this._idPostfix);this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"))},_getItemHtml:function(e,d){var f="";f+="<div class='perc_imageselect_item'>";f+="<span class='perc_imageselect_value'>"+e+"</span>";f+="<img src='";f+=d;f+="'/><span>";f+=b.PercTruncateText(e.split(".")[2],22);f+="</span></div>";return f},_addChildIndexes:function(e){var d=0;e.each(function(){b(this).remove(".perc_imageselect_index")});e.each(function(){b(this).append("<span class='perc_imageselect_index'>"+(d++)+"</span>")})},destroy:function(){b.widget.prototype.apply(this,arguments);this._unbindEvents(false)},_bindEvents:function(e){var d=this;if(!e){this._pseudoCtl.bind("keydown",function(f){d._handleKeyDown(f)});this._pseudoCtl.bind("click",function(f){b(this).focus()})}this._pseudoCtl.children(".perc_imageselect_item").bind("click",function(h){var f=b(this).children(".perc_imageselect_index").text();d.selectIndex(f)});this._pseudoCtl.children(".perc_imageselect_item").bind("dblclick",function(f){if(d.options.hardSelect){d._onSelect()}})},_unbindEvents:function(d){if(!d){this._pseudoCtl.unbind("keydown").unbind("click")}this._pseudoCtl.children(".perc_imageselect_item").unbind("click").unbind("dblclick")},_handleKeyDown:function(d){if(!this.options.vertical&&(d.keyCode==37||d.keyCode==39)){this._moveSelection(d.keyCode==39?true:false);return d.preventDefault()}if(this.options.vertical&&(d.keyCode==38||d.keyCode==40)){this._moveSelection(d.keyCode==40?true:false);return d.preventDefault()}if(this.options.hardSelect&&d.keyCode==13){this._onSelect();return d.preventDefault()}return true},_moveSelection:function(d){var f=this.getSelectedIndex();var e=this._pseudoCtl.children(".perc_imageselect_item").length;if(f!=-1){if(d&&(e-1)>f){this.selectIndex(f+1)}else{if(!d&&f>0){this.selectIndex(f-1)}}}},_onSelect:function(){if(this.options.onSelect!=null){var d=this._pseudoCtl.children(".perc_imageselect_selected");var f=d.children(".perc_imageselect_value").text();var e=d.children("img").attr("src");this.options.onSelect(f,e)}},setItems:function(d){if(d==null||d=="undefined"){alert("items cannot be null or undefined")}else{this.clearSelection();this._unbindEvents(true);this._pseudoCtl.children(".perc_imageselect_item").remove();for(var e in d){var f=d[e];this._pseudoCtl.append(this._getItemHtml(f[0],f[1]))}this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"));this._bindEvents(true)}},loadFromUrl:function(e){var d=this;if(e!=null&&e!="undefined"){b.getJSON(e,function(f){d.setItems(f.items)})}},clearSelection:function(){var d=this.element[0].id+this._idPostfix;b("#"+d+" .perc_imageselect_selected").removeClass("perc_imageselect_selected")},selectIndex:function(d){this.clearSelection();var e=this.element[0].id+this._idPostfix;b("#"+e+" .perc_imageselect_item:eq("+d+")").addClass("perc_imageselect_selected");var n=this._pseudoCtl.children(".perc_imageselect_selected").offset().top-50;var h=this._pseudoCtl.offset().top;var f=this._pseudoCtl.scrollTop();if(!this.options.hardSelect){this._onSelect()}this._pseudoCtl.animate({scrollTop:f+n-h},500);this._pseudoCtl.focus()},getSelectedIndex:function(){var d=this._pseudoCtl.children(".perc_imageselect_selected");if(d.length>0){return parseInt(d.children(".perc_imageselect_index").text())}return -1}});b.extend(b.ui.perc_imageselect,{version:"1.0.0",defaults:{vertical:true,onSelect:null,hardSelect:true}})})(jQuery);(function(b){b.widget("ui.perc_wizard",{steps:null,currentStep:0,isCancelled:false,_init:function(){var d=this,e=this.options;this.element.load(e.templateUrl,function(){d.element.perc_dialog({autoOpen:false,title:e.title,modal:e.modal,width:e.width,height:e.height,show:e.show,hide:e.hide,open:e.open,resizable:e.resizable});d.steps=b(".perc_wizard_step");d._addButtons()})},open:function(){this._showStep(0);this.element.dialog("open")},_addButtons:function(){var d=this;var e="<div class='ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'><div href='#' id='perc_wizard_finish' class='perc-save' name='perc_wizard_finish' style='float:right;' /><div href='#' id='perc_wizard_next' class='perc-save'  name='perc_wizard_next' style='float:right;' /><div href='#' id='perc_wizard_cancel' class='perc-save' name='perc_wizard_cancel' style='float:right;' /><div id='perc_wizard_back' href='#' class='perc-save'  name='perc_wizard_back' style='float:right;' /></div>";b(d.element).closest(".ui-dialog").append(e);b("#perc_wizard_back").click(function(){d._onBack()});b("#perc_wizard_cancel").click(function(){d._onCancel()}).val(this.options.cancelButtonLabel);b("#perc_wizard_next").click(function(){d._onNext()});b("#perc_wizard_finish").click(function(){d._onOk()})},_showStep:function(e){if(this.steps==null||e>this.steps.length){alert("Error: Step does not exist.");return}this.currentStep=e;for(i=0;i<this.steps.length;i++){if(i==e){b(this.steps[i]).show()}else{b(this.steps[i]).hide()}}if(e==0&&this.steps.length>1){b("#perc_wizard_back").hide();b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{if(e<this.steps.length-1){b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").hide();b("#perc_wizard_finish").show().val(this.options.finishButtonLabel)}}var d=this.element},_onOk:function(f){var d=this;if(this.options.onValidate()){this.options.onOk()}},_onNext:function(d){if(this.options.onValidate()){if(this.options.onNext!==undefined&&this.options.onNext()===false){return}this._showStep(this.currentStep+1)}},_onBack:function(){if(this.currentStep>0){this._showStep(this.currentStep-1)}},_onCancel:function(){this.isCancelled=true;this.element.dialog("close")}});b.extend(b.ui.perc_wizard,{version:"1.0.0",defaults:{backButtonLabel:typeof I18N=="undefined"?"Back":I18N.message("perc.ui.common.label@Back"),cancelButtonLabel:typeof I18N=="undefined"?"Cancel":I18N.message("perc.ui.common.label@Cancel"),nextButtonLabel:typeof I18N=="undefined"?"Next":I18N.message("perc.ui.common.label@Next"),finishButtonLabel:typeof I18N=="undefined"?"Finish":I18N.message("perc.ui.common.label@Finish"),width:"800px",height:"700px",modal:true,title:typeof I18N=="undefined"?"Wizard":I18N.message("perc.ui.common.label@Wizard"),onOk:function(){alert("No onOk callback was set.")},onValidate:function(){return true}}})})(jQuery);(function(v){v.PercSiteService={getSiteProperties:A,updateSiteProperties:B,copySite:y,copySiteInfo:q,getTemplates:p,getBaseTemplates:n,getSites:e,validateCopySiteFolders:x,createSiteFromUrl:b,createSiteFromUrlAsync:d,createSiteFromUrlStatus:z,createSiteFromUrlResult:f,isSiteBeingImported:h,getSaaSSiteNames:w};function B(C,E){var D=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_UPDATE_PROPERTIES,v.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}},C)}function A(D,E){var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_GET_PROPERTIES+"/"+D,v.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}})}function y(D,E){var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_COPY,v.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=v.PercServiceUtils.extractDefaultErrorMessage(G.request);var F=v.PercServiceUtils.extractGlobalErrorCode(G.request);E(v.PercServiceUtils.STATUS_ERROR,I,F)}},D)}function x(D,E){var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_COPY_VALIDATE_FOLDERS,v.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=v.PercServiceUtils.extractDefaultErrorMessage(G.request);var F=v.PercServiceUtils.extractGlobalErrorCode(G.request);E(v.PercServiceUtils.STATUS_ERROR,I,F)}},D)}function q(D){var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_COPY_INFO,v.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==v.PercServiceUtils.STATUS_SUCCESS){D(v.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=v.PercServiceUtils.extractDefaultErrorMessage(E.request);D(v.PercServiceUtils.STATUS_ERROR,G)}})}function p(F,G,E){var D=this;var C="";if(E!=null){C=v.perc_paths.TEMPLATES_BY_SITE+"/"+F+"/"+E}else{C=v.perc_paths.TEMPLATES_BY_SITE+"/"+F+""}v.PercServiceUtils.makeJsonRequest(C,v.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==v.PercServiceUtils.STATUS_SUCCESS){G(v.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=v.PercServiceUtils.extractDefaultErrorMessage(H.request);G(v.PercServiceUtils.STATUS_ERROR,J)}})}function n(C,E){var D=v.perc_paths.TEMPLATES_READONLY+"?type="+C;v.PercServiceUtils.makeJsonRequest(D,v.PercServiceUtils.TYPE_GET,true,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){E(true,F.data)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(false,H)}})}function e(D){var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITES_ALL+"/",v.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==v.PercServiceUtils.STATUS_SUCCESS){D(v.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=v.PercServiceUtils.extractDefaultErrorMessage(E.request);D(v.PercServiceUtils.STATUS_ERROR,G)}})}function b(D,E){v.ajaxSetup({timeout:600000});var C={Site:D};v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_CREATE_FROM_URL,v.PercServiceUtils.TYPE_POST,false,function(G,F){v.ajaxSetup({timeout:60000});if(G==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}},C)}function d(D,E){var C={Site:D};v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_CREATE_FROM_URL_ASYNC,v.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}else{defaultMsg="There was an unexpected error during the import process.";E(v.PercServiceUtils.STATUS_ERROR,defaultMsg)}},C)}function z(C,E){v.PercServiceUtils.makeJsonRequest(v.perc_paths.JOB_STATUS+"/"+C,v.PercServiceUtils.TYPE_GET,false,function D(G,F){var I,H=v.PercServiceUtils.STATUS_SUCCESS;if(G==v.PercServiceUtils.STATUS_SUCCESS){I=F.data.asyncJobStatus}else{H=v.PercServiceUtils.STATUS_ERROR;I="There was an unexpected error during the import process."}E(H,I)})}function f(C,E){v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+C,v.PercServiceUtils.TYPE_GET,false,function D(G,F){var I,H=v.PercServiceUtils.STATUS_SUCCESS;if(G==v.PercServiceUtils.STATUS_SUCCESS){I=F.data}else{H=v.PercServiceUtils.STATUS_ERROR;I="There was an unexpected error during the import process."}E(H,I)})}function h(C,D){v.PercServiceUtils.makeJsonRequest(v.perc_paths.SITE_IS_BEING_IMPORTED+"/"+C,v.PercServiceUtils.TYPE_GET,false,function(F,E){var H,G=v.PercServiceUtils.STATUS_SUCCESS;if(F==v.PercServiceUtils.STATUS_SUCCESS){H=E.data}else{G=v.PercServiceUtils.STATUS_ERROR;H="There was an unexpected error during the import process."}D(G,H)})}function w(E){var D=v.Deferred();var C=this;v.PercServiceUtils.makeJsonRequest(v.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+E,v.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){D.resolve(F.data)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);D.reject(H)}});return D.promise()}})(jQuery);(function(f){f.PercAssetService={getAssetEditorForAssetId:x,getAssetViewForAssetId:d,getAssetEditorLibrary:z,getAssetEditor:n,getAssetEditorForWidgetAndFolder:w,putAssetInFolder:p,clear_asset:C,clear_orphan_assets:y,set_relationship:e,update_relationship:F,asset_from_local_content:B,deleteAsset:b,forceDeleteAsset:D,validateDeleteAsset:h,updateAsset:v,getUnusedAssets:A,promoteAsset:G,getAssetTypes:E};function x(H,I){f.ajax({url:f.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+H,success:function(L,K){var J={data:L,textstatus:K};I(f.PercServiceUtils.STATUS_SUCCESS,L)},error:function(M,K,L){var J={request:M,textstatus:K,error:L};var N=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,N)}})}function d(H,I){f.ajax({url:f.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+H,success:function(L,K){var J={data:L,textstatus:K};I(f.PercServiceUtils.STATUS_SUCCESS,L)},error:function(M,K,L){var J={request:M,textstatus:K,error:L};var N=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,N)}})}function z(H,I){q(H,"",I)}function q(J,I,K){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_EDITOR_LIBRARY+J+"?filterDisabledWidgets=yes&widgetId="+I,f.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==f.PercServiceUtils.STATUS_SUCCESS){K(f.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=f.PercServiceUtils.extractDefaultErrorMessage(L.request);K(f.PercServiceUtils.STATUS_ERROR,N)}})}function n(I,J){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_EDITOR+"/"+I,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function w(H,I,J){q(H,I,J)}function p(H,I){f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_ADD_TO_FOLDER,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},H)}function b(J,I,H){f.ajax({url:f.perc_paths.ASSET_DELETE+"/"+J,type:"DELETE",success:function(){I()},error:H})}function D(J,I,H){f.ajax({url:f.perc_paths.ASSET_FORCE_DELETE+"/"+J,type:"GET",success:I,error:H})}function h(J,I,H){f.ajax({url:f.perc_paths.ASSET_VALIDATE_DELETE+"/"+J,type:"GET",success:I,error:H})}function e(R,P,I,K,H,J,N,M){var Q=H?"shared":"local";var L=(typeof(P.relationshipId)!="undefinded")?P.relationshipId:-1;var O={AssetWidgetRelationship:{ownerId:I,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,replacedRelationshipId:L,assetId:R,assetOrder:"0",resourceType:Q}};if(J){O.AssetWidgetRelationship.folderPath=J}f.ajax({url:f.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(O),success:N,error:M})}function B(K,O,H,J,L,N){var I=f.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+J+L;var M={AssetWidgetRelationship:{ownerId:H,widgetId:O.widgetid,widgetName:O.widgetdefid,widgetInstanceName:O.widgetName,assetId:K,assetOrder:"0",resourceType:"local"}};f.PercServiceUtils.makeRequest(I,f.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==f.PercServiceUtils.STATUS_SUCCESS){N(f.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=f.PercServiceUtils.extractDefaultErrorMessage(P.request);N(f.PercServiceUtils.STATUS_ERROR,R)}},M,"application/json","text")}function F(M,K,O,I,J,L){var H=(typeof(O.relationshipId)!="undefinded")?O.relationshipId:-1;var N={AssetWidgetRelationship:{ownerId:I,widgetId:O.widgetid,widgetName:O.widgetdefid,widgetInstanceName:O.widgetName,replacedRelationshipId:H,assetId:M,assetOrder:"0",resourceType:"local",relationshipId:K}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",f.PercServiceUtils.TYPE_POST,true,function(P,Q){if(P==f.PercServiceUtils.STATUS_SUCCESS){var R=Q.data;if(R=="-1"){var T="The asset has been removed from the system.";L(false,T)}else{J(true,Q.data)}}else{var S=f.PercServiceUtils.extractDefaultErrorMessage(Q.request);L(false,S)}},N)}function C(H,J,I,K,M){M=M||function(){};var L={AssetWidgetRelationship:{ownerId:H,widgetId:J,widgetName:I,assetId:K,assetOrder:"0"}};f.ajax({url:f.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(L),success:M,error:function(P,N,O){alert("error")}})}function y(O,M,H,I,P){P=P||function(){};var J=[];for(var L=0;L<I.length;L++){var K="";K='{"assetId":"'+I[L]+'","assetOrder":0,"ownerId":"'+O+'","widgetId":'+M[L]+',"widgetName":"'+H[L]+'"}';J.push(K)}var Q='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+J+"]}}";var N=f.parseJSON(Q);f.ajax({url:f.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(N),success:P,error:function(T,R,S){alert("error")}})}function v(I,J,L){var H=f.perc_paths.ASSET_UPDATE+"/"+I+"/"+J;var K=function(M,N){if(M==f.PercServiceUtils.STATUS_ERROR){L(false,[N.request,N.textstatus,N.error])}else{L(true,N.data)}};f.PercServiceUtils.makeRequest(H,f.PercServiceUtils.TYPE_POST,true,K)}function G(K,O,L,I,J,N){var H=J?"shared":"local";var M={AssetWidgetRelationship:{ownerId:L,widgetId:O.widgetid,widgetName:O.widgetdefid,widgetInstanceName:O.widgetName,assetId:K,assetOrder:I,resourceType:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_PROMOTE,f.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==f.PercServiceUtils.STATUS_SUCCESS){N(f.PercServiceUtils.STATUS_SUCCESS)}else{var R=f.PercServiceUtils.extractDefaultErrorMessage(P.request);N(f.PercServiceUtils.STATUS_ERROR,R)}},M)}function A(H,I){f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_UNUSED+"/"+H,f.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,f.perc_utils.convertCXFArray(J.data.UnusedAssetSummary))}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}})}function E(I,J){var H=f.perc_paths.ASSET_TYPES;if(I&&I=="yes"){H+=H.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}f.PercServiceUtils.makeJsonRequest(H,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,f.perc_utils.convertCXFArray(K.data.WidgetContentType))}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}})(jQuery);(function(d){d.PercSearchService={getSearchResult:f,getAsyncSearchResult:e,getAsyncSearchExtendedResult:b};function f(n,q){var h=d.perc_paths.FINDER_SEARCH;var p=function(v,w){if(v==d.PercServiceUtils.STATUS_ERROR){var x=d.PercServiceUtils.extractDefaultErrorMessage(w.request);q(false,x)}else{q(true,w.data)}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,true,p,n)}function e(n,q){var h=d.perc_paths.FINDER_SEARCH;var p=function(v,w){if(v==d.PercServiceUtils.STATUS_ERROR){var x=d.PercServiceUtils.extractDefaultErrorMessage(w.request);q(false,x)}else{if(v==d.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,w.data)}}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,false,p,n,p)}function b(n,q){var h=d.perc_paths.FINDER_SEARCH+"/extendedresults";var p=function(v,w){if(v==d.PercServiceUtils.STATUS_ERROR){var x=d.PercServiceUtils.extractDefaultErrorMessage(w.request);q(false,x)}else{if(v==d.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,w.data)}}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,false,p,n,p)}})(jQuery);(function(v){var x=v.PercServiceUtils;v.PercPageService={forceDeletePage:b,validateDeletePage:B,getNonSEOPages:d,savePageMetadata:q,copyPage:n,getPagesWithTemplate:A,getUnassignedPagesBySite:p,checkForEmptyMigrationWidgets:y,clearFlagShowMigrationEmptyMessage:f,addToMyPages:z,removeFromMyPages:e,isMyPage:w,getMyContent:h};function y(F,D){var C=v.perc_paths.MIGRATION_EMPTY_FLAG+"/"+F;function E(G,H){if(G===x.STATUS_SUCCESS){if(H.data===true){D()}}}x.makeJsonRequest(C,x.TYPE_GET,true,E)}function f(E){var C=v.perc_paths.CLEAR_MIGRATION_EMPTY_FLAG+"/"+E;function D(F,G){}x.makeJsonRequest(C,x.TYPE_POST,true,D)}function b(E,D,C){v.ajax({url:v.perc_paths.PAGE_FORCE_DELETE+"/"+E,type:"GET",success:D,error:C});D()}function B(E,D,C){v.ajax({url:v.perc_paths.PAGE_VALIDATE_DELETE+"/"+E,type:"GET",success:D,error:C})}function d(G,I,E,D,C,H){if(E==null){E=""}if(C==null){C=""}var F={NonSEOPagesRequest:{keyword:C,path:G,workflow:I,state:E,severity:D}};v.PercServiceUtils.makeJsonRequest(v.perc_paths.PAGE_NONSEO,v.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==v.PercServiceUtils.STATUS_SUCCESS){H(v.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=v.PercServiceUtils.extractDefaultErrorMessage(J.request);H(v.PercServiceUtils.STATUS_ERROR,L)}},F)}function q(D,F){var C=v.perc_paths.SAVE_PAGE_METADATA+"/"+D;var E=function(G,H){if(G==v.PercServiceUtils.STATUS_ERROR){F(false,[H.request,H.textstatus,H.error])}else{F(true,H.data)}};v.PercServiceUtils.makeRequest(C,v.PercServiceUtils.TYPE_POST,true,E)}function n(C,E){var D=v.perc_paths.PAGE_COPY+"/"+C+"?addToRecent=true";v.PercServiceUtils.makeRequest(D,v.PercServiceUtils.TYPE_POST,true,function(G,F){if(G==v.PercServiceUtils.STATUS_SUCCESS){E(v.PercServiceUtils.STATUS_SUCCESS,F)}else{var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}},null,null,null,true)}function A(F,C,H,D){var E={startIndex:1,maxResults:5,sortColumn:"name",sortOrder:"asc",pageId:null};v.extend(E,C);var G=v.perc_paths.PAGES_WITH_TEMPLATE+"/"+F;G+="?startIndex="+E.startIndex;G+="&maxResults="+E.maxResults;G+="&sortColumn="+E.sortColumn;G+="&sortOrder="+E.sortOrder;if(E.pageId!=null){G+="&pageId="+E.pageId}v.PercServiceUtils.makeJsonRequest(G,v.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==v.PercServiceUtils.STATUS_ERROR){var K=v.PercServiceUtils.extractDefaultErrorMessage(I.request);H(v.PercServiceUtils.STATUS_ERROR,K)}else{H(v.PercServiceUtils.STATUS_SUCCESS,I.data.PagedItemList)}})}function p(F,E,C,G){var D=v.perc_paths.UNASSIGNED_PAGES_BY_SITE+"/"+F+"?startIndex="+E+"&maxResults="+C;v.PercServiceUtils.makeJsonRequest(D,v.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==v.PercServiceUtils.STATUS_ERROR){var J=v.PercServiceUtils.extractDefaultErrorMessage(H.request);G(v.PercServiceUtils.STATUS_ERROR,J)}else{G(v.PercServiceUtils.STATUS_SUCCESS,H.data)}})}function z(C,E){var D=v.perc_paths.ADD_TO_MYPAGES+"/"+C;v.PercServiceUtils.makeJsonRequest(D,v.PercServiceUtils.TYPE_PUT,false,function(G,F){if(G==v.PercServiceUtils.STATUS_ERROR){var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}else{E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}})}function e(C,E){var D=v.perc_paths.REMOVE_FROM_MYPAGES+"/"+C;v.PercServiceUtils.makeJsonRequest(D,v.PercServiceUtils.TYPE_DELETE,false,function(G,F){if(G==v.PercServiceUtils.STATUS_ERROR){var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}else{E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}})}function w(C,E){var D=v.perc_paths.IS_MY_PAGE+"/"+C;v.PercServiceUtils.makeJsonRequest(D,v.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==v.PercServiceUtils.STATUS_ERROR){var H=v.PercServiceUtils.extractDefaultErrorMessage(F.request);E(v.PercServiceUtils.STATUS_ERROR,H)}else{E(v.PercServiceUtils.STATUS_SUCCESS,F.data)}})}function h(D){var C=v.perc_paths.MY_CONTENT;v.PercServiceUtils.makeJsonRequest(C,v.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==v.PercServiceUtils.STATUS_ERROR){var G=v.PercServiceUtils.extractDefaultErrorMessage(E.request);D(v.PercServiceUtils.STATUS_ERROR,G)}else{D(v.PercServiceUtils.STATUS_SUCCESS,E.data)}})}})(jQuery);(function(f){f.PercPathService={getPathItemById:I,getFolderPathItem:x,getPathItemForPath:w,getItemPropertiesByWorkflowState:e,deleteFolder:v,deleteSection:D,deleteFSFolder:n,moveItem:A,renameFolder:G,createNewFolder:y,getLastExistingPath:E,validatePath:z,getDisplayFormat:F,getContentForPath:J,getFolderProperties:b,saveFolderProperties:p,deleteFolderSkipValidation:B,getInlineRenderLink:d};function F(M){var L=f.perc_utils.getDisplayFormat(f.PercNavigationManager.getPath());if(f.Percussion.getCurrentFinderView()==f.Percussion.PERC_FINDER_SEARCH_RESULTS||f.Percussion.getCurrentFinderView()==f.Percussion.PERC_FINDER_RESULT){L=f.perc_utils.getDisplayFormat("/")}var K=f.perc_paths.DISPLAY_FORMAT+L;f.PercServiceUtils.makeJsonRequest(K,f.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}})}function J(K,N,O){var L=f.perc_utils.encodeURL(N.path)+"/?startIndex="+N.startIndex+"&maxResults="+N.maxResults+"&displayFormatId="+K.id+"&sortColumn="+N.sortColumn+"&sortOrder="+N.sortOrder;var M=f.perc_paths.PATH_PAGINATED_FOLDER+L;f.PercServiceUtils.makeJsonRequest(M,f.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==f.PercServiceUtils.STATUS_SUCCESS){O(f.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=f.PercServiceUtils.extractDefaultErrorMessage(P.request);O(f.PercServiceUtils.STATUS_ERROR,R)}})}function w(L,M){var K=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM+L,f.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}})}function I(M,L){var K=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_BY_ID+"/"+M,f.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){L(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var Q=f.PercServiceUtils.extractDefaultErrorMessage(N.request);var P=f.PercServiceUtils.extractGlobalErrorCode(N.request);L(f.PercServiceUtils.STATUS_ERROR,Q,P)}})}function e(M,O,K,N){if(K==null){K=""}var L={ItemByWfStateRequest:{path:M,workflow:O,state:K}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,f.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==f.PercServiceUtils.STATUS_SUCCESS){N(f.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=f.PercServiceUtils.extractDefaultErrorMessage(P.request);N(f.PercServiceUtils.STATUS_ERROR,R)}},L)}function A(N,K,M){var L={MoveFolderItem:{itemPath:N,targetFolderPath:K}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_MOVE,f.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS)}else{var Q=f.PercServiceUtils.extractDefaultErrorMessage(O.request);M(f.PercServiceUtils.STATUS_ERROR,Q)}},L)}function y(L,M){var K=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ADD_NEW_FOLDER+L,f.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}})}function x(L,M){var K=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_FOLDER+f.perc_utils.encodeURL(L),f.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}})}function G(M,K,N){var L={RenameFolderItem:{path:M,name:K}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_RENAME_FOLDER,f.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==f.PercServiceUtils.STATUS_SUCCESS){N(f.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=f.PercServiceUtils.extractDefaultErrorMessage(P.request);var O=f.PercServiceUtils.extractFieldErrorCode(P.request);N(f.PercServiceUtils.STATUS_ERROR,R,O)}},L)}function v(M,K,L,N){f.ajax({url:f.perc_paths.PATH_VALIDATE_DELETE_FOLDER+M,dataType:"text",type:"GET",success:function(O){q(O,M,K,L,N)},error:h})}function D(M,L,O){f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);var K={DeleteFolderCriteria:{path:M,skipItems:"NO"}};var N=3600000;f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(K),timeout:N,success:O,error:H});f.unblockUI()}function n(L,K,M){v(L,K,"fsfolder",M)}function E(L,M,K){f.PercServiceUtils.makeRequest(f.perc_paths.PATH_LAST_EXISTING+L,f.PercServiceUtils.TYPE_GET,(K!=null&&K)?true:false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}})}function z(K,L){f.PercServiceUtils.makeRequest(f.perc_paths.PATH_VALIDATE_EXIST+K,f.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){L(f.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);L(f.PercServiceUtils.STATUS_ERROR,O)}},null,null,null,true)}function q(M,N,K,L,Q){var P;if(L=="section"){P=I18N.message("perc.ui.finder.section.delete@Title")}else{P=I18N.message("perc.ui.finder.folder.delete@Title")}var O=3600000;f.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:P,question:C(M,K,L),success:function(){var S="EMPTY";if(f("#perc_delete_folder_force").length>0){S=f("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var R={DeleteFolderCriteria:{path:N,skipItems:S}};f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(R),timeout:O,success:Q,error:H});f.unblockUI()},width:500})}function B(N,K,L,O){var M="";q(M,N,K,L,O)}function h(K){var L=f.PercServiceUtils.extractDefaultErrorMessage(errors);var M="Failed to delete the folder.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(L!="")?L:M})}function H(M){var K=f.PercServiceUtils.extractDefaultErrorMessage(M);var L="Failed to delete the folder.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(K!="")?K:L})}function C(O,L,Q){var K;var P;var S="";var R="";if(Q=="Assets"){K="perc.ui.finder.folder.delete@ConfirmAssets";P="perc.ui.finder.folder.delete@WarningAssets";var N=O.indexOf("AssetsNotAuthorized");if(O.indexOf("AssetsNotAuthorized")>-1){S+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(O.indexOf("AssetsInUseTemplates")>-1){S+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(O.indexOf("AssetsInUsePages")>-1){S+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";R="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(Q=="fsfolder"){K="perc.ui.finder.fsfolder.delete@Confirm";P="perc.ui.finder.fsfolder.delete@Warning"}else{if(Q=="Sites"){K="perc.ui.finder.folder.delete@ConfirmPages";P="perc.ui.finder.folder.delete@WarningPages"}else{K="perc.ui.finder.section.delete@Confirm";P="perc.ui.finder.section.delete@Warning"}if(O.indexOf("PagesNotAuthorized")>-1){S+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(O.indexOf("PagesInUseTemplates")>-1){S+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(O.indexOf("PagesInUsePages")>-1){S+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";R="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var M;if(O=="Success"){M=I18N.message(K,[L])}else{M=I18N.message(P,[L])+"<br/><br/>"}return M+S+R}function b(L,K){f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+L,f.PercServiceUtils.TYPE_GET,true,function(N,M){K(N,M)})}function p(K,L){f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,f.PercServiceUtils.TYPE_POST,true,function(N,M){L(N,M)},K)}function d(M,L,N){var K=f.perc_paths.RENDER_LINK_PREVIEW+"/"+M;if(L=="image"){K+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{K+="/default"}f.PercServiceUtils.makeJsonRequest(K,f.PercServiceUtils.TYPE_GET,true,function(P,O){if(P==f.PercServiceUtils.STATUS_SUCCESS){N(true,O.data)}else{var Q=f.PercServiceUtils.extractDefaultErrorMessage(O.request);N(false,Q)}})}})(jQuery);(function(h){var B="NONE";var v="READER";var E="ASSIGNEE";var w="ADMIN";h.PercUserService={ACCESS_NONE:B,ACCESS_READ:v,ACCESS_WRITE:E,ACCESS_ADMIN:w,getUsers:I,findUser:y,findDirectoryUsers:z,importDirectoryUsers:A,getDirectoryStatus:d,getRoles:J,createUser:p,deleteUser:D,updateUser:f,findRole:x,deleteRole:C,updateRole:e,createRole:q,getAvailableUsers:b,getAccessLevel:H,validateDeleteRole:G,validateDeleteUsers:n};function I(L){var K=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_USERS,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){M.data.UserList.users=F(M.data.UserList.users);L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function y(M,L){var K=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_FIND+"/"+M,h.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){N.data.User.name=N.data.User.name.toString();L(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);L(h.PercServiceUtils.STATUS_ERROR,P)}})}function z(M,N){if(M==null){N(h.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}M=M.replace(/%+$/,"");var L=h.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(M)+"%25";var K=this;h.PercServiceUtils.makeJsonRequest(L,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{try{var R=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,R)}catch(Q){N(h.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function A(L,M){if(L==null||L==undefined||L.ImportUsers.externalUsers.length==0){M(h.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var K=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_IMPORT,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},L)}function d(L){var K=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_STATUS,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function J(L){var K=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ROLES,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){M.data.RoleList.roles=F(M.data.RoleList.roles);L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function p(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_CREATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function D(M,L){var K=this;h.PercServiceUtils.makeDeleteRequest(h.perc_paths.USER_DELETE+"/"+M,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);L(h.PercServiceUtils.STATUS_ERROR,P)}})}function f(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function x(M,N){var K=this;var L={psstring:{value:M}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_FIND,h.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){O.data.Role.name=O.data.Role.name.toString();N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}},L)}function C(L,M){var K={psstring:{value:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function q(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_CREATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function e(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function b(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_AVAILABLE_USERS,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){N.data.UserList.users=F(N.data.UserList.users);M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function H(N,P,Q,L,O){var K=this;var M;if(N!=null){M={AccessLevelRequest:{type:N,itemId:P,parentFolderPath:L}}}else{M={AccessLevelRequest:{itemId:P,parentFolderPath:L}}}h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ACCESS_LEVEL,h.PercServiceUtils.TYPE_POST,(typeof(O)!="undefined"&&O!=null&&O)?true:false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){Q(h.PercServiceUtils.STATUS_SUCCESS,R.data.AccessLevel.accessLevel)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(h.PercServiceUtils.STATUS_ERROR,T)}},M)}function G(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function n(K,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_REMOVE_USERS_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},K)}function F(K){K=h.perc_utils.convertCXFArray(K);h.each(K,function(M,L){K[M]=L.toString()});return K}})(jQuery);(function(e){e.PercWebResourcesService={deleteFile:b,validateFileUpload:d};function n(v,w,p,q,y){var x;if(q=="section"){x=I18N.message("perc.ui.finder.section.delete@Title")}else{x=I18N.message("perc.ui.finder.folder.delete@Title")}e.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:x,question:f(v,p,q),success:function(){var A="EMPTY";if(e("#perc_delete_folder_force").length>0){A=e("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var z={DeleteFolderCriteria:{path:w,skipItems:A}};e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.ajax({url:e.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(z),success:y,error:cbDfErrors});e.unblockUI()},width:500})}function h(v){var p=e.PercServiceUtils.extractDefaultErrorMessage(v);var q="Could not delete the file.";e.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete File Error",content:(p!="")?p:q})}function f(v){var q;var p="";p="perc.ui.finder.fsfile.delete@Filename";q="perc.ui.finder.fsfile.delete@Confirm";var w;w=I18N.message(p,[v]);w=w+"<br /><br />"+I18N.message(q,[v]);return w}function b(q,p,w){var v=I18N.message("perc.ui.finder.fsfile.delete@Title");e.perc_utils.confirm_dialog({id:"perc-finder-delete-fsfile",title:v,question:f(p),success:function(){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.PercServiceUtils.makeDeleteRequest(e.perc_paths.WEBRESOURCESMGT+q,false,function(y,x){if(y==e.PercServiceUtils.STATUS_SUCCESS){w(e.PercServiceUtils.STATUS_SUCCESS,x.data)}else{h(x.request)}});e.unblockUI()},width:500})}function d(p,v,q){p="/"+p.slice(3).join("/")+"/"+v;e.PercServiceUtils.makeRequest(e.perc_paths.WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD+p,e.PercServiceUtils.TYPE_GET,false,function(x,w){q(x,w)})}})(jQuery);(function(v){v.PercWorkflowService=function(){return{checkIn:B,checkOut:p,forceCheckOut:q,transition:H,getTransitions:D,isCheckedOutToCurrentUser:I,isApproveAvailableToCurrentUser:w,getWorkflowObject:x,createNewWorkflowStep:f,deleteWorkflowStep:b,updateWorkflowStep:n,getStatusByWorkflow:h,getWorkflowList:G,getWorkflows:E,createWorkflow:d,updateWorkflow:z,deleteWorkflow:C,bulkApproveItems:y,getBulkApproveStatus:e,getDefaultWorkflow:A}};function h(L,K){var J="/Rhythmyx/services/workflowmanagement/workflows/"+v.perc_utils.encodeURL(L)+"/states/choices";K=K==null?function(){}:K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,K)}function p(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_CHECKOUT+"/"+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function B(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_CHECKIN+"/"+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function D(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_TRANSITIONS+"/"+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function H(L,K,N,M){if(v.perc_utils.isBlankString(L)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}M=M==null?function(){}:M;var J=v.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+L+"/"+K+"?comment="+N;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,M)}function q(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function I(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function w(K,L){if(v.perc_utils.isBlankString(K)){v.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}L=L==null?function(){}:L;var J=v.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+K;v.PercServiceUtils.makeJsonRequest(J,v.PercServiceUtils.TYPE_GET,true,L)}function x(J,M){var L=v.perc_paths.WORKFLOW_STEPPED+J;var K=function(N,O){if(N==v.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,[O.data,O.textstatus])}};v.PercServiceUtils.makeJsonRequest(L,v.PercServiceUtils.TYPE_GET,false,K)}function n(J,O,K,N){var M=v.perc_paths.WORKFLOW_STEPPED+J+"/steps/"+O;var L=function(P,Q){if(P==v.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};v.PercServiceUtils.makeJsonRequest(M,v.PercServiceUtils.TYPE_PUT,false,L,K)}function f(J,O,K,N){var M=v.perc_paths.WORKFLOW_STEPPED+J+"/steps/"+F(O);if((O.indexOf("/")!=-1)||(O.indexOf("\\")!=-1)||(O.indexOf(";")!=-1)||(O.indexOf('"')!=-1)){K.Workflow.workflowSteps[0].stepName=O.replace(/[\\\/\;"]/g,"#")}var L=function(P,Q){if(P==v.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};v.PercServiceUtils.makeJsonRequest(M,v.PercServiceUtils.TYPE_POST,false,L,K)}function b(J,N,M){var L=v.perc_paths.WORKFLOW_STEPPED+J+"/steps/"+N;var K=function(O,P){if(O==v.PercServiceUtils.STATUS_ERROR){M(false,[P.request,P.textstatus,P.error])}else{M(true,[P.data,P.textstatus])}};v.PercServiceUtils.makeJsonRequest(L,v.PercServiceUtils.TYPE_DELETE,false,K)}function G(L){var K=v.perc_paths.WORKFLOW_STEPPED;var J=function(M,N){if(M==v.PercServiceUtils.STATUS_ERROR){L(false,[N.request,N.textstatus,N.error])}else{N.data.EnumVals.entries=v.perc_utils.convertCXFArray(N.data.EnumVals.entries);L(true,[N.data,N.textstatus])}};v.PercServiceUtils.makeJsonRequest(K,v.PercServiceUtils.TYPE_GET,false,J)}function A(L){var K=v.perc_paths.DEFAULT_WORKFLOW_META;var J=function(M,N){if(M==v.PercServiceUtils.STATUS_ERROR){L(false,[N.request,N.textstatus,N.error])}else{N.data.EnumVals.entries=v.perc_utils.convertCXFArray(N.data.EnumVals.entries);L(true,N.data)}};v.PercServiceUtils.makeJsonRequest(K,v.PercServiceUtils.TYPE_GET,false,J)}function E(L){var K=v.perc_paths.WORKFLOW_META;var J=function(M,N){if(M==v.PercServiceUtils.STATUS_ERROR){L(false,[N.request,N.textstatus,N.error])}else{L(true,[N.data,N.textstatus])}};v.PercServiceUtils.makeJsonRequest(K,v.PercServiceUtils.TYPE_GET,false,J)}function d(J,K,N){var M=v.perc_paths.WORKFLOW_STEPPED+F(J);if((J.indexOf("/")!=-1)||(J.indexOf("\\")!=-1)||(J.indexOf(";")!=-1)||(J.indexOf('"')!=-1)){K.Workflow.workflowName=J.replace(/[\\\/\;"]/g,"#")}var L=function(O,P){if(O==v.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};v.PercServiceUtils.makeJsonRequest(M,v.PercServiceUtils.TYPE_POST,false,L,K)}function z(N,J,M){var L=v.perc_paths.WORKFLOW_STEPPED+N;var K=function(O,P){if(O==v.PercServiceUtils.STATUS_ERROR){M(false,[P.request,P.textstatus,P.error])}else{M(true,[P.data,P.textstatus])}};v.PercServiceUtils.makeJsonRequest(L,v.PercServiceUtils.TYPE_PUT,false,K,J)}function F(J){var K=J.toString();K=K.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(K))}function C(J,M){var L=v.perc_paths.WORKFLOW_STEPPED+J;var K=function(N,O){if(N==v.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,[O.data,O.textstatus])}};v.PercServiceUtils.makeJsonRequest(L,v.PercServiceUtils.TYPE_DELETE,false,K)}function y(J,M){var L=v.perc_paths.WORKFLOW_BULK_APPROVE;var K=function(N,O){if(N==v.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,[O.data,O.textstatus])}};v.PercServiceUtils.makeJsonRequest(L,v.PercServiceUtils.TYPE_POST,false,K,J)}function e(J,K,N){var M=v.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(K){M+="/full/"+J}else{M+="/processed/"+J}var L=function(O,P){if(O==v.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};v.PercServiceUtils.makeJsonRequest(M,v.PercServiceUtils.TYPE_GET,false,L)}})(jQuery);(function(d){d.PercImportProgressDialog=function b(G){var h={IDS:{MAIN_DIALOG:"perc_import_progress_dialog",MAIN_DIALOG_CLOSE_BUTTON:"perc_import_progress_dialog_close",MAIN_DIALOG_CLOSE_DISABLED_BUTTON:"perc_import_progress_dialog_close_disabled",MAIN_DIALOG_DONE_BUTTON:"perc_import_progress_dialog_done",MAIN_DIALOG_DONE_DISABLED_BUTTON:"perc_import_progress_dialog_done_disabled"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.ImportProgressDialog.title@Import"),IMPORT_ERROR_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import failed message"),IMPORT_SUCCESS_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import succeded message")},OTHER:{EVENTS_ENABLE_DONE_BUTTON:"enableDoneButton",POLLING_PERIOD_DURATION:100,IMPORT_LOG_URL:d.perc_paths.VIEW_IMPORT_LOG+"?templateId="}};var v={Done:{id:h.IDS.MAIN_DIALOG_DONE_BUTTON,click:function(K){G.onSuccessCallback(I)}},"Done Disabled":{id:h.IDS.MAIN_DIALOG_DONE_DISABLED_BUTTON},"Close Normal":{id:h.IDS.MAIN_DIALOG_CLOSE_BUTTON,click:function(){C=true;if(G.backgroundRefreshCallback!==undefined&&q===true){G.backgroundRefreshCallback()}B.remove()}}};var F={id:h.IDS.MAIN_DIALOG,title:h.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:true,width:686,height:"auto",percButtons:v};var y=d("<div/>");var B;var z;var I;var q=false;var x=-1;var E;var C=false;function D(K){E='<div class="progress">';E+='<p class="progress-message">&nbsp;</p>';E+='<div class="progress-bar-container">';E+='<div class="progress-bar"></div>';E+="</div>";E+='<div class="error-message">';E+=h.TEXT.IMPORT_ERROR_MESSAGE;E+="</div>";E+='<div class="success-message">';E+=h.TEXT.IMPORT_SUCCESS_MESSAGE;E+="</div>";E+="</div>";E=d(E);y.append(d("<div>").append(E));if(K.showVideo===true){y.append(d('<div align="center" style="margin-top:24px;height: 315px; overflow:hidden">').append(d('<iframe id="perc_import_video" src="//help.percussion.com/in-product/single2" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="560px" height="0px" style="display: block; overflow: hidden">')).append(d('<img id="perc_import_image" src="../images/images/ImportVideoNotFound.png" width="560px" height="0px">')))}y.append(d("<div>").append('<p class="hint">Ask questions. Get answers. Visit the <a target="_blank" href="http://cm1community.percussion.com/percussion" title="Percussion Community">Percussion Community</a> to access Video Tutorials, Forums, and more.</p>'));if(K.showVideo===true){y.append(d('<img height="0px" width="0px" src="http://help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(M).load(L))}function M(){d("#"+h.IDS.MAIN_DIALOG).find("#perc_import_image").attr("height","315px")}function L(){d("#"+h.IDS.MAIN_DIALOG).find("#perc_import_video").attr("height","315px")}B=d(y).perc_dialog(F);e();A()}function e(){var K=d("#"+v["Done Disabled"].id);var L=d("#"+v.Done.id);L.hide();d("#"+h.IDS.MAIN_DIALOG).bind(h.OTHER.EVENTS_ENABLE_DONE_BUTTON,function(N,M){J(M)})}function J(K){var M=d("#"+v.Done.id),L=d("#"+v["Done Disabled"].id);if(K===true){M.show();L.hide()}else{M.hide();L.show()}}function A(){G.startProgressCallback(function(L,K){if(L!=d.PercServiceUtils.STATUS_SUCCESS){n()}else{z=K;p()}})}function p(){if(q===true){return}G.pollingProgressCallback(z,function(L,N){if(L!=d.PercServiceUtils.STATUS_SUCCESS||N.status<0){n()}else{var K=E.find(".progress-message");var M=E.find(".progress-bar");if(N.status>x){if(N.message!==undefined&&N.message.length>0){N.message=N.message.charAt(0).toUpperCase()+N.message.slice(1)+"...";K.html(N.message)}M.css("width",N.status+"%");x=N.status}if(N.status==100){q=true;if(G.backgroundRefreshCallback!==undefined&&C===true){G.backgroundRefreshCallback();return}w();return}setTimeout(p,h.OTHER.POLLING_PERIOD_DURATION)}})}function f(){E.find(".progress-message").css("visibility","hidden");E.find(".progress-bar-container").css("visibility","hidden")}function n(){f();E.find(".error-message").show()}function w(){G.importResultCallback(z,function(K,L){I=L;H(I);f();E.find(".success-message").show();J(true)})}function H(){function K(M){var L=E.find('a[title="Download the import log here"]');L.attr("href",h.OTHER.IMPORT_LOG_URL+M)}if(I.id!==undefined){K(I.id)}else{d.PercSiteService.getTemplates(I.Site.name,function(L,M){K(M.TemplateSummary[0].id)})}}D(G)}})(jQuery);var $perc_newSiteDialogLayout;(function(d){var f;d.perc_createNewSiteDialog=function(z){var y=null;f=d("<div></div>").perc_wizard({steps:2,modal:true,resizable:false,templateUrl:"../jsp/dialogs/perc_newSiteDialog.jsp",title:I18N.message("perc.ui.newsitedialog.title@Create Site"),height:"auto",width:690,open:function(){var B=d("#sitename"),D=d("#templatename"),E=d("#url"),A=d("input#type_url");if(!$perc_newSiteDialogLayout){$perc_newSiteDialogLayout=true;d.perc_filterField(B,d.perc_textFilters.HOSTNAME);d.perc_filterField(D,d.perc_textFilters.URL);d("input[type=radio]").change(function(F){var G=d(this);if(G.attr("id")!=="type_url"){E.attr("readonly","readonly").attr("disabled","true");p(E)}else{E.removeAttr("readonly").removeAttr("disabled")}});var C=d("#perc_templateList").perc_imageselect({hardSelect:false,onSelect:function(G,F){d("#perc_selectedTemplate img").remove();d("#perc_selectedTemplate").html("<img src='"+F+"'/><br/><span>"+G.split(".")[2]+"</span>");d("#selectedtemplate").val(G)}});v();d("#perc-select-template-type").change(function(){if(d(this).val()=="base"){d("#perc-base-template-lib").show();d("#perc-resp-template-lib").hide()}else{d("#perc-base-template-lib").hide();d("#perc-resp-template-lib").show()}});y=d("#perc_newSiteDialogForm").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:e(),messages:b(),showErrors:function(F,G){if(this.pendingRequest<1){this.defaultShowErrors();var H=d("#perc_newSiteDialogForm");H.find(".perc_dialog_field.perc_field_success").prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");H.find(".perc_dialog_field.perc_field_error").prevAll(".perc_dialog_label").addClass("perc_dialog_label_error");d(this.currentElements).removeClass(this.settings.errorClass)}}})}else{n()}E.removeAttr("readonly").removeAttr("disabled");p(B);p(E);A.attr("checked",true)},onOk:function(){w(z)},onNext:h,onValidate:function(){return y.form()}});return f};function h(E){var J=f.find("select[name=sitename-select]");if(J.length>0){f.find("input[name=sitename]").val(J.val())}var H=d("#sitename"),D=d("#url"),y={templateName:undefined,templateId:undefined,pageId:undefined},A,F=true;function G(K){d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:K})}function B(K,L){if(K!=d.PercServiceUtils.STATUS_SUCCESS){G(L);return}y.templateName=L.Site.templateName;y.tabId="perc-tab-layout";A=d.perc_paths.SITES_ROOT+"/"+L.Site.name;d.PercSiteService.getTemplates(L.Site.name,I)}function I(K,L){if(K!=d.PercServiceUtils.STATUS_SUCCESS){G(L);return}y.templateId=L.TemplateSummary[0].id;d.PercPathService.getFolderPathItem(A,z)}function z(L,O){if(L!=d.PercServiceUtils.STATUS_SUCCESS){G(O);return}var N;for(var M=0;M<O.PathItem.length;M++){if(O.PathItem[M].category=="LANDING_PAGE"){N=O.PathItem[M];M=O.PathItem.length}}y.pageId=N.id;var K=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_DESIGN,C.name,null,null,null,N.path,null,y)}if(f.find("input[type=radio]").filter(":checked").attr("id")==="type_url"){var C={name:d.trim(H.val()),baseUrl:d.trim(D.val())};if(!(/^(https?):\/\//i).test(C.baseUrl)){C.baseUrl="http://"+C.baseUrl}F=false;d(".ui-dialog-titlebar .ui-icon-closethick").click();d.PercImportProgressDialog({showVideo:true,backgroundRefreshCallback:function(){d.perc_finderInstance.refresh()},onSuccessCallback:function(K){B("success",K)},startProgressCallback:function(K){d.PercSiteService.createSiteFromUrlAsync(C,function(M,L){K(M,L)})},pollingProgressCallback:d.PercSiteService.createSiteFromUrlStatus,importResultCallback:d.PercSiteService.createSiteFromUrlResult})}return F}function w(z){var y=x();y.selectedtemplate=d("#perc-select-template-type").val()=="base"?y.perc_selected_basetemplate:y.perc_selected_resptemplate;if(y.selectedtemplate.length==0){d.perc_utils.alert_dialog({title:"Error",content:"Please select a template for your homepage."});return}if(y.templatename==null||d.trim(y.templatename)==""){d.perc_utils.alert_dialog({title:"Error",content:"Template name cannot be blank."});return}var A={Site:{name:y.sitename,label:y.sitename,description:y.description,homePageTitle:"Home",navigationTitle:"Home",baseTemplateName:y.selectedtemplate,templateName:d.trim(y.templatename)}};d.PercBlockUI();d(".ui-dialog-titlebar .ui-icon-closethick").click();d.ajax({url:d.perc_paths.SITE_CREATE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(A),success:function(C,B){z(y.sitename);d.unblockUI()},error:function(D,B,C){var E=d.PercServiceUtils.extractDefaultErrorMessage(D);d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:E})}})}function n(){d("#perc_newSiteDialog .perc_dialog_field").each(function(){d(this).val("")});d("#perc_selectedTemplate").html("");d(".perc_imageselect_selected").removeClass("perc_imageselect_selected")}function x(){var y=new Object();d("#perc_newSiteDialog .perc_dialog_field").each(function(){y[this.id]=d(this).val()});return y}function v(){var z=d("#perc-base-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"base",hiddenFieldId:"perc_selected_basetemplate"});var y=d("#perc-resp-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"resp",hiddenFieldId:"perc_selected_resptemplate"})}function q(A,z,B,y){for(i=0;i<y.SiteSummary.length;i++){if((y.SiteSummary[i].name+"").toLowerCase()==B.toLowerCase()){return false}}return true}function e(){var y={sitename:{required:true,perc_remote:{url:d.perc_paths.SITES_ALL,contentType:"application/json",type:"GET",dataType:"json",handler:q}},url:{required:"input[type=radio]#type_url:checked",maxlength:2000,noBinary:"noBinary"},description:{maxlength:255},selectedtemplate:{required:true}};return y}function b(){var y={sitename:{required:"Site name is a required field.",perc_remote:"The site name must be unique."},url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."},templatename:{required:"Template name is a required field.",perc_remote:"The template name must be unique."},selectedtemplate:{required:"Selected template is required."}};return y}function p(z){z.prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");var y=z.next();if(y.find(".perc_field_error").length>0){z.removeClass("perc_field_error");y.remove()}}})(jQuery);(function(b){b.perc_iframe_fix=function(d){b.perc_iframe_scope="perc-iframe-scope";var w=false;var n=b('<div class="perc-iframe-overlay-dnd-container"/>');b("body").append(n);n.height(d.height()).width(d.width()).addClass("ui-layout-ignore").css({overflow:"hidden",position:"absolute",left:"-10000px",top:"0px",zIndex:1000});q();function e(){n.css({left:d.position().left,top:d.position().top});n.height(d.height());n.width(d.width())}function x(){n.css({left:"-10000px",top:"0px"})}function f(){var y=d.contents().find(":data(droppable)");y.each(function(){var G=b(this);var I=b.data(this,"droppable");var E=b("<div/>").addClass("allDroppablesHelpers").addClass("perc-iframe-dnd-overlay-droppable").attr("for",G.attr("id")).width(G.outerWidth()).height(G.outerHeight());n.append(E);var D,B;var C=d;if(b.browser.msie){var A=C[0].contentWindow;var H=A.document.documentElement;D=H.scrollLeft;B=H.scrollTop}else{D=d[0].contentWindow.scrollX;B=d[0].contentWindow.scrollY}var z=b(this).offset().left-D;var F=b(this).offset().top-B;if(b.browser.mozilla||b.browser.safari){z-=window.scrollX;F-=window.scrollY}E.css({position:"absolute",left:z+"px",top:F+"px"});E.droppable({greedy:I.options.greedy,tolerance:I.options.tolerance,accept:I.options.accept,over:function(J){I._over.call(I,J)},activate:function(J){I._activate.call(I,J)},deactivate:function(J){I._deactivate.call(I,J)},out:function(J){I._out.call(I,J)},drop:function(J){I._drop.call(I,J)}})})}function v(){n.empty()}function p(){if(!w){w=true;e();f()}}function h(){x();v();w=false}function q(){var y=b("<div/>").addClass("ui-layout-ignore").droppable({addClasses:false,activate:function(z,A){p(A.draggable)},deactivate:function(){setTimeout(h,100)}});b("body").append(y)}}})(jQuery);(function(h){function n(A,B,y,z){if(!h.perc_fakes.page_service.create_page){h.perc_pathmanager.get_folder_path(A,function(C){d(C,B,y,z)},z)}else{if(false){z("Could not create new page: random failure")}else{y("16777215-101-733")}}}function d(z,D,y,B){var C={};h.each(D,function(){C[this.name]=this.value});var F=null;var E=null;var A=C.addToRecent?true:false;if(C.landingpage){F=h.perc_paths.SECTION_CREATE;pass_in={CreateSiteSection:{pageName:C.page_name,pageTitle:C.page_title,templateId:C.template,pageUrlIdentifier:C.page_name,pageLinkTitle:C.page_linktext,folderPath:z,addToRecent:true}}}else{F=h.perc_paths.PAGE_CREATE;pass_in={Page:{name:C.page_name,title:C.page_title,templateId:C.template,linkTitle:C.page_linktext,folderPath:z,addToRecent:true}}}h.ajax({dataType:"json",data:JSON.stringify(pass_in),contentType:"application/json",type:"POST",url:F,success:y,error:B})}function q(A,y,z){h.ajax({url:h.perc_paths.PAGE_EDIT+"/"+A,type:"GET",success:y,error:z,dataType:"text"})}function b(A,z,y){h.ajax({url:h.perc_paths.PAGE_DELETE+"/"+A,type:"DELETE",success:function(){z()},error:y})}function w(A,z,y){h.ajax({url:h.perc_paths.SITE_DELETE+"/"+A,type:"DELETE",success:z,error:y})}function p(z,A,B,y){if(!h.perc_fakes.page_service.new_asset){y("New asset not yet implemented!")}else{B("54321")}}function e(z,y,D,A){if(!h.perc_fakes.page_service.get_widget_ctypes){function C(E){var F={};h.each(E.AssetDropCriteria,function(){F[this.widgetId]=this.supportedCtypes});D(F)}h.ajax({url:h.perc_paths.ASSET_WIDGET_DROP_CRITERIA+z+"/"+y,type:"GET",dataType:"json",success:C,error:A})}else{var B={"12345":["percPage","article"],"4567":[]};D(B)}}function x(y,z,A){h.ajax({url:h.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:z,dataType:"xml",processData:false,success:A,error:function(D,B,C){h.unblockUI();h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(D)})}})}function f(y,z){h.ajax({url:h.perc_paths.PAGE_CREATE+"/"+y,type:"GET",dataType:"text",success:z,error:function(C,A,B){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(C)})}})}function v(A,y,z){h.ajax({url:h.perc_paths.PAGE_PREVIEW+A,type:"POST",contentType:"text/xml",dataType:"xml",data:y,processData:false,success:z,error:function(D,B,C){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(D)})}})}h.perc_pagemanager={save_page:x,render_region:v,load_page:f,create_new_page:n,render_page:q,new_asset:p,delete_page:b,delete_site:w,get_widget_ctypes:e,createPage:d}})(jQuery);(function(n){var f=n.perc_utils;function p(B,A,x,z){q(B,function(C){A(C.PathItem)},y(x),z);function y(C){return function(D){var E=n.map(D.PathItem,function(F){var G=F.path.split("/");if(G[G.length-1]==""){G.pop()}F.path=n.map(G,function(H){return H});F.path_component=G[G.length-1];return F});E=n.grep(E,function(F){return F.type!="percNavTree"&&F.name!=".system"});C(E)}}}function q(C,B,x,z){if(C.length<=2){d(C,true,x,z)}else{var y=n.map(C,function(E){return E});var A=y.pop();function D(F){var E=n.grep(F.PathItem,function(I){var G=I.path.split("/");var H=G.pop();if(H==""){H=G.pop()}return H==A});if(E.length==0){z("Item not found")}else{if(E[0].leaf==true){d(C,false,B,z)}else{d(C,true,x,z)}}}d(y,true,D,z)}}function v(z,x,y){x(z[1])}function e(z,x,y){d(z,false,function(A){x(A.PathItem["folderPath"])},y)}function h(A,y,z){var x=n.map(A,function(B){return B});q(A,function(){x.pop();d(x,true,function(B){y(B,x)},z)},function(B){y(B,x)},z)}function w(C,y,B){var z=C.join("/")+"/";var A=n.perc_utils.acop(C);var x=A.pop();d(A,true,function(E){var D=n.grep(E.PathItem,function(F){return F.name==x});if(D.length>0){B(I18N.message("perc.ui.saveasdialog.error@Duplicate folder"))}else{z=n.perc_utils.encodeURL(z);n.ajax({type:"GET",success:y,error:B,url:n.perc_paths.PATH_ADD_FOLDER+z,dataType:"json"})}},B)}function d(D,B,E,A,y){var z;var C;if(y){z=D;C=n.perc_paths.PATH_PAGINATED_FOLDER+z}else{z=n.perc_utils.encodeURL(D.join("/")+"/");C=n.perc_paths.PATH_FOLDER+z}if(!n.perc_fakes.path_service){if(B){n.ajax({type:"GET",success:E,error:function(H,F,G){if(H.status!=0){A("Error finding path "+z)}},url:C,dataType:"json",cache:false})}else{n.ajax({type:"GET",success:E,error:function(H,F,G){if(H.status!=0){A("Error finding path "+z)}},url:n.perc_paths.PATH_ITEM+z,dataType:"json",cache:false})}}else{var x={"/":{PathItem:[{name:"Sites",leaf:"false",path:"/Sites/"}]},"/Sites/":{PathItem:[{name:"Test",leaf:"false",path:"/Sites/Test/"},{name:"TestTwo",leaf:"false",path:"/Sites/TestTwo/"}]},"/Sites/Test/":{PathItem:[{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}]},"/Sites/Test/Test/":{PathItem:{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}},"/Sites/TestTwo/":{PathItem:[{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}]},"/Sites/TestTwo/TestTwo/":{PathItem:{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}}};E(x[z])}}function b(A,B){var x=function(C){B(true,C.ItemProperties)};var y=function(E,C,D){B(false,n.PercServiceUtils.extractDefaultErrorMessage(E))};var z=n.perc_utils.encodeURL(A);n.ajax({type:"GET",success:x,error:y,url:n.perc_paths.PATH_ITEM_PROPERTIES+z,dataType:"json",cache:false})}n.perc_pathmanager={is_leaf:p,open_path:d,get_folder_path:e,get_site_id:v,open_containing_folder:h,add_folder:w,getItemProperties:b}})(jQuery);(function(b){b.perc_build_new_folder_button=function(d,n){var h=b.perc_utils;var q=["",b.perc_paths.SITES_ROOT_NO_SLASH];var f={};var x=null;var e=b("<a id='perc-finder-new-folder' class='perc-font-icon ui-disabled' href='#' title='Click to create new folder'><span class='icon-plus'></span><span class='icon-folder-close'></span></a>").perc_button().click(function(){v()});function v(){b.PercFolderHelper().getAccessLevelByPath(q.join("/"),false,function(z,y){if(z==b.PercFolderHelper().PERMISSION_ERROR||y==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create a folder here."});return}else{b.PercBlockUI(b.PercBlockUIMode.CURSORONLY);b.PercPathService.createNewFolder(q.join("/"),function(B,A){if(B==b.PercServiceUtils.STATUS_SUCCESS){f=A;d.refresh(function(){var C=b(".perc-finder").css("visibility")=="visible";if(C){h.makeFolderEditable(f.PathItem)}});b.unblockUI()}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:A})}})}})}function p(y){q=y;w(true);if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){w(false)}else{if(y[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&y.length<4){w(false)}else{if(y.length==2&&y[1]==b.perc_paths.SITES_ROOT_NO_SLASH){w(false)}else{b.PercFolderHelper().getAccessLevelByPath(y.join("/"),true,function(A,z){if(A==b.PercFolderHelper().PERMISSION_ERROR||z==b.PercFolderHelper().PERMISSION_READ){w(false)}})}}}}function w(y){if(y){b(".perc-finder-menu #perc-finder-new-folder").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(v)}else{b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}d.addPathChangedListener(p);return e}})(jQuery);(function(b){b.perc_build_new_page_button=function(q,e){var p;var h=b('<a id="mcol-new-page" class="perc-font-icon" href="#" title="Click to create new page" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file"></span></a>').perc_button();function d(v){p=v;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){f(false)}else{if(v[1]==b.perc_paths.SITES_ROOT_NO_SLASH){h.show();f(true);if(v.length<3){f(false)}else{b.PercFolderHelper().getAccessLevelByPath(v.join("/"),true,function(x,w){if(x==b.PercFolderHelper().PERMISSION_ERROR||w==b.PercFolderHelper().PERMISSION_READ){f(false)}})}}else{if(v[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||v[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){h.hide()}}}}function f(v){if(v){h.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{h.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function n(){var w=q.getCurrentItem();var v="";if(w!=null){v=w.folderPaths;if(w.type=="Folder"){v=w.folderPath}}b.PercUserService.getAccessLevel("percPage",-1,function(y,x){if(y==b.PercServiceUtils.STATUS_ERROR||x==b.PercUserService.ACCESS_READ||x==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Page",content:"You are not authorized to create a new page."});return}else{if(e){e.confirm_if_dirty(function(){b.PercNewPageDialog().openDialog(p.join("/"))})}else{open_new_page_dialog(b.PercNewPageDialog().openDialog(p.join("/")),null)}}},v)}q.addPathChangedListener(d);return h}})(jQuery);(function(d){var b;d.perc_build_copy_page_button=function(n,v){var e=d("<a id='perc-finder-copy-page' href='#' title='Click to copy selected page'>Copy</a>").click(function(y){w()});function w(){d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);var B=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE");var A=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE");var y=d("#perc-finder-listview .perc-datatable-row-highlighted");if(B[0]==undefined&&A[0]==undefined&&y.size()==0){return}b=B.text();if(!b||b==""){b=A.text()}var D;if(y.size()>0){listSelectedRowData=y.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"){D=listSelectedRowData.id;b=listSelectedRowData.name}}else{if(B[0]!=undefined){D=B.attr("id")}else{D=A.attr("id")}}var z=n.getCurrentItem();var C="";if(z!=null){C=z.id}d.PercUserService.getAccessLevel("percPage",C,function(F,E){if(F==d.PercServiceUtils.STATUS_ERROR||E==d.PercUserService.ACCESS_READ||E==d.PercUserService.ACCESS_NONE){d.perc_utils.alert_dialog({title:"Copy Page",content:"You are not authorized to copy the page '"+b+".'"});d.unblockUI();return}else{D=D.replace("perc-finder-listing-","");f(D)}})}function f(y){var z=n.getCurrentPath();var A=n.getPathItemById(y);d.PercPageService.copyPage(y,function(C,B){if(C=="error"){x(B);n.refresh()}else{n.refresh(function(){var E=B.data.split("/");var D=E[E.length-1];z[z.length-1]=D;n.open(z)})}d.unblockUI()})}function x(y){y=y.replace("PAGE_NAME",b);d.perc_utils.alert_dialog({id:"perc-finder-copy-page-error",title:"Error",content:y})}function q(D){var A=D[D.length-1];if(D[1]==d.perc_paths.SITES_ROOT_NO_SLASH){if(D.length<4){p(false)}else{var C=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE.perc_last_selected");var B=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE.perc_last_selected");var y=d(".mcol-listing.perc-listing-type-Folder.perc-listing-category-FOLDER.ui-draggable.perc_last_selected.ui-droppable[title='"+A+"']").eq(0).attr("id");var E=d(".mcol-listing.perc-listing-type-Folder.perc-listing-category-SECTION_FOLDER.perc_last_selected.ui-droppable[title='"+A+"']").eq(0).attr("id");var z=d("#perc-finder-listview .perc-datatable-row-highlighted");if(z.size()>0){listSelectedRowData=z.data("percRowData");h(D,function(F){if(F&&(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE")){p(true)}else{p(false)}});return}else{if(C[0]!=undefined||B[0]!=undefined){h(D,function(F){if(!F||y!=undefined||E!=undefined){p(false)}else{p(true)}})}else{p(false)}}}}else{p(false)}}function h(z,A){var y=z.slice(0,z.length-1).join("/");d.PercFolderHelper().getAccessLevelByPath(y,false,function(C,B){if(C==d.PercFolderHelper().PERMISSION_ERROR){d.perc_utils.alert_dialog({title:"Error",content:B});return}else{A(!(B==d.PercFolderHelper().PERMISSION_READ));return}})}function p(y){if(y){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(w)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}n.addPathChangedListener(q);return e}})(jQuery);(function(b){b.perc_build_download_button=function(n,f){var e=b('<a id="perc-finder-download" href="#" title="Click to download the selected file">Download File</a>');function d(v){if(v[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&v.length>4){w=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(w==undefined){var w=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened.perc_last_selected").data("spec")}if(w!=undefined&&w.type=="FSFile"&&w.leaf){p(true);h(true);return}}p(false);h(false)}function h(v){if(v){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(q)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function q(){}function p(v){var w;if(v){w=b.perc_paths.WEBRESOURCESMGT+"/"+n.getCurrentPath().slice(3).join("/")}else{w="#"}e.attr("href",w)}n.addPathChangedListener(d);return e}})(jQuery);(function(b){b.perc_build_upload_button=function(n,f){var e=b('<a id="perc-finder-upload" href="#" title="Click to upload a file">Upload File...</a>').click(d);function p(q){if(q.length>3&&b.perc_paths.DESIGN_THEMES==q[0]+"/"+q[1]+"/"+q[2]+"/"+q[3]){h(true);return}h(false)}function h(q){if(q){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(d)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function d(){b.perc_upload_theme_file_dialog.open(n)}n.addPathChangedListener(p);return e}})(jQuery);(function(b){b.perc_build_folderproperties_button=function(d,h){var e=b('<a id="perc-finder-folderproperties" href="#" title="Folder properties">Folder properties</a>');var f=undefined;var v=undefined;function w(B){if(B.length>1&&B[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){q(false);v=undefined;return}f=b("#perc-finder-listview .perc-datatable-row-highlighted");if(f.length>0){v=f.data("percRowData");if(v.type!="Folder"&&v.type!="FSFolder"){f=undefined}}else{var C;C=".mcol-listing.perc-listing-type-FSFolder.mcol-opened";C+=", .mcol-listing.perc-listing-type-Folder.mcol-opened";var y=b(C);var A;for(A=0;A<y.length;A++){var z=b(y[A]);var x=z.data("spec").path;if(x==B.join("/")+"/"){f=z;v=z.data("spec")}}}if(f!=undefined&&f.length>0){q(true)}else{q(false);v=undefined}}function q(x){if(x){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(p)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function p(){if(v.category=="SYSTEM"){b.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  Its properties cannot be modified."});return}else{if(v.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){var x=pathItem.category=="SECTION_FOLDER"?"section":"folder";b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this "+x+"."});return}else{if(v.category=="SECTION_FOLDER"){b.perc_utils.alert_dialog({title:"Warning",content:"Use the navigation editor to change section properties."});return}}}b.PercFolderPropertiesDialog().open(v,function(z,y){if(y===undefined){if(z!==""&&z!==v.name){var A=v.folderPaths+"/"+z;A=A.substring(1);A=A.replace("/Folders/$System$","");b.perc_finder().open(A.split("/"))}else{b.perc_finder().refresh()}}})}function n(x){var y;if(x){y=b.perc_paths.WEBRESOURCESMGT+"/"+d.getCurrentPath().slice(3).join("/")}else{y="#"}e.attr("href",y)}d.addPathChangedListener(w);return e}})(jQuery);(function(b){b.perc_build_actions_button=function(C,f){var h=b.perc_build_copy_page_button(C,f);var n=b.perc_build_folderproperties_button(C,f);var E=b.perc_build_download_button(C,f);var A=b.perc_build_upload_button(C,f);var e=[h,n,E,A];var d=D(e).hover(q,w);var F='<div id="perc-finder-actions" ><a id="perc-finder-actions-button" class="perc-font-icon" title="Select an action" href="#"><span class="icon-cog"></span><span class="icon-caret-down"></span></a></div>';var p=b(F).append(d).hover(q,w);var B=false;function w(){B=false;setTimeout(function(){if(!B){x(false)}},500)}function q(G){var H=b(G.target);if(H.attr("id")==p.attr("id")){B=true;return}if(H.is("#perc-finder-actions *")){B=true;return}}function v(){if(b("#perc-finder-actions-button").hasClass("ui-disabled")){return false}else{if(d.css("display")=="none"){x(true)}else{x(false)}return false}}function x(I){if(I){var H=p.position().left+p.outerWidth()-d.outerWidth()-1;var G=p.position().top+p.outerHeight()+9;d.css("top",G).css("left",H).css("display","block")}else{d.hide()}}function z(G){var H=b("#perc-finder-actions-button");if(G){H.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(v)}else{H.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function D(H){var I=b('<ul class="perc-actions-menu box_shadow_with_padding">');var G=b('<li class="perc-actions-menu-item">');for(l=0;l<H.length;l++){G.clone().append(H[l]).appendTo(I)}return I}function y(){var G=e.length;var I=0;function H(){var J=b(this).hasClass("ui-enabled");if(G==1&&I==e.length-1){z(J);G=e.length;I=0}else{if(G==1&&I<e.length-1){z(true);G=e.length;I=0}else{if(!J){I++}G--}}}for(m=0;m<e.length;m++){e[m].bind("actions-change-enabled-state",H)}}y();return p}})(jQuery);(function(b){b.perc_build_delete_page_button=function(y,v){var f=b.perc_utils;var d=b.perc_finder();var p=["","site"];var q="<span id='perc-delete-warn-msg'>";var n="</span>";var e=b('<a id="perc-finder-delete" class="perc-font-icon icon-remove" title="Click to delete selected item" href="#" ></a>').unbind().perc_button().click(x);function x(){var A=p;if(b.perc_utils.isPathUnderDesign(A)){A=b.perc_utils.encodePathArray(p)}b.PercFolderHelper().getAccessLevelByPath(A.join("/"),false,function(C,B){if(C==b.PercFolderHelper().PERMISSION_ERROR){b.perc_utils.alert_dialog({title:"Error",content:B});y.refresh();return}else{if(B==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to delete this."});return}else{w()}}})}function w(){b.perc_pathmanager.open_path(f.acop(p),false,function(L){function K(N,Q,O){var P=I18N.message("perc.ui.deleteassetdialog.title@Delete Asset");F(N,"asset",P,function(){var R=L.PathItem["id"];b.PercAssetService.forceDeleteAsset(R,B(R,"asset"),K)})}function I(N,Q,O){var P=I18N.message("perc.ui.deletepagedialog.title@Delete Page");F(N,"page",P,function(){var R=L.PathItem["id"];b.PercPageService.forceDeletePage(R,B(R,"page"),I)})}function F(P,O,R,Q){var N=b.PercDeleteItemHelper.extractDeleteErrorMessage(P,L.PathItem["name"],O);if(N.canForceDelete){D(N.dialogid,R,N.content,N.chkBoxId,Q)}else{f.alert_dialog({id:N.dialogid,title:R,content:q+N.content+n})}}function D(S,Q,N,R,P){var O=b("<div/>").append(q+N+n).perc_dialog({id:S,title:Q,success:function(){if(b("#"+R).length>0){if(b("#"+R).get(0).checked){P()}}},width:500,resizable:false,percButtons:{Ok:{id:"perc-finder-delete-approved-ok",cls:"ui-state-disabled",click:function(){}},Cancel:{id:"perc-finder-delete-approved-cancel",cls:"perc-cancel",click:function(){O.remove()}}},open:function(){b("#"+R).click(function(){if(b(this).get(0).checked){b("#perc-finder-delete-approved-ok").click(function(){if(b("#"+R).length>0){if(b("#"+R).get(0).checked){P();O.remove()}}});b("#perc-finder-delete-approved-ok").removeClass("ui-state-disabled")}else{b("#perc-finder-delete-approved-ok").addClass("ui-state-disabled")}})}})}function H(){b.PercBlockUI();b.perc_pagemanager.delete_site(L.PathItem["name"],function(){dialog.remove();var N={type:"site",name:L.PathItem["name"]};d.fireActionEvent(d.ACTIONS.DELETE,N);setTimeout(function(){b.PercDirtyController.setDirty(false);b.PercNavigationManager.goToLocation(b.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(N){b.unblockUI();site_delete_handle_error(N)})}function G(){var N=L.PathItem["id"];b.PercAssetService.deleteAsset(N,function(){B(N,"asset")},K)}function C(){var N=L.PathItem["id"];b.PercRedirectHandler.createRedirect(L.PathItem.path,"","page").fail(function(O){b.perc_utils.alert_dialog({title:"Redirect creation error",content:O,okCallBack:function(){b.perc_pagemanager.delete_page(N,function(){B(N,"page")},I)}})}).done(function(){b.perc_pagemanager.delete_page(N,function(){B(N,"page")},I)})}function B(S,Q){setTimeout(function(){y.refresh()},200);var P=false;if(S==b.PercNavigationManager.getId()){P=true;v.clear()}var R={type:Q,id:S,isOpen:P};d.fireActionEvent(d.ACTIONS.DELETE,R);b("form.perc-template-pages-controls").submit();var N=jQuery.Event("click");N.deletedPageId=S;b(".resetPaging").trigger(N);var O=b.PercNavigationManager.getView();if(Q=="page"&&O!=b.PercNavigationManager.VIEW_EDITOR){J(O)}}function J(O){var P={templateId:memento.templateId,pageId:null};var N=$j.deparam.querystring();$j.PercNavigationManager.goToLocation(O,N.site,null,null,null,N.path,null,P)}if(L.PathItem["type"]=="percPage"){if(L.PathItem["category"]=="LANDING_PAGE"){return}else{b.PercPageService.validateDeletePage(L.PathItem["id"],function(){var O=b.PercDirtyController.dirtyObjectType;var N={id:"perc-finder-delete-confirm",title:"Delete Page",question:q+"Page: "+L.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletepagedialog.warning@Confirm")+n,success:function(){b.PercViewReadyManager.setProcessingFlag();var P=b.PercDirtyController.isDirty();v.confirm_if_dirty(function(){if(P){v.save(O,C)}else{C()}},function(){},{title:I18N.message("perc.ui.deletepagedialog.title@Delete Page"),question:"Page: "+L.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["page",O]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};f.confirm_dialog(N)},I)}}else{if(L.PathItem["type"]=="Folder"){if(L.PathItem["category"]=="FOLDER"){function E(){if(b.PercNavigationManager.isAdmin()){b.PercPathService.deleteFolderSkipValidation(p.join("/"),p[p.length-1],p[1],function(N){z(N)})}else{b.PercPathService.deleteFolder(p.join("/"),p[p.length-1],p[1],z)}}if(L.PathItem.path.match("^/Sites/")||L.PathItem.path.match("^//Sites/")){b.PercRedirectHandler.createRedirect(L.PathItem.path,"","folder").fail(function(N){b.perc_utils.alert_dialog({title:"Redirect creation error",content:N,okCallBack:function(){E()}})}).done(function(){E()})}else{E()}}else{return}}else{if(L.PathItem["type"]=="FSFolder"){var A=b.perc_utils.encodePathArray(p);b.PercPathService.deleteFSFolder(A.join("/"),p[p.length-1],z)}else{if(L.PathItem["type"]=="FSFile"){var A="";var M=L.PathItem["path"].split("/");M=M.slice(3,M.length-1);b.each(M,function(N,O){A=A+"/"+O});A=b.perc_utils.encodeURL(A);b.PercWebResourcesService.deleteFile(A,p[p.length-1],z)}else{b.PercAssetService.validateDeleteAsset(L.PathItem["id"],function(){var O=b.PercDirtyController.dirtyObjectType;var N={id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:q+I18N.message("perc.ui.deleteassetdialog.tag@Asset")+": "+L.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deleteassetdialog.warning@Confirm")+"<br/><br/>"+I18N.message("perc.ui.common.question@Continue")+n,success:function(){var P=b.PercDirtyController.isDirty();v.confirm_if_dirty(function(){if(P){v.save(O,G)}else{G()}},function(){},{title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:"Asset: "+L.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["asset",O]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};f.confirm_dialog(N)},K)}}}}},f.show_error)}function z(B){setTimeout(function(){y.refresh()},200);var A={type:"folder"};d.fireActionEvent(d.ACTIONS.DELETE,A)}function h(A){p=A;b.perc_pathmanager.open_path(f.acop(A),false,function(C){var E=C.PathItem.type;var B=C.PathItem.category;var D=(typeof(B)!="undefined")&&(B=="LANDING_PAGE"||B=="SECTION_FOLDER"||B=="SYSTEM");if(E=="Folder"&&C.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){D=true}else{if((B=="ASSET"||B=="PAGE")&&C.PathItem.accessLevel==b.PercFolderHelper().PERMISSION_READ){D=true}}if((E=="FSFolder"||E=="FSFile")&&p.length>=5&&C.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){D=false}if(!D&&p.length>2){if(E=="site"){b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-disabled").addClass("ui-enabled").unbind().click(x)}}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}},function(B){var C=b.PercServiceUtils.extractDefaultErrorMessage(B);b.perc_utils.alert_dialog({title:"Error",content:C})})}y.addPathChangedListener(h);return e}})(jQuery);(function(b){b.perc_build_preview_button=function(h,f){var d=b("<a id='perc-finder-preview' class='perc-font-icon icon-eye-open' href='#' title='Launch Preview'></a>").perc_button().click(function(q){p()});function p(){if(b("#perc-finder-listview .perc-datatable-row-highlighted").size()>0){var v=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(v.category=="LANDING_PAGE"||v.category=="PAGE"){h.launchPagePreview(v.id)}else{if(v.category=="ASSET"){h.launchAssetPreview(v.id)}}}else{var w=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");if(w.size()>0){h.launchPagePreview(w.data("spec").id)}else{if(q.size()>0){h.launchAssetPreview(q.data("spec").id)}}}}function n(y){var v=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");var w=b("#perc-finder-listview .perc-datatable-row-highlighted");if(y[1]=="Sites"&&y.length<4){e(false)}else{if(w.size()>0){listSelectedRowData=w.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"||listSelectedRowData.category=="ASSET"){e(true)}else{e(false)}}else{if(v.size()>0){var x=v.data("spec").path.split("/");if(x.length==y.length&&b(x).last()[0]==b(y).last()[0]){e(true)}else{e(false)}}else{if(q.size()>0){var x=q.data("spec").path.split("/");if(x.length==y.length&&b(x).last()[0]==b(y).last()[0]){e(true)}else{e(false)}}else{e(false)}}}}}function e(q){if(q){b("#perc-finder-preview").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(p)}else{b("#perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}h.addPathChangedListener(n);return d}})(jQuery);(function(b){var e={height:200,minWidth:952,minHeight:100,get_max_height:function f(){return b(window).innerHeight()-150}};b.perc_finder=function(){if(b.perc_finderInstance==null){b.perc_finderInstance=d()}return b.perc_finderInstance};function d(){b("body").append('<div id="perc-wide_scroll_div_one" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div id="wide_scroll_div_two" style="height:100px;width:100%"></div></div>');var Y=b("#perc-wide_scroll_div_one").width()-b("#wide_scroll_div_two").innerWidth();b("#perc-wide_scroll_div_one").remove();var ac="perc-finder-listing-";var ak=100;var P=true,x=false,ah="perc-finder-expand-state",F=F(),at=D(F),X=b.perc_utils,aC=[],C=null;actionListeners=[],openListeners=[],_finderPathIdArray={},path_changed=function(aO){aC=aO},finderOpenInProgress=false,lastClickPath=null,dragDelay=(b.PercNavigationManager.isAutoTest()?0:250),actions={DELETE:"delete",FINDER_OPEN_START:"open_start",FINDER_OPEN_END:"open_end"},isLibMode=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";b.perc_utils.preLoadImages("/cm/images/images/loading.gif");function aw(aQ){aQ.preventDefault();var aR,aP,aO,aS;aO=b(this).parents(".perc-finder-goto-or-search");aS=aO.find("input.perc-finder-goto-or-search:first");aR=aS.val();aP=/^\//.test(aR);if(aR){if(aP){b("#perc-finder-go-action").trigger("click")}else{b("#perc-finder-item-search").val(aR);b("#perc-finder-search-submit").trigger("click")}}return false}b("body").on("click",".perc-action-goto-or-search",aw);b.perc_filterField(b("#mcol-path-summary"),b.perc_textFilters.PATH);b("#mcol-path-summary").bind("keyup",function(aO){if(aO.keyCode==13){b("#mcol-path-summary").blur();aw.apply(this,[aO]);b("#mcol-path-summary").focus();aO.preventDefault();aO.stopPropagation()}if(aO.keyCode==27||aO.keyCode==9){b("#mcol-path-summary").val(K().join("/")).blur();b("#perc-finder-item-search").blur();aO.preventDefault();aO.stopPropagation()}ap(false)});b(document).mousedown(function(aO){if(aO.target.id!="perc-finder-go-action"&&aO.target.id!="mcol-path-summary"){b("#mcol-path-summary").blur();if(aO.target.id!="perc-finder-search-submit"&&aO.target.id!="perc-finder-listing-Search"&&b(aO.target).parents(".perc-datatable-row").length>0){b("#mcol-path-summary").val(K().join("/"))}}if(aO.target.id!="perc-finder-item-search"){b("#perc-finder-item-search").blur()}ap(false)});b("#perc-finder-go-action").click(function(){var aO=true;al(aO)});b(".perc-finder-outer").hover(function w(){b(this).removeClass("ui-disabled")},function ae(){b(this).addClass("ui-disabled")});function aL(aP){var aO=aP.split("/");for(i=0;i<aO.length;i++){if(aO[i]==".."){if(i-1>=0){aO.splice(i-1,2);i=i-2}else{aO.splice(i,1);i--}}if(aO[1]=="."){aO.splice(i,1);i--}}return aO.join("/")}function al(aQ){b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");b("#perc-finder-item-name").removeClass("mcol-opened");var aP=b.trim(b("#mcol-path-summary").val());var aO=K().join("/");aP=aP.replace(/\/(\/)+/g,"/");aP=aL(aP);aP=(aP.charAt(0)!="/")?"/"+aP:aP;aP=(aP=="/"||aP=="")?"/"+K()[1]:aP;if(aP==aO&&aQ==true&&(b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_SEARCH_RESULTS&&b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_RESULT)){return}else{b.PercPathService.validatePath(aP,function(aS,aR){if(aS==b.PercServiceUtils.STATUS_SUCCESS){b("#mcol-path-summary").val(aR);if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var aU=$j.PercComponentWrapper("perc-action-finder-go-clicked",["perc-ui-component-finder"]);var aT=$j.PercViewReadyManager.setWrapper(aU);if(!aT){if(!aT){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}Z(aR.split("/"),function(){})}else{ap(true,aR)}})}}function aJ(aO,aQ,aR){var aP=aQ;if(b.perc_utils.isPathUnderDesign(aQ)){aP=b.perc_utils.encodePathArray(aQ)}b.PercPathService.validatePath(aP.join("/"),function(aT,aS){if(aT==b.PercServiceUtils.STATUS_SUCCESS){aR(aO)}else{b.perc_utils.alert_dialog({title:"Error",content:"Path not found: "+aQ.join("/")});aB()}})}function ap(aO,aQ){var aP=b(".perc-finder-message");if(aO){aP.empty().append('<i class="icon-bell"></i>');b('<label class="perc-finder-error"></label>').text(aQ).appendTo(aP);aP.fadeIn()}else{aP.fadeOut(function(){b(this).empty()})}fixIframeHeight();fixHeight()}function G(){return/collapsed/.test(b.cookie(ah))}function T(){return(""+b.cookie(ah)).replace(/[^0-9.]/g,"")}function aH(aO){if(!isLibMode&&T()!==aO){var aP=G()?"collapsed":"expanded";b.cookie(ah,aP+aO)}}function ao(aQ){if(!isLibMode){var aO,aP;aO=T();aP=aQ?"expanded":"collapsed";b.cookie(ah,aP+aO)}}function aA(){fixBottomHeight();fixIframeHeight();fixHeight();if(b("#perc_site_map").length>0){b("#perc_site_map").perc_site_map("layoutAll")}}function an(aR){var aS,aQ,aO=b(".perc-finder-body");if(b(".perc-finder-body").is(":visible")===aR){return}aS=b("#perc-finder-expander");aQ=aS.parents(".perc-finder-outer");ao(aR);if(aR){aQ.removeAttr("collapsed");aO.slideDown(aA);aS.removeClass("icon-plus-sign").addClass("icon-minus-sign")}else{aQ.attr("collapsed",true);aO.slideUp(aA);aS.removeClass("icon-minus-sign").addClass("icon-plus-sign")}var aT=b("#frame");var aU=b(".perc-main");var aP=b("#bottom")}function aq(){an(!b(".perc-finder-body").is(":visible"))}b("#perc-finder-expander").click(aq);function n(aP,aO){aP=parseInt(aP,10);return isNaN(aP)?aO:aP}var aN=(function(){var aP,aV,aW;function aS(){b(".perc-finder").addClass("ui-resizable-resizing");aP=b(".perc-finder .ui-resizable");aV=n(b(".perc-pagingbar-finder").outerHeight(),0)}function aX(){aT()}function aO(aY){aA();b(this).css("width","auto");if(aY){aH(aW)}b(".perc-finder").removeClass("ui-resizable-resizing")}function aR(aY){return aY&&aY.scrollWidth>aY.clientWidth?Y:0}function aT(){var aY=b(".perc-finder")[0];aW=b(".perc-finder-body").height();aP.css("height",aW-aR(aY)-aV)}function aQ(aY){if(isLibMode){aY=e.get_max_height()-100}aY=n(aY,b(".perc-finder-body").height());if(aY!==aW){aW=Math.max(aY,e.minHeight);aW=Math.min(aY,e.get_max_height());b(".perc-finder-body").css("height",aW);aH(aW);b(".perc-finder").trigger("resize")}aS();aT();aO()}b(".perc-finder-body").resizable({handles:"s",minHeight:e.minHeight,maxHeight:e.get_max_height(),start:aS,resize:aX,stop:aO});b(window).resize(function aU(){b(".perc-finder-body").resizable("option","maxHeight",e.get_max_height())});aQ(n(T(),e.height));return aQ});var ai=b("[view=PERC_SITE]").length||!G();if(isLibMode){ai=true}an(ai);return{on:function(){b(".perc-finder-body").on.apply(b(".perc-finder-body"),arguments)},ACTIONS:actions,elem:at,open:Z,search:L,addPathChangedListener:R,executePathChangedListeners:ay,finderOpenInProgress:finderOpenInProgress,update_finder_height:aN,goToNewPath:al,refresh:aB,idFromItem:aD,addActionListener:H,removeActionListener:v,fireActionEvent:q,addOpenListener:Q,removeOpenListener:B,getCurrentPath:K,getPathItemByPath:aM,getPathItemById:V,getParentPathItemByPath:au,launchPagePreview:ag,launchPagePreviewByPath:aE,launchAssetPreview:z,insertAfter:az,maxResults:ak,flagChangeView:P,onDragStart:A,onDragStop:S,scrollIntoView:aK,setStateButtonsDesignNode:I,getCurrentItem:aF,setCurrentItem:am};function aF(){return C}function am(aO){return C=aO}function ax(aO,aP){_finderPathIdArray[aO]=aP}function aD(aO){var aP=typeof(aO.id)=="undefined"?aO.path.split("/")[1]:aO.id;return ac+aP}function aB(aO){b(".mcol-opened").each(function(){b(this).removeClass("mcol-opened")});var aQ=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR&&(aQ==null||aQ.wrapperName!="perc-action-finder-refresh")){var aR=[];aR.push("perc-ui-component-finder");var aS=$j.PercComponentWrapper("perc-action-finder-refresh",aR);var aP=$j.PercViewReadyManager.setWrapper(aS);if(!aP){if(!aP){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}Z(aC,aO)}function K(){return aC.slice(0)}function L(aP){aa(F);aI(F).filter(".mcol-opened").removeClass(".mcol-opened");var aO=az(F);b.each(aP,function(){M(aO,N(this,h(aO)))})}function h(aO){return function(aQ,aR){var aP=X.acop(aR);aP.pop();E(aQ,aO,[aQ.data("name")],aP,function(){})}}function ar(aO){finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);aC=["","Sites"];aB(function(){})}function Z(aQ,aO){if(finderOpenInProgress){return}finderOpenInProgress=true;q(actions.FINDER_OPEN_START,null);var aP=O([""]);ad(F,aP,aQ.slice(1),[""],aO)}function ad(aR,aO,aT,aP,aQ){if(aT[aT.length-1]===""){aT.pop()}if(aT.length>0){aR.data("child",aT[0])}if(aP.length>1&&aP[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){I(true)}else{I(false)}b(".perc-finder-panel-loading").remove();W(aR).append('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>');aO(aS,aR);function aS(aU,aX){if(aX){aR.find(".mcol-direc-wrapper").empty().addClass("mcol-direc-wrapper-last").append(aX)}else{af(aR,aU)}if(aT.length==0){$j("#mcol-path-summary").val(aP.join("/"));finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);path_changed(aP);aa(aR);aI(aR).filter(".mcol-opened").removeClass("mcol-opened");var aW=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aW!=null){aW.handleComponentProgress("perc-ui-component-finder","complete")}if(aQ){aQ()}}else{var aV=aI(aR).filter(function(){if(typeof(b(this).data("name"))!="undefined"&&typeof(aT[0])!="undefined"){return b(this).data("name")==aT[0]}return false});b.PercQueuePostAJAX(function(){setTimeout(function(){E(aV,aR,aT,aP,aQ)},150)})}aN();var aW=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aW!=null){aW.handleComponentProgress("perc-ui-component-finder","processing")}}}function y(){var aO=b(this).parents("td");var aP=aO.data("startIndex")-ak;aO.data("startIndex",aP);J(aO,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function av(){var aO=b(this).parents("td");var aP=aO.data("startIndex")+ak;aO.data("startIndex",aP);J(aO,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function J(aP,aQ){var aR=aP.data("path");var aS=aP.data("startIndex");var aO=b.perc_utils.encodeURL(aR.join("/"))+"/?startIndex="+aS+"&maxResults="+ak;b.perc_pathmanager.open_path(aO,true,aT,ar,true);function aT(aV){var aU={};b.each(b.perc_utils.convertCXFArray(aV.PagedItemList["childrenInPage"]),function(){aU[X.extract_path_end(this.path)+"_item"]=this});aP.data("totalResult",aV.PagedItemList["childrenCount"]);aP.data("startIndex",aV.PagedItemList["startIndex"]);af(aP,aU);if(aQ){aP.find(".mcol-direc-wrapper").attr({scrollTop:aP.find(".mcol-direc-wrapper").attr("scrollHeight")})}}}function U(aP,aO){var aT=aP.data("startIndex");var aQ=aP.data("totalResult");var aR="";if(ak>=aQ){var aV=aQ-(aT-1);aR=aV+" item"+(aV!=1?"s":"")}else{var aS=((aT-1+ak>aQ)?aQ:(aT-1+ak));aR=aT+" - "+aS+" of "+aQ}var aU=b('<div class="perc-paging-finder"/>').data("name",aO).append(b('<span class="perc-paging-text" />').text(aR)).append(b('<div class="perc-paging-finder-navigator" />').append(b('<a class="perc-paging-finder-previous" />').text("<<").click(y)).append(b('<a class="perc-paging-finder-next"/>').text(">>").click(av))).addClass(aO);aU=b("<div/>").append(aU).append("<div style='clear:both'/>");if((aQ-(aT-1+ak))>0){aU.find(".perc-paging-finder-next").removeClass("perc-hide-navigator")}else{aU.find(".perc-paging-finder-next").addClass("perc-hide-navigator")}if(aT>ak){aU.find(".perc-paging-finder-previous").removeClass("perc-hide-navigator")}else{aU.find(".perc-paging-finder-previous").addClass("perc-hide-navigator")}return aU}function af(aP,aQ){aP.find(".mcol-direc-wrapper").removeClass("mcol-direc-wrapper-last");var aR={};b.each(aI(aP),function(){aR[b(this).data("name")+"_item"]=b(this)});var aO=X.odiff(aQ,aR);b.each(X.odiff(aR,aQ),function(){if(this.is(".mcol-opened")){aa(aP)}if(!x&&!this.hasClass("ui-resizable-e")&&!this.parent().hasClass("perc-view-column-fixed")){this.remove()}});if(aP.data("path").join("/")!=""&&aP.find(".perc-paging-finder-top").size()==0){W(aP).prepend(U(aP,"perc-paging-finder-top"))}b.each(aO,function(){if(!isLibMode||this.path!="/Search/"){M(aP,N(this,h(aP)))}})}function E(aT,aR,aU,aP,aQ){if(aT.length==0){path_changed(aP);finderOpenInProgress=false;$j("#mcol-path-summary").val(aP.join("/"));var aS=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aS!=null){aS.handleComponentProgress("perc-ui-component-finder","complete")}}else{if(aT.is(".mcol-opened")){aP.push(aU.shift());aK(aT);if(typeof(aT.data("spec"))!="undefined"){C=aT.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aT.addClass("perc_last_selected")}ad(aR.next(),aT.data("loader"),aU,aP,aQ)}else{aa(aR);aI(aR).filter(".mcol-opened").removeClass("mcol-opened");aT.addClass("mcol-opened");aK(aT);if(typeof(aT.data("spec"))!="undefined"){C=aT.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aT.addClass("perc_last_selected")}var aO=az(aR);aP.push(aU.shift());ad(aO,aT.data("loader"),aU,aP,aQ)}}aN()}function N(a3,aU){var aV=10;var a4=(a3.type=="Folder")?"a":"z";var aY=X.extract_path(a3.path);var a1=X.choose_icon(a3.type,a3.icon,aY);var a0=b("<a />").addClass("mcol-listing").attr("alt",a3.name).attr("id",aD(a3)).append(b("<img src='"+a1+"' style='float:left'></img>")).append(b("<div unselectable='on' class='perc-finder-item-name' style='cursor: default; text-overflow : ellipsis;overflow : hidden'>"+a3.name+"</div>")).attr("title",a3.name).data("tag",a4+(a3.name+"").toLowerCase()).data("name",aY[aY.length-1]).data("spec",a3);ax(a3.path,a3.id);if(a3.type){a0.addClass("perc-listing-type-"+a3.type)}if(a3.category){a0.addClass("perc-listing-category-"+a3.category)}if(a3.leaf){a0.data("loader",function(a5){aG(a3,function(a6){a5(null,a6)})})}else{a0.data("loader",O(X.acop(aY)))}a0.singleclick(aZ);a0.dblclick(function(a5){aJ(a5,aY,function(){if(a3.type=="Folder"){aZ(a5)}else{aj(a3)}})});if(aS(a3)){a0.draggable({helper:function(){return b(this).clone().css(("overflow","visible"),("width",this.offsetWidth)[0])},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:A,stop:S,delay:dragDelay})}if(aR(a3)){a0.droppable({tolerance:"pointer",accept:aQ,over:aT,out:aP,drop:aO})}var a2=1,aW=500;function aT(a7,a9){var a6=a2;var a5=a9.draggable.data("spec").path;var ba=a3.path;var a8=a3.type;if(!aX(a5,ba,a9.draggable.data("spec").type,a8)){return}if(a3.accessLevel!=b.PercFolderHelper().PERMISSION_READ&&a9.draggable.data("spec").accessLevel!=b.PercFolderHelper().PERMISSION_READ){b(this).addClass("perc-finder-item-over")}if(b(this).hasClass("perc-listing-type-site")){return}setTimeout(function(){if(a2==a6){aZ()}},aW)}function aP(a5,a6){b(this).removeClass("perc-finder-item-over");a2++}function aO(a6,a8){var a5=a8.draggable.data("spec").path;var a9=a8.draggable.data("spec").type;var ba=a3.path;var a7=a3.type;b(this).removeClass("perc-finder-item-over");aP();if(a3.accessLevel==b.PercFolderHelper().PERMISSION_READ||a8.draggable.data("spec").accessLevel==b.PercFolderHelper().PERMISSION_READ){return false}if(!aX(a5,ba,a9,a7)){return false}b.PercPathService.moveItem(a5,ba,function(bb,bf){if(bb==b.PercServiceUtils.STATUS_SUCCESS){var bd=null;if(a9=="percPage"){bd="page"}else{if(a9=="Folder"&&ba.indexOf("/Sites")==0){bd="folder"}}if(bd){b.PercRedirectHandler.createRedirect(a5,ba+a8.draggable.data("spec").name,bd).fail(function(bg){b.perc_utils.alert_dialog({title:"Redirect creation error",content:bg,okCallBack:function(){aB()}})}).done(function(){aB()})}else{aB()}}else{var be=bf;if(bf.indexOf("item with the same name already exists in the folder")!=-1){var bc="asset";if(a9=="percPage"){bc="page"}else{if(a9=="Folder"){bc="folder"}}be=I18N.message("perc.ui.finder.move.error@Duplicate",[bc,a8.draggable.data("spec").name,ba])}b.perc_utils.alert_dialog({title:"Error",content:be})}})}function aX(a7,bc,a6,ba){if(ba&&(ba!="Folder"&&ba!="site")){return false}var bb=(bc.match("/$")=="/")?bc.substr(0,bc.length-1):bc;if(bb==(a7.substring(0,a7.lastIndexOf("/")))){return false}if(a6=="Folder"){var a8=a7.substr(1).split("/");if(a8[a8.length-1]==""){a8.pop()}var bb=bc.substr(1).split("/");if(bb[bb.length-1]==""){bb.pop()}var a5=true;for(var a9=0;a9<a8.length;a9++){if(a8[a9]!=bb[a9]){a5=false;break}}if(a5){return false}}return true}function aS(a7){var a6=a7.type;var a5=a7.category;if(!a6){return false}if(a6=="site"){return false}if(a6=="percPage"&&a5=="LANDING_PAGE"){return false}if(a6=="Folder"&&a5=="SECTION_FOLDER"){return false}if(a6=="Folder"&&a7.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){return false}if(a6=="FSFile"){return false}if(a6=="FSFolder"){return false}return true}function aR(a7){var a6=a7.type;var a5=a7.category;if(!a6&&a7.path==b.perc_paths.ASSETS_ROOT+"/"){return true}if(!a6){return false}if(a6=="percPage"){return false}return true}function aQ(a8){var a5=a8&&a8.data("spec")&&a8.data("spec").path;if(!a5){return false}var a7=a3.path;if(a3.type&&a3.type=="site"){var ba=a5.substr(1).split("/")[1];var a9=a7.substr(1).split("/")[1];if(ba!=a9){return false}}if(a8.data("spec").category&&a8.data("spec").category=="ASSET"){if(!a3.type||a3.type!="Folder"){return false}}if(a7.length>=a5.length&&b.grep(a5,function(bd,bc){return bd==a7[bc]}).length==0){return false}var bb=X.extract_path(a5)[1];var a6=X.extract_path(a7)[1];if(bb!=a6){return false}return true}return a0;function aZ(a8){if(a8.currentTarget.id=="perc-finder-listing-Search"){b.Percussion.setView("search");b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon_on.png");return}b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon.png");b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");var ba=b(this);var a7=ba.children(".perc-finder-item-name");var a6=a7.find("#perc_finder_inline_field_edit");var a5=a6.length;if(a5==0){var bc=b("#perc_finder_inline_field_edit");if(bc.length>0){lastClickPath=aY;bc.blur()}ba.focus();if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var bb=$j.PercComponentWrapper("perc-action-finder-item-clicked",["perc-ui-component-finder"]);var a9=$j.PercViewReadyManager.setWrapper(bb);if(!a9){if(!a9){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aU(a0,X.acop(aY))}}}function A(){var aP=b(".perc-finder-table");var aO={};aO.left=aP.offset().left;aO.top=aP.offset().top;aO.width=aP.width();aO.height=aP.height();x=true;b("body").css("overflow","visible").bind("mousemove.finderDrag",aO,function(aQ){var aS=aQ.data.left+aQ.data.width;var aR=aQ.data.top+aQ.data.height;var aU=(aQ.pageX>=aQ.data.left)&&(aQ.pageX<=aS);var aT=(aQ.pageY>=aQ.data.top)&&(aQ.pageY<=aR);p(aT&&aU)})}function S(){x=false;b("body").css("overflow","hidden").unbind("mousemove.finderDrag");p(true)}function aG(aO,aQ){var aP=" ";b.perc_pathmanager.getItemProperties(aO.path,function(aU,aS){if(aU){var aW=null;var a0=null;var aV=null;var a1=aO.category=="ASSET"||aO.category=="RESOURCE";if(a1){aW="Asset";a0="Type";aV="<a href='#' class='perc-finder-preview-link' id='perc-asset-preview-link' title='Click for preview'>"}else{aW="Page Link";a0="Template";aV="<a href='#' class='perc-finder-preview-link' id='perc-page-preview-link' title='Click for preview'>"}var aZ=aS.lastPublishedDate;if(aZ==undefined||aZ==null||aZ==""){aZ=""}else{var aX=b.perc_utils.splitDateTime(aZ);aZ='<div style="padding:9px 0 0 10px;">Last Published: <span></span></div><div style="padding:3px 0 0 10px;"><span "perc_finder_details_lpdate">'+aX.date+" "+aX.time+"</span></div>"}var aY=b.perc_utils.splitDateTime(aS.lastModifiedDate);if(aO.path.split("/")[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){var aT=b.perc_utils.formatFileSize(aS.size);aP='<div style="padding:10px 0 0 10px;">Properties: <span id="perc_finder_details_name">'+aS.name+'</span></div><div style="padding:10px 0 0 10px;">Size: <span id="perc_finder_details_size">'+aT+'</span></div><div style="padding:10px 0 0 10px;">Last Modified: <span></span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aY.date+" "+aY.time+"</span></div>"}else{aP='<div style="padding:9px 0 0 10px;">'+aW+': <span id="perc_finder_details_name">'+aV+aS.name+'</a></span></div><div style="padding:9px 0 0 10px;">'+a0+': <span id="perc_finder_details_type">'+aS.type+'</span></div><div style="padding:9px 0 0 10px; width:170px;">Status: <div id="perc_finder_details_status" status="'+aS.status+'" workflow="'+aS.workflow+'" class="perc-ellipsis" title="'+aS.status+" ("+aS.workflow+')">'+aS.status+" ("+aS.workflow+')</div></div><div style="padding:9px 0 0 10px;">Last Modified: <span id="perc_finder_details_lmuser">'+aS.lastModifier+'</span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aY.date+" "+aY.time+"</span></div>"+aZ}var aR=b(aP);if(a1){aR.find("#perc-asset-preview-link").each(function(){b(this).unbind().bind("click",function(){z(aO.id)})})}else{aR.find("#perc-page-preview-link").each(function(){b(this).unbind().bind("click",function(){ag(aO.id)})})}aQ(aR)}else{b.perc_utils.alert_dialog({title:"Error",content:aS});aB()}var a2=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(a2!=null){a2.handleComponentProgress("perc-ui-component-finder","complete")}})}function z(aQ,aP){if(aP){var aO=aQ.split("-");aO[0]=aP;aQ=aO.join("-")}b.PercAssetService.getAssetViewForAssetId(aQ,function(aS,aR){if(aS==b.PercServiceUtils.STATUS_SUCCESS){var aT=window.open(aR,"percAssetPreviewWindow"+aQ.replace(/\-/g,""));b(aT.document).ready(function(){if(aP){window.setTimeout(function(){aT.document.title=aT.document.title+" (Revision "+aP+")"},1000)}aT.focus()})}else{b.perc_utils.alert_dialog({title:"Error",content:aR})}})}function ag(aP,aO){b.PercPathService.getPathItemById(aP,function(aR,aQ,aU){if(aR==b.PercServiceUtils.STATUS_SUCCESS){var aT=aQ.PathItem.folderPaths.slice(1)+"/"+aQ.PathItem.name;if(aO){aT+="?sys_revision="+aO+"&percmobilepreview=true"}else{aT+="?percmobilepreview=true"}var aS=window.open(aT,"percPagePreviewWindow"+aP.replace(/\-/g,""));b(aS.document).ready(function(){if(aO){window.setTimeout(function(){aS.document.title=aS.document.title+" (Revision "+aO+")"},1000)}aS.focus()})}else{b.unblockUI();var aV="";if(aU=="cannot.find.item"){aV=I18N.message("perc.ui.common.error@Preview Content Deleted")}else{aV=aQ}b.perc_utils.alert_dialog({title:"Error",content:aV})}})}function aE(aO,aQ,aP){b.PercPathService.getPathItemForPath(aO,function(aS,aR){if(aS==b.PercServiceUtils.STATUS_SUCCESS){var aU=aR.PathItem.folderPaths.slice(1)+"/"+aR.PathItem.name;if(aP){aU+="?sys_revision="+aP+"&percmobilepreview=true"}else{aU+="?percmobilepreview=true"}var aT=window.open(aU,"percPagePreviewWindow"+aQ.replace(/\-/g,""));b(aT.document).ready(function(){if(aP){window.setTimeout(function(){aT.document.title=aT.document.title+" (Revision "+aP+")"},1000)}aT.focus()})}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:aR})}})}function O(aO){return function(aQ,aR){var aP=b.perc_utils.encodeURL(aO.join("/"))+"/?startIndex=1&maxResults="+ak;if(typeof(aR.data("child"))!="undefined"&&aR.data("child")!=""){aP+="&child="+b.perc_utils.encodeURL(aR.data("child"));aR.data("child","")}b.perc_pathmanager.open_path(aP,true,aS,ar,true);function aS(aU){var aT={};b.each(b.perc_utils.convertCXFArray(aU.PagedItemList["childrenInPage"]),function(){aT[X.extract_path_end(this.path)+"_item"]=this});aR.data("path",aO);aR.data("startIndex",aU.PagedItemList["startIndex"]);aR.data("totalResult",aU.PagedItemList["childrenCount"]);aQ(aT)}}}function M(aO,aP){W(aO).append(aP)}function aK(aR){var aP=aR.closest(".mcol-direc-wrapper");var aQ=aR.position().top+aR.outerHeight();var aO=aP.closest("td").height();if(aQ<0||aQ>aO){aP.animate({scrollTop:aQ-aO},200)}}function I(aO){if(aO){b.percFinderButtons().disableAllButtonsButSite()}}function az(aP){var aO=ab();b("#perc-finder-table-top").append(aO);return aO}function aa(aO){if(x){aO.nextAll().hide()}else{aO.nextAll().remove()}}function ab(aP){aP=aP!==false;var aU=b('<td tabindex="-1" class="mcol-direc" />');var aO=b('<div class="perc-resize ui-resizable" />');var aR=b('<div class="perc-resize-width mcol-direc-wrapper" />');function aT(aV,aW){aR.css("width",aO.width()-aR.siblings().outerWidth())}function aS(aV,aW){b(".perc-finder").addClass("ui-resizable-resizing")}function aQ(aV,aW){b(".perc-finder").removeClass("ui-resizable-resizing")}if(aP){aO.resizable({handles:"e",resize:aT,start:aS,stop:aQ})}return aU.append(aO.append(aR))}function F(){var aO=false,aP;aP=ab(aO);aP.find(".mcol-direc-wrapper").addClass("perc-view-column-fixed");aP.find(".ui-resizable").append('<div class="ui-resizable-handle ui-resizable-e perc-resize-disabled" />');return aP}function D(aO){var aP=b("<div class='perc-finder-table'><table><tr id='perc-finder-table-top'></tr></table></div>");aP.find("tr").append(aO);return aP}function aI(aO){return W(aO).children()}function W(aO){return aO.find(".mcol-direc-wrapper")}function p(aO){b(".mcol-listing").each(function(){b(this).droppable("option","disabled",!aO)});b("#perc-finder-listview table").droppable("option","disabled",!aO)}function aM(aR){if(!aR||typeof(aR)!="string"||aR.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}var aQ=null;var aP=null;b.each(_finderPathIdArray,function(aS,aT){if(aS==aR){aP=aT}});if(!aP){var aO="";if(aR[aR.length-1]!="/"){aO=aR+"/"}else{aO=aR.substring(0,aR.length-1)}b.each(_finderPathIdArray,function(aS,aT){if(aS==aO){aP=aT}})}if(aP){aQ=V(aP.toString())}return aQ}function V(aO){if(!aO||typeof(aO)!="string"||aO.length<1){b.perc_utils.alert_dialog({title:"Error",content:"objectId must be a valid string"});return}var aP=b("#"+ac+aO).data("spec");return aP}function au(aO){if(!aO||typeof(aO)!="string"||aO.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}if(aO.charAt(aO.length-1)=="/"){aO=aO.substring(0,aO.length-1)}aO=aO.substring(0,aO.lastIndexOf("/"));return aM(aO)}function R(aO){(function(aP){path_changed=function(aQ){aP(aQ);aO(aQ)}})(path_changed)}function ay(aO){path_changed(aO)}function Q(aO){if(b.inArray(aO,openListeners)==-1){openListeners.push(aO)}}function B(aQ){if(b.inArray(aQ,openListeners)>-1){var aO=openListeners.length;for(var aP=0;aP<aO;aP++){if(openListeners[aP]===aQ){openListeners.splice(aP,1);return}}}}function aj(aQ){var aO=openListeners.length;for(var aP=0;aP<aO;aP++){openListeners[aP](aQ)}}function H(aO){if(b.inArray(aO,actionListeners)==-1){actionListeners.push(aO)}}function v(aQ){if(b.inArray(aQ,actionListeners)>-1){var aO=actionListeners.length;for(var aP=0;aP<aO;aP++){if(actionListeners[aP]===aQ){actionListeners.splice(aP,1);return}}}}function q(aR,aQ){var aO=actionListeners.length;for(var aP=0;aP<aO;aP++){actionListeners[aP](aR,typeof(aQ)=="object"?aQ:null)}}}b.perc_finderInstance=null})(jQuery);(function(b){b.percFinderButtons=function(){var e=b.PercDirtyController;var f={createButtons:n,disableAllButtonsButSite:p};return f;function p(){b(".perc-finder-menu #perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-actions-button").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-page").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-asset").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}function n(q,y){var x=b.perc_build_delete_page_button(q,y);var G=b('<div class="perc-finder-buttonbar"/>');G.append(x);var z=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";if(!z){var E=b.perc_build_new_page_button(q,y);G.append(E);var A=b.PercNewAssetDialog.init(q,y);G.append(A)}var w=b.perc_build_new_folder_button(q,y);G.append(w);if(!z){var C='<a id="perc-finder-new-site" class="perc-form ui-state-default perc-font-icon icon-sitemap" href="#" title="Click to create new Site"></a>';G.append(C)}var B=b.perc_build_preview_button(q,y);G.append(B);var F=b.perc_build_actions_button(q,y);G.append(F);b(".perc-finder-menu ").append(G);function v(H){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_DESIGN,H,null,null,null,b.perc_paths.SITES_ROOT+"/"+H,null,null)}$newSiteDialog=b.perc_createNewSiteDialog(v);b("#perc-finder-new-site").unbind("click").click(d);q.addPathChangedListener(h);var D={"delete":x,newPage:E,newFolder:w,newAsset:A,newSite:C,launchPreview:B,launchAction:F};return D}function d(){e.confirmIfDirty(function(){$newSiteDialog.perc_wizard("open");b(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.perc-dialog.perc-dialog-corner-all.ui-draggable").find("div").css("z-index","")})}function h(){if(!b.PercNavigationManager.isAdmin()){b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(d)}}}})(jQuery);(function(b){b.perc_upload_theme_file_dialog={open:d};function d(e){var B=p();var v=window.location.protocol+"//"+window.location.host+"/cm";var x={};buttonSave={id:"perc-addItem-dialog-save"};buttonCancel={id:"perc-addItem-dialog-cancel",click:function(){w.remove()}};x.Save=buttonSave;x.Cancel=buttonCancel;var w=C();function C(){var D=b.perc_paths.WEBRESOURCESMGT_FILE_UPLOAD;var E='<div id=\'perc-design-file-upload\'><form id="perc-theme-file-upload-form" name="perc-theme-file-upload-form" enctype="multipart/form-data" method="post" action="'+D+'"><label for="upload-theme-file-attachment">File name:</label><br><input type="hidden" name="upload-theme-file-path" /><input type="file" size="50" name="upload-theme-file-attachment" /></form><div id="perc-theme-file-upload-response" style="display:none"></div></div>';var F=b(E).perc_dialog({title:I18N.message("perc.ui.uploadtheme.dialog.title@Upload File"),id:"perc-upload-theme-file-dialog",width:686,resizable:false,modal:true,closeOnEscape:true,percButtons:x,open:function(){q();b("#perc-theme-file-upload-form").ajaxForm({target:"#perc-theme-file-upload-response",success:n,error:f,iframe:true})}});return b(F)}function q(){var F=window.location.protocol+"//"+window.location.host+"/cm";var E=b("#perc-addItem-dialog-save");var G="url("+F+"/images/images/buttonSave.png)";var D="url("+F+"/images/images/buttonSaveOver.png)";E.css("background-image",G).hover(function(){b(this).css("background-image",D)},function(){b(this).css("background-image",G)}).unbind("click").click(h)}function h(){if(A()==false){return false}y();return false}function A(){var D=w.find("input:file");var E=w.find("label.perc_field_error");if(D.val()==""){if(E.length==0){D.after('<label class="perc_field_error" for="upload-theme-file-attachment" style="display: block;">'+I18N.message("perc.ui.uploadtheme.form.text@Please select a file.")+"</label>")}return false}else{E.remove();return true}}function y(){var E=w.find("input:file").val().replace(/.+[\\\/]/,"");E=b.perc_utils.encodeURL(E);var D=b.perc_utils.encodePathArray(B);b.PercWebResourcesService.validateFileUpload(D,E,function(G,F){if(G==b.PercServiceUtils.STATUS_SUCCESS){if(F.data==b.PercServiceUtils.STATUS_SUCCESS){z()}else{var H={id:"perc-design-file-upload-file-exist-warning",title:I18N.message("perc.ui.uploadtheme.dialog.title@Warning"),question:F.data,yes:"OK",success:z};b.perc_utils.confirm_dialog(H)}}else{var H={id:"perc-design-file-upload-file-exist-error",title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:b.PercServiceUtils.extractDefaultErrorMessage(F.request)};b.perc_utils.alert_dialog(H)}})}function z(){b.PercBlockUI();var E=w.find("input:file").val().replace(/.+[\\\/]/,"");E=b.perc_utils.encodeURL(E);var D=b.perc_utils.encodePathArray(B);w.find('input[name="upload-theme-file-path"]').val("/"+D.slice(3).join("/")+"/"+E);w.find("#perc-theme-file-upload-form").submit()}function n(){var D=b("#perc-theme-file-upload-response").text();if(D==""){b.unblockUI();w.remove();e.refresh(function(){})}else{var E={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:D};b.perc_utils.alert_dialog(E);b.unblockUI()}}function f(F,H,G){var D="There was an unknown error";if(H=="timeout"){D="The operation is talking too much time"}var E={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:D};b.perc_utils.alert_dialog(E);b.unblockUI()}function p(){var E=e.getCurrentPath();D=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(D==undefined){var D=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened").data("spec")}if(D!=undefined&&D.type=="FSFile"&&D.leaf){E.pop()}return E}}})(jQuery);(function(d){d.PercDeleteItemHelper={extractDeleteErrorMessage:b};function b(v,f,z){var h,y,q=false,p=d.PercServiceUtils.extractDefaultErrorMessage(v),A="perc.ui.delete"+z+"dialog.warning",e="perc_delete_"+z+"_force",n=v.responseText,w=n.match(/User: (.*) is editing the item. Failed to delete item./);if(w){h="perc-finder-delete-error-open";var C=z.charAt(0).toUpperCase();var D=z.substr(1);var B=C+D+": ";var x=w[1].split(" ");y=B+f+"<br/><br/>"+I18N.message(A+"@Open",[x[0]])}else{if(n.indexOf(z+".deleteNotAuthorized")>0){h="perc-finder-delete-auth";y=I18N.message(A+"@Not Authorized",[f])}else{if(n.indexOf(z+".deleteTemplates")>0){h="perc-finder-delete-templates";y=I18N.message(A+"@Templates",[f])}else{if(n.indexOf(z+".deleteApprovedPages")>0){h="perc-finder-delete-approved";y=I18N.message(A+"@Approved Pages",[f])+"<br/><br/><input type='checkbox' id='"+e+"' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message(A+"@Approved Pages Checkbox")+"</label>";q=true}else{if(p!=""){h="perc-finder-delete-error-open";y=p}else{h="perc-finder-delete-error-open";y=I18N.message(A+"@GenericText")}}}}}var E={dialogid:h,content:y,canForceDelete:q,chkBoxId:e};return E}})(jQuery);(function(b){fixIframeHeight=function(){b("#perc-widget-library").width(b("#tabs-3").width()-45);var h=b("#frame");if(h.length==0){return}var p=b(".perc-main");var e=b("#bottom");var n=e.position().top;p.height(n);var d,f;if(window.innerHeight){d=window.innerHeight;f=window.innerWidth}else{if(document.documentElement.clientHeight){d=document.documentElement.clientHeight-4;f=document.documentElement.clientWidth}}h.height(d-n);h.width(f)};fixTemplateHeight=function(){fixBottomHeight()};fixBottomHeight=function(){var n=b.PercNavigationManager.getView();var d;var f;if(n==b.PercNavigationManager.VIEW_DESIGN){d=b(".perc-templates-layout");f=d.position().top+47}else{if(n==b.PercNavigationManager.VIEW_WORKFLOW){d=b(".perc-whitebg");f=b("#tabs").position().top+90;b(".perc-finder-fix").css("padding-bottom",0)}else{if(n==b.PercNavigationManager.VIEW_PUBLISH){d=b(".perc-whitebg");if(b("#tabs").length){f=b("#tabs").position().top+90}else{if(b("#perc-pub-inline-help").length){f=b("#perc-pub-inline-help").position().top+90}}}else{if(n==b.PercNavigationManager.VIEW_DASHBOARD){d=b(".perc-body-background");f=b(".perc-body-background").position().top}else{return}}}}if(d.css("display")!="none"){var e,h;if(window.innerHeight){e=window.innerHeight;h=window.innerWidth}else{if(document.documentElement.clientHeight){e=document.documentElement.clientHeight-4;h=document.documentElement.clientWidth}}d.height(e-f)}};fixHeight=function(){var f=b.PercNavigationManager.getView();if(f==b.PercNavigationManager.VIEW_SITE_ARCH){var e=b(".perc-main");if(e.length>0){var d=e.height();b("#perc_sa_container").css("margin-top",d+3)}}b(".perc-finder").width("auto")}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(n){var d=16;var y=5;var q;var w;n.fn.PercDataTable=function(C){if(C.percVisibleColumns&&C.aoColumns){var J=[];n.each(C.percVisibleColumns,function(N,O){J.push(C.aoColumns[O])});C.aoColumns=J}for(var H=0;H<C.aoColumns.length;H++){var B=C.aoColumns[H];B.sSortDataType="perc-type-"+B.sType}C=n.extend(true,{},h,C);w=C;q=f(C);n(this).append(q);q.dataTable(C).data("config",C);if(C.percExpandParentFrameVertically){var K=q.parents(".dataTables_wrapper").outerHeight()+d;var A=q.parents(".dataTables_wrapper").outerWidth()+d;var L=e();var F=K;var I=C.additionalIframeHeight?C.additionalIframeHeight:0;if(C.iDisplayLength){var E=q.find("thead").height();var z=n(q.find("tbody tr")[0]).height();var G=n(".dataTables_paginate").height();var M=E+z*C.iDisplayLength+G+I;F=M}if(C.percStayBelow){var D=n(C.percStayBelow);F+=D.offset().top+D.outerHeight()+d}n(L).height(F+y)}return q};function x(){var A=n(this);var z=A.data("config");if(z&&z.percTableRedrawCallback){if(typeof(z.percTableRedrawCallback)==="object"){n.each(z.percTableRedrawCallback,function(B,C){this(A)})}else{if(typeof(z.percTableRedrawCallback)==="function"){z.percTableRedrawCallback(A)}}}setTimeout(function(){var C=A.parent().children(".dataTables_paginate.paging_full_numbers");C.find(".perc-datatable-paginator-pages-label").removeClass("paginate_button");var B=C.find("span span.paginate_button, span span.paginate_active");n.each(B,function(D,E){n(E).attr("perc-page",D+1)});if(!B||B.length<2){C.hide()}else{C.show()}C.css("position","absolute")},1)}function e(){var A=parent.document.getElementsByTagName("IFRAME");for(var z=0;z<A.length;z++){if(A[z].contentWindow==window){return A[z]}}}function v(I,C,B,L,H){if(w.bPaginate){var F=w;var D=F.iDisplayLength;var G=H.length;var E=Math.ceil(G/D);var A=Math.ceil(L/D);var z=A+" of "+E+(E==1?" Page":" Pages");if(E==0){z=""}var K=n(".perc-datatables-info");if(K.length>0){K.html(z)}else{n("<div class='datatables_info perc-datatables-info'>"+z+"</div>").appendTo("body")}var J=n(".perc-footer-bar");if(J.length==0){n("<div class='perc-footer-bar'>&nbsp;</div>").appendTo("body")}}}var h={percExpandParentFrameVertically:true,additionalIframeHeight:0,percColumnWidths:["*","123"],percRowDblclickCallback:n.PercOpenPage,showPreviewBtnOnHover:false,iDisplayLength:5,bFilter:false,bAutoWidth:false,bPaginate:true,bSort:true,sPaginationType:"full_numbers",bLengthChange:false,bInfo:true,fnDrawCallback:x,fnFooterCallback:v,oLanguage:{sZeroRecords:"No Pages Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};function f(A){var B=A.percData;var z=A.percHeaders;var F=n("<table class='perc-datatable' style='table-layout : fixed' cellpadding='0' cellspacing='0'>");var C=n("<tbody>");var E=A.aoColumns;n.each(B,function(N,I){var M=I;var K="";if(N==0){K="perc-first"}else{if(N==B.length-1){K="perc-last"}}var J=n("<tr class='perc-datatable-row perc-index-"+N+" "+K+"'>");if(M.rowData){J.data("percRowData",M.rowData)}if(A.percRowClickCallback){if(M.rowData){J.click(M.rowData,A.percRowClickCallback)}else{J.click(A.percRowClickCallback)}}if(A.showPreviewBtnOnHover){J.mouseover(function(){n(this).css("background-color","#CAF589");n(this).find(".perc-preview-col").show()}).mouseout(function(){n(this).css("background-color","white");n(this).find(".perc-preview-col").hide()})}if(A.percRowDblclickCallback){if(M.rowData){J.dblclick(M.rowData,A.percRowDblclickCallback)}else{J.dblclick(A.percRowDblclickCallback)}}var L=0;n.each(M.rowContent,function(Z,V){if(A.percVisibleColumns){if(n.inArray(Z,A.percVisibleColumns)==-1){return true}}var R=E[L++];var O=R.sType;var Q="perc-type-"+O;var T=V;var X="";if(Z==0){X="perc-first"}else{if(Z==M.rowContent.length-1){X="perc-last"}else{X="perc-middle"}}var P="";if(A.percHeaderClasses&&A.percHeaderClasses[Z]){P="perc-"+A.percHeaderClasses[Z].replace(/ /g,"-").toLowerCase()}else{P="perc-"+A.percHeaders[Z].replace(/ /g,"-").toLowerCase()}var S=n("<td class='"+Q+" "+P+" perc-datatable-column perc-ellipsis perc-index-"+Z+" perc-cell-"+Z+"-"+N+" "+X+"' valign='top'>");if(typeof T=="object"){var W="";var Y="";var U;if(n.isArray(T)){n.each(T,function(ac,aa){if(!aa){aa="&nbsp;"}var ab=aa;var ad="";if(ac==0){ad="perc-first"}else{if(ac==T.length-1){ad="perc-last"}else{ad="perc-middle"}}if(typeof ab=="string"){W=ab}else{ab=n.extend({content:"",title:""},ab);W=ab.content;Y=ab.title}if(Y=="&nbsp;"){Y=""}U=n("<div style='width:100%' class='perc-datatable-columnrow perc-ellipsis perc-index-"+ac+" "+ad+"'>");if(ab.callback){var ae=n("<span>").attr("title",Y).append(W);ae.css("cursor","pointer").addClass("perc-callback");U.append(ae);if(M.rowData){ae.click(M.rowData,ab.callback)}else{ae.click(ab.callback)}}else{U.attr("title",Y).append(W)}S.append(U)})}else{var Y=V.title;var W=V.content;var U=n("<div title='"+Y+"' class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(W);S.append(U)}}else{var U=n("<div class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(V);S.append(U)}J.append(S)});C.append(J)});F.append(C);if(z){var D=n("<thead>");var H=n("<tr class='perc-datatable-head-row'>");var G=0;n.each(z,function(Q,O){if(A.percVisibleColumns){if(n.inArray(Q,A.percVisibleColumns)==-1){return true}}var M=E[G++];var I=M.sType;var L="perc-type-"+I;var K="";if(A.percColumnWidths){if(Q<A.percColumnWidths.length-1){K=A.percColumnWidths[Q];if(K=="*"){K=""}}else{K=A.percColumnWidths[A.percColumnWidths.length-1]}}if(n.browser.msie||n.browser.webkit){K=parseInt(K)+20}K+="px";var J="";if(A.percHeaderClasses&&A.percHeaderClasses[Q]){J="perc-"+A.percHeaderClasses[Q].replace(/ /g,"-").toLowerCase()}else{J="perc-"+A.percHeaders[Q].replace(/ /g,"-").toLowerCase()}var R="";if(Q==0){R="perc-first"}else{if(Q==z.length-1){R="perc-last"}else{R="perc-middle"}}var S=n("<th class='"+L+" "+J+" perc-datatable-head-column perc-index-"+Q+" "+R+"'>").css("width",K);var P=n("<span class='perc-sort' style='padding: 0px 10px 0px 0px; border-bottom:none'>&nbsp;</span>");if(typeof(A.sortFunction)!="undefined"&&!A.bSort){var T=A.percColNames[Q];var N={};N.colName=T;N.sortFunction=A.sortFunction;S.click(N,p);if(n.browser.mozilla){S.css("MozUserSelect","none")}else{if(n.browser.msie){S.bind("selectstart",function(){return false})}}if(T==A.sortColumn){S.addClass("sorting_"+A.sortOrder)}}S.append(O);S.append(P);H.append(S)});D.append(H);F.append(D)}if(A.bSort){b()}return F}function p(C){var B=n(this);var A=C.data.colName;var D=C.data.sortFunction;B.siblings().removeClass("sorting_asc").removeClass("sorting_desc");var z="asc";if(B.is(".sorting_asc")){B.removeClass("sorting_asc").addClass("sorting_desc");z="desc"}else{if(B.is(".sorting_desc")){B.removeClass("sorting_desc").addClass("sorting_asc")}else{B.addClass("sorting_asc")}}D(A,z)}function b(){n.fn.dataTableExt.afnSortData["perc-type-string"]=function(C,A){var z=[];var B;n("td:eq("+A+")",C.oApi._fnGetTrNodes(C)).each(function(){B=n(this).text();z.push(B)});return z};n.fn.dataTableExt.afnSortData["perc-type-numeric"]=n.fn.dataTableExt.afnSortData["perc-type-string"];n.fn.dataTableExt.afnSortData["perc-type-date"]=function(B,A){var z=[];n("td:eq("+A+")",B.oApi._fnGetTrNodes(B)).each(function(){var F=Array("","");var D=n(this).find("div");F[0]=n(D[0]).text();F[1]=n(D[1]).text();var E=F.join(" ");var C=new Date(E);z.push(C)});return z}}})(jQuery);(function(p){var h;var f;var e;var b=null;var n;var d;p.fn.PercFixedTableHeader=function(q){p(".perc-fixedtableheader").remove();d=q;n=p(this);var w=n.css("z-index");if(w=="auto"){w="1000"}if(p.browser.msie||p.browser.chrome||p.browser.safari){var v="-3px"}else{var v="1px"}b=p(this).clone(true);b.find("tbody").remove();b.css("position","relative").css("margin-bottom","-30px").css("top",v).css("left","1px").css("z-index",w+1).css("background","white").attr("cellpadding","0").addClass("perc-fixedtableheader");d.container.prepend(b);remove=q.remove;if(remove){remove.bind("click",function(){b.remove()})}h=q.resizable;if(h){h.bind("resize",function(){x()})}p(window).resize(function(){x()});function x(){b.css("width",n.css("width"))}x()}})(jQuery);(function(h){var e={};var b=function(){};h.fn.PercFinderListView=function(y,E){var K=h(this);var J;if(h.isFunction(y.folderDblClickCallback)){b=y.folderDblClickCallback}if(E.PagedItemList!=undefined){J=h.perc_utils.convertCXFArray(E.PagedItemList["childrenInPage"]);K.data("totalResult",E.PagedItemList["childrenCount"]);K.data("startIndex",E.PagedItemList["startIndex"])}else{J=h.perc_utils.convertCXFArray(E.PathItem)}var D=v(y.displayFormat,J);var F=D.percData;var G=D.percTypes;if(F.length>0){var x=[];for(s=0;s<G.length;s++){x.push("&nbsp;")}F.push({rowContent:x})}var C=D.percHeaders;var z=D.percColNames;var A=D.percWidths;var B=A;var I={percRowClickCallback:q,percRowDblclickCallback:n,percColumnWidths:B,percData:F,percHeaders:C,aoColumns:G};I.oLanguage={sZeroRecords:"No Files Found"};I.bPaginate=false;I.bInfo=false;I.bSort=false;I.oLanguage.sZeroRecords="No Items Found";I.sortFunction=y.sortFunction;I.sortColumn=y.sortColumn;I.sortOrder=y.sortOrder;I.percColNames=z;K.empty();K.PercDataTable(I);var H=h(K.find("table"));var w=h(H.parents(".mcol-direc"));H.PercFixedTableHeader({resizable:h(".perc-finder-body.ui-resizable"),remove:h("#perc-finder-choose-columnview"),container:w});if(typeof(y.callback)!="undefined"){y.callback(K)}f(H);h(".perc-datatable-row:last").unbind()};function f(x){var w=x.find(".perc-datatable-row");h.map(w,function(z,y){if(h(z).data("percRowData")!=undefined&&h(z).data("percRowData").category=="ASSET"){h(z).css("cursor","default");h(z).draggable({helper:function(){return h("<div />").html(h(this).find(".perc-datatable-columnrow").html()).addClass("dataTables_wrapper").css("color","white")},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:h.perc_finder().onDragStart,stop:h.perc_finder().onDragStop,delay:h.perc_finder().dragDelay})}});h(x).droppable({tolerance:"pointer",accept:false,over:function(){},out:function(){},drop:function(){}})}function q(x){h(".perc-datatable-row").removeClass("perc-datatable-row-highlighted");h(this).addClass("perc-datatable-row-highlighted");var w=h.merge([""],p(x));h("#mcol-path-summary").val(w.join("/"));if(typeof(x.data.id)!="undefined"){h.perc_finder().setCurrentItem(x.data)}h.perc_finder().flagChangeView=false;h.perc_finder().executePathChangedListeners(w);h.perc_finder().flagChangeView=true}function p(x){if(!x.data){return""}var w=x.data.folderPaths;if(x.data.type=="site"){w=x.data.folderPaths}else{w=x.data.folderPaths+"/"+x.data.name}return w.replace("Folders/$System$/","").substring(2,w.length).split("/")}function n(w){if(w.data.type=="Folder"||w.data.type=="FSFolder"){b("/"+p(w).join("/"))}else{h.PercNavigationManager.openPathItem("/"+p(w).join("/"))}}function v(V,D){var A=[];var O=[];var M=[];var L=[];var P=[];var x=V.SimpleDisplayFormat.columns;var T,F;for(F=0;F<D.length;F++){var E=h.perc_utils.convertCXFArray(D[F].columnData.column);var I=d(E,"@name","$");var R=[];var S=h.perc_utils.choose_icon(D[F].type,D[F].icon,p({data:D[F]}));var N='<img style="float:left;" src="'+S+'" />';for(T=0;T<x.length;T++){var y=x[T];var G=y.name;var H=y.label;var W=I[G];if(y.type.toLowerCase()=="date"&&W!=null&&W!=""){var Q=h.perc_utils.splitDateTime(W);var J=Q.date+", "+Q.time;W="<div title='"+J+"'>"+Q.date+"</div>"}if(y.type.toLowerCase()=="number"&&W!=null&&W!=""){W='<div title = "'+W+' Bytes" style="text-align:right;">'+h.perc_utils.formatFileSize(W)+"</div>"}if(y.type.toLowerCase()=="text"&&W!=null&&W!=""&&T!=0){W='<span title = "'+W+'" style="font-weight: normal;">'+W+"</span>"}if(W==null||W==""){W="&nbsp;"}if(T==0&&N!=""){var C="",K,w=D[F];if(h.isArray(w.folderPaths)){K=w.folderPaths[0]}else{K=w.folderPaths}if(D[F].type=="site"){C=K.replace("/"+h.perc_paths.SITES_ROOT,"")}else{C=K.replace("/"+h.perc_paths.SITES_ROOT,"").replace("/"+h.perc_paths.DESIGN_ROOT,"").replace("//Folders/$System$"+h.perc_paths.ASSETS_ROOT,"")+"/"+D[F].name}W=N+'<span title = "'+C+'" style="padding-left:4px;">'+W+"</span>"}R.push(W)}var B={rowContent:R,rowData:D[F]};A.push(B)}for(T=0;T<x.length;T++){var y=x[T];M.push(y.name);L.push(y.label);P.push((y.width==-1?"*":(h.browser.msie?y.width-20:y.width)));var z=y.type.toLowerCase();if(z=="text"){z="string"}if(T==0){z="html"}O.push({sType:z})}var U={percData:A,percColNames:M,percHeaders:L,percTypes:O,percWidths:P};return U}function d(x,y,z){var D;var C={};for(D=0;D<x.length;D++){var B=x[D];var w=B[y];var A=B[z];C[w]=A}return C}})(jQuery);(function(d){d.fn.PercScrollingTemplateBrowser=function(e){var v=d("<div class='perc-scrollable'>");var q=d("<div class='perc-items'>");v.append(q);var f=d("<a style = 'margin:50px 0px' class='prevPage browse left' ></a>");var n=d("<a style = 'margin:50px 0px' class='nextPage browse right'></a>");var w=d("<div style='clear:both'>");d(this).append(f).append(v).append(n).append(w);if(e.width){v.width(e.width)}var h=null;if(e.widgetDefId){h=e.widgetDefId}var p=e.siteName;var y=e.hiddenFieldId?e.hiddenFieldId:"perc-select-template";var x=function(z,B){if(B.TemplateSummary.length==0){var A=d("<div class='perc-empty'>No Templates Found</div>").css("margin-top","70px");v.css("text-align","center").css("background","white").append(A)}else{d.each(B.TemplateSummary,function(C,D){q.append(b(this,e));q.find(".item .item-id").hide();q.find(".item").bind("click",function(){var E=d(this).find(".item-id").text();d("#"+e.hiddenFieldId).val(E);q.find(".item").removeClass("perc-selected-item");d(this).addClass("perc-selected-item")});$firstItem=q.find(".item:first");d("#"+e.hiddenFieldId).val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});v.scrollable({items:q,size:4,keyboard:true})}};if(!e.isBase){d.PercSiteService.getTemplates(p,x,h)}else{d.PercSiteService.getBaseTemplates(e.baseType,x)}return d(this)};function b(n,f){var e="<div for=\"@ITEM_ID@\" class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";var p=n.name;var h=n.id;if(f.isBase){p=p.replace("perc."+f.baseType+".","");h=n.name}return e.replace(/@IMG_SRC@/,n.imageThumbPath).replace(/@ITEM_ID@/g,h).replace(/@ITEM_LABEL@/,p).replace(/@ITEM_TT@/g,p)}})(jQuery);(function($,P){P.PercFinderView=function(){var percFinderListviewContainerInitialHeight;var percFinderListviewContainer;var PERC_FINDER_VIEW_COLUMN="column";var PERC_FINDER_VIEW_LIST="list";var PERC_FINDER_SEARCH_RESULTS="search";var PERC_FINDER_SEARCH_TYPE_MYPAGES="MyPages";var PERC_FINDER_RESULT="result";var MAX_RESULTS;var utils=$.perc_utils;var currentContentPath;var currentContentId;var finderButtons;var dirty=false;var finder=$.perc_finder();var contentId=null;var pageView=P.pageView();var dialogFlag=true;this.setView=setView;var chooseColumnView=$("#perc-finder-choose-columnview").click(setViewColumn);var chooseListView=$("#perc-finder-choose-listview").click(setViewList);var chooseSearchView=$("#perc-finder-search-submit").click(setViewSearch);var chooseMyPagesView=$("#perc-finder-choose-mypagesview").click(setMyPagesView);setColumnViewButtonOn();var dirtyController=$.PercDirtyController;var percFinderViewAPI={reload:function(){},getContentId:function(){return currentContentId},clear:function(){$("#frame").each(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},confirm_if_dirty:confirm_if_dirty,save:save};this.disableSearchBar=function disableSearchBar(disable){if(disable){$("#perc-finder-item-search").attr("disabled",true);$("#perc-finder-item-search").val("");chooseSearchView.unbind("click")}else{$("#perc-finder-item-search").removeAttr("disabled");chooseSearchView.click(setViewSearch)}};this.disableListViewButton=function disableListViewButton(disable){if(disable){chooseListView.unbind("click")}else{chooseListView.click(setViewList)}};var currentFinderView=PERC_FINDER_VIEW_COLUMN;this.getCurrentFinderView=function(){return currentFinderView};this.PERC_FINDER_VIEW_COLUMN=PERC_FINDER_VIEW_COLUMN;this.PERC_FINDER_VIEW_LIST=PERC_FINDER_VIEW_LIST;this.PERC_FINDER_SEARCH_RESULTS=PERC_FINDER_SEARCH_RESULTS;this.PERC_FINDER_RESULT=PERC_FINDER_RESULT;var pagingBar="";$("#perc-finder-item-search").focus(function(){$(this).css("color","#FFFFFF").css("background-color","#5a5d69")}).bind("keyup",function(evt){if(evt.keyCode==13){$("#perc-finder-item-search").blur();performSearch();$("#perc-finder-item-search").focus();evt.preventDefault();evt.stopPropagation()}if(evt.keyCode==27||evt.keyCode==9){$("#perc-finder-item-search").css("color","#CCCCCC").css("background-color","#41434F").blur();evt.preventDefault();evt.stopPropagation()}$(".perc-finder-message").fadeOut(function(){$(this).empty()})});function pagePrevious(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")-MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function pageNext(newStartIndex){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")+MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function refreshView(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");$(".perc-fixedtableheader").remove();percFinderListviewContainer.empty();percFinderListviewContainer.css("text-align","left");percFinderListviewContainer.append($('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>'));var column=percFinderListviewContainer.data("sortColumn");var order=percFinderListviewContainer.data("sortOrder");var startIndex=percFinderListviewContainer.data("startIndex");var callbackFunction=percFinderListviewContainer.data("callback");var config={startIndex:startIndex,maxResults:MAX_RESULTS,callback:callbackFunction,sortFunction:sortView,sortColumn:column,sortOrder:order};percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height();if(currentFinderView===PERC_FINDER_VIEW_LIST){config.path=percFinderListviewContainer.data("path");fillListView(config,function(){expandTableBorders(true)})}else{if(currentFinderView===PERC_FINDER_SEARCH_RESULTS||currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES){var searchQuery=$("#perc-finder-listview").data("searchQuery");var searchType=percFinderListviewContainer.data("searchType");config.searchCriteria={SearchCriteria:{query:searchQuery,searchType:searchType,startIndex:startIndex,maxResults:MAX_RESULTS,sortColumn:column,sortOrder:order}};fillResultView(config,function(){expandTableBorders(true)})}}}function expandTableBorders(expand){if(percFinderListviewContainer){var finder=$(".perc-finder");var lastRow=percFinderListviewContainer.find("tr:last");lastRowHeight=lastRow.height();var containerElement=$("#perc-finder-listview table:first");var containerHeight=containerElement.height();var fixedColumnHeight=$(".perc-view-column-fixed").height();var differenceValue=fixedColumnHeight-containerHeight;if(expand){if(lastRowHeight>0){lastRow.height(lastRowHeight+differenceValue)}}else{lastRow.height(20)}}}function fillPagingBar(dir){var startIndex=dir.data("startIndex");var totalResult=dir.data("totalResult");var endIndex=((startIndex-1+MAX_RESULTS>totalResult)?totalResult:(startIndex-1+MAX_RESULTS));var itemText="0 Items";if(totalResult!=0){itemText=startIndex+" - "+endIndex+" of "+totalResult+" Total"}pagingBar.find(".perc-pagingbar-items").text(itemText);if((totalResult-(startIndex-1+MAX_RESULTS))>0){pagingBar.find(".perc-pagingbar-next").removeClass("perc-disabled-navigator").unbind("click").click(pageNext)}else{pagingBar.find(".perc-pagingbar-next").addClass("perc-disabled-navigator").unbind("click")}if(startIndex>MAX_RESULTS){pagingBar.find(".perc-pagingbar-previous").removeClass("perc-disabled-navigator").unbind("click").click(pagePrevious)}else{pagingBar.find(".perc-pagingbar-previous").addClass("perc-disabled-navigator").unbind("click")}}function showPagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){var finderDiv=$(".perc-finder");pagingBar=$('<div class="perc-pagingbar-finder"/>').append($('<div class="perc-pagingbar-navigator" />').append($('<a class="perc-pagingbar-previous" />').attr("title","Previous")).append($('<a class="perc-pagingbar-next"/>').attr("title","Next"))).append($('<span class="perc-pagingbar-items" />'));fillPagingBar(dir);var newHeight=finderDiv.height();finderDiv.append(pagingBar);fixIframeHeight();fixHeight()}var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}finder.update_finder_height()}function updatePagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){fillPagingBar(dir)}}function addListViewContainer(){var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");$(allColumns[0]).siblings().hide();var newColumn=$.perc_finderInstance.insertAfter(lastColumn);newColumn.css("width","100%");var newColumnContent=newColumn.find(".mcol-direc-wrapper");newColumnContent.find(".ui-resizable-handle").remove();percFinderListviewContainer=$("<div id='perc-finder-listview'>");newColumnContent.css("width","100%");newColumnContent.append(percFinderListviewContainer);return percFinderListviewContainer}function fillListView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercPathService.getContentForPath(displayFormat.SimpleDisplayFormat,config,function(status,content){if(status){percFinderListviewContainer.PercFinderListView(config,content);var newPath=$.trim($("#mcol-path-summary").val());$.PercPathService.getPathItemForPath(newPath,function(status,content){if(content.PathItem.type=="Folder"||content.PathItem.type=="FSFolder"){$(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");if(callback){callback()}return}var index=newPath.lastIndexOf("/");newPath=newPath.substring(index+1);$("#perc-finder-listview td.perc-first").each(function(){var self=$(this);var selectedText=self.find("span").text();if(newPath==selectedText){self.parent().click();finder.scrollIntoView(self)}});if(callback){callback()}})}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height()})})}function fillResultView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.searchCriteria.SearchCriteria.formatId=displayFormat.SimpleDisplayFormat.id;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercSearchService.getSearchResult(config.searchCriteria,function(status,result){if(status){$("#perc-finder-listview").PercFinderListView(config,result);if(callback){callback()}}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}})})}function performSearch(){if(currentFinderView===PERC_FINDER_SEARCH_RESULTS){var encodedSearchText=encodeURIComponent($.trim($("#perc-finder-item-search").val()));var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("searchQuery",encodedSearchText);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}else{setView(PERC_FINDER_SEARCH_RESULTS)}setSearchViewButtonsStates();$("#mcol-path-summary").val("")}function sortView(column,order){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn",column);percFinderListviewContainer.data("sortOrder",order);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function setViewColumn(){setView(PERC_FINDER_VIEW_COLUMN)}function setViewList(){setView(PERC_FINDER_VIEW_LIST)}function setViewSearch(){performSearch()}function setMyPagesView(){setView(PERC_FINDER_SEARCH_TYPE_MYPAGES,true)}function set_view_options_button_state(view){$(".perc-finder-view-options a").removeClass("ui-active");switch(view){case PERC_FINDER_VIEW_COLUMN:chooseColumnView.addClass("ui-active");break;case PERC_FINDER_VIEW_LIST:case PERC_FINDER_SEARCH_RESULTS:chooseListView.addClass("ui-active");break;case PERC_FINDER_SEARCH_TYPE_MYPAGES:chooseMyPagesView.addClass("ui-active");break;default:chooseColumnView.addClass("ui-active")}}function setView(view,forceSet){var force=forceSet?true:false;MAX_RESULTS=$.perc_finderInstance.maxResults;set_view_options_button_state(view);if(view===currentFinderView&&!force){return}if((currentFinderView===PERC_FINDER_SEARCH_RESULTS&&view===PERC_FINDER_VIEW_LIST)||(currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES&&view===PERC_FINDER_VIEW_LIST)){return}currentFinderView=view;var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");allColumns.find("#perc-finder-listview").parents("td").remove();var finderDiv=$(".perc-finder");if(pagingBar){pagingBar.remove();fixIframeHeight();fixHeight();pagingBar=null;var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}}$(".perc-finder-body").attr("perc-view",view);if(view===PERC_FINDER_VIEW_COLUMN){allColumns.show();finder.open(finder.getCurrentPath());setColumnViewButtonOn()}else{if(view===PERC_FINDER_VIEW_LIST){percFinderListviewContainer=addListViewContainer();var contentPath=lastColumn.data("path");if(typeof(contentPath)=="undefined"){lastColumn=lastColumn.prev();contentPath=lastColumn.data("path").join("/")}else{contentPath=contentPath.join("/")}_updateListViewContainerData(contentPath,lastColumn.data("startIndex"),showPagingBar);setListViewButtonOn()}else{if(view===PERC_FINDER_SEARCH_RESULTS||view===PERC_FINDER_SEARCH_TYPE_MYPAGES){$(".perc-view-column-fixed a").removeClass("mcol-opened");$("#perc-finder-listing-Search").addClass("mcol-opened");var percFinderListviewContainer=addListViewContainer();var searchQuery=encodeURIComponent($.trim($("#perc-finder-item-search").val()));if(searchQuery==null){searchQuery==""}percFinderListviewContainer.data("searchQuery",searchQuery);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",showPagingBar);if(view===PERC_FINDER_SEARCH_TYPE_MYPAGES){percFinderListviewContainer.data("searchType",PERC_FINDER_SEARCH_TYPE_MYPAGES)}refreshView();setListViewButtonOn(view);setSearchViewButtonsStates();finder.setStateButtonsDesignNode(false);$("#mcol-path-summary").val(searchQuery)}}}}function _updateListViewContainerData(contentPath,startIndex,pagingBarCallback){percFinderListviewContainer.data("path",contentPath);percFinderListviewContainer.data("startIndex",startIndex);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",pagingBarCallback);refreshView()}function setListViewButtonOn(view){$("#perc-finder-choose-view #perc-finder-choose-columnview").removeClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").addClass("ui-enabled")}function setColumnViewButtonOn(){$("#perc-finder-choose-view #perc-finder-choose-columnview").addClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setViewButtonsOff(){$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setSearchViewButtonsStates(){$.percFinderButtons().disableAllButtonsButSite()}function confirm_if_dirty(callback,errorCallback,options){dirtyController.confirmIfDirty(callback,errorCallback,options)}function openAsset(assetId,isEditMode){$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,assetId).done(function(){$.perc_utils.info("Added asset with id "+assetId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)});var aName=$.PercNavigationManager.getName();var handler=isEditMode?$.PercAssetController.getAssetEditorForAssetId:$.PercAssetController.getAssetViewForAssetId;handler(assetId,function(status,assetEditorUrl){if(status==$.PercServiceUtils.STATUS_SUCCESS){$.PercIFrameView.renderAssetEditor(finder,null,assetEditorUrl,null,null,false);addTransitionButtons("percAsset");$("#perc-revisions-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){var isEditMode=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT;_openRevisions(assetId,aName,isEditMode)});$("#perc-pubhistory-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){_openPublishingHistory(assetId,aName)});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(assetId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{assetId:assetId,aName:aName,trName:"Publish"},{assetId:assetId,aName:aName},{assetId:assetId,aName:aName,trName:"Take Down"},{assetId:assetId,aName:aName,trName:"Stage"},{assetId:assetId,aName:aName,trName:"Remove from Staging"},assetId],percDropdownDisabledFlag:disableAction})}}})}}else{var dlgTitle="Error";var dlgContent=assetEditorUrl;if(assetEditorUrl.indexOf("must be checked out by the current user")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Overridden",[contentName])}else{if(assetEditorUrl.indexOf("Item not found")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Deleted",[contentName])}}$.perc_utils.alert_dialog({title:dlgTitle,content:dlgContent,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}})}function _openRevisions(assetId,assetName,isEditMode){var mode=isEditMode?$.PercRevisionDialog.ITEM_MODE_VIEW:$.PercRevisionDialog.ITEM_MODE_EDIT;$.PercRevisionDialog.open(assetId,assetName,$.PercRevisionDialog.ITEM_TYPE_ASSET,mode)}function _openPublishingHistory(assetId,assetName){$.PercPublishingHistoryDialog.open(assetId,assetName,$.PercPublishingHistoryDialog.ITEM_TYPE_ASSET)}function checkOutCheckInPage(newId,notificationId,notifyComplete,pathType){if(newId!=null){var type="percPage";if(pathType==$.PercNavigationManager.PATH_TYPE_ASSET){type="percAsset"}$.PercWorkflowController().checkOut(type,newId,function(status){if(status){if(contentId&&(newId!=contentId)){$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}else{notifyComplete(notificationId,true)}}else{notifyComplete(notificationId,false)}})}else{$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}function save(type,callback){if(type=="asset"){var newAsset=true;if($.PercNavigationManager.getId()){newAsset=false}$.PercIFrameView.saveContent(newAsset);callback()}else{if(type=="page"||type=="template"){if(layoutModel!=undefined&&layoutModel!=null){$.PercBlockUI();layoutModel.save(function(){$.unblockUI();callback()})}}}}function addTransitionButtons(itemType){function addSaveAndCloseButtons(){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&view==$.PercNavigationManager.VIEW_EDIT_ASSET){var saveButton='<a style="float: right;" name="perc_wizard_save" title="Save" class="perc-save" id="perc-save-content">  </a>';$("#perc-content-menu").append($(saveButton));$("#perc-save-content").click(function(){var newAsset=!contentId||contentId==null;if(!newAsset){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){$.PercIFrameView.saveContent(newAsset)},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})}else{$.PercIFrameView.saveContent(newAsset)}})}if($.PercNavigationManager.getMode()!=$.PercNavigationManager.MODE_EDIT){var editButton='<a style="float: right;" name="perc_page_edit" title="Edit" class="perc-edit-button" id="perc-page-edit">  </a>';$("#perc-content-menu").append($(editButton));currentContentPath=$.PercNavigationManager.getPath();$.PercPathService.getPathItemForPath(currentContentPath,function(message,item){var currentItem=item.PathItem;$("#perc-page-edit").data("currentItem",currentItem).click(function(){var item=$(this).data("currentItem");if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.PercNavigationManager.handleOpenPage(item,true)}else{if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDIT_ASSET){$.PercNavigationManager.handleOpenAsset(item,true)}else{var eMsg="Cannot open unknown view.";$.perc_utils.alert_dialog({title:"Error",content:eMsg})}}})})}var closeButton="<a style='float: right;' class='perc-close' title='Close' id='perc-page-close'></a>";$("#perc-content-menu").append($(closeButton));$("#perc-page-close").click(function(){if(contentId){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){confirm_if_dirty(function(){$.PercBlockUI($.PercBlockUIMode.CURSORONLY);if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkIn(contentId,function(status){contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()})}else{contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}})}function addCommentsIcon(){$.PercRevisionService.getLastComment(contentId,function(status,result){if(status==$.PercServiceUtils.STATUS_SUCCESS){if(result.data&&result.data.length>0){var commentIcon=$("<a style='float: right;' tooltip='"+result.data+"' class='perc-last-comment-menubar'><span class='perc-font-icon icon-comment'/></a>");commentIcon.tooltip({delay:500,left:-150,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+result.data+"</p>"}});$("#tooltip").css("margin-right","20px");$("#perc-content-menu").append(commentIcon)}else{$.perc_utils.info("No comment for this page in its last transaction.")}}else{$.perc_utils.info("Failed to get the last comment information from server for page id: "+contentId+". See server log for more details.")}})}if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&contentId){$.PercWorkflowController().getTransitions(contentId,function(status,results){if(status){var dropdownLabels=[];var dropdownParams=[];var dropdownActions=[];var dropdownButtonImage="";var dropdownButtonImageOver="";results.unshift(results[0]);$.each(results,function(index){var trName=results[index].name;var trClass=results[index].cssClass;var trAlt=results[index].alt;trClass+=" perc-wf-button";var trNameNormal=trName.toLowerCase().replace(/[^a-zA-Z0-9\/]/g,"_");var trId="perc_item_transition_"+trNameNormal;var baseImageName="/cm/images/images/splitButtonWf"+trNameNormal;var imageExt=".gif";var regImageFilename=baseImageName+imageExt;var overImageFilename=baseImageName+"Over"+imageExt;if(index==0){defaultButtonImage=regImageFilename;defaultButtonImageOver=overImageFilename;dropdownButtonImage="/cm/images/images/splitButtonArrow.gif";dropdownButtonImageOver="/cm/images/images/splitButtonArrowOn.gif";name}var param={name:trName,contentId:contentId,itemType:itemType};dropdownParams.push(param);dropdownLabels.push(trName);dropdownActions.push(handlePageWorkflowDropdownAction)});var pageWorkflowDropdown=$("#perc-dropdown-page-workflow");pageWorkflowDropdown.append($("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-workflow-split-button-"+$.perc_textFilters.IDNAMECDATA(dropdownLabels[0]))).append($("<div />").addClass("perc-workflow").css("display","inline-block"));pageWorkflowDropdown.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-workflow",percDropdownOptionLabels:dropdownLabels,percDropdownCallbacks:dropdownActions,percDropdownCallbackData:dropdownParams,percDropdownTitleImage:dropdownButtonImage,percDropdownTitleImageOver:dropdownButtonImageOver,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-page-workflow"});pageWorkflowDropdown.find(".perc-dropdown-title").unbind("click");pageWorkflowDropdown.children("a").click(function(){dropdownActions[0](dropdownParams[0])});addSaveAndCloseButtons()}})}else{addSaveAndCloseButtons();addCommentsIcon()}}finder.addPathChangedListener(function(p){if(currentFinderView===PERC_FINDER_VIEW_COLUMN){return}if(finder.flagChangeView){setView(PERC_FINDER_VIEW_COLUMN)}});$.PercNavigationManager.registerFinder(finder);$.PercNavigationManager.addLocationChangeListener(function(url,id,notifyComplete,params){var newId=params.id;var modeSwitch=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY&&params.mode==$.PercNavigationManager.MODE_EDIT;if(!modeSwitch&&!$.PercNavigationManager.isReopenAllowed()&&contentId&&contentId==newId){var options={title:"Open "+type,content:"The "+type+" '"+$.PercNavigationManager.getName()+"' is already open."};$.perc_utils.alert_dialog(options);notifyComplete(id,false);return}var ok=false;dirty=dirtyController.isDirty();if(dirty){confirm_if_dirty(function(){if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}return})}else{if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}}});$(".perc-finder").append(finder.elem);finder.on("resize",function(event,ui){if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}});finder.update_finder_height();finderButtons=$.percFinderButtons().createButtons(finder,percFinderViewAPI);var contentId=$.PercNavigationManager.getId();var pageMode=$.PercNavigationManager.getMode();var contentName=$.PercNavigationManager.getName();var type=$.PercNavigationManager.getPathType();var view=$.PercNavigationManager.getView();function checkForMigrationWarnings(contentId){function onPageHasEmptyMigrationWidgets(){$.perc_utils.alert_dialog({title:I18N.message("Warning"),content:I18N.message("Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray."),okCallBack:function(){$.PercPageService.clearFlagShowMigrationEmptyMessage(contentId)}})}$.PercPageService.checkForEmptyMigrationWidgets(contentId,onPageHasEmptyMigrationWidgets)}if(type==$.PercNavigationManager.PATH_TYPE_PAGE&&contentId&&contentName){if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percPage",contentId,function(status){if(!status){contentId=null;contentName=null;var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}return}else{checkForMigrationWarnings(contentId);pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}})}else{pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&contentId){var assetId=contentId;var path=$.PercNavigationManager.getPath();$("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name' title = "+contentName+"> "+contentName+"</span>");if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){openAsset(assetId,true)}})}else{openAsset(assetId,false)}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&!contentId){var memento=$j.PercNavigationManager.getMemento();if(memento.widgetId){$.PercNewAssetDialog.openViewer(memento.folderPath,memento.widgetId)}else{$.PercNewAssetDialog.open()}}else{if(!contentId){var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}}}}}if(contentName!=null){$("#perc-editor-inline-help").hide()}function handlePageWorkflowDropdownAction(params){var contentId=params.contentId;var itemType=params.itemType;var trName=params.name;confirm_if_dirty(function(){var type=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"asset":"page";doIfItemExists(params.contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){var buttons={};buttons[trName]={click:function(){userComment=$("#perc-workflow-comment").val();commentDialog.remove();$.PercBlockUI();$.PercWorkflowController().transition(contentId,itemType,trName,encodeURIComponent(userComment),function(status){if(status){contentId=null;$.unblockUI();if(type=="page"&&trName=="Archive"){$.PercRedirectHandler.createRedirect($.PercNavigationManager.getPath(),"","page").fail(function(errMsg){$.perc_utils.alert_dialog({title:"Redirect creation error",content:errMsg,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}).done(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}else{$.unblockUI()}})},id:"perc-workflow-comment-ok"};buttons.Cancel={click:function(){commentDialog.remove()},id:"perc-workflow-comment-cancel"};var userComment="";var commentDialog=$("<div><div class='perc-workflow-comment-label' data='"+trName+'\'>Enter comments (limit to 255 characters)</div><textarea id="perc-workflow-comment" name="perc-workflow-comment" maxlength="255"></textarea></div>').perc_dialog({dialogClass:"perc-workflow-comment-dialog",title:"Enter Comments",modal:true,resizable:false,percButtons:buttons,width:400,id:"perc-workflow-comment-dialog"})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _openSchedule(callbackData){var itemId=callbackData.assetId;var assetName=callbackData.aName;if(dialogFlag){$.PercScheduleDialog.open(itemId,assetName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,assetName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,assetName)}}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Continue to publish now?",success:function(){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}}function _publishItem(callbackData){var itemId=callbackData.assetId;var trName=callbackData.trName;var view=$.PercNavigationManager.getView();var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){$.unblockUI();if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var SitePublishResponse=JSON.parse(results[0]).SitePublishResponse;if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES){$.perc_utils.alert_dialog({title:"Warning",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration multiple sites",[SitePublishResponse.warningMessage])})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{if(typeof(SitePublishResponse.warningMessage)!="undefined"&&SitePublishResponse.warningMessage!=""){$.perc_utils.alert_dialog({title:"Warning",content:SitePublishResponse.warningMessage,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}}}}}}})(jQuery,jQuery.Percussion);(function(v){v.PercIFrameView={renderAssetEditor:e,saveContent:y};var d=v.PercDirtyController;var p=false;var A=null;var x,w,h,f;function e(C,F,D,K,E,G){h=v("#frame");h.contents().remove();h.unbind(".reload");A=K;x=G;w=F;h[0].src=D;var H=/sys_folderid=([0-9]+)/;H=H.exec(D);f=H&&H.length>0?H[1]:null;v.PercContentPreSubmitHandlers.clearHandlers();h.load(function(){if(p==false){p=true;z()}else{q()}});fixIframeHeight();if(x){var I=v("#perc-layout-menu").length>0?"#perc-layout-menu":"#perc-content-menu";v(I).html("");v('<a style="float: right;" name="perc_wizard_save" class="perc-save" id="perc-save-content">  </a>').appendTo(I);v('<a style="float: right;" class="perc-close" id="perc-cancel-content">  </a>').appendTo(I);v("#perc-save-content").unbind("click").click(function(){y(true)});v("#perc-cancel-content").unbind("click").click(function(){J()});function J(){v.PercNavigationManager.goToDashboard()}}}function q(){if(h.contents().find("#perc-content-edit-errors").length==0){if(x){B(h);v.unblockUI()}else{v.PercPathService.getPathItemById(v.PercNavigationManager.getId(),function(D,C){if(D==v.PercServiceUtils.STATUS_SUCCESS){var E=C.PathItem.name;v.PercNavigationManager.setReopenAllowed(true);v.PercNavigationManager.goToLocation(v.PercNavigationManager.VIEW_EDIT_ASSET,v.PercNavigationManager.getSiteName(),v.PercNavigationManager.getMode(),v.PercNavigationManager.getId(),E,v.PercNavigationManager.getPath(),v.PercNavigationManager.PATH_TYPE_ASSET);v.unblockUI()}else{v.unblockUI();v.perc_utils.alert_dialog({title:"Error",content:C})}})}}else{b(h.contents().find("#perc-content-form"));v.unblockUI()}}function z(){if(x&&w){h.contents().find("[name=sys_workflowid]").val(w)}var C=h.contents().find("#perc-content-form");b(C);if(!x){h.contents().find("#perc-site-impact-panel").show();v.PercSiteImpactView.renderSiteImpact(v.PercNavigationManager.getId(),v.PercSiteImpactView.ITEM_TYPE_ASSET,h.contents().find("#perc-site-impact-panel"))}}function y(C){d.setDirty(false,"asset");v.PercBlockUI();var D=true;v.each(v.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){D=false}});if(!D){v.unblockUI();return}v.PercContentPreSubmitHandlers.clearHandlers();v(window).removeData();h.removeData();h.contents().find("#perc-content-form").submit()}function n(C,E,D){v.PercNavigationManager.goToLocation(v.PercNavigationManager.VIEW_EDIT_ASSET,v.PercNavigationManager.getSiteName(),v.PercNavigationManager.getMode(),D,E,C+"/"+E,v.PercNavigationManager.PATH_TYPE_ASSET)}function b(D){if(f){var E=D.attr("action");E=E+"?sys_folderid="+f+"&sys_asset_folderid="+f;D.attr("action",E)}var C=D.find("[name=sys_title]");var C=D.find("[name=sys_title]");if(C.length>0){v.perc_filterField(C,v.perc_textFilters.URL)}D.find("[type=text]").keypress(function(F){if(F.keyCode==13){return false}})}function B(D){var C=D.contents().find("[name=sys_contentid]").val();if(C==""){v.perc_utils.alert_dialog({title:"Error",content:"Unable to create asset"});return}var C="-1-101-"+C;path="//Folders/$System$/Assets"+A;v.PercAssetController.putAssetInFolder(C,path,function(E,F){n(v.perc_paths.ASSETS_ROOT+A,D.contents().find("[name=sys_title]").val(),F.AssetFolderRelationship.assetId)})}})(jQuery);(function(b){b.PercNewPageDialog=function(){var e={openDialog:d};function d(q,n){var B="";if(q){q=q.split("/");if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){B=q[2]}}var f=30;var C="<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> ";if(!n){C=C+"<label for='perc-select-template'>Select a template: </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a>"}else{C=C+"<input type='hidden' id='perc-select-template' name='template' value='"+n+"'/>"}C=C+"<div style='float:left;><fieldset><label for='perc-page-linktext' class='perc-required-field'>"+(!n?I18N.message("perc.ui.newpagedialog.label@Page link text"):I18N.message("perc.ui.newblogpostdialog.label@Post title"))+":</label> <br/> <input type='text' tabindex='"+f+"' class='required' id='perc-page-linktext' name='page_linktext' maxlength='512'/> <br/> ";if(!n){C=C+"<input type='text' style = 'display:none' tabindex='"+f+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> "}else{C=C+"<label for='perc-page-title' class='perc-required-field' style='display: none;'>"+I18N.message("perc.ui.newblogpostdialog.label@Hidden Post title")+":</label> <br style='display: none;'/> <input type='hidden' tabindex='"+f+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> <br style='display: none;'/>"}C=C+"<label for='perc-page-name' class='perc-required-field'>"+(!n?I18N.message("perc.ui.newpagedialog.label@Page name"):I18N.message("perc.ui.newblogpostdialog.label@Post name"))+":</label> <br/> <input type='text' tabindex='"+f+"' class='required' id='perc-page-name' name='page_name' maxlength='255'/><br/> </fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>";var w=!n?800:420;var D=b(C).perc_dialog({title:(!n?I18N.message("perc.ui.newpagedialog.title@New Page"):I18N.message("perc.ui.newblogpostdialog.title@New Post")),buttons:{},percButtons:{Save:{click:function(){h(B)},id:"perc-page-save"},Cancel:{click:function(){F()},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:w,resizable:false,modal:true});if(!n){z()}function A(I){var J=b.PercServiceUtils.extractDefaultErrorMessage(I);var H=b.PercServiceUtils.extractFieldErrorCode(I);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:J,okCallBack:function(){if(H=="page.alreadyExists"){b("#perc-page-name").focus()}}})}function F(){D.remove()}function h(H){b.PercSiteService.getSiteProperties(H,function(J,I){if(J==b.PercServiceUtils.STATUS_SUCCESS){var L=b(D.find("#perc-page-name")[0]).val();var K=I.SiteProperties.defaultFileExtention;if(K&&L.lastIndexOf(".")<0){if(L.length+K.length<255){L+="."+K}else{L=L.substring(0,254-K.length)+"."+K}b(D.find("#perc-page-name")[0]).val(L)}}else{b.perc_utils.alert_dialog({title:"Error",content:I})}D.find("form").submit()})}var p=D.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,messages:v(),debug:true,submitHandler:function(I){var H=b(I).find("[name=page_name]").val();H=b.trim(H);H=b.perc_textFilters.WINDOWS_FILE_NAME(H);b(I).find("[name=page_name]").val(H);b.perc_pathmanager.open_containing_folder(q,function(K,J){b.perc_pagemanager.create_new_page(J,b(I).serializeArray(),function(L){D.remove();E(J.join("/"),H,L.Page.id)},A)})}});function z(){var J=D.find("div.perc-scrollable div.perc-items");var K="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",K);var I;if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){I=b.perc_paths.TEMPLATES_BY_SITE+"/"+q[2]}else{I=b.perc_paths.TEMPLATES_USER}b.getJSON(I,function(L){b.each(L.TemplateSummary,function(){J.append(H(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var M=b(this).find(".item-id").text();b("#perc-select-template").val(M);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});function H(M){var L="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return L.replace(/@IMG_SRC@/,M.imageThumbPath).replace(/@ITEM_ID@/,M.id).replace(/@ITEM_LABEL@/,M.name).replace(/@ITEM_TT@/g,M.name)}}var y=b("#perc-page-linktext");var x=b("#perc-page-title");var G=b("#perc-page-name");b.perc_textAutoFill(y,x);b.perc_textAutoFill(y,G,b.perc_autoFillTextFilters.URL,null,255);b.perc_filterField(G,b.perc_textFilters.URL);function v(){var H={page_linktext:{required:(!n?"Page link text":"Post Title")+"  is a required field."},page_title:{required:(!n?"Page":"Hidden Post")+" title is a required field."},page_name:{required:(!n?"Page":"Post")+" name is a required field."}};return H}function E(J,H,I){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR,b.PercNavigationManager.getSiteName(),b.PercNavigationManager.MODE_EDIT,I,H,J+"/"+H,b.PercNavigationManager.PATH_TYPE_PAGE)}}return e}})(jQuery);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(d,q){var x=b.perc_utils;var n;b.PercNewAssetDialog.open=function(){var A=30;var H;var E;var F={};E=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:F,percButtons:{Next:{click:function(){var L=b.PercNavigationManager.getMemento().lastOpenedItem;if(!x.isBlankString(L)){b.PercWorkflowController().checkIn(L,function(M){B()})}else{B()}},id:"perc-page-save"},Cancel:{click:function(){I();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var L=b.PercNavigationManager.getBookmark();var M=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(L)!=M){window.location.href=M}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var C=b("#perc-select-template_perc_is");var G="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";C.attr("style",G);function I(){E.remove()}function B(){E.find("form").submit()}H=E.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(M){var L=b("#perc-editor-url").val();var N=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(n,function(P,O){E.remove();path=O.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(R){var Q=R.id;var S=Q.substring(Q.lastIndexOf("-")+1);L+="&sys_folderid="+S+"&sys_asset_folderid="+S+"&sys_workflowid="+N;b.PercIFrameView.renderAssetEditor(d,N,L,path,O,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(h(),function(N){var M=E.find("div.perc-scrollable div.perc-items");for(a in N){var L=N[a];M.append(f(L));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var O=b(this).find(".item-editor-url").text();var P=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(O);b("#perc-workflow-id").val(P);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var K=b("#perc-page-name");var z=b("#perc-page-title");var y=b("#perc-page-url");function D(L){return L.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function J(L){return L.replace(/\\/g,"")}b.perc_textAutoFill(K,z,J);b.perc_textAutoFill(K,y,D);b.perc_textAutoFill(K,"#perc-page-linktitle",J);b.perc_filterField(K,J);b.perc_filterField(z,J);b.perc_filterField(y,D);b.perc_filterField("#perc-page-linktitle",J)};b.PercNewAssetDialog.openViewer=function(y,z){b.PercAssetService.getAssetEditorForWidgetAndFolder(y,z,function(B,A){if(B==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var D=A.AssetEditor.pop();var C=D.url;var E=D.workflowId;path=y.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(y,function(G){var F=G.id;var H=F.substring(F.lastIndexOf("-")+1);C+="&sys_folderid="+H+"&sys_asset_folderid="+H+"&sys_workflowid="+E;b.PercIFrameView.renderAssetEditor(d,E,C,path,y.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function e(){b.PercFolderHelper().getAccessLevelByPath(n.join("/"),false,function(z,y){if(z==b.PercFolderHelper().PERMISSION_ERROR||y==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var B=d.getCurrentItem();var A="";if(B!=null){A=B.folderPaths;if(B.type=="Folder"){A=B.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(D,C){if(D==b.PercServiceUtils.STATUS_ERROR||C==b.PercUserService.ACCESS_READ||C==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{q.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},A)}})}function f(z){var y="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return y.replace(/@IMG_SRC@/,z.icon).replace(/@ITEM_ID@/g,z.title).replace(/@ITEM_URL@/,z.url).replace(/@ITEM_WORKFLOW_ID@/,z.workflowId).replace(/@ITEM_LABEL@/,z.title)}function h(){return b.deparam.querystring().path}var w=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function p(y){n=y;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){v(false)}else{if(y[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){w.show();v(true);if(y.length<3){v(false)}else{b.PercFolderHelper().getAccessLevelByPath(y.join("/"),true,function(A,z){if(A==b.PercFolderHelper().PERMISSION_ERROR||z==b.PercFolderHelper().PERMISSION_READ){v(false)}})}}else{if(y[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||y[1]==b.perc_paths.SITES_ROOT_NO_SLASH){w.hide()}}}}function v(y){if(y){w.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}else{w.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}d.addPathChangedListener(p);return w}})(jQuery);(function($,P){var CONTENT_TAB=0;var LAYOUT_TAB=1;var STYLES_TAB=2;var view=$.PercNavigationManager.getView();var dialogFlag=true;var querystring=$.deparam.querystring();var pageMode=$.PercNavigationManager.getMode();var isAdmin=$.PercNavigationManager.isAdmin();var isDesigner=$.PercNavigationManager.isDesigner();P.pageView=function(){$(".perc-page-status").hide();$(".perc-page-name").hide();var dirtyController=$.PercDirtyController;if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.perc_iframe_fix($("#frame"))}var utils=$.perc_utils;var pageModel;var currentPageId;var unassigned="UNASSIGNED";var dirty=false;var pageViewAPI={resetPageName:resetPageName,reload:function(){loadTab($("#perc-pageEditor-tabs").tabs("selected"))},getPageId:function(){return currentPageId},clear:function(){$("#frame").each(function(){this.open();this.close()})},confirm_if_dirty:confirm_if_dirty,openPage:openPage,isDirty:isDirty};$("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu, #perc-error-alert").css("visibility","hidden");function openPage(pageId,pageName){try{$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,pageId).done(function(){$.perc_utils.info("Added page with id "+pageId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)})}catch(err){$.perc_utils.error("Error adding page with id "+pageId+" to recent item list.")}currentPageId=pageId;$(".perc-page-status").show();$(".perc-page-name").show();getPageStatus(currentPageId);var pglabel=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"Editing Page:":"Viewing Page:";var pgType=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"page-editing":"page-viewing";if(pageName){var titleValue=$.PercNavigationManager.getPath();$(".perc-page-name-name").html('<span class = "perc-title-value"><span class = "perc-page-name-text">'+pageName+"</span></span>");$(".perc-title-value").attr("title",titleValue);$(".perc-title-value").prepend('<span class = "perc-page-name-label">'+pglabel+"</span>");$(".perc-page-details").attr("type",pgType);$("#perc-pageEditor-menu-name").html(pageName);_addMyPagesAction(pageId);$(".perc-page-details").show()}var $tabs=$("#perc-pageEditor-tabs");var currentTabIndex=$tabs.tabs().tabs("option","selected");var defaultTabIndex=0;if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,function(){$tabs.data("disabled.tabs",[]).tabs("select",defaultTabIndex);$("#perc-pageEditor-tabs").find("li").each(function(i){if(pageModel.getTemplateModel().getTemplateType()!==unassigned){$(this).removeClass("ui-state-disabled")}});var enableMenu=pageModel.getTemplateModel().getTemplateType()!==unassigned;if(isAdmin||isDesigner){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Edit Template","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,enableMenu,true]})}else{actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Change Template"],percDropdownDisabledFlag:[false,true,true]})}addMoreMenus()})}$("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)});var actionsDropdown=$("#perc-dropdown-actions");var viewDropdown=$("#perc-dropdown-view");if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","View Meta-data"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)}],percDropdownCallbackData:["Action","View Meta-data"],percDropdownDisabledFlag:[false,true]});viewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History"],percDropdownCallbacks:[function(){},_openRevisions,_openComments,_previewPage,_openPublishingHistory],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"View"],percDropdownDisabledFlag:[false,true,true,true,true]});addMoreMenus()}function _addMyPagesAction(pageId){$.PercPageService.isMyPage(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$(".perc-my-pages-action").addClass("perc-my-pages-error").attr("title","Error occurred retreving the status.")}else{if(result){$(".perc-my-pages-action").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").click(function(){_removeFromMyPages(pageId)})}else{$(".perc-my-pages-action").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").click(function(){_addToMyPages(pageId)})}}})}function _addToMyPages(pageId){$.PercPageService.addToMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-add-to-my-pages").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").unbind().click(function(){_removeFromMyPages(pageId)})}})}function _removeFromMyPages(pageId){$.PercPageService.removeFromMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-remove-from-my-pages").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").unbind().click(function(){_addToMyPages(pageId)})}})}function addMoreMenus(){if(isAdmin||isDesigner){var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]})}else{var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-layout-actions",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]})}var layoutViewDropdown=$("#perc-dropdown-view-layout");layoutViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","View","View"],percDropdownDisabledFlag:[false,true,true]});var styleViewDropdown=$("#perc-dropdown-view-style");styleViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(currentPageId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Take Down"},{pageId:currentPageId,pageName:pageName,trName:"Stage"},{pageId:currentPageId,pageName:pageName,trName:"Remove from Staging"},currentPageId],percDropdownDisabledFlag:disableAction})}}});$.PercAssetService.getUnusedAssets(currentPageId,populateOrphanAssets);var viewDropDownData={percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History","Disable JavaScript"],percDropdownCallbacks:[$.noop,_openRevisions,_openComments,_previewPage,_openPublishingHistory,$.noop],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"Disable JavaScript"],percDropdownDisabledFlag:[false,true,true,true,true,true]};viewDropdown.PercDropdown(viewDropDownData)}if(currentTabIndex==defaultTabIndex){loadTab(defaultTabIndex)}initOrphanAssetsMenu()}}function handleIn(){var self=$(this);self.attr("src",self.data("overIconSrc"))}function handleOut(){var self=$(this);self.attr("src",self.data("iconSrc"))}function populateOrphanAssets(status,unusedAssets){$("#perc_orphan_assets_expander").show();if(status==$.PercServiceUtils.STATUS_ERROR){$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled");$.perc_utils.alert_dialog({title:"Error",content:unusedAssets});return}if(unusedAssets.length>0){var orphanAssetsContainer=$(".perc-orphan-assets-list");orphanAssetsContainer.empty();var htmlAssets="";for(var i=0;i<unusedAssets.length;i++){var asset=unusedAssets[i];var hoverText="Local";var folderPaths="";if(typeof(asset.folderPaths)!="undefined"){hoverText=asset.folderPaths.replace("//Folders/$System$","")+"/"+asset.name;folderPaths=asset.folderPaths}orphanAssetsContainer.append($("<a />").attr("alt",hoverText).attr("title",hoverText).addClass("perc-orphan-asset").data("spec",{type:asset.type,id:asset.id,relationshipId:asset.relationshipId}).append($("<div />").css("position","relative").addClass("perc-widget-tool").append($("<img />").attr("src",asset.icon).data("iconSrc",asset.icon).data("overIconSrc",asset.overIcon).hover(handleIn,handleOut)).append($("<div />").css("overflow","hidden").addClass("perc-asset-label").append($("<nobr />").html(asset.title)))).css("cursor","pointer").data("assetId",asset.id).data("assetType",asset.type).data("assetFolderPaths",folderPaths).data("widgetId",asset.widgetId).unbind().click(selectOrphanAsset))}$("#perc_orphan_assets_expander").unbind().click(function(){clearSelection();$.fn.percOrphanAssetsMaximizer(P)});orphanAssetsContainer.find(".perc-orphan-asset").draggable({helper:function(){var helper=$(this).clone();helper.find(".perc-asset-label").css("padding","0px 0px 5px 5px");return helper},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:function(){$("body").css("overflow","hidden")},stop:function(){$("body").css("overflow","auto")},delay:25});$("#perc_orphan_assets_maximizer").removeClass("perc-disabled");$("#perc_orphan_assets_expander").removeClass("perc-disabled")}else{$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled")}}$(window).resize(function(){fixIframeHeight()});function initOrphanAssetsMenu(){$("#perc_asset_library").disableSelection();$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}function deleteOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanIds=[];var orphanTypes=[];var orphanIsShared=[];var orphanWidgetsIds=[];for(var i=0;i<unused.length;i++){orphanIds.push($(unused[i]).data("assetId"));orphanTypes.push($(unused[i]).data("assetType"));orphanWidgetsIds.push($(unused[i]).data("widgetId"));var folderPaths=$(unused).data("assetFolderPaths");if(typeof(folderPaths)!="undefined"){orphanIsShared.push(true)}else{orphanIsShared.push(false)}}var title="Remove Unused Asset";var assetmsg=(i<2)?"asset":"assets";var msg="Are you sure you want to remove the unused "+assetmsg+"?";var options={id:"perc-orphan-asset-delete-dialog",title:title,question:msg,type:"YES_PREFERRED_NO",cancel:function(){},success:function(){pageModel.clearOrphanAssets(orphanWidgetsIds,orphanTypes,orphanIds,orphanAssetDeleted)}};$.perc_utils.confirm_dialog(options)}function orphanAssetDeleted(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");$(unused).remove();clearSelection();var remainingAssets=$("#perc_asset_library").find(".perc-orphan-assets-list").find("a");if(remainingAssets.length==0){$.fn.percOrphanAssetsMaximizer(P);$("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();$("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function editOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanId=$(unused).data("assetId");var orphanType=$(unused).data("assetType");var orphanWidgetId=$(unused).data("widgetId");var orphanIsShared=false;var widgetData={widgetid:orphanWidgetId,widgetdefid:orphanType};pageModel.configureAsset(widgetData,orphanId,orphanIsShared,orphanAssetEdited)}function orphanAssetEdited(){}function selectOrphanAsset(e){if(e.shiftKey){$(this).toggleClass("perc-orphan-assets-selected")}else{if($(this).is(".perc-orphan-assets-selected")){clearSelection()}else{clearSelection();$(this).toggleClass("perc-orphan-assets-selected")}}var parent=$(this).parent();var selected=$(parent).find(".perc-orphan-assets-selected");if(selected.length>0){$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/delete.png").unbind().click(deleteOrphanAsset);$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/edit.png").unbind().click(editOrphanAsset)}else{$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}if(selected.length>=2){$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}}function clearSelection(){$(".perc-orphan-assets-list").find("a").removeClass("perc-orphan-assets-selected");$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}$("#perc-pageEditor-tabs").tabs({disabled:[1,2],select:function(event,ui){if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);$("#perc-pageEditor-tabs").tabs("select",ui.index);resetJavaScriptMenu()});return false}else{resetJavaScriptMenu()}loadTab(ui.index,true)}});if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR&&$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$("#perc-wid-lib-expander").click(function(){$.fn.percWidLibMaximizer(P)})}function loadTab(index,addWrapper){if(addWrapper){var viewWrapper=$j.PercComponentWrapper("perc-action-page-tab-selected",["perc-ui-component-editor-toolbar","perc-ui-component-editor-frame"]);var isWrapperSet=$j.PercViewReadyManager.setWrapper(viewWrapper);if(!isWrapperSet){$j.PercViewReadyManager.showRenderingProgressWarning();return}}if(index==CONTENT_TAB){loadContent(currentPageId)}else{if(index==LAYOUT_TAB){loadLayout(currentPageId)}else{if(index==STYLES_TAB){loadCss(currentPageId)}}}}function _changeTemplate(){var successCallBack=function(){window.location.reload()};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);openChangeTemplateDialog()});return false}else{openChangeTemplateDialog()}function openChangeTemplateDialog(){$.PercChangeTemplateDialog().openDialog(currentPageId,pageModel.getTemplateModel().getId(),$.PercNavigationManager.getSiteName(),successCallBack)}}function _loadTemplate(){var memento={templateId:pageModel.getTemplateModel().getId(),pageId:currentPageId,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,$.PercNavigationManager.getSiteName(),null,null,null,$.PercNavigationManager.getPath(),null,memento)}function resetJavaScriptMenu(){$(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}function resetPageName(){$.ajax({url:$.perc_paths.PAGE_CREATE+"/"+currentPageId,success:function(data){$("#perc-pageEditor-menu-name").html(data.Page.name)},type:"GET",dataType:"json"})}function confirm_if_dirty(callback,errorCallback,options){options=options||{};errorCallback=errorCallback||function(){};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(callback,errorCallback,options)}else{callback()}}function loadContent(pageId){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupContent);$.PercAssetService.getUnusedAssets(pageId,populateOrphanAssets);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}else{var previewPath=$.perc_paths.PAGE_PREVIEW+currentPageId;$("#frame").contents().remove();$("#frame").attr("src",previewPath);$("#frame").unbind().load(function(){fixIframeHeight();window.setTimeout(function(){$.perc_utils.handleLinks($("#frame"))},500);var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}}function loadLayout(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupLayout);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function loadCss(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setUpCss);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function setupContent(){fixIframeHeight();P.contentView($("#frame"),pageModel)}function setupLayout(){fixIframeHeight();var layoutController=P.layoutController(pageModel);var sizeController=P.sizeController(pageModel);P.layoutView($("#frame"),pageModel,layoutController,sizeController,function(isDirty){setDirty(isDirty)});$("#region-tool").draggable({helper:"clone"})}function setDirty(isDirty){dirtyController.setDirty(isDirty,"page");dirty=isDirty}function isDirty(){return dirty}function setUpCss(){fixIframeHeight();var cssController=P.cssController(pageModel,$("#frame"),P.CSSPreviewView($("#frame"),pageModel));$("#perc-css-editor-save").click(function(){cssController.save(function(){})});$("#perc-css-editor-cancel").click(function(){pageModel.load();dirtyController.setDirty(false,"template")})}function _openSchedule(callbackData){var itemId=callbackData.pageId;var pageName=callbackData.pageName;if(dialogFlag){$.PercScheduleDialog.open(itemId,pageName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,pageName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,pageName)}}function getPageStatus(pageId){var pagePath=$.PercNavigationManager.getPath();$.perc_pathmanager.getItemProperties(pagePath,function(status,itemProps){var pageStatus=itemProps.status;$(".perc-page-status-status").html(pageStatus);$.PercItemPublisherService.getScheduleDates(pageId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;if(scheduleDates.startDate&&pageStatus=="Pending"){$(".perc-page-status-status").html("Approved for "+scheduleDates.startDate)}})})}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Clear the schedule and continue to publish now?",success:function(){_immediateItemPublish(itemId,itemType)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{_immediateItemPublish(itemId,itemType)}}function _immediateItemPublish(itemId,itemType){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}function _publishItem(callbackData){var itemId=callbackData.pageId;var trName=callbackData.trName;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var siteName=$.PercNavigationManager.getSiteName();if(siteName===undefined&&itemType=="Page"){var currentItemPath=$.perc_finder().getPathItemById(itemId).folderPath;siteName=currentItemPath.replace("/"+$.perc_paths.SITES_ROOT,"").split("/")[1]}confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){doIfDefaultServerNotModified(siteName,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.unblockUI();$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var publishStatus=JSON.parse(results[0]).SitePublishResponse.status;if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}}}}}function _openRevisions(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercRevisionDialog.open(pageId,pageName,$.PercRevisionDialog.ITEM_TYPE_PAGE,$.PercRevisionDialog.ITEM_MODE_VIEW)}function _openComments(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercCommentsDialog.open(pageId,pageName,$.PercCommentsDialog.ITEM_TYPE_PAGE)}function _openPublishingHistory(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercPublishingHistoryDialog.open(pageId,pageName,$.PercPublishingHistoryDialog.ITEM_TYPE_PAGE)}function _openOptimizer(callbackData){$.PercPageOptimizerDialog.open(callbackData.pageId,callbackData.pageName)}function _previewPage(currentPageId){confirm_if_dirty(function(){jQuery.perc_finder().launchPagePreview(currentPageId)})}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfDefaultServerNotModified(siteName,callback){$.PercNavigationManager.loadSiteProperties(siteName,function(siteProperties){$.PercItemPublisherService.isDefaultServerModified(siteProperties.id,function(status,result){if(status){if(result){$.perc_utils.alert_dialog({content:"Cannot publish or remove this item until the CM1 server is restarted.",title:"Warning"})}else{callback()}}})})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}return pageViewAPI}})(jQuery,jQuery.Percussion);(function(h){h.PercAssetController={getAssetEditorLibrary:e,getAssetEditorForAssetId:b,getAssetViewForAssetId:d,getPathItemForPath:f,putAssetInFolder:n};function e(q,p){function v(A,y){var z=[];var x=y.AssetEditor;for(i in x){var D=x[i].icon;var E=x[i].title;var w=x[i].url;var B=x[i].workflowId;var C=new h.PercAssetEditorModel(D,E,w,B);z.push(C)}p(z)}h.PercAssetService.getAssetEditorLibrary(q,v)}function b(p,q){h.PercAssetService.getAssetEditorForAssetId(p,function(v,w){q(v,w)})}function d(p,q){h.PercAssetService.getAssetViewForAssetId(p,function(v,w){q(v,w)})}function f(q,p){function v(w,x){var y=new h.PercPathItemModel(x.PathItem.id,x.PathItem.folderPaths,x.PathItem.icon,x.PathItem.name,x.PathItem.type,x.PathItem.folderPath,x.PathItem.leaf,x.PathItem.path);p(y)}h.PercPathService.getPathItemForPath(q,v)}function n(w,v,p){var q={AssetFolderRelationship:{assetId:w,folderPath:v}};h.PercAssetService.putAssetInFolder(q,p)}})(jQuery);(function(f){f.PercWorkflowController=function(){return{checkIn:e,checkOut:n,transition:q,getTransitions:v,isCheckedOutToCurrentUser:h,doesItemExist:w}};var p=f.PercWorkflowService();function e(A,B){B=B==null?function(){}:B;var z=function(C,D){if(C==f.PercServiceUtils.STATUS_ERROR){var E=f.PercServiceUtils.extractDefaultErrorMessage(D.request);f.perc_utils.debug("Error : "+E);B(false)}else{B(true)}};p.checkIn(A,z)}function n(A,z,B){B=B==null?function(){}:B;p.checkOut(z,function(D,F){if(D==f.PercServiceUtils.STATUS_SUCCESS){var C=F.data.ItemUserInfo;if(C.checkOutUser!=C.currentUser){if(C.assignmentType=="Admin"){var E={title:d[A],question:b(0,C,A),cancel:function(){B(false)},success:function(){x(z,B)},type:"OVERRIDE_OK"};f.perc_utils.confirm_dialog(E)}else{if(C.assignmentType=="Assignee"){var E={title:d[A],content:b(1,C,A)};f.perc_utils.alert_dialog(E);B(false);return}else{var E={title:d[A],content:b(2,C,A)};f.perc_utils.alert_dialog(E);B(false);return}}}else{B(true)}}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(F.request);if(G.indexOf("Not a valid content id")!=-1){var E={title:d[A],content:b(3,C,A)};f.perc_utils.alert_dialog(E);B(false);return}f.perc_utils.alert_dialog({title:"Error",content:G});B(false)}})}function x(z,A){A=A==null?function(){}:A;p.forceCheckOut(z,function(B,C){if(B==f.PercServiceUtils.STATUS_SUCCESS){A(true)}else{var D=f.PercServiceUtils.extractDefaultErrorMessage(C.request);f.perc_utils.alert_dialog({title:"Error",content:D});A(false)}})}function q(C,B,A,E,D){D=D==null?function(){}:D;var z=function(G,I){if(G==f.PercServiceUtils.STATUS_ERROR){var M=f.PercServiceUtils.extractDefaultErrorMessage(I.request);f.perc_utils.alert_dialog({title:"Error",content:M});D(false)}else{var F=I.data;var K=F.ItemTransitionResults.failedAssets;if(K){var J=(B=="percAsset")?"asset":"page";var L="Could not publish the "+J+" because the following related asset(s) could not be published.<br/><br/>";if(f.isArray(K)){f.each(K,function(){var N=this.folderPaths;N=N.substring(N.indexOf("/Assets"))+"/"+this.name;L+="<b>"+N+"</b><br/>"})}else{var H=K.folderPaths;H=H.substring(H.indexOf("/Assets"))+"/"+K.name;L+="<b>"+H+"</b><br/>"}L+="<br/>Either remove the related asset(s) or publish them first and then publish this "+J+".";f.perc_utils.alert_dialog({title:"Error",content:L});D(false)}else{D(true)}}};p.transition(C,A,E,z)}function v(z,A){A=A==null?function(){}:A;p.getTransitions(z,function(B,D){if(B==f.PercServiceUtils.STATUS_SUCCESS){var C=[];var E=D.data.ItemStateTransition.transitionTriggers;if(f.isArray(E)){f.each(E,function(G){if(y[E[G]]){C.push(y[E[G]])}})}else{if(y[E]){C.push(y[E])}}A(true,C)}else{var F=f.PercServiceUtils.extractDefaultErrorMessage(D.request);f.perc_utils.alert_dialog({title:"Error",content:F});A(false,[])}})}function h(A,B){B=B==null?function(){}:B;var z=function(C,D){if(C==f.PercServiceUtils.STATUS_SUCCESS){B(D.data==true,D.data)}else{B(false,f.PercServiceUtils.extractDefaultErrorMessage(D.request))}};p.isCheckedOutToCurrentUser(A,z)}function w(z,A){A=A==null?function(){}:A;h(z,function(B,C){if(typeof C=="string"){A(B||C.indexOf("does not exist")==-1)}else{A(B)}})}function b(A,z,D){var C="";var B="page";if(D=="percAsset"){B="asset"}if(A==0){C="The "+B+" '"+z.itemName+"' is currently being edited by '"+z.checkOutUser+"'.<br/>Select 'Override' to edit this "+B+" anyway. <br/>Unsaved changes to '"+z.itemName+"' may be lost."}else{if(A==1){C="The "+B+" '"+z.itemName+"' is currently being edited by '"+z.checkOutUser+"'."}else{if(A==2){C="You are not authorized to edit the "+B+" '"+z.itemName+"'."}else{if(A==3){C="The "+B+" has been deleted in another session."}}}}return C}var d=[];d.percPage="Open Page";d.percAsset="Open Asset";var y=[];y.Reject={name:"Reject",cssClass:"perc-wf-reject",alt:"Reject"};y.Submit={name:"Submit",cssClass:"perc-wf-submit",alt:"Submit"};y.Approve={name:"Approve",cssClass:"perc-wf-approve",alt:"Approve"};y.Resubmit={name:"Resubmit",cssClass:"perc-wf-resubmit",alt:"Resubmit"};y["Quick Edit"]={name:"Quick Edit",cssClass:"perc-wf-edit",alt:"Edit"};y.Archive={name:"Archive",cssClass:"perc-wf-archive",alt:"Archive"}})(jQuery);(function(b){b.PercPathItemModel=function(v,e,p,h,n,f,d,q){this.id=v;this.folderPaths=e;this.icon=p;this.name=h;this.type=n;this.folderPath=f;this.leaf=d;this.path=q}})(jQuery);(function(b){b.PercWidgetModel=function(){this.id=null;this.locked=false;this.html=null;this.ccs=null;this.definitionId=null;this.name=null;this.properties=null;this.assetIds=null;this.relationshipId=-1;this.setId=function(d){this.id=d};this.getId=function(){return this.id};this.setHtml=function(d){this.html=d};this.getHtml=function(){return this.html};this.setCss=function(d){this.css=d};this.getCss=function(){return this.css};this.setDefinitionId=function(d){this.definitionId=d};this.getDefinitionId=function(){return this.definitionId};this.setProperties=function(d){this.properties=d};this.getProperties=function(){return this.properties};this.setName=function(d){this.name=d};this.getName=function(){return this.name};this.setAssetIds=function(d){this.assetIds=d};this.getAssetIds=function(){return this.assetIds};this.setRelationshipId=function(d){this.relationshipId=d};this.getRelationshipId=function(){return this.relationshipId}};b.PercAssetDropCriteriaModel=function(n,q,e,h,d,v,p,f){this.widgetId=n;this.appendSupport=q;this.locked=e;this.multiItemSupport=h;this.ownerId=d;this.supportedContentTypes=v;this.assetShared=p;this.relationshipId=f;this.log=function(){console.log("widgetId              = "+this.widgetId);console.log("appendSupport         = "+this.appendSupport);console.log("locked                = "+this.locked);console.log("multiItemSupport      = "+this.multiItemSupport);console.log("ownerId               = "+this.ownerId);console.log("supportedContentTypes = "+this.supportedContentTypes)}};b.PercAssetEditorModel=function(e,h,d,f){this.icon=e;this.title=h;this.url=d;this.workflowId=f;this.log=function(){console.log("icon       = "+this.icon);console.log("title      = "+this.title);console.log("url        = "+this.url);console.log("workFlowId = "+this.workflowId)}}})(jQuery);
/* jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Form Plugin
 * version: 2.60
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(e){e.fn.ajaxSubmit=function(I){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof I=="function"){I={success:I}}var z=this.attr("action");var h=(typeof z==="string")?e.trim(z):"";if(h){h=(h.match(/^([^#]+)/)||[])[1]}h=h||window.location.href||"";I=e.extend(true,{url:h,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},I);var J={};this.trigger("form-pre-serialize",[this,I,J]);if(J.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(I.beforeSerialize&&I.beforeSerialize(this,I)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var x,F,D=this.formToArray(I.semantic);if(I.data){I.extraData=I.data;for(x in I.data){if(I.data[x] instanceof Array){for(var A in I.data[x]){D.push({name:x,value:I.data[x][A]})}}else{F=I.data[x];F=e.isFunction(F)?F():F;D.push({name:x,value:F})}}}if(I.beforeSubmit&&I.beforeSubmit(D,this,I)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[D,this,I,J]);if(J.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var f=e.param(D);if(I.type.toUpperCase()=="GET"){I.url+=(I.url.indexOf("?")>=0?"&":"?")+f;I.data=null}else{I.data=f}var H=this,C=[];if(I.resetForm){C.push(function(){H.resetForm()})}if(I.clearForm){C.push(function(){H.clearForm()})}if(!I.dataType&&I.target){var G=I.success||function(){};C.push(function(n){var k=I.replaceTarget?"replaceWith":"html";e(I.target)[k](n).each(G,arguments)})}else{if(I.success){C.push(I.success)}}I.success=function(L,n,M){var K=I.context||I;for(var q=0,k=C.length;q<k;q++){C[q].apply(K,[L,n,M||H,H])}};var y=e("input:file",this).length>0;var j="multipart/form-data";var B=(H.attr("enctype")==j||H.attr("encoding")==j);if(I.iframe!==false&&(y||I.iframe||B)){if(I.closeKeepAlive){e.get(I.closeKeepAlive,E)}else{E()}}else{e.ajax(I)}this.trigger("form-submit-notify",[this,I]);return this;function E(){var q=H[0];if(e(":input[name=submit],:input[id=submit]",q).length){alert('Error: Form elements must not have name or id of "submit".');return}var P=e.extend(true,{},e.ajaxSettings,I);P.context=P.context||P;var S="jqFormIO"+(new Date().getTime()),N="_"+S;var K=e('<iframe id="'+S+'" name="'+S+'" src="'+P.iframeSrc+'" />');var O=K[0];K.css({position:"absolute",top:"-1000px",left:"-1000px"});var L={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;K.attr("src",P.iframeSrc)}};var X=P.global;if(X&&!e.active++){e.event.trigger("ajaxStart")}if(X){e.event.trigger("ajaxSend",[L,P])}if(P.beforeSend&&P.beforeSend.call(P.context,L,P)===false){if(P.global){e.active--}return}if(L.aborted){return}var T=false;var W=0;var M=q.clk;if(M){var U=M.name;if(U&&!M.disabled){P.extraData=P.extraData||{};P.extraData[U]=M.value;if(M.type=="image"){P.extraData[U+".x"]=q.clk_x;P.extraData[U+".y"]=q.clk_y}}}function V(){var ad=H.attr("target"),ab=H.attr("action");q.setAttribute("target",S);if(q.getAttribute("method")!="POST"){q.setAttribute("method","POST")}if(q.getAttribute("action")!=P.url){q.setAttribute("action",P.url)}if(!P.skipEncodingOverride){H.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(P.timeout){setTimeout(function(){W=true;R()},P.timeout)}var ac=[];try{if(P.extraData){for(var ae in P.extraData){ac.push(e('<input type="hidden" name="'+ae+'" value="'+P.extraData[ae]+'" />').appendTo(q)[0])}}K.appendTo("body");O.attachEvent?O.attachEvent("onload",R):O.addEventListener("load",R,false);q.submit()}finally{q.setAttribute("action",ab);if(ad){q.setAttribute("target",ad)}else{H.removeAttr("target")}e(ac).remove()}}if(P.forceSync){V()}else{setTimeout(V,10)}var Z,aa,Y=50;function R(){aa=O.contentWindow?O.contentWindow.document:O.contentDocument?O.contentDocument:O.document;if(!aa||aa.location.href==P.iframeSrc){return}O.detachEvent?O.detachEvent("onload",R):O.removeEventListener("load",R,false);var ac=true;try{if(W){throw"timeout"}var ag=P.dataType=="xml"||aa.XMLDocument||e.isXMLDoc(aa);b("isXml="+ag);if(!ag&&window.opera&&(aa.body==null||aa.body.innerHTML=="")){if(--Y){b("requeing onLoad callback, DOM not available");setTimeout(R,250);return}}T=true;L.responseText=aa.body?aa.body.innerHTML:aa.documentElement?aa.documentElement.innerHTML:null;L.responseXML=aa.XMLDocument?aa.XMLDocument:aa;L.getResponseHeader=function(ai){var ah={"content-type":P.dataType};return ah[ai]};var af=/(json|script)/.test(P.dataType);if(af||P.textarea){var ab=aa.getElementsByTagName("textarea")[0];if(ab){L.responseText=ab.value}else{if(af){var ae=aa.getElementsByTagName("pre")[0];var n=aa.getElementsByTagName("body")[0];if(ae){L.responseText=ae.textContent}else{if(n){L.responseText=n.innerHTML}}}}}else{if(P.dataType=="xml"&&!L.responseXML&&L.responseText!=null){L.responseXML=Q(L.responseText)}}Z=k(L,P.dataType,P)}catch(ad){b("error caught:",ad);ac=false;L.error=ad;P.error.call(P.context,L,"error",ad);X&&e.event.trigger("ajaxError",[L,P,ad])}if(L.aborted){b("upload aborted");ac=false}if(ac){P.success.call(P.context,Z,"success",L);X&&e.event.trigger("ajaxSuccess",[L,P])}X&&e.event.trigger("ajaxComplete",[L,P]);if(X&&!--e.active){e.event.trigger("ajaxStop")}P.complete&&P.complete.call(P.context,L,ac?"success":"error");setTimeout(function(){K.removeData("form-plugin-onload");K.remove();L.responseXML=null},100)}var Q=e.parseXML||function(n,ab){if(window.ActiveXObject){ab=new ActiveXObject("Microsoft.XMLDOM");ab.async="false";ab.loadXML(n)}else{ab=(new DOMParser()).parseFromString(n,"text/xml")}return(ab&&ab.documentElement&&ab.documentElement.nodeName!="parsererror")?ab:null};var k=e.httpData||function(af,ad,ac){var ab=af.getResponseHeader("content-type")||"",n=ad==="xml"||!ad&&ab.indexOf("xml")>=0,ae=n?af.responseXML:af.responseText;if(n&&ae.documentElement.nodeName==="parsererror"){e.error("parsererror")}if(ac&&ac.dataFilter){ae=ac.dataFilter(ae,ad)}if(typeof ae==="string"){if(ad==="json"||!ad&&ab.indexOf("json")>=0){ae=e.parseJSON(ae)}else{if(ad==="script"||!ad&&ab.indexOf("javascript")>=0){e.globalEval(ae)}}}return ae}}};e.fn.ajaxForm=function(f){if(this.length===0){var h={s:this.selector,c:this.context};if(!e.isReady&&h.s){b("DOM not ready, queuing ajaxForm");e(function(){e(h.s,h.c).ajaxForm(f)});return this}b("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(j){if(!j.isDefaultPrevented()){j.preventDefault();e(this).ajaxSubmit(f)}}).bind("click.form-plugin",function(x){var q=x.target;var k=e(q);if(!(k.is(":submit,input:image"))){var j=k.closest(":submit");if(j.length==0){return}q=j[0]}var n=this;n.clk=q;if(q.type=="image"){if(x.offsetX!=undefined){n.clk_x=x.offsetX;n.clk_y=x.offsetY}else{if(typeof e.fn.offset=="function"){var y=k.offset();n.clk_x=x.pageX-y.left;n.clk_y=x.pageY-y.top}else{n.clk_x=x.pageX-q.offsetLeft;n.clk_y=x.pageY-q.offsetTop}}}setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(E){var D=[];if(this.length===0){return D}var h=this[0];var x=E?h.getElementsByTagName("*"):h.elements;if(!x){return D}var z,y,q,F,k,B,f;for(z=0,B=x.length;z<B;z++){k=x[z];q=k.name;if(!q){continue}if(E&&h.clk&&k.type=="image"){if(!k.disabled&&h.clk==k){D.push({name:q,value:e(k).val()});D.push({name:q+".x",value:h.clk_x},{name:q+".y",value:h.clk_y})}continue}F=e.fieldValue(k,true);if(F&&F.constructor==Array){for(y=0,f=F.length;y<f;y++){D.push({name:q,value:F[y]})}}else{if(F!==null&&typeof F!="undefined"){D.push({name:q,value:F})}}}if(!E&&h.clk){var A=e(h.clk),C=A[0];q=C.name;if(q&&!C.disabled&&C.type=="image"){D.push({name:q,value:A.val()});D.push({name:q+".x",value:h.clk_x},{name:q+".y",value:h.clk_y})}}return D};e.fn.formSerialize=function(f){return e.param(this.formToArray(f))};e.fn.fieldSerialize=function(h){var f=[];this.each(function(){var x=this.name;if(!x){return}var k=e.fieldValue(this,h);if(k&&k.constructor==Array){for(var q=0,j=k.length;q<j;q++){f.push({name:x,value:k[q]})}}else{if(k!==null&&typeof k!="undefined"){f.push({name:this.name,value:k})}}});return e.param(f)};e.fn.fieldValue=function(q){for(var n=[],j=0,f=this.length;j<f;j++){var k=this[j];var h=e.fieldValue(k,q);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}h.constructor==Array?e.merge(n,h):n.push(h)}return n};e.fieldValue=function(f,y){var j=f.name,D=f.type,E=f.tagName.toLowerCase();if(y===undefined){y=true}if(y&&(!j||f.disabled||D=="reset"||D=="button"||(D=="checkbox"||D=="radio")&&!f.checked||(D=="submit"||D=="image")&&f.form&&f.form.clk!=f||E=="select"&&f.selectedIndex==-1)){return null}if(E=="select"){var z=f.selectedIndex;if(z<0){return null}var B=[],h=f.options;var q=(D=="select-one");var A=(q?z+1:h.length);for(var k=(q?z:0);k<A;k++){var x=h[k];if(x.selected){var C=x.value;if(!C){C=(x.attributes&&x.attributes.value&&!(x.attributes.value.specified))?x.text:x.value}if(q){return C}B.push(C)}}return B}return e(f).val()};e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})};e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var h=this.type,f=this.tagName.toLowerCase();if(h=="text"||h=="password"||f=="textarea"){this.value=""}else{if(h=="checkbox"||h=="radio"){this.checked=false}else{if(f=="select"){this.selectedIndex=-1}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};e.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};e.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var j=e(this).parent("select");if(f&&j[0]&&j[0].type=="select-one"){j.find("option").selected(false)}this.selected=f}}})};function b(){if(e.fn.ajaxSubmit.debug){var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}}})(jQuery);
/*
 * jQuery blockUI plugin
 * Version 2.31 (06-JAN-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(x){if(/1\.(0|1|2)\.(0|1|2)/.test(x.fn.jquery)||/^1.1/.test(x.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+x.fn.jquery);return}x.fn._fadeIn=x.fn.fadeIn;var f=function(){};var y=document.documentMode||0;var j=x.browser.msie&&((x.browser.version<8&&!y)||y<8);var k=x.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!y;x.blockUI=function(E){h(window,E)};x.unblockUI=function(E){q(window,E)};x.growlUI=function(I,G,H,E){var F=x('<div class="growlUI"></div>');if(I){F.append("<h1>"+I+"</h1>")}if(G){F.append("<h2>"+G+"</h2>")}if(H==undefined){H=3000}x.blockUI({message:F,fadeIn:700,fadeOut:1000,centerY:false,timeout:H,showOverlay:false,onUnblock:E,css:x.blockUI.defaults.growlCSS})};x.fn.block=function(E){return this.unblock({fadeOut:0}).each(function(){if(x.css(this,"position")=="static"){this.style.position="relative"}if(x.browser.msie){this.style.zoom=1}h(this,E)})};x.fn.unblock=function(E){return this.each(function(){q(this,E)})};x.blockUI.version=2.31;x.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var e=null;var n=[];function h(G,R){var M=(G==window);var J=R&&R.message!==undefined?R.message:undefined;R=x.extend({},x.blockUI.defaults,R||{});R.overlayCSS=x.extend({},x.blockUI.defaults.overlayCSS,R.overlayCSS||{});var O=x.extend({},x.blockUI.defaults.css,R.css||{});var Z=x.extend({},x.blockUI.defaults.themedCSS,R.themedCSS||{});J=J===undefined?R.message:J;if(M&&e){q(window,{fadeOut:0})}if(J&&typeof J!="string"&&(J.parentNode||J.jquery)){var U=J.jquery?J[0]:J;var ab={};x(G).data("blockUI.history",ab);ab.el=U;ab.parent=U.parentNode;ab.display=U.style.display;ab.position=U.style.position;if(ab.parent){ab.parent.removeChild(U)}}var N=R.baseZ;var Y=(x.browser.msie||R.forceIframe)?x('<iframe class="blockUI" style="z-index:'+(N++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+R.iframeSrc+'"></iframe>'):x('<div class="blockUI" style="display:none"></div>');var X=x('<div class="blockUI blockOverlay" style="z-index:'+(N++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var W;if(R.theme&&M){var S='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+N+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(R.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';W=x(S)}else{W=M?x('<div class="blockUI blockMsg blockPage" style="z-index:'+N+';display:none;position:fixed"></div>'):x('<div class="blockUI blockMsg blockElement" style="z-index:'+N+';display:none;position:absolute"></div>')}if(J){if(R.theme){W.css(Z);W.addClass("ui-widget-content")}else{W.css(O)}}if(!R.applyPlatformOpacityRules||!(x.browser.mozilla&&/Linux/.test(navigator.platform))){X.css(R.overlayCSS)}X.css("position",M?"fixed":"absolute");if(x.browser.msie||R.forceIframe){Y.css("opacity",0)}var L=[Y,X,W],aa=M?x("body"):x(G);x.each(L,function(){this.appendTo(aa)});if(R.theme&&R.draggable&&x.fn.draggable){W.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var I=j&&(!x.boxModel||x("object,embed",M?null:G).length>0);if(k||I){if(M&&R.allowBodyStretch&&x.boxModel){x("html,body").css("height","100%")}if((k||!x.boxModel)&&!M){var Q=B(G,"borderTopWidth"),V=B(G,"borderLeftWidth");var K=Q?"(0 - "+Q+")":0;var P=V?"(0 - "+V+")":0}x.each([Y,X,W],function(ac,ag){var ad=ag[0].style;ad.position="absolute";if(ac<2){M?ad.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+R.quirksmodeOffsetHack+') + "px"'):ad.setExpression("height",'this.parentNode.offsetHeight + "px"');M?ad.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):ad.setExpression("width",'this.parentNode.offsetWidth + "px"');if(P){ad.setExpression("left",P)}if(K){ad.setExpression("top",K)}}else{if(R.centerY){if(M){ad.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}ad.marginTop=0}else{if(!R.centerY&&M){var ae=(R.css&&R.css.top)?parseInt(R.css.top):0;var af="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+ae+') + "px"';ad.setExpression("top",af)}}}})}if(J){if(R.theme){W.find(".ui-widget-content").append(J)}else{W.append(J)}if(J.jquery||J.nodeType){x(J).show()}}if((x.browser.msie||R.forceIframe)&&R.showOverlay){Y.show()}if(R.fadeIn){var T=R.onBlock?R.onBlock:f;var F=(R.showOverlay&&!J)?T:f;var E=J?T:f;if(R.showOverlay){X._fadeIn(R.fadeIn,F)}if(J){W._fadeIn(R.fadeIn,E)}}else{if(R.showOverlay){X.show()}if(J){W.show()}if(R.onBlock){R.onBlock()}}A(1,G,R);if(M){e=W[0];n=x(":input:enabled:visible",e);if(R.focusInput){setTimeout(D,20)}}else{b(W[0],R.centerX,R.centerY)}if(R.timeout){var H=setTimeout(function(){M?x.unblockUI(R):x(G).unblock(R)},R.timeout);x(G).data("blockUI.timeout",H)}}function q(H,I){var G=(H==window);var F=x(H);var J=F.data("blockUI.history");var K=F.data("blockUI.timeout");if(K){clearTimeout(K);F.removeData("blockUI.timeout")}I=x.extend({},x.blockUI.defaults,I||{});A(0,H,I);var E;if(G){E=x("body").children().filter(".blockUI").add("body > .blockUI")}else{E=x(".blockUI",H)}if(G){e=n=null}if(I.fadeOut){E.fadeOut(I.fadeOut);setTimeout(function(){z(E,J,I,H)},I.fadeOut)}else{z(E,J,I,H)}}function z(E,H,G,F){E.each(function(I,J){if(this.parentNode){this.parentNode.removeChild(this)}});if(H&&H.el){H.el.style.display=H.display;H.el.style.position=H.position;if(H.parent){H.parent.appendChild(H.el)}x(F).removeData("blockUI.history")}if(typeof G.onUnblock=="function"){G.onUnblock(F,G)}}function A(E,I,J){var H=I==window,G=x(I);if(!E&&(H&&!e||!H&&!G.data("blockUI.isBlocked"))){return}if(!H){G.data("blockUI.isBlocked",E)}if(!J.bindEvents||(E&&!J.showOverlay)){return}var F="mousedown mouseup keydown keypress";E?x(document).bind(F,J,C):x(document).unbind(F,C)}function C(H){if(H.keyCode&&H.keyCode==9){if(e&&H.data.constrainTabKey){var G=n;var F=!H.shiftKey&&H.target==G[G.length-1];var E=H.shiftKey&&H.target==G[0];if(F||E){setTimeout(function(){D(E)},10);return false}}}if(x(H.target).parents("div.blockMsg").length>0){return true}return x(H.target).parents().children().filter("div.blockUI").length==0}function D(E){if(!n){return}var F=n[E===true?n.length-1:0];if(F){F.focus()}}function b(I,E,K){var J=I.parentNode,H=I.style;var F=((J.offsetWidth-I.offsetWidth)/2)-B(J,"borderLeftWidth");var G=((J.offsetHeight-I.offsetHeight)/2)-B(J,"borderTopWidth");if(E){H.left=F>0?(F+"px"):"0"}if(K){H.top=G>0?(G+"px"):"0"}}function B(E,F){return parseInt(x.css(E,F))||0}})(jQuery);(function(b){b.fn.caret=function(D,z){var h,n,B=this[0];if(typeof D==="object"&&typeof D.start==="number"&&typeof D.end==="number"){h=D.start;n=D.end}else{if(typeof D==="number"&&typeof z==="number"){h=D;n=z}else{if(typeof D==="string"){if((h=B.value.indexOf(D))>-1){n=h+D.length}else{h=null}}else{if(Object.prototype.toString.call(D)==="[object RegExp]"){var A=D.exec(B.value);if(A!=null){h=A.index;n=h+A[0].length}}}}}if(typeof h!="undefined"){if(b.browser.msie){var x=this[0].createTextRange();x.collapse(true);x.moveStart("character",h);x.moveEnd("character",n-h);x.select()}else{this[0].selectionStart=h;this[0].selectionEnd=n}this[0].focus();return this}else{if(b.browser.msie){if(this[0].tagName.toLowerCase()!="textarea"){var j=this.val();var q=document.selection.createRange().duplicate();q.moveEnd("character",j.length);var C=(q.text==""?j.length:j.lastIndexOf(q.text));q=document.selection.createRange().duplicate();q.moveStart("character",-j.length);var y=q.text.length}else{var q=document.selection.createRange();var f=q.duplicate();f.moveToElementText(this[0]);f.setEndPoint("EndToEnd",q);var C=f.text.length-q.text.length;var y=C+q.text.length}}else{var C=B.selectionStart,y=B.selectionEnd}var k=B.value.substring(C,y);return{start:C,end:y,text:k,replace:function(e){return B.value.substring(0,C)+e+B.value.substring(y,B.value.length)}}}return this}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercViewReadyManager={wrappers:[],isInitialized:false,init:function(){this.isInitialized=true},setWrapper:function(e){if(!this.isInitialized){return false}var h=false;var f=this;b(e.components).each(function(j,n){var k=n;if(f.getWrapper(k)!=null){h=true;return}});if(h){return false}b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing");this.wrappers.push(e);e.init();this.logMessage("Added wrapper '"+e.wrapperName+"' to manager");return true},setProcessingFlag:function(){b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing")},getWrapper:function(e){var f=null;b(this.wrappers).each(function(){if(this.isComponentInWrapper(e,true)){f=this;return}});return f},logMessage:function(e){if(window.console&&gDebug){console.log(e)}},handleWrapperComplete:function(e){this.wrappers.splice(b.inArray(e,this.wrappers),1);this.logMessage("Removed wrapper '"+e+"' from manager");if(this.wrappers.length==0){b("#perc-ui-view-indicator").removeClass("perc-ui-view-processing").addClass("perc-ui-view-ready");this.logMessage("The view is ready.")}},showRenderingProgressWarning:function(){b.perc_utils.alert_dialog({content:"Please wait for the page components to finish rendering.",title:"Warning"})}};b.PercComponentWrapper=function(f,h){var e={wrapperName:f,wrapperStatus:"initialized",processedComponents:[],components:h,isWrapperComplete:function(){return this.wrapperStatus=="processed"},isComponentInWrapper:function(j,k){return k?b.inArray(j,this.components)!=-1&&b.inArray(j,this.processedComponents)==-1:b.inArray(j,this.components)!=-1},handleComponentProgress:function(q,n){if(b.inArray(q,this.components)==-1){b.PercViewReadyManager.logMessage("The component '"+q+"' doesn't exist in the wrapper."+this.wrapperName);return}if(n=="complete"){this.processedComponents.push(q);var k=b("#"+q);k.remove();var j=b("[perc-ui-component='"+q+"']");j.addClass("perc-ui-component-ready").removeClass("perc-ui-component-processing");if(this.components.length==this.processedComponents.length){this.wrapperStatus="processed";b.PercViewReadyManager.handleWrapperComplete(this.wrapperName)}}else{b(".perc-ui-component-overlay").each(function(){var z=b(this);var y=b("[perc-ui-component='"+z.attr("id")+"']");var x=y.position();if(x==null){return}z.css("top",x.top).css("left",x.left).css("height",y.height()).css("width",y.width())})}},init:function(){b(this.components).each(function(){var q=this;var n=b("[perc-ui-component='"+q+"']");n.addClass("perc-ui-component-processing").removeClass("perc-ui-component-ready");var j=n.position();var k=b("<div class='perc-ui-component-overlay ui-widget-overlay' style='position:absolute; background-color:silver; opacity:0.3; border-radius: 6px; border: 1px solid silver; z-index:9000'><img src='/cm/images/images/Busy.gif' style='margin: auto;  position: absolute;  top: 0; left: 0; bottom: 0; right: 0;'></div>");k.attr("id",q).css("top",j.top).css("left",j.left).css("height",n.height()).css("width",n.width());n.after(k)})}};return e}})(jQuery);var $j=jQuery.noConflict();$j.perc={};(function(b){b.perc_redirect=function(f,e){var j=window.location.href.indexOf("debug=true")!=-1;var h=f.indexOf("?")!=-1;if(j){if(e==null||e=="undefined"){e=new Object()}e.debug="true"}var k=(e==null||e=="undefined")?"":b.param(e);if(k.length>0){k=(h?"&":"?")+k}var n=f+k;window.location.href=n}})(jQuery);(function(b){b.perc_textAutoFill=function(n,q,h,e,k){var f=false;var j=false;e=typeof(e)!="undefined"?e:false;k=typeof(k)!="undefined"?k:-1;b(n).bind("focus.textAutoFill",function(x){var y=b(q).val();f=(y=="undefined"||y==null||y==""||e==true);j=true});b(n).bind("keyup.textAutoFill",{filter:h},function(y){var x=b(q).attr("disabled");if(!j){var B=b(q).val();f=(B=="undefined"||B==null||B=="");j=true}var z=function(C){return C};if(typeof y.data.filter=="function"){z=y.data.filter}if(f&&!x){if(k>0&&b(n).val().length>k){var A=b(n).val().substring(0,k);b(q).val(z(A))}else{b(q).val(z(b(n).val()))}}})}})(jQuery);(function(b){b.perc_filterField=function(h,e,f){b(h).bind("keypress.filterField",{filter:e},function(E){var k=function(F){return F};var C=E.charCode?E.charCode:E.which;if(C==0||C==8||C==13){return}var A=String.fromCharCode(C);if(typeof E.data.filter=="function"){k=E.data.filter}var B=k(A);if(B.length==0){E.preventDefault()}else{if(A!=B){var D=E.target;var j=b(D).caret().start;var q=b(D).caret().end;var z=D.value.slice(0,j);var y=D.value.slice(q);var n=z+B+y;D.value=n;var x=z.length+1;b(D).caret({start:x,end:x});E.preventDefault()}}});b(h).bind("blur.filterField",{filter:e},function(j){h.val(j.data.filter(h.val()));if(b.isFunction(f)){f(b(h))}})}})(jQuery);(function(b){b.perc_filterFieldText=function(h,e,f){b(h).bind("keypress.filterField",{filter:e},function(G){var k=function(H){return H};var E=G.charCode?G.charCode:G.which;if(E==0||E==8){return}var B=String.fromCharCode(E);if(typeof G.data.filter=="function"){k=G.data.filter}var z=b(G.target).caret().start;var q=h.val();var A=h.attr("maxlength");if(typeof(A)!="undefined"&&q.length==A){return}q=q.substring(0,z)+B+q.substring(z,q.length);var D="";if(typeof(f)!="undefined"&&f.length==1){var C=q.split(f);for(var y=0;y<C.length;y++){C[y]=k(C[y])}D=C.join(f)}else{D=k(q)}if(D.length==0){G.preventDefault()}else{if(q!=D){var F=G.target;var j=b(F).caret().start;var n=D;F.value=b.trim(n);var x=j+1;b(F).caret({start:x,end:x});G.preventDefault()}}});b(h).bind("blur.filterField",{filter:e},function(j){theText=h.val();var k="";if(typeof(f)!="undefined"&&f.length==1){var q=theText.split(f);for(var n=0;n<q.length;n++){q[n]=e(q[n])}k=q.join(f)}else{k=j.data.filter(theText)}h.val(b.trim(k))})}})(jQuery);(function(b){b.perc_textFilters={URL:function(e){return e.replace(/[ ]/g,"-").replace(/[\\\/\:\*\?\"<\>\|\#\;\%\']/g,"")},HOSTNAME:function(e){return e.replace(/[^a-zA-Z0-9\-\.]/g,"")},NOSPACES:function(e){return e.replace(/ /g,"")},NOBACKSLASH:function(e){return e.replace(/[\\]/g,"")},IDNAMECDATA:function(e){return e.replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(e){var f=e.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(f.length>0&&f.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){f=f.substring(1,f.length)}return f},PATH:function(e){return e.replace(/[\\\:\*\?\"<\>\|\#\;\%]/g,"")},ID:function(e){return e.replace(/[^a-zA-Z0-9\-\.\:\_]/g,"")},ID_WITH_SPACE:function(e){return e.replace(/[^a-zA-Z0-9\-\.\:\_ ]/g,"")},ONLY_DIGITS:function(e){return e.replace(/[^0-9]/g,"")},ALPHA_NUMERIC:function(e){return e.replace(/[^a-zA-Z0-9]/g,"")},DIGITS_DOT:function(e){return e.replace(/[^0-9\.]/g,"")},DESCRIPTION:function(e){return e.replace(/[<>&]/g,"")},WINDOWS_FILE_NAME:function(e){return e.replace(/\.*$/g,"")}}})(jQuery);(function(b){b.perc_autoFillTextFilters={URL:function(e){return e.replace(/[ \_]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"").replace(/[-]+/g,"-").toLowerCase()},IDNAMECDATA:function(e){return e.replace(/[:\ \.]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(e){var f=e.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(f.length>0&&f.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){f=f.substring(1,f.length)}return f}}})(jQuery);(function(b){b.PercBlockUI=function(h,f){var e={};if(typeof(h)!="object"||h==null){h=b.PercBlockUIMode.OVERLAY}b.extend(e,h);if(typeof(f)!="undefined"&&f!=null&&f!=""){b.extend(e,{message:f})}b.blockUI(h)};b.PercBlockUIMode={OVERLAY:{message:'<img src="/cm/images/images/Busy.gif"/><br/>Processing. Please wait...',css:{border:"none",backgroundColor:"#fff",opacity:"0.9",color:"#000",fontFamily:"Verdana",fontSize:"11px","-webkit-border-radius":"10px","-moz-border-radius":"10px",padding:"5px",width:"25%"},overlayCSS:{opacity:"0.6"},fadeIn:40,fadeOut:40,baseZ:9999},CURSORONLY:{message:null,overlayCSS:{opacity:0},fadeIn:0,fadeOut:0,baseZ:9999}}})(jQuery);(function(f){var e=false;var b=[];f(document).ready(function(){f("body").ajaxSend(function(){e=true});f("body").ajaxComplete(function(){e=false;h()})});function h(){if(b.length>0&&!e){var j=b.shift();j();h()}}f.PercQueuePostAJAX=function(j){if(typeof(j)=="function"){b.push(j);h()}}})(jQuery);(function(b){b.PercTruncateText=function(h,f){if(h.length<=f){return h}var e=f-3;return h.substr(0,e)+"..."}})(jQuery);(function(b){b.PercTextOverflow=function(e,f){if(b.browser.msie||b.browser.safari){e.css("white-space","nowrap").css("text-overflow","ellipsis").css("width",f).css("overflow","hidden")}else{e.textOverflow("...",false)}}})(jQuery);(function(b){b.fn.binder=b.fn.binder||function(e,f,j){var h=b(this);if((j||false)){h.bind(e,f,j)}else{j=f;h.bind(e,j)}return h};b.fn.singleclick=b.fn.singleclick||function(e,f){return b(this).binder("singleclick",e,f)};b.event.special.singleclick=b.event.special.singleclick||{setup:function(f,e){b(this).bind("click",b.event.special.singleclick.handler)},teardown:function(e){b(this).unbind("click",b.event.special.singleclick.handler)},handler:function(h){var e=function(k){var q=this;var j=b(q);var n=j.data("singleclick-timeout")||false;if(n){clearTimeout(n)}n=false;j.data("singleclick-timeout",n)};var f=function(k){var q=this;e.call(q);var j=b(q);j.data("singleclick-clicks",(j.data("singleclick-clicks")||0)+1);var n=setTimeout(function(){var x=j.data("singleclick-clicks");e.apply(q,[k]);j.data("singleclick-clicks",0);if(x===1){k.type="singleclick";b.event.handle.apply(q,[k])}},500);j.data("singleclick-timeout",n)};f.apply(this,[h])}}})(jQuery);(function(b){b(document).ready(function(){b.editable.addInputType("filteredText",{element:function(h,f){var e=b('<input type="text">');if(h.width!="none"){e.width(h.width)}if(h.height!="none"){e.height(h.height)}e.attr("autocomplete","off");b.perc_filterField(e,b.perc_textFilters.URL);e.attr("id",h.fieldid);b(this).append(e);return(e)}})})})(jQuery);
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(h){var f=document.documentElement.style,j=("textOverflow" in f||"OTextOverflow" in f),k=document.createRange!==undefined,e=function(q){var n=[];h.each(q[0].childNodes,function(){if(this.nodeType===3){n.push(this)}else{h.each(this.childNodes,arguments.callee)}});return h(n)},b=function(y,C,q){var x=document.createRange(),A=0,n=y.length,z=0,B;if(q<=C){return h(y)}if(n===1||!k){return h.map(y,function(D){return D.textContent}).join("").substr(C,q)}for(;A<n;A+=1){B=y[A];if(C>=z&&C<=z+B.length){x.setStart(B,C-z)}if(z<=q&&z+B.length>=q){x.setEnd(B,q-z);break}z+=B.length}return h(x.cloneContents())};h.extend(h.fn,{textOverflow:function(x,n){var q=x||"";if(!j){return this.each(function(){var C=h(this),E=C.clone(),H=C.clone(),B=C.text(),y=C.width(),D=e(H),F=0,G=0,A=B.length,z=function(){if(y!==C.width()){C.replaceWith(H);C=H;H=C.clone();C.textOverflow(x,false);y=C.width()}};C.after(E.hide());if(E.width()>y){while(F<A){G=Math.floor(F+((A-F)/2));E.empty().append(b(D,0,G)).append(q);if(E.width()<y){F=G+1}else{A=G}}if(F<B.length){C.empty().append(b(D,0,F-1)).append(q)}}E.remove();if(n){setInterval(z,200)}})}else{return this}}})})(jQuery);(function(j){var k="/Rhythmyx";var h=k+"/services";var n="/cm";var e={ANALYTICS:h+"/analytics",PAGEMGT:h+"/pagemanagement",SITEMGT:h+"/sitemanage",MIGRATIONMGT:h+"/migrationmanagement",PATHMGT:h+"/pathmanagement",ASSETMGT:h+"/assetmanagement",DELIVERY:h+"/delivery",ITEMMGT:h+"/itemmanagement",USERMGT:h+"/user",UTILS:h+"/utils",METADATAMGT:h+"/metadatamanagement",ACTIVITY:h+"/activitymanagement",FINDER:h+"/searchmanagement",WORKFLOW:h+"/workflowmanagement",ROLEMGT:h+"/rolemanagement",DESIGN:h+"/design",FOLDERMGT:h+"/foldermanagement",LICENSE:h+"/licensemanagement",PUBMGT:h+"/publishmanagement",SHARE:h+"/share",WDGMGT:h+"/widgetmanagement",PAGEOPTMGT:h+"/pageoptimizermanagement",RECMGT:h+"/recentmanagement",REDMGT:h+"/redirectmanagement",CLDSVC:h+"/cloudservicemanagement",CATMGT:h+"/categorymanagement"};var b="Assets";var f="Sites";var x="Search";var q="Design";j.perc_displayformats={"/":"","/Design":"CM1_Design"};j.perc_paths={PATH_ADD_FOLDER:e.PATHMGT+"/path/addFolder",PATH_ADD_NEW_FOLDER:e.PATHMGT+"/path/addNewFolder",PATH_FOLDER:e.PATHMGT+"/path/folder",PATH_CHILD_FOLDERS:e.PATHMGT+"/path/childFolders",PATH_PAGINATED_FOLDER:e.PATHMGT+"/path/paginatedFolder",PATH_ITEM:e.PATHMGT+"/path/item",PATH_ITEM_BY_ID:e.PATHMGT+"/path/item/id",PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE:e.PATHMGT+"/path/item/wfState",PATH_ITEM_MOVE:e.PATHMGT+"/path/moveItem",PATH_ITEM_PROPERTIES:e.PATHMGT+"/path/itemProperties",PATH_VALIDATE_DELETE_FOLDER:e.PATHMGT+"/path/validateFolderDelete",PATH_DELETE_FOLDER:e.PATHMGT+"/path/deleteFolder",PATH_RENAME_FOLDER:e.PATHMGT+"/path/renameFolder",PATH_GET_FOLDER_PROPERTIES:e.PATHMGT+"/path/folderProperties",PATH_SAVE_FOLDER_PROPERTIES:e.PATHMGT+"/path/saveFolderProperties",PATH_LAST_EXISTING:e.PATHMGT+"/path/lastExisting",PATH_VALIDATE_EXIST:e.PATHMGT+"/path/validate",DISPLAY_FORMAT:h+"/ui/uicomps/displayformat/name/",TEMPLATES_ALL:e.PAGEMGT+"/template/summary/all",TEMPLATE_HTML_PARSE:e.PAGEMGT+"/render/parse",TEMPLATE_EXPORT:e.PAGEMGT+"/template/export",TEMPLATE_IMPORT:e.PAGEMGT+"/template/import",TEMPLATES_USER:e.PAGEMGT+"/template/summary/all/user",TEMPLATE_LOAD_SAVE:e.PAGEMGT+"/template",TEMPLATE_LOAD_METADATA:e.PAGEMGT+"/template/loadTemplateMetadata",TEMPLATE_SAVE_METADATA:e.PAGEMGT+"/template/saveTemplateMetadata",TEMPLATE_CREATE_FROM_URL:e.SITEMGT+"/sitetemplates/createFromUrl",TEMPLATE_CREATE_FROM_URL_ASYNC:e.SITEMGT+"/sitetemplates/createFromUrlAsync",TEMPLATE_CREATE_FROM_URL_RESULT:e.SITEMGT+"/sitetemplates/getImportedTemplate",TEMPLATE_CREATE_FROM_PAGE:e.SITEMGT+"/sitetemplates/createFromPage",TEMPLATE_RENDER:e.PAGEMGT+"/render/template",TEMPLATE_RENDER_SCRIPTSOFF:e.PAGEMGT+"/render/template/scriptsoff",TEMPLATES_BY_SITE:e.SITEMGT+"/sitetemplates/templates",TEMPLATES_WITH_NOSITE:e.SITEMGT+"/sitetemplates/nosite",TEMPLATES_READONLY:e.PAGEMGT+"/template/summary/all/readonly",TEMPLATES_SAVE:e.SITEMGT+"/sitetemplates",PAGE_CREATE:e.PAGEMGT+"/page",SAVE_PAGE_METADATA:e.PAGEMGT+"/page/savePageMetadata",PAGES_WITH_TEMPLATE:e.PAGEMGT+"/page/pagesByTemplate",UNASSIGNED_PAGES_BY_SITE:e.PAGEMGT+"/page/unassignedPagesBySite",MIGRATION_EMPTY_FLAG:e.PAGEMGT+"/page/migrationEmptyFlag",CLEAR_MIGRATION_EMPTY_FLAG:e.PAGEMGT+"/page/clearMigrationEmptyFlag",RENDER_LINK_PREVIEW:e.PAGEMGT+"/renderlink/preview",BLOG_LOAD:e.SITEMGT+"/section/blogs",POST_LOAD:e.SITEMGT+"/section/blogPosts",SECTION_CREATE:e.SITEMGT+"section/create",SECTION_CREATE_SECTION_LINK:e.SITEMGT+"/section/createSectionLink",SECTION_DELETE_SECTION_LINK:e.SITEMGT+"/section/deleteSectionLink",SECTION_CREATE_EXTERNAL_LINK:e.SITEMGT+"/section/createExternalLinkSection",SECTION_SECTION_FROM_FOLDER:e.SITEMGT+"/section/createSectionFromFolder",SECTION_CONVERT_TO_FOLDER:e.SITEMGT+"/section/convertToFolder/",SECTION_DELETE:e.SITEMGT+"section",SECTION_LOAD:e.SITEMGT+"section",SECTION_MOVE:e.SITEMGT+"section/move",SECTION_REPLACE_LANDING_PAGE:e.SITEMGT+"section/replaceLandingPage",SECTION_UPDATE:e.SITEMGT+"section/update",SECTION_LINK_UPDATE:e.SITEMGT+"section/updateSectionLink",SECTION_EXTERNAL_LINK_UPDATE:e.SITEMGT+"section/updateExternalLink",SECTION_GET_ROOT:e.SITEMGT+"section/root",SECTION_GET_TREE:e.SITEMGT+"section/tree",SECTION_GET_CHILDREN:e.SITEMGT+"section/childSections",SECTION_GET_PROPERTIES:e.SITEMGT+"section/properties",PAGE_DELETE:e.PAGEMGT+"/page",PAGE_FORCE_DELETE:e.PAGEMGT+"/page/forceDelete",PAGE_VALIDATE_DELETE:e.PAGEMGT+"/page/validateDelete",PAGE_COPY:e.PAGEMGT+"/page/copy",PAGE_CHANGE_TEMPLATE:e.PAGEMGT+"/page/changeTemplate",PAGE_EDIT:e.PAGEMGT+"/render/page/editmode",PAGE_EDIT_SCRIPTSOFF:e.PAGEMGT+"/render/page/editmode/scriptsoff",PAGE_PREVIEW:e.PAGEMGT+"/render/page/",PAGE_EDITURL:e.PAGEMGT+"/page/pageEditUrl",PAGE_VIEWURL:e.PAGEMGT+"/page/pageViewUrl",PAGE_NONSEO:e.PAGEMGT+"/page/nonSEOPages",WIDGETS_ALL:e.PAGEMGT+"/widget",WIDGET_FULL:e.PAGEMGT+"/widget/full",WIDGET_INFO:e.PAGEMGT+"/widget/packageinfo",THEME_CSS:e.PAGEMGT+"/theme/css",REGION_CSS:e.PAGEMGT+"/theme/regioncss",REGION_CSS_MERGE:e.PAGEMGT+"/theme/regioncss/merge",REGION_CSS_PREPARE_FOR_EDIT:e.PAGEMGT+"/theme/regioncss/prepareForEdit",REGION_CSS_CLEAR_CACHE:e.PAGEMGT+"/theme/regioncss/clearCache",THEME_SUMMARY_ALL:e.PAGEMGT+"/theme/summary/all",RICHTEXT_CUSTOM_STYLES:e.PAGEMGT+"/theme/customstyles",ANALYTICS_GET_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_STORE_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_DELETE_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_TEST_CONNECTION:e.ANALYTICS+"/provider/testConnection",ANALYTICS_GET_PROFILES:e.ANALYTICS+"/provider/profiles",CONTENT_EDIT_CRITERIA:e.ASSETMGT+"/asset/contentEditCriteria",ASSET_WIDGET_REL:e.ASSETMGT+"/asset/createAssetWidgetRelationship",ASSET_FROM_LOCALCONTENT:e.ASSETMGT+"/asset/shareLocalContent",ASSET_WIDGET_PROMOTE:e.ASSETMGT+"/asset/promoteAssetWidget",ASSET_WIDGET_REL_UPDATE:e.ASSETMGT+"/asset/updateAssetWidgetRelationship",ASSET_ADD_TO_FOLDER:e.ASSETMGT+"/asset/addAssetToFolder",ASSET_WIDGET_DROP_CRITERIA:e.ASSETMGT+"/asset/assetWidgetDropCriteria/",ASSET_WIDGET_REL_DEL:e.ASSETMGT+"/asset/clearAssetWidgetRelationship",ASSET_ORPHAN_WIDGET_REL_DEL:e.ASSETMGT+"/asset/clearOrphanAssetsWidgetRelationship",ASSET_EDITOR_LIBRARY:e.ASSETMGT+"/asset/assetEditors",ASSET_TYPES:e.ASSETMGT+"/asset/assetTypes",ASSET_EDITOR:e.ASSETMGT+"/asset/assetEditor",ASSET_EDITOR_URL_FOR_ASSET_ID:e.ASSETMGT+"/asset/assetEditUrl",ASSET_VIEW_URL_FOR_ASSET_ID:e.ASSETMGT+"/asset/assetViewUrl",ASSET_DELETE:e.ASSETMGT+"/asset",ASSET_FORCE_DELETE:e.ASSETMGT+"/asset/forceDelete",ASSET_VALIDATE_DELETE:e.ASSETMGT+"/asset/validateDelete",ASSET_REMOVE:e.ASSETMGT+"/asset/remove",ASSET_FORCE_REMOVE:e.ASSETMGT+"/asset/forceRemove",ASSET_UPDATE:e.ASSETMGT+"/asset/updateAsset",ASSET_UNUSED:e.ASSETMGT+"/asset/unusedAssets",ASSET_PROMOTE:e.ASSETMGT+"/asset/promoteAsset",CONVERT_WIDGET:e.ASSETMGT+"/asset/createWidgetAsset",UPDATE_INSPECTED_ELEMENT:e.ASSETMGT+"/asset/updateInspectedElements",SITES_ALL:e.SITEMGT+"/site",SAAS_SITES_NAMES:e.SITEMGT+"/site/sass/sitenames",SITES_ALL_CHOICES:e.SITEMGT+"/site/choices",SITES_BY_TEMPLATE:e.SITEMGT+"/sitetemplates/sites",SITE_CREATE:e.SITEMGT+"/site",SITE_CREATE_FROM_URL:e.SITEMGT+"/site/importFromUrl",SITE_CREATE_FROM_URL_ASYNC:e.SITEMGT+"/site/importFromUrlAsync",SITE_CREATE_FROM_URL_RESULT:e.SITEMGT+"/site/getImportedSite",VIEW_IMPORT_LOG:e.SITEMGT+"/site/importLogViewer",SITE_GET_PROPERTIES:e.SITEMGT+"/site/properties",SITE_IS_BEING_IMPORTED:e.SITEMGT+"/site/isSiteImporting",SITE_PUBLISH:e.SITEMGT+"/publish",SITE_ITEM_PUBLISH_ACTIONS:e.SITEMGT+"/publish/publishingActions",PAGE_PUBLISH:e.SITEMGT+"/publish/page",RESOURCE_PUBLISH:e.SITEMGT+"/publish/resource",PAGE_TAKEDOWN:e.SITEMGT+"/publish/takedown/page",RESOURCE_TAKEDOWN:e.SITEMGT+"/publish/takedown/resource",INCREMENTAL_LIST:e.SITEMGT+"/publish/incremental/content/",INCREMENTAL_PUBLISH:e.SITEMGT+"/publish/incremental/publish/",SITE_UPDATE_PROPERTIES:e.SITEMGT+"/site/updateProperties",SITE_DELETE:e.SITEMGT+"/site",PUBLISH_CURRENT_STATUS:e.SITEMGT+"pubstatus/current",PUBLISH_LOGS:e.SITEMGT+"pubstatus/logs",PUBLISH_PURGE:e.SITEMGT+"pubstatus/purge",PUBLISH_LOGS_DETAILS:e.SITEMGT+"pubstatus/details",SITE_GET_PUBLISH_PROPERTIES:e.SITEMGT+"/site/publishProperties",SITE_UPDATE_PUBLISH_PROPERTIES:e.SITEMGT+"/site/updatePublishProperties",SITE_COPY:e.SITEMGT+"/site/copy",SITE_COPY_VALIDATE_FOLDERS:e.SITEMGT+"/site/copy/validateFolders",SITE_COPY_INFO:e.SITEMGT+"/site/copysiteinfo",SITE_STATS_SUMMARY:e.SITEMGT+"/site/statistics",SITE_ARCHITECTURE:e.SITEMGT+"/siteArchitecture",URL_ADMIN:n+"/jsp/admin.jsp",URL_ARCHITECTURE:n+"/jsp/siteArchitecture.jsp",URL_DASHBOARD:n+"/jsp/dashboard.jsp",URL_WEBMGT:n+"/jsp/webmgt.jsp",IMAGE_ROOT:n+"/images",METADATA_FIND:e.METADATAMGT+"/metadata",METADATA_DELETE_BY_PREFIX:e.METADATAMGT+"/metadata/byprefix",METADATA_FIND_BY_PREFIX:e.METADATAMGT+"/metadata/byprefix",METADATA_DELETE:e.METADATAMGT+"/metadata",METADATA_SAVE:e.METADATAMGT+"/metadata",METADATA_SAVE_GLOBAL_VARIABLES:e.METADATAMGT+"/metadata/globalvariables",PROCESS_STATUS_ALL:e.SITEMGT+"/monitor/all",WORKFLOW_CHECKOUT:e.ITEMMGT+"/workflow/checkOut",WORKFLOW_CHECKIN:e.ITEMMGT+"/workflow/checkIn",WORKFLOW_FORCE_CHECKOUT:e.ITEMMGT+"/workflow/forceCheckOut",WORKFLOW_TRANSITION:e.ITEMMGT+"/workflow/transition",WORKFLOW_TRANSITION_COMMENT:e.ITEMMGT+"/workflow/transitionWithComments",WORKFLOW_TRANSITIONS:e.ITEMMGT+"/workflow/getTransitions",WORKFLOW_CHECKED_OUT_TO_USER:e.ITEMMGT+"/workflow/isCheckedOutToCurrentUser",WORKFLOW_IS_APPROVE_ALLOWED:e.ITEMMGT+"/workflow/isApproveAvailableToCurrentUser",WORKFLOW_BULK_APPROVE:e.ITEMMGT+"/workflow/bulkApprove",WORKFLOW_STEPPED:e.WORKFLOW+"/workflows/",WORKFLOW_META:e.WORKFLOW+"/workflows/metadata",DEFAULT_WORKFLOW_META:e.WORKFLOW+"/workflows/metadata/default",USER_USERS:e.USERMGT+"/user/users",USER_USERS_NAMES:e.USERMGT+"/user/users/names",USER_ROLES:e.USERMGT+"/user/roles",USER_FIND:e.USERMGT+"/user/find",USER_EXTERNAL_FIND:e.USERMGT+"/user/external/find",USER_EXTERNAL_IMPORT:e.USERMGT+"/user/import",USER_EXTERNAL_STATUS:e.USERMGT+"/user/external/status",USER_STATUS:e.USERMGT+"/user/status",USER_DELETE:e.USERMGT+"/user/delete",USER_UPDATE:e.USERMGT+"/user/update",USER_CREATE:e.USERMGT+"/user/create",USER_CURRENT:e.USERMGT+"/user/current",USER_ACCESS_LEVEL:e.USERMGT+"/user/accessLevel",ROLE_FIND:e.ROLEMGT+"/role/find",ROLE_DELETE:e.ROLEMGT+"/role/delete",ROLE_UPDATE:e.ROLEMGT+"/role/update",ROLE_CREATE:e.ROLEMGT+"/role/create",ROLE_AVAILABLE_USERS:e.ROLEMGT+"/role/availableUsers",ROLE_DELETE_VALIDATE:e.ROLEMGT+"/role/validateForDelete",ROLE_REMOVE_USERS_VALIDATE:e.ROLEMGT+"/role/validateDeleteUsers",CAT_ALL:e.CATMGT+"/category/all",CAT_UPDATE:e.CATMGT+"/category/update",CAT_LOCK_INFO:e.CATMGT+"/category/lockinfo",CAT_LOCK_TAB:e.CATMGT+"/category/locktab",CAT_REMOVE_TAB_LOCK:e.CATMGT+"/category/removelocktab",CAT_UPDATE_IN_DTS:e.CATMGT+"/category/updateindts",UTIL_GET_MAXINTERVAL:e.UTILS+"/utility/maxInactiveInterval",UTIL_GET_PRIVATE_KEYS:e.UTILS+"/utility/privatekeys",UTIL_ENCRYPT_STRING:e.UTILS+"/utility/encryptstring",UTIL_ENCRYPT_STRINGS:e.UTILS+"/utility/encryptstrings",UTIL_DECRYPT_STRING:e.UTILS+"/utility/decryptstring",UTIL_LOG_DATA:e.UTILS+"/utility/log",ITEM_REVISIONS:e.ITEMMGT+"/item/revisions",ITEM_PROMOTE_REVISION:e.ITEMMGT+"/item/restoreRevision",ITEM_SETDATES:e.ITEMMGT+"/item/setitemdates",ITEM_GETDATES:e.ITEMMGT+"/item/getitemdates",ITEM_LAST_COMMENT:e.ITEMMGT+"/item/lastComment",ASSET_SITE_IMPACT:e.ITEMMGT+"/item/siteimpact/asset",ADD_TO_MYPAGES:e.ITEMMGT+"/item/addtomypages",REMOVE_FROM_MYPAGES:e.ITEMMGT+"/item/removefrommypages",IS_MY_PAGE:e.ITEMMGT+"/item/ismypage",MY_CONTENT:e.ITEMMGT+"/item/mycontent",ITEM_SETSOPROMETA:e.ITEMMGT+"/item/setsoprometadata",ITEM_GETSOPROMETA:e.ITEMMGT+"/item/getsoprometadata",ASSETS_ROOT_NO_SLASH:b,SITES_ROOT_NO_SLASH:f,DESIGN_ROOT_NO_SLASH:q,SEARCH_ROOT_NO_SLASH:x,ASSETS_ROOT:"/"+b,SITES_ROOT:"/"+f,DESIGN_ROOT:"/"+q,SEARCH_ROOT:"/"+x,FINDER_SEARCH:e.FINDER+"/search/get",DESIGN_THEMES:"/"+q+"/web_resources/themes",ACTIVITY_CONTENT:e.ACTIVITY+"/activity/contentactivity",ACTIVITY_TRAFFIC:e.ACTIVITY+"/activity/contenttraffic",ACTIVITY_TRAFFIC_DETAILS:e.ACTIVITY+"/activity/trafficdetails",ACTIVITY_EFFECTIVENESS:e.ACTIVITY+"/activity/effectiveness",GADGETLIST:n+"/gadgets/listing",ASSET_FORMS:e.ASSETMGT+"/asset/forms",ASSET_FORMS_EXPORT:e.DELIVERY+"/form/submissions",ASSET_FORMS_CLEAR:e.DELIVERY+"/form",COMMENTS_DEFAULT_MODERATION:e.DELIVERY+"/comment/defaultModerationState",COMMENTS_SET_MODERATIONS:e.DELIVERY+"/comment/moderate",COMMENTS_GET_ALL:e.DELIVERY+"/comment/pageswithcomments",COMMENTS_GET_PAGE:e.DELIVERY+"/comment/commentsonpage",COMMENTS_GET_ARTICLE:e.PAGEMGT+"/page/folderpath/Sites",WEBRESOURCESMGT:e.DESIGN+"/webresources",WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD:e.DESIGN+"/webresources/validateFileUpload",WEBRESOURCESMGT_FILE_UPLOAD:e.DESIGN+"/webresources/uploadFile",FOLDERMGT_FOLDERS_WITH_WORKFLOW:e.FOLDERMGT+"/folders",FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/start/",FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/status/",FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/cancel/",FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN:e.FOLDERMGT+"/folders/workflowassignment",FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS:e.FOLDERMGT+"/folders/workflowassignment/isInProgress",FOLDERMGT_FOLDER_PAGES:e.FOLDERMGT+"/folders/folderpages/id/",MEMBERSHIP_GET_ALL:e.DELIVERY+"/membership/admin/users",MEMBERSHIP_ACT_BLK_DEL_ACCOUNT:e.DELIVERY+"/membership/admin/account",MEMBERSHIP_ACT_SAVE_GROUP:e.DELIVERY+"/membership/admin/user/group",LICENSE_ACTIVATE:e.LICENSE+"/license/activate",LICENSE_GET_INFORMATION:e.LICENSE+"/license/status",LICENSE_GET_NETSUITE_METHOD:e.LICENSE+"/license/methodWithCheckUrl",LICENSE_GET_MODULE:e.LICENSE+"/license/module/",LICENSE_SAVE_MODULE:e.LICENSE+"/license/module/save",SERVER_DETAILS:e.PUBMGT+"/servers/",DEFAULT_PUB_PATH:e.PUBMGT+"/servers/defaultFolderLocation/",DEFAULT_SERVER_MODIFIED:e.PUBMGT+"/servers/isDefaultServerModified/",STOP_PUB_SERVER:e.PUBMGT+"/servers/stopPublishing/",JOB_STATUS:e.SHARE+"/jobstatus",TEMPLATE_MIGRATE_CONTENT:e.MIGRATIONMGT+"/contentmigration/migrate",WIDGET_DEFS_SUMMARIES:e.WDGMGT+"/widgetbuilder/summaries",WIDGET_DEF:e.WDGMGT+"/widgetbuilder/definition/",WIDGET_DEF_VALIDATE:e.WDGMGT+"/widgetbuilder/validate/",WIDGET_DEF_DEPLOY:e.WDGMGT+"/widgetbuilder/deploy/",CLDSVC_ACTIVE:e.CLDSVC+"/cloudservice/active/",CLDSVC_ACTIVE_FMT:e.CLDSVC+"/cloudservice/%s/active/",CLDSVC_ACTIVESTATES:e.CLDSVC+"/cloudservice/activestates/",CLDSVC_INFO:e.CLDSVC+"/cloudservice/info/",CLDSVC_INFO_FMT:e.CLDSVC+"/cloudservice/%s/info/",CLDSVC_DATA:e.CLDSVC+"/cloudservice/pagedata/",CLDSVC_DATA_FMT:e.CLDSVC+"/cloudservice/%s/pagedata/",PAGE_OPT_ACTIVE:e.PAGEOPTMGT+"/pageoptimizer/active/",PAGE_OPT_DATA:e.PAGEOPTMGT+"/pageoptimizer/pagedata/",PAGE_OPT_INFO:e.PAGEOPTMGT+"/pageoptimizer/info/",RECENT_ROOT:e.RECMGT+"/recent/",REDIRECT_ROOT:e.REDMGT+"/redirect/",ITEM_PUB_HISTORY:e.ITEMMGT+"/item/pubhistory/"}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(k,z){var y=k.nodeName.toLowerCase();if("area"===y){var x=k.parentNode,q=x.name,n;return !k.href||!q||x.nodeName.toLowerCase()!=="map"?!1:(n=f("img[usemap=#"+q+"]")[0],!!n&&h(n))}return(/input|select|textarea|button|object/.test(y)?!k.disabled:"a"==y?k.href||z:z)&&h(k)}function h(k){return !f(k).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(k,n){return typeof k=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),n&&n.call(b)},k)}):this._focus.apply(this,arguments)},scrollParent:function(){var k;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?k=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):k=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!k.length?f(document):k},zIndex:function(q){if(q!==e){return this.css("zIndex",q)}if(this.length){var n=f(this[0]),k,b;while(n.length&&n[0]!==document){k=n.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){b=parseInt(n.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}n=n.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(y,x){function b(z,C,B,A){return f.each(q,function(){C-=parseFloat(f.curCSS(z,"padding"+this,!0))||0,B&&(C-=parseFloat(f.curCSS(z,"border"+this+"Width",!0))||0),A&&(C-=parseFloat(f.curCSS(z,"margin"+this,!0))||0)}),C}var q=x==="Width"?["Left","Right"]:["Top","Bottom"],n=x.toLowerCase(),k={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+x]=function(z){return z===e?k["inner"+x].call(this):this.each(function(){f(this).css(n,b(this,z)+"px")})},f.fn["outer"+x]=function(z,A){return typeof z!="number"?k["outer"+x].call(this,z):this.each(function(){f(this).css(n,b(this,z,!0,A)+"px")})}}),f.extend(f.expr[":"],{data:function(k,q,n){return !!f.data(k,n[3])},focusable:function(k){return j(k,!isNaN(f.attr(k,"tabindex")))},tabbable:function(k){var q=f.attr(k,"tabindex"),n=isNaN(q);return(n||q>=0)&&j(k,!n)}}),f(function(){var k=document.body,n=k.appendChild(n=document.createElement("div"));n.offsetHeight,f.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=n.offsetHeight===100,f.support.selectstart="onselectstart" in n,k.removeChild(n).style.display="none"}),f.extend(f.ui,{plugin:{add:function(k,y,x){var q=f.ui[k].prototype;for(var n in x){q.plugins[n]=q.plugins[n]||[],q.plugins[n].push([y,x[n]])}},call:function(n,k,y){var x=n.plugins[k];if(!x||!n.element[0].parentNode){return}for(var q=0;q<x.length;q++){n.options[x[q][0]]&&x[q][1].apply(n.element,y)}}},contains:function(n,k){return document.compareDocumentPosition?n.compareDocumentPosition(k)&16:n!==k&&n.contains(k)},hasScroll:function(k,x){if(f(k).css("overflow")==="hidden"){return !1}var q=x&&x==="left"?"scrollLeft":"scrollTop",n=!1;return k[q]>0?!0:(k[q]=1,n=k[q]>0,k[q]=0,n)},isOverAxis:function(n,k,q){return n>k&&n<k+q},isOver:function(k,z,y,x,q,n){return f.ui.isOverAxis(k,y,q)&&f.ui.isOverAxis(z,x,n)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(k){for(var x=0,q;(q=k[x])!=null;x++){try{f(q).triggerHandler("remove")}catch(n){}}j(k)}}else{var h=f.fn.remove;f.fn.remove=function(k,n){return this.each(function(){return n||(!k||f.filter(k,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(q){}}),h.call(f(this),k,n)})}}f.widget=function(k,z,y){var x=k.split(".")[0],q;k=k.split(".")[1],q=x+"-"+k,y||(y=z,z=f.Widget),f.expr[":"][q]=function(b){return !!f.data(b,k)},f[x]=f[x]||{},f[x][k]=function(B,A){arguments.length&&this._createWidget(B,A)};var n=new z;n.options=f.extend(!0,{},n.options),f[x][k].prototype=f.extend(!0,n,{namespace:x,widgetName:k,widgetEventPrefix:f[x][k].prototype.widgetEventPrefix||k,widgetBaseClass:q},y),f.widget.bridge(k,f[x][k])},f.widget.bridge=function(k,b){f.fn[k]=function(y){var x=typeof y=="string",q=Array.prototype.slice.call(arguments,1),n=this;return y=!x&&q.length?f.extend.apply(null,[!0,y].concat(q)):y,x&&y.charAt(0)==="_"?n:(x?this.each(function(){var A=f.data(this,k),z=A&&f.isFunction(A[y])?A[y].apply(A,q):A;if(z!==A&&z!==e){return n=z,!1}}):this.each(function(){var z=f.data(this,k);z?z.option(y||{})._init():f.data(this,k,new b(y,this))}),n)}},f.Widget=function(n,k){arguments.length&&this._createWidget(n,k)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(k,q){f.data(q,this.widgetName,this),this.element=f(q),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),k);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,k){var b=n;if(arguments.length===0){return f.extend({},this.options)}if(typeof n=="string"){if(k===e){return this.options[n]}b={},b[n]=k}return this._setOptions(b),this},_setOptions:function(k){var n=this;return f.each(k,function(x,q){n._setOption(x,q)}),this},_setOption:function(n,k){return this.options[n]=k,n==="disabled"&&this.widget()[k?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",k),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(k,z,y){var x,q,n=this.options[k];y=y||{},z=f.Event(z),z.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase(),z.target=this.element[0],q=z.originalEvent;if(q){for(x in q){x in z||(z[x]=q[x])}}return this.element.trigger(z,y),!(f.isFunction(n)&&n.call(this.element[0],z,y)===!1||z.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=!1;f(document).mouseup(function(b){h=!1}),f.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var j=this;this.element.bind("mousedown."+this.widgetName,function(b){return j._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===f.data(b.target,j.widgetName+".preventClickEvent")){return f.removeData(b.target,j.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(j){if(h){return}this._mouseStarted&&this._mouseUp(j),this._mouseDownEvent=j;var q=this,n=j.which==1,k=typeof this.options.cancel=="string"&&j.target.nodeName?f(j.target).closest(this.options.cancel).length:!1;if(!n||k||!this._mouseCapture(j)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){q.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)){this._mouseStarted=this._mouseStart(j)!==!1;if(!this._mouseStarted){return j.preventDefault(),!0}}return !0===f.data(j.target,this.widgetName+".preventClickEvent")&&f.removeData(j.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return q._mouseMove(b)},this._mouseUpDelegate=function(b){return q._mouseUp(b)},f(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),j.preventDefault(),h=!0,!0},_mouseMove:function(j){return !f.browser.msie||document.documentMode>=9||!!j.button?this._mouseStarted?(this._mouseDrag(j),j.preventDefault()):(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,j)!==!1,this._mouseStarted?this._mouseDrag(j):this._mouseUp(j)),!this._mouseStarted):this._mouseUp(j)},_mouseUp:function(j){return f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,j.target==this._mouseDownEvent.target&&f.data(j.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(j)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var A=/left|center|right/,z=/top|center|bottom/,y="center",x={},q=k.fn.position,n=k.fn.offset;k.fn.position=function(f){if(!f||!f.of){return q.apply(this,arguments)}f=k.extend({},f);var F=k(f.of),E=F[0],D=(f.collision||"flip").split(" "),C=f.offset?f.offset.split(" "):[0,0],B,e,G;return E.nodeType===9?(B=F.width(),e=F.height(),G={top:0,left:0}):E.setTimeout?(B=F.width(),e=F.height(),G={top:F.scrollTop(),left:F.scrollLeft()}):E.preventDefault?(f.at="left top",B=e=0,G={top:f.of.pageY,left:f.of.pageX}):(B=F.outerWidth(),e=F.outerHeight(),G=F.offset()),k.each(["my","at"],function(){var b=(f[this]||"").split(" ");b.length===1&&(b=A.test(b[0])?b.concat([y]):z.test(b[0])?[y].concat(b):[y,y]),b[0]=A.test(b[0])?b[0]:y,b[1]=z.test(b[1])?b[1]:y,f[this]=b}),D.length===1&&(D[1]=D[0]),C[0]=parseInt(C[0],10)||0,C.length===1&&(C[1]=C[0]),C[1]=parseInt(C[1],10)||0,f.at[0]==="right"?G.left+=B:f.at[0]===y&&(G.left+=B/2),f.at[1]==="bottom"?G.top+=e:f.at[1]===y&&(G.top+=e/2),G.left+=C[0],G.top+=C[1],this.each(function(){var O=k(this),N=O.outerWidth(),M=O.outerHeight(),L=parseInt(k.curCSS(this,"marginLeft",!0))||0,K=parseInt(k.curCSS(this,"marginTop",!0))||0,J=N+L+(parseInt(k.curCSS(this,"marginRight",!0))||0),I=M+K+(parseInt(k.curCSS(this,"marginBottom",!0))||0),H=k.extend({},G),b;f.my[0]==="right"?H.left-=N:f.my[0]===y&&(H.left-=N/2),f.my[1]==="bottom"?H.top-=M:f.my[1]===y&&(H.top-=M/2),x.fractions||(H.left=Math.round(H.left),H.top=Math.round(H.top)),b={left:H.left-L,top:H.top-K},k.each(["left","top"],function(P,h){k.ui.position[D[P]]&&k.ui.position[D[P]][h](H,{targetWidth:B,targetHeight:e,elemWidth:N,elemHeight:M,collisionPosition:b,collisionWidth:J,collisionHeight:I,offset:C,my:f.my,at:f.at})}),k.fn.bgiframe&&O.bgiframe(),O.offset(k.extend(H,{using:f.using}))})},k.ui.position={fit:{left:function(f,C){var B=k(window),h=C.collisionPosition.left+C.collisionWidth-B.width()-B.scrollLeft();f.left=h>0?f.left-h:Math.max(f.left-C.collisionPosition.left,f.left)},top:function(f,C){var B=k(window),h=C.collisionPosition.top+C.collisionHeight-B.height()-B.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-C.collisionPosition.top,f.top)}},flip:{left:function(e,G){if(G.at[0]===y){return}var F=k(window),E=G.collisionPosition.left+G.collisionWidth-F.width()-F.scrollLeft(),D=G.my[0]==="left"?-G.elemWidth:G.my[0]==="right"?G.elemWidth:0,C=G.at[0]==="left"?G.targetWidth:-G.targetWidth,B=-2*G.offset[0];e.left+=G.collisionPosition.left<0?D+C+B:E>0?D+C+B:0},top:function(e,G){if(G.at[1]===y){return}var F=k(window),E=G.collisionPosition.top+G.collisionHeight-F.height()-F.scrollTop(),D=G.my[1]==="top"?-G.elemHeight:G.my[1]==="bottom"?G.elemHeight:0,C=G.at[1]==="top"?G.targetHeight:-G.targetHeight,B=-2*G.offset[1];e.top+=G.collisionPosition.top<0?D+C+B:E>0?D+C+B:0}}},k.offset.setOffset||(k.offset.setOffset=function(B,H){/static/.test(k.curCSS(B,"position"))&&(B.style.position="relative");var G=k(B),F=G.offset(),E=parseInt(k.curCSS(B,"top",!0),10)||0,D=parseInt(k.curCSS(B,"left",!0),10)||0,C={top:H.top-F.top+E,left:H.left-F.left+D};"using" in H?H.using.call(B,C):G.css(C)},k.fn.offset=function(e){var f=this[0];return !f||!f.ownerDocument?null:e?k.isFunction(e)?this.each(function(b){k(this).offset(e.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,e)}):n.call(this)}),function(){var f=document.getElementsByTagName("body")[0],H=document.createElement("div"),G,F,E,D,C;G=document.createElement(f?"div":"body"),E={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},f&&k.extend(E,{position:"absolute",left:"-1000px",top:"-1000px"});for(var B in E){G.style[B]=E[B]}G.appendChild(H),F=f||document.documentElement,F.insertBefore(G,F.firstChild),H.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",D=k(H).offset(function(h,e){return e}).offset(),G.innerHTML="",F.removeChild(G),C=D.top+D.left+(f?2000:0),x.fractions=C>21&&C<22}()})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.draggable",f.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(h){var j=this.options;return this.helper||j.disabled||f(h.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(h),this.handle?(j.iframeFix&&f(j.iframeFix===!0?"iframe":j.iframeFix).each(function(){f('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(f(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(h){var j=this.options;return this.helper=this._createHelper(h),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),f.ui.ddmanager&&(f.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt),j.containment&&this._setContainment(),this._trigger("start",h)===!1?(this._clear(),!1):(this._cacheHelperProportions(),f.ui.ddmanager&&!j.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,h),this._mouseDrag(h,!0),f.ui.ddmanager&&f.ui.ddmanager.dragStart(this,h),!0)},_mouseDrag:function(h,k){this.position=this._generatePosition(h),this.positionAbs=this._convertPositionTo("absolute");if(!k){var j=this._uiHash();if(this._trigger("drag",h,j)===!1){return this._mouseUp({}),!1}this.position=j.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return f.ui.ddmanager&&f.ui.ddmanager.drag(this,h),!1},_mouseStop:function(h){var q=!1;f.ui.ddmanager&&!this.options.dropBehaviour&&(q=f.ui.ddmanager.drop(this,h)),this.dropped&&(q=this.dropped,this.dropped=!1);var n=this.element[0],k=!1;while(n&&(n=n.parentNode)){n==document&&(k=!0)}if(!k&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!q||this.options.revert=="valid"&&q||this.options.revert===!0||f.isFunction(this.options.revert)&&this.options.revert.call(this.element,q)){var j=this;f(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){j._trigger("stop",h)!==!1&&j._clear()})}else{this._trigger("stop",h)!==!1&&this._clear()}return !1},_mouseUp:function(h){return this.options.iframeFix===!0&&f("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),f.ui.ddmanager&&f.ui.ddmanager.dragStop(this,h),f.ui.mouse.prototype._mouseUp.call(this,h)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(h){var j=!this.options.handle||!f(this.options.handle,this.element).length?!0:!1;return f(this.options.handle,this.element).find("*").andSelf().each(function(){this==h.target&&(j=!0)}),j},_createHelper:function(h){var k=this.options,j=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[h])):k.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return j.parents("body").length||j.appendTo(k.appendTo=="parent"?this.element[0].parentNode:k.appendTo),j[0]!=this.element[0]&&!/(fixed|absolute)/.test(j.css("position"))&&j.css("position","absolute"),j},_adjustOffsetFromHelper:function(h){typeof h=="string"&&(h=h.split(" ")),f.isArray(h)&&(h={left:+h[0],top:+h[1]||0}),"left" in h&&(this.offset.click.left=h.left+this.margins.left),"right" in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left),"top" in h&&(this.offset.click.top=h.top+this.margins.top),"bottom" in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&f.browser.msie){h={top:0,left:0}}return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:f(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:f(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:f(window).scrollLeft())+f(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:f(window).scrollTop())+(f(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){var q=f(h.containment),n=q[0];if(!n){return}var k=q.offset(),j=f(n).css("overflow")!="hidden";this.containment=[(parseInt(f(n).css("borderLeftWidth"),10)||0)+(parseInt(f(n).css("paddingLeft"),10)||0),(parseInt(f(n).css("borderTopWidth"),10)||0)+(parseInt(f(n).css("paddingTop"),10)||0),(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(f(n).css("borderLeftWidth"),10)||0)-(parseInt(f(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(f(n).css("borderTopWidth"),10)||0)-(parseInt(f(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=q}else{h.containment.constructor==Array&&(this.containment=h.containment)}},_convertPositionTo:function(h,x){x||(x=this.position);var q=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:x.top+this.offset.relative.top*q+this.offset.parent.top*q-(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*q),left:x.left+this.offset.relative.left*q+this.offset.parent.left*q-(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*q)}},_generatePosition:function(E){var D=this.options,C=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,B=/(html|body)/i.test(C[0].tagName),A=E.pageX,z=E.pageY;if(this.originalPosition){var y;if(this.containment){if(this.relative_container){var x=this.relative_container.offset();y=[this.containment[0]+x.left,this.containment[1]+x.top,this.containment[2]+x.left,this.containment[3]+x.top]}else{y=this.containment}E.pageX-this.offset.click.left<y[0]&&(A=y[0]+this.offset.click.left),E.pageY-this.offset.click.top<y[1]&&(z=y[1]+this.offset.click.top),E.pageX-this.offset.click.left>y[2]&&(A=y[2]+this.offset.click.left),E.pageY-this.offset.click.top>y[3]&&(z=y[3]+this.offset.click.top)}if(D.grid){var q=D.grid[1]?this.originalPageY+Math.round((z-this.originalPageY)/D.grid[1])*D.grid[1]:this.originalPageY;z=y?q-this.offset.click.top<y[1]||q-this.offset.click.top>y[3]?q-this.offset.click.top<y[1]?q+D.grid[1]:q-D.grid[1]:q:q;var n=D.grid[0]?this.originalPageX+Math.round((A-this.originalPageX)/D.grid[0])*D.grid[0]:this.originalPageX;A=y?n-this.offset.click.left<y[0]||n-this.offset.click.left>y[2]?n-this.offset.click.left<y[0]?n+D.grid[0]:n-D.grid[0]:n:n}}return{top:z-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():B?0:C.scrollTop()),left:A-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():B?0:C.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(h,k,j){return j=j||this._uiHash(),f.ui.plugin.call(this,h,[k,j]),h=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),f.Widget.prototype._trigger.call(this,h,k,j)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),f.extend(f.ui.draggable,{version:"1.8.21"}),f.ui.plugin.add("draggable","connectToSortable",{start:function(h,q){var n=f(this).data("draggable"),k=n.options,j=f.extend({},q,{item:n.element});n.sortables=[],f(k.connectToSortable).each(function(){var b=f.data(this,"sortable");b&&!b.options.disabled&&(n.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",h,j))})},stop:function(h,n){var k=f(this).data("draggable"),j=f.extend({},n,{item:k.element});f.each(k.sortables,function(){this.instance.isOver?(this.instance.isOver=0,k.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(h),this.instance.options.helper=this.instance.options._helper,k.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",h,j))})},drag:function(h,q){var n=f(this).data("draggable"),k=this,j=function(F){var E=this.offset.click.top,D=this.offset.click.left,C=this.positionAbs.top,B=this.positionAbs.left,A=F.height,z=F.width,y=F.top,x=F.left;return f.ui.isOver(C+E,B+D,y,x,A,z)};f.each(n.sortables,function(b){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=f(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return q.helper[0]},h.target=this.instance.currentItem[0],this.instance._mouseCapture(h,!0),this.instance._mouseStart(h,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",h),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(h)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",h,this.instance._uiHash(this.instance)),this.instance._mouseStop(h,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",h),n.dropped=!1)})}}),f.ui.plugin.add("draggable","cursor",{start:function(h,n){var k=f("body"),j=f(this).data("draggable").options;k.css("cursor")&&(j._cursor=k.css("cursor")),k.css("cursor",j.cursor)},stop:function(h,k){var j=f(this).data("draggable").options;j._cursor&&f("body").css("cursor",j._cursor)}}),f.ui.plugin.add("draggable","opacity",{start:function(h,n){var k=f(n.helper),j=f(this).data("draggable").options;k.css("opacity")&&(j._opacity=k.css("opacity")),k.css("opacity",j.opacity)},stop:function(h,k){var j=f(this).data("draggable").options;j._opacity&&f(k.helper).css("opacity",j._opacity)}}),f.ui.plugin.add("draggable","scroll",{start:function(h,k){var j=f(this).data("draggable");j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"&&(j.overflowOffset=j.scrollParent.offset())},drag:function(h,q){var n=f(this).data("draggable"),k=n.options,j=!1;if(n.scrollParent[0]!=document&&n.scrollParent[0].tagName!="HTML"){if(!k.axis||k.axis!="x"){n.overflowOffset.top+n.scrollParent[0].offsetHeight-h.pageY<k.scrollSensitivity?n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop+k.scrollSpeed:h.pageY-n.overflowOffset.top<k.scrollSensitivity&&(n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop-k.scrollSpeed)}if(!k.axis||k.axis!="y"){n.overflowOffset.left+n.scrollParent[0].offsetWidth-h.pageX<k.scrollSensitivity?n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft+k.scrollSpeed:h.pageX-n.overflowOffset.left<k.scrollSensitivity&&(n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft-k.scrollSpeed)}}else{if(!k.axis||k.axis!="x"){h.pageY-f(document).scrollTop()<k.scrollSensitivity?j=f(document).scrollTop(f(document).scrollTop()-k.scrollSpeed):f(window).height()-(h.pageY-f(document).scrollTop())<k.scrollSensitivity&&(j=f(document).scrollTop(f(document).scrollTop()+k.scrollSpeed))}if(!k.axis||k.axis!="y"){h.pageX-f(document).scrollLeft()<k.scrollSensitivity?j=f(document).scrollLeft(f(document).scrollLeft()-k.scrollSpeed):f(window).width()-(h.pageX-f(document).scrollLeft())<k.scrollSensitivity&&(j=f(document).scrollLeft(f(document).scrollLeft()+k.scrollSpeed))}}j!==!1&&f.ui.ddmanager&&!k.dropBehaviour&&f.ui.ddmanager.prepareOffsets(n,h)}}),f.ui.plugin.add("draggable","snap",{start:function(h,n){var k=f(this).data("draggable"),j=k.options;k.snapElements=[],f(j.snap.constructor!=String?j.snap.items||":data(draggable)":j.snap).each(function(){var q=f(this),x=q.offset();this!=k.element[0]&&k.snapElements.push({item:this,width:q.outerWidth(),height:q.outerHeight(),top:x.top,left:x.left})})},drag:function(P,O){var N=f(this).data("draggable"),M=N.options,L=M.snapTolerance,K=O.offset.left,J=K+N.helperProportions.width,I=O.offset.top,H=I+N.helperProportions.height;for(var G=N.snapElements.length-1;G>=0;G--){var F=N.snapElements[G].left,E=F+N.snapElements[G].width,D=N.snapElements[G].top,C=D+N.snapElements[G].height;if(!(F-L<K&&K<E+L&&D-L<I&&I<C+L||F-L<K&&K<E+L&&D-L<H&&H<C+L||F-L<J&&J<E+L&&D-L<I&&I<C+L||F-L<J&&J<E+L&&D-L<H&&H<C+L)){N.snapElements[G].snapping&&N.options.snap.release&&N.options.snap.release.call(N.element,P,f.extend(N._uiHash(),{snapItem:N.snapElements[G].item})),N.snapElements[G].snapping=!1;continue}if(M.snapMode!="inner"){var B=Math.abs(D-H)<=L,A=Math.abs(C-I)<=L,z=Math.abs(F-J)<=L,y=Math.abs(E-K)<=L;B&&(O.position.top=N._convertPositionTo("relative",{top:D-N.helperProportions.height,left:0}).top-N.margins.top),A&&(O.position.top=N._convertPositionTo("relative",{top:C,left:0}).top-N.margins.top),z&&(O.position.left=N._convertPositionTo("relative",{top:0,left:F-N.helperProportions.width}).left-N.margins.left),y&&(O.position.left=N._convertPositionTo("relative",{top:0,left:E}).left-N.margins.left)}var x=B||A||z||y;if(M.snapMode!="outer"){var B=Math.abs(D-I)<=L,A=Math.abs(C-H)<=L,z=Math.abs(F-K)<=L,y=Math.abs(E-J)<=L;B&&(O.position.top=N._convertPositionTo("relative",{top:D,left:0}).top-N.margins.top),A&&(O.position.top=N._convertPositionTo("relative",{top:C-N.helperProportions.height,left:0}).top-N.margins.top),z&&(O.position.left=N._convertPositionTo("relative",{top:0,left:F}).left-N.margins.left),y&&(O.position.left=N._convertPositionTo("relative",{top:0,left:E-N.helperProportions.width}).left-N.margins.left)}!N.snapElements[G].snapping&&(B||A||z||y||x)&&N.options.snap.snap&&N.options.snap.snap.call(N.element,P,f.extend(N._uiHash(),{snapItem:N.snapElements[G].item})),N.snapElements[G].snapping=B||A||z||y||x}}}),f.ui.plugin.add("draggable","stack",{start:function(h,q){var n=f(this).data("draggable").options,k=f.makeArray(f(n.stack)).sort(function(x,y){return(parseInt(f(x).css("zIndex"),10)||0)-(parseInt(f(y).css("zIndex"),10)||0)});if(!k.length){return}var j=parseInt(k[0].style.zIndex)||0;f(k).each(function(b){this.style.zIndex=j+b}),this[0].style.zIndex=j+k.length}}),f.ui.plugin.add("draggable","zIndex",{start:function(h,n){var k=f(n.helper),j=f(this).data("draggable").options;k.css("zIndex")&&(j._zIndex=k.css("zIndex")),k.css("zIndex",j.zIndex)},stop:function(h,k){var j=f(this).data("draggable").options;j._zIndex&&f(k.helper).css("zIndex",j._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var h=this.options,j=h.accept;this.isover=0,this.isout=1,this.accept=f.isFunction(j)?j:function(b){return b.is(j)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},f.ui.ddmanager.droppables[h.scope]=f.ui.ddmanager.droppables[h.scope]||[],f.ui.ddmanager.droppables[h.scope].push(this),h.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var h=f.ui.ddmanager.droppables[this.options.scope];for(var j=0;j<h.length;j++){h[j]==this&&h.splice(j,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(h,j){h=="accept"&&(this.accept=f.isFunction(j)?j:function(b){return b.is(j)}),f.Widget.prototype._setOption.apply(this,arguments)},_activate:function(h){var j=f.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),j&&this._trigger("activate",h,this.ui(j))},_deactivate:function(h){var j=f.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),j&&this._trigger("deactivate",h,this.ui(j))},_over:function(h){var j=f.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return}this.accept.call(this.element[0],j.currentItem||j.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",h,this.ui(j)))},_out:function(h){var j=f.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return}this.accept.call(this.element[0],j.currentItem||j.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",h,this.ui(j)))},_drop:function(h,n){var k=n||f.ui.ddmanager.current;if(!k||(k.currentItem||k.element)[0]==this.element[0]){return !1}var j=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var q=f.data(this,"droppable");if(q.options.greedy&&!q.options.disabled&&q.options.scope==k.options.scope&&q.accept.call(q.element[0],k.currentItem||k.element)&&f.ui.intersect(k,f.extend(q,{offset:q.element.offset()}),q.options.tolerance)){return j=!0,!1}}),j?!1:this.accept.call(this.element[0],k.currentItem||k.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",h,this.ui(k)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),f.extend(f.ui.droppable,{version:"1.8.21"}),f.ui.intersect=function(J,I,H){if(!I.offset){return !1}var G=(J.positionAbs||J.position.absolute).left,F=G+J.helperProportions.width,E=(J.positionAbs||J.position.absolute).top,D=E+J.helperProportions.height,C=I.offset.left,B=C+I.proportions.width,A=I.offset.top,z=A+I.proportions.height;switch(H){case"fit":return C<=G&&F<=B&&A<=E&&D<=z;case"intersect":return C<G+J.helperProportions.width/2&&F-J.helperProportions.width/2<B&&A<E+J.helperProportions.height/2&&D-J.helperProportions.height/2<z;case"pointer":var y=(J.positionAbs||J.position.absolute).left+(J.clickOffset||J.offset.click).left,x=(J.positionAbs||J.position.absolute).top+(J.clickOffset||J.offset.click).top,q=f.ui.isOver(x,y,A,C,I.proportions.height,I.proportions.width);return q;case"touch":return(E>=A&&E<=z||D>=A&&D<=z||E<A&&D>z)&&(G>=C&&G<=B||F>=C&&F<=B||G<C&&F>B);default:return !1}},f.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(j,z){var y=f.ui.ddmanager.droppables[j.options.scope]||[],x=z?z.type:null,q=(j.currentItem||j.element).find(":data(droppable)").andSelf();g:for(var n=0;n<y.length;n++){if(y[n].options.disabled||j&&!y[n].accept.call(y[n].element[0],j.currentItem||j.element)){continue}for(var k=0;k<q.length;k++){if(q[k]==y[n].element[0]){y[n].proportions.height=0;continue g}}y[n].visible=y[n].element.css("display")!="none";if(!y[n].visible){continue}x=="mousedown"&&y[n]._activate.call(y[n],z),y[n].offset=y[n].element.offset(),y[n].proportions={width:y[n].element[0].offsetWidth,height:y[n].element[0].offsetHeight}}},drop:function(h,k){var j=!1;return f.each(f.ui.ddmanager.droppables[h.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&f.ui.intersect(h,this,this.options.tolerance)&&(j=this._drop.call(this,k)||j),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,k))}),j},dragStart:function(h,j){h.element.parents(":not(body,html)").bind("scroll.droppable",function(){h.options.refreshPositions||f.ui.ddmanager.prepareOffsets(h,j)})},drag:function(h,j){h.options.refreshPositions&&f.ui.ddmanager.prepareOffsets(h,j),f.each(f.ui.ddmanager.droppables[h.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var q=f.ui.intersect(h,this,this.options.tolerance),n=!q&&this.isover==1?"isout":q&&this.isover==0?"isover":null;if(!n){return}var k;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(k=f.data(b[0],"droppable"),k.greedyChild=n=="isover"?1:0)}k&&n=="isover"&&(k.isover=0,k.isout=1,k._out.call(k,j)),this[n]=1,this[n=="isout"?"isover":"isout"]=0,this[n=="isover"?"_over":"_out"].call(this,j),k&&n=="isout"&&(k.isout=0,k.isover=1,k._over.call(k,j))})},dragStop:function(h,j){h.element.parents(":not(body,html)").unbind("scroll.droppable"),h.options.refreshPositions||f.ui.ddmanager.prepareOffsets(h,j)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var k=this,A=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!A.aspectRatio,aspectRatio:A.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:A.helper||A.ghost||A.animate?A.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=A.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var z=this.handles.split(",");this.handles={};for(var y=0;y<z.length;y++){var x=f.trim(z[y]),q="ui-resizable-"+x,n=f('<div class="ui-resizable-handle '+q+'"></div>');n.css({zIndex:A.zIndex}),"se"==x&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[x]=".ui-resizable-"+x,this.element.append(n)}}this._renderAxis=function(B){B=B||this.element;for(var F in this.handles){this.handles[F].constructor==String&&(this.handles[F]=f(this.handles[F],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var E=f(this.handles[F],this.element),D=0;D=/sw|ne|nw|se|n|s/.test(F)?E.outerHeight():E.outerWidth();var C=["padding",/ne|nw|n/.test(F)?"Top":/se|sw|s/.test(F)?"Bottom":/^e$/.test(F)?"Right":"Left"].join("");B.css(C,D),this._proportionallyResize()}if(!f(this.handles[F]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!k.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}k.axis=b&&b[1]?b[1]:"se"}}),A.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(A.disabled){return}f(this).removeClass("ui-resizable-autohide"),k._handles.show()},function(){if(A.disabled){return}k.resizing||(f(this).addClass("ui-resizable-autohide"),k._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var k=function(q){f(q).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){k(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),k(this.originalElement),this},_mouseCapture:function(k){var q=!1;for(var n in this.handles){f(this.handles[n])[0]==k.target&&(q=!0)}return !this.options.disabled&&q},_mouseStart:function(k){var A=this.options,z=this.element.position(),y=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(y.is(".ui-draggable")||/absolute/.test(y.css("position")))&&y.css({position:"absolute",top:z.top,left:z.left}),this._renderProxy();var x=j(this.helper.css("left")),q=j(this.helper.css("top"));A.containment&&(x+=f(A.containment).scrollLeft()||0,q+=f(A.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:x,top:q},this.size=this._helper?{width:y.outerWidth(),height:y.outerHeight()}:{width:y.width(),height:y.height()},this.originalSize=this._helper?{width:y.outerWidth(),height:y.outerHeight()}:{width:y.width(),height:y.height()},this.originalPosition={left:x,top:q},this.sizeDiff={width:y.outerWidth()-y.width(),height:y.outerHeight()-y.height()},this.originalMousePosition={left:k.pageX,top:k.pageY},this.aspectRatio=typeof A.aspectRatio=="number"?A.aspectRatio:this.originalSize.width/this.originalSize.height||1;var n=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",n=="auto"?this.axis+"-resize":n),y.addClass("ui-resizable-resizing"),this._propagate("start",k),!0},_mouseDrag:function(I){var H=this.helper,G=this.options,F={},E=this,D=this.originalMousePosition,C=this.axis,B=I.pageX-D.left||0,A=I.pageY-D.top||0,z=this._change[C];if(!z){return !1}var y=z.apply(this,[I,B,A]),x=f.browser.msie&&f.browser.version<7,q=this.sizeDiff;this._updateVirtualBoundaries(I.shiftKey);if(this._aspectRatio||I.shiftKey){y=this._updateRatio(y,I)}return y=this._respectSize(y,I),this._propagate("resize",I),H.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(y),this._trigger("resize",I,this.ui()),!1},_mouseStop:function(E){this.resizing=!1;var D=this.options,C=this;if(this._helper){var B=this._proportionallyResizeElements,A=B.length&&/textarea/i.test(B[0].nodeName),z=A&&f.ui.hasScroll(B[0],"left")?0:C.sizeDiff.height,y=A?0:C.sizeDiff.width,x={width:C.helper.width()-y,height:C.helper.height()-z},q=parseInt(C.element.css("left"),10)+(C.position.left-C.originalPosition.left)||null,n=parseInt(C.element.css("top"),10)+(C.position.top-C.originalPosition.top)||null;D.animate||this.element.css(f.extend(x,{top:n,left:q})),C.helper.height(C.size.height),C.helper.width(C.size.width),this._helper&&!D.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",E),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var k=this.options,A,z,y,x,q;q={minWidth:h(k.minWidth)?k.minWidth:0,maxWidth:h(k.maxWidth)?k.maxWidth:Infinity,minHeight:h(k.minHeight)?k.minHeight:0,maxHeight:h(k.maxHeight)?k.maxHeight:Infinity};if(this._aspectRatio||n){A=q.minHeight*this.aspectRatio,y=q.minWidth/this.aspectRatio,z=q.maxHeight*this.aspectRatio,x=q.maxWidth/this.aspectRatio,A>q.minWidth&&(q.minWidth=A),y>q.minHeight&&(q.minHeight=y),z<q.maxWidth&&(q.maxWidth=z),x<q.maxHeight&&(q.maxHeight=x)}this._vBoundaries=q},_updateCache:function(n){var k=this.options;this.offset=this.helper.offset(),h(n.left)&&(this.position.left=n.left),h(n.top)&&(this.position.top=n.top),h(n.height)&&(this.size.height=n.height),h(n.width)&&(this.size.width=n.width)},_updateRatio:function(n,k){var z=this.options,y=this.position,x=this.size,q=this.axis;return h(n.height)?n.width=n.height*this.aspectRatio:h(n.width)&&(n.height=n.width/this.aspectRatio),q=="sw"&&(n.left=y.left+(x.width-n.width),n.top=null),q=="nw"&&(n.top=y.top+(x.height-n.height),n.left=y.left+(x.width-n.width)),n},_respectSize:function(K,J){var I=this.helper,H=this._vBoundaries,G=this._aspectRatio||J.shiftKey,F=this.axis,E=h(K.width)&&H.maxWidth&&H.maxWidth<K.width,D=h(K.height)&&H.maxHeight&&H.maxHeight<K.height,C=h(K.width)&&H.minWidth&&H.minWidth>K.width,B=h(K.height)&&H.minHeight&&H.minHeight>K.height;C&&(K.width=H.minWidth),B&&(K.height=H.minHeight),E&&(K.width=H.maxWidth),D&&(K.height=H.maxHeight);var A=this.originalPosition.left+this.originalSize.width,z=this.position.top+this.size.height,y=/sw|nw|w/.test(F),x=/nw|ne|n/.test(F);C&&y&&(K.left=A-H.minWidth),E&&y&&(K.left=A-H.maxWidth),B&&x&&(K.top=z-H.minHeight),D&&x&&(K.top=z-H.maxHeight);var q=!K.width&&!K.height;return q&&!K.left&&K.top?K.top=null:q&&!K.top&&K.left&&(K.left=null),K},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var z=this.helper||this.element;for(var y=0;y<this._proportionallyResizeElements.length;y++){var x=this._proportionallyResizeElements[y];if(!this.borderDif){var q=[x.css("borderTopWidth"),x.css("borderRightWidth"),x.css("borderBottomWidth"),x.css("borderLeftWidth")],n=[x.css("paddingTop"),x.css("paddingRight"),x.css("paddingBottom"),x.css("paddingLeft")];this.borderDif=f.map(q,function(B,A){var D=parseInt(B,10)||0,C=parseInt(n[A],10)||0;return D+C})}if(!f.browser.msie||!f(z).is(":hidden")&&!f(z).parents(":hidden").length){x.css({height:z.height()-this.borderDif[0]-this.borderDif[2]||0,width:z.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var k=this.element,y=this.options;this.elementOffset=k.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var x=f.browser.msie&&f.browser.version<7,q=x?1:0,n=x?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-q+"px",top:this.elementOffset.top-q+"px",zIndex:++y.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(n,k,q){return{width:this.originalSize.width+k}},w:function(n,k,z){var y=this.options,x=this.originalSize,q=this.originalPosition;return{left:q.left+k,width:x.width-k}},n:function(n,k,z){var y=this.options,x=this.originalSize,q=this.originalPosition;return{top:q.top+z,height:x.height-z}},s:function(n,k,q){return{height:this.originalSize.height+q}},se:function(k,q,n){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[k,q,n]))},sw:function(k,q,n){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[k,q,n]))},ne:function(k,q,n){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[k,q,n]))},nw:function(k,q,n){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[k,q,n]))}},_propagate:function(k,n){f.ui.plugin.call(this,k,[n,this.ui()]),k!="resize"&&this._trigger(k,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(k,y){var x=f(this).data("resizable"),q=x.options,n=function(z){f(z).each(function(){var A=f(this);A.data("resizable-alsoresize",{width:parseInt(A.width(),10),height:parseInt(A.height(),10),left:parseInt(A.css("left"),10),top:parseInt(A.css("top"),10)})})};typeof q.alsoResize=="object"&&!q.alsoResize.parentNode?q.alsoResize.length?(q.alsoResize=q.alsoResize[0],n(q.alsoResize)):f.each(q.alsoResize,function(b){n(b)}):n(q.alsoResize)},resize:function(k,B){var A=f(this).data("resizable"),z=A.options,y=A.originalSize,x=A.originalPosition,q={height:A.size.height-y.height||0,width:A.size.width-y.width||0,top:A.position.top-x.top||0,left:A.position.left-x.left||0},n=function(C,D){f(C).each(function(){var E=f(this),H=f(this).data("resizable-alsoresize"),G={},F=D&&D.length?D:E.parents(B.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(F,function(J,I){var K=(H[I]||0)+(q[I]||0);K&&K>=0&&(G[I]=K||null)}),E.css(G)})};typeof z.alsoResize=="object"&&!z.alsoResize.nodeType?f.each(z.alsoResize,function(D,C){n(D,C)}):n(z.alsoResize)},stop:function(k,n){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(F,E){var D=f(this).data("resizable"),C=D.options,B=D._proportionallyResizeElements,A=B.length&&/textarea/i.test(B[0].nodeName),z=A&&f.ui.hasScroll(B[0],"left")?0:D.sizeDiff.height,y=A?0:D.sizeDiff.width,x={width:D.size.width-y,height:D.size.height-z},q=parseInt(D.element.css("left"),10)+(D.position.left-D.originalPosition.left)||null,n=parseInt(D.element.css("top"),10)+(D.position.top-D.originalPosition.top)||null;D.element.animate(f.extend(x,n&&q?{top:n,left:q}:{}),{duration:C.animateDuration,easing:C.animateEasing,step:function(){var b={width:parseInt(D.element.css("width"),10),height:parseInt(D.element.css("height"),10),top:parseInt(D.element.css("top"),10),left:parseInt(D.element.css("left"),10)};B&&B.length&&f(B[0]).css({width:b.width,height:b.height}),D._updateCache(b),D._propagate("resize",F)}})}}),f.ui.plugin.add("resizable","containment",{start:function(J,I){var H=f(this).data("resizable"),G=H.options,F=H.element,E=G.containment,D=E instanceof f?E.get(0):/parent/.test(E)?F.parent().get(0):E;if(!D){return}H.containerElement=f(D);if(/document/.test(E)||E==document){H.containerOffset={left:0,top:0},H.containerPosition={left:0,top:0},H.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var C=f(D),B=[];f(["Top","Right","Left","Bottom"]).each(function(n,k){B[n]=j(C.css("padding"+k))}),H.containerOffset=C.offset(),H.containerPosition=C.position(),H.containerSize={height:C.innerHeight()-B[3],width:C.innerWidth()-B[1]};var A=H.containerOffset,z=H.containerSize.height,y=H.containerSize.width,x=f.ui.hasScroll(D,"left")?D.scrollWidth:y,q=f.ui.hasScroll(D)?D.scrollHeight:z;H.parentData={element:D,left:A.left,top:A.top,width:x,height:q}}},resize:function(K,J){var I=f(this).data("resizable"),H=I.options,G=I.containerSize,F=I.containerOffset,E=I.size,D=I.position,C=I._aspectRatio||K.shiftKey,B={top:0,left:0},A=I.containerElement;A[0]!=document&&/static/.test(A.css("position"))&&(B=F),D.left<(I._helper?F.left:0)&&(I.size.width=I.size.width+(I._helper?I.position.left-F.left:I.position.left-B.left),C&&(I.size.height=I.size.width/I.aspectRatio),I.position.left=H.helper?F.left:0),D.top<(I._helper?F.top:0)&&(I.size.height=I.size.height+(I._helper?I.position.top-F.top:I.position.top),C&&(I.size.width=I.size.height*I.aspectRatio),I.position.top=I._helper?F.top:0),I.offset.left=I.parentData.left+I.position.left,I.offset.top=I.parentData.top+I.position.top;var z=Math.abs((I._helper?I.offset.left-B.left:I.offset.left-B.left)+I.sizeDiff.width),y=Math.abs((I._helper?I.offset.top-B.top:I.offset.top-F.top)+I.sizeDiff.height),x=I.containerElement.get(0)==I.element.parent().get(0),q=/relative|absolute/.test(I.containerElement.css("position"));x&&q&&(z-=I.parentData.left),z+I.size.width>=I.parentData.width&&(I.size.width=I.parentData.width-z,C&&(I.size.height=I.size.width/I.aspectRatio)),y+I.size.height>=I.parentData.height&&(I.size.height=I.parentData.height-y,C&&(I.size.width=I.size.height*I.aspectRatio))},stop:function(G,F){var E=f(this).data("resizable"),D=E.options,C=E.position,B=E.containerOffset,A=E.containerPosition,z=E.containerElement,y=f(E.helper),x=y.offset(),q=y.outerWidth()-E.sizeDiff.width,n=y.outerHeight()-E.sizeDiff.height;E._helper&&!D.animate&&/relative/.test(z.css("position"))&&f(this).css({left:x.left-A.left-B.left,width:q,height:n}),E._helper&&!D.animate&&/static/.test(z.css("position"))&&f(this).css({left:x.left-A.left-B.left,width:q,height:n})}}),f.ui.plugin.add("resizable","ghost",{start:function(k,y){var x=f(this).data("resizable"),q=x.options,n=x.size;x.ghost=x.originalElement.clone(),x.ghost.css({opacity:0.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof q.ghost=="string"?q.ghost:""),x.ghost.appendTo(x.helper)},resize:function(k,x){var q=f(this).data("resizable"),n=q.options;q.ghost&&q.ghost.css({position:"relative",height:q.size.height,width:q.size.width})},stop:function(k,x){var q=f(this).data("resizable"),n=q.options;q.ghost&&q.helper&&q.helper.get(0).removeChild(q.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(F,E){var D=f(this).data("resizable"),C=D.options,B=D.size,A=D.originalSize,z=D.originalPosition,y=D.axis,x=C._aspectRatio||F.shiftKey;C.grid=typeof C.grid=="number"?[C.grid,C.grid]:C.grid;var q=Math.round((B.width-A.width)/(C.grid[0]||1))*(C.grid[0]||1),n=Math.round((B.height-A.height)/(C.grid[1]||1))*(C.grid[1]||1);/^(se|s|e)$/.test(y)?(D.size.width=A.width+q,D.size.height=A.height+n):/^(ne)$/.test(y)?(D.size.width=A.width+q,D.size.height=A.height+n,D.position.top=z.top-n):/^(sw)$/.test(y)?(D.size.width=A.width+q,D.size.height=A.height+n,D.position.left=z.left-q):(D.size.width=A.width+q,D.size.height=A.height+n,D.position.top=z.top-n,D.position.left=z.left-q)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.selectable",f.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var h=this;this.element.addClass("ui-selectable"),this.dragged=!1;var j;this.refresh=function(){j=f(h.options.filter,h.element[0]),j.addClass("ui-selectee"),j.each(function(){var k=f(this),n=k.offset();f.data(this,"selectable-item",{element:this,$element:k,left:n.left,top:n.top,right:n.left+k.outerWidth(),bottom:n.top+k.outerHeight(),startselected:!1,selected:k.hasClass("ui-selected"),selecting:k.hasClass("ui-selecting"),unselecting:k.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=j.addClass("ui-selectee"),this._mouseInit(),this.helper=f("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(h){var k=this;this.opos=[h.pageX,h.pageY];if(this.options.disabled){return}var j=this.options;this.selectees=f(j.filter,this.element[0]),this._trigger("start",h),f(j.appendTo).append(this.helper),this.helper.css({left:h.clientX,top:h.clientY,width:0,height:0}),j.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=f.data(this,"selectable-item");b.startselected=!0,!h.metaKey&&!h.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,k._trigger("unselecting",h,{unselecting:b.element}))}),f(h.target).parents().andSelf().each(function(){var n=f.data(this,"selectable-item");if(n){var b=!h.metaKey&&!h.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),n.unselecting=!b,n.selecting=b,n.selected=b,b?k._trigger("selecting",h,{selecting:n.element}):k._trigger("unselecting",h,{unselecting:n.element}),!1}})},_mouseDrag:function(j){var A=this;this.dragged=!0;if(this.options.disabled){return}var z=this.options,y=this.opos[0],x=this.opos[1],q=j.pageX,n=j.pageY;if(y>q){var k=q;q=y,y=k}if(x>n){var k=n;n=x,x=k}return this.helper.css({left:y,top:x,width:q-y,height:n-x}),this.selectees.each(function(){var h=f.data(this,"selectable-item");if(!h||h.element==A.element[0]){return}var b=!1;z.tolerance=="touch"?b=!(h.left>q||h.right<y||h.top>n||h.bottom<x):z.tolerance=="fit"&&(b=h.left>y&&h.right<q&&h.top>x&&h.bottom<n),b?(h.selected&&(h.$element.removeClass("ui-selected"),h.selected=!1),h.unselecting&&(h.$element.removeClass("ui-unselecting"),h.unselecting=!1),h.selecting||(h.$element.addClass("ui-selecting"),h.selecting=!0,A._trigger("selecting",j,{selecting:h.element}))):(h.selecting&&((j.metaKey||j.ctrlKey)&&h.startselected?(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.$element.addClass("ui-selected"),h.selected=!0):(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.startselected&&(h.$element.addClass("ui-unselecting"),h.unselecting=!0),A._trigger("unselecting",j,{unselecting:h.element}))),h.selected&&!j.metaKey&&!j.ctrlKey&&!h.startselected&&(h.$element.removeClass("ui-selected"),h.selected=!1,h.$element.addClass("ui-unselecting"),h.unselecting=!0,A._trigger("unselecting",j,{unselecting:h.element})))}),!1},_mouseStop:function(h){var k=this;this.dragged=!1;var j=this.options;return f(".ui-unselecting",this.element[0]).each(function(){var b=f.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,k._trigger("unselected",h,{unselected:b.element})}),f(".ui-selecting",this.element[0]).each(function(){var b=f.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,k._trigger("selected",h,{selected:b.element})}),this._trigger("stop",h),this.helper.remove(),!1}}),f.extend(f.ui.selectable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.sortable",f.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){f.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var h=this.items.length-1;h>=0;h--){this.items[h].item.removeData(this.widgetName+"-item")}return this},_setOption:function(h,j){h==="disabled"?(this.options[h]=j,this.widget()[j?"addClass":"removeClass"]("ui-sortable-disabled")):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(j,z){var y=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(j);var x=null,q=this,n=f(j.target).parents().each(function(){if(f.data(this,y.widgetName+"-item")==q){return x=f(this),!1}});f.data(j.target,y.widgetName+"-item")==q&&(x=f(j.target));if(!x){return !1}if(this.options.handle&&!z){var k=!1;f(this.options.handle,x).find("*").andSelf().each(function(){this==j.target&&(k=!0)});if(!k){return !1}}return this.currentItem=x,this._removeCurrentsFromItems(),!0},_mouseStart:function(h,x,q){var n=this.options,k=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(f("body").css("cursor")&&(this._storedCursor=f("body").css("cursor")),f("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!q){for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("activate",h,k._uiHash(this))}}return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!n.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(j){this.position=this._generatePosition(j),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var z=this.options,y=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-j.pageY<z.scrollSensitivity?this.scrollParent[0].scrollTop=y=this.scrollParent[0].scrollTop+z.scrollSpeed:j.pageY-this.overflowOffset.top<z.scrollSensitivity&&(this.scrollParent[0].scrollTop=y=this.scrollParent[0].scrollTop-z.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-j.pageX<z.scrollSensitivity?this.scrollParent[0].scrollLeft=y=this.scrollParent[0].scrollLeft+z.scrollSpeed:j.pageX-this.overflowOffset.left<z.scrollSensitivity&&(this.scrollParent[0].scrollLeft=y=this.scrollParent[0].scrollLeft-z.scrollSpeed)):(j.pageY-f(document).scrollTop()<z.scrollSensitivity?y=f(document).scrollTop(f(document).scrollTop()-z.scrollSpeed):f(window).height()-(j.pageY-f(document).scrollTop())<z.scrollSensitivity&&(y=f(document).scrollTop(f(document).scrollTop()+z.scrollSpeed)),j.pageX-f(document).scrollLeft()<z.scrollSensitivity?y=f(document).scrollLeft(f(document).scrollLeft()-z.scrollSpeed):f(window).width()-(j.pageX-f(document).scrollLeft())<z.scrollSensitivity&&(y=f(document).scrollLeft(f(document).scrollLeft()+z.scrollSpeed))),y!==!1&&f.ui.ddmanager&&!z.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,j)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var x=this.items.length-1;x>=0;x--){var q=this.items[x],n=q.item[0],k=this._intersectsWithPointer(q);if(!k){continue}if(n!=this.currentItem[0]&&this.placeholder[k==1?"next":"prev"]()[0]!=n&&!f.ui.contains(this.placeholder[0],n)&&(this.options.type=="semi-dynamic"?!f.ui.contains(this.element[0],n):!0)){this.direction=k==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(q)){this._rearrange(j,q)}else{break}this._trigger("change",j,this._uiHash());break}}return this._contactContainers(j),f.ui.ddmanager&&f.ui.ddmanager.drag(this,j),this._trigger("sort",j,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,n){if(!h){return}f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,h);if(this.options.revert){var k=this,j=k.placeholder.offset();k.reverting=!0,f(this.helper).animate({left:j.left-this.offset.parent.left-k.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:j.top-this.offset.parent.top-k.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){k._clear(h)})}else{this._clear(h,n)}return !1},cancel:function(){var h=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("deactivate",null,h._uiHash(this)),this.containers[j].containerCache.over&&(this.containers[j]._trigger("out",null,h._uiHash(this)),this.containers[j].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(h){var k=this._getItemsAsjQuery(h&&h.connected),j=[];return h=h||{},f(k).each(function(){var b=(f(h.item||this).attr(h.attribute||"id")||"").match(h.expression||/(.+)[-=_](.+)/);b&&j.push((h.key||b[1]+"[]")+"="+(h.key&&h.expression?b[1]:b[2]))}),!j.length&&h.key&&j.push(h.key+"="),j.join("&")},toArray:function(h){var k=this._getItemsAsjQuery(h&&h.connected),j=[];return h=h||{},k.each(function(){j.push(f(h.item||this).attr(h.attribute||"id")||"")}),j},_intersectsWith:function(G){var F=this.positionAbs.left,E=F+this.helperProportions.width,D=this.positionAbs.top,C=D+this.helperProportions.height,B=G.left,A=B+G.width,z=G.top,y=z+G.height,x=this.offset.click.top,q=this.offset.click.left,n=D+x>z&&D+x<y&&F+q>B&&F+q<A;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>G[this.floating?"width":"height"]?n:B<F+this.helperProportions.width/2&&E-this.helperProportions.width/2<A&&z<D+this.helperProportions.height/2&&C-this.helperProportions.height/2<y},_intersectsWithPointer:function(h){var x=this.options.axis==="x"||f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height),q=this.options.axis==="y"||f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width),n=x&&q,k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return n?this.floating?j&&j=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(h){var q=f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),n=f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return this.floating&&j?j=="right"&&n||j=="left"&&!n:k&&(k=="down"&&q||k=="up"&&!q)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(C){var B=this,A=[],z=[],y=this._connectWith();if(y&&C){for(var x=y.length-1;x>=0;x--){var q=f(y[x]);for(var n=q.length-1;n>=0;n--){var k=f.data(q[n],this.widgetName);k&&k!=this&&!k.options.disabled&&z.push([f.isFunction(k.options.items)?k.options.items.call(k.element):f(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}z.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var x=z.length-1;x>=0;x--){z[x][0].each(function(){A.push(this)})}return f(A)},_removeCurrentsFromItems:function(){var j=this.currentItem.find(":data("+this.widgetName+"-item)");for(var h=0;h<this.items.length;h++){for(var k=0;k<j.length;k++){j[k]==this.items[h].item[0]&&this.items.splice(h,1)}}},_refreshItems:function(I){this.items=[],this.containers=[this];var H=this.items,G=this,F=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],I,{item:this.currentItem}):f(this.options.items,this.element),this]],E=this._connectWith();if(E&&this.ready){for(var D=E.length-1;D>=0;D--){var C=f(E[D]);for(var B=C.length-1;B>=0;B--){var A=f.data(C[B],this.widgetName);A&&A!=this&&!A.options.disabled&&(F.push([f.isFunction(A.options.items)?A.options.items.call(A.element[0],I,{item:this.currentItem}):f(A.options.items,A.element),A]),this.containers.push(A))}}}for(var D=F.length-1;D>=0;D--){var z=F[D][1],y=F[D][0];for(var B=0,x=y.length;B<x;B++){var q=f(y[B]);q.data(this.widgetName+"-item",z),H.push({item:q,instance:z,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var q=this.items.length-1;q>=0;q--){var n=this.items[q];if(n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0]){continue}var k=this.options.toleranceElement?f(this.options.toleranceElement,n.item):n.item;h||(n.width=k.outerWidth(),n.height=k.outerHeight());var j=k.offset();n.left=j.left,n.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var q=this.containers.length-1;q>=0;q--){var j=this.containers[q].element.offset();this.containers[q].containerCache.left=j.left,this.containers[q].containerCache.top=j.top,this.containers[q].containerCache.width=this.containers[q].element.outerWidth(),this.containers[q].containerCache.height=this.containers[q].element.outerHeight()}}return this},_createPlaceholder:function(h){var n=h||this,k=n.options;if(!k.placeholder||k.placeholder.constructor==String){var j=k.placeholder;k.placeholder={element:function(){var q=f(document.createElement(n.currentItem[0].nodeName)).addClass(j||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return j||(q.style.visibility="hidden"),q},update:function(x,q){if(j&&!k.forcePlaceholderSize){return}q.height()||q.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),q.width()||q.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=f(k.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),k.placeholder.update(n,n.placeholder)},_contactContainers:function(C){var B=null,A=null;for(var z=this.containers.length-1;z>=0;z--){if(f.ui.contains(this.currentItem[0],this.containers[z].element[0])){continue}if(this._intersectsWith(this.containers[z].containerCache)){if(B&&f.ui.contains(this.containers[z].element[0],B.element[0])){continue}B=this.containers[z],A=z}else{this.containers[z].containerCache.over&&(this.containers[z]._trigger("out",C,this._uiHash(this)),this.containers[z].containerCache.over=0)}}if(!B){return}if(this.containers.length===1){this.containers[A]._trigger("over",C,this._uiHash(this)),this.containers[A].containerCache.over=1}else{if(this.currentContainer!=this.containers[A]){var y=10000,x=null,q=this.positionAbs[this.containers[A].floating?"left":"top"];for(var n=this.items.length-1;n>=0;n--){if(!f.ui.contains(this.containers[A].element[0],this.items[n].item[0])){continue}var k=this.containers[A].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;Math.abs(k-q)<y&&(y=Math.abs(k-q),x=this.items[n],this.direction=k-q>0?"down":"up")}if(!x&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[A],x?this._rearrange(C,x,null,!0):this._rearrange(C,null,this.containers[A].element,!0),this._trigger("change",C,this._uiHash()),this.containers[A]._trigger("change",C,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[A]._trigger("over",C,this._uiHash(this)),this.containers[A].containerCache.over=1}}},_createHelper:function(h){var k=this.options,j=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[h,this.currentItem])):k.helper=="clone"?this.currentItem.clone():this.currentItem;return j.parents("body").length||f(k.appendTo!="parent"?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(j[0]),j[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(j[0].style.width==""||k.forceHelperSize)&&j.width(this.currentItem.width()),(j[0].style.height==""||k.forceHelperSize)&&j.height(this.currentItem.height()),j},_adjustOffsetFromHelper:function(h){typeof h=="string"&&(h=h.split(" ")),f.isArray(h)&&(h={left:+h[0],top:+h[1]||0}),"left" in h&&(this.offset.click.left=h.left+this.margins.left),"right" in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left),"top" in h&&(this.offset.click.top=h.top+this.margins.top),"bottom" in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&f.browser.msie){h={top:0,left:0}}return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(f(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)){var n=f(h.containment)[0],k=f(h.containment).offset(),j=f(n).css("overflow")!="hidden";this.containment=[k.left+(parseInt(f(n).css("borderLeftWidth"),10)||0)+(parseInt(f(n).css("paddingLeft"),10)||0)-this.margins.left,k.top+(parseInt(f(n).css("borderTopWidth"),10)||0)+(parseInt(f(n).css("paddingTop"),10)||0)-this.margins.top,k.left+(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(f(n).css("borderLeftWidth"),10)||0)-(parseInt(f(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,k.top+(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(f(n).css("borderTopWidth"),10)||0)-(parseInt(f(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,x){x||(x=this.position);var q=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:x.top+this.offset.relative.top*q+this.offset.parent.top*q-(f.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*q),left:x.left+this.offset.relative.left*q+this.offset.parent.left*q-(f.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*q)}},_generatePosition:function(j){var A=this.options,z=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,y=/(html|body)/i.test(z[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var x=j.pageX,q=j.pageY;if(this.originalPosition){this.containment&&(j.pageX-this.offset.click.left<this.containment[0]&&(x=this.containment[0]+this.offset.click.left),j.pageY-this.offset.click.top<this.containment[1]&&(q=this.containment[1]+this.offset.click.top),j.pageX-this.offset.click.left>this.containment[2]&&(x=this.containment[2]+this.offset.click.left),j.pageY-this.offset.click.top>this.containment[3]&&(q=this.containment[3]+this.offset.click.top));if(A.grid){var n=this.originalPageY+Math.round((q-this.originalPageY)/A.grid[1])*A.grid[1];q=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?n+A.grid[1]:n-A.grid[1]:n:n;var k=this.originalPageX+Math.round((x-this.originalPageX)/A.grid[0])*A.grid[0];x=this.containment?k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2]?k-this.offset.click.left<this.containment[0]?k+A.grid[0]:k-A.grid[0]:k:k}}return{top:q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(f.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():y?0:z.scrollTop()),left:x-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(f.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():y?0:z.scrollLeft())}},_rearrange:function(j,h,x,q){x?x[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,k=this.counter;window.setTimeout(function(){k==n.counter&&n.refreshPositions(!q)},0)},_clear:function(h,q){this.reverting=!1;var n=[],k=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var j in this._storedCSS){if(this._storedCSS[j]=="auto"||this._storedCSS[j]=="static"){this._storedCSS[j]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!q&&n.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!q&&n.push(function(b){this._trigger("update",b,this._uiHash())});if(!f.ui.contains(this.element[0],this.currentItem[0])){q||n.push(function(b){this._trigger("remove",b,this._uiHash())});for(var j=this.containers.length-1;j>=0;j--){f.ui.contains(this.containers[j].element[0],this.currentItem[0])&&!q&&(n.push(function(b){return function(x){b._trigger("receive",x,this._uiHash(this))}}.call(this,this.containers[j])),n.push(function(b){return function(x){b._trigger("update",x,this._uiHash(this))}}.call(this,this.containers[j])))}}for(var j=this.containers.length-1;j>=0;j--){q||n.push(function(b){return function(x){b._trigger("deactivate",x,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over&&(n.push(function(b){return function(x){b._trigger("out",x,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over=0)}this._storedCursor&&f("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!q){this._trigger("beforeStop",h,this._uiHash());for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return !1}q||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!q){for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){f.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(h){var j=h||this;return{helper:j.helper,placeholder:j.placeholder||f([]),position:j.position,originalPosition:j.originalPosition,offset:j.positionAbs,item:j.currentItem,sender:h?h.element:null}}}),f.extend(f.ui.sortable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var h=this,n=h.options;h.running=0,h.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),h.headers=h.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(n.disabled){return}f(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled){return}f(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled){return}f(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled){return}f(this).removeClass("ui-state-focus")}),h.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var k=h.element.find("a").filter(n.navigationFilter).eq(0);if(k.length){var j=k.closest(".ui-accordion-header");j.length?h.active=j:h.active=k.closest(".ui-accordion-content").prev()}}h.active=h._findActive(h.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),h.active.next().addClass("ui-accordion-content-active"),h._createIcons(),h.resize(),h.element.attr("role","tablist"),h.headers.attr("role","tab").bind("keydown.accordion",function(b){return h._keydown(b)}).next().attr("role","tabpanel"),h.headers.not(h.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),h.active.length?h.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):h.headers.eq(0).attr("tabIndex",0),f.browser.safari||h.headers.find("a").attr("tabIndex",-1),n.event&&h.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(b){h._clickHandler.call(h,b,this),b.preventDefault()})},_createIcons:function(){var h=this.options;h.icons&&(f("<span></span>").addClass("ui-icon "+h.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(h.icons.header).toggleClass(h.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var h=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var j=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(h.autoHeight||h.fillHeight)&&j.css("height",""),f.Widget.prototype.destroy.call(this)},_setOption:function(h,j){f.Widget.prototype._setOption.apply(this,arguments),h=="active"&&this.activate(j),h=="icons"&&(this._destroyIcons(),j&&this._createIcons()),h=="disabled"&&this.headers.add(this.headers.next())[j?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(this.options.disabled||h.altKey||h.ctrlKey){return}var q=f.ui.keyCode,n=this.headers.length,k=this.headers.index(h.target),j=!1;switch(h.keyCode){case q.RIGHT:case q.DOWN:j=this.headers[(k+1)%n];break;case q.LEFT:case q.UP:j=this.headers[(k-1+n)%n];break;case q.SPACE:case q.ENTER:this._clickHandler({target:h.target},h.target),h.preventDefault()}return j?(f(h.target).attr("tabIndex",-1),f(j).attr("tabIndex",0),j.focus(),!1):!0},resize:function(){var h=this.options,k;if(h.fillSpace){if(f.browser.msie){var j=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}k=this.element.parent().height(),f.browser.msie&&this.element.parent().css("overflow",j),this.headers.each(function(){k-=f(this).outerHeight(!0)}),this.headers.next().each(function(){f(this).height(Math.max(0,k-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")}else{h.autoHeight&&(k=0,this.headers.next().each(function(){k=Math.max(k,f(this).height("").height())}).height(k))}return this},activate:function(j){this.options.active=j;var h=this._findActive(j)[0];return this._clickHandler({target:h},h),this},_findActive:function(h){return h?typeof h=="number"?this.headers.filter(":eq("+h+")"):this.headers.not(this.headers.not(h)):h===!1?f([]):this.headers.filter(":eq(0)")},_clickHandler:function(E,D){var C=this.options;if(C.disabled){return}if(!E.target){if(!C.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(C.icons.headerSelected).addClass(C.icons.header),this.active.next().addClass("ui-accordion-content-active");var B=this.active.next(),A={options:C,newHeader:f([]),oldHeader:C.active,newContent:f([]),oldContent:B},z=this.active=f([]);this._toggle(z,B,A);return}var y=f(E.currentTarget||D),x=y[0]===this.active[0];C.active=C.collapsible&&x?!1:this.headers.index(y);if(this.running||!C.collapsible&&x){return}var q=this.active,z=y.next(),B=this.active.next(),A={options:C,newHeader:x&&C.collapsible?f([]):y,oldHeader:this.active,newContent:x&&C.collapsible?f([]):z,oldContent:B},n=this.headers.index(this.active[0])>this.headers.index(y[0]);this.active=x?f([]):y,this._toggle(z,B,A,x,n),q.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(C.icons.headerSelected).addClass(C.icons.header),x||(y.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(C.icons.header).addClass(C.icons.headerSelected),y.next().addClass("ui-accordion-content-active"));return},_toggle:function(G,F,E,D,C){var B=this,A=B.options;B.toShow=G,B.toHide=F,B.data=E;var z=function(){if(!B){return}return B._completed.apply(B,arguments)};B._trigger("changestart",null,B.data),B.running=F.size()===0?G.size():F.size();if(A.animated){var y={};A.collapsible&&D?y={toShow:f([]),toHide:F,complete:z,down:C,autoHeight:A.autoHeight||A.fillSpace}:y={toShow:G,toHide:F,complete:z,down:C,autoHeight:A.autoHeight||A.fillSpace},A.proxied||(A.proxied=A.animated),A.proxiedDuration||(A.proxiedDuration=A.duration),A.animated=f.isFunction(A.proxied)?A.proxied(y):A.proxied,A.duration=f.isFunction(A.proxiedDuration)?A.proxiedDuration(y):A.proxiedDuration;var x=f.ui.accordion.animations,q=A.duration,n=A.animated;n&&!x[n]&&!f.easing[n]&&(n="slide"),x[n]||(x[n]=function(b){this.slide(b,{easing:n,duration:q||700})}),x[n](y)}else{A.collapsible&&D?G.toggle():(F.hide(),G.show()),z(!0)}F.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),G.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),f.extend(f.ui.accordion,{version:"1.8.21",animations:{slide:function(C,B){C=f.extend({easing:"swing",duration:300},C,B);if(!C.toHide.size()){C.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},C);return}if(!C.toShow.size()){C.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},C);return}var A=C.toShow.css("overflow"),z=0,y={},x={},q=["height","paddingTop","paddingBottom"],n,k=C.toShow;n=k[0].style.width,k.width(k.parent().width()-parseFloat(k.css("paddingLeft"))-parseFloat(k.css("paddingRight"))-(parseFloat(k.css("borderLeftWidth"))||0)-(parseFloat(k.css("borderRightWidth"))||0)),f.each(q,function(j,h){x[h]="hide";var b=(""+f.css(C.toShow[0],h)).match(/^([\d+-.]+)(.*)$/);y[h]={value:b[1],unit:b[2]||"px"}}),C.toShow.css({height:0,overflow:"hidden"}).show(),C.toHide.filter(":hidden").each(C.complete).end().filter(":visible").animate(x,{step:function(b,h){h.prop=="height"&&(z=h.end-h.start===0?0:(h.now-h.start)/(h.end-h.start)),C.toShow[0].style[h.prop]=z*y[h.prop].value+y[h.prop].unit},duration:C.duration,easing:C.easing,complete:function(){C.autoHeight||C.toShow.css("height",""),C.toShow.css({width:n,overflow:A}),C.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=0;f.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var j=this,n=this.element[0].ownerDocument,k;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(q){if(j.options.disabled||j.element.propAttr("readOnly")){return}k=!1;var b=f.ui.keyCode;switch(q.keyCode){case b.PAGE_UP:j._move("previousPage",q);break;case b.PAGE_DOWN:j._move("nextPage",q);break;case b.UP:j._keyEvent("previous",q);break;case b.DOWN:j._keyEvent("next",q);break;case b.ENTER:case b.NUMPAD_ENTER:j.menu.active&&(k=!0,q.preventDefault());case b.TAB:if(!j.menu.active){return}j.menu.select(q);break;case b.ESCAPE:j.element.val(j.term),j.close(q);break;default:clearTimeout(j.searching),j.searching=setTimeout(function(){j.term!=j.element.val()&&(j.selectedItem=null,j.search(null,q))},j.options.delay)}}).bind("keypress.autocomplete",function(b){k&&(k=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(j.options.disabled){return}j.selectedItem=null,j.previous=j.element.val()}).bind("blur.autocomplete",function(b){if(j.options.disabled){return}clearTimeout(j.searching),j.closing=setTimeout(function(){j.close(b),j._change(b)},150)}),this._initSource(),this.menu=f("<ul></ul>").addClass("ui-autocomplete").appendTo(f(this.options.appendTo||"body",n)[0]).mousedown(function(q){var b=j.menu.element[0];f(q.target).closest(".ui-menu-item").length||setTimeout(function(){f(document).one("mousedown",function(x){x.target!==j.element[0]&&x.target!==b&&!f.ui.contains(b,x.target)&&j.close()})},1),setTimeout(function(){clearTimeout(j.closing)},13)}).menu({focus:function(b,x){var q=x.item.data("item.autocomplete");!1!==j._trigger("focus",b,{item:q})&&/^key/.test(b.originalEvent.type)&&j.element.val(q.value)},selected:function(b,y){var x=y.item.data("item.autocomplete"),q=j.previous;j.element[0]!==n.activeElement&&(j.element.focus(),j.previous=q,setTimeout(function(){j.previous=q,j.selectedItem=x},1)),!1!==j._trigger("select",b,{item:x})&&j.element.val(x.value),j.term=j.element.val(),j.close(b),j.selectedItem=x},blur:function(b,q){j.menu.element.is(":visible")&&j.element.val()!==j.term&&j.element.val(j.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),f.fn.bgiframe&&this.menu.element.bgiframe(),j.beforeunloadHandler=function(){j.element.removeAttr("autocomplete")},f(window).bind("beforeunload",j.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),f(window).unbind("beforeunload",this.beforeunloadHandler),f.Widget.prototype.destroy.call(this)},_setOption:function(j,k){f.Widget.prototype._setOption.apply(this,arguments),j==="source"&&this._initSource(),j==="appendTo"&&this.menu.element.appendTo(f(k||"body",this.element[0].ownerDocument)[0]),j==="disabled"&&k&&this.xhr&&this.xhr.abort()},_initSource:function(){var j=this,n,k;f.isArray(this.options.source)?(n=this.options.source,this.source=function(q,x){x(f.ui.autocomplete.filter(n,q.term))}):typeof this.options.source=="string"?(k=this.options.source,this.source=function(q,b){j.xhr&&j.xhr.abort(),j.xhr=f.ajax({url:k,data:q,dataType:"json",success:function(y,x){b(y)},error:function(){b([])}})}):this.source=this.options.source},search:function(k,j){k=k!=null?k:this.element.val(),this.term=this.element.val();if(k.length<this.options.minLength){return this.close(j)}clearTimeout(this.closing);if(this._trigger("search",j)===!1){return}return this._search(k)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var k=this,j=++h;return function(b){j===h&&k.__response(b),k.pending--,k.pending||k.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(j){return j.length&&j[0].label&&j[0].value?j:f.map(j,function(k){return typeof k=="string"?{label:k,value:k}:f.extend({label:k.label||k.value,value:k.value||k.label},k)})},_suggest:function(j){var k=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(k,j),this.menu.deactivate(),this.menu.refresh(),k.show(),this._resizeMenu(),k.position(f.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new f.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(j,n){var k=this;f.each(n,function(b,q){k._renderItem(j,q)})},_renderItem:function(j,k){return f("<li></li>").data("item.autocomplete",k).append(f("<a></a>").text(k.label)).appendTo(j)},_move:function(k,j){if(!this.menu.element.is(":visible")){this.search(null,j);return}if(this.menu.first()&&/^previous/.test(k)||this.menu.last()&&/^next/.test(k)){this.element.val(this.term),this.menu.deactivate();return}this.menu[k](j)},widget:function(){return this.menu.element},_keyEvent:function(k,j){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(k,j),j.preventDefault()}}}),f.extend(f.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(j,n){var k=new RegExp(f.ui.autocomplete.escapeRegex(n),"i");return f.grep(j,function(b){return k.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(f){if(!b(f.target).closest(".ui-menu-item a").length){return}f.preventDefault(),e.select(f)}),this.refresh()},refresh:function(){var e=this,f=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");f.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(h){e.activate(h,b(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var n=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();n<0?this.element.scrollTop(k+n):n>=j&&this.element.scrollTop(k+n-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(".ui-menu-item:first"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var e=b(this).offset().top-k-j+b(this).height();return e<10&&e>-10});h.length||(h=this.element.children(".ui-menu-item:last")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var e=b(this).offset().top-k+j-b(this).height();return e<10&&e>-10});h.length||(h=this.element.children(".ui-menu-item:first")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(F,E){var D,C,B,A,z="ui-button ui-widget ui-state-default ui-corner-all",y="ui-state-hover ui-state-active ",x="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",q=function(){var e=F(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},n=function(f){var k=f.name,j=f.form,h=F([]);return k&&(j?h=F(j).find("[name='"+k+"']"):h=F("[name='"+k+"']",f.ownerDocument).filter(function(){return !this.form})),h};F.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",q),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var f=this,G=this.options,k=this.type==="checkbox"||this.type==="radio",j="ui-state-hover"+(k?"":" ui-state-active"),e="ui-state-focus";G.label===null&&(G.label=this.buttonElement.html()),this.buttonElement.addClass(z).attr("role","button").bind("mouseenter.button",function(){if(G.disabled){return}F(this).addClass("ui-state-hover"),this===D&&F(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(G.disabled){return}F(this).removeClass(j)}).bind("click.button",function(b){G.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){f.buttonElement.addClass(e)}).bind("blur.button",function(){f.buttonElement.removeClass(e)}),k&&(this.element.bind("change.button",function(){if(A){return}f.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(G.disabled){return}A=!1,C=b.pageX,B=b.pageY}).bind("mouseup.button",function(b){if(G.disabled){return}if(C!==b.pageX||B!==b.pageY){A=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(G.disabled||A){return !1}F(this).toggleClass("ui-state-active"),f.buttonElement.attr("aria-pressed",f.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(G.disabled||A){return !1}F(this).addClass("ui-state-active"),f.buttonElement.attr("aria-pressed","true");var b=f.element[0];n(b).not(b).map(function(){return F(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(G.disabled){return !1}F(this).addClass("ui-state-active"),D=this,F(document).one("mouseup",function(){D=null})}).bind("mouseup.button",function(){if(G.disabled){return !1}F(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(G.disabled){return !1}(h.keyCode==F.ui.keyCode.SPACE||h.keyCode==F.ui.keyCode.ENTER)&&F(this).addClass("ui-state-active")}).bind("keyup.button",function(){F(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===F.ui.keyCode.SPACE&&F(this).click()})),this._setOption("disabled",G.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var f=this.element.parents().filter(":last"),e="label[for='"+this.element.attr("id")+"']";this.buttonElement=f.find(e),this.buttonElement.length||(f=f.length?f.siblings():this.element.siblings(),this.buttonElement=f.filter(e),this.buttonElement.length||(this.buttonElement=f.find(e))),this.element.addClass("ui-helper-hidden-accessible");var h=this.element.is(":checked");h&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",h)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(z+" "+y+" "+x).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),F.Widget.prototype.destroy.call(this)},_setOption:function(e,f){F.Widget.prototype._setOption.apply(this,arguments);if(e==="disabled"){f?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var e=this.element.is(":disabled");e!==this.options.disabled&&this._setOption("disabled",e),this.type==="radio"?n(this.element[0]).each(function(){F(this).is(":checked")?F(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):F(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var h=this.buttonElement.removeClass(x),H=F("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(h.empty()).text(),G=this.options.icons,k=G.primary&&G.secondary,j=[];G.primary||G.secondary?(this.options.text&&j.push("ui-button-text-icon"+(k?"s":G.primary?"-primary":"-secondary")),G.primary&&h.prepend("<span class='ui-button-icon-primary ui-icon "+G.primary+"'></span>"),G.secondary&&h.append("<span class='ui-button-icon-secondary ui-icon "+G.secondary+"'></span>"),this.options.text||(j.push(k?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||h.attr("title",H))):j.push("ui-button-text-only"),h.addClass(j.join(" "))}}),F.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,f){e==="disabled"&&this.buttons.button("option",e,f),F.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var e=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),F.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var x="ui-dialog ui-widget ui-widget-content ui-corner-all ",q={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var f=j(this).css(e).offset().top;f<0&&j(this).css("top",e.top-f)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var H=this,G=H.options,F=G.title||"&#160;",E=j.ui.dialog.getTitleId(H.element),D=(H.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(x+G.dialogClass).css({zIndex:G.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){G.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(H.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":E}).mousedown(function(b){H.moveToTop(!1,b)}),C=H.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(D),B=(H.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(D),A=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){A.addClass("ui-state-hover")},function(){A.removeClass("ui-state-hover")}).focus(function(){A.addClass("ui-state-focus")}).blur(function(){A.removeClass("ui-state-focus")}).click(function(b){return H.close(b),!1}).appendTo(B),z=(H.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(G.closeText).appendTo(A),y=j("<span></span>").addClass("ui-dialog-title").attr("id",E).html(F).prependTo(B);j.isFunction(G.beforeclose)&&!j.isFunction(G.beforeClose)&&(G.beforeClose=G.beforeclose),B.find("*").add(B).disableSelection(),G.draggable&&j.fn.draggable&&H._makeDraggable(),G.resizable&&j.fn.resizable&&H._makeResizable(),H._createButtons(G.buttons),H._isOpen=!1,j.fn.bgiframe&&D.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(f){var A=this,z,y;if(!1===A._trigger("beforeClose",f)){return}return A.overlay&&A.overlay.destroy(),A.uiDialog.unbind("keypress.ui-dialog"),A._isOpen=!1,A.options.hide?A.uiDialog.hide(A.options.hide,function(){A._trigger("close",f)}):(A.uiDialog.hide(),A._trigger("close",f)),j.ui.dialog.overlay.resize(),A.options.modal&&(z=0,j(".ui-dialog").each(function(){this!==A.uiDialog[0]&&(y=j(this).css("z-index"),isNaN(y)||(z=Math.max(z,y)))}),j.ui.dialog.maxZ=z),A},isOpen:function(){return this._isOpen},moveToTop:function(y,C){var B=this,A=B.options,z;return A.modal&&!y||!A.stack&&!A.modal?B._trigger("focus",C):(A.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=A.zIndex),B.overlay&&(j.ui.dialog.maxZ+=1,B.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),z={scrollTop:B.element.scrollTop(),scrollLeft:B.element.scrollLeft()},j.ui.dialog.maxZ+=1,B.uiDialog.css("z-index",j.ui.dialog.maxZ),B.element.attr(z),B._trigger("focus",C),B)},open:function(){if(this._isOpen){return}var e=this,y=e.options,f=e.uiDialog;return e.overlay=y.modal?new j.ui.dialog.overlay(e):null,e._size(),e._position(y.position),f.show(y.show),e.moveToTop(!0),y.modal&&f.bind("keydown.ui-dialog",function(z){if(z.keyCode!==j.ui.keyCode.TAB){return}var C=j(":tabbable",this),B=C.filter(":first"),A=C.filter(":last");if(z.target===A[0]&&!z.shiftKey){return B.focus(1),!1}if(z.target===B[0]&&z.shiftKey){return A.focus(1),!1}}),j(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e},_createButtons:function(f){var B=this,A=!1,z=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),y=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(z);B.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof f=="object"&&f!==null&&j.each(f,function(){return !(A=!0)}),A&&(j.each(f,function(C,E){E=j.isFunction(E)?{click:E,text:C}:E;var D=j('<button type="button"></button>').click(function(){E.click.apply(B.element[0],arguments)}).appendTo(y);j.each(E,function(F,e){if(F==="click"){return}F in k?D[F](e):D.attr(F,e)}),j.fn.button&&D.button()}),z.appendTo(B.uiDialog))},_makeDraggable:function(){function z(b){return{position:b.position,offset:b.offset}}var y=this,C=y.options,B=j(document),A;y.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,b){A=C.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),y._trigger("dragStart",e,z(b))},drag:function(b,e){y._trigger("drag",b,z(e))},stop:function(e,b){C.position=[b.position.left-B.scrollLeft(),b.position.top-B.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(A),y._trigger("dragStop",e,z(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(C){function b(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}C=C===h?this.options.resizable:C;var B=this,A=B.options,z=B.uiDialog.css("position"),y=typeof C=="string"?C:"n,e,s,w,se,sw,ne,nw";B.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:B.element,maxWidth:A.maxWidth,maxHeight:A.maxHeight,minWidth:A.minWidth,minHeight:B._minHeight(),handles:y,start:function(e,f){j(this).addClass("ui-dialog-resizing"),B._trigger("resizeStart",e,b(f))},resize:function(f,e){B._trigger("resize",f,b(e))},stop:function(e,f){j(this).removeClass("ui-dialog-resizing"),A.height=j(this).height(),A.width=j(this).width(),B._trigger("resizeStop",e,b(f)),j.ui.dialog.overlay.resize()}}).css("position",z).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var A=[],z=[0,0],y;if(f){if(typeof f=="string"||typeof f=="object"&&"0" in f){A=f.split?f.split(" "):[f[0],f[1]],A.length===1&&(A[1]=A[0]),j.each(["left","top"],function(B,e){+A[B]===A[B]&&(z[B]=A[B],A[B]=e)}),f={my:A.join(" "),at:A.join(" "),offset:z.join(" ")}}f=j.extend({},j.ui.dialog.prototype.options.position,f)}else{f=j.ui.dialog.prototype.options.position}y=this.uiDialog.is(":visible"),y||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},f)),y||this.uiDialog.hide()},_setOptions:function(e){var A=this,z={},y=!1;j.each(e,function(B,f){A._setOption(B,f),B in q&&(y=!0),B in n&&(z[B]=f)}),y&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",z)},_setOption:function(y,D){var C=this,B=C.uiDialog;switch(y){case"beforeclose":y="beforeClose";break;case"buttons":C._createButtons(D);break;case"closeText":C.uiDialogTitlebarCloseText.text(""+D);break;case"dialogClass":B.removeClass(C.options.dialogClass).addClass(x+D);break;case"disabled":D?B.addClass("ui-dialog-disabled"):B.removeClass("ui-dialog-disabled");break;case"draggable":var A=B.is(":data(draggable)");A&&!D&&B.draggable("destroy"),!A&&D&&C._makeDraggable();break;case"position":C._position(D);break;case"resizable":var z=B.is(":data(resizable)");z&&!D&&B.resizable("destroy"),z&&typeof D=="string"&&B.resizable("option","handles",D),!z&&D!==!1&&C._makeResizable(D);break;case"title":j(".ui-dialog-title",C.uiDialogTitlebar).html(""+(D||"&#160;"))}j.Widget.prototype._setOption.apply(C,arguments)},_size:function(){var y=this.options,C,B,A=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),y.minWidth>y.width&&(y.width=y.minWidth),C=this.uiDialog.css({height:"auto",width:y.width}).height(),B=Math.max(0,y.minHeight-C);if(y.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:B,height:"auto"})}else{this.uiDialog.show();var z=this.element.css("height","auto").height();A||this.uiDialog.hide(),this.element.height(Math.max(z,B))}}else{this.element.height(Math.max(y.height-C,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(f){var e=f.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=j.ui.dialog.overlay.create(e)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(e){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(y){if(j(y.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){e.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(e.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var f=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&f.bgiframe(),this.instances.push(f),f},destroy:function(e){var y=j.inArray(e,this.instances);y!=-1&&this.oldInstances.push(this.instances.splice(y,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),e.remove();var f=0;j.each(this.instances,function(){f=Math.max(f,this.css("z-index"))}),this.maxZ=f},height:function(){var e,f;return j.browser.msie&&j.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<f?j(window).height()+"px":e+"px"):j(document).height()+"px"},width:function(){var e,f;return j.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),f=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<f?j(window).width()+"px":e+"px"):j(document).width()+"px"},resize:function(){var e=j([]);j.each(j.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=5;f.widget("ui.slider",f.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var j=this,z=this.options,y=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),x="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",q=z.values&&z.values.length||1,n=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(z.disabled?" ui-slider-disabled ui-disabled":"")),this.range=f([]),z.range&&(z.range===!0&&(z.values||(z.values=[this._valueMin(),this._valueMin()]),z.values.length&&z.values.length!==2&&(z.values=[z.values[0],z.values[0]])),this.range=f("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(z.range==="min"||z.range==="max"?" ui-slider-range-"+z.range:"")));for(var k=y.length;k<q;k+=1){n.push(x)}this.handles=y.add(f(n.join("")).appendTo(j.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){z.disabled||f(this).addClass("ui-state-hover")},function(){f(this).removeClass("ui-state-hover")}).focus(function(){z.disabled?f(this).blur():(f(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),f(this).addClass("ui-state-focus"))}).blur(function(){f(this).removeClass("ui-state-focus")}),this.handles.each(function(A){f(this).data("index.ui-slider-handle",A)}),this.handles.keydown(function(E){var D=f(this).data("index.ui-slider-handle"),C,B,A,b;if(j.options.disabled){return}switch(E.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:E.preventDefault();if(!j._keySliding){j._keySliding=!0,f(this).addClass("ui-state-active"),C=j._start(E,D);if(C===!1){return}}}b=j.options.step,j.options.values&&j.options.values.length?B=A=j.values(D):B=A=j.value();switch(E.keyCode){case f.ui.keyCode.HOME:A=j._valueMin();break;case f.ui.keyCode.END:A=j._valueMax();break;case f.ui.keyCode.PAGE_UP:A=j._trimAlignValue(B+(j._valueMax()-j._valueMin())/h);break;case f.ui.keyCode.PAGE_DOWN:A=j._trimAlignValue(B-(j._valueMax()-j._valueMin())/h);break;case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:if(B===j._valueMax()){return}A=j._trimAlignValue(B+b);break;case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(B===j._valueMin()){return}A=j._trimAlignValue(B-b)}j._slide(E,D,A)}).keyup(function(A){var b=f(this).data("index.ui-slider-handle");j._keySliding&&(j._keySliding=!1,j._stop(A,b),j._change(A,b),f(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(F){var E=this.options,D,C,B,A,z,y,x,q,n;return E.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),D={x:F.pageX,y:F.pageY},C=this._normValueFromMouse(D),B=this._valueMax()-this._valueMin()+1,z=this,this.handles.each(function(j){var k=Math.abs(C-z.values(j));B>k&&(B=k,A=f(this),y=j)}),E.range===!0&&this.values(1)===E.min&&(y+=1,A=f(this.handles[y])),x=this._start(F,y),x===!1?!1:(this._mouseSliding=!0,z._handleIndex=y,A.addClass("ui-state-active").focus(),q=A.offset(),n=!f(F.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:F.pageX-q.left-A.width()/2,top:F.pageY-q.top-A.height()/2-(parseInt(A.css("borderTopWidth"),10)||0)-(parseInt(A.css("borderBottomWidth"),10)||0)+(parseInt(A.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(F,y,C),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(k){var j={x:k.pageX,y:k.pageY},n=this._normValueFromMouse(j);return this._slide(k,this._handleIndex,n),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(k){var j,y,x,q,n;return this.orientation==="horizontal"?(j=this.elementSize.width,y=k.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(j=this.elementSize.height,y=k.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),x=y/j,x>1&&(x=1),x<0&&(x=0),this.orientation==="vertical"&&(x=1-x),q=this._valueMax()-this._valueMin(),n=this._valueMin()+x*q,this._trimAlignValue(n)},_start:function(k,j){var n={handle:this.handles[j],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("start",k,n)},_slide:function(k,j,y){var x,q,n;this.options.values&&this.options.values.length?(x=this.values(j?0:1),this.options.values.length===2&&this.options.range===!0&&(j===0&&y>x||j===1&&y<x)&&(y=x),y!==this.values(j)&&(q=this.values(),q[j]=y,n=this._trigger("slide",k,{handle:this.handles[j],value:y,values:q}),x=this.values(j?0:1),n!==!1&&this.values(j,y,!0))):y!==this.value()&&(n=this._trigger("slide",k,{handle:this.handles[j],value:y}),n!==!1&&this.value(y))},_stop:function(k,j){var n={handle:this.handles[j],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("stop",k,n)},_change:function(k,j){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[j],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("change",k,n)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(j,x){var q,n,k;if(arguments.length>1){this.options.values[j]=this._trimAlignValue(x),this._refreshValue(),this._change(null,j);return}if(!arguments.length){return this._values()}if(!f.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(j):this.value()}q=this.options.values,n=arguments[0];for(k=0;k<q.length;k+=1){q[k]=this._trimAlignValue(n[k]),this._change(null,k)}this._refreshValue()},_setOption:function(j,q){var n,k=0;f.isArray(this.options.values)&&(k=this.options.values.length),f.Widget.prototype._setOption.apply(this,arguments);switch(j){case"disabled":q?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(n=0;n<k;n+=1){this._change(null,n)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(k){var j,q,n;if(arguments.length){return j=this.options.values[k],j=this._trimAlignValue(j),j}q=this.options.values.slice();for(n=0;n<q.length;n+=1){q[n]=this._trimAlignValue(q[n])}return q},_trimAlignValue:function(k){if(k<=this._valueMin()){return this._valueMin()}if(k>=this._valueMax()){return this._valueMax()}var j=this.options.step>0?this.options.step:1,q=(k-this._valueMin())%j,n=k-q;return Math.abs(q)*2>=j&&(n+=q>0?j:-j),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var E=this.options.range,D=this.options,C=this,B=this._animateOff?!1:D.animate,A,z={},y,x,q,n;this.options.values&&this.options.values.length?this.handles.each(function(j,k){A=(C.values(j)-C._valueMin())/(C._valueMax()-C._valueMin())*100,z[C.orientation==="horizontal"?"left":"bottom"]=A+"%",f(this).stop(1,1)[B?"animate":"css"](z,D.animate),C.options.range===!0&&(C.orientation==="horizontal"?(j===0&&C.range.stop(1,1)[B?"animate":"css"]({left:A+"%"},D.animate),j===1&&C.range[B?"animate":"css"]({width:A-y+"%"},{queue:!1,duration:D.animate})):(j===0&&C.range.stop(1,1)[B?"animate":"css"]({bottom:A+"%"},D.animate),j===1&&C.range[B?"animate":"css"]({height:A-y+"%"},{queue:!1,duration:D.animate}))),y=A}):(x=this.value(),q=this._valueMin(),n=this._valueMax(),A=n!==q?(x-q)/(n-q)*100:0,z[C.orientation==="horizontal"?"left":"bottom"]=A+"%",this.handle.stop(1,1)[B?"animate":"css"](z,D.animate),E==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[B?"animate":"css"]({width:A+"%"},D.animate),E==="max"&&this.orientation==="horizontal"&&this.range[B?"animate":"css"]({width:100-A+"%"},{queue:!1,duration:D.animate}),E==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[B?"animate":"css"]({height:A+"%"},D.animate),E==="max"&&this.orientation==="vertical"&&this.range[B?"animate":"css"]({height:100-A+"%"},{queue:!1,duration:D.animate}))}}),f.extend(f.ui.slider,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){function n(){return ++x}function k(){return ++q}var x=0,q=0;j.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(f,e){if(f=="selected"){if(this.options.collapsible&&e==this.options.selected){return}this.select(e)}else{this.options[f]=e,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var e=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+k());return j.cookie.apply(null,[e].concat(j.makeArray(arguments)))},_ui:function(f,e){return{tab:f,panel:e,index:this.anchors.index(f)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var e=j(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},_tabify:function(J){function z(e,f){e.css("display",""),!j.support.opacity&&f.opacity&&e[0].style.removeAttribute("filter")}var I=this,H=this.options,G=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=j(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return j("a",this)[0]}),this.panels=j([]),this.anchors.each(function(e,O){var N=j(O).attr("href"),M=N.split("#")[0],L;M&&(M===location.toString().split("#")[0]||(L=j("base")[0])&&M===L.href)&&(N=O.hash,O.href=N);if(G.test(N)){I.panels=I.panels.add(I.element.find(I._sanitizeSelector(N)))}else{if(N&&N!=="#"){j.data(O,"href.tabs",N),j.data(O,"load.tabs",N.replace(/#.*$/,""));var K=I._tabId(O);O.href="#"+K;var f=I.element.find("#"+K);f.length||(f=j(H.panelTemplate).attr("id",K).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(I.panels[e-1]||I.list),f.data("destroy.tabs",!0)),I.panels=I.panels.add(f)}else{H.disabled.push(e)}}}),J?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),H.selected===h?(location.hash&&this.anchors.each(function(f,e){if(e.hash==location.hash){return H.selected=f,!1}}),typeof H.selected!="number"&&H.cookie&&(H.selected=parseInt(I._cookie(),10)),typeof H.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(H.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),H.selected=H.selected||(this.lis.length?0:-1)):H.selected===null&&(H.selected=-1),H.selected=H.selected>=0&&this.anchors[H.selected]||H.selected<0?H.selected:0,H.disabled=j.unique(H.disabled.concat(j.map(this.lis.filter(".ui-state-disabled"),function(f,e){return I.lis.index(f)}))).sort(),j.inArray(H.selected,H.disabled)!=-1&&H.disabled.splice(j.inArray(H.selected,H.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),H.selected>=0&&this.anchors.length&&(I.element.find(I._sanitizeSelector(I.anchors[H.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(H.selected).addClass("ui-tabs-selected ui-state-active"),I.element.queue("tabs",function(){I._trigger("show",null,I._ui(I.anchors[H.selected],I.element.find(I._sanitizeSelector(I.anchors[H.selected].hash))[0]))}),this.load(H.selected)),j(window).bind("unload",function(){I.lis.add(I.anchors).unbind(".tabs"),I.lis=I.anchors=I.panels=null})):H.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[H.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),H.cookie&&this._cookie(H.selected,H.cookie);for(var F=0,E;E=this.lis[F];F++){j(E)[j.inArray(F,H.disabled)!=-1&&!j(E).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}H.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(H.event!=="mouseover"){var D=function(f,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+f)},C=function(f,e){e.removeClass("ui-state-"+f)};this.lis.bind("mouseover.tabs",function(){D("hover",j(this))}),this.lis.bind("mouseout.tabs",function(){C("hover",j(this))}),this.anchors.bind("focus.tabs",function(){D("focus",j(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){C("focus",j(this).closest("li"))})}var B,A;H.fx&&(j.isArray(H.fx)?(B=H.fx[0],A=H.fx[1]):B=A=H.fx);var y=A?function(e,f){j(e).closest("li").addClass("ui-tabs-selected ui-state-active"),f.hide().removeClass("ui-tabs-hide").animate(A,A.duration||"normal",function(){z(f,A),I._trigger("show",null,I._ui(e,f[0]))})}:function(e,f){j(e).closest("li").addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),I._trigger("show",null,I._ui(e,f[0]))},b=B?function(f,e){e.animate(B,B.duration||"normal",function(){I.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),z(e,B),I.element.dequeue("tabs")})}:function(f,e,K){I.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),I.element.dequeue("tabs")};this.anchors.bind(H.event+".tabs",function(){var e=this,M=j(e).closest("li"),L=I.panels.filter(":not(.ui-tabs-hide)"),K=I.element.find(I._sanitizeSelector(e.hash));if(M.hasClass("ui-tabs-selected")&&!H.collapsible||M.hasClass("ui-state-disabled")||M.hasClass("ui-state-processing")||I.panels.filter(":animated").length||I._trigger("select",null,I._ui(this,K[0]))===!1){return this.blur(),!1}H.selected=I.anchors.index(this),I.abort();if(H.collapsible){if(M.hasClass("ui-tabs-selected")){return H.selected=-1,H.cookie&&I._cookie(H.selected,H.cookie),I.element.queue("tabs",function(){b(e,L)}).dequeue("tabs"),this.blur(),!1}if(!L.length){return H.cookie&&I._cookie(H.selected,H.cookie),I.element.queue("tabs",function(){y(e,K)}),I.load(I.anchors.index(this)),this.blur(),!1}}H.cookie&&I._cookie(H.selected,H.cookie);if(K.length){L.length&&I.element.queue("tabs",function(){b(e,L)}),I.element.queue("tabs",function(){y(e,K)}),I.load(I.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}j.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var e=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var f=j.data(this,"href.tabs");f&&(this.href=f);var y=j(this).unbind(".tabs");j.each(["href","load","cache"],function(A,z){y.removeData(z+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){j.data(this,"destroy.tabs")?j(this).remove():j(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),e.cookie&&this._cookie(null,e.cookie),this},add:function(E,D,C){C===h&&(C=this.anchors.length);var B=this,A=this.options,z=j(A.tabTemplate.replace(/#\{href\}/g,E).replace(/#\{label\}/g,D)),y=E.indexOf("#")?this._tabId(j("a",z)[0]):E.replace("#","");z.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var b=B.element.find("#"+y);return b.length||(b=j(A.panelTemplate).attr("id",y).data("destroy.tabs",!0)),b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),C>=this.lis.length?(z.appendTo(this.list),b.appendTo(this.list[0].parentNode)):(z.insertBefore(this.lis[C]),b.insertBefore(this.panels[C])),A.disabled=j.map(A.disabled,function(f,e){return f>=C?++f:f}),this._tabify(),this.anchors.length==1&&(A.selected=0,z.addClass("ui-tabs-selected ui-state-active"),b.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){B._trigger("show",null,B._ui(B.anchors[0],B.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[C],this.panels[C])),this},remove:function(f){f=this._getIndex(f);var A=this.options,z=this.lis.eq(f).remove(),y=this.panels.eq(f).remove();return z.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(f+(f+1<this.anchors.length?1:-1)),A.disabled=j.map(j.grep(A.disabled,function(b,e){return b!=f}),function(b,e){return b>=f?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(z.find("a")[0],y[0])),this},enable:function(e){e=this._getIndex(e);var f=this.options;if(j.inArray(e,f.disabled)==-1){return}return this.lis.eq(e).removeClass("ui-state-disabled"),f.disabled=j.grep(f.disabled,function(b,y){return b!=e}),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},disable:function(f){f=this._getIndex(f);var e=this,y=this.options;return f!=y.selected&&(this.lis.eq(f).addClass("ui-state-disabled"),y.disabled.push(f),y.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[f],this.panels[f]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(y){y=this._getIndex(y);var D=this,C=this.options,B=this.anchors.eq(y)[0],A=j.data(B,"load.tabs");this.abort();if(!A||this.element.queue("tabs").length!==0&&j.data(B,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(y).addClass("ui-state-processing");if(C.spinner){var z=j("span",B);z.data("label.tabs",z.html()).html(C.spinner)}return this.xhr=j.ajax(j.extend({},C.ajaxOptions,{url:A,success:function(E,e){D.element.find(D._sanitizeSelector(B.hash)).html(E),D._cleanup(),C.cache&&j.data(B,"cache.tabs",!0),D._trigger("load",null,D._ui(D.anchors[y],D.panels[y]));try{C.ajaxOptions.success(E,e)}catch(b){}},error:function(b,E,e){D._cleanup(),D._trigger("load",null,D._ui(D.anchors[y],D.panels[y]));try{C.ajaxOptions.error(b,E,y,B)}catch(e){}}})),D.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(f,e){return this.anchors.eq(f).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),j.extend(j.ui.tabs,{version:"1.8.21"}),j.extend(j.ui.tabs.prototype,{rotation:null,rotate:function(z,y){var D=this,C=this.options,B=D._rotate||(D._rotate=function(e){clearTimeout(D.rotation),D.rotation=setTimeout(function(){var b=C.selected;D.select(++b<D.anchors.length?b:0)},z),e&&e.stopPropagation()}),A=D._unrotate||(D._unrotate=y?function(b){B()}:function(b){b.clientX&&D.rotate(null)});return z?(this.element.bind("tabsshow",B),this.anchors.bind(C.event+".tabs",A),B()):(clearTimeout(D.rotation),this.element.unbind("tabsshow",B),this.anchors.unbind(C.event+".tabs",A),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=f("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),f.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===e?this._value():(this._setOption("value",b),this)},_setOption:function(h,j){h==="value"&&(this.options.value=j,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),f.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var j=this.value(),h=this._percentage();this.oldValue!==j&&(this.oldValue=j,this._trigger("change")),this.valueDiv.toggle(j>this.min).toggleClass("ui-corner-right",j===this.options.max).width(h.toFixed(0)+"%"),this.element.attr("aria-valuenow",j)}}),f.extend(f.ui.progressbar,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(G,F){function E(e){var f;return e&&e.constructor==Array&&e.length==3?e:(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]:(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]:(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]:(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]:(f=/rgba\(0, 0, 0, 0\)/.exec(e))?C.transparent:C[G.trim(e).toLowerCase()]}function D(f,j){var h;do{h=G.curCSS(f,j);if(h!=""&&h!="transparent"||G.nodeName(f,"body")){break}j="backgroundColor"}while(f=f.parentNode);return E(h)}function z(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},H,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){H=h[j],typeof h[H]=="string"&&(k=H.replace(/\-(\w)/g,function(I,e){return e.toUpperCase()}),f[k]=h[H])}}else{for(H in h){typeof h[H]=="string"&&(f[H]=h[H])}}return f}function y(e){var h,f;for(h in e){f=e[h],(f==null||G.isFunction(f)||h in A||/scrollbar/.test(h)||!/color/i.test(h)&&isNaN(parseFloat(f)))&&delete e[h]}return e}function x(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function q(f,k,j,h){typeof f=="object"&&(h=k,j=null,k=f,f=k.effect),G.isFunction(k)&&(h=k,j=null,k={});if(typeof k=="number"||G.fx.speeds[k]){h=j,j=k,k={}}return G.isFunction(j)&&(h=j,j=null),k=k||{},j=j||k.duration,j=G.fx.off?0:typeof j=="number"?j:j in G.fx.speeds?G.fx.speeds[j]:G.fx.speeds._default,h=h||k.complete,[f,k,j,h]}function n(e){return !e||typeof e=="number"||G.fx.speeds[e]?!0:typeof e=="string"&&!G.effects[e]?!0:!1}G.effects={},G.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(f,h){G.fx.step[h]=function(b){b.colorInit||(b.start=D(b.elem,h),b.end=E(b.end),b.colorInit=!0),b.elem.style[h]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var C={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},B=["add","remove","toggle"],A={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};G.effects.animateClass=function(f,k,j,h){return G.isFunction(j)&&(h=j,j=null),this.queue(function(){var I=G(this),H=I.attr("style")||" ",e=y(z.call(this)),b,J=I.attr("class")||"";G.each(B,function(K,L){f[L]&&I[L+"Class"](f[L])}),b=y(z.call(this)),I.attr("class",J),I.animate(x(e,b),{queue:!1,duration:k,easing:j,complete:function(){G.each(B,function(K,L){f[L]&&I[L+"Class"](f[L])}),typeof I.attr("style")=="object"?(I.attr("style").cssText="",I.attr("style").cssText=H):I.attr("style",H),h&&h.apply(this,arguments),G.dequeue(this)}})})},G.fn.extend({_addClass:G.fn.addClass,addClass:function(f,k,j,h){return k?G.effects.animateClass.apply(this,[{add:f},k,j,h]):this._addClass(f)},_removeClass:G.fn.removeClass,removeClass:function(f,k,j,h){return k?G.effects.animateClass.apply(this,[{remove:f},k,j,h]):this._removeClass(f)},_toggleClass:G.fn.toggleClass,toggleClass:function(H,k,j,h,b){return typeof k=="boolean"||k===F?j?G.effects.animateClass.apply(this,[k?{add:H}:{remove:H},j,h,b]):this._toggleClass(H,k):G.effects.animateClass.apply(this,[{toggle:H},k,j,h])},switchClass:function(h,I,H,k,j){return G.effects.animateClass.apply(this,[{add:I,remove:h},H,k,j])}}),G.extend(G.effects,{version:"1.8.21",save:function(f,e){for(var h=0;h<e.length;h++){e[h]!==null&&f.data("ec.storage."+e[h],f[0].style[e[h]])}},restore:function(f,e){for(var h=0;h<e.length;h++){e[h]!==null&&f.css(e[h],f.data("ec.storage."+e[h]))}},setMode:function(f,e){return e=="toggle"&&(e=f.is(":hidden")?"show":"hide"),e},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var I={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},H=G("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k=document.activeElement;try{k.id}catch(j){k=document.body}return h.wrap(H),(h[0]===k||G.contains(h[0],k))&&G(k).focus(),H=h.parent(),h.css("position")=="static"?(H.css({position:"relative"}),h.css({position:"relative"})):(G.extend(I,{position:h.css("position"),zIndex:h.css("z-index")}),G.each(["top","left","bottom","right"],function(b,e){I[e]=h.css(e),isNaN(parseInt(I[e],10))&&(I[e]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),H.css(I).show()},removeWrapper:function(e){var h,f=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(h=e.parent().replaceWith(e),(e[0]===f||G.contains(e[0],f))&&G(f).focus(),h):e},setTransition:function(f,k,j,h){return h=h||{},G.each(k,function(b,H){var e=f.cssUnit(H);e[0]>0&&(h[H]=e[0]*j+e[1])}),h}}),G.fn.extend({effect:function(j,M,L,K){var J=q.apply(this,arguments),I={options:J[1],duration:J[2],callback:J[3]},H=I.options.mode,k=G.effects[j];return G.fx.off||!k?H?this[H](I.duration,I.callback):this.each(function(){I.callback&&I.callback.call(this)}):k.call(this,I)},_show:G.fn.show,show:function(f){if(n(f)){return this._show.apply(this,arguments)}var e=q.apply(this,arguments);return e[1].mode="show",this.effect.apply(this,e)},_hide:G.fn.hide,hide:function(f){if(n(f)){return this._hide.apply(this,arguments)}var e=q.apply(this,arguments);return e[1].mode="hide",this.effect.apply(this,e)},__toggle:G.fn.toggle,toggle:function(e){if(n(e)||typeof e=="boolean"||G.isFunction(e)){return this.__toggle.apply(this,arguments)}var f=q.apply(this,arguments);return f[1].mode="toggle",this.effect.apply(this,f)},cssUnit:function(e){var h=this.css(e),f=[];return G.each(["em","px","%","pt"],function(k,j){h.indexOf(j)>0&&(f=[parseFloat(h),j])}),f}}),G.easing.jswing=G.easing.swing,G.extend(G.easing,{def:"easeOutQuad",swing:function(h,I,H,k,j){return G.easing[G.easing.def](h,I,H,k,j)},easeInQuad:function(h,f,H,k,j){return k*(f/=j)*f+H},easeOutQuad:function(h,f,H,k,j){return -k*(f/=j)*(f-2)+H},easeInOutQuad:function(h,f,H,k,j){return(f/=j/2)<1?k/2*f*f+H:-k/2*(--f*(f-2)-1)+H},easeInCubic:function(h,f,H,k,j){return k*(f/=j)*f*f+H},easeOutCubic:function(h,f,H,k,j){return k*((f=f/j-1)*f*f+1)+H},easeInOutCubic:function(h,f,H,k,j){return(f/=j/2)<1?k/2*f*f*f+H:k/2*((f-=2)*f*f+2)+H},easeInQuart:function(h,f,H,k,j){return k*(f/=j)*f*f*f+H},easeOutQuart:function(h,f,H,k,j){return -k*((f=f/j-1)*f*f*f-1)+H},easeInOutQuart:function(h,f,H,k,j){return(f/=j/2)<1?k/2*f*f*f*f+H:-k/2*((f-=2)*f*f*f-2)+H},easeInQuint:function(h,f,H,k,j){return k*(f/=j)*f*f*f*f+H},easeOutQuint:function(h,f,H,k,j){return k*((f=f/j-1)*f*f*f*f+1)+H},easeInOutQuint:function(h,f,H,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+H:k/2*((f-=2)*f*f*f*f+2)+H},easeInSine:function(h,f,H,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+H},easeOutSine:function(h,f,H,k,j){return k*Math.sin(f/j*(Math.PI/2))+H},easeInOutSine:function(h,f,H,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+H},easeInExpo:function(h,f,H,k,j){return f==0?H:k*Math.pow(2,10*(f/j-1))+H},easeOutExpo:function(h,f,H,k,j){return f==j?H+k:k*(-Math.pow(2,-10*f/j)+1)+H},easeInOutExpo:function(h,f,H,k,j){return f==0?H:f==j?H+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+H:k/2*(-Math.pow(2,-10*--f)+2)+H},easeInCirc:function(h,f,H,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+H},easeOutCirc:function(h,f,H,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+H},easeInOutCirc:function(h,f,H,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+H:k/2*(Math.sqrt(1-(f-=2)*f)+1)+H},easeInElastic:function(k,j,M,L,K){var J=1.70158,I=0,H=L;if(j==0){return M}if((j/=K)==1){return M+L}I||(I=K*0.3);if(H<Math.abs(L)){H=L;var J=I/4}else{var J=I/(2*Math.PI)*Math.asin(L/H)}return -(H*Math.pow(2,10*(j-=1))*Math.sin((j*K-J)*2*Math.PI/I))+M},easeOutElastic:function(k,j,M,L,K){var J=1.70158,I=0,H=L;if(j==0){return M}if((j/=K)==1){return M+L}I||(I=K*0.3);if(H<Math.abs(L)){H=L;var J=I/4}else{var J=I/(2*Math.PI)*Math.asin(L/H)}return H*Math.pow(2,-10*j)*Math.sin((j*K-J)*2*Math.PI/I)+L+M},easeInOutElastic:function(k,j,M,L,K){var J=1.70158,I=0,H=L;if(j==0){return M}if((j/=K/2)==2){return M+L}I||(I=K*0.3*1.5);if(H<Math.abs(L)){H=L;var J=I/4}else{var J=I/(2*Math.PI)*Math.asin(L/H)}return j<1?-0.5*H*Math.pow(2,10*(j-=1))*Math.sin((j*K-J)*2*Math.PI/I)+M:H*Math.pow(2,-10*(j-=1))*Math.sin((j*K-J)*2*Math.PI/I)*0.5+L+M},easeInBack:function(b,I,H,k,j,h){return h==F&&(h=1.70158),k*(I/=j)*I*((h+1)*I-h)+H},easeOutBack:function(b,I,H,k,j,h){return h==F&&(h=1.70158),k*((I=I/j-1)*I*((h+1)*I+h)+1)+H},easeInOutBack:function(b,I,H,k,j,h){return h==F&&(h=1.70158),(I/=j/2)<1?k/2*I*I*(((h*=1.525)+1)*I-h)+H:k/2*((I-=2)*I*(((h*=1.525)+1)*I+h)+2)+H},easeInBounce:function(h,I,H,k,j){return k-G.easing.easeOutBounce(h,j-I,0,k,j)+H},easeOutBounce:function(h,f,H,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+H:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+H:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+H:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+H},easeInOutBounce:function(h,I,H,k,j){return I<j/2?G.easing.easeInBounce(h,I*2,0,k,j)*0.5+H:G.easing.easeOutBounce(h,I*2-j,0,k,j)*0.5+k*0.5+H}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.blind=function(h){return this.queue(function(){var A=f(this),z=["position","top","bottom","left","right"],y=f.effects.setMode(A,h.options.mode||"hide"),x=h.options.direction||"vertical";f.effects.save(A,z),A.show();var q=f.effects.createWrapper(A).css({overflow:"hidden"}),n=x=="vertical"?"height":"width",k=x=="vertical"?q.height():q.width();y=="show"&&q.css(n,0);var b={};b[n]=y=="show"?k:0,q.animate(b,h.duration,h.options.easing,function(){y=="hide"&&A.hide(),f.effects.restore(A,z),f.effects.removeWrapper(A),h.callback&&h.callback.apply(A[0],arguments),A.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.bounce=function(h){return this.queue(function(){var H=f(this),G=["position","top","bottom","left","right"],F=f.effects.setMode(H,h.options.mode||"effect"),E=h.options.direction||"up",D=h.options.distance||20,C=h.options.times||5,B=h.duration||250;/show|hide/.test(F)&&G.push("opacity"),f.effects.save(H,G),H.show(),f.effects.createWrapper(H);var A=E=="up"||E=="down"?"top":"left",z=E=="up"||E=="left"?"pos":"neg",D=h.options.distance||(A=="top"?H.outerHeight({margin:!0})/3:H.outerWidth({margin:!0})/3);F=="show"&&H.css("opacity",0).css(A,z=="pos"?-D:D),F=="hide"&&(D=D/(C*2)),F!="hide"&&C--;if(F=="show"){var y={opacity:1};y[A]=(z=="pos"?"+=":"-=")+D,H.animate(y,B/2,h.options.easing),D=D/2,C--}for(var x=0;x<C;x++){var q={},b={};q[A]=(z=="pos"?"-=":"+=")+D,b[A]=(z=="pos"?"+=":"-=")+D,H.animate(q,B/2,h.options.easing).animate(b,B/2,h.options.easing),D=F=="hide"?D*2:D/2}if(F=="hide"){var y={opacity:0};y[A]=(z=="pos"?"-=":"+=")+D,H.animate(y,B/2,h.options.easing,function(){H.hide(),f.effects.restore(H,G),f.effects.removeWrapper(H),h.callback&&h.callback.apply(this,arguments)})}else{var q={},b={};q[A]=(z=="pos"?"-=":"+=")+D,b[A]=(z=="pos"?"+=":"-=")+D,H.animate(q,B/2,h.options.easing).animate(b,B/2,h.options.easing,function(){f.effects.restore(H,G),f.effects.removeWrapper(H),h.callback&&h.callback.apply(this,arguments)})}H.queue("fx",function(){H.dequeue()}),H.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.clip=function(h){return this.queue(function(){var C=f(this),B=["position","top","bottom","left","right","height","width"],A=f.effects.setMode(C,h.options.mode||"hide"),z=h.options.direction||"vertical";f.effects.save(C,B),C.show();var y=f.effects.createWrapper(C).css({overflow:"hidden"}),x=C[0].tagName=="IMG"?y:C,q={size:z=="vertical"?"height":"width",position:z=="vertical"?"top":"left"},n=z=="vertical"?x.height():x.width();A=="show"&&(x.css(q.size,0),x.css(q.position,n/2));var b={};b[q.size]=A=="show"?n:0,b[q.position]=A=="show"?0:n/2,x.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){A=="hide"&&C.hide(),f.effects.restore(C,B),f.effects.removeWrapper(C),h.callback&&h.callback.apply(C[0],arguments),C.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.drop=function(h){return this.queue(function(){var A=f(this),z=["position","top","bottom","left","right","opacity"],y=f.effects.setMode(A,h.options.mode||"hide"),x=h.options.direction||"left";f.effects.save(A,z),A.show(),f.effects.createWrapper(A);var q=x=="up"||x=="down"?"top":"left",n=x=="up"||x=="left"?"pos":"neg",k=h.options.distance||(q=="top"?A.outerHeight({margin:!0})/2:A.outerWidth({margin:!0})/2);y=="show"&&A.css("opacity",0).css(q,n=="pos"?-k:k);var b={opacity:y=="show"?1:0};b[q]=(y=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,A.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){y=="hide"&&A.hide(),f.effects.restore(A,z),f.effects.removeWrapper(A),h.callback&&h.callback.apply(this,arguments),A.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.explode=function(h){return this.queue(function(){var A=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3,z=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3;h.options.mode=h.options.mode=="toggle"?f(this).is(":visible")?"hide":"show":h.options.mode;var y=f(this).show().css("visibility","hidden"),x=y.offset();x.top-=parseInt(y.css("marginTop"),10)||0,x.left-=parseInt(y.css("marginLeft"),10)||0;var q=y.outerWidth(!0),n=y.outerHeight(!0);for(var k=0;k<A;k++){for(var b=0;b<z;b++){y.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(q/z),top:-k*(n/A)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:q/z,height:n/A,left:x.left+b*(q/z)+(h.options.mode=="show"?(b-Math.floor(z/2))*(q/z):0),top:x.top+k*(n/A)+(h.options.mode=="show"?(k-Math.floor(A/2))*(n/A):0),opacity:h.options.mode=="show"?0:1}).animate({left:x.left+b*(q/z)+(h.options.mode=="show"?0:(b-Math.floor(z/2))*(q/z)),top:x.top+k*(n/A)+(h.options.mode=="show"?0:(k-Math.floor(A/2))*(n/A)),opacity:h.options.mode=="show"?1:0},h.duration||500)}}setTimeout(function(){h.options.mode=="show"?y.css({visibility:"visible"}):y.css({visibility:"visible"}).hide(),h.callback&&h.callback.apply(y[0]),y.dequeue(),f("div.ui-effects-explode").remove()},h.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.fade=function(h){return this.queue(function(){var j=f(this),b=f.effects.setMode(j,h.options.mode||"hide");j.animate({opacity:b},{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){h.callback&&h.callback.apply(this,arguments),j.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.fold=function(h){return this.queue(function(){var H=f(this),G=["position","top","bottom","left","right"],F=f.effects.setMode(H,h.options.mode||"hide"),E=h.options.size||15,D=!!h.options.horizFirst,C=h.duration?h.duration/2:f.fx.speeds._default/2;f.effects.save(H,G),H.show();var B=f.effects.createWrapper(H).css({overflow:"hidden"}),A=F=="show"!=D,z=A?["width","height"]:["height","width"],y=A?[B.width(),B.height()]:[B.height(),B.width()],x=/([0-9]+)%/.exec(E);x&&(E=parseInt(x[1],10)/100*y[F=="hide"?0:1]),F=="show"&&B.css(D?{height:0,width:E}:{height:E,width:0});var q={},b={};q[z[0]]=F=="show"?y[0]:E,b[z[1]]=F=="show"?y[1]:0,B.animate(q,C,h.options.easing).animate(b,C,h.options.easing,function(){F=="hide"&&H.hide(),f.effects.restore(H,G),f.effects.removeWrapper(H),h.callback&&h.callback.apply(H[0],arguments),H.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.highlight=function(h){return this.queue(function(){var n=f(this),k=["backgroundImage","backgroundColor","opacity"],j=f.effects.setMode(n,h.options.mode||"show"),b={backgroundColor:n.css("backgroundColor")};j=="hide"&&(b.opacity=0),f.effects.save(n,k),n.show().css({backgroundImage:"none",backgroundColor:h.options.color||"#ffff99"}).animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){j=="hide"&&n.hide(),f.effects.restore(n,k),j=="show"&&!f.support.opacity&&this.style.removeAttribute("filter"),h.callback&&h.callback.apply(this,arguments),n.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.pulsate=function(h){return this.queue(function(){var y=f(this),x=f.effects.setMode(y,h.options.mode||"show"),q=(h.options.times||5)*2-1,n=h.duration?h.duration/2:f.fx.speeds._default/2,k=y.is(":visible"),j=0;k||(y.css("opacity",0).show(),j=1),(x=="hide"&&k||x=="show"&&!k)&&q--;for(var b=0;b<q;b++){y.animate({opacity:j},n,h.options.easing),j=(j+1)%2}y.animate({opacity:j},n,h.options.easing,function(){j==0&&y.hide(),h.callback&&h.callback.apply(this,arguments)}),y.queue("fx",function(){y.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.puff=function(h){return this.queue(function(){var q=f(this),n=f.effects.setMode(q,h.options.mode||"hide"),k=parseInt(h.options.percent,10)||150,j=k/100,b={height:q.height(),width:q.width()};f.extend(h.options,{fade:!0,mode:n,percent:n=="hide"?k:100,from:n=="hide"?b:{height:b.height*j,width:b.width*j}}),q.effect("scale",h.options,h.duration,h.callback),q.dequeue()})},f.effects.scale=function(h){return this.queue(function(){var A=f(this),z=f.extend(!0,{},h.options),y=f.effects.setMode(A,h.options.mode||"effect"),x=parseInt(h.options.percent,10)||(parseInt(h.options.percent,10)==0?0:y=="hide"?0:100),q=h.options.direction||"both",n=h.options.origin;y!="effect"&&(z.origin=n||["middle","center"],z.restore=!0);var k={height:A.height(),width:A.width()};A.from=h.options.from||(y=="show"?{height:0,width:0}:k);var b={y:q!="horizontal"?x/100:1,x:q!="vertical"?x/100:1};A.to={height:k.height*b.y,width:k.width*b.x},h.options.fade&&(y=="show"&&(A.from.opacity=0,A.to.opacity=1),y=="hide"&&(A.from.opacity=1,A.to.opacity=0)),z.from=A.from,z.to=A.to,z.mode=y,A.effect("size",z,h.duration,h.callback),A.dequeue()})},f.effects.size=function(h){return this.queue(function(){var J=f(this),I=["position","top","bottom","left","right","width","height","overflow","opacity"],H=["position","top","bottom","left","right","overflow","opacity"],G=["width","height","overflow"],F=["fontSize"],E=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],D=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],C=f.effects.setMode(J,h.options.mode||"effect"),B=h.options.restore||!1,A=h.options.scale||"both",z=h.options.origin,y={height:J.height(),width:J.width()};J.from=h.options.from||y,J.to=h.options.to||y;if(z){var x=f.effects.getBaseline(z,y);J.from.top=(y.height-J.from.height)*x.y,J.from.left=(y.width-J.from.width)*x.x,J.to.top=(y.height-J.to.height)*x.y,J.to.left=(y.width-J.to.width)*x.x}var b={from:{y:J.from.height/y.height,x:J.from.width/y.width},to:{y:J.to.height/y.height,x:J.to.width/y.width}};if(A=="box"||A=="both"){b.from.y!=b.to.y&&(I=I.concat(E),J.from=f.effects.setTransition(J,E,b.from.y,J.from),J.to=f.effects.setTransition(J,E,b.to.y,J.to)),b.from.x!=b.to.x&&(I=I.concat(D),J.from=f.effects.setTransition(J,D,b.from.x,J.from),J.to=f.effects.setTransition(J,D,b.to.x,J.to))}(A=="content"||A=="both")&&b.from.y!=b.to.y&&(I=I.concat(F),J.from=f.effects.setTransition(J,F,b.from.y,J.from),J.to=f.effects.setTransition(J,F,b.to.y,J.to)),f.effects.save(J,B?I:H),J.show(),f.effects.createWrapper(J),J.css("overflow","hidden").css(J.from);if(A=="content"||A=="both"){E=E.concat(["marginTop","marginBottom"]).concat(F),D=D.concat(["marginLeft","marginRight"]),G=I.concat(E).concat(D),J.find("*[width]").each(function(){var k=f(this);B&&f.effects.save(k,G);var j={height:k.height(),width:k.width()};k.from={height:j.height*b.from.y,width:j.width*b.from.x},k.to={height:j.height*b.to.y,width:j.width*b.to.x},b.from.y!=b.to.y&&(k.from=f.effects.setTransition(k,E,b.from.y,k.from),k.to=f.effects.setTransition(k,E,b.to.y,k.to)),b.from.x!=b.to.x&&(k.from=f.effects.setTransition(k,D,b.from.x,k.from),k.to=f.effects.setTransition(k,D,b.to.x,k.to)),k.css(k.from),k.animate(k.to,h.duration,h.options.easing,function(){B&&f.effects.restore(k,G)})})}J.animate(J.to,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){J.to.opacity===0&&J.css("opacity",J.from.opacity),C=="hide"&&J.hide(),f.effects.restore(J,B?I:H),f.effects.removeWrapper(J),h.callback&&h.callback.apply(this,arguments),J.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.shake=function(h){return this.queue(function(){var H=f(this),G=["position","top","bottom","left","right"],F=f.effects.setMode(H,h.options.mode||"effect"),E=h.options.direction||"left",D=h.options.distance||20,C=h.options.times||3,B=h.duration||h.options.duration||140;f.effects.save(H,G),H.show(),f.effects.createWrapper(H);var A=E=="up"||E=="down"?"top":"left",z=E=="up"||E=="left"?"pos":"neg",y={},x={},q={};y[A]=(z=="pos"?"-=":"+=")+D,x[A]=(z=="pos"?"+=":"-=")+D*2,q[A]=(z=="pos"?"-=":"+=")+D*2,H.animate(y,B,h.options.easing);for(var b=1;b<C;b++){H.animate(x,B,h.options.easing).animate(q,B,h.options.easing)}H.animate(x,B,h.options.easing).animate(y,B/2,h.options.easing,function(){f.effects.restore(H,G),f.effects.removeWrapper(H),h.callback&&h.callback.apply(this,arguments)}),H.queue("fx",function(){H.dequeue()}),H.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.slide=function(h){return this.queue(function(){var A=f(this),z=["position","top","bottom","left","right"],y=f.effects.setMode(A,h.options.mode||"show"),x=h.options.direction||"left";f.effects.save(A,z),A.show(),f.effects.createWrapper(A).css({overflow:"hidden"});var q=x=="up"||x=="down"?"top":"left",n=x=="up"||x=="left"?"pos":"neg",k=h.options.distance||(q=="top"?A.outerHeight({margin:!0}):A.outerWidth({margin:!0}));y=="show"&&A.css(q,n=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[q]=(y=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,A.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){y=="hide"&&A.hide(),f.effects.restore(A,z),f.effects.removeWrapper(A),h.callback&&h.callback.apply(this,arguments),A.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.transfer=function(h){return this.queue(function(){var x=f(this),q=f(h.options.to),n=q.offset(),k={top:n.top,left:n.left,height:q.innerHeight(),width:q.innerWidth()},j=x.offset(),b=f('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(h.options.className).css({top:j.top,left:j.left,height:x.innerHeight(),width:x.innerWidth(),position:"absolute"}).animate(k,h.duration,h.options.easing,function(){b.remove(),h.callback&&h.callback.apply(x[0],arguments),x.dequeue()})})}})(jQuery);(function(f,e){if(f.ui&&f.ui.dialog){f.ui.dialog.overlay.events=f.map("focus,keydown,keypress".split(","),function(b){return b+".dialog-overlay"}).join(" ")}}(jQuery));(function(f){var e=f.ui.dialog.prototype._createButtons;var b=f.ui.dialog.prototype._setData;f.ui.dialog.prototype._createButtons=function(j){var h=this;e.apply(this,[j]);if(typeof(this.options.percButtons)!="undefined"&&this.options.percButtons!=null){h._createPercButtons(this.options.percButtons)}};f.ui.dialog.prototype._setData=function(j,k){var h=this;if(j=="perc-buttons"){h._createPercButtons(k)}b.apply(this,[j,k])};f.ui.dialog.prototype._createPercButtons=function(k){var j=this;var h=false;var q=window.location.protocol+"//"+window.location.host+"/cm";uiDialogButtonPane=f("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");var n={Ok:{bgimage:"url("+q+"/images/images/buttonOk.png)",bgimageOver:"url("+q+"/images/images/buttonOkOver.png)",width:"78px",height:"29px",cls:"perc-ok",display:"block"},Override:{bgimage:"url("+q+"/images/images/buttonOverride.png)",bgimageOver:"url("+q+"/images/images/buttonOverrideOver.png)",width:"126px",height:"29px",cls:"perc-ok",display:"block"},Move:{bgimage:"url("+q+"/images/images/buttonMove.png)",bgimageOver:"url("+q+"/images/images/buttonMoveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Select:{bgimage:"url("+q+"/images/images/buttonSelect.png)",bgimageOver:"url("+q+"/images/images/buttonSelectOver.png)",width:"100px",height:"29px",cls:"perc-save",display:"block"},Yes:{bgimage:"url("+q+"/images/images/buttonYes.png)",bgimageOver:"url("+q+"/images/images/buttonYesOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Preferred":{bgimage:"url("+q+"/images/images/ButtonYesBlue.png)",bgimageOver:"url("+q+"/images/images/ButtonYesBlueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Silver":{bgimage:"url("+q+"/images/images/buttonYesNoFocus.png)",bgimageOver:"url("+q+"/images/images/buttonYesOverNoFocus.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Continue:{bgimage:"url("+q+"/images/images/buttonContinue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Continue Preferred":{bgimage:"url("+q+"/images/images/buttonContinueBlue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueBlueOver.png)",width:"126px",height:"29px",cls:"perc-save",display:"block"},"New Folder":{bgimage:"url("+q+"/images/images/buttonSave.gif)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.gif)",width:"auto",height:"22px",cls:"perc-save",display:"block"},Save:{bgimage:"url("+q+"/images/images/buttonSave.png)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Don't Save":{bgimage:"url("+q+"/images/images/buttonDontSave.png)",bgimageOver:"url("+q+"/images/images/buttonDontSaveOver.png)",width:"88px",height:"29px",cls:"perc-dont-save",display:"block"},Cancel:{bgimage:"url("+q+"/images/images/buttonCancel.gif)",bgimageOver:"url("+q+"/images/images/buttonCancelOver.gif)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"Cancel Blue":{bgimage:"url("+q+"/images/images/buttonCancelBlue.png)",bgimageOver:"url("+q+"/images/images/buttonCancelBlueOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},No:{bgimage:"url("+q+"/images/images/buttonNo.png)",bgimageOver:"url("+q+"/images/images/buttonNoOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"No Silver":{bgimage:"url("+q+"/images/images/ButtonNoSilver.png)",bgimageOver:"url("+q+"/images/images/ButtonNoSilverOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},Next:{bgimage:"url("+q+"/images/images/buttonNext.png)",bgimageOver:"url("+q+"/images/images/buttonNextOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Back:{bgimage:"url("+q+"/images/images/buttonBack.gif)",bgimageOver:"url("+q+"/images/images/buttonBack.gif)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Finish:{bgimage:"url("+q+"/images/images/buttonFinish.png)",bgimageOver:"url("+q+"/images/images/buttonFinishOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Close:{bgimage:"url("+q+"/images/images/buttonClose.png)",bgimageOver:"url("+q+"/images/images/buttonCloseOver.png)",width:"78px",height:"29px",cls:"perc-close",display:"block"},"Close Normal":{bgimage:"url("+q+"/images/images/buttonCloseNormal.png)",bgimageOver:"url("+q+"/images/images/buttonCloseNormalOver.png)",width:"78px",height:"29px",cls:"perc-close-normal",display:"block"},Done:{bgimage:"url("+q+"/images/images/buttonDone.png)",bgimageOver:"url("+q+"/images/images/buttonDoneOver.png)",width:"78px",height:"29px",cls:"perc-done",display:"block"},"Done Disabled":{bgimage:"url("+q+"/images/images/buttonDoneDisabled.png)",width:"78px",height:"29px",cls:"perc-done-disabled",display:"block"},Import:{bgimage:"url("+q+"/images/images/buttonImport.png)",bgimageOver:"url("+q+"/images/images/buttonImportOver.png)",width:"78px",height:"29px",cls:"perc-import",display:"block"},Activate:{bgimage:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",bgimageOver:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",width:"78px",height:"29px",cls:"perc-activate",display:"block"},Start:{bgimage:"url("+q+"/images/images/buttonStart.png)",bgimageOver:"url("+q+"/images/images/buttonStartOver.png)",width:"78px",height:"29px",cls:"perc-start",display:"block"},Search:{bgimage:"url("+q+"/images/images/blueButtonSearch.png)",bgimageOver:"url("+q+"/images/images/blueButtonSearchOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Submit:{bgimage:"url("+q+"/images/images/buttonWfsubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfsubmitOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Approve:{bgimage:"url("+q+"/images/images/buttonWfapprove.png)",bgimageOver:"url("+q+"/images/images/buttonWfapproveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"},Reject:{bgimage:"url("+q+"/images/images/buttonWfreject.png)",bgimageOver:"url("+q+"/images/images/buttonWfrejectOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Resubmit:{bgimage:"url("+q+"/images/images/buttonWfresubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfresubmitOver.png)",width:"126px",height:"29px",cls:"perc-search",display:"block"},Archive:{bgimage:"url("+q+"/images/images/buttonWfarchive.png)",bgimageOver:"url("+q+"/images/images/buttonWfarchiveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"}};this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof k=="object"&&k!==null&&f.each(k,function(){return !(h=true)}));if(h){f.each(k,function(x,y){f("<div></div>").attr("id",y.id).css("background-image",n[x].bgimage).css("display",n[x].display).css("float","right").css("height",n[x].height).css("width",n[x].width).addClass(n[x].cls).addClass(y.cls).click(function(){y.click.apply(j.element[0],arguments)}).hover(function(){f(this).css("background-image",n[x].bgimageOver)},function(){f(this).css("background-image",n[x].bgimage)}).focus(function(){f(this).addClass("ui-state-focus")}).blur(function(){f(this).removeClass("ui-state-focus")}).appendTo(uiDialogButtonPane)});uiDialogButtonPane.appendTo(this.uiDialog)}}})(jQuery);(function(Y){Y.globalEventIds={"#perc_head #perc-links":"#perc_head #perc_topnav"};document.onclick=function(){Y.each(Y.globalEventIds,function(az,ay){if(Y(az).hasClass("perc-visible")){Y(ay).click()}})};Y.ajaxSetup({cache:false});Y.Percussion=Y.Percussion||{};Y.perc_fakes={path_service:false,page_service:{create_page:false,render_page:false,new_asset:false,get_widget_ctypes:false},template_service:{get_template_css:false,set_template_css:false}};Y.perc_utils={id:ac,acop:au,acat:M,odiff:y,a_o:W,o_a:n,elem:al,show_error:ae,alert_dialog:A,prompt_dialog:at,confirm_dialog:am,choose_icon:N,path_id:av,input:e,handleLinks:j,handleObjects:U,select:ai,extract_path:aw,extract_path_end:ah,click_and_double_click:ap,unxml:S,rexml:aa,arem:P,deep_get:I,debug:L,info:aq,error:R,isBlankString:af,convertCXFArray:ao,encodeURL:an,preLoadImages:O,replaceURLWithHTMLLinks:z,sortCaseInsensitive:K,formatTimeFromDate:D,copyRegionObject:copyRegionObject,max:J,min:ar,addArrays:X,newArray:x,splitDateTime:aj,addAutoScroll:T,removeAutoScroll:F,formatFileSize:ab,parseUTCintoDate:ax,getDisplayFormat:b,makeFolderEditable:E,contains:V,encodePathArray:G,isPathUnderDesign:ag,percParseInt:h,logToServer:k};function h(aA){var ay=null;if(aA){try{ay=parseInt(aA,10)}catch(az){}}return ay}function b(aA){if(typeof aA!=="string"){return""}var ay=aA.split("/");var az="";while(ay.length>0){az=Y.perc_displayformats[ay.join("/")];if(az!=undefined){return az}ay.pop()}return""}function k(ay,aA,az){if(!(Y.type(ay)==="string")){return}if(ay==="debug"){L(az)}else{if(ay==="error"){R(az)}else{aq(az)}}Y.PercUtilService.logToServer(ay,aA,az)}function ax(aA){var ay=aA.replace(/(\d\d)-(\d\d)-(\d\d)/,"$1/$2/$3").replace(/([+-]\d\d):(\d\d)/,"$1$2").replace(/\.\d\d\d/,"").replace("T"," ");var az=new Date(ay);return az}function aj(az,ay){var aB=new Date(az);if(typeof(aB)=="undefined"||isNaN(aB)){aB=ax(az)}if(!ay){ay="M d, yy"}var aA=Y.datepicker.formatDate(ay,aB);var aC=D(aB);return{date:aA,time:aC}}function ao(ay){if(typeof(ay)=="undefined"){return[]}if(!Y.isArray(ay)){return[ay]}return ay}function af(ay){return !ay||ay==null||typeof ay!="string"||Y.trim(ay).length<1}function al(aA,az){var ay=Y.grep(az,function(aB){return aB==aA});return ay.length>0}function ai(az,ay,aA){return"<label for='"+aA+"'>"+az+"</label><br/><select name='"+ay+"' id='"+aA+"' ></select><br/>"}function e(az,ay,aC,aB,aA){aA=aA||"text";return"<label for='"+aC+"'>"+az+"</label><br/><input type='"+aA+"' name='"+ay+"' id='"+aC+"' ></input><br/>"}function aw(az){var ay=az.split("/");if(ay.length>1&&ay[ay.length-1]==""){ay.pop()}return ay}function av(ay){return Y.map(ay,function(az){return az}).join("-")}Y.fn.perc_dialog=function(az){az.dialogClass="perc-dialog perc-dialog-corner-all";az.zIndex=9500;var aA=Y(this).dialog(az);var ay=aA.closest(".ui-dialog");if(az.id){ay.attr("id",az.id)}Y(window).trigger("resize").trigger("resize");return aA};function Z(ay,az){var aA=Y("<div/>").addClass("perc-show-again").append(Y("<input/>").attr("type","checkBox").attr("id","perc_show_again_check")).append(Y("<label/>").attr("for","perc_show_again_check").text("Do not show again"));Y(this).parent().find(".ui-dialog-buttonpane").append(aA)}function f(aA){var az=Y.PercNavigationManager.getUserName();var aB="dontShowAgain-"+az+"-"+aA;var ay=Y.cookie(aB);return ay=="true"}function B(aA,aB){var aD=Y(this).parent().find("#perc_show_again_check").is(":checked");if(aD){var ay=Y.PercNavigationManager.getUserName();var az=Y(this).parent().attr("id");var aC="dontShowAgain-"+ay+"-"+az;Y.cookie(aC,"true")}}function am(aA){var aC={title:"Please Confirm",question:"Do you really want to do this ?",type:"OK_CANCEL",cancel:function(){},success:function(){},showAgainCheck:false,dontShowAgainAction:null};function az(){aC.success();aB.dialog("close");aB.remove()}function aE(){aC.cancel();aB.dialog("close");aB.remove()}Y.extend(aC,aA);var aD={};if(aC.type=="YES_NO"){aD={Yes:{click:az,id:"perc-confirm-generic-yes"},No:{click:aE,id:"perc-confirm-generic-no"}}}else{if(aC.type=="YES_PREFERRED_NO"){aD={"Yes Preferred":{click:az,id:"perc-confirm-generic-yes"},"No Silver":{click:aE,id:"perc-confirm-generic-no"}}}else{if(aC.type=="YES_NO_PREFERRED"){aD={"Yes Silver":{click:function(){aC.success();aB.remove()},id:"perc-confirm-generic-yes"},No:{click:function(){aC.cancel();aB.remove()},id:"perc-confirm-generic-no"}}}else{if(aC.type=="OK"){aD={Ok:{click:az,id:"perc-confirm-generic-ok"}}}else{if(aC.type=="OVERRIDE_OK"){aD={Ok:{click:aE,id:"perc-confirm-generic-ok"},Override:{click:az,id:"perc-confirm-generic-override"}}}else{if(aC.type=="SAVE_BEFORE_CONTINUE"){aD={Save:{click:function(){aC.save(az)},id:"perc-confirm-generic-save"},Cancel:{click:aE,id:"perc-confirm-generic-cancel"},"Don't Save":{click:function(){aC.dontSaveCallback();aB.dialog("close");aB.remove()},id:"perc-confirm-generic-continue"}}}else{if(aC.type=="CANCEL_CONTINUE"){aD={Continue:{click:az,id:"perc-confirm-generic-continue"},"Cancel Blue":{click:aE,id:"perc-confirm-generic-cancel"}}}else{if(aC.type=="CANCEL_START"){aD={Start:{click:az,id:"perc-confirm-generic-start"},Cancel:{click:aE,id:"perc-confirm-generic-cancel"}}}else{aD={Ok:{click:az,id:"perc-confirm-generic-ok"},Cancel:{click:aE,id:"perc-confirm-generic-cancel"}}}}}}}}}}var aB;var ay={dialogClass:"perc-confirm-dialog",title:aC.title,modal:true,resizable:false,percButtons:aD,id:aC.id};if(aA.height){ay.height=aA.height}if(aA.width){ay.width=aA.width}if(aC.showAgainCheck){if(f(ay.id)){if(typeof(aA.dontShowAgainAction)=="function"){aA.dontShowAgainAction()}else{aA.success()}return""}ay.open=Z;ay.beforeclose=B}aB=Y("<div/>").append(aC.question).perc_dialog(ay)}function A(az){var aB={title:"Please Confirm",content:"Something is wrong!",okCallBack:function(){}};Y.extend(aB,az);var ay=(aB.width==undefined||aB.width==null)?Math.max(aB.title.length*35,400):aB.width;var aA;aA=Y("<div/>").append(aB.content).perc_dialog({dialogClass:"perc-alert-dialog",title:aB.title,modal:true,width:ay,resizable:false,id:aB.id,percButtons:{Ok:{click:function(){aA.remove();aB.okCallBack()},id:"perc-alert-generic-ok"}}})}function at(az){var aB={title:"Beg Pardon?",question:"I'm sorry, what was the thing you needed to do?",cancel:function(){},success:function(){}};Y.extend(aB,az);var ay=Y("<input type='text' id='perc-prompt-dialog-question' />");var aA=Y("<div/>").append(Y("<label for='perc-prompt-dialog-question'/>").append(aB.question)).append(Y("<br/>")).append(ay).dialog({dialogClass:"perc-prompt-dialog",title:aB.title,modal:true,resizable:false,percButtons:{Yes:{click:function(){var aC=ay.val();aA.remove();aB.success(aC)},id:"perc-prompt-generic-yes"},No:{click:function(){aA.remove();aB.cancel()},id:"perc-prompt-generic-no"}},id:aB.id})}function ac(ay){return ay}function au(ay){return Y.map(ay,ac)}function M(az,ay){return au(az).concat(au(ay))}function y(ay,az){var aA={};Y.each(ay,function(aC,aB){if(!az[aC]){aA[aC]=aB}});return aA}function P(ay,az){Y.each(ay,function(aA){if(ay[aA]===az){delete ay[aA]}})}function W(az){var ay=[];Y.each(az,function(aA){ay.push([aA,this])});return ay}function n(ay){var az={};Y.each(ay,function(){az[this.k]=this.v});return az}function ah(az){var ay=az.split("/");if(ay[ay.length-1]===""){ay.pop()}return ay[ay.length-1]}function ae(ay){if(ay){alert(ay)}}Y.fn.perc_button=function(){this.addClass("ui-state-default ui-corner-all").hover(function(){if(!Y(this).hasClass("ui-state-disabled")){Y(this).addClass("ui-state-hover")}},function(){Y(this).removeClass("ui-state-hover")});return this};function ab(aA){var az=1024;var aB=(1024*1024);var ay=parseFloat(aA);if(isNaN(ay)){return""}if(ay<az){return ay+" B"}if(ay>aB){return(ay/aB).toFixed(0)+" MB"}return(ay/az).toFixed(0)+" KB"}function N(aA,az,aB){var ay={site:"../images/images/iconWebsite.gif",folder:"../images/images/iconFolder.gif",percPage:"../images/images/iconPage.gif"};if(aB==","+Y.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/iconLibrary.gif"}if(aB==","+Y.perc_paths.SITES_ROOT_NO_SLASH){return"../images/images/iconWebsite.gif"}if(aB==","+Y.perc_paths.DESIGN_ROOT_NO_SLASH){return"../images/images/iconDesign.png"}if(aB==",Search"){return"../images/images/searchIcon.png"}if(az){return az}if(aA&&ay[aA]){return ay[aA]}if(aA=="percImageAsset"){return"../images/images/genericImage.png"}if(aA=="percFileAsset"||aA=="percFlashAsset"){return"../images/images/genericFile.png"}if(aA&&aB[1]==Y.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/genericAsset.png"}if(aA){return"../images/images/iconPage.gif"}return"../images/images/iconFolder.gif"}Y.fn.percWidLibMaximizer=function(aA){var aD="#perc-layout-menu";if($j("#tabs-3").length){aD="#tabs-3 #perc-layout-menu"}if($j(aD).parent().find(".perc-template-container").hasClass("perc-visible")){$j(aD).parent().find(".perc-template-container").removeClass("perc-visible").addClass("perc-hidden");$j(aD).parent().find("#perc-wid-lib-expander").removeClass("perc-whitebg");$j(aD).parent().find("#perc-wid-lib-minimizer").replaceWith('<a id="perc-wid-lib-maximizer" style="float: left;" href="#"></a>')}else{var az=$j(aD).parent().find(".perc-region-library-container");if(az.hasClass("perc-visible")){Y.fn.percRegionLibraryMaximizer(aA)}$j(aD).parent().find(".perc-template-container").removeClass("perc-hidden").addClass("perc-visible");$j(aD).parent().find("#perc-wid-lib-expander").addClass("perc-whitebg");$j(aD).parent().find("#perc-wid-lib-maximizer").replaceWith('<a id="perc-wid-lib-minimizer" style="float: left;" href="#"></a>')}var aB=Y("#frame");var aC=Y(".perc-main");var ay=Y("#bottom");fixIframeHeight(aC,ay,aB)};Y.fn.percRegionLibraryMaximizer=function(aD){var aC="#perc-layout-menu";if($j("#tabs-3").length){aC="#tabs-3 #perc-layout-menu"}var aI=$j(aC).parent();var aH=$j(aI.find(".perc-region-library-container"));var aG=$j(aC).parent().find(".perc-template-container");var aF=$j(aI.find("#perc-region-library-expander"));var aA=$j(aI.find("#perc-region-library-maximizer"));var aE=$j(aI.find("#perc-region-library-minimizer"));if(aH.hasClass("perc-visible")){aH.removeClass("perc-visible").addClass("perc-hidden");aF.removeClass("perc-whitebg");aE.replaceWith('<a id="perc-region-library-maximizer" style="float: left;" href="#"></a>')}else{if(aG.hasClass("perc-visible")){Y.fn.percWidLibMaximizer(aD)}aH.removeClass("perc-hidden").addClass("perc-visible");aF.addClass("perc-whitebg");aA.replaceWith('<a id="perc-region-library-minimizer" style="float: left;" href="#"></a>')}var az=Y("#frame");var aB=Y(".perc-main");var ay=Y("#bottom");fixIframeHeight(aB,ay,az)};Y.fn.percOrphanAssetsMaximizer=function(aE){var aD="#perc-layout-menu";if($j("#tabs-2").length){aD="#tabs-2 #perc-content-menu"}var aH=$j(aD).parent();var aF=aH.find("#perc_asset_library");var aG=aH.find("#perc_orphan_assets_expander");if(aF.hasClass("perc-visible")){var aB=aH.find("#perc_orphan_assets_minimizer");aF.removeClass("perc-visible").addClass("perc-hidden");aG.removeClass("perc-whitebg");aB.replaceWith('<a id="perc_orphan_assets_maximizer" style="float: left;" href="#"></a>')}else{var aA=aH.find("#perc_orphan_assets_maximizer");aF.removeClass("perc-hidden").addClass("perc-visible");aG.addClass("perc-whitebg");aA.replaceWith('<a id="perc_orphan_assets_minimizer" style="float: left;" href="#"></a>')}var az=Y("#frame");var aC=Y(".perc-main");var ay=Y("#bottom");fixIframeHeight(aC,ay,az)};function ap(aB,aC,aA){var az=false;var ay=500;aB.click(function(){if(az){}else{az=true;setTimeout(function(){az=false},ay);aC()}});aB.dblclick(aA)}Y.fn.perc_toggle=function(ay){if(Y(ay).length&&Y(ay).hasClass("perc-hidden")){Y(ay).removeClass("perc-hidden");Y(ay).addClass("perc-visible")}else{Y(ay).removeClass("perc-visible");Y(ay).addClass("perc-hidden")}return this};Y.fn.perc_toggle_padding=function(){var az=Y.fn.perc_toggle_padding.arguments;for(var ay=0;ay<az.length;ay++){if(Y(az[ay]).length&&Y(az[ay]).hasClass("perc-nopadding")){Y(az[ay]).removeClass("perc-nopadding")}else{Y(az[ay]).addClass("perc-nopadding")}}return this};var q=0;function T(){Y("#frame").percAutoScroll({offsetY:10,width:10,speed:10,directions:"n, s"});Y("#frame").percAutoScroll.postScrollView=function(ay,az){Y("div.ui-droppable").each(function(){if(!Y(this).hasClass("ui-layout-ignore")){Y(this).css("top",Y(this).position().top-az)}})}}function F(){Y("#frame").percAutoScroll.remove()}function S(aC,aD){if(Y.isFunction(aC)){aC=aC(aD.get(0).tagName)}if(aC.valueOf()==="$"){return aD.text()}if(Y.isArray(aC)){var aA=[];var az=aC[0];var aB=aD.children();if(aB.length==0&&az=="$"){var ay=aD.length;for(i=0;i<ay;i++){aA.unshift(Y(aD[i]).text())}}else{aB.each(function(){var aE=S(az,Y(this));aE._tagName=Y(this)[0].tagName;aA.push(aE)})}return aA}var aA={};Y.each(aC,function(aF){var aE=[];var aG=aD.children().filter(function(){aE.push(this.tagName);return this.tagName.toLowerCase()==aF.toLowerCase()});if(aG.length){aA[aF]=S(this,aG)}else{L("Expected to find child: "+aF+", tags found: "+aE)}});return aA}function aa(az,ay){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+ad(az,ay)}function ad(aB,az,aC){if(Y.isFunction(aB)){aB=aB(az._tagName)}if(aB.valueOf()==="$"){if(!az){L("Unexpected null in rexml");return""}else{if(typeof(az)==="string"){return az.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}else{return az}}}else{if(Y.isArray(aB)){var aA="";if(aB.length==1&&aB[0]=="$"){var ay=az.length;for(i=0;i<ay;i++){aA+="<"+aC+">"+az[i]+"</"+aC+">"}}else{if(Y.isArray(az)){Y.each(az,function(){aA+="<"+this._tagName+">"+ad(aB[0],this,this.tagName)+"</"+this._tagName+">"})}else{L("Expected array, got %o instead",az)}}return aA}else{var aA="";Y.each(aB,function(aD){if(aD in az){var aE=Y.isArray(aB[aD])&&aB[aD].length==1&&(aB[aD])[0]=="$";if(!aE){aA+="<"+aD+">"}aA+=ad(aB[aD],az[aD],aD);if(!aE){aA+="</"+aD+">"}}else{L("Can't find "+aD+" in %o",az)}});return aA}}}function I(aA,aB){var ay=aB.split(" ");var az;while((az=shift(ay))){if(az in aA){aA=aA[az]}else{return null}}return aA}function an(ay){return encodeURIComponent(ay).replace(/%2F/g,"/")}var H=false;function ak(){return H}function L(ay){if(!ak()){return}var az;if(arguments.length>1){az="DEBUG ["+arguments[0]+"] "+arguments[1]}else{az="[DEBUG] "+arguments[0]}C(az)}function aq(ay){var az;if(arguments.length>1){az="INFO ["+arguments[0]+"] "+arguments[1]}else{az="[INFO] "+arguments[0]}C(az)}function R(ay){var az;if(arguments.length>1){az="ERROR ["+arguments[0]+"] "+arguments[1]}else{az="[ERROR] "+arguments[0]}C(az)}function C(ay){if(window.console&&console&&console.log){if(Y.browser.msie){console.log(ay)}else{console.log.apply(console,arguments)}}}var Q=[];function O(){var aA=arguments.length;for(var az=aA;az--;){var ay=document.createElement("img");ay.src=arguments[az];Q.push(ay)}}function z(az){var ay=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return az.replace(ay,"<a href='$1'>$1</a>")}function U(az){var ay=0;az.contents().find(".perc-flash").find("object").each(function(){ay++;var aF=Y(this).attr("width");var aB=Y(this).attr("height");var aA=aF;var aD=aB;if(aF==""){var aC=Y(this).children("embed").attr("width");if(aC==""){aA="100%"}else{aA=aC}}if(aB==""){var aE=Y(this).children("embed").attr("height");if(aE==""){aD="100%"}else{aD=aE}}if(aA.lastIndexOf("%")<0&&aA.lastIndexOf("px")<0){aA=aA+"px"}if(aD.lastIndexOf("%")<0&&aD.lastIndexOf("px")<0){aD=aD+"px"}Y(this).replaceWith(Y('<div id="perc-object-placeholder-'+ay+'" class="perc-object-placeholder" style="width: '+aA+"; height: "+aD+';"></div>'))})}function j(ay){ay.contents().find("a").each(function(){var az=Y(this).attr("href");Y(this).attr("tempURL",az);Y(this).removeAttr("target");Y(this).attr("href","javascript:void(0)")});if(Y.browser.msie){ay.contents().find("iframe").each(function(){var az=Y(this).attr("src");if(az.length>0){var aA="wmode=transparent";if(az.indexOf("?")!=-1){Y(this).attr("src",az+"&"+aA)}else{Y(this).attr("src",az+"?"+aA)}}})}}function K(ay){if(Y.isArray(ay)){ay.sort(function(aA,aC){var aB=String(aA).toUpperCase();var az=String(aC).toUpperCase();if(aB>az){return 1}if(aB<az){return -1}return 0})}}function D(aB,az){var aD;var ay=aB.getHours();var aC=aB.getMinutes();var aE=aB.getSeconds();var aA=(ay>=12?" PM":" AM");aC=(aC<10?"0":"")+aC;ay=ay%12;if(ay==0){ay=12}aD=ay+":"+aC;if(az){aD+=":"+(aE<10?"0"+aE:aE)}aD+=aA;return aD}function J(az){var ay=-1;for(a=0;a<az.length;a++){if(ay<az[a]){ay=az[a]}}return ay}function ar(az){var ay=10000000;for(a=0;a<az.length;a++){if(az[a]<ay){ay=az[a]}}return ay}function X(aA,ay){var az=[];for(i=0;i<aA.length;i++){az[i]=aA[i]+ay[i]}return az}function x(ay){var az=new Array(ay);for(i=0;i<ay;i++){az[i]=0}return az}Y.percHideBodyScrollbars=function(){Y("body").css("overflow","hidden")};Y.percShowBodyScrollbars=function(){Y("body").css("position","").css("overflow","")};function E(aA){var aB=Y("#perc-finder-listing-"+aA.id);var ay=aB.children(".perc-finder-item-name");var az=aA.type;ay.editable(function(aF,aD){var aF=Y.trim(aF);aF=Y.perc_textFilters.WINDOWS_FILE_NAME(aF);if(az!="FSFolder"){aF=aF.replace(/ /g,"-")}var aE=Y(this);var aC=aE.parent().attr("title");if(aF.length==0){return aC}if(aF!=aC){Y.PercBlockUI(Y.PercBlockUIMode.CURSORONLY);Y.PercPathService.renameFolder(aA.path,aF,function(aH,aG,aJ){if(aH==Y.PercServiceUtils.STATUS_SUCCESS){var aK=Y.perc_finder().lastClickPath;if(Y.perc_finder().lastClickPath==null){aK=aG.PathItem.path.split("/");aK.push(aF)}Y.perc_finder().lastClickPath=null;Y.perc_finder().open(aK);Y.unblockUI()}else{aE.text(aC);Y.unblockUI();var aI="";if(aJ=="renameFolderItem.reservedName"||aJ=="renameFolderItem.longName"||aJ=="renameFolderItem.invalidCharInName"){aI=aG.replace("<old_name>",aC).replace("<new_name>",aF)}else{aI="Cannot rename folder '"+aC+"' to '"+aF+"' because an object with the same name already exists."}Y.perc_utils.alert_dialog({id:"perc-finder-rename-folder-error",title:"Error",content:aI})}})}else{Y.perc_finder().refresh()}return aF},{type:"filteredText",event:"dblclick",height:"14px",width:"125px",select:true,onblur:"submit",fieldid:"perc_finder_inline_field_edit",onedit:function(aC){Y("#perc_finder_inline_field_edit").blur()},data:function(aD,aC){return Y(this).parent().attr("title")}});Y("#perc-finder-listing-"+aA.id).children(".perc-finder-item-name").trigger("dblclick")}function V(ay,aB){var az=ay.entries;if(!Y.isArray(az)){var aA=[];aA.push(az);az=aA}for(i=0;i<az.length;i++){if(az[i].value==aB){return true}}return false}function G(ay){if(typeof(ay)=="undefined"){return}var az=[];Y(ay).each(function(aA,aC){var aB=an(aC);az.push(aB)});return az}function ag(ay){if(ay.length==0){return false}if(ay[1]=="Design"){return true}else{return false}}})(jQuery);function copyRegionObject(e,b){b.vertical=e.vertical;b.children=e.children;b.widgets=e.widgets;b.width=e.width;b.height=e.height;b.owner=e.owner}function htmlEntities(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#39;")}(function(b){b.perc_sessionTimeout=function(j){var q={serverCheck:10,sessionStateUrl:"/Rhythmyx/sessioncheck",logoutUrl:"/Rhythmyx/logout",dialogTitle:"Are you still there?",dialogMessageTimeout:"You will be automatically logged out in"};var z=q;if(j){z=b.extend(q,j)}var D={expiry:0,warning:0,counter:0};var F=null;var x;var A;var B=new Date().getTime();var e=(window.opener&&window.opener!==window);function h(J){var K="";if(J){K="extendSession=true";y()}var I=new Date().getTime();b.ajax({url:z.sessionStateUrl,type:"get",cache:false,data:K,contentType:"application/json; charset=utf-8",dataType:"json",success:function(L){D=L;B=I;C()},error:function(L,N,M){console.log("error :"+L.responseText);D.expiry=D.expiry+I-B;B=I;C()}})}function C(){if(D.expiry<=0){G()}else{if(D.expiry<D.warning){if(F===null){E()}}else{if(F!==null){y()}window.clearInterval(A);if(D.warning<D.expiry){A=window.setTimeout(function(){h(false)},D.expiry-D.warning)}}}}function f(){var J=new Date().getTime();var I=(J-B);var K=D.expiry-I;if(K>0){b("#logouttime").html(k(K));if(I>z.serverCheck*1000){h(false)}}else{y();h(false)}}function E(){F=n();window.clearInterval(x);f();x=window.setInterval(function(){f()},1000)}function y(){window.clearInterval(x);if(F!==null){F.remove();F=null}}function k(L){var M=Math.floor((L/1000)%60);var K=Math.floor((L/1000/60)%60);var I=Math.floor((L/(1000*60*60))%24);var J="";if(I>0){J+=I+" hour";if(I>1){J+="s"}J+=" "}return J+K+" min "+M+"s"}function G(){y();if(e){b.get("/Rhythmyx/logout",function(I){window.close()})}else{top.document.location.href="/Rhythmyx/logout"}}function H(){y();h(true)}function n(){F=I();function I(){var J="<div id='perc-session-timeout-content'><p>"+z.dialogMessageTimeout+'</p><p><span id="logouttime"/></p></div>';var K=b(J).perc_dialog({title:z.dialogTitle,id:"perc-session-timeout-dialog",width:400,resizable:false,modal:true,buttons:{"Extend Session":function(){H()},Logout:function(){G()}}});return b(K)}return F}h(false)}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,C){var n,D=C.location,z=Array.prototype.slice,F=decodeURIComponent,b=$.param,f,y,J,e=$.bbq=$.bbq||{},E,I,q,j=$.event.special,h="hashchange",O="querystring",R="fragment",M="elemUrlAttr",x="href",H="src",L=/^.*\?|#.*$/g,K=/^.*\#/,Q={};function S(T){return typeof T==="string"}function P(U){var T=z.call(arguments,1);return function(){return U.apply(this,T.concat(z.call(arguments)))}}function A(T){return T.replace(/^[^#]*#?(.*)$/,"$1")}function B(T){return T.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function k(V,aa,T,W,U){var ac,Z,Y,ab,X;if(W!==n){Y=T.match(V?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);X=Y[3]||"";if(U===2&&S(W)){Z=W.replace(V?K:L,"")}else{ab=y(Y[2]);W=S(W)?y[V?R:O](W):W;Z=U===2?W:U===1?$.extend({},W,ab):$.extend({},ab,W);Z=b(Z)}ac=Y[1]+(V?"#":Z||!Y[1]?"?":"")+Z+X}else{ac=aa(T!==n?T:D[x])}return ac}b[O]=P(k,0,B);b[R]=f=P(k,1,A);$.deparam=y=function(W,T){var V={},U={"true":!0,"false":!1,"null":null};$.each(W.replace(/\+/g," ").split("&"),function(Z,ae){var Y=ae.split("="),ad=F(Y[0]),X,ac=V,aa=0,af=ad.split("]["),ab=af.length-1;if(/\[/.test(af[0])&&/\]$/.test(af[ab])){af[ab]=af[ab].replace(/\]$/,"");af=af.shift().split("[").concat(af);ab=af.length-1}else{ab=0}if(Y.length===2){X=F(Y[1]);if(T){X=X&&!isNaN(X)?+X:X==="undefined"?n:U[X]!==n?U[X]:X}if(ab){for(;aa<=ab;aa++){ad=af[aa]===""?ac.length:af[aa];ac=ac[ad]=aa<ab?ac[ad]||(af[aa+1]&&isNaN(af[aa+1])?{}:[]):X}}else{if($.isArray(V[ad])){V[ad].push(X)}else{if(V[ad]!==n){V[ad]=[V[ad],X]}else{V[ad]=X}}}}else{if(ad){V[ad]=T?n:""}}});return V};function N(V,T,U){if(T===n||typeof T==="boolean"){U=T;T=b[V?R:O]()}else{T=S(T)?T.replace(V?K:L,""):T}return y(T,U)}y[O]=P(N,0);y[R]=J=P(N,1);$[M]||($[M]=function(T){return $.extend(Q,T)})({a:x,base:x,iframe:H,img:H,input:H,form:"action",link:x,script:H});q=$[M];function G(W,U,V,T){if(!S(V)&&typeof V!=="object"){T=V;V=U;U=n}return this.each(function(){var Z=$(this),X=U||q()[(this.nodeName||"").toLowerCase()]||"",Y=X&&Z.attr(X)||"";Z.attr(X,b[W](Y,V,T))})}$.fn[O]=P(G,O);$.fn[R]=P(G,R);e.pushState=E=function(W,T){if(S(W)&&/^#/.test(W)&&T===n){T=2}var V=W!==n,U=f(D[x],V?W:{},V?T:2);D[x]=U+(/#/.test(U)?"":"#")};e.getState=I=function(T,U){return T===n||typeof T==="boolean"?J(T):J(U)[T]};e.removeState=function(T){var U={};if(T!==n){U=I();$.each($.isArray(T)?T:arguments,function(W,V){delete U[V]})}E(U,2)};j[h]=$.extend(j[h],{add:function(T,V,U){return function(X){var W=X[R]=f();X.getState=function(Y,Z){return Y===n||typeof Y==="boolean"?y(W,Y):y(W,Z)[Y]};T.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,n){var k=n.location,q,x=$.event.special,e="hashchange",h=$.browser,j=h.msie&&h.version<8,f="on"+e in n&&!j;function b(y){y=y||k.href;return y.replace(/^[^#]*#?(.*)$/,"$1")}$[e+"Delay"]=100;x[e]=$.extend(x[e],{setup:function(){if(f){return false}q.start()},teardown:function(){if(f){return false}q.stop()}});q=(function(){var y={},D,z,A,C;function B(){A=C=function(E){return E};if(j){z=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;C=function(){return b(z.document.location.href)};A=function(G,E){if(G!==E){var F=z.document;F.open().close();F.location.hash="#"+G}};A(b())}}y.start=function(){if(D){return}var F=b();A||B();(function E(){var H=b(),G=C(F);if(H!==F){A(F=H,G);$(n).trigger(e)}else{if(G!==F){k.href=k.href.replace(/#.*/,"")+"#"+G}}D=setTimeout(E,$[e+"Delay"])})()};y.stop=function(){if(!z){D&&clearTimeout(D);D=0}};return y})()})(jQuery,this);jQuery.cookie=function(e,x,A){if(typeof x!="undefined"){A=A||{};if(x===null){x="";A.expires=-1}var j="";if(A.expires&&(typeof A.expires=="number"||A.expires.toUTCString)){var k;if(typeof A.expires=="number"){k=new Date();k.setTime(k.getTime()+(A.expires*24*60*60*1000))}else{k=A.expires}j="; expires="+k.toUTCString()}var z=A.path?"; path="+(A.path):"";var n=A.domain?"; domain="+(A.domain):"";var b=A.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(x),j,z,n,b].join("")}else{var h=null;if(document.cookie&&document.cookie!=""){var y=document.cookie.split(";");for(var q=0;q<y.length;q++){var f=jQuery.trim(y[q]);if(f.substring(0,e.length+1)==(e+"=")){h=decodeURIComponent(f.substring(e.length+1));break}}}return h}};(function(j){var G="success";var h="error";var C="abort";var H="DELETE";var e="GET";var f="POST";var n="PUT";j.PercServiceUtils={STATUS_ERROR:h,STATUS_SUCCESS:G,STATUS_ABORT:C,TYPE_DELETE:H,TYPE_GET:e,TYPE_POST:f,TYPE_PUT:n,makeJsonRequest:x,makeXmlRequest:F,makeRequest:E,makeXdmJsonRequest:q,makeDeleteRequest:k,extractDefaultErrorMessage:A,extractFieldErrorCode:b,extractGlobalErrorCode:z,makeXdmXmlRequest:D,convertMapToArray:B};j.ajaxSetup({timeout:60000});function x(L,Q,S,T,M,N,R){var U=this;var K=j.isFunction(j.getCm1License)?j.getCm1License():"";var O=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var J=j.perc_utils.percParseInt(R);var P={dataType:"json",async:!S,contentType:"application/json",type:Q,url:L,headers:{"perc-tid":K,"perc-version":O},success:function(X,W){var V={data:X,textstatus:W};T(U.STATUS_SUCCESS,V)},error:function(Y,W,X){if(Y.status==204||Y.status==1223){var V={data:{},textstatus:Y.statusText};T(U.STATUS_SUCCESS,V);return}else{if(Y.status>0){var V={request:Y,textstatus:W,error:X};T(U.STATUS_ERROR,V)}else{if(j.isFunction(N)){N(U.STATUS_ABORT)}}}}};if(M){j.extend(P,{data:JSON.stringify(M)})}if(J){j.extend(P,{timeout:J})}return j.ajax(P)}function E(K,Q,R,U,L,T,S,O,M){var V=this;var J=j.isFunction(j.getCm1License)?j.getCm1License():"";var N=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var P={dataType:S,async:!R,contentType:T,type:Q,url:(O)?K:escape(K),headers:{"perc-tid":J,"perc-version":N},success:function(Y,X){var W={data:Y,textstatus:X};U(V.STATUS_SUCCESS,W)},error:function(Z,X,Y){if(Z.status==204||Z.status==1223){var W={data:{},textstatus:Z.statusText};U(V.STATUS_SUCCESS,W);return}else{if(Z.status>0){var W={request:Z,textstatus:X,error:Y};U(V.STATUS_ERROR,W)}else{if(j.isFunction(M)){M(V.STATUS_ABORT)}}}}};if(L){j.extend(P,{data:JSON.stringify(L)})}j.ajax(P)}function D(M,K,Q,R,N){var S=this;var L=j.isFunction(j.getCm1License)?j.getCm1License():"";var P=j.isFunction(j.getCm1Version)?j.getCm1Version():"";if(typeof(easyXDM)=="undefined"){S.makeJsonRequest(K,Q,false,R,N);return}if(R==null||typeof(R)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(Q==S.TYPE_GET||Q==S.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(M==null||typeof(M)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){M=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var O=new easyXDM.Rpc({remote:M+"/perc-common-ui/cors/"},{remote:{request:{}}});var J={url:K,headers:{"Content-Type":"application/json",Accept:"application/xml,text/plain","perc-tid":L,"perc-version":P},method:Q,timeout:60000};if(N!=null&&N!=""&&typeof(N)!="undefined"){J.data=easyXDM.getJSONObject().stringify(N)}O.request(J,function(T){var U=T.headers["Content-Type"]=="application/json";var V={data:U?JSON.parse(T.data):T.data,status:T.status};R(S.STATUS_SUCCESS,V)},function(T){var U={message:T.message,status:T.status};R(S.STATUS_ERROR,U)})}function q(M,K,Q,R,N){var S=this;var L=j.isFunction(j.getCm1License)?j.getCm1License():"";var P=j.isFunction(j.getCm1Version)?j.getCm1Version():"";if(typeof(easyXDM)=="undefined"){S.makeJsonRequest(K,Q,false,R,N);return}if(R==null||typeof(R)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(Q==S.TYPE_GET||Q==S.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(M==null||typeof(M)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){M=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var O=new easyXDM.Rpc({remote:M+"/perc-common-ui/cors/"},{remote:{request:{}}});var J={url:K,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":L,"perc-version":P},method:Q,timeout:60000};if(N!=null&&N!=""&&typeof(N)!="undefined"){J.data=easyXDM.getJSONObject().stringify(N)}O.request(J,function(T){var U=T.headers["Content-Type"]=="application/json";var V={data:U?JSON.parse(T.data):T.data,status:T.status};R(S.STATUS_SUCCESS,V)},function(T){var U={message:T.message,status:T.status};R(S.STATUS_ERROR,U)})}function F(J,P,Q,R,M,L){var S=this;var K=j.isFunction(j.getCm1License)?j.getCm1License():"";var N=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var O={dataType:"xml",async:!Q,contentType:"text/xml",type:P,url:J,headers:{"perc-tid":K,"perc-version":N},success:function(V,U){var T={data:V,textstatus:U};R(S.STATUS_SUCCESS,T)},error:function(W,U,V){if(W.status>0){var T={request:W,textstatus:U,error:V};R(S.STATUS_ERROR,T)}else{if(j.isFunction(L)){L(S.STATUS_ABORT)}}}};if(M){j.extend(O,{data:M})}j.ajax(O)}function k(J,P,Q,M,L){var R=this;var K=j.isFunction(j.getCm1License)?j.getCm1License():"";var N=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var O={dataType:"text",async:!P,contentType:"text/xml",type:R.TYPE_DELETE,url:J,headers:{"perc-tid":K,"perc-version":N},success:function(U,T){var S={data:U,textstatus:T};Q(R.STATUS_SUCCESS,S)},error:function(V,T,U){if(V.status>0){var S={request:V,textstatus:T,error:U};Q(R.STATUS_ERROR,S)}else{if(j.isFunction(L)){L(R.STATUS_ABORT)}}}};if(M){j.extend(O,{data:M})}j.ajax(O)}function A(M){var Q="";if(M==null||typeof(M)=="undefined"){return""}if(typeof(M.responseText)=="undefined"&&typeof(M.message)!="undefined"){M.responseText=M.message}if(M.responseText==null||M.responseText.length==0){return""}var L=null;try{L=JSON.parse(M.responseText);if(j.browser.msie&&!L&&typeof(M.responseText)=="string"&&M.responseText.length>0){return M.responseText}}catch(P){}if(L!=null&&L.Errors){var O="";if(typeof(L.defaultMessage)!="undefined"){O=L.defaultMessage}else{if(typeof(L.Errors.globalError.defaultMessage)!="undefined"){O=L.Errors.globalError.defaultMessage}else{if(typeof(L.Errors.localizedMessage)!="undefined"){O=L.Errors.localizedMessage}else{if(typeof(L.Errors.globalError.code)!="undefined"){var N=M.status==500?"Server Error: ":"";O=N+L.Errors.globalError.code}}}}Q+=O}else{if(L!=null&&L.ValidationErrors!=undefined){var K=L.ValidationErrors;if(K.fieldErrors!=undefined){Q+=y(K.fieldErrors)}else{if(K.globalErrors!=undefined){Q+=y(K.globalErrors)}else{if(K.globalError!=undefined){Q+=y(K.globalError)}}}}}var J;if(typeof(M.responseText)!="undefined"&&M.responseText.indexOf("<?xml")!=-1){J=j(M.responseText)}else{if(typeof(M)=="string"&&M.indexOf("<?xml")!=-1){J=j(M)}}if(typeof(J)!="undefined"&&J.is("ValidationErrors")){if(J.find("globalErrors").find("defaultMessage").text()!=""){Q+=J.find("globalErrors").find("defaultMessage").text()}else{if(J.find("globalError").find("defaultMessage").text()!=""){Q+=J.find("globalError").find("defaultMessage").text()!=""}else{if(J.next("defaultMessage")){Q+=J.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(Q==""){Q=M.responseText}return Q}function y(J){J=j.makeArray(J);var K="";for(var L=0;L<J.length;L++){var M=J[L];if(M.defaultMessage){K+=I(M.defaultMessage,M.arguments)}else{if(M.code){K+=M.code}}}return K}function I(M,J){J=j.makeArray(J);var L="";for(var K=0;K<J.length;K++){L=new RegExp("\\{"+K+"\\}","g");M=M.replace(L,J[K])}return M}function b(L){var K=JSON.parse(L.responseText);if(K.ValidationErrors==undefined){return""}var J=K.ValidationErrors;if(J.fieldErrors!=undefined){return J.fieldErrors.code}return""}function z(L){var K=JSON.parse(L.responseText);if(K.ValidationErrors==undefined){return""}var J=K.ValidationErrors;if(J.globalError!=undefined){return J.globalError.code}return""}function B(K){var L=[];if(j.isArray(K.entry)){L=K.entry}else{if(K.entry){L.push(K.entry)}}var J=[];j(L).each(function(){J[this.key]=this.value});return J}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:500,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.curCSS($E[0],"display",true)=="none"){hidden=true;visibility=$.curCSS($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.curCSS($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.curCSS($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.curCSS($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.curCSS($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.curCSS($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");input.attr("id",settings.fieldid);$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}textarea.attr("id",settings.fieldid);$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");select.attr("id",settings.fieldid);$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},fieldid:"jeditable_inline_field"}})(jQuery);(function(e){e.tools=e.tools||{};e.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var f;function b(D,B){var G=this,E=e(this),h=!B.vertical,j=D.children(),z=0,x;if(!f){f=G}e.each(B,function(H,I){if(e.isFunction(I)){E.bind(H,I)}});if(j.length>1){j=e(B.items,D)}function A(I){var H=e(I);return B.globalNav?H:D.parent().find(I)}D.data("finder",A);var k=A(B.prev),q=A(B.next),n=A(B.prevPage),C=A(B.nextPage);e.extend(G,{getIndex:function(){return z},getClickIndex:function(){var H=G.getItems();return H.index(H.filter("."+B.activeClass))},getConf:function(){return B},getSize:function(){return G.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/B.size)},getPageIndex:function(){return Math.ceil(z/B.size)},getNaviButtons:function(){return k.add(q).add(n).add(C)},getRoot:function(){return D},getItemWrap:function(){return j},updateItemWrap:function(){j=G.getRoot().children()},getItems:function(){return j.children(B.item)},getVisibleItems:function(){return G.getItems().slice(z,z+B.size)},seekTo:function(H,L,I){if(H<0){H=0}if(z===H){return G}if(e.isFunction(L)){I=L}if(H>G.getSize()-B.size){return B.loop?G.begin():this.end()}var J=G.getItems().eq(H);if(!J.length){return G}var K=e.Event("onBeforeSeek");E.trigger(K,[H]);if(K.isDefaultPrevented()){return G}if(L===undefined||e.isFunction(L)){L=B.speed}function M(){if(I){I.call(G,H)}E.trigger("onSeek",[H])}if(h){j.animate({left:-J.position().left},L,B.easing,M)}else{j.animate({top:-J.position().top},L,B.easing,M)}f=G;z=H;K=e.Event("onStart");E.trigger(K,[H]);if(K.isDefaultPrevented()){return G}k.add(n).toggleClass(B.disabledClass,H===0);q.add(C).toggleClass(B.disabledClass,H>=G.getSize()-B.size);return G},move:function(J,I,H){x=J>0;return this.seekTo(z+J,I,H)},next:function(I,H){return this.move(1,I,H)},prev:function(I,H){return this.move(-1,I,H)},movePage:function(L,K,J){x=L>0;var H=B.size*L;var I=z%B.size;if(I>0){H+=(L>0?-I:B.size-I)}return this.move(H,K,J)},prevPage:function(I,H){return this.movePage(-1,I,H)},nextPage:function(I,H){return this.movePage(1,I,H)},setPage:function(I,J,H){return this.seekTo(I*B.size,J,H)},begin:function(I,H){x=false;return this.seekTo(0,I,H)},end:function(I,H){x=true;var J=this.getSize()-B.size;return J>0?this.seekTo(J,I,H):G},reload:function(){E.trigger("onReload");return G},focus:function(){f=G;return G},click:function(J){var K=G.getItems().eq(J),H=B.activeClass,I=B.size;if(J<0||J>=G.getSize()){return G}if(I==1){if(B.loop){return G.next()}if(J===0||J==G.getSize()-1){x=(x===undefined)?true:!x}return x===false?G.prev():G.next()}if(I==2){if(J==z){J--}G.getItems().removeClass(H);K.addClass(H);return G.seekTo(J,time,fn)}if(!K.hasClass(H)){G.getItems().removeClass(H);K.addClass(H);var M=Math.floor(I/2);var L=J-M;if(L>G.getSize()-I){L=G.getSize()-I}if(L!==J){return G.seekTo(L)}}return G},bind:function(H,I){E.bind(H,I);return G},unbind:function(H){E.unbind(H);return G}});e.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(H,I){G[I]=function(J){return G.bind(I,J)}});k.addClass(B.disabledClass).click(function(){G.prev()});q.click(function(){G.next()});C.click(function(){G.nextPage()});if(G.getSize()<B.size){q.add(C).addClass(B.disabledClass)}n.addClass(B.disabledClass).click(function(){G.prevPage()});var y=B.hoverClass,F="keydown."+Math.random().toString().substring(10);G.onReload(function(){if(y){G.getItems().hover(function(){e(this).addClass(y)},function(){e(this).removeClass(y)})}if(B.clickable){G.getItems().each(function(H){e(this).unbind("click.scrollable").bind("click.scrollable",function(I){if(e(I.target).is("a")){return}return G.click(H)})})}if(B.keyboard){e(document).unbind(F).bind(F,function(H){if(H.altKey||H.ctrlKey){return}if(B.keyboard!="static"&&f!=G){return}var I=B.keyboardSteps;if(h&&(H.keyCode==37||H.keyCode==39)){G.move(H.keyCode==37?-I:I);return H.preventDefault()}if(!h&&(H.keyCode==38||H.keyCode==40)){G.move(H.keyCode==38?-I:I);return H.preventDefault()}return true})}else{e(document).unbind(F)}});G.reload()}e.fn.scrollable=function(h){var j=this.eq(typeof h=="number"?h:0).data("scrollable");if(j){return j}var k=e.extend({},e.tools.scrollable.conf);h=e.extend(k,h);h.keyboardSteps=h.keyboardSteps||h.size;this.each(function(){j=new b(e(this),h);e(this).data("scrollable",j)});return h.api?j:this}})(jQuery);(function(e){e.fn.wheel=function(j){return this[j?"bind":"trigger"]("wheel",j)};e.event.special.wheel={setup:function(){e.event.add(this,h,f,{})},teardown:function(){e.event.remove(this,h,f)}};var h=!e.browser.mozilla?"mousewheel":"DOMMouseScroll"+(e.browser.version<"1.9"?" mousemove":"");function f(j){switch(j.type){case"mousemove":return e.extend(j.data,{clientX:j.clientX,clientY:j.clientY,pageX:j.pageX,pageY:j.pageY});case"DOMMouseScroll":e.extend(j,j.data);j.delta=-j.detail/3;break;case"mousewheel":j.delta=j.wheelDelta/120;break}j.type="wheel";return e.event.handle.call(this,j,j.delta)}var b=e.tools.scrollable;b.plugins=b.plugins||{};b.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};e.fn.mousewheel=function(k){var n=e.extend({},b.plugins.mousewheel.conf),j;if(typeof k=="number"){k={speed:k}}k=e.extend(n,k);this.each(function(){var q=e(this).scrollable();if(q){j=q}q.getRoot().wheel(function(x,y){q.move(y<0?1:-1,k.speed||50);return false})});return k.api?j:this}})(jQuery);
/* jQuery Validation Plugin - v1.10.0 - 9/7/2012
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2012 Jrn Zaefferer; Licensed MIT, GPL */
(function(b){b.extend(b.fn,{validate:function(e){if(!this.length){e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var f=b.data(this[0],"validator");return f?f:(this.attr("novalidate","novalidate"),f=new b.validator(e,this[0]),b.data(this[0],"validator",f),f.settings.onsubmit&&(this.validateDelegate(":submit","click",function(h){f.settings.submitHandler&&(f.submitButton=h.target),b(h.target).hasClass("cancel")&&(f.cancelSubmit=!0)}),this.submit(function(h){function j(){var k;return f.settings.submitHandler?(f.submitButton&&(k=b("<input type='hidden'/>").attr("name",f.submitButton.name).val(f.submitButton.value).appendTo(f.currentForm)),f.settings.submitHandler.call(f,f.currentForm,h),f.submitButton&&k.remove(),!1):!0}return f.settings.debug&&h.preventDefault(),f.cancelSubmit?(f.cancelSubmit=!1,j()):f.form()?f.pendingRequest?(f.formSubmitted=!0,!1):j():(f.focusInvalid(),!1)})),f)},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}var e=!0,f=b(this[0].form).validate();return this.each(function(){e&=f.element(this)}),e},removeAttrs:function(e){var h={},f=this;return b.each(e.split(/\s/),function(k,j){h[j]=f.attr(j),f.removeAttr(j)}),h},rules:function(C,B){var A=this[0];if(C){var z=b.data(A.form,"validator").settings,y=z.rules,x=b.validator.staticRules(A);switch(C){case"add":b.extend(x,b.validator.normalizeRule(B)),y[A.name]=x,B.messages&&(z.messages[A.name]=b.extend(z.messages[A.name],B.messages));break;case"remove":if(!B){return delete y[A.name],x}var q={};return b.each(B.split(/\s/),function(f,e){q[e]=x[e],delete x[e]}),q}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(A),b.validator.classRules(A),b.validator.attributeRules(A),b.validator.staticRules(A)),A);if(n.required){var k=n.required;delete n.required,n=b.extend({required:k},n)}return n}}),b.extend(b.expr[":"],{blank:function(e){return !b.trim(""+e.value)},filled:function(e){return !!b.trim(""+e.value)},unchecked:function(e){return !e.checked}}),b.validator=function(e,f){this.settings=b.extend(!0,{},b.validator.defaults,e),this.currentForm=f,this.init()},b.validator.format=function(e,f){return arguments.length===1?function(){var h=b.makeArray(arguments);return h.unshift(e),b.validator.format.apply(this,h)}:(arguments.length>2&&f.constructor!==Array&&(f=b.makeArray(arguments).slice(1)),f.constructor!==Array&&(f=[f]),b.each(f,function(h,j){e=e.replace(new RegExp("\\{"+h+"\\}","g"),j)}),e)},b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(f,e){this.lastActive=f,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,f,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(f)).hide())},onfocusout:function(f,e){!this.checkable(f)&&(f.name in this.submitted||!this.optional(f))&&this.element(f)},onkeyup:function(f,e){if(e.which===9&&this.elementValue(f)===""){return}(f.name in this.submitted||f===this.lastActive)&&this.element(f)},onclick:function(f,e){f.name in this.submitted?this.element(f):f.parentNode.name in this.submitted&&this.element(f.parentNode)},highlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).addClass(h).removeClass(f):b(e).addClass(h).removeClass(f)},unhighlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).removeClass(h).addClass(f):b(e).removeClass(h).addClass(f)}},setDefaults:function(e){b.extend(b.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function f(j){var n=b.data(this[0].form,"validator"),k="on"+j.type.replace(/^validate/,"");n.settings[k]&&n.settings[k].call(n,this[0],j)}this.labelContainer=b(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm),this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};b.each(this.settings.groups,function(k,j){b.each(j.split(/\s/),function(n,q){e[q]=k})});var h=this.settings.rules;b.each(h,function(j,k){h[j]=b.validator.normalizeRule(k)}),b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f),this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),b.extend(this.submitted,this.errorMap),this.invalid=b.extend({},this.errorMap),this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var f=0,e=this.currentElements=this.elements();e[f];f++){this.check(e[f])}return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=b(e);var f=this.check(e)!==!1;return f?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),f},showErrors:function(e){if(e){b.extend(this.errorMap,e),this.errorList=[];for(var f in e){this.errorList.push({message:e[f],element:this.findByName(f)[0]})}this.successList=b.grep(this.successList,function(h){return !(h.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(f){var e=0;for(var h in f){e++}return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var e=this.lastActive;return e&&b.grep(this.errorList,function(f){return f.element.name===e.name}).length===1&&e},elements:function(){var e=this,f={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in f||!e.objectLength(b(this).rules())?!1:(f[this.name]=!0,!0)})},clean:function(e){return b(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=b([]),this.toHide=b([]),this.currentElements=b([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var h=b(e).attr("type"),f=b(e).val();return h==="radio"||h==="checkbox"?b('input[name="'+b(e).attr("name")+'"]:checked').val():typeof f=="string"?f.replace(/\r/g,""):f},check:function(j){j=this.validationTargetFor(this.clean(j));var A=b(j).rules(),z=!1,y=this.elementValue(j),x;for(var q in A){var n={method:q,parameters:A[q]};try{x=b.validator.methods[q].call(this,y,j,n.parameters);if(x==="dependency-mismatch"){z=!0;continue}z=!1;if(x==="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!x){return this.formatAndAdd(j,n),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+n.method+"' method",k),k}}if(z){return}return this.objectLength(A)&&this.successList.push(j),!0},customMetaMessage:function(e,h){if(!b.metadata){return}var f=this.settings.meta?b(e).metadata()[this.settings.meta]:b(e).metadata();return f&&f.messages&&f.messages[h]},customDataMessage:function(e,f){return b(e).data("msg-"+f.toLowerCase())||e.attributes&&b(e).attr("data-msg-"+f.toLowerCase())},customMessage:function(f,e){var h=this.settings.messages[f];return h&&(h.constructor===String?h:h[e])},findDefined:function(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined){return arguments[e]}}return undefined},defaultMessage:function(e,f){return this.findDefined(this.customMessage(e.name,f),this.customDataMessage(e,f),this.customMetaMessage(e,f),!this.settings.ignoreTitle&&e.title||undefined,b.validator.messages[f],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(f,k){var j=this.defaultMessage(f,k.method),h=/\$?\{(\d+)\}/g;typeof j=="function"?j=j.call(this,k.parameters,f):h.test(j)&&(j=b.validator.format(j.replace(h,"{$1}"),k.parameters)),this.errorList.push({message:j,element:f}),this.errorMap[f.name]=j,this.submitted[f.name]=j},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var f,e;for(f=0;this.errorList[f];f++){var h=this.errorList[f];this.settings.highlight&&this.settings.highlight.call(this,h.element,this.settings.errorClass,this.settings.validClass),this.showLabel(h.element,h.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success){for(f=0;this.successList[f];f++){this.showLabel(this.successList[f])}}if(this.settings.unhighlight){for(f=0,e=this.validElements();e[f];f++){this.settings.unhighlight.call(this,e[f],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(e,h){var f=this.errorsFor(e);f.length?(f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.attr("generated")&&f.html(h)):(f=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(h||""),this.settings.wrapper&&(f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,b(e)):f.insertAfter(e))),!h&&this.settings.success&&(f.text(""),typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f,e)),this.toShow=this.toShow.add(f)},errorsFor:function(e){var f=this.idOrName(e);return this.errors().filter(function(){return b(this).attr("for")===f})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return b(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,f){switch(f.nodeName.toLowerCase()){case"select":return b("option:selected",f).length;case"input":if(this.checkable(f)){return this.findByName(f.name).filter(":checked").length}}return e.length},depend:function(f,e){return this.dependTypes[typeof f]?this.dependTypes[typeof f](f,e):!0},dependTypes:{"boolean":function(f,e){return f},string:function(e,f){return !!b(e,f.form).length},"function":function(f,e){return f(e)}},optional:function(e){var f=this.elementValue(e);return !b.validator.methods.required.call(this,f,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,f){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],f&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!f&&this.pendingRequest===0&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return b.data(e,"previousValue")||b.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,f){e.constructor===String?this.classRuleSettings[e]=f:b.extend(this.classRuleSettings,e)},classRules:function(e){var h={},f=b(e).attr("class");return f&&b.each(f.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(h,b.validator.classRuleSettings[this])}),h},attributeRules:function(h){var q={},n=b(h);for(var k in b.validator.methods){var j;k==="required"?(j=n.get(0).getAttribute(k),j===""&&(j=!0),j=!!j):j=n.attr(k),j?q[k]=j:n[0].getAttribute("type")===k&&(q[k]=!0)}return q.maxlength&&/-1|2147483647|524288/.test(q.maxlength)&&delete q.maxlength,q},metadataRules:function(e){if(!b.metadata){return{}}var f=b.data(e.form,"validator").settings.meta;return f?b(e).metadata()[f]:b(e).metadata()},staticRules:function(e){var h={},f=b.data(e.form,"validator");return f.settings.rules&&(h=b.validator.normalizeRule(f.settings.rules[e.name])||{}),h},normalizeRules:function(e,f){return b.each(e,function(k,j){if(j===!1){delete e[k];return}if(j.param||j.depends){var h=!0;switch(typeof j.depends){case"string":h=!!b(j.depends,f.form).length;break;case"function":h=j.depends.call(f,f)}h?e[k]=j.param!==undefined?j.param:!0:delete e[k]}}),b.each(e,function(j,h){e[j]=b.isFunction(h)?h(f):h}),b.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),b.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),b.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if(typeof e=="string"){var f={};b.each(e.split(/\s/),function(){f[this]=!0}),e=f}return e},addMethod:function(e,h,f){b.validator.methods[e]=h,b.validator.messages[e]=f!==undefined?f:b.validator.messages[e],h.length<3&&b.validator.addClassRules(e,b.validator.normalizeRule(e))},methods:{required:function(f,k,j){if(!this.depend(j,k)){return"dependency-mismatch"}if(k.nodeName.toLowerCase()==="select"){var h=b(k).val();return h&&h.length>0}return this.checkable(k)?this.getLength(f,k)>0:b.trim(f).length>0},remote:function(h,x,q){if(this.optional(x)){return"dependency-mismatch"}var n=this.previousValue(x);this.settings.messages[x.name]||(this.settings.messages[x.name]={}),n.originalMessage=this.settings.messages[x.name].remote,this.settings.messages[x.name].remote=n.message,q=typeof q=="string"&&{url:q}||q;if(this.pending[x.name]){return"pending"}if(n.old===h){return n.valid}n.old=h;var k=this;this.startRequest(x);var j={};return j[x.name]=h,b.ajax(b.extend(!0,{url:q,mode:"abort",port:"validate"+x.name,dataType:"json",data:j,success:function(A){k.settings.messages[x.name].remote=n.originalMessage;var z=A===!0||A==="true";if(z){var y=k.formSubmitted;k.prepareElement(x),k.formSubmitted=y,k.successList.push(x),delete k.invalid[x.name],k.showErrors()}else{var f={},e=A||k.defaultMessage(x,"remote");f[x.name]=n.message=b.isFunction(e)?e(h):e,k.invalid[x.name]=!0,k.showErrors(f)}n.valid=z,k.stopRequest(x,z)}},q)),"pending"},minlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j},maxlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h<=j},rangelength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j[0]&&h<=j[1]},min:function(f,e,h){return this.optional(e)||f>=h},max:function(f,e,h){return this.optional(e)||f<=h},range:function(f,e,h){return this.optional(e)||f>=h[0]&&f<=h[1]},email:function(f,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(f)},url:function(f,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(f)},date:function(f,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(f))},dateISO:function(f,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(f)},number:function(f,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(f)},digits:function(f,e){return this.optional(e)||/^\d+$/.test(f)},creditcard:function(j,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(j)){return !1}var y=0,x=0,q=!1;j=j.replace(/\D/g,"");for(var n=j.length-1;n>=0;n--){var k=j.charAt(n);x=parseInt(k,10),q&&(x*=2)>9&&(x-=9),y+=x,q=!q}return y%10===0},equalTo:function(f,k,j){var h=b(j);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(k).valid()}),f===h.val()}}}),b.format=b.validator.format})(jQuery),function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(b,n,k){var j=b.port;b.mode==="abort"&&(e[j]&&e[j].abort(),e[j]=k)})}else{var h=f.ajax;f.ajax=function(k){var j=("mode" in k?k:f.ajaxSettings).mode,b=("port" in k?k:f.ajaxSettings).port;return j==="abort"?(e[b]&&e[b].abort(),e[b]=h.apply(this,arguments)):h.apply(this,arguments)}}}(jQuery),function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(e,h){function f(j){return j=b.event.fix(j),j.type=h,b.event.handle.call(this,j)}b.event.special[h]={setup:function(){this.addEventListener(e,f,!0)},teardown:function(){this.removeEventListener(e,f,!0)},handler:function(j){var k=arguments;return k[0]=b.event.fix(j),k[0].type=h,b.event.handle.apply(this,k)}}}),b.extend(b.fn,{validateDelegate:function(e,h,f){return this.bind(h,function(k){var j=b(k.target);if(j.is(e)){return f.apply(j,arguments)}})}})}(jQuery);(function(j){var e={},z,B,D,y=j.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),b=false;j.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){j.tooltip.blocked=!j.tooltip.blocked}};j.fn.extend({tooltip:function(E){E=j.extend({},j.tooltip.defaults,E);q(E);return this.each(function(){j.data(this,"tooltip",E);this.tOpacity=e.parent.css("opacity");this.tooltipText=this.title;j(this).removeAttr("title");this.alt=""}).mouseover(A).mouseout(k).click(k)},fixPNG:y?function(){return this.each(function(){var E=j(this).css("backgroundImage");if(E.match(/^url\(["']?(.*\.png)["']?\)$/i)){E=RegExp.$1;j(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+E+"')"}).each(function(){var F=j(this).css("position");if(F!="absolute"&&F!="relative"){j(this).css("position","relative")}})}})}:function(){return this},unfixPNG:y?function(){return this.each(function(){j(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){j(this)[j(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function q(E){if(e.parent){return}e.parent=j('<div id="'+E.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(j.fn.bgiframe){e.parent.bgiframe()}e.title=j("h3",e.parent);e.body=j("div.body",e.parent);e.url=j("div.url",e.parent)}function f(E){return j.data(E,"tooltip")}function n(E){if(f(this).delay){D=setTimeout(C,f(this).delay)}else{C()}b=!!f(this).track;j(document.body).bind("mousemove",h);h(E)}function A(){if(j.tooltip.blocked||this==z||(!this.tooltipText&&!f(this).bodyHandler)){return}z=this;B=this.tooltipText;if(f(this).bodyHandler){e.title.hide();var H=f(this).bodyHandler.call(this);if(H.nodeType||H.jquery){e.body.empty().append(H)}else{e.body.html(H)}e.body.show()}else{if(f(this).showBody){var G=B.split(f(this).showBody);e.title.html(G.shift()).show();e.body.empty();for(var F=0,E;(E=G[F]);F++){if(F>0){e.body.append("<br/>")}e.body.append(E)}e.body.hideWhenEmpty()}else{e.title.html(B).show();e.body.hide()}}if(f(this).showURL&&j(this).url()){e.url.html(j(this).url().replace("http://","")).show()}else{e.url.hide()}e.parent.addClass(f(this).extraClass);if(f(this).fixPNG){e.parent.fixPNG()}n.apply(this,arguments)}function C(){D=null;if((!y||!j.fn.bgiframe)&&f(z).fade){if(e.parent.is(":animated")){e.parent.stop().show().fadeTo(f(z).fade,z.tOpacity)}else{e.parent.is(":visible")?e.parent.fadeTo(f(z).fade,z.tOpacity):e.parent.fadeIn(f(z).fade)}}else{e.parent.show()}h()}function h(H){if(j.tooltip.blocked){return}if(H&&H.target.tagName=="OPTION"){return}if(!b&&e.parent.is(":visible")){j(document.body).unbind("mousemove",h)}if(z==null){j(document.body).unbind("mousemove",h);return}e.parent.removeClass("viewport-right").removeClass("viewport-bottom");var J=e.parent[0].offsetLeft;var I=e.parent[0].offsetTop;if(H){J=H.pageX+f(z).left;I=H.pageY+f(z).top;var F="auto";if(f(z).positionLeft){F=j(window).width()-J;J="auto"}e.parent.css({left:J,right:F,top:I})}var E=x(),G=e.parent[0];if(E.x+E.cx<G.offsetLeft+G.offsetWidth){J-=G.offsetWidth+20+f(z).left;e.parent.css({left:J+"px"}).addClass("viewport-right")}if(E.y+E.cy<G.offsetTop+G.offsetHeight){I-=G.offsetHeight+20+f(z).top;e.parent.css({top:I+"px"}).addClass("viewport-bottom")}}function x(){return{x:j(window).scrollLeft(),y:j(window).scrollTop(),cx:j(window).width(),cy:j(window).height()}}function k(G){if(j.tooltip.blocked){return}if(D){clearTimeout(D)}z=null;var F=f(this);function E(){e.parent.removeClass(F.extraClass).hide().css("opacity","")}if((!y||!j.fn.bgiframe)&&F.fade){if(e.parent.is(":animated")){e.parent.stop().fadeTo(F.fade,0,E)}else{e.parent.stop().fadeOut(F.fade,E)}}else{E()}if(f(this).fixPNG){e.parent.unfixPNG()}}})(jQuery);(function(e){var b=["3gp","3g2","7z","ace","air","swf","fxp","pdf","ppd","aac","aif","avi","dxf","dwf","bin","bmp","sh","btif","bz","bz2","csh","dae","cgm","wbs","dvi","dtd","dra","dts","dwg","xif","f4v","flv","gtar","gif","h261","h263","h264","ico","ief","jad","jar","class","jnlp","jpm","jpg","jpeg","jpgv","m3u","m4v","mdb","asf","exe","cab","clp","mdi","xls","xlsb","xltm","xlsm","chm","mny","xlsx","xltx","docx","dotx","ppt","mpp","pub","vsd","wm","wma","doc","wps","xps","mid","mpga","mpeg","mp4a","mp4","oda","ogx","oga","ogv","osf","odb","odi","odp","ots","odt","sxd","otf","psd","pic","pbm","png","ai","pbd","qt","rar","rm","rtf","rtx","svg","sdc","sda","sdd","smf","sdw","sgl","au","tiff","tar","ttf","vcd","wav","hlp","wsdl","zip"];e.validator.addMethod("noBinary",function(k,j){var h=e.trim(k).match(/[\w_.-]*?(?=[\?#])|[\w_.-]*$/i);if(typeof(h[0])!="undefined"){var f=h[0].split(".")}if(typeof(f[f.length-1])!="undefined"){var n=f[f.length-1]}return this.optional(j)||e.inArray(n.toLowerCase(),b)==-1});e.validator.addMethod("perc_remote",function(q,h,x){if(this.optional(h)){return"dependency-mismatch"}var k=this.previousValue(h);if(!this.settings.messages[h.name]){this.settings.messages[h.name]={}}x=typeof x=="string"&&{url:x}||x;var j=null;if("handler" in x){j=x.handler}if(k.old!==q){k.old=q;var f=this;this.startRequest(h);var n={};n[h.name]=q;e.ajax(e.extend(true,{url:x,mode:"abort",port:"validate"+h.name,dataType:"json",data:n,success:function(z){var A=j==null?z===true:j(f,h.name,q,z);if(A){var y=f.formSubmitted;f.prepareElement(h);f.formSubmitted=y;f.successList.push(h);f.showErrors()}else{var B={};if(typeof(z)!="string"){z=false}B[h.name]=k.message=z||f.defaultMessage(h,"perc_remote");f.showErrors(B)}k.valid=A;f.stopRequest(h,A)}},x));return"pending"}else{if(this.pending[h.name]){return"pending"}}return k.valid})})(jQuery);(function(b){b.PercDirtyController={dirtyState:false,dirtyObjectType:"object",utils:b.perc_utils,saveCallback:function(){},navigationEvent:function(){if(this.dirtyState){return"This "+this.dirtyObjectType+" contains unsaved changes.\nIf you continue, all changes will be lost.\nClick OK to proceed and discard changes,\nCancel to return to the "+this.dirtyObjectType+" you were editing."}},setDirty:function(f,e){this.dirtyState=f;this.dirtyObjectType=e;this.saveCallback=function(){}},setDirty:function(h,f,e){this.dirtyState=h;this.dirtyObjectType=f;this.saveCallback=e},isDirty:function(){return this.dirtyState},confirmIfDirty:function(j,e,f){if(this.dirtyState){var h=this.setConfirmDialogOptions(j,e,f);this.utils.confirm_dialog(h)}else{j()}},setConfirmDialogOptions:function(n,h,j){var e=this.dirtyObjectType;h=h||function(){};var f=this;var k={id:"perc-editor-page-dirty",title:"Unsaved Edits",success:function(){f.setDirty(false);n()},cancel:h,yes:"Continue anyway"};if(f.isSaveOptionAllowed()){k.dontSaveCallback=j&&j.dontSaveCallback?function(){f.setDirty(false);j.dontSaveCallback()}:k.success;k.type="SAVE_BEFORE_CONTINUE";k.question="You will lose your edits if you do not save. Save your edits before leaving this tab?";k.width="356px";k.save=f.saveCallback||function(){}}else{k.type="CANCEL_CONTINUE";k.question="This page contains unsaved edits. All edits will be lost. CONTINUE?";k.width="326px"}j=j||{};b.extend(k,j);return k},isSaveOptionAllowed:function(){var e=b.PercNavigationManager.getView();return(e==b.PercNavigationManager.VIEW_EDIT_TEMPLATE||e==b.PercNavigationManager.VIEW_EDITOR||e==b.PercNavigationManager.VIEW_WIDGET_BUILDER)}}})(jQuery);(function(Q){Q.PercNavigationManager={};var q="";var I={};var h="";var y="";var Y="";var B="";var A={};var D="";var U="";var Z=false;var F=false;var af=false;var L="";var K=false;var H=false;var O=[];var k={};var ad=false;var ac=false;var G;var x="";var z=null;var X={URL_BASE:"/cm/app/",MODE_EDIT:"edit",MODE_READONLY:"readonly",VIEW_EDIT_ASSET:"editAsset",VIEW_HOME:"home",VIEW_DASHBOARD:"dash",VIEW_DESIGN:"design",VIEW_EDITOR:"editor",VIEW_SITE_ARCH:"arch",VIEW_PUBLISH:"publish",VIEW_USERS:"users",VIEW_WORKFLOW:"workflow",VIEW_WIDGET_BUILDER:"widgetbuilder",PATH_TYPE_PAGE:"page",PATH_TYPE_ASSET:"asset",PATH_TYPE_UNKNOWN:"unknown",VIEW_EDIT_TEMPLATE:"editTemplate"};function ab(){Q.perc_sessionTimeout();n();N();if(x){alert(x)}}function V(ah){var ag=ah.type;switch(ag){case"site":W(ah);break;case"percPage":T(ah);break;case"Folder":M(ah);break;case"FSFolder":M(ah);break;default:if(ah.category=="ASSET"){aa(ah)}}}function W(ah){if(!(Z||F)){Q.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this site."});return}var ag=X.VIEW_SITE_ARCH;if(h==X.VIEW_DESIGN){ag=X.VIEW_DESIGN}if(h==X.VIEW_PUBLISH){ag=X.VIEW_PUBLISH}S(ah.id,ag,y,null,null,ah.path,null,null)}function T(ai,ah){var ag=Q.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(ag!=null){Q.PercViewReadyManager.showRenderingProgressWarning();return}Q.PercFolderHelper().getAccessLevelById(ai.id,false,function(ak,aj){if(ak==Q.PercFolderHelper().PERMISSION_ERROR){Q.perc_utils.alert_dialog({title:"Error",content:aj});return}else{if(ah&&aj==Q.PercFolderHelper().PERMISSION_READ){Q.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the page '"+ai.name+"'."})}else{var am=J(ai.path);var al=ah?X.MODE_EDIT:X.MODE_READONLY;S(am,X.VIEW_EDITOR,al,ai.id,ai.name,ai.path,X.PATH_TYPE_PAGE,null)}}})}function M(ah){if(ah.type=="FSFolder"){var ag=ah.path;var ai=ag.split("/");if(Q.Percussion.getCurrentFinderView()!=Q.Percussion.PERC_FINDER_VIEW_COLUMN){return}else{if(ai.length>5){Q.perc_utils.makeFolderEditable(ah)}else{Q.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  It cannot be renamed."});return}}}}function aa(ah,ag){Q.PercFolderHelper().getAccessLevelById(ah.id,false,function(aj,ai){if(aj==Q.PercFolderHelper().PERMISSION_ERROR){Q.perc_utils.alert_dialog({title:"Error",content:ai});return}else{if(ag&&ai==Q.PercFolderHelper().PERMISSION_READ){Q.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the asset '"+ah.name+"'."})}else{var ak=ag?X.MODE_EDIT:X.MODE_READONLY;S(null,X.VIEW_EDIT_ASSET,ak,ah.id,ah.name,ah.path,X.PATH_TYPE_ASSET,null)}}})}function S(an,ak,aj,ai,ao,am,al,ag){var ah=j(an,ak,aj,ai,ao,am,al,ag);Q.PercBlockUI(Q.PercBlockUIMode.CURSORONLY);Q.PercQueuePostAJAX(function(){E(ah)})}function ae(ag){return Q.param.querystring(X.URL_BASE,ag)}function j(an,ak,aj,ai,ao,am,al,ag){var ah={view:ak};if(!P(an)){Q.extend(ah,{site:an})}if(!P(aj)){Q.extend(ah,{mode:aj})}if(!P(ai)){Q.extend(ah,{id:ai})}if(!P(ao)){Q.extend(ah,{name:ao})}if(!P(am)){Q.extend(ah,{path:am})}if(K){Q.extend(ah,{debug:"true"})}if(H){Q.extend(ah,{at:"true"})}if(ag!=null&&typeof(ag)=="object"){Q.extend(ah,{memento:JSON.stringify(ag)})}if(!P(al)){Q.extend(ah,{pathType:al})}if(ac){Q.extend(ah,{disableJS:"true"})}return ah}function R(){var aj=window.location;var ak=aj.protocol;ak+="//";ak+=aj.host;var ah=0;for(var ag in A){++ah}var ai=ah==0?null:encodeURIComponent(A);ak+=ae(j(q,h,y,U,D,Y,B,ai));return ak}function e(ag){var ah=X.PATH_TYPE_UNKNOWN;if(ag){if(ag.indexOf(Q.perc_paths.ASSETS_ROOT+"/")==0){ah=X.PATH_TYPE_ASSET}if(ag.indexOf(Q.perc_paths.SITES_ROOT+"/")==0){ah=X.PATH_TYPE_PAGE}}return ah}function J(ah){var ag=Q.perc_paths.SITES_ROOT+"/";if(ah.indexOf(ag)===0){var ai=ah.indexOf("/",ag.length);if(ai==-1){ai=ah.length-1}return ah.substring(ag.length,ai)}return""}function n(){var ag=Q.deparam.querystring();q=ag.site;h=ag.view;y=ag.mode;Y=ag.path;U=ag.id;D=ag.name;K=ag.debug;H=ag.at;B=ag.pathType;x=ag.warningMessage;ac=(ag.disableJS=="true"?true:false);if(typeof(ag.memento)!="undefined"){A=JSON.parse(decodeURIComponent(ag.memento))}}function N(){L=Q.cookie("perc_userName");Z=Q.cookie("perc_isAdmin")=="true"?true:false;F=Q.cookie("perc_isDesigner")=="true"?true:false;af=Q.cookie("perc_isAccessibilityUser")=="true"?true:false;Q.perc_utils.info("UserInfo","userName: "+L+", isAdmin: "+Z+", isDesigner: "+F+", isAccessibilityUser: "+af)}function E(aj){var ah=ae(aj);var ag=O.length;if(ag==0){window.location.href=ah;return}var ak=b();k[ak]={url:ah,listenerTotal:ag,continueFlag:true,listenersComplete:0};for(var ai=0;ai<ag;ai++){Q.unblockUI();O[ai](ah,ak,C,aj)}}function C(ai,ag){var ah=k[ai];ah.continueFlag&=ag;++ah.listenersComplete;if(ah.listenersComplete==ah.listenerTotal){if(ah.continueFlag){Q.PercBlockUI(Q.PercBlockUIMode.CURSORONLY);window.location.href=ah.url}else{delete k[ai];Q.unblockUI()}}}function b(){var aj=[];var ag="0123456789ABCDEF";for(var ah=0;ah<32;ah++){aj[ah]=ag.substr(Math.floor(Math.random()*16),1)}aj[12]="4";aj[16]=ag.substr((aj[16]&3)|8,1);var ai=aj.join("");return ai}function P(ag){return(ag==null||ag.length==0)}var f={getBookmark:R,getSiteName:function(){return q},getMemento:function(){return A},clearMemento:function(){A={}},getView:function(){return h},getMode:function(){return y},setMode:function(ag){y=ag},clearId:function(){U=""},getId:function(){return U},getName:function(){return D},setName:function(ag){D=ag},getPath:function(){return Y},setPath:function(ag){Y=ag},getUserName:function(){return L},isAutoTest:function(){return H},isDebug:function(){return K},isAdmin:function(){return Z},isDesigner:function(){return F},isAccessibilityUser:function(){return af},isJavascriptOff:function(){return ac},isReopenAllowed:function(){return ad},setReopenAllowed:function(ag){ad=ag},getPathType:function(){if(B){return B}return e(Y)},goTo:function(ah,ag){if(ag){S(q,ah,null,null,null,Y,null,null)}else{S(q,ah,null,U,D,Y,B,null)}},goToDashboard:function(){f.goTo(X.VIEW_DASHBOARD,true)},goToLocation:function(ak,an,ai,al,am,ah,aj,ag){S(an,ak,ai,al,am,ah,aj,ag)},handleOpenAsset:aa,handleOpenPage:T,registerFinder:function(ah){z=ah;ah.addOpenListener(V);ah.addPathChangedListener(function(ak){if(ah.finderOpenInProgress){return}var ai=ak.slice(1);var aj="/"+ai.join("/");Y=aj});var ag=Y;Y=Y?Y:"/Sites";if(Y){z.open(Y.split("/"),function(){Y=ag})}},addLocationChangeListener:function(ag){if(Q.inArray(ag,O)==-1){O.push(ag)}},removeLocationChangeListener:function(ai){if(Q.inArray(ai,openListeners)>-1){var ag=O.length;for(var ah=0;ah<ag;ah++){if(O[ah]===ai){O.splice(ah,1);return}}}},openPathItem:function(ag){Q.PercPathService.getPathItemForPath(ag,function(ah,ai){if(ah==Q.PercServiceUtils.STATUS_SUCCESS){ai.PathItem.path=ag;V(ai.PathItem)}else{Q.perc_utils.alert_dialog({title:"Error",content:ai});return}})},openPage:function(ah,ag){Q.PercPathService.getPathItemForPath(ah,function(ai,aj){if(ai==Q.PercServiceUtils.STATUS_SUCCESS){aj.PathItem.path=ah;T(aj.PathItem,ag)}else{Q.perc_utils.alert_dialog({title:"Error",content:aj});return}})},openAsset:function(ag){Q.PercPathService.getPathItemById(ag.id,function(ah,ai){if(ah==Q.PercServiceUtils.STATUS_SUCCESS){ai.PathItem.path=ag.path;aa(ai.PathItem,false)}else{Q.perc_utils.alert_dialog({title:"Error",content:ai});return}})},openFolderDialog:function(ag){Q.PercPathService.getPathItemForPath(ag,function(ah,ai){if(ah==Q.PercServiceUtils.STATUS_SUCCESS){ai.PathItem.path=ag;M(ai.PathItem)}else{Q.perc_utils.alert_dialog({title:"Error",content:ai});return}})},loadSiteProperties:function(ag,ah){Q.PercSiteService.getSiteProperties(ag,function(aj,ai){if(aj==Q.PercServiceUtils.STATUS_SUCCESS){I=ai.SiteProperties;if(typeof(ah)=="function"){ah(ai.SiteProperties)}}})},getSiteProperties:function(){return I},setTemplateModel:function(ag){G=ag},getTemplateModel:function(ag){return G}};Q.extend(Q.PercNavigationManager,f);Q.extend(Q.PercNavigationManager,X);ab()})(jQuery);(function(b){b.PercFolderHelper=function(){var f={getAccessLevelByPath:e,getAccessLevelById:h};var k={PERMISSION_READ:"READ",PERMISSION_WRITE:"WRITE",PERMISSION_ADMIN:"ADMIN",PERMISSION_SUCCESS:"SUCCESS",PERMISSION_ERROR:"ERROR"};var j={};b.extend(j,f);b.extend(j,k);return j;function e(x,n,y){var q=b.perc_finder().getPathItemByPath(x);if(!n||!q){b.PercPathService.getPathItemForPath(x,function(A,z){if(A==b.PercServiceUtils.STATUS_ERROR){y(k.PERMISSION_ERROR,z);return}y(k.PERMISSION_SUCCESS,z.PathItem.accessLevel)})}else{y(k.PERMISSION_SUCCESS,q.accessLevel)}}function h(n,q,y){var x=b.perc_finder().getPathItemById(n);if(!q||!x){b.PercPathService.getPathItemById(n,function(A,z,B){if(A==b.PercServiceUtils.STATUS_ERROR){y(k.PERMISSION_ERROR,z,B);return}y(k.PERMISSION_SUCCESS,z.PathItem.accessLevel)})}else{y(k.PERMISSION_SUCCESS,x.accessLevel)}}}})(jQuery);(function(b){b.PercFolderPropertiesDialog=function(){var j;var f="";var h="";var k="";function e(x,D){b.PercPathService.getFolderProperties(x.id,F);var n=30;var C;var B;var y=undefined;function F(I,P){var N=this;if(I==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Folder not found: "+x.path});D("",false);return}var K=x.path.split("/");if(!f){f=x.folderPath;h=x.folderPaths;k=x.type}var L=(K!=undefined&&K.length==4&&K[1]=="Assets");var O=b.PercFolderHelper().PERMISSION_ADMIN;var J=P.data.FolderProperties;var M=[];if(J.permission){O=J.permission.accessLevel;if(J.permission.writePrincipals){M=J.permission.writePrincipals;M=b.isArray(M)?M:[M]}}var H=[];H[0]=O==b.PercFolderHelper().PERMISSION_READ?" selected='true' ":"";H[1]=O==b.PercFolderHelper().PERMISSION_WRITE?" selected='true' ":"";H[2]=O==b.PercFolderHelper().PERMISSION_ADMIN?" selected='true' ":"";B=b("<div><p class='perc-field-error' id='perc-save-error'></p><div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-folder-general-properties-container'><div><label for='perc-folder-name'class='perc-required-field'>"+I18N.message("perc.ui.folderPropsDialog.label@Name")+":</label> <br/> <input type='text' class='required' tabindex='"+n+"' id='perc-folder-name' name='folder_name' maxlength='50' value=\""+J.name+"\"/> <br/><label id='perc_folder_duplicate_error' style='display: none;' class='perc_field_error'></label><br/></div></div></div><div class='fieldGroup'><div id='perc-user-permissions-container'><label for='perc-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/><select name='perc-folder-permission' id='perc-folder-permission'>     <option id='perc-folder-permission-option-read'  "+H[0]+" value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' "+H[1]+" value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option>     <option id='perc-folder-permission-option-admin' "+H[2]+" value='"+b.PercFolderHelper().PERMISSION_ADMIN+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Admin")+"</option></select><input type='hidden' id='perc-folder-id' value='"+J.id+"'></input><input type='hidden' id='perc-folder-oldname' value=\""+J.name+"\"></input><div id='perc-folder-permission-users'/></div></div><div class='fieldGroup' id='perc-asset-folder-security' style='display:none;'><div id='perc-asset-folder-sites-container'><label>Assets in this folder are available to:<br/></label></div></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.folderPropsDialog.title@Folder Properties"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var Q=new Array();if(N.listEdit.isEnabled()){var R=N.listEdit.getListItems();for(u=0;u<R.length;u++){Q[u]={name:R[u],type:"USER"}}}z(Q)},id:"perc-folder-props-save"},Cancel:{click:function(){E()},id:"perc-folder-props-cancel"}},id:"perc-folder-props-dialog",width:"500px"});var G=[];for(u=0;u<M.length;u++){G[u]=M[u].name}b.PercUserService.getUsers(function(Q,R){if(Q==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",R);return}N.listEdit=b.PercListEditorWidget({container:"perc-folder-permission-users",items:G,results:b.perc_utils.convertCXFArray(R.UserList.users),toggler:b("#perc-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")});q();if(L){b.PercServiceUtils.makeJsonRequest(b.perc_paths.SITES_ALL+"/",b.PercServiceUtils.TYPE_GET,false,function(T,ab){if(T==b.PercServiceUtils.STATUS_SUCCESS){b("#perc-asset-folder-security").show();var Z=B.find("#perc-asset-folder-sites-container");var W=b("<select name='allowed-sites' id='allowed-sites' multiple='multiple'></select>");Z.append(W);var V=[];if(J.allowedSites!=undefined){if(typeof(J.allowedSites)=="number"){V.push(J.allowedSites.toString())}else{V=J.allowedSites.split(",")}}j=V.sort().join(",");var Y=ab.data.SiteSummary;for(var aa=0;aa<Y.length;aa++){var S=(b.inArray(Y[aa].siteId.toString(),V)>=0);var U=b("<option/>").attr("value",Y[aa].siteId).attr("title",Y[aa].name).text(Y[aa].name);if(S){U.attr("selected","selected")}W.append(U)}y=b("#allowed-sites").multiselect({height:175,minWidth:225,checkAllText:"Select all",uncheckAllText:"Deselect all",noneSelectedText:"All sites allowed",selectedText:function(ad,ae,ac){if(ad==0){return"All sites allowed"}else{return"Some sites allowed"}}});b("input[name=multiselect_allowed-sites]").unbind("click");b("input[name=multiselect_allowed-sites]").bind("click",function(ac){b("#allowed-sites").multiselect("update")});b("a.ui-multiselect-all").unbind("click.multiselect");b("a.ui-multiselect-all").bind("click.multiselect",function(ac){b("#allowed-sites").multiselect("checkAll")});b("a.ui-multiselect-none").unbind("click.multiselect");b("a.ui-multiselect-none").bind("click.multiselect",function(ac){b("#allowed-sites").multiselect("uncheckAll")})}else{var X=b.PercServiceUtils.extractDefaultErrorMessage(ab.request);b.perc_utils.alert_dialog({title:"Error",content:X})}})}else{b("#perc-asset-folder-security").hide()}})}function E(){B.remove()}function z(K){if(b.trim(b("#perc-folder-name").val()).length<1){b("#perc-folder-name").val("");b("#perc_folder_duplicate_error").text("This field is required.");b("#perc_folder_duplicate_error").show();return}var J=b.trim(b("#perc-folder-name").val());J=b.perc_textFilters.WINDOWS_FILE_NAME(J);var I={FolderProperties:{name:J,id:b("#perc-folder-id").val(),permission:{accessLevel:b("#perc-folder-permission").val(),writePrincipals:K}}};if(y!=undefined){var H=[];b.each(y.multiselect("getChecked"),function(L){H.push(b(this).val())});if(H.length>0){I.FolderProperties.allowedSites=H.sort().join(",")}else{I.FolderProperties.allowedSites=""}}if(j!=undefined&&I.FolderProperties.allowedSites!=j){var G={id:"perc-folder-properties-changed-allowed-sites-warning",title:"Warning",content:"Please note that content already queued for incremental publish will not be affected by this security change.",okCallBack:function(){b.PercPathService.saveFolderProperties(I,A)}};b.perc_utils.alert_dialog(G)}else{b.PercPathService.saveFolderProperties(I,A)}}function A(I,G){if(I==b.PercServiceUtils.STATUS_SUCCESS){var H=b.trim(b("#perc-folder-name").val());B.remove();if(f.match("^/Sites/")||f.match("^//Sites/")){b.PercRedirectHandler.createRedirect(f,h+"/"+H,"folder").fail(function(M){b.perc_utils.alert_dialog({title:"Redirect creation error",content:M,okCallBack:function(){D(H)}})}).done(function(){D(H)})}else{D(H)}}else{var L=b.PercServiceUtils.extractDefaultErrorMessage(G.request);var J=b.PercServiceUtils.extractFieldErrorCode(G.request);if(J=="`FolderProperties#name"){var K="Cannot rename folder '"+b("#perc-folder-oldname").val()+"' to '"+b.trim(b("#perc-folder-name").val())+"' because an object with the same name already exists.";b("#perc_folder_duplicate_error").text(K);b("#perc_folder_duplicate_error").show()}else{if(J=="saveFolderProperties#reservedName"){b("#perc_folder_duplicate_error").text(L);b("#perc_folder_duplicate_error").show()}else{b.perc_utils.alert_dialog({title:"Error",content:L})}}}}function q(){var H=b("#perc-folder-props-dialog");var G=[{groupName:"perc-folder-general-properties-container",groupLabel:"General"},{groupName:"perc-user-permissions-container",groupLabel:"Permissions"},{groupName:"perc-asset-folder-sites-container",groupLabel:"Security"}];b.each(G,function(J){var K=(J==0)?"perc-section-items-minimizer":"perc-section-items-maximizer";var I="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span class='perc-min-max "+K+"' ></span>"+this.groupLabel+"</div></div>";H.find("#"+this.groupName).before(I);J!=0&&H.find("#"+this.groupName).hide()});H.find(".perc-section-label").unbind().click(function(){var I=b(this);I.find(".perc-min-max").toggleClass("perc-section-items-minimizer").toggleClass("perc-section-items-maximizer");H.find("#"+I.attr("groupName")).toggle()})}b.perc_filterField(b("#perc-folder-name"),b.perc_textFilters.URL)}return{open:e}}})(jQuery);(function(f){var b=13;var e=5;f.PercFinderTreeConstants={ROOT_PATH_ALL:"All",ROOT_PATH_SITES:"Sites",ROOT_PATH_ASSETS:"Assets",FOLDERS_ONLY:"Folders",SECTIONS_ONLY:"Sections",MAX_RESULTS:200,FOLDER_ID:null,convertFolderPathToPath:function(h){var j=null;if(!h){return j}if(h.indexOf("//Sites")!=-1){j=h.replace("//Sites",f.perc_paths.SITES_ROOT)}else{if(h.indexOf("//Folders/$System$/Assets")!=-1){j=h.replace("//Folders/$System$/Assets",f.perc_paths.ASSETS_ROOT)}}return j}};f.widget("ui.PercFinderTree",{settings:{rootPath:f.PercFinderTreeConstants.ROOT_PATH_ALL,showFoldersOnly:false,filter:null,height:"200px",width:"290px",onClick:function(h){},onRenderComplete:function(h,j){},classNames:{},initialPath:null,getInitialPathItem:function(h){},onQueryActivate:function(){return true},onQuerySelect:function(){return true},clickFolderMode:3,acceptableTypes:"",acceptableCategories:""},_init:function(){var h=this;f.extend(this.settings,this.options);var j=this.settings.rootPath;if(!(j==f.PercFinderTreeConstants.ROOT_PATH_ALL||j==f.PercFinderTreeConstants.ROOT_PATH_SITES||j==f.PercFinderTreeConstants.ROOT_PATH_ASSETS)){this.settings.rootPath=f.PercFinderTreeConstants.ROOT_PATH_ALL}f(this.element).css("width",this.settings.width);f(this.element).css("height",this.settings.height);f(this.element).css("overflow","auto");f(this.element).append(f("<div id='perc-finder-tree'></div>"));this.intialPathExpanded=true;this.initialRenderCompleted=false;this.intialPathKey=null;if(this.settings.initialPath&&this.settings.initialPath!=null&&f.trim(this.settings.initialPath).length>0){this.intialPathExpanded=false;this.intialPathKey=this._generateKey(this.settings.initialPath)}f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_FOLDER+"/",f.PercServiceUtils.GET,false,function(n,k){if(n==f.PercServiceUtils.STATUS_ERROR){var q=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:q});dtnode.setLazyNodeStatus(DTNodeStatus_Error)}else{h._initTree(k.data)}},null)},_initTree:function(n){var j=this;var q=[];var h=j._normalizedPath(j.settings.initialPath);f.each(n.PathItem,function(){var x=j.settings.rootPath==f.PercFinderTreeConstants.ROOT_PATH_ALL||j.settings.rootPath==this.name;if(this.name=="Design"||this.name=="Search"){x=false}if(x){var z=j._makeDtNode(this);f.extend(z,{unselectable:true});var y=j._normalizedPath(this.path);if(h==y){f.extend(z,{activate:true});j.intialPathExpanded=true}q.push(z)}});var k=f(this.element).find("#perc-finder-tree").dynatree({selectMode:1,rootVisible:false,autoFocus:false,imagePath:" ",children:q,clickFolderMode:j.settings.clickFolderMode,onQuerySelect:j.settings.onQuerySelect,onQueryActivate:j.settings.onQueryActivate,classNames:j.settings.classNames,onRender:function(z){if(z.data.type!=="SHOW_MORE"){var x=f(z.span);var y=x.parents("ul").length-1;x.css("padding-left",y*b+e)}else{var x=f(z.span);var y=x.parents("ul").length-3;x.css("padding-left",y*b+e)}},onLazyRead:function(x){j._loadChildren(x)},onClick:function(x){if(x.data.type==="SHOW_MORE"&&!x.data.isShowing){x.data.isShowing=true;x.data.icon="/cm/css/dynatree/skin/loading.gif";x.render();j._loadMoreChildren(x);return}j._onClick(x);j.getFolderID(x)},onExpand:function(x,y){if(y.type==="SHOW_MORE"){return}j._onExpand(x,y)}});k.dynatree("getRoot").visit(function(x){x.expand(true)})},_loadChildren:function(q){var j=this,k,h=q.data,n;if(j.settings.showFoldersOnly){k=f.perc_paths.PATH_FOLDER+h.pathItem.path}else{k=f.perc_paths.PATH_PAGINATED_FOLDER+h.pathItem.path+"?startIndex=1&maxResults="+f.PercFinderTreeConstants.MAX_RESULTS;if(j.settings.acceptableTypes){k+="&type="+j.settings.acceptableTypes}if(j.settings.acceptableCategories){k+="&category="+j.settings.acceptableCategories}}f.PercServiceUtils.makeJsonRequest(k,f.PercServiceUtils.GET,false,function(y,x){if(y==f.PercServiceUtils.STATUS_ERROR){var z=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:z});q.setLazyNodeStatus(DTNodeStatus_Error)}else{j._addChildren(q,x.data)}},null)},_addChildren:function(x,q){var n=null,j=this;var h=j.settings.showFoldersOnly?q.PathItem:q.PagedItemList.childrenInPage;if(!h){x.setLazyNodeStatus(DTNodeStatus_Ok);return}if(!f.isArray(h)){h=[h]}f.each(h,function(){var A=j.settings.showFoldersOnly&&this.leaf;if(typeof this.category!="undefined"&&j.settings.filter!=null){A=A||(j.settings.filter==f.PercFinderTreeConstants.FOLDERS_ONLY&&this.category!="FOLDER"&&this.category!="SYSTEM");A=A||(j.settings.filter==f.PercFinderTreeConstants.SECTIONS_ONLY&&this.category!="SECTION_FOLDER")}if(!A){var C=j._makeDtNode(this);var z=x.addChild(C);if(!j.intialPathExpanded){var B=j._normalizedPath(this.path);var y=j._normalizedPath(j.settings.initialPath);if(y==B){z.activate();j.settings.getInitialPathItem(z.data.pathItem);j.intialPathExpanded=true}else{if(y.indexOf(B)!=-1){n=z}}}}});if(!j.settings.showFoldersOnly&&q.PagedItemList.startIndex+f.PercFinderTreeConstants.MAX_RESULTS-1<q.PagedItemList.childrenCount){var k=j._makeMoreResultsDtNode(q.PagedItemList.startIndex+f.PercFinderTreeConstants.MAX_RESULTS,x);x.addChild(k)}j._adjustScrollWidths();x.setLazyNodeStatus(DTNodeStatus_Ok);if(n){n.expand(true)}else{if(!j.initialRenderCompleted){j.settings.onRenderComplete(x.data.pathItem,x);j.initialRenderCompleted=true}}},_loadMoreChildren:function(n){var j=this,k,h=n.data;k=f.perc_paths.PATH_PAGINATED_FOLDER+h.parentNode.data.pathItem.path+"?startIndex="+h.startIndex+"&maxResults="+f.PercFinderTreeConstants.MAX_RESULTS;f.PercServiceUtils.makeJsonRequest(k,f.PercServiceUtils.GET,false,function(x,q){if(x==f.PercServiceUtils.STATUS_ERROR){var y=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:y});n.setLazyNodeStatus(DTNodeStatus_Error)}else{j._addChildren(h.parentNode,q.data);n.remove()}},null)},_onExpand:function(h,j){this._adjustScrollWidths()},_adjustScrollWidths:function(h){},_onClick:function(h){this.settings.onClick(h.data.pathItem)},getSelectedItems:function(){var j=[];var h=f("#perc-finder-tree").dynatree("getSelectedNodes");f.each(h,function(){j.push(this.data.pathItem)});return j},getFolderID:function(n){var j=n.data.pathItem.id;if(typeof j!="undefined"){var k=j.split("-");var h=k[2];f.PercFinderTreeConstants.FOLDER_ID=h}return h},getDynaTree:function(){return f("#perc-finder-tree").dynatree("getTree")},_makeDtNode:function(x){var h=this;var k=f.perc_utils.extract_path(x.path);var n=f.perc_utils.choose_icon(x.type,x.icon,k);var j=this._generateKey(x.path);var q={title:x.name,isFolder:!x.leaf,isLazy:true,icon:n,tooltip:x.name,pathItem:x,key:j};if(x.leaf){f.extend(q,{addClass:"perc-hide-node-expander"})}return q},_makeMoreResultsDtNode:function(q,h){var j=this;var k="-- Show More --";var n={title:k,isLazy:true,tooltip:k,addClass:"perc-hide-node-expander",startIndex:q,type:"SHOW_MORE",isShowing:false,parentNode:h};return n},_generateKey:function(h){if(!h){return null}if(h&&h.length>1&&h.substring(h.length-1)=="/"){h=h.slice(0,h.length-1)}return h.replace(/[^a-zA-Z0-9/]/g,"_").replace(/\//g,"-")},_normalizedPath:function(h){if(!h||h.length<1){return h}if(h.substring(h.length-1,h.length)!="/"){return h+"/"}return h}})})(jQuery);(function(e){e.PercPathSelectionDialog={open:b};function b(B){var n={okCallback:function(){},cancelCallback:function(){},dialogTitle:"Select path",rootPath:e.PercFinderTreeConstants.ROOT_PATH_SITES,emptySelectionMessage:"Please select a page.",initialPath:null,createNew:{},showFoldersOnly:false,selectedItemValidator:e.noop,acceptableTypes:"",acceptableCategories:""};var j=null;var k=e.extend(n,B);if(!k.initialPath){k.initialPath=null}var h=null;var q=null;var f=A(k);var x={};var y={click:function(){if(k.selectedItemValidator&&e.isFunction(k.selectedItemValidator)){var C=k.selectedItemValidator(h);if(C!=null){f.find("label[for='perc-path-location']").text(C).show();return}}q.remove();k.okCallback(h)},id:"perc-path-selection-dialog-save"};var z={click:function(){q.remove();k.cancelCallback()},id:"perc-path-selection-dialog-cancel"};x.Ok=y;x.Cancel=z;q=e(f).perc_dialog({resizable:false,title:k.dialogTitle,modal:true,closeOnEscape:true,percButtons:x,id:"perc-path-selection-dialog",width:400});function A(){var F=k.initialPath?k.initialPath:"";var D=e('<div class="perc-path-selector-container"><div class="perc-label" style="height:10px;"><span style="float:left;font-weight:bold">Select from path:</span><span class="perc-create-new-button" style="float:right;margin-right:55px;display:none"></span></div></div>');if(k.createNew&&k.createNew.label&&k.createNew.onclick){var C=function(G){q.remove();k.okCallback(G)};var E=function(){};D.find(".perc-create-new-button").show().click(function(){k.createNew.onclick(C,E)}).append('<a class="perc-font perc-font-button" href="#"><i class="'+k.createNew.iconclass+'"></i> '+k.createNew.label+"</a>")}j=e("<div class='perc-path-selection-tree' style='margin-top:20px;'>").PercFinderTree({rootPath:k.rootPath,initialPath:k.initialPath,showFoldersOnly:k.showFoldersOnly,acceptableTypes:k.acceptableTypes,acceptableCategories:k.acceptableCategories,height:"230px",width:"600px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},getInitialPathItem:function(G){h=G},onClick:function(G){h=G;e("#perc_selected_path").html(G.path);if(e.inArray(G.category,k.selectableTypes)!=-1){f.find("label[for='perc-select-blog-location-tree']").hide()}}});D.append(j);D.append('<div style="margin-top:10px;"><span style="color:gray; font-weight:bold">Selected item path:</span> <span id="perc_selected_path">'+F+"</span></div>");D.append('<label for="perc-path-location" class="perc_field_error" style="display: none;"></label>');return D}}})(jQuery);(function(h){h.PercCreateNewAssetDialog=function(q,n,y){h.PercCreateNewAssetDialogData={};h.PercCreateNewAssetDialogData.successCallback=n;h.PercCreateNewAssetDialogData.cancelCallback=y;h.PercAssetService.getAssetEditor(q,function(A,z){if(A==h.PercServiceUtils.STATUS_ERROR){h.perc_utils.alert_dialog({title:"Error creating new asset",content:z})}if(h.PercFinderTreeConstants.FOLDER_ID!=null){z.AssetEditor.legacyFolderId=h.PercFinderTreeConstants.FOLDER_ID}h.PercCreateNewAssetDialogData.assetEditor=z.AssetEditor;x()});function x(){var B=h.PercCreateNewAssetDialogData.assetEditor;var A=B.url+"&sys_folderid="+B.legacyFolderId+"&sys_workflowid="+B.workflowId;var z="<div id='create-new-asset-content-dlg'><iframe name='create-new-asset-content-frame' id='create-new-asset-content-frame'height='100%' FRAMEBORDER='0' width='100%' src='"+A+"'></iframe></div>";dialog=h(z).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:815,width:965,percButtons:{Save:{click:function(){e(n)},id:"perc-create-new-asset-save-button"},Cancel:{click:function(){dialog.remove();h.PercCreateNewAssetDialogData.cancelCallback()},id:"perc-create-new-asset-cancel-button"}},id:"perc-create-new-asset-dialog"})}};function e(n){h.PercBlockUI();var q=h.PercCreateNewAssetDialogData.assetEditor;k("#perc-content-edit-sys_workflowid").val(q.workflowId);var y=q.url;y=y.split("?")[0];var z=q.legacyFolderId;y=y+"?sys_folderid="+z+"&sys_asset_folderid="+z;k("#perc-content-form").attr("action",y);var x=true;h.each(h.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){x=false}});if(!x){h.unblockUI();return}h.PercContentPreSubmitHandlers.clearHandlers();h("#create-new-asset-content-frame").contents().find("#perc-content-form").submit();h("#create-new-asset-content-frame").unbind("load",b).load(b)}function f(x,q,n){return true}function b(){if(h("#create-new-asset-content-frame").contents().find("#perc-content-edit-errors").length>0){h.unblockUI();return}var n="-1-101-"+h("#create-new-asset-content-frame").contents().find("[name=sys_contentid]").val();h("#create-new-asset-content-frame").remove();h("#create-new-asset-content-dlg").remove();h.PercPathService.getPathItemById(n,function(x,q){h.unblockUI();if(x==h.PercServiceUtils.STATUS_ERROR){h.perc_utils.alert_dialog({title:"Error Selecting Asset",content:"The asset has been saved, but failed to select it."});h.PercCreateNewAssetDialogData.cancelCallback();return}h.PercCreateNewAssetDialogData.successCallback(q.PathItem)})}function k(n){var q=j();return h(n,q)}function j(){var n=null;for(i=0;i<frames.length;i++){if(frames[i].name=="create-new-asset-content-frame"){n=frames[i].document;break}}return n}})(jQuery);(function(b){b.fn.extend({autocomplete:function(e,f){var h=typeof e=="string";f=b.extend({},b.Autocompleter.defaults,{url:h?e:null,data:h?null:e,delay:h?b.Autocompleter.defaults.delay:10,max:f&&!f.scroll?10:150},f);f.highlight=f.highlight||function(j){return j};f.formatMatch=f.formatMatch||f.formatItem;return this.each(function(){new b.Autocompleter(this,f)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(A,n){var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var e=b(A).attr("autocomplete","off").addClass(n.inputClass);var y;var E="";var B=b.Autocompleter.Cache(n);var j=0;var J;var M={mouseDownOnSelect:false};var G=b.Autocompleter.Select(n,A,h,M);var L;b.browser.opera&&b(A.form).bind("submit.autocomplete",function(){if(L){L=false;return false}});e.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(N){J=N.keyCode;switch(N.keyCode){case f.UP:N.preventDefault();if(G.visible()){G.prev()}else{I(0,true)}break;case f.DOWN:N.preventDefault();if(G.visible()){G.next()}else{I(0,true)}break;case f.PAGEUP:N.preventDefault();if(G.visible()){G.pageUp()}else{I(0,true)}break;case f.PAGEDOWN:N.preventDefault();if(G.visible()){G.pageDown()}else{I(0,true)}break;case n.multiple&&b.trim(n.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(h()){N.preventDefault();L=true;return false}break;case f.ESC:G.hide();break;default:clearTimeout(y);y=setTimeout(I,n.delay);break}}).focus(function(){j++}).blur(function(){j=0;if(!M.mouseDownOnSelect){H()}}).click(function(){if(j++>1&&!G.visible()){I(0,true)}}).bind("search",function(){var N=(arguments.length>1)?arguments[1]:null;function O(S,R){var P;if(R&&R.length){for(var Q=0;Q<R.length;Q++){if(R[Q].result.toLowerCase()==S.toLowerCase()){P=R[Q];break}}}if(typeof N=="function"){N(P)}else{e.trigger("result",P&&[P.data,P.value])}}b.each(q(e.val()),function(P,Q){k(Q,O,O)})}).bind("flushCache",function(){B.flush()}).bind("setOptions",function(){b.extend(n,arguments[1]);if("data" in arguments[1]){B.populate()}}).bind("unautocomplete",function(){G.unbind();e.unbind();b(A.form).unbind(".autocomplete")});function h(){var O=G.selected();if(!O){return false}var N=O.result;E=N;if(n.multiple){var P=q(e.val());if(P.length>1){N=P.slice(0,P.length-1).join(n.multipleSeparator)+n.multipleSeparator+N}N+=n.multipleSeparator}e.val(N);K();e.trigger("result",[O.data,O.value]);return true}function I(P,O){if(J==f.DEL){G.hide();return}var N=e.val();if(!O&&N==E){return}E=N;N=x(N);if(N.length>=n.minChars){e.addClass(n.loadingClass);if(!n.matchCase){N=N.toLowerCase()}k(N,z,K)}else{C();G.hide()}}function q(O){if(!O){return[""]}var P=O.split(n.multipleSeparator);var N=[];b.each(P,function(Q,R){if(b.trim(R)){N[Q]=b.trim(R)}});return N}function x(N){if(!n.multiple){return N}var O=q(N);return O[O.length-1]}function F(N,O){if(n.autoFill&&(x(e.val()).toLowerCase()==N.toLowerCase())&&J!=f.BACKSPACE){e.val(e.val()+O.substring(x(E).length));b.Autocompleter.Selection(A,E.length,E.length+O.length)}}function H(){clearTimeout(y);y=setTimeout(K,200)}function K(){var N=G.visible();G.hide();clearTimeout(y);C();if(n.mustMatch){e.search(function(O){if(!O){if(n.multiple){var P=q(e.val()).slice(0,-1);e.val(P.join(n.multipleSeparator)+(P.length?n.multipleSeparator:""))}else{e.val("")}}})}if(N){b.Autocompleter.Selection(A,A.value.length,A.value.length)}}function z(O,N){if(N&&N.length&&j){C();G.display(N,O);F(O,N[0].value);G.show()}else{K()}}function k(O,Q,N){if(!n.matchCase){O=O.toLowerCase()}var P=B.load(O);if(P&&P.length){Q(O,P)}else{if((typeof n.url=="string")&&(n.url.length>0)){var R={timestamp:+new Date()};b.each(n.extraParams,function(S,T){R[S]=typeof T=="function"?T():T});b.ajax({mode:"abort",port:"autocomplete"+A.name,dataType:n.dataType,url:n.url,data:b.extend({q:x(O),limit:n.max},R),success:function(T){var S=n.parse&&n.parse(T)||D(T);B.add(O,S);Q(O,S)}})}else{G.emptyList();N(O)}}}function D(Q){var N=[];var P=Q.split("\n");for(var O=0;O<P.length;O++){var R=b.trim(P[O]);if(R){R=R.split("|");N[N.length]={data:R,value:R[0],result:n.formatResult&&n.formatResult(R,R[0])||R[0]}}}return N}function C(){e.removeClass(n.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(f,e){return f.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};b.Autocompleter.Cache=function(f){var k={};var h=0;function q(z,y){if(!f.matchCase){z=z.toLowerCase()}var x=z.indexOf(y);if(f.matchContains=="word"){x=z.toLowerCase().search("\\b"+y.toLowerCase())}if(x==-1){return false}return x==0||f.matchContains}function n(y,x){if(h>f.cacheLength){e()}if(!k[y]){h++}k[y]=x}function j(){if(!f.data){return false}var y={},x=0;if(!f.url){f.cacheLength=1}y[""]=[];for(var A=0,z=f.data.length;A<z;A++){var D=f.data[A];D=(typeof D=="string")?[D]:D;var C=f.formatMatch(D,A+1,f.data.length);if(C===false){continue}var B=C.charAt(0).toLowerCase();if(!y[B]){y[B]=[]}var E={value:C,data:D,result:f.formatResult&&f.formatResult(D)||C};y[B].push(E);if(x++<f.max){y[""].push(E)}}b.each(y,function(F,G){f.cacheLength++;n(F,G)})}setTimeout(j,25);function e(){k={};h=0}return{flush:e,add:n,populate:j,load:function(A){if(!f.cacheLength||!h){return null}if(!f.url&&f.matchContains){var z=[];for(var x in k){if(x.length>0){var B=k[x];b.each(B,function(D,C){if(q(C.value,A)){z.push(C)}})}}return z}else{if(k[A]){return k[A]}else{if(f.matchSubset){for(var y=A.length-1;y>=f.minChars;y--){var B=k[A.substr(0,y)];if(B){var z=[];b.each(B,function(D,C){if(q(C.value,A)){z[z.length]=C}});return z}}}}}return null}}};b.Autocompleter.Select=function(j,y,A,E){var x={ACTIVE:"ac_over"};var z,k=-1,G,B="",H=true,f,D;function C(){if(!H){return}f=b("<div/>").hide().addClass(j.resultsClass).css("position","absolute").appendTo(document.body);D=b("<ul/>").appendTo(f).mouseover(function(I){if(F(I).nodeName&&F(I).nodeName.toUpperCase()=="LI"){k=b("li",D).removeClass(x.ACTIVE).index(F(I));b(F(I)).addClass(x.ACTIVE)}}).click(function(I){b(F(I)).addClass(x.ACTIVE);A();y.focus();return false}).mousedown(function(){E.mouseDownOnSelect=true}).mouseup(function(){E.mouseDownOnSelect=false});if(j.width>0){f.css("width",j.width)}H=false}function F(J){var I=J.target;while(I&&I.tagName!="LI"){I=I.parentNode}if(!I){return[]}return I}function q(I){z.slice(k,k+1).removeClass(x.ACTIVE);n(I);var K=z.slice(k,k+1).addClass(x.ACTIVE);if(j.scroll){var J=0;z.slice(0,k).each(function(){J+=this.offsetHeight});if((J+K[0].offsetHeight-D.scrollTop())>D[0].clientHeight){D.scrollTop(J+K[0].offsetHeight-D.innerHeight())}else{if(J<D.scrollTop()){D.scrollTop(J)}}}}function n(I){k+=I;if(k<0){k=z.size()-1}else{if(k>=z.size()){k=0}}}function e(I){return j.max&&j.max<I?j.max:I}function h(){D.empty();var J=e(G.length);for(var K=0;K<J;K++){if(!G[K]){continue}var L=j.formatItem(G[K].data,K+1,J,G[K].value,B);if(L===false){continue}var I=b("<li/>").html(j.highlight(L,B)).addClass(K%2==0?"ac_even":"ac_odd").appendTo(D)[0];b.data(I,"ac_data",G[K])}z=D.find("li");if(j.selectFirst){z.slice(0,1).addClass(x.ACTIVE);k=0}if(b.fn.bgiframe){D.bgiframe()}}return{display:function(J,I){C();G=J;B=I;h()},next:function(){q(1)},prev:function(){q(-1)},pageUp:function(){if(k!=0&&k-8<0){q(-k)}else{q(-8)}},pageDown:function(){if(k!=z.size()-1&&k+8>z.size()){q(z.size()-1-k)}else{q(8)}},hide:function(){f&&f.hide();z&&z.removeClass(x.ACTIVE);k=-1},visible:function(){return f&&f.is(":visible")},current:function(){return this.visible()&&(z.filter("."+x.ACTIVE)[0]||j.selectFirst&&z[0])},show:function(){var K=b(y).offset();f.css({width:typeof j.width=="string"||j.width>0?j.width:b(y).width(),top:K.top+y.offsetHeight,left:K.left}).show();if(j.scroll){D.scrollTop(0);D.css({maxHeight:j.scrollHeight,overflow:"auto"});if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var I=0;z.each(function(){I+=this.offsetHeight});var J=I>j.scrollHeight;D.css("height",J?j.scrollHeight:I);if(!J){z.width(D.width()-parseInt(z.css("padding-left"))-parseInt(z.css("padding-right")))}}}},selected:function(){var I=z&&z.filter("."+x.ACTIVE).removeClass(x.ACTIVE);return I&&I.length&&b.data(I[0],"ac_data")},emptyList:function(){D&&D.empty()},unbind:function(){f&&f.remove()}}};b.Autocompleter.Selection=function(h,j,f){if(h.createTextRange){var e=h.createTextRange();e.collapse(true);e.moveStart("character",j);e.moveEnd("character",f);e.select()}else{if(h.setSelectionRange){h.setSelectionRange(j,f)}else{if(h.selectionStart){h.selectionStart=j;h.selectionEnd=f}}}h.focus()}})(jQuery);(function(b){b.PercListEditorWidget=function(q){var I={isEnabled:X,setListItems:y,getListItems:R,removeListItems:Q,addListItem:N,removeListItem:G,enable:F,disable:j,highlightListItem:P,scrollToListItem:W};var D='<div id="perc-ui-listedit-header">        <div id="perc-ui-listedit-title">            <div id="perc-ui-permission-users-title">                '+q.title1+'            </div>            <div id="perc-ui-permission-users-write">                '+q.title2+'            </div>        </div>        <div id="perc-ui-permission-addstartbutton"/>    </div>    <div id="perc-ui-listedit-listitemfield">        <input id="perc-ui-permission-usernamefield" name="perc-ui-permission-usernamefield"/>        <div id="perc-ui-permission-plusbutton" title="Add user"/>    </div>    <div id="perc-ui-permission-user-list-scroll-pane">        <ul id="perc-ui-permission-user-list">            <li>                <span>Username</span>                <div class="perc-ui-permission-deletebutton" id="Username"/>            </li>        </ul>    </div>';var E='            <li>                <span>_username_</span>                <div class="perc-ui-permission-deletebutton" id="_username_" title="Remove user"/>            </li>';var K=b("#"+q.container);K.empty();K.html(D);var V=K.find("#perc-ui-permission-user-list");var e=K.find("#perc-ui-permission-addstartbutton");var h=K.find("#perc-ui-listedit-listitemfield");var z=K.find("#perc-ui-permission-usernamefield");var O=K.find("#perc-ui-permission-plusbutton");var k=K.find("#perc-ui-permission-user-list-scroll-pane");var Y=K.find("#perc-ui-listedit-title");var x;var B="";if(q.help!=undefined&&q.help!=null){B=q.help}else{B=I18N.message("perc.ui.folderPropsDialog.inputField@Enter a username")}var J=[];var A=true;var f=null;q.toggler.change(function(){n()});e.unbind().click(function(){h.toggle()});O.click(function(){var Z=z.val();N(Z)});z.keypress(function(ab){var aa=(ab.keyCode?ab.keyCode:ab.which);var Z=z.val();if(aa==13){if(C(Z)){N(Z)}}}).click(function(){z.focus();S();T("clear");V.find("li").removeClass("perc-ui-listedit-itemselected")}).keyup(function(){S()}).change(function(){S()}).blur(function(){T("help")}).focus(function(){T("clear")});if(q.results!=undefined&&q.results!=null){f=q.results;z.autocomplete(f,{minChars:0,max:f.length,width:(b.browser.msie)?336:334,scrollHeight:101}).result(function(){S()})}if(b.browser.msie){O.css("margin-right","18px")}y(q.items);n();e.hide();L();T("help");return I;function T(aa){var Z=z.val();if(aa=="help"&&Z==""){z.css("font-style","italic");z.css("color","gray");z.val(B)}else{if(aa=="clear"){if(Z==B){z.val("")}z.css("font-style","normal");z.css("color","black")}}}function S(){var Z=z.val();var aa=C(Z);if(aa){H()}else{L()}}function C(Z){for(r=0;r<f.length;r++){if(Z.toLowerCase()==f[r].toLowerCase()){return true}}return false}function y(Z){J=[];if(Z!=undefined&&Z!=null&&Z.length>0){for(u=0;u<Z.length;u++){J.splice(0,0,Z[u]);M(Z[u])}}U()}function R(){return J}function X(){return A}function Q(){J=[];U()}function M(Z){if(f!=null){f=b.grep(f,function(aa){return aa!=Z});z.setOptions({data:f})}}function N(ad){if(ad==null||ad==undefined||ad==""){return}for(li=0;li<J.length;li++){if(ad.toLowerCase()==J[li].toLowerCase()){return}}J.splice(0,0,ad);z.val("");M(ad);U();var aa=-1;for(li=0;li<J.length;li++){if(ad==J[li]){aa=li;break}}var ac=aa+1;var ab=V.find("li:nth-child("+ac+")");var Z=V.find("li").height();if(aa!=-1){k.scrollTop(aa*Z)}ab.addClass("perc-ui-listedit-itemselected");S()}function U(){b.perc_utils.sortCaseInsensitive(J);V.empty();for(u=0;u<J.length;u++){var Z=E.replace(/_username_/g,J[u]);V.append(Z)}x=b(".perc-ui-permission-deletebutton");x.click(function(){var aa=b(this).attr("id");G(aa)})}function G(aa){var Z=-1;for(li=0;li<J.length;li++){if(aa==J[li]){Z=li;break}}if(Z!=-1){J.splice(Z,1);if(f!=null){f[f.length]=aa;b.perc_utils.sortCaseInsensitive(f);z.setOptions({data:f})}U()}}function F(){A=true;z.removeAttr("disabled");var Z=z.val();if(Z!=B){z.css("color","black")}if(Z==""){T("help")}k.removeClass("disabled").css("color","black");Y.css("color","black");x.show();S();e.unbind().removeClass("disabled").click(function(){h.toggle()})}function j(){A=false;z.attr("disabled","disabled").css("color","gray");k.addClass("disabled").css("color","gray");Y.css("color","gray");x.hide();L();e.addClass("disabled").unbind();V.find("li").removeClass("perc-ui-listedit-itemselected")}function L(){O.addClass("disabled").unbind()}function H(){O.removeClass("disabled").click(function(){var Z=z.val();N(Z)})}function n(){var Z=q.toggler.val();if(b.inArray(Z,q.toggleroff)!=-1){j()}else{F()}}function P(Z){}function W(Z){}}})(jQuery);(function(e){e.fn.superfish=function(y){var k=e.fn.superfish,x=k.c,j=e(['<span class="',x.arrowClass,'"> &#187;</span>'].join("")),q=function(){var z=e(this),A=f(z);clearTimeout(A.sfTimer);z.showSuperfishUl().siblings().hideSuperfishUl()},h=function(){var z=e(this),B=f(z),A=k.op;clearTimeout(B.sfTimer);B.sfTimer=setTimeout(function(){A.retainPath=(e.inArray(z[0],A.$path)>-1);z.hideSuperfishUl();if(A.$path.length&&z.parents(["li.",A.hoverClass].join("")).length<1){q.call(A.$path)}},A.delay)},f=function(z){var A=z.parents(["ul.",x.menuClass,":first"].join(""))[0];k.op=k.o[A.serial];return A},n=function(z){z.addClass(x.anchorClass).append(j.clone())};return this.each(function(){var z=this.serial=k.o.length;var B=e.extend({},k.defaults,y);B.$path=e("li."+B.pathClass,this).slice(0,B.pathLevels).each(function(){e(this).addClass([B.hoverClass,x.bcClass].join(" ")).filter("li:has(ul)").removeClass(B.pathClass)});k.o[z]=k.op=B;e("li:has(ul)",this)[(e.fn.hoverIntent&&!B.disableHI)?"hoverIntent":"hover"](q,h).each(function(){if(B.autoArrows){n(e(">a:first-child",this))}}).not("."+x.bcClass).hideSuperfishUl();var A=e("a",this);A.each(function(C){var D=A.eq(C).parents("li");A.eq(C).focus(function(){q.call(D)}).blur(function(){h.call(D)})});B.onInit.call(this)}).each(function(){var z=[x.menuClass];if(k.op.dropShadows&&!(e.browser.msie&&e.browser.version<7)){z.push(x.shadowClass)}e(this).addClass(z.join(" "))})};var b=e.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var f=b.op;if(e.browser.msie&&e.browser.version>6&&f.dropShadows&&f.animation.opacity!=undefined){this.toggleClass(b.c.shadowClass+"-off")}};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};e.fn.extend({hideSuperfishUl:function(){var j=b.op,h=(j.retainPath===true)?j.$path:"";j.retainPath=false;var f=e(["li.",j.hoverClass].join(""),this).add(this).not(h).removeClass(j.hoverClass).find(">ul").hide().css("visibility","hidden");j.onHide.call(f);return this},showSuperfishUl:function(){var j=b.op,h=b.c.shadowClass+"-off",f=this.addClass(j.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(f);j.onBeforeShow.call(f);f.animate(j.animation,j.speed,function(){b.IE7fix.call(f);j.onShow.call(f)});return this}})})(jQuery);(function(h){var b={percDropdownRootClass:"perc-view",percDropdownOptionLabels:["Title","Option1","Option2"],percDropdownOptionElements:null,percDropdownCallbacks:[function(q){alert(q)},function(q){alert(q)},function(q){alert(q)}],percDropdownCallbackData:["Title","Option1","Option2"],percDropdownDisabledFlag:[true,true,true,true,true],percDropdownItemImage:null,percDropdownTitleImage:null,percDropdownTitleImageOver:null,percDropdownShowExpandIcon:true,percDropdownResizeToElement:null,percDropdownDisabledItemImage:null,delay:50,dropShadows:true};var j="<ul class='sf-menu perc-dropdown'><li class='current'><a class='perc-dropdown-title'>_TITLE_</a><ul class='perc-dropdown-option-list'><li class='perc-dropdown-option-item-template '><a href='#' class='perc-dropdown-option'>_OPTION_</a></li></ul></li></ul>";var n;var k=4;h.fn.PercDropdown=function(z){z=h.extend({},b,z);n=h(j);n.addClass(z.percDropdownRootClass).data("config",z);if(z.percDropdownResizeToElement){z.onBeforeShow=f}var G=z.percDropdownCallbacks;var q=z.percDropdownCallbackData;var E=z.percDropdownOptionLabels;var B=z.percDropdownDisabledFlag;var L=z.percDropdownItemImage;var K=z.percDropdownDisabledItemImage;var I=n.find(".perc-dropdown-title");if(z.percDropdownTitleImage==null){I.css("cursor","default").html(E[0])}else{var F=z.percDropdownRootClass?z.percDropdownRootClass+"-split-button-arrow":"perc-split-button-arrow";I.html("&nbsp;").css("background","url("+z.percDropdownTitleImage+") no-repeat").css("cursor","pointer").addClass(F).hover(function(){h(this).css("background","url("+z.percDropdownTitleImageOver+") no-repeat").css("overflow","visible")},function(){h(this).css("background","url("+z.percDropdownTitleImage+") no-repeat").css("overflow","visible")});var y=n.find(".perc-dropdown-option-list");y.css("margin","4px 0 0 0")}I.addClass("perc-dropdown-title-"+E[0]).data("callback",G[0]).data("callbackData",q[0]).click(e);var D=n.find(".perc-dropdown-option-list");var C=n.find(".perc-dropdown-option-item-template");var A=0;for(l=1;l<E.length;l++){A=l;var H=E[l];var J=C.clone();J.removeClass("perc-dropdown-option-item-template");var x;if(z.percDropdownOptionElements!=null){J.find("a").replaceWith(z.percDropdownOptionElements[l]);x=z.percDropdownOptionElements[l].addClass("perc-dropdown-option-"+h.perc_textFilters.IDNAMECDATA(H))}else{x=J.find("a").html(H).addClass("perc-dropdown-option-"+h.perc_textFilters.IDNAMECDATA(H))}if(L!=null){x.css("background-image","url("+L[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}if(!(B[l])){A=0;x.addClass("perc-drop-disabled").css("color","#9FA3AA");if(K!=null){x.css("background-image","url("+K[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}}D.append(J);J.data("callback",G[A]).data("callbackData",q[A]).click(e)}C.remove();n.superfish(z);if(z.percDropdownShowExpandIcon===false){I.find(".sf-sub-indicator").hide()}else{}this.append(n)};function e(x){var y=h(this).data("callback");var q=h(this).data("callbackData");y(q)}function f(){var z=h(this);var A=h(z.parents(".perc-dropdown")[0]);var q=A.data("config");if(typeof(q)!="undefined"){var y=h(q.percDropdownResizeToElement);var x=y.width();z.width(x-k)}}})(jQuery);(function(e,f){var b=0;e.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:false,multiple:true,position:{}},_create:function(){var n=this.element.hide(),x=this.options;this.speed=e.fx.speeds._default;this._isOpen=false;var k=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(x.classes).attr({title:n.attr("title"),"aria-haspopup":true,tabIndex:n.attr("tabIndex")}).insertAfter(n),h=(this.buttonlabel=e("<span />")).html(x.noneSelectedText).appendTo(k),q=(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(x.classes).appendTo(document.body),z=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(q),j=(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){if(x.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+x.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+x.uncheckAllText+"</span></a></li>"}else{if(typeof x.header==="string"){return"<li>"+x.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(z),y=(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(q);this._bindEvents();this.refresh(true);if(!x.multiple){q.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(x){var k=this.element,q=this.options,n=this.menu,z=this.checkboxContainer,h=[],j=[],y=k.attr("id")||b++;k.find("option").each(function(C){var D=e(this),H=this.parentNode,F=this.innerHTML,J=this.title,G=this.value,B=this.id||"ui-multiselect-"+y+"-option-"+C,K=this.disabled,A=this.selected,E=["ui-corner-all"],I;if(H.tagName.toLowerCase()==="optgroup"){I=H.getAttribute("label");if(e.inArray(I,h)===-1){j.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+I+"</a></li>");h.push(I)}}if(K){E.push("ui-state-disabled")}if(A&&!q.multiple){E.push("ui-state-active")}j.push('<li class="'+(K?"ui-multiselect-disabled":"")+'">');j.push('<label for="'+B+'" title="'+J+'" class="'+E.join(" ")+'">');j.push('<input id="'+B+'" name="multiselect_'+y+'" type="'+(q.multiple?"checkbox":"radio")+'" value="'+G+'" title="'+F+'"');if(A){j.push(' checked="checked"');j.push(' aria-selected="true"')}if(K){j.push(' disabled="disabled"');j.push(' aria-disabled="true"')}j.push(" /><span>"+F+"</span></label></li>")});z.html(j.join(""));this.labels=n.find("label");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!x){this._trigger("refresh")}},update:function(){var q=this.options,j=this.labels.find("input"),h=j.filter(":checked"),k=h.length,n;if(k===0){n=q.noneSelectedText}else{if(e.isFunction(q.selectedText)){n=q.selectedText.call(this,k,j.length,h.get())}else{if(/\d/.test(q.selectedList)&&q.selectedList>0&&k<=q.selectedList){n=h.map(function(){return e(this).next().text()}).get().join(", ")}else{n=q.selectedText.replace("#",k).replace("#",j.length)}}}this.buttonlabel.html(n);return n},_bindEvents:function(){var h=this,j=this.button;function k(){h[h._isOpen?"close":"open"]();return false}j.find("span").bind("click.multiselect",k);j.bind({click:k,keypress:function(n){switch(n.which){case 27:case 38:case 37:h.close();break;case 39:case 40:h.open();break}},mouseenter:function(){if(!j.hasClass("ui-state-disabled")){e(this).addClass("ui-state-hover")}},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){if(!j.hasClass("ui-state-disabled")){e(this).addClass("ui-state-focus")}},blur:function(){e(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(n){if(e(this).hasClass("ui-multiselect-close")){h.close()}else{h[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}n.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(z){z.preventDefault();var y=e(this),x=y.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),n=x.get(),q=y.parent().text();if(h._trigger("beforeoptgrouptoggle",z,{inputs:n,label:q})===false){return}h._toggleChecked(x.filter("[checked]").length!==x.length,x);h._trigger("optgrouptoggle",z,{inputs:n,label:q,checked:n[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!e(this).hasClass("ui-state-disabled")){h.labels.removeClass("ui-state-hover");e(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(n){n.preventDefault();switch(n.which){case 9:case 27:h.close();break;case 38:case 40:case 37:case 39:h._traverse(n.which,this);break;case 13:e(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(y){var x=e(this),z=this.value,q=this.checked,n=h.element.find("option");if(this.disabled||h._trigger("click",y,{value:z,text:this.title,checked:q})===false){y.preventDefault();return}x.focus();x.attr("aria-selected",q);n.each(function(){if(this.value===z){this.selected=q}else{if(!h.options.multiple){this.selected=false}}});if(!h.options.multiple){h.labels.removeClass("ui-state-active");x.closest("label").toggleClass("ui-state-active",q);h.close()}h.element.trigger("change");setTimeout(e.proxy(h.update,h),10)});e(document).bind("mousedown.multiselect",function(n){if(h._isOpen&&!e.contains(h.menu[0],n.target)&&!e.contains(h.button[0],n.target)&&n.target!==h.button[0]){e("html").click(function(){h.close()})}});e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(h.refresh,h),10)})},_setButtonWidth:function(){var h=this.element.outerWidth(),j=this.options;if(/\d/.test(j.minWidth)&&h<j.minWidth){h=j.minWidth}this.button.width(h)},_setMenuWidth:function(){var h=this.menu,j=this.button.outerWidth()-parseInt(h.css("padding-left"),10)-parseInt(h.css("padding-right"),10)-parseInt(h.css("border-right-width"),10)-parseInt(h.css("border-left-width"),10);h.width(j||this.button.outerWidth())},_traverse:function(q,x){var k=e(x),j=q===38||q===37,h=k.parent()[j?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[j?"last":"first"]();if(!h.length){var n=this.menu.find("ul").last();this.menu.find("label")[j?"last":"first"]().trigger("mouseover");n.scrollTop(j?n.height():0)}else{h.find("label").trigger("mouseover")}},_toggleState:function(j,h){return function(){if(!this.disabled){this[j]=h}if(h){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(h,q){var n=(q&&q.length)?q:this.labels.find("input"),k=this;n.each(this._toggleState("checked",h));n.eq(0).focus();this.update();var j=n.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&e.inArray(this.value,j)>-1){k._toggleState("selected",h).call(this)}});if(n.length){this.element.trigger("change")}},_toggleDisabled:function(h){this.button.attr({disabled:h,"aria-disabled":h})[h?"addClass":"removeClass"]("ui-state-disabled");this.menu.find("input").attr({disabled:h,"aria-disabled":h}).parent()[h?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:h,"aria-disabled":h})},open:function(q){var z=this,n=this.button,h=this.menu,k=this.speed,j=this.options;if(this._trigger("beforeopen")===false||n.hasClass("ui-state-disabled")||this._isOpen){return}var y=h.find("ul").last(),A=j.show,x=n.offset();if(e.isArray(j.show)){A=j.show[0];k=j.show[1]||z.speed}y.scrollTop(0).height(j.height);if(e.ui.position&&!e.isEmptyObject(j.position)){j.position.of=j.position.of||n;h.show().position(j.position).hide().show(A,k)}else{h.css({top:x.top+n.outerHeight(),left:x.left}).show(A,k)}this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");n.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var k=this.options,h=k.hide,j=this.speed;if(e.isArray(k.hide)){h=k.hide[0];j=k.hide[1]||this.speed}this.menu.hide(h,j);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(h){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){e.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(h,j){var k=this.menu;switch(h){case"header":k.find("div.ui-multiselect-header")[j?"show":"hide"]();break;case"checkAllText":k.find("a.ui-multiselect-all span").eq(-1).text(j);break;case"uncheckAllText":k.find("a.ui-multiselect-none span").eq(-1).text(j);break;case"height":k.find("ul").last().height(parseInt(j,10));break;case"minWidth":this.options[h]=parseInt(j,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[h]=j;this.update();break;case"classes":k.add(this.button).removeClass(this.options.classes).addClass(j);break}e.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*
 * jQuery UI Timepicker 0.2.1
 *
 * Copyright (c) 2009 Martin Milesich (http://milesich.com/)
 *
 * Some parts are
 *   Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 *
 * $Id: timepicker.js 28 2009-08-11 20:31:23Z majlo $
 *
 * Depends:
 *  ui.core.js
 *  ui.datepicker.js
 *  ui.slider.js
 */
(function(e){e.extend(e.datepicker._defaults,{stepMinutes:1,stepHours:1,time24h:false,showTime:false,altTimeField:""});e.datepicker._setDateFromFieldOverride=e.datepicker._setDateFromField;e.datepicker._setDateFromField=function(j,h){var f=j.input.val().split(" ");if(f.length>0){j.input.val(f[0]);e.datepicker._setDateFromFieldOverride(j,h);j.input.val(f.join(" "))}};e.datepicker._connectDatepickerOverride=e.datepicker._connectDatepicker;e.datepicker._connectDatepicker=function(j,h){e.datepicker._connectDatepickerOverride(j,h);if(this._get(h,"showTime")){h.settings.showButtonPanel=true}var f=this._get(h,"showOn");if(f=="button"||f=="both"){h.trigger.unbind("click");h.trigger.click(function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput==j){e.datepicker._hideDatepicker(null)}else{e.datepicker._showDatepicker(j)}return false})}};e.datepicker._showDatepickerOverride=e.datepicker._showDatepicker;e.datepicker._showDatepicker=function(h){e.datepicker._showDatepickerOverride(h);h=h.target||h;if(h.nodeName.toLowerCase()!="input"){h=e("input",h.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(h)){return}var j=e.datepicker._getInst(h);var f=e.datepicker._get(j,"showTime");if(f){e.timepicker.show(h)}};e.datepicker._checkExternalClickOverride=e.datepicker._checkExternalClick;e.datepicker._checkExternalClick=function(h){if(!e.datepicker._curInst){return}var f=e(h.target);if((f.parents("#"+e.timepicker._mainDivId).length==0)){inst=e.datepicker._getInst(f[0]);if(((f[0].id!=e.datepicker._mainDivId&&f.parents("#"+e.datepicker._mainDivId).length==0&&!f.hasClass(e.datepicker.markerClassName)&&!f.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)))||(f.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!=inst)){e("html").click(function(){e.datepicker._hideDatepicker()})}}return};e.datepicker._hideDatepickerOverride=e.datepicker._hideDatepicker;e.datepicker._hideDatepicker=function(h,k){var j=this._curInst;if(!j||(h&&j!=e.data(h,PROP_NAME))){return}var f=this._get(j,"showTime");if(h===undefined&&f){if(j.input){j.input.val(this._formatDate(j));j.input.trigger("change")}this._updateAlternate(j);if(f){e.timepicker.update(this._formatDate(j))}}e.datepicker._hideDatepickerOverride(h,k);if(f){e.timepicker.hide()}};e.datepicker._selectDate=function(q,h){var n=e(q);var k=this._getInst(n[0]);var f=this._get(k,"showTime");h=(h!=null?h:this._formatDate(k));if(!f){if(k.input){k.input.val(h)}this._updateAlternate(k)}var j=this._get(k,"onSelect");if(j){j.apply((k.input?k.input[0]:null),[h,k])}else{if(k.input&&!f){k.input.trigger("change")}}if(k.inline){this._updateDatepicker(k)}else{if(!k.stayOpen){if(f){this._updateDatepicker(k)}else{this._hideDatepicker(null,this._get(k,"duration"));this._lastInput=k.input[0];if(typeof(k.input[0])!="object"){k.input[0].focus()}this._lastInput=null}}}};e.datepicker._updateDatepickerOverride=e.datepicker._updateDatepicker;e.datepicker._updateDatepicker=function(f){e.datepicker._updateDatepickerOverride(f);e.timepicker.resize()};function b(){}b.prototype={init:function(){this._mainDivId="ui-timepicker-div";this._inputId=null;this._orgValue=null;this._orgHour=null;this._orgMinute=null;this._colonPos=-1;this._visible=false;this.tpDiv=e('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style=" display: none; position: absolute;"></div>');this._generateHtml()},show:function(y){var k=e.datepicker._getInst(y);this._time24h=e.datepicker._get(k,"time24h");this._altTimeField=e.datepicker._get(k,"altTimeField");var f=parseInt(e.datepicker._get(k,"stepMinutes"),10)||1;var x=parseInt(e.datepicker._get(k,"stepHours"),10)||1;if(60%f!=0){f=1}if(24%x!=0){x=1}e("#hourSlider").slider("option","max",24-x);e("#hourSlider").slider("option","step",x);e("#minuteSlider").slider("option","max",60-f);e("#minuteSlider").slider("option","step",f);this._inputId=y.id;if(!this._visible){this._parseTime();this._orgValue=e("#"+this._inputId).val()}this.resize();e("#"+this._mainDivId).show();this._visible=true;var h=e("#"+e.datepicker._mainDivId);var q=h.position();var n=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+e(document).scrollLeft();var z=this.tpDiv.offset().left+this.tpDiv.outerWidth();if(z>n){h.css("left",q.left-(z-n)-5);this.tpDiv.css("left",h.offset().left+h.outerWidth()+"px")}var j=e("#"+this._inputId).offset();h.css("top",j.top+25);this.tpDiv.css("top",j.top+25)},update:function(h){var j=e("#"+this._mainDivId+" span.fragHours").text()+":"+e("#"+this._mainDivId+" span.fragMinutes").text();if(!this._time24h){j+=" "+e("#"+this._mainDivId+" span.fragAmpm").text()}var f=e("#"+this._inputId).val();e("#"+this._inputId).val(h+" "+j);if(this._altTimeField){e(this._altTimeField).each(function(){e(this).val(j)})}},hide:function(){this._visible=false;e("#"+this._mainDivId).hide()},resize:function(){var h=e("#"+e.datepicker._mainDivId);var j=h.position();var f=e("#"+e.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();e("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",f);this.tpDiv.css({height:h.height(),top:j.top,left:j.left+h.outerWidth()+"px"});e("#hourSlider").css("height",this.tpDiv.height()-(3.5*f));e("#minuteSlider").css("height",this.tpDiv.height()-(3.5*f))},_generateHtml:function(){var h="";h+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">';h+='<div class="ui-datepicker-title" style="margin:0">';h+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div><table>';h+="<tr><th>Hour</th><th>Minute</th></tr>";h+='<tr><td align="center"><div id="hourSlider" class="slider"></div></td><td align="center"><div id="minuteSlider" class="slider"></div></td></tr>';h+="</table>";this.tpDiv.empty().append(h);e("body").append(this.tpDiv);var f=this;e("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(j,k){f._writeTime("hour",k.value)},stop:function(j,k){e("#"+f._inputId).focus()}});e("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:59,step:1,slide:function(j,k){f._writeTime("minute",k.value)},stop:function(j,k){e("#"+f._inputId).focus()}});e("#hourSlider > a").css("padding",0);e("#minuteSlider > a").css("padding",0)},_writeTime:function(f,h){if(f=="hour"){if(!this._time24h){if(h<12){e("#"+this._mainDivId+" span.fragAmpm").text("am")}else{e("#"+this._mainDivId+" span.fragAmpm").text("pm");h-=12}if(h==0){h=12}}else{e("#"+this._mainDivId+" span.fragAmpm").text("")}if(h<10){h="0"+h}e("#"+this._mainDivId+" span.fragHours").text(h)}if(f=="minute"){if(h<10){h="0"+h}e("#"+this._mainDivId+" span.fragMinutes").text(h)}},_parseTime:function(){var n=e("#"+this._inputId).val();this._colonPos=n.search(":");var f=0,k=0,j="";if(this._colonPos!=-1){k=parseInt(n.substr(this._colonPos-2,2),10);f=parseInt(n.substr(this._colonPos+1,2),10);j=jQuery.trim(n.substr(this._colonPos+3,3))}j=j.toLowerCase();if(j!="am"&&j!="pm"){j=""}if(k<0){k=0}if(f<0){f=0}if(k>23){k=23}if(f>59){f=59}if(j=="pm"&&k<12){k+=12}if(j=="am"&&k==12){k=0}this._setTime("hour",k);this._setTime("minute",f);this._orgHour=k;this._orgMinute=f},_setTime:function(f,h){if(isNaN(h)){h=0}if(h<0){h=0}if(h>23&&f=="hour"){h=23}if(h>59&&f=="minute"){h=59}if(f=="hour"){e("#hourSlider").slider("value",h)}if(f=="minute"){e("#minuteSlider").slider("value",h)}this._writeTime(f,h)}};e.timepicker=new b();e("document").ready(function(){e.timepicker.init()})})(jQuery);(function(f){f.PercRecentListService={getRecentList:b,setRecent:e,RECENT_TYPE_ITEM:"item",RECENT_TYPE_TEMPLATE:"template",RECENT_TYPE_SITE_FOLDER:"site-folder",RECENT_TYPE_ASSET_FOLDER:"asset-folder",RECENT_TYPES:[this.RECENT_TYPE_ITEM,this.RECENT_TYPE_TEMPLATE,this.RECENT_TYPE_SITE_FOLDER,this.RECENT_TYPE_ASSET_FOLDER]};function b(n,k){var h=f.Deferred();if(!f.inArray(n,f.PercRecentListService.RECENT_TYPES)){h.reject("Invalid type passed in for getting recent items.")}else{var j=f.perc_paths.RECENT_ROOT+n;if(n==f.PercRecentListService.RECENT_TYPE_TEMPLATE||n==f.PercRecentListService.RECENT_TYPE_SITE_FOLDER){j+="/"+k}var q=function(y,x){if(y==f.PercServiceUtils.STATUS_SUCCESS){h.resolve(x)}else{var z=f.PercServiceUtils.extractDefaultErrorMessage(x.request);f.perc_utils.info("Error accessing cm1 page optimizer service: "+z);h.reject(z)}};f.PercServiceUtils.makeJsonRequest(j,f.PercServiceUtils.TYPE_GET,true,q)}return h.promise()}function e(q,x,k){var h=f.Deferred();if(!f.inArray(q,f.PercRecentListService.RECENT_TYPES)){h.reject("Invalid type passed in for getting recent items.")}else{var j=f.perc_paths.RECENT_ROOT+q;if(q==f.PercRecentListService.RECENT_TYPE_TEMPLATE||q==f.PercRecentListService.RECENT_TYPE_SITE_FOLDER){j+="/"+k}var n={value:x};f.ajax({url:j,type:"POST",data:n,contentType:"application/x-www-form-urlencoded",dataType:"json"}).done(function(){h.resolve()}).fail(function(y,z){h.reject("Failed to add item to recent list")})}return h.promise()}})(jQuery);(function(j){j.PercRedirectHandler={createRedirect:q};function q(C,B,z){var y=j.Deferred();if(C==B){y.resolve("Both from and to are same no need for a redirect")}else{if(!gIsSaaSEnvironment){y.resolve("This is a non SaaS environment, skipping redirect creation.")}else{var A={data:{fromPath:C,toPath:B,type:z}};x(A).done(function(D){k(C,B,D).done(function(E){y.resolve(E)}).fail(function(E){y.reject(E)})}).fail(function(D){y.reject(D)})}}return y.promise()}function x(A){var y=j.Deferred();var z=j.perc_paths.REDIRECT_ROOT+"validate";j.PercServiceUtils.makeJsonRequest(z,j.PercServiceUtils.TYPE_POST,false,function(C,B){if(C==j.PercServiceUtils.STATUS_SUCCESS){y.resolve(B.data)}else{var D=j.PercServiceUtils.extractDefaultErrorMessage(B.request);y.reject(D)}},A,function(B){y.reject("Redirect service request timed out.")});return y.promise()}function k(B,A,z){var y=j.Deferred();if(z.response.status=="Error"){y.reject(z.response.errorMessage)}if(z.response.status=="NotApplicable"){y.resolve("Redirects are not applicable for this scenario.")}else{if(z.response.status=="Published"){f(B,A,z).done(function(C){y.resolve(C)}).fail(function(C){y.reject(C)})}else{y.resolve("Redirect is not required for this case.")}}return y.promise()}function e(E,D,C){E=h(E);D=h(D);var A=j.Deferred();var y=C.response.redirectLicense;var z={category:"AUTOGEN",condition:E,enabled:true,key:y.key,permanent:true,redirectTo:D,site:C.response.bucketName,type:"CM1"};var B={id:y.key,type:y.name,token:y.handshake};j.ajax({type:"POST",beforeSend:function(F){F.setRequestHeader("Authorization",JSON.stringify(B))},url:y.apiProvider+"/rest/redirect/entries?replace=true",data:JSON.stringify(z),contentType:"application/json",}).done(function(H,F,G){A.resolve("Created redirect successfully")}).fail(function(I,F,H){var G="A redirect rule cannot be created at this time, Please note the time and date and submit this problem to Percussion support.";if(I&&I.responseText){G=JSON.parse(I.responseText).message}A.reject(G)});return A.promise()}function f(C,B,A){var y=j.Deferred();var z;j.unblockUI();z=j(b(C,B)).perc_dialog({title:"Manage Redirects",modal:true,percButtons:{Yes:{click:function(){if(!B){B=z.find("#perc-redirect-to-path").val()}if(!B){z.find("div.perc_field_error[for=perc-redirect-to-path]").show();return}else{z.find("div.perc_field_error[for=perc-redirect-to-path]").hide()}j.PercBlockUI(j.PercBlockUIMode.CURSORONLY);e(C,B,A).fail(function(D){y.reject(D)}).always(function(){j.unblockUI();z.remove();y.resolve("Redirect created successfully.")})},id:"perc-redirect-yes"},No:{click:function(){z.remove();y.resolve("User doesn't want to create redirect.")},id:"perc-redirect-no"}},id:"perc-redirect-dialog",width:700});n(z);return y.promise()}function b(A,y){var z=j("<div/>",{id:"perc-redirect-container"});z.append('<div><label>This change could cause a visitor to your website to see a "page not found" error. Would you like to redirect those users?</label><br/><br/></div>');z.append("<div><label>From path:</label><br/></div>");z.append('<div class="readonlyinput">'+h(A)+"</div><br/>");z.append("<div><label>To path:</label><br/></div>");if(y){z.append('<div class="readonlyinput">'+h(y)+"</div>")}else{z.append("<div><input type='text' class='required' readonly='true' name='perc-redirect-to-path' id='perc-redirect-to-path'/><img id='perc-redirect-to-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div>");z.append("<div for='perc-redirect-to-path' class='perc_field_error' style='display:none'>To path is required to create redirect.</div>")}return z}function n(y){y.find("#perc-redirect-to-path-button").click(function(){var C="Select redirect to path";var D="To path";var B=function(F){var E=F.path;if(E.substring(0,1)==="/"&&!(E.substring(0,2)==="//")){E="/"+E}if(!E){E=F.folderPaths.split("$System$")[1]}E=h(E);y.find("#perc-redirect-to-path").val(E).attr("title",E)};var z=function(F){var E=null;if(!F){E="Please select a folder or page."}else{if(F.path=="/Sites/"){E="Your current selection is sites root, please select a folder or page."}else{if(F.type=="site"){E="Your current selection is a site, please select a folder or page."}}}return E};var A={okCallback:B,dialogTitle:C,rootPath:"Sites",initialPath:y.find("#perc-convert-folder-path").val(),selectedItemValidator:z,showFoldersOnly:false};j.PercPathSelectionDialog.open(A)})}function h(y){y=y.replace("//Sites/","");y=y.replace("/Sites/","");y=y.substring(y.indexOf("/"));if(y.charAt(y.length-1)=="/"){y=y.substr(0,y.length-1)}return y}})(jQuery);(function(e){var b;e.fn.printThis=function(h){b=e.extend({},e.fn.printThis.defaults,h);var f=this instanceof jQuery?this:e(this);var k="printThis-"+(new Date()).getTime();if(window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)){var x='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")';var q=document.createElement("iframe");q.name="printIframe";q.id=k;q.className="MSIE";document.body.appendChild(q);q.src=x}else{var j=e("<iframe id='"+k+"' name='printIframe' />");j.appendTo("body")}var n=e("#"+k);if(!b.debug){n.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"})}setTimeout(function(){var y=n.contents();if(b.importCSS){e("link[rel=stylesheet]").each(function(){var z=e(this).attr("href");if(z){var A=e(this).attr("media")||"all";y.find("head").append("<link type='text/css' rel='stylesheet' href='"+z+"' media='"+A+"'>")}})}if(b.pageTitle){y.find("head").append("<title>"+b.pageTitle+"</title>")}if(b.loadCSS){y.find("head").append("<link type='text/css' rel='stylesheet' href='"+b.loadCSS+"'>")}if(b.printContainer){y.find("body").append(f.outer())}else{f.each(function(){y.find("body").append(e(this).html())})}if(b.removeInline){if(e.isFunction(e.removeAttr)){y.find("body *").removeAttr("style")}else{y.find("body *").attr("style","")}}setTimeout(function(){if(n.hasClass("MSIE")){window.frames.printIframe.focus();y.find("head").append("<script>  window.print(); <\/script>")}else{n[0].contentWindow.focus();n[0].contentWindow.print()}if(!b.debug){setTimeout(function(){n.remove()},1000)}},333)},333)};e.fn.printThis.defaults={debug:false,importCSS:true,printContainer:true,loadCSS:"",pageTitle:"",removeInline:false};jQuery.fn.outer=function(){return e(e("<div></div>").html(this.clone())).html()}})(jQuery);(function(f){f.fn.PercSimpleMenu=function(A){var D=A.title;var z=A.items;var C=f("<div class='perc-simplemenu'>");var y=f("<div class='perc-simplemenu-title perc-simplemenu-title-deselected'>").append(D);C.append(y);var B=f("<div class='perc-simplemenu-menuitems'>");C.append(B);C.data("config",A);f.each(z,function(F,H){var G="perc-menu-item";if(F==z.length-1){G="perc-menu-last-item"}var E=H.label;var K=H.callback;var I=H.data;var J=f("<div class='perc-simplemenu-menuitem perc-index-"+F+"'>").append(E).addClass(G).data("callback",K).click(function(L){q(L);var N=f(this).data("callback");var M=C.data("data");L.data=M;N(L)}).hover(function(){f(this).css("color","#000")},function(){f(this).css("color","#fff")});if(I){J.data("data",I)}B.append(J)});f(this).append(C);y.click(x);C.hover(k,b);return f(C)};function x(z){var y=f(z.currentTarget);if(y.hasClass("perc-simplemenu-title-deselected")){y.addClass("perc-simplemenu-title-selected").removeClass("perc-simplemenu-title-deselected");n(z)}else{y.removeClass("perc-simplemenu-title-selected").addClass("perc-simplemenu-title-deselected");j(z)}}var h=true;var e=null;function k(y){if(e==y.currentTarget){h=false}}function b(y){h=true;e=y.currentTarget;setTimeout(function(){if(h){j(y)}},500)}function n(M){var C=f(M.currentTarget);var Q=C.next();var G=Q.width();var z=C.parents(".perc-simplemenu");var P=z.data("config");var H=C.offset().top+C.height();var E=C.offset().left;if(P.menuItemsAlign=="left"){E=E-G+C.width()}if(P.stayInsideOf){var I=z.parents(P.stayInsideOf);var F=I.offset().top;var J=I.height();var O=F+J;var y=Q.height();var B=H+y;var N;if(B>O){N=H-y-C.height()}if(N>F){H=N}if(P.menuItemsAlign!="left"){var A=I.offset().left;var D=I.width();var K=A+D;var L=E+G;if(L>K){E=E-G+C.width()}}}Q.css("position","absolute").css("top",H+"px").css("left",E+"px");Q.show()}function j(A){var B=f(A.currentTarget);var C=B;if(!B.hasClass("perc-simplemenu")){C=B.parents(".perc-simplemenu")}var y=C.find(".perc-simplemenu-title");y.removeClass("perc-simplemenu-title-selected").addClass("perc-simplemenu-title-deselected");var z=C.find(".perc-simplemenu-menuitems");z.hide()}function q(y){j(y)}})(jQuery);(function(b){b.fn.PercPageDataTable=function(e,k){var j=e.percData;b.each(j,function(n,q){if(typeof(q.rowContent[0][0].callback)==="undefined"){q.rowContent[0][0].callback=b.PercPreviewPage}});if(typeof(e.percRowDblclickCallback)==="undefined"){e.percRowDblclickCallback=function(n){var q=window.parent.jQuery;q.PercNavigationManager.openPage(n.data.pagePath)}}if(!e.percMenus){e.percMenus=b.PercPageActions}var f=function(){b(h).find(".perc-index-0 > .perc-index-0 > span").each(function(){b(this).PercTooltip()})};if(typeof(e.percTableRedrawCallback)!=="object"){if(typeof(e.percTableRedrawCallback)==="function"){e.percTableRedrawCallback=[e.percTableRedrawCallback]}else{e.percTableRedrawCallback=[]}}e.percTableRedrawCallback.push(f);if(k){var h=b(this).PercDataTable(e)}else{var h=b(this).PercActionDataTable(e)}f();return h}})(jQuery);(function(f){var e=41;f.fn.PercActionDataTable=function(j){var n=j.percData;j.percHeaders.push("Actions");var q="";f.each(n,function(x,A){var z=f.isArray(j.percMenus)?j.percMenus[x]:j.percMenus;var y=b(z,j.percData[x].rowData);A.rowContent.push([{content:y}])});if(j.percVisibleColumns){j.percVisibleColumns.push(j.percHeaders.length-1)}if(typeof(j.percTableRedrawCallback)!=="object"){if(typeof(j.percTableRedrawCallback)==="function"){j.percTableRedrawCallback=[j.percTableRedrawCallback]}else{j.percTableRedrawCallback=[]}}j.percTableRedrawCallback.push(h);if(!j.aoColumns){j.aoColumns=[]}j.aoColumns[j.percHeaders.length-1]={bSortable:false};var k=f(this).PercDataTable(j);k.find("th.perc-last").width(e);h(k);return k};function b(n,k){if(n==undefined){n=f.PercPageActions}var j=f("<div />").PercSimpleMenu(n);j.find("a").each(function(){f(this).attr("href",percJQuery.perc_paths.ASSET_FORMS_EXPORT+"/"+k.formSummary.name+".csv");f(this).attr("target","_blank");f(this).addClass("perc-datatable-form-tracker-export-action")});if(k){j.data("data",k)}return j}f.PercOpenPage=function(j){var k=j.data;if(k){var n=window.parent.jQuery;n.PercNavigationManager.openPage(k.pagePath)}else{}};f.PercOpenAsset=function(j){var k=j.data;if(k){var q={};q.id=k.assetId;q.path=k.assetPath;var n=window.parent.jQuery;n.PercNavigationManager.openAsset(q)}};f.PercPreviewAsset=function(j){var k=j.data;if(!k){k=f(j.currentTarget).parents(".perc-datatable-row").data("percRowData")}if(k){var n=window.parent.jQuery;n.perc_finder().launchAssetPreview(k.assetId)}};f.PercPreviewPage=function(j){var k=j.data;if(!k){k=f(j.currentTarget).parents(".perc-datatable-row").data("percRowData")}if(k){var n=window.parent.jQuery;n.perc_finder().launchPagePreviewByPath(k.pagePath,k.pageId)}else{}};f.PercPageActions={title:"",menuItemsAlign:"left",stayInsideOf:".dataTables_wrapper",items:[{label:"Open Page",callback:f.PercOpenPage},{label:"Preview Page",callback:f.PercPreviewPage}]};function h(j){j.find("td:last-child").attr("align","right").attr("text-align",null).dblclick(function(k){k.stopPropagation()});j.find("td.perc-actions div").css("overflow","visible")}})(jQuery);(function(h){var A;var y;var q=-1,f=0,C=1,z=2,x=3;var I=q;var H=20;var k;var E;var B;var e;h.fn.percAutoScroll=function(J){var K={directions:"n, s, e, w",offsetX:0,offsetY:0,width:30,backgroundColor:"blue",opacity:0.5,speed:10,debug:false,callback:function(){}};A=h.extend(K,J);y=h(this);k=y[0].tagName;if(k==="IFRAME"){E=y[0].contentWindow;B=y[0].contentWindow.document;e=h(E)}D()};h.fn.percAutoScroll.remove=function(){h(".autoscroll").remove();clearInterval(F)};function D(){h(".autoscroll").remove();A.offsetY=y.position().top;var N=y.position();var J=0;var L=N.left;var M=y.width();var Q=y.height();if(A.directions.indexOf("n")!=-1){var K=n(f,L,A.offsetY+J,M-H,A.width);h("body").append(K)}if(A.directions.indexOf("s")!=-1){var P=n(C,L,A.offsetY+J+Q-H-A.width,M-H,A.width+H);h("body").append(P)}if(A.directions.indexOf("w")!=-1){var R=n(z,L,A.offsetY+J+A.width,A.width,Q-H-A.width*2);h("body").append(R)}if(A.directions.indexOf("e")!=-1){var O=n(x,L+M-H-A.width,A.offsetY+J+A.width,A.width,Q-H-A.width*2);h("body").append(O)}}var F;function n(M,K,O,L,J){var N=h("<div class='autoscroll' style='z-index:500;'>").width(L).height(J).css("opacity",A.opacity).css("position","absolute").css("top",O).css("left",K).droppable({addClasses:false,tolerance:"pointer",over:function(){I=M;F=setInterval(function(){b()},15)},out:function(){I=q;clearInterval(F)},drop:function(){I=q;clearInterval(F)}});if(A.debug){N.css("background-color",A.backgroundColor)}return N}function b(){var Q=0;var P=0;var O=y;var N=j();var K=N.top;var M=N.left;switch(I){case f:P=K-A.speed;break;case C:P=K+A.speed;break;case z:Q=M-A.speed;break;case x:Q=M+A.speed;break;default:clearInterval(F)}G(Q,P);var L=j();var J=L.top;var R=L.left;h(this).percAutoScroll.postScrollView(R-M,J-K)}h.fn.percAutoScroll.postScrollView=function(){};function j(){var J;var K;if(k=="IFRAME"){J=e.scrollTop();K=e.scrollLeft()}else{J=y.scrollTop();K=y.scrollLeft()}return{top:J,left:K}}function G(J,K){if(k=="IFRAME"){e[0].scrollTo(J,K)}else{y.scrollTop(K);y.scrollLeft(J)}}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(h){var f=document.documentElement.style,j=("textOverflow" in f||"OTextOverflow" in f),k=document.createRange!==undefined,e=function(q){var n=[];h.each(q[0].childNodes,function(){if(this.nodeType===3){n.push(this)}else{h.each(this.childNodes,arguments.callee)}});return h(n)},b=function(y,C,q){var x=document.createRange(),A=0,n=y.length,z=0,B;if(q<=C){return h(y)}if(n===1||!k){return h.map(y,function(D){return D.textContent}).join("").substr(C,q)}for(;A<n;A+=1){B=y[A];if(C>=z&&C<=z+B.length){x.setStart(B,C-z)}if(z<=q&&z+B.length>=q){x.setEnd(B,q-z);break}z+=B.length}return h(x.cloneContents())};h.extend(h.fn,{textOverflow:function(x,n){var q=x||"";if(!j){return this.each(function(){var C=h(this),E=C.clone(),H=C.clone(),B=C.text(),y=C.width(),D=e(H),F=0,G=0,A=B.length,z=function(){if(y!==C.width()){C.replaceWith(H);C=H;H=C.clone();C.textOverflow(x,false);y=C.width()}};C.after(E.hide());if(E.width()>y){while(F<A){G=Math.floor(F+((A-F)/2));E.empty().append(b(D,0,G)).append(q);if(E.width()<y){F=G+1}else{A=G}}if(F<B.length){C.empty().append(b(D,0,F-1)).append(q)}}E.remove();if(n){setInterval(z,200)}})}else{return this}}})})(jQuery);(function(b){b.Perc_Template_Summary=function(h,f,e){e=e+"";this.sourceId=h;this.templateId=f;this.baseTemplateName=e;this.templateName=e;this.templateNameLowerCase=e.toLowerCase();this.siteIds=new Array();this.imageUrl=null;this.persisted=false;this.deleteFlag=false;this.isBase=false;this.contentMigrationVersion=0;this.getBaseTemplateName=function(){return this.baseTemplateName};this.getSourceId=function(){return this.sourceId};this.getTemplateId=function(){return this.templateId};this.getTemplateName=function(){return this.templateName};this.getTemplateNameLowerCase=function(){return this.templateNameLowerCase};this.getAssignedSites=function(){return this.siteIds};this.getImageUrl=function(){return this.imageUrl};this.isMarkedForDelete=function(){return this.deleteFlag};this.isBaseTemplate=function(){return this.isBase};this.isPersisted=function(){return this.persisted};this.getContentMigrationVersion=function(){return this.contentMigrationVersion};this.setSourceId=function(j){this.sourceId=j};this.setTemplateId=function(j){this.templateId=j};this.setTemplateName=function(j){this.templateName=j;this.templateNameLowerCase=j.toLowerCase()};this.setContentMigrationVersion=function(j){this.contentMigrationVersion=j};this.setAssignedSites=function(j){if(j==null||j=="undefined"){j=new Array()}this.siteIds=j};this.assignToSite=function(j){if(!this.containsSite(j)){this.siteIds.push(j)}};this.unassignFromSite=function(j){for(s in this.siteIds){if(j==this.siteIds[s]){this.siteIds.splice(s,1)}}};this.containsSite=function(j){for(s in this.siteIds){if(j==this.siteIds[s]){return true}}return false};this.setImageUrl=function(j){this.imageUrl=j};this.setPersisted=function(j){this.persisted=j};this.setDeleteFlag=function(j){this.deleteFlag(j)};this.setBaseTemplate=function(j){this.isBase=j};this.clone=function(){var j=b.extend(true,{},this);j.setPersisted(false);return j};this.isOrphan=function(){return(!this.isBase&&this.siteIds.length==0)}}})(jQuery);(function(k){k.PercTemplateService=function(){return{getThemeList:H,getThemeCSS:M,getRegionCSS:f,deleteTemplate:h,deleteRegionCSS:F,saveTemplates:K,saveRegionCSS:D,regionCSSPrepareForEdit:E,regionCSSClearCache:B,regionCSSMerge:b,getAssetDropCriteria:z,loadTemplateMetadata:j,saveTemplateMetadata:x,exportTemplate:L,getSiteProperties:C,updateInspectedElements:y,checkImportLogExists:I,createTemplateFromUrl:q,createTemplateFromUrlAsync:A,createTemplateFromUrlStatus:N,createTemplateFromUrlResult:J,createTemplateFromPage:G,assignTemplateAndMigrateContent:e,applyTemplate:n}};function H(O){k.ajax({url:k.perc_paths.THEME_SUMMARY_ALL,dataType:"json",type:"GET",success:function(Q,P){O(true,Q)},error:function(R,P,Q){O(false,[P,Q])}});return}function M(O,P){k.ajax({url:k.perc_paths.THEME_CSS+"/"+O,dataType:"xml",type:"GET",success:function(R,Q){$cssObject=k(R);$cssData=$cssObject.find("ThemeCSS CSS");P(true,$cssData)},error:function(S,Q,R){P(false,[textStatus,R])}});return}function f(R,O,Q,S,T){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+R+"/"+O+"/"+Q+"/"+S,k.PercServiceUtils.TYPE_GET,false,function(V,U){if(V==k.PercServiceUtils.STATUS_SUCCESS){T(k.PercServiceUtils.STATUS_SUCCESS,U.data)}else{var W=k.PercServiceUtils.extractDefaultErrorMessage(U.request);T(k.PercServiceUtils.STATUS_ERROR,W)}})}function E(Q,O,R){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_PREPARE_FOR_EDIT+"/"+Q+"/"+O,k.PercServiceUtils.TYPE_POST,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=k.PercServiceUtils.extractDefaultErrorMessage(S.request);R(k.PercServiceUtils.STATUS_ERROR,U)}})}function B(Q,O,R){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_CLEAR_CACHE+"/"+Q+"/"+O,k.PercServiceUtils.TYPE_DELETE,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=k.PercServiceUtils.extractDefaultErrorMessage(S.request);R(k.PercServiceUtils.STATUS_ERROR,U)}})}function b(R,P,O,S){var Q=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_MERGE+"/"+R+"/"+P,k.PercServiceUtils.TYPE_POST,false,function(U,T){if(U==k.PercServiceUtils.STATUS_SUCCESS){S(k.PercServiceUtils.STATUS_SUCCESS,T.data)}else{var V=k.PercServiceUtils.extractDefaultErrorMessage(T.request);S(k.PercServiceUtils.STATUS_ERROR,V)}},O)}function D(R,O,Q,S){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+R+"/"+O,k.PercServiceUtils.TYPE_POST,false,function(U,T){if(U==k.PercServiceUtils.STATUS_SUCCESS){S(k.PercServiceUtils.STATUS_SUCCESS,T.data)}else{var V=k.PercServiceUtils.extractDefaultErrorMessage(T.request);S(k.PercServiceUtils.STATUS_ERROR,V)}},Q)}function F(R,O,Q,S,T){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+R+"/"+O+"/"+Q+"/"+S,k.PercServiceUtils.TYPE_DELETE,false,function(V,U){if(V==k.PercServiceUtils.STATUS_SUCCESS){T(k.PercServiceUtils.STATUS_SUCCESS,U.data)}else{var W=k.PercServiceUtils.extractDefaultErrorMessage(U.request);T(k.PercServiceUtils.STATUS_ERROR,W)}})}function h(O,P){k.ajax({url:k.perc_paths.TEMPLATE_LOAD_SAVE+"/"+O,type:"DELETE",success:function(R,S){var Q=[R,S];P(true,Q)},error:function(S,T,Q){var R=[S,T,Q];P(false,R)}});return}function K(O,P){k.ajax({url:k.perc_paths.TEMPLATES_SAVE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(O),success:function(R,S){var Q=[R,S];P(true,Q)},error:function(S,T,Q){var R=[S,T,Q];P(false,R)}})}function z(O,R,S,P){function Q(T){var U={};k.each(T.AssetDropCriteria,function(){U[this.widgetId]=new k.PercAssetDropCriteriaModel(this.widgetId,this.appendSupport,this.existingAsset,this.multiItemSupport,this.ownerId,this.supportedCtypes,this.assetShared,this.relationshipId)});S(U)}k.ajax({url:k.perc_paths.ASSET_WIDGET_DROP_CRITERIA+O+"/"+R,type:"GET",dataType:"json",success:Q,error:P})}function j(Q,R,O){function P(S){R(true,S)}k.ajax({url:k.perc_paths.TEMPLATE_LOAD_METADATA+"/"+Q,type:"GET",dataType:"json",success:P,error:O})}function x(O,P){k.ajax({url:k.perc_paths.TEMPLATE_SAVE_METADATA+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(O),success:function(R,S){var Q=[R,S];P(true,Q)},error:function(S,T,Q){var R=[S,T,Q];P(false,R)}})}function L(Q,O,S){var P=k.perc_paths.TEMPLATE_EXPORT+"/"+Q+"/"+O+".xml";var R=function(T,U){if(T==k.PercServiceUtils.STATUS_ERROR){S(false,[U.request,U.textstatus,U.error])}else{S(true,U.data)}};k.PercServiceUtils.makeRequest(P,k.PercServiceUtils.TYPE_GET,true,R)}function C(P,Q){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.SITE_GET_PROPERTIES+"/"+P,k.PercServiceUtils.TYPE_GET,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=k.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(k.PercServiceUtils.STATUS_ERROR,T)}})}function y(P,R){var O=k.perc_paths.UPDATE_INSPECTED_ELEMENT;var Q=function(S,T){if(S==k.PercServiceUtils.STATUS_ERROR){R(false,[T.request,T.textstatus,T.error])}else{R(true,T.data)}};k.PercServiceUtils.makeJsonRequest(O,k.PercServiceUtils.TYPE_POST,true,Q,P)}function I(P,R){var O=k.perc_paths.VIEW_IMPORT_LOG+"?templateId="+P+"&exists=true";var Q=function(S,T){R(S,T)};k.PercServiceUtils.makeJsonRequest(O,k.PercServiceUtils.TYPE_GET,true,Q)}function q(Q,P,R){var O={SiteTemplates:{importTemplate:[{url:Q,siteIds:[P]}]}};k.ajaxSetup({timeout:600000});k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL,k.PercServiceUtils.TYPE_POST,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data.TemplateSummary)}else{var U=k.PercServiceUtils.extractDefaultErrorMessage(S.request);R(k.PercServiceUtils.STATUS_ERROR,U)}},O)}function A(Q,P,S){var O={SiteTemplates:{importTemplate:[{url:Q,siteIds:[P]}]}};k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL_ASYNC,k.PercServiceUtils.TYPE_POST,false,function R(U,T){if(U==k.PercServiceUtils.STATUS_SUCCESS){S(k.PercServiceUtils.STATUS_SUCCESS,T.data)}else{defaultMsg="There was an unexpected error during the import process.";S(k.PercServiceUtils.STATUS_ERROR,defaultMsg)}},O)}function N(O,Q){k.PercServiceUtils.makeJsonRequest(k.perc_paths.JOB_STATUS+"/"+O,k.PercServiceUtils.TYPE_GET,false,function P(S,R){var U,T=k.PercServiceUtils.STATUS_SUCCESS;if(S==k.PercServiceUtils.STATUS_SUCCESS){U=R.data.asyncJobStatus}else{T=k.PercServiceUtils.STATUS_ERROR;U="There was an unexpected error during the import process."}Q(T,U)})}function J(O,Q){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL_RESULT+"/"+O,k.PercServiceUtils.TYPE_GET,false,function P(S,R){var U,T=k.PercServiceUtils.STATUS_SUCCESS;if(S==k.PercServiceUtils.STATUS_SUCCESS){U=R.data.TemplateSummary}else{T=k.PercServiceUtils.STATUS_ERROR;U="There was an unexpected error during the import process."}Q(T,U)})}function G(P,Q,R){var O={PageToTemplatePair:{pageId:P,siteId:Q}};k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_PAGE,k.PercServiceUtils.TYPE_POST,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data.Template)}else{var U="There was an error creating a template from the selected page";R(k.PercServiceUtils.STATUS_ERROR,U)}},O)}function e(O,P){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_MIGRATE_CONTENT,k.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==k.PercServiceUtils.STATUS_SUCCESS){P(k.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S="There was an error migrating content.";P(k.PercServiceUtils.STATUS_ERROR,S)}},O)}function n(O,P,Q){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_MIGRATE_CONTENT+"/"+O+"/"+P,k.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T="Error";Q(k.PercServiceUtils.STATUS_ERROR,T)}})}})(jQuery);(function(e){e.PercAddTemplateDialog=function b(z){var y={IDS:{MAIN_DIALOG:"perc_add_template_dialog",MAIN_DIALOG_SAVE_BUTTON:"perc_add_template_dialog_save",MAIN_DIALOG_CANCEL_BUTTON:"perc_add_template_dialog_cancel",CREATE_FROM_URL_RADIO:"perc_add_template_dialog_from_url"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.AddTemplateDialog.title@Add Template"),SELECT_SITE_ERROR_TEXT:I18N.message("perc.ui.AddTemplateDialog.text@Please select a site first.")}};var G={Save:{id:y.IDS.MAIN_DIALOG_SAVE_BUTTON,click:x},Cancel:{id:y.IDS.MAIN_DIALOG_CANCEL_BUTTON,click:function(){A.remove()}}};var j={id:y.IDS.MAIN_DIALOG,title:y.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:false,width:660,height:"auto",percButtons:G};var D="";var A;var n;var F=function(){};var q;function h(H){if(H!==undefined&&typeof(H)==="function"){F=H}D+="<div>";D+='<p class="hint">Select an existing page to begin your template or choose a Percussion template.</p><br/>';D+='<form action="">';D+='<fieldset class="perc_url_field">';D+='<input class="perc_dialog_input radio-left" type="radio" name="template_from" id="perc_add_template_dialog_from_url" value="from_url" checked="checked">';D+='<label class="perc_dialog_label" for="perc_add_template_dialog_from_url">Enter page URL from existing site:</label><br>';D+='<input class="perc_dialog_input perc_dialog_field" id="url" name="url" maxlength="2048" type="text">';D+="</fieldset>";D+='<fieldset class="perc_percussion_template_field">';D+='<input class="perc_dialog_input radio-left" type="radio" name="template_from" id="perc_add_template_dialog_from_percussion_templates" value="from_percussion_templates">';D+='<label class="perc_dialog_label" for="perc_add_template_dialog_from_percussion_templates">Percussion Templates</label>';D+='<div class="auto-disable">';D+='<select id="perc-templates-filter" name="perc-templates-filter"><option value="base">Base</option><option value="resp">Responsive</option></select>';D+="</div>";D+='<div id="perc-template-lib" class="auto-disable">';D+='<div class="perc-select" id="perc_templates_filter_block"></div>';D+="</div>";D+="</fieldset>";D+="</form>";D+="</div>";A=e(D).perc_dialog(j);A.find("#perc-template-lib").template_library();C()}function C(){function I(){var L=A.find('input[name="url"]');var M={url:{required:"input[type=radio]#perc_add_template_dialog_from_url:checked",maxlength:2000,noBinary:"noBinary"}};var K={url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."}};n=A.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:M,messages:K})}function H(){A.find("input[type=radio]").change(function(K){var L=this;A.find("fieldset").each(function(){var M=e(this);if(M.find(L).length===0){M.trigger("perc-add-template-dialog-disable-fieldset")}else{M.trigger("perc-add-template-dialog-enable-fieldset")}});n.form()})}function J(){A.find("fieldset.perc_url_field").bind("perc-add-template-dialog-disable-fieldset",function(K){e(this).find('input[name="url"]').attr("readonly","readonly").attr("disabled","true")}).bind("perc-add-template-dialog-enable-fieldset",function(K){e(this).find('input[name="url"]').removeAttr("readonly").removeAttr("disabled")});A.find("fieldset.perc_percussion_template_field").bind("perc-add-template-dialog-disable-fieldset",function(K){e(this).addClass("disabled")}).bind("perc-add-template-dialog-enable-fieldset",function(K){e(this).removeClass("disabled")})}I();H();J();A.find("fieldset.perc_percussion_template_field").trigger("perc-add-template-dialog-disable-fieldset")}function E(I){var H=I.next();if(H.find(".perc_field_error").length>0){I.removeClass("perc_field_error");H.remove()}}function x(){if(n.form()){e("#perc_add_template_dialog .ui-icon-closethick").click();B()}}function B(){var I=e.PercNavigationManager.getSiteName();function J(K){e.unblockUI();if(!K){perc_utils.alert_dialog({title:"Error",content:result})}F(q);A.remove()}if(I===""){alert(y.TEXT.SELECT_SITE_ERROR_TEXT);return}var H=A.find("input[type=radio]").filter(":checked");if(H.attr("id")==y.IDS.CREATE_FROM_URL_RADIO){f()}else{e.PercBlockUI();k(I,J)}}function k(I,K){var J=e("#perc-template-lib .perc-selected").attr("id");var H=e.PercSiteTemplatesController(false);q=H.copyTemplate(J,I).getTemplateName();H.saveTemplateChanges(K)}function f(){var I=e.trim(A.find('input[name="url"]').val());if(!(/^(https?):\/\//i).test(I)){I="http://"+I}e.PercSiteTemplatesController(false).createTemplateFromUrl(I,function H(J){e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:J})})}h(z)}})(jQuery);(function(K){K.PercSiteTemplatesController=function(ab){return{getTemplates:k,getTemplateById:X,getSites:aa,getAssignedSitesByTemplate:R,saveTemplateChanges:O,isDirty:Q,load:T,clearChanges:h,renameTemplate:Y,getAllTemplates:b,addTemplate:G,getBaseTemplates:H,getTemplatesForSite:I,assignTemplateToSite:P,unassignTemplateFromSite:L,copyTemplate:A,getSitesWithTemplates:Z,deleteTemplate:S,loadTemplateMetadata:f,saveTemplateMetadata:y,createTemplateFromUrl:M}};var E=new Object();var n="perc-pseudo-temp-";var q=0;var C=null;var U=false;var e=K.PercTemplateService();var D=null;var J=null;var B=null;function Z(){sites=new Array();for(t in E.templates){assignedSites=E.templates[t].getAssignedSites();for(s in assignedSites){contains=false;for(ss in sites){if(assignedSites[s]==sites[ss]){contains=true}}if(!contains){sites.push(assignedSites[s])}}}return sites}function b(){return k("all")}function G(ab){E.templates[ab.getTemplateId()]=ab}function H(){return k("base")}function I(ab){return k("site",ab)}function X(ab){return E.templates[ab]}function P(ab,ac){ab.assignToSite(ac);ab.setPersisted(false)}function L(ab,ac){ab.unassignFromSite(ac);ab.setPersisted(false)}function A(ad,ae){ad=ad.replace("perc-template-","");var af=this.getTemplateById(ad);var ac=af.clone();ac.setSourceId(af.getTemplateId());ac.setTemplateId(j());var ab=af.getTemplateName().replace("perc.base.","");ab=ab.replace("perc.resp.","");ac.setTemplateName(F(ab,ae));if(ae!=null){ac.setAssignedSites(null);ac.assignToSite(ae)}G(ac);return ac}function S(ac,af){var ab=this;var ae=parseInt(ac.charAt(0));if(isNaN(ae)||ae==0){delete (E.templates[ac]);af()}else{var ad=X(ac);e.deleteTemplate(ac,function(ai,ag){if(ai){delete (E.templates[ac]);af(true)}else{var ah=K.PercServiceUtils.extractDefaultErrorMessage(ag[0]);K.perc_utils.alert_dialog({title:"Error",content:ah});af(false)}})}}function f(ac,ab){function ad(af,ae){ab(ae)}e.loadTemplateMetadata(ac,ad)}function y(ac,ab){e.saveTemplateMetadata(ac,ab)}function k(ad,ab){var ac=null;if(ad=="all"){return V(E.templates,function(ae){return !ae.isBaseTemplate()})}else{if(ad=="base"){return V(E.templates,function(ae){return ae.isBaseTemplate()})}else{if(ad=="other"){return V(E.templates,function(ae){return ae.isOrphan()})}else{if(ad=="site"){return V(E.templates,function(ae){return ae.containsSite(ab)})}else{if(ad=="dirty"){return V(E.templates,function(ae){return !ae.isPersisted()})}}}}}}function aa(ab,ac){if(ab){E.sites=null}if(E.sites!=null&&E.sites!="undefined"){ac(K.merge([],E.sites));return}K.PercServiceUtils.makeJsonRequest(K.perc_paths.SITES_ALL+"/",K.PercServiceUtils.TYPE_GET,false,function(ae,ad){if(ae==K.PercServiceUtils.STATUS_SUCCESS){var ai=ad.data.SiteSummary;var ah=new Array();for(i=0;i<ai.length;i++){var ag=ai[i];ah.push(ag.name)}E.sites=K.merge([],ah);ac(ah)}else{var af=K.PercServiceUtils.extractDefaultErrorMessage(ad.request);var aj="Unable to get sites. Error "+af;K.perc_utils.alert_dialog({title:"Error",content:aj})}},null,null)}function R(ac){var ab=_getAssignedTemplateById(ac);if(ab==null){return new Array()}var ad=ab.getAssignedSites();if(ad==null||ad=="undefined"){return new Array()}return ad}function O(ac){var af={};var ad="success";var ag=null;af.SiteTemplates={};var ai=[];var ab=k("dirty");if(ab.length==0){ac(ad);return}var ah=new Array();var aj=new Array();for(var ae=0;ae<ab.length;ae++){var ak=ab[ae];if(N(ak)){ai.push(ak.getTemplateId());aj.push({sourceTemplateId:ak.getSourceId(),name:ak.getTemplateName(),siteIds:ak.getAssignedSites()})}else{ah.push({templateId:ak.getTemplateId(),name:ak.getTemplateName(),siteIds:ak.getAssignedSites()})}}if(ah.length>0){af.SiteTemplates.assignTemplates=ah}if(aj.length>0){af.SiteTemplates.createTemplates=aj}e.saveTemplates(af,function(ao,an){if(ao){var al=an[1];K.each(ai,function(){delete (E.templates[this])});x(an[0].TemplateSummary,function(){ac(al)})}else{var am=an[2];ac("Unable to create or assign templates to sites.\nError: ",am)}})}function Q(){return k("dirty").length>0}var W=[];function T(ae,ad,ab){if(K.inArray(ae,W)==-1){W.push(ae)}if(ad===true){E.templates=null}if(E.templates!=null&&ab===""){return}if(E.templates==null){E.templates=new Array()}var ac;if((ac=K.PercNavigationManager.getSiteName())!=null&&ab==null){ac="/"+ac}else{if(ab!=null){ac="/"+ab}else{ac="/unknown"}}K.PercServiceUtils.makeJsonRequest(K.perc_paths.TEMPLATES_ALL+ac,K.PercServiceUtils.TYPE_GET,false,function(af,ag){if(af==K.PercServiceUtils.STATUS_SUCCESS){var ai=ag.data.TemplateSummary;x(ai,function(){for(var ak=0;ak<W.length;ak++){W[ak]()}})}else{var ah=K.PercServiceUtils.extractDefaultErrorMessage(result.request);var aj="Unable to load templates.\nError: "+ah;K.perc_utils.alert_dialog({title:"Error",content:aj})}},null,null)}function x(ac,ag){for(var ad=0;ad<ac.length;ad++){var ae=ac[ad];var af=ae.readOnly==true;var ab=new K.Perc_Template_Summary(null,ae.id,ae.name);ab.setImageUrl(ae.imageThumbPath);ab.setPersisted(true);ab.setBaseTemplate(af);ab.setContentMigrationVersion(ae.contentMigrationVersion);if(!af){z(ae.id,function(ah){ab.setAssignedSites(ah)})}E.templates[ae.id]=ab}ag()}function h(){}function Y(ae,ad){if(ad==""||ad==null){var ah="Template names can not be blank.";K.perc_utils.alert_dialog({title:"Error",content:ah});return}var ab=K.PercNavigationManager.getSiteName();var ag=ad.toLowerCase();for(tempId in E.templates){var af=E.templates[tempId];if(af.containsSite(ab)&&ag==af.getTemplateNameLowerCase()){var ah="Template name '"+ad+"' is already in use in the current site.\nPlease use a different name for the template.\nNote that template names are case insensitive.";return ah}}var ac=E.templates[ae];ac.setTemplateName(ad);ac.setPersisted(false);return null}function j(){return n+(q++)}function N(ab){var ac=ab.getTemplateId();return ac.substr(0,n.length)===n}function F(aj,ab){var ah=k("site",ab);var af=k("dirty");var ae=ah.concat(af);var ai=2;var ak=true;var ac=aj.indexOf("-Copy");if(ac!=-1){aj=aj.substring(0,ac)}var ad=aj+"-Copy";do{ak=true;for(var ag=0;ag<ae.length;ag++){if(ae[ag].templateName==ad){ad=aj+"-Copy("+ai+")";ai++;ak=false;break}}}while(!ak);return ad}function z(ab,ac){K.PercServiceUtils.makeJsonRequest(K.perc_paths.SITES_BY_TEMPLATE+"/"+ab,K.PercServiceUtils.TYPE_GET,true,function(ae,ad){if(ae==K.PercServiceUtils.STATUS_SUCCESS){var ai=ad.data.SiteSummary;var ah=new Array();for(i=0;i<ai.length;i++){var ag=ai[i];ah.push(ag.name)}ac(ah)}else{var af=K.PercServiceUtils.extractDefaultErrorMessage(ad.request);var aj="Unable to load sites for template "+ab+"\nError: "+af;K.perc_utils.alert_dialog({title:"Error",content:aj})}},null,null)}function V(ac,af,ab){var ad=[];for(var ae in ac){if(!ab!=!af(ac[ae])){ad.push(ac[ae])}}return ad}function M(ac,ag){var ad=K.PercNavigationManager.getSiteName();var ae={view:K.Percussion.getCurrentTemplatesView(),tabId:"perc-tab-layout"};function ab(ah,ai){if(ah!=K.PercServiceUtils.STATUS_SUCCESS){if(ag!==undefined){ag(ai)}return}ae.templateName=ai.name;ae.templateId=ai.id;K.PercPageService.getPagesWithTemplate(ai.id,{maxResults:1},af,function(aj,ak){ag(ak)})}function af(ai,aj){var ah=$j.deparam.querystring();ae.pageId=aj.firstItemId;$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,ah.site,null,null,null,ah.path,null,ae)}K.PercImportProgressDialog({backgroundRefreshCallback:function(){T(function ah(){K("#perc-assigned-templates").template_selected("refresh")},true)},onSuccessCallback:function(ah){ab("success",ah)},startProgressCallback:function(ah){K.PercTemplateService().createTemplateFromUrlAsync(ac,ad,function(aj,ai){ah(aj,ai)})},pollingProgressCallback:K.PercTemplateService().createTemplateFromUrlStatus,importResultCallback:K.PercTemplateService().createTemplateFromUrlResult})}})(jQuery);(function(b){b.widget("ui.template_library",{controller:null,templates:null,_init:function(){this.controller=b.PercSiteTemplatesController(false);var e=this;b("#perc-templates-filter").change(function(){e._loadTemplates()});b.PercBlockUI();e.controller.getSites(false,function(f){e._updateTemplatesFilter(f);e._loadTemplates();b.unblockUI()})},_loadTemplates:function(){var f=this;var q=b("#perc-templates-filter :selected").val();var n=f.controller.getBaseTemplates();if(q===""||q==="base"){f.templates=jQuery.grep(n,function(y,x){return(y.getTemplateName().indexOf("perc.base.")==0)});e(f)}else{if(q==="resp"){f.templates=jQuery.grep(n,function(y,x){return(y.getTemplateName().indexOf("perc.resp.")==0)});e(f)}else{k(q)}}function k(x){if(b.PercSiteTemplatesController(false).getTemplates("site",q)!=""){f.templates=b.PercSiteTemplatesController(false).getTemplates("site",q);e(f)}else{b.when(j(q)).then(function(y){e(f)},function(y){console.log(y+", sites not yet loaded.")},function(y){b("body").append(y)})}}function j(y){var x=b.Deferred();b.PercSiteTemplatesController(false).load(function(){f.templates=b.PercSiteTemplatesController(false).getTemplates("site",q);x.resolve()},false,y);return x.promise()}function e(z){z.templates.sort(function(D,F){var E=String(D.getTemplateName()).toUpperCase();var C=String(F.getTemplateName()).toUpperCase();if(E>C){return 1}if(E<C){return -1}return 0});z.element.html("");if(!z.templates||z.templates.length===0){return}z.element.append("<table ><tr>\n");global_templates=z.templates;var B="";var x=z.templates.length;for(var y=0;y<x;y++){template=z.templates[y];lastTemp=template;B+='<td><div percBaseTemplateName="'+template.getTemplateName()+'" id="perc-template-'+template.getTemplateId()+'" class="template" style="display:table-cell; ">\n';B+='<img style="border:1px solid #E6E6E9" src="'+template.getImageUrl()+'" class="perc-template-thumbnail"/>\n';var A=template.getTemplateName().replace("perc.base.","");A=A.replace("perc.resp.","");B+='<span title="'+A+'">';B+=b.PercTruncateText(A,22)+"</span>\n";B+="</div></td>\n"}z.element.find("tr").append(B);h()}function h(){var x=b(".template").click("singleclick",function(){b("#perc-template-lib .perc-selected").removeClass("perc-selected");b(this).addClass("perc-selected")});b(x[0]).addClass("perc-selected")}},_updateTemplatesFilter:function(f){b("#perc-templates-filter").html('<option value="base">Base</option><option value="resp">Responsive</option>');if(f){for(var e=0;e<f.length;e++){b("#perc-templates-filter").append('<option value="'+f[e]+'">'+f[e]+"</option>")}}},destroy:function(){b.widget.prototype.apply(this,arguments)}});b.extend(b.ui.template_library,{getter:"value length",defaults:{option1:"defaultValue",dummyvalue:"dummyvalue"}})})(jQuery);(function(k){k.widget("ui.template_selected",{controller:null,templates:null,siteFilterSelection:"all",DEFAULT_ITEMS:5,PAGE_GROUP_SIZE:5,firstPagesArray:null,_init:function(){var q=this;q.firstPagesArray=new Object();this.controller=k.PercSiteTemplatesController(false);this.controller.load(function(){q._afterLoad()});k("#perc-template-name-button").click(function(){q._renameTemplate()})},_afterLoad:function(){var q=this;this._setupEvents();this.controller.getSites(false,function(y){q._setSites(y);var z;z=$j.PercNavigationManager.getMemento();if(z.view!=null){k.Percussion.setCurrentTemplatesView(z.view)}if(k("#perc-assigned-templates").data("scrollable")!=null){k("#perc-assigned-templates").data("scrollable").updateItemWrap()}if(q.selectedTemplateName!=null&&q.selectedTemplateName!=""){var x=k("#perc-assigned-templates .perc-template-item .perc-template-label[title='"+q.selectedTemplateName+"']").parent().attr("id");q.selectedTemplateName=null;q._selectTemplate(x);q.autoscrollToSelected()}else{if(k("#perc-assigned-templates .perc-selected").length!=0){q._selectTemplate(k("#perc-assigned-templates .perc-selected").attr("id"));q.autoscrollToSelected()}else{if(gSelectTemp!=null&&gSelectTemp!=""){q._selectTemplate(gSelectTemp);q.autoscrollToSelected()}else{if(z.templateId){q._selectTemplate(z.templateId);q.autoscrollToSelected()}else{if(k("#perc-assigned-templates").data("scrollable")!=null){k("#perc-assigned-templates").data("scrollable").begin()}}}}}})},autoscrollToSelected:function(){this.updateTemplatesPagingSize();if(k("#perc-assigned-templates .perc-selected").length!=0){if(k.Percussion.getCurrentTemplatesView()==k.Percussion.VIEW_MODE_CATALOG){var x=k("#perc-assigned-templates .perc-selected");var q=k("div#"+x.attr("id")).data("positionInCarousel");k("#perc-assigned-templates").data("scrollable").seekTo(q);k(".perc-templates-layout").animate({scrollTop:0},500)}else{var x=k("#perc-assigned-templates .perc-selected");var y=x.offset().top;k(".perc-templates-layout").animate({scrollTop:y-x.height()},500)}}},refresh:function(){this._updateSiteTemplates()},_setupEvents:function(){var q=this;k("#perc-site-filter").change(function(x,y){q._updateSiteTemplates()});k("#perc-activated-templates-scrollable").bind("autoscroll",function(){q.autoscrollToSelected()})},_setSites:function(q){this.sites=q;this._updateSiteTemplates()},updateTemplatesPagingSize:function(){var q=parseInt((k("#perc-assigned-templates-container").width())/268);if(q<1){q=1}if(k("#perc-assigned-templates .perc-template-item").length>q){k("#perc-assigned-templates").data("scrollable").getConf().size=q}},_updateSiteTemplates:function(){var O=this;var Y=O.PAGE_GROUP_SIZE;var M=k.PercNavigationManager.getSiteName();if(M==""){}else{this.templates=this.controller.getTemplates("site",M);this.templates.sort(function(aa,ac){var ab=String(aa.getTemplateName()).toUpperCase();var Z=String(ac.getTemplateName()).toUpperCase();if(ab>Z){return 1}if(ab<Z){return -1}return 0})}var y=k("#perc-assigned-templates");y.html("");var T;T=k('<div class="perc-items" />');y.append(T);buffer="";y.append(buffer);y.css("width","auto");var F=this.templates.length;if(F==0){T.append('<div class="perc-template-item-empty" />');k(".perc-items").width("100%").css("text-align","center")}var A="";if(k.Percussion.getCurrentTemplatesView()==k.Percussion.VIEW_MODE_THUMBNAILS){A=' style="display: none"';k(".perc-items").width("auto")}for(var K=0;K<F;K++){var X=this.templates[K];var I=X.getTemplateName();var S="";if(this.selectedTemplateName==X.getTemplateName()){S="class='perc-selected'"}buffer='<div class="perc-template-item" id="'+X.getTemplateId()+'" '+S+">";buffer+='    <div class="perc-apply" id="'+X.getTemplateId()+'-apply" title="Match Content to Template Layout"></div>';buffer+='    <div class="perc-edit" id="'+X.getTemplateId()+'-edit" title="Edit template"></div>';buffer+='    <div class="perc-delete" id="'+X.getTemplateId()+'-delete" title="Delete template"></div>';buffer+='    <div class="perc-template-label" title="'+I+'" alt="'+I+'" id="'+X.getTemplateId()+'-name">'+I+"</div>";buffer+='    <div percBaseTemplateName="'+X.getBaseTemplateName()+'" id="'+X.getTemplateId()+'id" class="perc-template-thumbnail-container perc-template-background">';buffer+='         <img height = "122px" width="174px" src = "'+X.getImageUrl()+'" />';buffer+="    </div>";buffer+=' <div class="perc-template-paging-container"'+A+">";buffer+='    <ul class="perc-template-pages" templateVersion ="'+X.getContentMigrationVersion()+'"templateId="'+X.getTemplateId()+'">';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+='         <li class="perc-template-pages-items" ></li>';buffer+="    </ul>";buffer+='    <form action="#" class="perc-template-pages-controls">';buffer+='        <div style="right:56px;" class="previous">Prev</div>';buffer+='        <input type="text" class="perc-jump" name="perc-template-pages-controls-jump" autocomplete="off" />';buffer+='        <div style="right:0px;" class="next">Next</div>';buffer+="    </form>";buffer+='    <div class="perc-template-showing" style="width: 100px; margin: 6px 0pt 0px 24px;">';buffer+='        Items: <span class="perc-template-page-group-range">0-0</span>';buffer+="    </div>";buffer+='    <div class="perc-template-showing" style="width: 100px; margin: 8px 0pt 13px 24px;">';buffer+='        Total Items: <span class="perc-template-total">0</span>';buffer+="    </div>";buffer+="    </div>";buffer+="</div>";T.append(buffer);T.find("div#"+X.getTemplateId()).data("positionInCarousel",K);k("#"+X.getTemplateId()+" li").click(function(Z){if(k(this).attr("title")==null||k(this).attr("title")==""){return}k(".perc-template-item .perc-template-paging-container li").removeClass("perc-template-page-highlighted-color");k(this).addClass("perc-template-page-highlighted-color");O.selectedPageId=k(this).data("pageInfo").id;O.selectedPageIdOriginalTemplateId=k(this).parents(".perc-template-item").attr("id")});k("#"+X.getTemplateId()+"-name").editable(function(ab,aa){var Z=this.id.substr(0,this.id.length-5);ab=k.perc_textFilters.URL(ab);var ac=null;if(k(this).attr("title")!=ab){ac=O._renameTemplate(Z,ab)}if(ac!=null){k.perc_utils.alert_dialog({title:"Error",content:ac})}return ab},{event:"dblclick",style:"padding:0px",cssclass:"perc-template-edit-label",width:"198px",height:"14px",select:true,onblur:"submit",fieldid:"perc_inline_field_edit",data:function(aa,Z){return k(this).attr("title")},callback:function(){L()}})}k(".perc-template-pages").droppable({accept:".perc-imported-page, .perc-template-pages-items",activeClass:"ui-state-hover",hoverClass:"ui-state-active",drop:function(ae,ag){var ad=k(this).attr("templateId");var ac=k(this).find("li.perc-template-pages-items").not(".perc-require-migration").first().attr("id");var Z=[];Z.push(k(ag.draggable).attr("id"));var af=k(ag.draggable).parent().attr("templateId");if(ad==af){return}k.PercBlockUI();var ab=af?"TEMPLATE":"UNASSIGNED";var aa={MigrateContentRestData:{siteName:k.PercNavigationManager.getSiteName(),templateId:ad,refPageId:ac,pageIds:Z,sourceType:ab}};k.PercTemplateService().assignTemplateAndMigrateContent(aa,function(ai,ah){if(ai){if(ah.MigrateResponse.status=="ERROR"){k.perc_utils.alert_dialog({title:"Error",content:ah.MigrateResponse.message})}H(ad,1);if(ag.helper.dropCallback&&k.isFunction(ag.helper.dropCallback)){ag.helper.dropCallback()}if(af){H(af,1)}}k.unblockUI()})}});if(k.Percussion.getCurrentTemplatesView()==k.Percussion.VIEW_MODE_CATALOG){if(k(".perc-prev-templates-carousel").length==0){var Q=k('<div class="perc-prev-templates-carousel" />').append(k('<a id="perc_prev_templates_carousel_arrow" class="prevPageCarousel perc-prev-templates-carousel-arrow"></a>'));y.css("overflow","hidden");var P=k('<div class="perc-next-templates-carousel" />').append(k('<a id="perc_next_templates_carousel_arrow" class="nextPageCarousel perc-next-templates-carousel-arrow"></a>'));y.parents("#perc-activated-templates-scrollable").prepend(P);y.parents("#perc-activated-templates-scrollable").prepend(Q)}y.addClass("perc-scrollable-templates");var B=y.scrollable({items:".perc-items",size:O.DEFAULT_ITEMS,globalNav:true,prev:".prevCarousel",next:".nextCarousel",prevPage:".prevPageCarousel",nextPage:".nextPageCarousel",keyboard:false,clickable:false});y.parents("#perc-activated-templates-scrollable").append(k('<div class="resetPaging">'));k(window).resize(function(){O.updateTemplatesPagingSize()})}else{k(".perc-template-item-middle-droppable").height(k(".perc-template-item").css("min-height"))}k(".perc-template-item").each(function(){var Z=k(this).attr("id");H(Z,1);k.perc_filterField(k("#"+Z).find(".perc-template-pages-controls .perc-jump"),k.perc_textFilters.ONLY_DIGITS)});k("#perc-activated-templates .perc-template-pages-controls .next").click(function(){var ac=k(this).parents(".perc-template-item");var Z=k(ac).attr("id");var ad=W(Z);var aa=ad+Y;var ab=parseInt(k(ac).find(".perc-template-total").html());if(aa<=ab){H(Z,aa)}else{return false}});k(".resetPaging").click(function(aa){if(typeof aa.deletedPageId!=="undefined"&&aa.deletedPageId==O.selectedPageId){var Z=O.firstPagesArray[O.selectedPageIdOriginalTemplateId];O.selectedPageId=Z;k(".perc-template-pages li#"+Z).addClass("perc-template-page-highlighted-color")}});k("#perc-activated-templates .perc-template-pages-controls .previous").click(function(){var ab=k(this).parents(".perc-template-item");var Z=k(ab).attr("id");var ac=W(Z);var aa=ac-Y;if(aa>0){H(Z,aa)}else{return false}});k("#perc-activated-templates .perc-template-pages-controls").submit(function(){var ab=k(this).parents(".perc-template-item").attr("id");var ac=D(ab);var aa=k(this).find(".perc-jump");if(ac==0){aa.val(1);return false}var Z=aa.val();if(Z!=undefined&&Z!=""){C(ab,Z)}else{var ae=W(ab);var ad=Math.ceil(ae/Y);k(this).find(".perc-jump").val(ad)}return false});k("#perc-assigned-templates-container").on("click",".perc-apply",function(){var Z=k(this).attr("id");Z=Z.replace("-apply","");E(Z)});function E(Z){k.PercBlockUI();k.PercTemplateService().applyTemplate(Z,"ALL",function(ab,aa){if(ab){if(aa.MigrateResponse.status=="ERROR"){k.perc_utils.alert_dialog({title:"Error",content:aa.MigrateResponse.message})}H(Z,1)}k.unblockUI()})}function H(aa,ac){var ab;var Z;ab=$j.PercNavigationManager.getMemento();if(ab.templateId&&ab.pageId&&aa==ab.templateId){Z=ab.pageId;ab.pageId=null}k.PercPageService.getPagesWithTemplate(aa,{startIndex:ac,pageId:Z,maxResults:Y},function(af,ag){if(af===k.PercServiceUtils.STATUS_SUCCESS){ag.childrenInPage=k.perc_utils.convertCXFArray(ag.childrenInPage);var aj=k("#"+aa+" .perc-template-pages li.perc-template-pages-items");var ah=k("#"+aa+" .perc-template-pages").attr("templateVersion");aj.removeClass("perc-template-page-highlighted-color");if(ag.firstItemId!=null){O.firstPagesArray[aa]=ag.firstItemId}for(var ai=0;ai<aj.length;ai++){k(aj[ai]).html("").attr("title","").removeClass("perc-require-migration")}for(var ai=0;ai<ag.childrenInPage.length;ai++){var al=ag.childrenInPage[ai].path.replace("//"+k.perc_paths.SITES_ROOT_NO_SLASH,"");var an=ag.childrenInPage[ai].id;var ae=aj.eq(ai);if(an==O.selectedPageId||(Z&&an==Z)){ae.addClass("perc-template-page-highlighted-color")}else{ae.removeClass("perc-template-page-highlighted-color")}if(O.selectedPageId==null&&Z){O.selectedPageId=Z;O.selectedPageIdOriginalTemplateId=ab.templateId}var am=f(ag.childrenInPage[ai].typeProperties.entries);var ak='<span class="perc-template-pages-items-dropdown"></span>';var ad=am.migrationEmptyWidgetFlag=="yes"?"<span><img src='../images/images/errorIcon.gif' title='Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray.'/></span>":"";ae.attr("title",al).attr("id",an).data("pageInfo",ag.childrenInPage[ai]).html('<span class="perc-template-pages-items-thumbnail"><img src="../images/images/inspectButton.png" /></span><div class="perc-template-page-title">'+ag.childrenInPage[ai].name+"</div>"+ad+ak);ae.find(".perc-template-pages-items-thumbnail img").attr("data",JSON.stringify(ag.childrenInPage[ai]));if(am.contentMigrationVersion!=ah){ae.find(".perc-template-pages-items-thumbnail img").addClass("perc-require-migration")}ae.find(".perc-template-pages-items-dropdown").PercDropdown({percDropdownRootClass:"perc-dropdown-template-pages-items-dropdown",percDropdownOptionLabels:["","Open Page","Change Template"],percDropdownCallbacks:[function(){},x,U],percDropdownCallbackData:["",{pageId:an,templateId:aa},{pageId:an,templateId:aa}]})}J(aa,ag.childrenCount,ag.startIndex);k(".perc-template-pages-items .perc-template-pages-items-thumbnail img").PercImageTooltip()}else{k.perc_utils.alert_dialog({title:I18N.message("perc.ui.labels@Error"),content:I18N.message("perc.ui.sitetemplates.error@Get pages by template error")})}})}function U(Z){var ab=Z.templateId;var aa=Z.pageId;k.PercChangeTemplateDialog().openDialog(aa,ab,$j.PercNavigationManager.getSiteName(),function(){window.location.reload()})}function x(Z){R(Z.pageId)}function J(Z,aa,ah){var af=k("#"+Z).find(".perc-template-total");k(af).html(aa);var aj=k("#"+Z).find(".perc-template-page-group-range");var ad=ah+Y-1;var ac=0;var ai=0;if(aa==0||aa==1){aj.html(aa);ai=aa}else{ac=ah;ai=ad;if(aa<ah){ac=0}if(ad>aa){ai=aa}aj.html(ac+"-"+ai)}var ag=Math.ceil(ai/Y);if(ag<1){ag=1}var ak=k("#"+Z).find(".perc-jump");ak.val(ag);if(ah<=1){k("#"+Z).find(".perc-template-pages-controls div.previous").removeClass("previous").addClass("previous-disabled")}else{var ab=k("#"+Z).find(".perc-template-pages-controls div.previous-disabled");if(ab!=undefined){k(ab).removeClass("previous-disabled").addClass("previous")}}if(ad>=aa){k("#"+Z).find(".perc-template-pages-controls div.next").removeClass("next").addClass("next-disabled")}else{var ae=k("#"+Z).find(".perc-template-pages-controls div.next-disabled");if(ae!=undefined){k(ae).removeClass("next-disabled").addClass("next")}}}function C(aa,Z){var ac=V(Z);var ab=D(aa);if(ac<1){k(this).find(".perc-jump").val(1);H(aa,1)}else{H(aa,ac)}}function V(Z){return(Z*Y)-Y+1}function D(Z){return parseInt(k("#"+Z).find(".perc-template-total").html())}function W(aa){var Z=k("#"+aa).find(".perc-template-page-group-range").html();var ab=parseInt(Z.split("-")[0]);return ab}function G(ad){var ab=null;if(ad==O.selectedPageIdOriginalTemplateId&&k.Percussion.getCurrentTemplatesView()==k.Percussion.VIEW_MODE_CATALOG){ab=O.selectedPageId}var aa=k.Percussion.getCurrentTemplatesView();var Z=$j.deparam.querystring();var ac=k("#"+ad).find(".perc-template-thumbnail-container").attr("percbasetemplatename");var ae={templateName:ac,templateId:ad,pageId:ab,view:aa,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,Z.site,null,null,null,Z.path,null,ae)}k.perc_filterField(k("div.perc-template-label"),k.perc_textFilters.URL);function L(){k.PercTextOverflow(k("div.perc-template-label"),202)}L();fixBottomHeight();var O=this;k(".perc-template-thumbnail-container").parent().click(function(Z){if(O.selectedTemplateId==k(this).attr("id")){return}if(k(Z.target).hasClass("perc-edit")){return}if((k(Z.target).parent().hasClass("perc-template-pages-items")||k(Z.target).hasClass("perc-template-pages-items"))&&(k(Z.target).attr("title")!="")){O._selectTemplate(k(this).attr("id"),false)}else{O._selectTemplate(k(this).attr("id"),true)}});k(".perc-template-pages-items").dblclick(function(ab){var aa=k(ab.target).parents(".perc-template-item").attr("id");var Z=k(ab.target).attr("id");if(Z==null){Z=k(ab.target).parents(".perc-template-pages-items").attr("id")}O.selectedPageIdOriginalTemplateId=aa;O.selectedPageId=Z;G(aa)});function N(aa,Z){k(aa).parents(".perc-template-item").find(".perc-template-thumbnail-container img").attr("src","/Rhythmyx/rx_resources/images/TemplateImages/"+k.PercNavigationManager.getSiteName()+"/"+Z+"-page.jpg?nocache="+Math.random())}function z(aa){var Z=k(aa).parents(".perc-template-pages-items").attr("id");R(Z)}function R(Z){k.PercPathService.getPathItemById(Z,function(ab,ad){if(ab==k.PercServiceUtils.STATUS_SUCCESS){var aa=$j.deparam.querystring();var ac=true;ad.PathItem.path=ad.PathItem.folderPaths.replace("//","/")+"/"+ad.PathItem.name;k.PercNavigationManager.handleOpenPage(ad.PathItem,ac)}else{k.perc_utils.alert_dialog({title:"Error",content:ad});return}})}k(".perc-template-thumbnail-container").dblclick(function(){var Z=k(this).parent().attr("id");G(Z)});k(".perc-copy").click(function(){var Z=k(this).parent().attr("id");O.controller.copyTemplate(Z,null);O._updateSiteTemplates()});k(".perc-edit").click(function(){var Z=k(this).parent().attr("id");if(Z!=O.selectedTemplateId||typeof O.selectedPageId=="undefined"||O.selectedPageId==null||k(this).closest(".perc-template-item").find("#"+O.selectedPageId).length==0){O._selectTemplate(Z,true)}G(Z)});k(".perc-delete").click(function(){var aa=k(this).parent().attr("id");var Z={id:"perc-template-delete-confirm",title:"Delete Template",question:"Template: "+k("#"+aa+"-name").text()+"<br/><br/>"+I18N.message("perc.ui.sitetemplates.warning@Confirm"),cancel:function(){},success:function(){k.PercBlockUI();O.controller.deleteTemplate(aa,function(ab){k.unblockUI();if(ab){O._updateSiteTemplates();O._setSelectedTemplateIndicator("");k("#perc-assigned-templates").data("scrollable").updateItemWrap();k("#perc-assigned-templates").data("scrollable").begin()}})}};k.perc_utils.confirm_dialog(Z)});var q=k.cookie("templateImport");if(q==null){return""}else{jQuery("div[title ='"+q+"']").click();k.cookie("templateImport",null)}},_renameTemplate:function(q,y){var x=this.controller.renameTemplate(q,y);this._save();return x},_save:function(){k.PercBlockUI();var q=this;q.controller.saveTemplateChanges(function(y,x){k.unblockUI();if(!y){perc_utils.alert_dialog({title:"Error",content:x})}else{q._afterLoad()}})},_selectTemplate:function(y,x){k(".perc-template-item").removeClass("perc-template-page-highlighted-color").removeClass("perc-template-highlighted-color-border").removeClass("perc-selected");if(x){k(".perc-template-pages li").removeClass("perc-template-page-highlighted-color");var A=this.firstPagesArray[y];this.selectedPageId=A;this.selectedPageIdOriginalTemplateId=y;k(".perc-template-pages li#"+A).addClass("perc-template-page-highlighted-color");k(".perc-template-pages li#"+A).parents(".perc-template-item").find(".perc-template-thumbnail-container img").attr("src","/Rhythmyx/rx_resources/images/TemplateImages/"+k.PercNavigationManager.getSiteName()+"/"+A+"-page.jpg?nocache="+Math.random())}var C=k("#"+y);C.addClass("perc-selected");C.addClass("perc-template-highlighted-color-border");this._setSelectedTemplateIndicator("Selected template: "+k("#"+y+"-name").attr("title"));this.selectedTemplateId=y;var z=this.controller.getTemplateById(y);var q=z.getTemplateName();k("#perc-template-name-field").attr("value",q);gSelectTemp=y;sGalleryThemeName="";var B={templateId:y,templateName:q};this._trigger(".change",null,B)},_assignSiteToCurrentlySelectedTemplate:function(q){template=this.controller.getTemplateById(this.selectedTemplateId);if(q.checked){this.controller.assignTemplateToSite(template,q.id)}else{this.controller.unassignTemplateFromSite(template,q.id)}},_setSelectedTemplateIndicator:function(q){k("#perc_selected_template_name").text(q)},destroy:function(){k.widget.prototype.apply(this,arguments)},refresh:function(q){if(selectedTemplate!==undefined||selectedTemplate!==""){this.selectedTemplateName=q}this._afterLoad()}});function b(y){var q=this;var x="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='41px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp'></iframe></div>";if(y){x="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='83px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp?status=PERC_ERROR&message=The file you attempted to import is not a valid XML file. Choose a valid CM1 template XML file for upload'></iframe></div>"}dialog=k(x).perc_dialog({resizable:false,title:"Import Template",modal:true,closeOnEscape:true,percButtons:{Import:{click:function(){var z=k.perc_paths.TEMPLATE_IMPORT;k.PercTemplateService().getSiteProperties(k.PercNavigationManager.getSiteName(),function(B,A){if(B){z=z+"/"+A.SiteProperties.id;var C=k("#perc-import-template-frame").contents().find(".perc-template-import-field").val();if(C==""){k("#perc-import-template-frame").css("height","67px");k("#perc-import-template-frame").contents().find(".perc-import-error").show();return}k("#perc-import-template-frame").contents().find("#perc-import-template-form").attr("action",z);k("#perc-import-template-frame").contents().find("#perc-import-template-form").submit();k("#perc-import-template-frame").load(function(){n()})}})},id:"perc-template-import"},Cancel:{click:function(){dialog.remove()},id:"perc-import-dialog-cancel"}},id:"perc-import-dialog",width:490})}function n(){var q=k("#perc-import-template-frame").contents().find("body").text();if(q!="null"){dialog.remove();k.cookie("templateImport",q);location.reload()}else{dialog.remove();b(true)}}function h(){b()}function j(){k.PercAddTemplateDialog(function q(x){k("#perc-assigned-templates").template_selected("refresh",x)})}function f(x){var y=[];if(!k.isArray(x.entry)){y.push(x.entry)}else{y=x.entry}var q=[];k(y).each(function(){q[this.key]=this.value});return q}function e(x){var y=k("#perc-activated-templates").find(".perc-selected").attr("id");var q=k("#"+y).find(".perc-template-thumbnail-container").attr("percbasetemplatename");k.PercTemplateService().exportTemplate(y,q,function(A,z){if(A){}else{perc_utils.alert_dialog({title:"Error",content:z})}})}k.extend(k.ui.template_selected,{getter:"value length",defaults:{option1:"defaultValue"}})})(jQuery);(function(n){function f(z){var q=new Array();var y=new RegExp("\\#(.*?)\\{","g");var A=z.match(y);for(item in A){var x=A[item].substring(1,A[item].length-1);q.push(x)}return q}function e(y,q){var x=new RegExp("\\#"+q+"\\{(.*?)\\}","g");return y.match(x)}function b(q){q=q.replace(/^\ /,"");q=q.replace(/\;/,"");return q}function k(y,A){var B=e(y,A);var F=new RegExp("\\{(.*?)\\}","g");var D=new RegExp("([^:]*):([^;]*);","g");var H=new Object();var G=F.exec(B);G=G[1];var E=G.match(D);for(propertyItem in E){var x=E[propertyItem].match(/([^:]*):([^;]*);/g);var q=x[0].split(":");var z=b(q[0]);var C=b(q[1]);z=z.replace(" ","");C=C.replace(" ","");H[z]=C}return H}function h(y){y=y.replace('"',"");var A=f(y);var q=new Object();for(item in A){var x=new Object();var z=A[item];x=k(y,z);q[z]=x}return q}function j(x){var q="";for(selector in x){q+="#"+selector+"{";for(property in selector){q+=" "+property+": "+selector[property]+"; "}q+="} "}return q}n.perc_css_utils={getRegionSelectorsFrom:f,get_region_selector:e,get_properties_for:k,parse_region_css:h,region_css_out:j}})(jQuery);var regionWidgetAssociationXmlString="";(function(b){b.Perc_Page_class=function(){this.id=null;this.name=null;this.templateId=null;this.templateRootRegion=null;this.templateObjectXml;this.pageXml;this.pageRegions=new Array();this.pageWidgets=new Array();this.load=function(f,h){var e=this;b.ajax({url:b.perc_paths.PAGE_CREATE+"/"+f,success:function(j){e.pageXml=j;$pageObject=b(e.pageXml);e.id=$pageObject.find("Page id:first").text();e.templateId=$pageObject.find("Page templateId:first").text();e.name=$pageObject.find("Page name:first").text();e.getPageRegionHtmlsFromRest();h(e.templateId)},type:"GET",dataType:"xml"})};this.helper=null;this.setHelper=function(e){this.helper=e};this.mergePageXmlIntoTemplateXml=function(k){this.findOverridableAndLockedTemplateRegions(k);var n=b(this.pageXml);var h=this;var q=new Object();n.find("region").each(function(){pageRegionId=b(this).children("regionId").text();q[pageRegionId]=b(this)});for(overridableTemplateRegionId in this.overridableTemplateRegions){var j=q[overridableTemplateRegionId];if(j){var f=this.overridableTemplateRegions[overridableTemplateRegionId];f.parent()[0].replaceChild(j[0],f[0]);h.overrideTemplateRegion(overridableTemplateRegionId)}}var e=b(k).find("Template regionTree regionWidgetAssociations");n.find("Page regionBranches regionWidgetAssociations regionWidget").each(function(){e.append(b(this));var x=b(this).children("regionId").text();h.overrideTemplateWidget(x)})};this.pageRegionHtml=Object();this.getPageRegionHtmlsFromRest=function(){var e=this;var f=b(this.pageXml);$pageRegionWidgets=f.find("Page regionBranches regionWidgetAssociations regionWidget");$pageRegionWidgets.children("regionId").each(function(){var h=b(this).text();b.ajax({url:b.perc_paths.PAGE_PREVIEW+h,type:"POST",contentType:"text/xml",dataType:"xml",data:e.pageXml,processData:false,async:false,success:function(j){e.pageRegionHtml[h]=b(j).find("result").text()},error:function(n,j,k){alert("Unable to retrieve HTML from REST service: "+k)}})})};this.overridableTemplateRegions=new Object();this.lockedTemplateRegions=new Array();this.findOverridableAndLockedTemplateRegions=function(f){var e=b(f).find("Template regionTree rootRegion children region:first");this.recursivelyFindTemplateLeafRegions(e);this.removeTemplateRegionsWithWidgets(f)};this.recursivelyFindTemplateLeafRegions=function(h){var f=this;var j=h.children("regionId").text();var e=h.children("children");if(e.children("region").length==0){this.overridableTemplateRegions[j]=h}else{f.lockedTemplateRegions.push(j)}e.children("region").each(function(){f.recursivelyFindTemplateLeafRegions(b(this))})};this.removeTemplateRegionsWithWidgets=function(j){var f=b(j);var h=f.find("Template regionTree regionWidgetAssociations");var e=this;h.find("regionWidget").each(function(){var k=b(this).find("regionId").text();delete e.overridableTemplateRegions[k];e.lockedTemplateRegions.push(k)})};this.overriddenTemplateRegionIds=new Array();this.overrideTemplateRegion=function(e){if(-1==b.inArray(e,this.overriddenTemplateRegionIds)){this.overriddenTemplateRegionIds.push(e)}};this.overriddenTemplateWidgetIds=new Array();this.overrideTemplateWidget=function(e){if(-1==b.inArray(e,this.overriddenTemplateWidgetIds)){this.overriddenTemplateWidgetIds.push(e)}};this.setOriginalTemplate=function(f,e){this.templateObjectXml=f;this.templateRootRegion=e};this.clear=function(f){var e=this;b(e.pageXml).find("Page regionBranches regions").empty();b(e.pageXml).find("Page regionBranches regionWidgetAssociations").empty();b.ajax({url:b.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:e.pageXml,dataType:"xml",processData:false,success:function(h){alert("Your page has been cleared and saved successfully.");f()},error:function(h){alert("There was an error clearing your page.")}})};this.save=function(f){var e=this;b(e.pageXml).find("Page regionBranches regionWidgetAssociations regionWidget widgetItems widgetItem id").each(function(){var j=b(this).text();var h=parseInt(j);if(isNaN(h)||h==0){this.parentNode.removeChild(this)}});b.ajax({url:b.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:e.pageXml,dataType:"xml",processData:false,success:function(h){alert("Your page has been saved successfully.");f()},error:function(h){alert("There was an error saving your page.")}})};this.extractPageXmlFromTemplateXml=function(q){var x=b(q);var y=b(this.pageXml);var E=this;var f=new Object();x.find("region").each(function(){templateRegionId=b(this).children("regionId").text();f[templateRegionId]=b(this)});var C=new Object();y.find("region").each(function(){pageRegionId=b(this).children("regionId").text();C[pageRegionId]=b(this)});for(D in this.overridableTemplateRegions){var z=f[D];if(z&&z.find("region").length>0){var e=C[D];if(e){e.parent()[0].replaceChild(z[0],e[0])}else{y.find("Page regionBranches regions").append(f[D])}}}var h=new Object();x.find("regionWidget").each(function(){D=b(this).children("regionId").text();h[D]=b(this)});var j=new Object();y.find("regionWidget").each(function(){D=b(this).children("regionId").text();j[D]=b(this)});var k=new Array();for(D in h){var z=f[D];if(E.isRegionIdOverridable(D)){k[D]=h[D]}z.parents("region").each(function(){var F=b(this).children("regionId").text();if(E.isRegionIdOverridable(F)){k[D]=h[D]}})}var B=y.find("Page regionBranches regionWidgetAssociations");for(var D in k){var A=k[D];var n=j[D];if(A){if(n){n.parent()[0].replaceChild(A[0],n[0])}else{B.append(A)}}}};this.isRegionIdOverridable=function(f){for(var e in this.overridableTemplateRegions){if(e==f){return true}}return false};this.isAncestor=function(e,f){if(e==f){return true}return false};this.htmlToRegionTree=function(e,f){return b.ajax({url:b.perc_paths.TEMPLATE_HTML_PARSE+"/",dataType:"xml",async:false,type:"POST",contentType:"text/xml",data:e,processData:false})};this.getPageObjectXml=function(){return this.pageXml};this.getPageId=function(){return this.pageId};this.getTemplateId=function(){return this.templateId};this.getPageName=function(){return this.pageName};this.findRegionByIdHelper=function(h,e,f){findId=e[0];if(h.getId()==findId){f.push(h)}};this.findRegionById=function(e){foundRegions=new Array();this.traverseRegion(this.templateRootRegion,this.findRegionByIdHelper,[e],foundRegions);return foundRegions[0]};this.traverseRegion=function(k,h,e,f){h(k,e,f);if(!k.hasSubRegions()){return}else{var j=k.getSubRegions();if(j!=null){for(r in j){this.traverseRegion(j[r],h,e,f)}}}}}})(jQuery);var regionWidgetAssociationXmlString="";(function(b){b.Perc_Template_class=function(){this.loadTemplate=function(f,h,j){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/"+f,dataType:"xml",type:"GET",success:function(n,k){e.parseTemplateObject(n);j("")},error:function(){alert("unable to load template "+f)}})};this.parseTemplateObject=function(k){this.rootRegion=null;var n=b(k);this.templateObject=k;var f=n.find("Template regionTree");var e=f.find("rootRegion children region:first");var h=f.find("regionWidgetAssociations");var j=n.find("Template cssMarkup");this.parseRegions(e,null);this.parseRegionWidgetAssociations(h)};this.parseRegions=function(e,j){var y=this;var f=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var h=e.children("regionId").text();if(f==h.substr(0,f.length)){var n=parseInt(h.substr(f.length));this.regionIdInc=Math.max(this.regionIdInc,n)}var q=new b.Perc_Region_class(h);if(j!=null){j.addSubRegion(q,true)}else{this.rootRegion=q}var k=e.children("children");var x=b(k.find("code templateCode:first").text());q.setVertical(!x.hasClass("perc-horizontal"));k.children("region").each(function(){y.parseRegions(b(this),q)})};this.parseRegionWidgetAssociations=function(f){append=true;var e=this;f.find("regionWidget").each(function(){regionId=b(this).find("regionId").text();widgetItems=b(this).find("widgetItems");widgetItems.find("widgetItem").each(function(){definitionId=b(this).find("definitionId").text();var h=e.createNewWidget(definitionId);h.setFromXml(b(this));e.addWidget(h,regionId,true)})})};this.save=function(z,e){var B=this;var n=this.htmlToRegionTree(this.rootRegion.generateHtml(false));var j=b(n.responseXML);var y=j.find("Region children region:first");var h=b(B.templateObject).find("Template regionTree");var q=h.find("rootRegion children region:first");q.replaceWith(y);var x=this.rootRegion.generateWidgetAssociationsXml(true);var A=b.xmlDOM(x);var k=A.context.documentElement;var f=h.find("regionWidgetAssociations");f.replaceWith(k);b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/",type:"POST",contentType:"text/xml",data:B.templateObject,dataType:"xml",processData:false,success:function(D,C){e("success",D)},error:function(E,C,D){e("error",D)}})}};b.Perc_Region_class=function(e){this.lorem="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eleifend velit quis risus adipiscing ullamcorper. ";this.regionid=e;this.css=new Object();this.vertical=true;this.subRegions=null;this.widgets=null;this.regionparent=null;this.dirty=false;this.locked=false;this.overridable=false;this.overriden=false;this.pageRegion=false;this.widgetHtml="";this.getId=function(){return this.regionid};this.getParent=function(){return this.regionparent};this.nextSibling=function(){if(this.regionparent==null){return null}var f=this.regionparent.getSubRegions().length;if(f<2){return null}for(var h=0;h<this.regionparent.getSubRegions().length;h++){if(this.regionparent.getSubRegions()[h].regionid==this.regionid){if(h<(f-2)){return this.regionparent.getSubRegions()[h+1]}return null}}};this.previousSibling=function(){if(this.regionparent==null){return null}var f=this.regionparent.getSubRegions().length;if(f<2){return null}for(var h=0;h<this.regionparent.getSubRegions().length;h++){if(this.regionparent.getSubRegions()[h].regionid==this.regionid){if(h>0){return this.regionparent.getSubRegions()[h-1]}return null}}};this.setOverridable=function(f){this.overridable=f};this.isOverridable=function(){return this.overridable};this.setOverridden=function(f){this.overridden=f};this.isOverridden=function(){return this.overridden};this.setPageRegion=function(f){this.pageRegion=f};this.isPageRegion=function(){return this.pageRegion};this.isLeaf=function(){return(!this.hasWidgets()&&!this.hasSubRegions())};this.setParent=function(f){this.regionparent=f};this.isDirty=function(){return this.dirty};this.setDirty=function(f){this.dirty=f};this.isVertical=function(){return this.vertical};this.getSubRegions=function(){return this.subRegions};this.getWidgets=function(){return this.widgets};this.hasSubRegions=function(){return(this.subRegions!=null&&this.subRegions.length>0)};this.hasWidgets=function(){return(this.widgets!=null&&this.widgets.length>0)};this.addSubRegion=function(h,f){if(this.hasWidgets()){alert("Cannot add a region if widgets exist.");return}if(this.subRegions==null){this.subRegions=new Array()}if(f){this.subRegions.push(h)}else{this.subRegions.unshift(h)}h.setParent(this)};this.insertSubRegion=function(h,f){if(this.hasWidgets()){alert("Cannot insert a region if widgets exist.");return}if(this.subRegions==null){this.subRegions=new Array()}if(this.subRegions.length==0||this.subRegions.length<f){this.subRegions.push(h)}else{this.subRegions.splice(f,0,h)}h.setParent(this)};this.addWidget=function(h,f){if(this.hasSubRegions()){alert("Cannot add a widget if sub-regions exist.");return}if(this.widgets==null){this.widgets=new Array()}if(f){this.widgets.push(h)}else{this.widgets.unshift(h)}};this.insertWidget=function(h,f){if(this.hasSubRegions()){alert("Cannot insert a region if widgets exist.");return}if(this.widgets==null){this.widgets=new Array()}if(this.widgets.length==0||this.widgets.length<f){this.widgets.push(h)}else{this.widgets.splice(f,0,h)}};this.getSubRegion=function(j){if(this.subRegions==null){return null}for(var f=0;f<this.subRegions.length;f++){var h=this.subRegions[f];if(h.regionid==j){return h}}return null};this.getIndex=function(){if(this.regionparent!=null){var h=this.regionparent.getSubRegions();for(var f=0;f<h.length;f++){var j=h[f];if(j.regionid==this.regionid){return f}}}return -1};this.getWidget=function(h){if(this.widgets==null){return null}for(var f=0;f<this.widgets.length;f++){var j=this.widgets[f];if(j.widgetid==h){return j}}return null};this.removeSubRegion=function(j){if(this.subRegions==null){return}for(var f=0;f<this.subRegions.length;f++){var h=this.subRegions[f];if(h.regionid==j){this.subRegions.splice(f,1);h.setParent(null);return h}}};this.removeWidget=function(h){if(this.widgets==null){return}for(var f=0;f<this.widgets.length;f++){var j=this.widgets[f];if(j.widgetid==h){this.widgets.splice(f,1);return j}}};this.setVertical=function(f){this.vertical=f};this.getCss=function(){return this.css};this.setCss=function(f){if(f==null){return}this.css=f};this.setCssAttribute=function(f,h){this.css[f]=h};this.clearCss=function(){this.css=new Object()};this.generateInnerVelocity=function(){var h="";h+='<div class="';h+=this.vertical?"perc-vertical":"perc-horizontal";h+='">';if(this.hasSubRegions()){for(var f in this.subRegions){h+=this.subRegions[f].generateInnerVelocity()}if(!this.vertical){h+='<div class="clear-float"></div>'}}else{h+="#region('"+this.regionid+"' '' '' '' '')"}h+="</div>";return h};this.generateWidgetAssociationsXml=function(f){regionWidgetAssociationXmlString="";if(f){regionWidgetAssociationXmlString="<regionWidgetAssociations>\n"}if(this.hasWidgets()){regionWidgetAssociationXmlString+=this.getRegionWidgetXmlString();if(f){regionWidgetAssociationXmlString+="</regionWidgetAssociations>\n"}return regionWidgetAssociationXmlString}for(r in this.subRegions){this.getRegionWidgetsXmlString(this.subRegions[r])}if(f){regionWidgetAssociationXmlString+="</regionWidgetAssociations>\n"}return regionWidgetAssociationXmlString};this.getRegionWidgetsXmlString=function(f){regionWidgetAssociationXmlString+=f.getRegionWidgetXmlString();for(r in f.subRegions){this.getRegionWidgetsXmlString(f.subRegions[r])}};this.getRegionWidgetXmlString=function(){if(!this.hasWidgets()){return""}var f="";f="	<regionWidget>\n";f+="		<regionId>"+this.regionid+"</regionId>\n";f+="		<widgetItems>\n";for(w in this.widgets){f+="			<widgetItem>\n";f+="				<definitionId>"+this.widgets[w].getWidgetDefinitionId()+"</definitionId>\n";f+="				<id>"+this.widgets[w].getId()+"</id>\n";f+="				<name>"+this.widgets[w].getId()+"</name>\n";f+="				<properties>\n";for(property in this.widgets[w].properties){f+="					<property>\n";f+="						<name>"+property+"</name>\n";f+="						<value>"+this.widgets[w].properties[property]+"</value>\n";f+="					</property>\n"}f+="				</properties>\n";f+="			</widgetItem>\n"}f+="		</widgetItems>\n";f+="	</regionWidget>\n";return f};this.innerHtml="";this.setInnerHtml=function(f){this.innerHtml=f};this.render=function(f){alert(["#"+this.regionid,f]);b("#"+this.regionid).replaceWith(f)};this.generateHtml=function(n){var k="";var f="perc-region";if(!this.hasSubRegions()){f+=" perc-region-leaf"}k+='<div class="';k+=f;k+='" ';k+=('id="'+this.regionid+'" title="'+this.regionid+'">');k+='<div class="';k+=this.vertical?"perc-vertical":"perc-horizontal";k+='">';if(this.hasSubRegions()){for(var h in this.subRegions){k+=this.subRegions[h].generateHtml(n)}if(!this.vertical){k+='<div class="clear-float"></div>'}}else{if(this.hasWidgets()){if(n){k+="#region('"+this.regionid+"' '' '' '' '')"}else{for(var j in this.widgets){widgetId=this.widgets[j].getId();k+=this.widgets[j].render()}}}}k+="</div></div>";return k};this.setWidgetHtml=function(f){this.widgetHtml=f};this.getWidgetHtml=function(){return this.widgetHtml}};b.Perc_Widget_class=function(h,f,e){this.parentRegion=e;this.widgetid=h;this.widgetname=null;this.widgetDefinitionId=f;this.html=null;this.assetIds=new Array();this.properties=new Object();this.widgetItemXml=null;this.getParentRegion=function(){return this.parentRegion};this.setFromXml=function(k){var j=this;this.widgetItemXml=k;this.widgetDefinitionId=k.find("definitionId").text();this.widgetid=k.find("id").text();k.find("properties property").each(function(){var q=b(this).find("name").text();var n=JSON.parse(b(this).find("value").text());if(q!=null&&q!=""){j.properties[q]=n}})};this.setProperty=function(k,j){this.properties[k]=j};this.alert=function(){var j="";for(p in this.properties){j+=""+p+" = "+this.properties[p]+"\n"}alert("Widget Properties: \n"+j)};this.setHtml=function(j){this.html=j};this.render=function(){var j="<div title='"+this.widgetid+"' id='"+this.widgetid+"' class='perc-widget'>";if(this.html!=null){j+=this.html}else{j+="&nbsp;"}j+="</div>";return j};this.getHtml=function(j){var k='<div class="perc-widget" ';k+=('id="'+this.widgetid+'">');if(this.html!=null){k+=this.html}else{k+="<b>Empty ";k+=this.widgetDefinitionId;k+=" widget</b>"}k+="</div>";return k};this.getProperties=function(){return this.properties};this.getId=function(){return this.widgetid};this.getName=function(){return this.widgetname};this.setName=function(j){this.widgetname=j};this.getWidgetDefinitionId=function(){return this.widgetDefinitionId};this.setWidgetDefinitionId=function(j){this.widgetDefinitionId=j};this.getAssetIds=function(){return this.assetIds}}})(jQuery);(function(b){b.perc_template_layout_helper=new function(){this.lorem="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eleifend velit quis risus adipiscing ullamcorper. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed laoreet molestie congue. In tincidunt enim at sem faucibus eu iaculis sem viverra. ";this.rootRegion=null;this.regionTempPrefix="temp-region-";this.regionPagePrefix="page-region-";this.pseudoWidgetPrefix="pseudo-widget-id-";this.regionIdInc=0;this.widgetIdInc=0;this.templateObjectXml=null;this.objectId=null;this.objectType=null;this.utils=b.perc_utils;this.page=null;this.Layout={NORTH:"north",SOUTH:"south",EAST:"east",WEST:"west",CENTER:"center"};this.Type={PAGE:"page",TEMPLATE:"template"};this.load=function(e,h,j){var f=this;this.objectId=e;this.objectType=h;if(h==this.Type.TEMPLATE){f.loadTemplate(e,this.Type.TEMPLATE,j)}else{if(h==this.Type.PAGE){f=this;this.page=new b.Perc_Page_class();this.page.setHelper(this);this.page.load(e,function(k){f.loadTemplate(k,h,j)})}}};this.loadTemplate=function(f,h,j){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/"+f,dataType:"xml",type:"GET",success:function(n,k){if(h==e.Type.PAGE){e.page.mergePageXmlIntoTemplateXml(n)}e.parseTemplateObjectXml(n,j);if(h==e.Type.PAGE){e.page.setOriginalTemplate(e.templateObjectXml,e.rootRegion)}},error:function(){alert("Unable to load template "+f)}})};this.updateAllWidgetHtmlFromRest=function(){$page=b(this.page.pageXml);alert(this.page.pageXml.textContent);$pageRegionWidgets=b(this.page.pageXml).find("Page regionBranches regionWidgetAssociations regionWidget regionId");$pageRegionWidgets.children("regionId").each(function(){alert(b(this).text())})};this.updateWidgetsHtmlFromRest=function(e,k,j){var h=null;$pageOrTemplateXml=b(e);if($pageOrTemplateXml.find("Template").length>0){h=$pageOrTemplateXml.find("Template regionTree regionWidgetAssociations")}else{h=$pageOrTemplateXml.find("Page regionBranches regionWidgetAssociations")}var f=null;h.find("regionWidget").each(function(){id=b(this).find("regionId").text();if(id==k){f=b(this)}})};this.parseTemplateObjectXml=function(h,q){this.rootRegion=null;this.templateObjectXml=h;var f=b(this.templateObjectXml);var e=f.find("Template regionTree rootRegion children region:first");var j=f.find("Template regionTree regionWidgetAssociations");var k=f.find("Template cssMarkup");var n=f.find("Template cssRegion");this.parseRegions(e,null);this.parseRegionWidgetAssociations(j,q)};this.parseRegions=function(e,j){var y=this;var f=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var h=e.children("regionId").text();if(f==h.substr(0,f.length)){var n=parseInt(h.substr(f.length));this.regionIdInc=Math.max(this.regionIdInc,n)}var q=new b.Perc_Region_class(h);if(j!=null){j.addSubRegion(q,true)}else{this.rootRegion=q}var k=e.children("children");var x=b(k.find("code templateCode:first").text());q.setVertical(!x.hasClass("perc-horizontal"));k.children("region").each(function(){y.parseRegions(b(this),q)})};this.parseRegionWidgetAssociations=function(f,h){append=true;var e=this;f.find("regionWidget").each(function(){regionId=b(this).find("regionId").text();parentRegion=e.getRegion(regionId,e.rootRegion);var k=null;var j=new Object();widgetItems=b(this).find("widgetItems");widgetItems.find("widgetItem").each(function(){definitionId=b(this).find("definitionId").text();k=e.createNewWidget(definitionId,parentRegion);k.setFromXml(b(this));e.addWidget(k,regionId,true);j[k.getId()]=k})});h()};this.markTemplateRegionOverride=function(e){this.page.overrideTemplateRegion(e)};this.markTemplateWidgetOverride=function(e){this.page.overrideTemplateWidget(e)};this.clearPage=function(e){this.page.clear(e)};this.save=function(f,h){var e=this;if(f==this.Type.PAGE){this.templateModelToTemplateXml(true);this.page.extractPageXmlFromTemplateXml(this.templateObjectXml);this.page.save(h)}else{if(f==this.Type.TEMPLATE){e.templateModelToTemplateXml(true);b(e.templateObjectXml).find("Template regionTree regionWidgetAssociations regionWidget widgetItems widgetItem id").each(function(){var k=b(this).text();var j=parseInt(k);if(isNaN(j)||j==0){this.parentNode.removeChild(this)}});b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/",type:"POST",contentType:"text/xml",data:e.templateObjectXml,dataType:"xml",processData:false,success:function(k,j){h("success",k)},error:function(n,j,k){h("error",k)}})}else{alert("Unable to save Page or Template")}}};this.templateModelToTemplateXml=function(x){var A=this;var B=this.rootRegion.generateHtml(x);var k=this.htmlToRegionTree(B);var h=b(k.responseXML);var y=h.find("Region children region:first");var f=b(A.templateObjectXml).find("Template regionTree");var n=f.find("rootRegion children region:first");n.parent()[0].replaceChild(y[0],n[0]);var q=this.rootRegion.generateWidgetAssociationsXml(true);var z=b.xmlDOM(q);var j=z.context.documentElement;var e=f.find("regionWidgetAssociations");e.parent()[0].replaceChild(j,e[0])};this.getTemplateHtmlFromRest=function(e){rootRegionId=this.rootRegion.getId();this.getRegionHtmlFromRest(this.templateObjectXml,rootRegionId,e)};this.getRegionHtmlFromRest=function(f,j,h){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_RENDER+"/"+j,type:"POST",contentType:"text/xml",dataType:"xml",data:f,processData:false,async:false,success:function(k){regionHtml=b(k).find("result").text();h(regionHtml)},error:function(q,k,n){alert("Unable to retrieve HTML from REST service: "+n)}})};this.addRegion=function(f,e){var h=this.getRegion(f,this.rootRegion);if(h==null){return null}h.setOverridden(true);switch(e){case this.Layout.NORTH:this._insertNewRegion(h,true,false);break;case this.Layout.SOUTH:this._insertNewRegion(h,true,true);break;case this.Layout.EAST:this._insertNewRegion(h,false,true);break;case this.Layout.WEST:this._insertNewRegion(h,false,false);break;case this.Layout.CENTER:break}return h};this.createNewWidget=function(e,f){return new b.Perc_Widget_class(this._createPseudoWidgetId(),e,f)};this.addWidget=function(h,j,e){var f=this.getRegion(j,this.rootRegion);if(f==null){alert("Region does not exist.");return null}if(f.hasSubRegions()){alert("Cannot add widget to region with sub regions.");return null}f.setOverridden(true);f.addWidget(h,e);return h};this.getRegion=function(k,j){if(j==null){j=this.rootRegion}if(j.getId()==k){return j}if(j.hasSubRegions()){var f=j.getSubRegions();for(var h in f){var e=this.getRegion(k,f[h]);if(e!=null){return e}}}return null};this.getWidgetRegion=function(j,k){if(k==null){return null}if(k.getWidget(j)!=null){return k}if(k.hasSubRegions()){var f=k.getSubRegions();for(var h in f){var e=this.getWidgetRegion(j,f[h]);if(e!=null){return e}}}return null};this.removeRegion=function(j){var h=this.getRegion(j,this.rootRegion);if(h==null){return null}var f=h.getParent();if(f==null){this.rootRegion=null;return h}else{if(f.getSubRegions().length>2){return f.removeSubRegion(h.regionid)}else{f.removeSubRegion(h.getId());var e=f.getSubRegions()[0];f.removeSubRegion(e.regionid);f.setVertical(true);if(e.hasSubRegions()){this._moveSubRegions(e,f)}else{if(e.hasWidgets()){this._moveWidgets(e,f)}}f.setCss(e.getCss());return h}}};this.removeWidget=function(f){var e=this.getWidgetRegion(f,this.rootRegion);if(e!=null){return e.removeWidget(f)}return null};this.moveRegion=function(n,f,j){var k=this.getRegion(f,this.rootRegion);if(k==null){throw ("target region does not exist.")}var e=k.getIndex();var h=j?e:e+1;this.orderSubRegion(n,h)};this.orderSubRegion=function(j,e){var h=this.getRegion(j,this.rootRegion);var f=h.getParent();if(h!=null&&f!=null){f.insertSubRegion(f.removeSubRegion(j),e)}};this.orderWidget=function(j,f,k,n){if(j==null){alert("Cannot order widget "+j);return}var e=this.getRegion(f,this.rootRegion);var h=this.getRegion(k,this.rootRegion);if(e!=null&&h!=null){h.insertWidget(e.removeWidget(j),n)}else{alert("Unable to reorder widget "+j+" from region "+f+" to region "+k+" at position "+n+".\nOne of the regions does not exist.")}};this._createNewRegionId=function(){var e=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var f=e+(++this.regionIdInc);return f};this._createPseudoWidgetId=function(){return this.pseudoWidgetPrefix+(this.widgetIdInc++)};this._insertNewRegion=function(k,f,e){var n=new b.Perc_Region_class(this._createNewRegionId(),null);n.setPageRegion(true);var j=f?!k.isVertical():k.isVertical();if(k.hasSubRegions()){if(j){var q=this._wrapSubRegions(k);k.setVertical(f);k.addSubRegion(q,true)}k.addSubRegion(n,e)}else{var h=new b.Perc_Region_class(this._createNewRegionId(),null);h.setVertical(k.isVertical());k.setVertical(f);if(k.hasWidgets()){this._moveWidgets(k,h)}k.addSubRegion(n,true);k.addSubRegion(h,!e);h.setPageRegion(true)}};this._wrapSubRegions=function(e){var f=new b.Perc_Region_class(this._createNewRegionId(),null);f.setVertical(e.isVertical());this._moveSubRegions(e,f);return f};this._moveWidgets=function(h,j){var f=h.getWidgets();if(f==null||f.length==0){return}for(var e=f.length-1;e>-1;e--){j.addWidget(h.removeWidget(f[e].widgetid),false)}};this._moveSubRegions=function(h,j){var f=h.getSubRegions();if(f==null||f.length==0){return}for(var e=f.length-1;e>-1;e--){j.addSubRegion(h.removeSubRegion(f[e].regionid),false)}};this.isWidgetAllowed=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())&&!e.hasSubRegions()};this.isRegionAllowed=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())};this.isRegionResizable=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())};this.htmlToRegionTree=function(e,f){return b.ajax({url:b.perc_paths.TEMPLATE_HTML_PARSE+"/",dataType:"xml",async:false,type:"POST",contentType:"text/xml",data:e,processData:false})}}})(jQuery);var gSelectTemp=null;(function($){$.widget("ui.template_layout",{helper:null,showBorders:true,pageId:null,type:null,controller:null,dropPosition:null,hoveringRegion:null,POSITION_NORTH:0,POSITION_WEST:3,selectedRegion:null,selectedWidget:null,dropAction:null,DROP_ACTION_ADD_REGION:0,DROP_ACTION_SORT_REGION:1,DROP_ACTION_ADD_WIDGET:2,borderWidth:1,padding:10,w1start:null,w1now:null,w2start:null,w2now:null,next:null,repositioning:false,originalRegionId:null,_init:function(){var self=this;this.helper=$.perc_template_layout_helper;this.controller=$.perc_layout_controller;this.controller.setHelper(this.helper);this.controller.getWidgetLibrary(function(widgetLibrary){self.renderWidgetLibrary(widgetLibrary)});$("#perc-save").click(function(){self._save()});$("#perc-layout-tab").click(function(){self.initialize()});$("#perc-clear-page").click(function(){self.helper.clearPage(function(){self.render()})});$("#perc-region-edit").perc_dialog({modal:true,zIndex:100000,width:"600px",autoOpen:false,open:function(){self.originalRegionId=self.selectedRegion.attr("id");$("#perc-region-name").val(self.selectedRegion.attr("id"));$("#perc-region-width").val(self.selectedRegion.css("width"));$("#perc-region-height").val(self.selectedRegion.css("height"));$("#perc-region-padding").val(self.selectedRegion.css("padding"));$("#perc-region-margin").val(self.selectedRegion.css("margin"))},percButtons:{Ok:{click:function(){self.selectedRegion.attr({id:$("#perc-region-name").val()});self.selectedRegion.css("width",$("#perc-region-width").val());self.selectedRegion.css("height",$("#perc-region-height").val());self.selectedRegion.css("padding",$("#perc-region-padding").val());self.selectedRegion.css("margin",$("#perc-region-margin").val());if(self.helper.regionCSS[$("perc-region-name").val()]!=self.originalRegionId){eval("delete self.helper.regionCSS."+self.originalRegionId+";")}$("#perc-menu").css("display","none");$("#perc-region-edit").dialog("close")},id:"perc-region-editor-dialog-save"},Cancel:{click:function(){$("#perc-menu").css("display","none");$(this).dialog("close")},id:"perc-region-editor-dialog-cancel"}}});$("#perc-widget-edit").perc_dialog({modal:true,zIndex:100000,autoOpen:false,open:function(){var html=self.controller.getCurrentWidgetDefinition().render();$("#perc-widget-property-form").html(html)},percButtons:{Cancel:{click:function(){$("#perc-menu").css("display","none");$("#perc-widget-edit").dialog("close")},id:"perc-widget-editor-dialog-cancel"},Ok:{click:function(){$("#perc-menu").css("display","none");self.controller.editWidgetOk(function(){self.render()});$("#perc-widget-edit").dialog("close")},id:"perc-widget-editor-dialog-save"}}})},renderWidgetLibrary:function(widgetLibrary){$("#perc-widget-library").html(widgetLibrary.html());this._addWidgetSupport();$("#perc-widget-library-toggle").click(function(){$("#perc-widget-library").toggle()})},_addWidgetSupport:function(){var self=this;$(".perc-toolbar-item").draggable({opacity:0.7,helper:function(){return $(this).clone().appendTo("body").css("zIndex",5).show()},start:function(evt,ui){self.dropAction=self.DROP_ACTION_ADD_WIDGET}})},_save:function(){var self=this;this.helper.save(this.type,function(){self.render()})},setPageId:function(pageId){this.pageId=pageId},initialize:function(){if(this.pageId==null&&gSelectTemp==null){return}var self=this;if(this.pageId){this.type=this.helper.Type.PAGE;this.helper.load(this.pageId,this.helper.Type.PAGE,function(html){self._load(html);self.renderCSS(false)})}else{if(gSelectTemp){this.type=this.helper.Type.TEMPLATE;this.helper.load(gSelectTemp,this.helper.Type.TEMPLATE,function(html){self._load(html);self.renderCSS(false)})}else{alert("Unable to determine Page or Template ID")}}},_load:function(html){this.render();this.renderCSS();var self=this;$("#showBorders").click(function(){self.showBorders=!self.showBorders;if(self.showBorders){$(".perc-region").addClass("perc-region-puff")}else{$(".perc-region").removeClass("perc-region-puff")}});$("#region-tool").draggable({opacity:0.7,helper:function(){return $(this).clone().appendTo("body").css("zIndex",5).show()},start:function(evt,ui){self.dropAction=self.DROP_ACTION_ADD_REGION},stop:function(evt,ui){self.hoveringRegion=null}});$("#perc-close").click(function(){if(self.selectedRegion){var regionId=self.selectedRegion.attr("id");self.helper.removeRegion(regionId);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(regionId)}}else{if(self.selectedWidget){var regionId=self.selectedWidget.parent().parent().attr("id");var widgetId=self.selectedWidget.attr("id");self.helper.removeWidget(self.selectedWidget.attr("id"));if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(regionId)}}}self.render()});$("#perc-edit").click(function(){if(self.selectedRegion){$("#perc-region-edit").dialog("open")}else{if(self.selectedWidget){var widgetId=self.selectedWidget.attr("id");var widgetParentRegionId=self.selectedWidget.parent().parent().attr("id");var widgetParentRegion=self.helper.getRegion(widgetParentRegionId);var widget=widgetParentRegion.getWidget(widgetId);self.controller.editWidgetStart(widget,null)}}});this._regionize()},_autoSizeHorizontal:function(){var self=this;$(".perc-horizontal").each(function(){horizParent=$(this);var depth=horizParent.parents(".perc-region").length;var childNumber=horizParent.children().length-1;var parentWidth=horizParent.width();var parentInnerWidth=parentWidth-(2*self.padding+2*self.borderWidth)*depth;parentInnerWidth=parentWidth;w=Math.floor((parentInnerWidth-(childNumber*2*(self.padding+self.borderWidth)))/childNumber);if(isNaN(w)||w<0){return}horizParent.children().each(function(){$(this).width(w)});var maxHeight=-1;horizParent.children().each(function(){if($(this).height()>maxHeight){maxHeight=$(this).height()}});horizParent.children().each(function(){if($(this).attr("class")!="clear-float"){$(this).css("min-height",maxHeight)}})})},_regionize:function(){var self=this;$(".perc-region-leaf").css("background-color","#DDFFDD");$(".perc-region").addClass("perc-region-puff");$(".perc-widget").addClass("perc-widget-puff");$(".clear-float").remove();$(".perc-horizontal").append('<div class="clear-float"></div>');$("#perc-menu").css("display","none");var moveWidgetFromRegion=null;var moveWidgetToRegion=null;var moveWidget=null;$(".perc-horizontal").addClass("perc-sortable");$(".perc-vertical").addClass("perc-sortable");$(".perc-region .perc-sortable").sortable({connectWith:".perc-region .perc-sortable",dropOnEmpty:true,start:function(event,ui){$("#perc-menu").css("display","none");moveWidget=ui.item.attr("id");moveWidgetFromRegion=ui.item.parent().parent().attr("id")},stop:function(event,ui){pos=0;ui.item.parent().children().each(function(){if($(this).attr("id")!=ui.item.attr("id")){pos++}else{return false}});moveWidgetToRegion=ui.item.parent().parent().attr("id");self.helper.orderWidget(moveWidget,moveWidgetFromRegion,moveWidgetToRegion,pos);self._autoSizeHorizontal()}});$(".perc-widget").click(function(event){event.stopPropagation();$(".perc-region").each(function(){$(this).removeClass("perc-selected")});$(".perc-widget").each(function(){$(this).removeClass("perc-selected")});$(this).addClass("perc-selected");self.selectedRegion=null;self.selectedWidget=$(this);$("#perc-menu").css("position","absolute").css("left",$(this).width()+$(this).offset().left-45).css("top",$(this).offset().top).css("zIndex","10").css("display","block")});$(".perc-region").click(function(event){event.stopPropagation();$(".perc-region").each(function(){$(this).removeClass("perc-selected")});$(".perc-widget").each(function(){$(this).removeClass("perc-selected")});$(this).addClass("perc-selected");self.selectedRegion=$(this);$("#perc-menu").css("position","absolute").css("left",$(this).width()+$(this).offset().left-25).css("top",$(this).offset().top).css("zIndex","10").css("display","block")});$(".perc-horizontal > .perc-region").resizable({handles:"e",start:function(event,ui){$("#perc-menu").css("display","none");self.next=$(this).next();self.w1start=$(this).width();self.w2start=self.next.width()},resize:function(event,ui){self.w1now=$(this).width();self.w2now=self.w2start-(self.w1now-self.w1start);self.next.width(self.w2now);$(this).css("position","relative").css("top","0px").css("left","0px");self.next.css("position","relative").css("top","0px").css("left","0px");$(this).height("")},stop:function(event,ui){if(self.type==self.helper.Type.PAGE&&!self.helper.isRegionResizable($(this).attr("id"))){$(this).width(self.w1start);self.next.width(self.w2start)}$(this).height("")}});$(".perc-vertical > .perc-region").resizable({handles:"s",start:function(event,ui){$("#perc-menu").css("display","none");self.next=$(this).next();self.w1start=$(this).height();self.w2start=self.next.height()},resize:function(event,ui){self.w1now=$(this).height();self.w2now=self.w2start-(self.w1now-self.w1start);self.next.height(self.w2now);$(this).css("position","relative").css("top","0px").css("left","0px");self.next.css("position","relative").css("top","0px").css("left","0px");self.next.height($(this).height())},stop:function(event,ui){}});$(".perc-vertical > .perc-region").draggable({distance:20,containment:"parent",axis:"y",start:function(){self.repositioning=true;$("#perc-menu").css("display","none")},helper:function(){var height=$(this).height()+2*self.padding+2*self.borderWidth;var width=$(this).width()+2*self.padding;return"<div style='width:"+width+"px;height:"+height+"px;background-color:grey;zIndex:5;opacity:0.4'></div>"},stop:function(){self.repositioning=false;$(".perc-region").removeClass("east").removeClass("").removeClass("north").removeClass("south").removeClass("hovering");if(self.dropPosition==self.POSITION_NORTH){self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),true)}else{self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),false)}self.render()}});$(".perc-horizontal > .perc-region").draggable({distance:20,containment:"parent",axis:"x",start:function(){$("#perc-menu").css("display","none");self.repositioning=true},helper:function(){var height=$(this).height()+2*self.padding+2*self.borderWidth;var width=$(this).width()+2*self.padding+2*self.borderWidth;return"<div style='top:"+$(this).position().top+"px;width:"+width+"px;height:"+height+"px;background-color:grey;zIndex:5;opacity:0.4'></div>"},stop:function(){self.repositioning=false;$(".perc-region").removeClass("east").removeClass("").removeClass("north").removeClass("south").removeClass("hovering");if(self.dropPosition==self.POSITION_){self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),true)}else{self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),false)}self.render()}});$(".perc-region").each(function(){var self=$(this);self.children("perc-region-feedback").remove();var region_id=self.attr("id");var dirs=$.map(["north","south","east","west"],function(dir){return make_feedback_droppable(region_id,dir)});var topwidth=(self.innerWidth()-20)+"px";dirs[0].css({top:"0",left:"10px",width:topwidth,height:"10px"});dirs[1].css({bottom:"0",left:"10px",width:topwidth,height:"10px"});dirs[2].css({top:"0",right:"0",height:"100%",width:"10px"});dirs[3].css({top:"0",left:"0",height:"100%",width:"10px"});$.each(dirs,function(){self.append(this)})});function make_feedback_droppable(region_id,direction){return $("<div/>").addClass("perc-region-feedback").css({position:"absolute"}).droppable({accept:"#region-tool",tolerance:"pointer",greedy:true,hoverClass:"perc-show-feedback",drop:function(){if(self.type==self.helper.Type.PAGE&&$.inArray(region_id,self.helper.page.lockedTemplateRegions)!=-1){alert("This region is locked.");return}self.helper.addRegion(region_id,direction);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(region_id)}self.render()}})}$(".perc-region").droppable({accept:".perc-region, #region-tool, .perc-toolbar-item",greedy:true,tolerance:"pointer",over:function(event,ui){$(this).addClass("hovering");self.hoveringRegion=$(this)},out:function(event,ui){$(".perc-region").removeClass("hovering")},drop:function(event,ui){var regionId=self.hoveringRegion.attr("id");if(self.type==self.helper.Type.PAGE&&$.inArray(regionId,self.helper.page.lockedTemplateRegions)!=-1){alert("This region is locked.");return}if(self.dropAction==self.DROP_ACTION_ADD_WIDGET){widgetDefinitionId=ui.draggable.attr("id");self.dropAction=null;newWidget=self.helper.createNewWidget(widgetDefinitionId,self.helper.getRegion(regionId));widget=self.helper.addWidget(newWidget,regionId,true);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateWidgetOverride(regionId)}self.render()}}});this._autoSizeHorizontal()},renderCSS:function(){for(selector in this.helper.regionCSS){for(property in this.helper.regionCSS[selector]){if(property=="width"||property=="height"){$("#"+selector).css(property,this.helper.regionCSS[selector][property])}else{$("#"+selector).css(property,this.helper.regionCSS[selector][property])}$("#"+selector).css(property,this.helper.regionCSS[selector][property])}}},render:function(){html=this.helper.rootRegion.generateHtml(false);this.element.html(html);this._regionize();this.renderCSS()},destroy:function(){$.widget.prototype.apply(this,arguments)}});$.extend($.ui.template_layout,{getter:"value length initialize setPageId",defaults:{option1:"defaultValue"}})})(jQuery);(function(b){b.perc_layout_controller=new function(){this.widget=null;this.widgetDefinitions=new Array();this.currentWidgetDefinition=null;this.templateXml=null;this.pageXml=null;this.helper=null;this.setHelper=function(e){this.helper=e};this.getCurrentWidgetDefinition=function(){return this.currentWidgetDefinition};this.editWidgetStart=function(f,h){this.widget=f;this.currentWidgetDefinition=this.widgetDefinitions[f.getWidgetDefinitionId()];var e=this;if(this.currentWidgetDefinition==null){b.perc_widget_definition_client.restGetWidgetDefinition(f.getWidgetDefinitionId(),function(j){if(j.getUserPrefDef()==null){alert("This widget does not have properties");return}e.widgetDefinitions[f.getWidgetDefinitionId()]=j;e.currentWidgetDefinition=j;e.currentWidgetDefinition.setValuesFromWidgetProperties(f.properties);b("#perc-widget-edit").dialog("open")})}else{e.currentWidgetDefinition.setValuesFromWidgetProperties(f.properties);b("#perc-widget-edit").dialog("open")}};this.editWidgetClientValidate=function(){return true};this.editWidgetOk=function(n){var h=this;var j=this.currentWidgetDefinition.getUserPrefDef();for(d in j){var e='.perc-widget-property[name="'+d+'"]';var k=b(e).val();if(j[d].datatype=="bool"){k=b(e).is(":checked")}if(j[d].datatype=="list"){values=k.replace(/^\s+|\s+$/g,"").split("\n");k=new Array();for(v in values){k.push(values[v])}k=JSON.stringify(k)}this.widget.setProperty(d,k)}this.helper.templateModelToTemplateXml();var f=this.widget.getParentRegion();this.helper.getRegionHtmlFromRest(f.getId(),function(q){b(q).find(".perc-widget").each(function(){var x=b(this).attr("widgetId");var y=b(this).attr("id");widget=f.getWidget(y);widget.setHtml(b(this).html())});n()})};this.editWidgetCommit=function(){alert("editWidgetCommit")};this.getWidgetLibrary=function(e){b.perc_widget_library_client.restGetWidgetLibrary(e)};this.init=function(){}}})(jQuery);(function(b){b.perc_widget_library_client=new function(){this.restGetWidgetLibrary=function(f){var e="/Rhythmyx/services/pagemanagement/widget";b.ajax({url:e,dataType:"xml",type:"GET",success:function(j,h){var k=new b.perc_widget_library_model(j);k.init();f(k)},error:function(){alert("Unable to retrieve widget library")}})}};b.perc_widget_definition_client=new function(){this.restGetWidgetDefinition=function(e,f){b.ajax({url:b.perc_paths.WIDGET_FULL+"/"+e,dataType:"xml",type:"GET",success:function(k,h){var j=new b.perc_widget_definition_model(k);j.init(k);f(j)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+e)}})}}})(jQuery);(function(b){b.perc_widget_library_model=function(e){this.widgetLibraryXml=e;this.widgetSummaries=new Array();this.init=function(){var h=this;var f=b(this.widgetLibraryXml);var j=f.find("WidgetSummarys WidgetSummary");j.each(function(){var k=new b.perc_widget_summary_model(b(this));k.init();h.widgetSummaries.push(k)})};this.getWidgetSummaries=function(){return this.widgetSummaries};this.html=function(){var f='<div class="perc-header" style="float:none;">  Drag and drop widgets onto page </div>\n';for(s in this.widgetSummaries){f+=this.widgetSummaries[s].html()}return f}},b.perc_widget_summary_model=function(e){this.$widgetSummaryXml=e;this.icon=null;this.id=null;this.label=null;this.name=null;this.init=function(){this.icon=this.$widgetSummaryXml.children("icon").text();this.id=this.$widgetSummaryXml.children("id").text();this.label=this.$widgetSummaryXml.children("label").text();this.name=this.$widgetSummaryXml.children("name").text()};this.alert=function(){alert([this.icon,this.id,this.label,this.name,this.widgetSummaryXml])};this.html=function(){var f="";f+="<div class='perc-toolbar-item' id='"+this.id+"' name='"+this.name+"'>\n";f+="   <img src='../../Rhythmyx"+this.icon+"' ";f+="       onMouseOver='this.style.cursor=\"pointer\";' >\n";f+="       <div>"+this.label+"</div>\n";f+="</div>\n";return f}};b.perc_widget_definition_model=function(){this.widgetDefinitionXml=null;this.userPrefDef=null;this.setValuesFromWidgetProperties=function(f){for(p in this.userPrefDef){var e=this.userPrefDef[p].name;this.userPrefDef[p].realValue=f[e]}};this.getUserPrefDef=function(){return this.userPrefDef};this.init=function(j){var h=this;this.widgetDefinitionXml=j;var f=b(this.widgetDefinitionXml);var e=f.find("Widget UserPref");if(e.length>0){this.userPrefDef=new Object();e.each(function(){var x=b(this).attr("datatype");var k=b(this).attr("default_value");var q=b(this).attr("display_name");var n=b(this).attr("name");var y=null;if(x==""||x==null){x="string"}else{if(x=="enum"){y=new Object();b(this).find("EnumValue").each(function(){var A=b(this).attr("display_value");var z=b(this).attr("value");y[z]=A})}}h.userPrefDef[n]=(new b.perc_user_pref(x,k,q,n,y))})}};this.render=function(){var e="<table>\n";for(u in this.userPrefDef){e+="\t"+this.userPrefDef[u].render()}e+="</table>\n";return e}}})(jQuery);(function($){$.perc_user_pref=function(datatype,default_value,display_name,name,enumValues){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.enumValues=enumValues;this.realValue=null;this.render=function(){var buff="<tr>\n";var datatype=this.datatype;var value=(this.realValue==null||this.realValue=="")?this.default_value:this.realValue;if(datatype=="string"||datatype=="number"){buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'"></td>\n'}else{if(datatype=="bool"){var checked=(value=="true"||value=="on")?"CHECKED":"";buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="checkbox" '+checked+"></td>\n"}else{if(datatype=="enum"){buff+="   <td>"+this.display_name+": </td>\n";buff+="   <td>\n";buff+='   <select class="perc-widget-property" name="'+this.name+'" value="'+value+'">\n';for(v in enumValues){var selected=(v==value)?"SELECTED":"";buff+='       <option value="'+v+'" '+selected+"> "+enumValues[v]+"   </option>\n"}buff+="   </select>\n";buff+="</td>\n"}else{if(datatype=="list"){var values=eval(value);buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><textarea class="perc-widget-property" name="'+this.name+'">\n';for(v in values){buff+=values[v]+"\n"}buff+="</textarea>\n"}}}}buff+="</tr>\n";return buff}}})(jQuery);(function(h){h.perc_schemata=h.perc_schemata||{};var e="<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Page><name>Page Name</name><templateId>2000</templateId><folderPath>//folderpath</folderPath><author>authorName</author><id>1000</id><category>PAGE</category><regionBranches><regionWidgetAssociations><regionWidget><regionId>rid</regionId><widgetItems><widgetItem><definitionId>STUFF</definitionId><properties><property><name>AAA</name><value>BBB</value></property></properties></widgetItem></widgetItems></regionWidget></regionWidgetAssociations><regions><region><regionId>templateRegion</regionId><children><region><regionId>rid</regionId><children><code><templateCode>#region('' '' '' '' '')</templateCode></code></children></region></children></region></regions></regionBranches></Page>";var j,f,b;f={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return f}alert("Unhandled case");return"$"}],endTag:"$"};b={Page:{id:"$",category:"$",folderPaths:"$",name:"$",type:"$",folderPath:"$",author:"$",linkTitle:"$",templateId:"$",title:"$",footer:"$",header:"$",keywords:["$"],description:"$",tags:["$"],additionalHeadContent:"$",afterBodyStartContent:"$",beforeBodyCloseContent:"$",regionBranches:{regions:[j],regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};h.extend(h.perc_schemata,{page:b,page_test_data:e})})(jQuery);(function(h){var j,e,f;e={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return e}alert("Unhandled case");return"$"}],endTag:"$",cssClass:"$"};f={Template:{id:"$",description:"$",imageThumbPath:"$",label:"$",name:"$",readOnly:"$",sourceTemplateName:"$",bodyMarkup:"$",cssOverride:"$",cssRegion:"$",type:"$",theme:"$",htmlHeader:"$",regionTree:{rootRegion:j,regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",name:"$",description:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};var b='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Template><id>16777215-101-710</id><description></description><imageThumbPath></imageThumbPath><label>Plain</label><name>Test3 Templ</name><readOnly>false</readOnly><sourceTemplateName>perc.base.plain</sourceTemplateName><bodyMarkup>#perc_templateHeader()&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;#perc_templateFooter()</bodyMarkup><cssOverride></cssOverride><cssRegion></cssRegion><htmlHeader></htmlHeader><regionTree><regionWidgetAssociations/><rootRegion><regionId>percRoot</regionId><children><code><templateCode>#perc_templateHeader()</templateCode></code><region><regionId>container</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-20</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-22</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-23</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-21</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>#perc_templateFooter()</templateCode></code></children></rootRegion></regionTree><theme></theme></Template>';h.perc_schemata=h.perc_schemata||{};h.extend(h.perc_schemata,{template:f,template_test_data:b})})(jQuery);jQuery.fn.toXML=function(){var e="";if(this.length>0){if(typeof XMLSerializer=="function"||typeof XMLSerializer=="object"){var b=new XMLSerializer();this.each(function(){e+=b.serializeToString(this)})}else{if(this[0].xml!==undefined){this.each(function(){e+=this.xml})}else{}}}return e};(function(h){function b(D,B,F){var C;var E;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+D,dataType:"xml",type:"GET",success:function(H,G){$templateObject=h(H);C=$templateObject.find("Template cssOverride");B(C.text())},error:function(I,G,H){F(H)}})}else{}}function j(E,I,D,G,C,F){var H;var B;if(!h.perc_fakes.template_service.set_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+E,dataType:"xml",type:"GET",success:function(K,J){H=h(K);B=H.find("Template theme");if(B.length==0){H.append("<theme>"+newCSS+"</theme>")}else{B.text(I)}C(H.toXML());if(!F){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:H.toXML(),processData:false,success:function(M,L){D(I)},error:function(M,L){G(L)}})}},error:function(L,J,K){alert("error grabbing template record to save! ")}})}}function q(B,C){var D;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.THEME_SUMMARY_ALL,dataType:"xml",type:"GET",success:function(F,E){$templateObject=h(F);$themeSummaryObjects=$templateObject.find("ThemeSummarys ThemeSummary");B($themeSummaryObjects)},error:function(G,E,F){C(F)}})}else{}}function f(E,B,D){var C;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.THEME_CSS+"/"+E,dataType:"xml",type:"GET",success:function(G,F){C=h(G);$themeCSS=C.find("ThemeCSS CSS");B($themeCSS)},error:function(H,F,G){D(G)}})}else{}}function z(E,I,C,G,B,F){var H;var D;if(!h.perc_fakes.template_service.set_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+E,dataType:"xml",type:"GET",success:function(K,J){H=h(K);D=H.find("Template cssOverride");if(D.length==0){H.append("<cssOverride>"+I+"</cssOverride>")}else{D.text(I)}B(H.toXML());if(!F){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:H.toXML(),processData:false,success:function(M,L){C(M)},error:function(M,L){G(M)}})}},error:function(L,J,K){alert("error grabbing template record to save! ")}})}}function x(D,C,F){var E;var G;var B;h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+D,dataType:"xml",type:"GET",success:function(I,H){G=h(I);B=G.find("Template theme");C(B)},error:function(J,H,I){F(I)}})}function A(D,G,C,F,B,E){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+D,dataType:"xml",type:"GET",success:function(I,H){$templateObject=h(I);$cssTheme=$templateObject.find("Template theme");if($cssTheme.length==0){$templateObject.append("<theme>"+G+"</theme>")}else{$cssTheme.text(G)}B($templateObject.toXML());if(!E){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:$templateObject.toXML(),processData:false,success:function(K,J){C(G)},error:function(K,J){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(K)})}})}},error:function(J,H,I){alert("error grabbing template record to save! ")}})}function n(C,B){}function y(B,C){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+B,dataType:"text",type:"GET",success:C,error:function(F,D,E){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(F)})}})}function e(B,E,D,F){if(E){var C=h.perc_paths.TEMPLATE_LOAD_SAVE+"/page/"+memento.pageId}else{C=h.perc_paths.TEMPLATE_LOAD_SAVE+"/"}h.ajax({url:C,type:"POST",data:D,contentType:"text/xml",success:F,error:function(I,G,H){h.unblockUI();h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(I)})}})}function k(D,C,B,F){var E=h.perc_paths.TEMPLATE_RENDER+"/"+D;if(B){E=h.perc_paths.TEMPLATE_RENDER+"/"+B+"/"+D}h.ajax({url:E,type:"POST",contentType:"text/xml",dataType:"xml",data:C,processData:false,success:F,error:function(I,G,H){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(I)})}})}h.perc_templatemanager={load_template:y,save_template:e,render_region:k,preview_template:n,get_template_css:b,set_template_css:z,get_theme_list:q,set_theme_for_template:A,get_theme_for_template:x,get_theme_css_data:f}})(jQuery);
/*
 * jQuery xmlDOM Plugin v1.0
 * http://outwestmedia.com/jquery-plugins/xmldom/
 *
 * Released: 2009-04-06
 * Version: 1.0
 *
 * Copyright (c) 2009 Jonathan Sharp, Out West Media LLC.
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 */
(function(b){if(window.DOMParser==undefined&&window.ActiveXObject){DOMParser=function(){};DOMParser.prototype.parseFromString=function(f){var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(f);return e}}b.xmlDOM=function(f,q){try{var j=(new DOMParser()).parseFromString(f,"text/xml");if(b.isXMLDoc(j)){var h=b("parsererror",j);if(h.length==1){throw ("Error: "+b(j).text())}}else{throw ("Unable to parse XML")}}catch(k){var n=(k.name==undefined?k:k.name+": "+k.message);if(b.isFunction(q)){q(n)}else{b(document).trigger("xmlParseError",[n])}return b([])}return b(j)}})(jQuery);(function(j){j.fn.perc_decorate=function(y,x,q){this.each(function(){if(j(this).is(".perc-widget")){n(j(this),y,x,q,k,f)}else{if(j(this).is(".perc-region")){n(j(this),y,x,q,b,h)}}});return this};function n(x,A,z,q,y,B){B(x);x.unbind(".decorate");if(A){y(x,z,q)}else{x.bind("mouseenter.decorate",function(){y(x,z,q)});x.bind("mouseleave.decorate",function(){B(x)})}}function k(x,y,q){x.addClass("perc-widget-visible-grid perc-widget-puff");x.append(e(x,y,q))}function f(q){q.removeClass("perc-widget-visible-grid perc-widget-puff");q.find(".perc-widget-menubar").remove()}function b(x,y,q){x.addClass("perc-region-visible-grid")}function h(q){q.removeClass("perc-region-visible-grid")}function e(z,A,q){var y=j('<div class="perc-widget-menubar"><ul/></div>');var x=y.find("ul");j.each(A,function(){var B=this.icon(),C=this.action;x.append(j("<li/>").append(B));B.bind("click.decorate",function(){C(z.attr("assetid"),z.attr("widgetid"),z.attr("widgetdefid"),q)})});return y}})(jQuery);(function(h){function f(q,x,j,n){h.ajax({url:h.perc_paths.ASSET_ADD_TO_FOLDER+"/"+x+"/"+q,type:"GET",success:j,error:n})}function b(E,z,B,n,x,j,q,A,y){var D=j?"shared":"local";var C={AssetWidgetRelationship:{ownerId:n,widgetId:z,widgetName:B,assetId:E,assetOrder:"0",resourceType:D}};if(q){C.AssetWidgetRelationship.folderPath=q}h.ajax({url:h.perc_paths.ASSET_WIDGET_REL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(C),success:A,error:y})}function e(j,n,k,q,y){y=y||function(){};var x={AssetWidgetRelationship:{ownerId:j,widgetId:n,widgetName:k,assetId:q,assetOrder:"0"}};h.ajax({url:h.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(x),success:y,error:function(B,z,A){alert("error")}})}h.perc_assetmanager={clear_asset:e,add_asset_to_folder:f,set_relationship:b}})(jQuery);(function(b){b.widget("ui.perc_imageselect",{_idPostfix:"_perc_is",_class:"perc_imageselect",_pseudoCtl:null,_init:function(){var e=this;options=this.options;if(this.element[0].nodeName.toLowerCase()!="select"){window.alert("Error! the perc_imageselect widget can only be used on a 'SELECT' html element.")}e._addPseudoControl();e._bindEvents(false)},_addPseudoControl:function(){var e=this;var j="";var h=this.element[0].id;if(h=="undefined"||h==null||h==""){window.alert("Error! An id attribute is required on the select element.")}j+="<div id='";j+=(h+this._idPostfix);j+="' class='";j+=this._class;j+="'>";var f=this.element.children("option");f.each(function(){j+=e._getItemHtml(this.value,this.text)});j+="</div>";this.element.hide();this.element.after(j);this._pseudoCtl=b("#"+this.element[0].id+this._idPostfix);this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"))},_getItemHtml:function(f,e){var h="";h+="<div class='perc_imageselect_item'>";h+="<span class='perc_imageselect_value'>"+f+"</span>";h+="<img src='";h+=e;h+="'/><span>";h+=b.PercTruncateText(f.split(".")[2],22);h+="</span></div>";return h},_addChildIndexes:function(f){var e=0;f.each(function(){b(this).remove(".perc_imageselect_index")});f.each(function(){b(this).append("<span class='perc_imageselect_index'>"+(e++)+"</span>")})},destroy:function(){b.widget.prototype.apply(this,arguments);this._unbindEvents(false)},_bindEvents:function(f){var e=this;if(!f){this._pseudoCtl.bind("keydown",function(h){e._handleKeyDown(h)});this._pseudoCtl.bind("click",function(h){b(this).focus()})}this._pseudoCtl.children(".perc_imageselect_item").bind("click",function(j){var h=b(this).children(".perc_imageselect_index").text();e.selectIndex(h)});this._pseudoCtl.children(".perc_imageselect_item").bind("dblclick",function(h){if(e.options.hardSelect){e._onSelect()}})},_unbindEvents:function(e){if(!e){this._pseudoCtl.unbind("keydown").unbind("click")}this._pseudoCtl.children(".perc_imageselect_item").unbind("click").unbind("dblclick")},_handleKeyDown:function(e){if(!this.options.vertical&&(e.keyCode==37||e.keyCode==39)){this._moveSelection(e.keyCode==39?true:false);return e.preventDefault()}if(this.options.vertical&&(e.keyCode==38||e.keyCode==40)){this._moveSelection(e.keyCode==40?true:false);return e.preventDefault()}if(this.options.hardSelect&&e.keyCode==13){this._onSelect();return e.preventDefault()}return true},_moveSelection:function(e){var h=this.getSelectedIndex();var f=this._pseudoCtl.children(".perc_imageselect_item").length;if(h!=-1){if(e&&(f-1)>h){this.selectIndex(h+1)}else{if(!e&&h>0){this.selectIndex(h-1)}}}},_onSelect:function(){if(this.options.onSelect!=null){var e=this._pseudoCtl.children(".perc_imageselect_selected");var h=e.children(".perc_imageselect_value").text();var f=e.children("img").attr("src");this.options.onSelect(h,f)}},setItems:function(e){if(e==null||e=="undefined"){alert("items cannot be null or undefined")}else{this.clearSelection();this._unbindEvents(true);this._pseudoCtl.children(".perc_imageselect_item").remove();for(var f in e){var h=e[f];this._pseudoCtl.append(this._getItemHtml(h[0],h[1]))}this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"));this._bindEvents(true)}},loadFromUrl:function(f){var e=this;if(f!=null&&f!="undefined"){b.getJSON(f,function(h){e.setItems(h.items)})}},clearSelection:function(){var e=this.element[0].id+this._idPostfix;b("#"+e+" .perc_imageselect_selected").removeClass("perc_imageselect_selected")},selectIndex:function(e){this.clearSelection();var f=this.element[0].id+this._idPostfix;b("#"+f+" .perc_imageselect_item:eq("+e+")").addClass("perc_imageselect_selected");var k=this._pseudoCtl.children(".perc_imageselect_selected").offset().top-50;var j=this._pseudoCtl.offset().top;var h=this._pseudoCtl.scrollTop();if(!this.options.hardSelect){this._onSelect()}this._pseudoCtl.animate({scrollTop:h+k-j},500);this._pseudoCtl.focus()},getSelectedIndex:function(){var e=this._pseudoCtl.children(".perc_imageselect_selected");if(e.length>0){return parseInt(e.children(".perc_imageselect_index").text())}return -1}});b.extend(b.ui.perc_imageselect,{version:"1.0.0",defaults:{vertical:true,onSelect:null,hardSelect:true}})})(jQuery);(function(b){b.widget("ui.perc_wizard",{steps:null,currentStep:0,isCancelled:false,_init:function(){var e=this,f=this.options;this.element.load(f.templateUrl,function(){e.element.perc_dialog({autoOpen:false,title:f.title,modal:f.modal,width:f.width,height:f.height,show:f.show,hide:f.hide,open:f.open,resizable:f.resizable});e.steps=b(".perc_wizard_step");e._addButtons()})},open:function(){this._showStep(0);this.element.dialog("open")},_addButtons:function(){var e=this;var f="<div class='ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'><div href='#' id='perc_wizard_finish' class='perc-save' name='perc_wizard_finish' style='float:right;' /><div href='#' id='perc_wizard_next' class='perc-save'  name='perc_wizard_next' style='float:right;' /><div href='#' id='perc_wizard_cancel' class='perc-save' name='perc_wizard_cancel' style='float:right;' /><div id='perc_wizard_back' href='#' class='perc-save'  name='perc_wizard_back' style='float:right;' /></div>";b(e.element).closest(".ui-dialog").append(f);b("#perc_wizard_back").click(function(){e._onBack()});b("#perc_wizard_cancel").click(function(){e._onCancel()}).val(this.options.cancelButtonLabel);b("#perc_wizard_next").click(function(){e._onNext()});b("#perc_wizard_finish").click(function(){e._onOk()})},_showStep:function(f){if(this.steps==null||f>this.steps.length){alert("Error: Step does not exist.");return}this.currentStep=f;for(i=0;i<this.steps.length;i++){if(i==f){b(this.steps[i]).show()}else{b(this.steps[i]).hide()}}if(f==0&&this.steps.length>1){b("#perc_wizard_back").hide();b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{if(f<this.steps.length-1){b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").hide();b("#perc_wizard_finish").show().val(this.options.finishButtonLabel)}}var e=this.element},_onOk:function(h){var f=this;if(this.options.onValidate()){this.options.onOk()}},_onNext:function(f){if(this.options.onValidate()){if(this.options.onNext!==undefined&&this.options.onNext()===false){return}this._showStep(this.currentStep+1)}},_onBack:function(){if(this.currentStep>0){this._showStep(this.currentStep-1)}},_onCancel:function(){this.isCancelled=true;this.element.dialog("close")}});b.extend(b.ui.perc_wizard,{version:"1.0.0",defaults:{backButtonLabel:typeof I18N=="undefined"?"Back":I18N.message("perc.ui.common.label@Back"),cancelButtonLabel:typeof I18N=="undefined"?"Cancel":I18N.message("perc.ui.common.label@Cancel"),nextButtonLabel:typeof I18N=="undefined"?"Next":I18N.message("perc.ui.common.label@Next"),finishButtonLabel:typeof I18N=="undefined"?"Finish":I18N.message("perc.ui.common.label@Finish"),width:"800px",height:"700px",modal:true,title:typeof I18N=="undefined"?"Wizard":I18N.message("perc.ui.common.label@Wizard"),onOk:function(){alert("No onOk callback was set.")},onValidate:function(){return true}}})})(jQuery);(function(x){x.PercSiteService={getSiteProperties:C,updateSiteProperties:D,copySite:A,copySiteInfo:q,getTemplates:n,getBaseTemplates:k,getSites:f,validateCopySiteFolders:z,createSiteFromUrl:b,createSiteFromUrlAsync:e,createSiteFromUrlStatus:B,createSiteFromUrlResult:h,isSiteBeingImported:j,getSaaSSiteNames:y};function D(E,G){var F=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_UPDATE_PROPERTIES,x.PercServiceUtils.TYPE_POST,false,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}},E)}function C(F,G){var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_GET_PROPERTIES+"/"+F,x.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}})}function A(F,G){var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_COPY,x.PercServiceUtils.TYPE_POST,false,function(J,I){if(J==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=x.PercServiceUtils.extractDefaultErrorMessage(I.request);var H=x.PercServiceUtils.extractGlobalErrorCode(I.request);G(x.PercServiceUtils.STATUS_ERROR,K,H)}},F)}function z(F,G){var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_COPY_VALIDATE_FOLDERS,x.PercServiceUtils.TYPE_POST,false,function(J,I){if(J==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=x.PercServiceUtils.extractDefaultErrorMessage(I.request);var H=x.PercServiceUtils.extractGlobalErrorCode(I.request);G(x.PercServiceUtils.STATUS_ERROR,K,H)}},F)}function q(F){var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_COPY_INFO,x.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==x.PercServiceUtils.STATUS_SUCCESS){F(x.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=x.PercServiceUtils.extractDefaultErrorMessage(G.request);F(x.PercServiceUtils.STATUS_ERROR,I)}})}function n(H,I,G){var F=this;var E="";if(G!=null){E=x.perc_paths.TEMPLATES_BY_SITE+"/"+H+"/"+G}else{E=x.perc_paths.TEMPLATES_BY_SITE+"/"+H+""}x.PercServiceUtils.makeJsonRequest(E,x.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==x.PercServiceUtils.STATUS_SUCCESS){I(x.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=x.PercServiceUtils.extractDefaultErrorMessage(J.request);I(x.PercServiceUtils.STATUS_ERROR,L)}})}function k(E,G){var F=x.perc_paths.TEMPLATES_READONLY+"?type="+E;x.PercServiceUtils.makeJsonRequest(F,x.PercServiceUtils.TYPE_GET,true,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){G(true,H.data)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(false,J)}})}function f(F){var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITES_ALL+"/",x.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==x.PercServiceUtils.STATUS_SUCCESS){F(x.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=x.PercServiceUtils.extractDefaultErrorMessage(G.request);F(x.PercServiceUtils.STATUS_ERROR,I)}})}function b(F,G){x.ajaxSetup({timeout:600000});var E={Site:F};x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_CREATE_FROM_URL,x.PercServiceUtils.TYPE_POST,false,function(I,H){x.ajaxSetup({timeout:60000});if(I==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}},E)}function e(F,G){var E={Site:F};x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_CREATE_FROM_URL_ASYNC,x.PercServiceUtils.TYPE_POST,false,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}else{defaultMsg="There was an unexpected error during the import process.";G(x.PercServiceUtils.STATUS_ERROR,defaultMsg)}},E)}function B(E,G){x.PercServiceUtils.makeJsonRequest(x.perc_paths.JOB_STATUS+"/"+E,x.PercServiceUtils.TYPE_GET,false,function F(I,H){var K,J=x.PercServiceUtils.STATUS_SUCCESS;if(I==x.PercServiceUtils.STATUS_SUCCESS){K=H.data.asyncJobStatus}else{J=x.PercServiceUtils.STATUS_ERROR;K="There was an unexpected error during the import process."}G(J,K)})}function h(E,G){x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+E,x.PercServiceUtils.TYPE_GET,false,function F(I,H){var K,J=x.PercServiceUtils.STATUS_SUCCESS;if(I==x.PercServiceUtils.STATUS_SUCCESS){K=H.data}else{J=x.PercServiceUtils.STATUS_ERROR;K="There was an unexpected error during the import process."}G(J,K)})}function j(E,F){x.PercServiceUtils.makeJsonRequest(x.perc_paths.SITE_IS_BEING_IMPORTED+"/"+E,x.PercServiceUtils.TYPE_GET,false,function(H,G){var J,I=x.PercServiceUtils.STATUS_SUCCESS;if(H==x.PercServiceUtils.STATUS_SUCCESS){J=G.data}else{I=x.PercServiceUtils.STATUS_ERROR;J="There was an unexpected error during the import process."}F(I,J)})}function y(G){var F=x.Deferred();var E=this;x.PercServiceUtils.makeJsonRequest(x.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+G,x.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){F.resolve(H.data)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);F.reject(J)}});return F.promise()}})(jQuery);(function(h){h.PercAssetService={getAssetEditorForAssetId:z,getAssetViewForAssetId:e,getAssetEditorLibrary:B,getAssetEditor:k,getAssetEditorForWidgetAndFolder:y,putAssetInFolder:n,clear_asset:E,clear_orphan_assets:A,set_relationship:f,update_relationship:H,asset_from_local_content:D,deleteAsset:b,forceDeleteAsset:F,validateDeleteAsset:j,updateAsset:x,getUnusedAssets:C,promoteAsset:I,getAssetTypes:G};function z(J,K){h.ajax({url:h.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+J,success:function(N,M){var L={data:N,textstatus:M};K(h.PercServiceUtils.STATUS_SUCCESS,N)},error:function(O,M,N){var L={request:O,textstatus:M,error:N};var P=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,P)}})}function e(J,K){h.ajax({url:h.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+J,success:function(N,M){var L={data:N,textstatus:M};K(h.PercServiceUtils.STATUS_SUCCESS,N)},error:function(O,M,N){var L={request:O,textstatus:M,error:N};var P=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,P)}})}function B(J,K){q(J,"",K)}function q(L,K,M){var J=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR_LIBRARY+L+"?filterDisabledWidgets=yes&widgetId="+K,h.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}})}function k(K,L){var J=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR+"/"+K,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function y(J,K,L){q(J,K,L)}function n(J,K){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_ADD_TO_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}},J)}function b(L,K,J){h.ajax({url:h.perc_paths.ASSET_DELETE+"/"+L,type:"DELETE",success:function(){K()},error:J})}function F(L,K,J){h.ajax({url:h.perc_paths.ASSET_FORCE_DELETE+"/"+L,type:"GET",success:K,error:J})}function j(L,K,J){h.ajax({url:h.perc_paths.ASSET_VALIDATE_DELETE+"/"+L,type:"GET",success:K,error:J})}function f(T,R,K,M,J,L,P,O){var S=J?"shared":"local";var N=(typeof(R.relationshipId)!="undefinded")?R.relationshipId:-1;var Q={AssetWidgetRelationship:{ownerId:K,widgetId:R.widgetid,widgetName:R.widgetdefid,widgetInstanceName:R.widgetName,replacedRelationshipId:N,assetId:T,assetOrder:"0",resourceType:S}};if(L){Q.AssetWidgetRelationship.folderPath=L}h.ajax({url:h.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(Q),success:P,error:O})}function D(M,Q,J,L,N,P){var K=h.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+L+N;var O={AssetWidgetRelationship:{ownerId:J,widgetId:Q.widgetid,widgetName:Q.widgetdefid,widgetInstanceName:Q.widgetName,assetId:M,assetOrder:"0",resourceType:"local"}};h.PercServiceUtils.makeRequest(K,h.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);P(h.PercServiceUtils.STATUS_ERROR,T)}},O,"application/json","text")}function H(O,M,Q,K,L,N){var J=(typeof(Q.relationshipId)!="undefinded")?Q.relationshipId:-1;var P={AssetWidgetRelationship:{ownerId:K,widgetId:Q.widgetid,widgetName:Q.widgetdefid,widgetInstanceName:Q.widgetName,replacedRelationshipId:J,assetId:O,assetOrder:"0",resourceType:"local",relationshipId:M}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",h.PercServiceUtils.TYPE_POST,true,function(R,S){if(R==h.PercServiceUtils.STATUS_SUCCESS){var T=S.data;if(T=="-1"){var V="The asset has been removed from the system.";N(false,V)}else{L(true,S.data)}}else{var U=h.PercServiceUtils.extractDefaultErrorMessage(S.request);N(false,U)}},P)}function E(J,L,K,M,O){O=O||function(){};var N={AssetWidgetRelationship:{ownerId:J,widgetId:L,widgetName:K,assetId:M,assetOrder:"0"}};h.ajax({url:h.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(N),success:O,error:function(R,P,Q){alert("error")}})}function A(Q,O,J,K,R){R=R||function(){};var L=[];for(var N=0;N<K.length;N++){var M="";M='{"assetId":"'+K[N]+'","assetOrder":0,"ownerId":"'+Q+'","widgetId":'+O[N]+',"widgetName":"'+J[N]+'"}';L.push(M)}var S='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+L+"]}}";var P=h.parseJSON(S);h.ajax({url:h.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(P),success:R,error:function(V,T,U){alert("error")}})}function x(K,L,N){var J=h.perc_paths.ASSET_UPDATE+"/"+K+"/"+L;var M=function(O,P){if(O==h.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,P.data)}};h.PercServiceUtils.makeRequest(J,h.PercServiceUtils.TYPE_POST,true,M)}function I(M,Q,N,K,L,P){var J=L?"shared":"local";var O={AssetWidgetRelationship:{ownerId:N,widgetId:Q.widgetid,widgetName:Q.widgetdefid,widgetInstanceName:Q.widgetName,assetId:M,assetOrder:K,resourceType:J}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_PROMOTE,h.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);P(h.PercServiceUtils.STATUS_ERROR,T)}},O)}function C(J,K){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_UNUSED+"/"+J,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(L.data.UnusedAssetSummary))}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}})}function G(K,L){var J=h.perc_paths.ASSET_TYPES;if(K&&K=="yes"){J+=J.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}h.PercServiceUtils.makeJsonRequest(J,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(M.data.WidgetContentType))}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}})(jQuery);(function(e){e.PercSearchService={getSearchResult:h,getAsyncSearchResult:f,getAsyncSearchExtendedResult:b};function h(k,q){var j=e.perc_paths.FINDER_SEARCH;var n=function(x,y){if(x==e.PercServiceUtils.STATUS_ERROR){var z=e.PercServiceUtils.extractDefaultErrorMessage(y.request);q(false,z)}else{q(true,y.data)}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,true,n,k)}function f(k,q){var j=e.perc_paths.FINDER_SEARCH;var n=function(x,y){if(x==e.PercServiceUtils.STATUS_ERROR){var z=e.PercServiceUtils.extractDefaultErrorMessage(y.request);q(false,z)}else{if(x==e.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,y.data)}}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,false,n,k,n)}function b(k,q){var j=e.perc_paths.FINDER_SEARCH+"/extendedresults";var n=function(x,y){if(x==e.PercServiceUtils.STATUS_ERROR){var z=e.PercServiceUtils.extractDefaultErrorMessage(y.request);q(false,z)}else{if(x==e.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,y.data)}}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,false,n,k,n)}})(jQuery);(function(x){var z=x.PercServiceUtils;x.PercPageService={forceDeletePage:b,validateDeletePage:D,getNonSEOPages:e,savePageMetadata:q,copyPage:k,getPagesWithTemplate:C,getUnassignedPagesBySite:n,checkForEmptyMigrationWidgets:A,clearFlagShowMigrationEmptyMessage:h,addToMyPages:B,removeFromMyPages:f,isMyPage:y,getMyContent:j};function A(H,F){var E=x.perc_paths.MIGRATION_EMPTY_FLAG+"/"+H;function G(I,J){if(I===z.STATUS_SUCCESS){if(J.data===true){F()}}}z.makeJsonRequest(E,z.TYPE_GET,true,G)}function h(G){var E=x.perc_paths.CLEAR_MIGRATION_EMPTY_FLAG+"/"+G;function F(H,I){}z.makeJsonRequest(E,z.TYPE_POST,true,F)}function b(G,F,E){x.ajax({url:x.perc_paths.PAGE_FORCE_DELETE+"/"+G,type:"GET",success:F,error:E});F()}function D(G,F,E){x.ajax({url:x.perc_paths.PAGE_VALIDATE_DELETE+"/"+G,type:"GET",success:F,error:E})}function e(I,K,G,F,E,J){if(G==null){G=""}if(E==null){E=""}var H={NonSEOPagesRequest:{keyword:E,path:I,workflow:K,state:G,severity:F}};x.PercServiceUtils.makeJsonRequest(x.perc_paths.PAGE_NONSEO,x.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==x.PercServiceUtils.STATUS_SUCCESS){J(x.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=x.PercServiceUtils.extractDefaultErrorMessage(L.request);J(x.PercServiceUtils.STATUS_ERROR,N)}},H)}function q(F,H){var E=x.perc_paths.SAVE_PAGE_METADATA+"/"+F;var G=function(I,J){if(I==x.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,J.data)}};x.PercServiceUtils.makeRequest(E,x.PercServiceUtils.TYPE_POST,true,G)}function k(E,G){var F=x.perc_paths.PAGE_COPY+"/"+E+"?addToRecent=true";x.PercServiceUtils.makeRequest(F,x.PercServiceUtils.TYPE_POST,true,function(I,H){if(I==x.PercServiceUtils.STATUS_SUCCESS){G(x.PercServiceUtils.STATUS_SUCCESS,H)}else{var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}},null,null,null,true)}function C(H,E,J,F){var G={startIndex:1,maxResults:5,sortColumn:"name",sortOrder:"asc",pageId:null};x.extend(G,E);var I=x.perc_paths.PAGES_WITH_TEMPLATE+"/"+H;I+="?startIndex="+G.startIndex;I+="&maxResults="+G.maxResults;I+="&sortColumn="+G.sortColumn;I+="&sortOrder="+G.sortOrder;if(G.pageId!=null){I+="&pageId="+G.pageId}x.PercServiceUtils.makeJsonRequest(I,x.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==x.PercServiceUtils.STATUS_ERROR){var M=x.PercServiceUtils.extractDefaultErrorMessage(K.request);J(x.PercServiceUtils.STATUS_ERROR,M)}else{J(x.PercServiceUtils.STATUS_SUCCESS,K.data.PagedItemList)}})}function n(H,G,E,I){var F=x.perc_paths.UNASSIGNED_PAGES_BY_SITE+"/"+H+"?startIndex="+G+"&maxResults="+E;x.PercServiceUtils.makeJsonRequest(F,x.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==x.PercServiceUtils.STATUS_ERROR){var L=x.PercServiceUtils.extractDefaultErrorMessage(J.request);I(x.PercServiceUtils.STATUS_ERROR,L)}else{I(x.PercServiceUtils.STATUS_SUCCESS,J.data)}})}function B(E,G){var F=x.perc_paths.ADD_TO_MYPAGES+"/"+E;x.PercServiceUtils.makeJsonRequest(F,x.PercServiceUtils.TYPE_PUT,false,function(I,H){if(I==x.PercServiceUtils.STATUS_ERROR){var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}else{G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}})}function f(E,G){var F=x.perc_paths.REMOVE_FROM_MYPAGES+"/"+E;x.PercServiceUtils.makeJsonRequest(F,x.PercServiceUtils.TYPE_DELETE,false,function(I,H){if(I==x.PercServiceUtils.STATUS_ERROR){var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}else{G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}})}function y(E,G){var F=x.perc_paths.IS_MY_PAGE+"/"+E;x.PercServiceUtils.makeJsonRequest(F,x.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==x.PercServiceUtils.STATUS_ERROR){var J=x.PercServiceUtils.extractDefaultErrorMessage(H.request);G(x.PercServiceUtils.STATUS_ERROR,J)}else{G(x.PercServiceUtils.STATUS_SUCCESS,H.data)}})}function j(F){var E=x.perc_paths.MY_CONTENT;x.PercServiceUtils.makeJsonRequest(E,x.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==x.PercServiceUtils.STATUS_ERROR){var I=x.PercServiceUtils.extractDefaultErrorMessage(G.request);F(x.PercServiceUtils.STATUS_ERROR,I)}else{F(x.PercServiceUtils.STATUS_SUCCESS,G.data)}})}})(jQuery);(function(h){h.PercPathService={getPathItemById:K,getFolderPathItem:z,getPathItemForPath:y,getItemPropertiesByWorkflowState:f,deleteFolder:x,deleteSection:F,deleteFSFolder:k,moveItem:C,renameFolder:I,createNewFolder:A,getLastExistingPath:G,validatePath:B,getDisplayFormat:H,getContentForPath:L,getFolderProperties:b,saveFolderProperties:n,deleteFolderSkipValidation:D,getInlineRenderLink:e};function H(O){var N=h.perc_utils.getDisplayFormat(h.PercNavigationManager.getPath());if(h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_SEARCH_RESULTS||h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_RESULT){N=h.perc_utils.getDisplayFormat("/")}var M=h.perc_paths.DISPLAY_FORMAT+N;h.PercServiceUtils.makeJsonRequest(M,h.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(h.PercServiceUtils.STATUS_ERROR,R)}})}function L(M,P,Q){var N=h.perc_utils.encodeURL(P.path)+"/?startIndex="+P.startIndex+"&maxResults="+P.maxResults+"&displayFormatId="+M.id+"&sortColumn="+P.sortColumn+"&sortOrder="+P.sortOrder;var O=h.perc_paths.PATH_PAGINATED_FOLDER+N;h.PercServiceUtils.makeJsonRequest(O,h.PercServiceUtils.TYPE_GET,false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){Q(h.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(h.PercServiceUtils.STATUS_ERROR,T)}})}function y(N,O){var M=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM+N,h.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(h.PercServiceUtils.STATUS_ERROR,R)}})}function K(O,N){var M=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_BY_ID+"/"+O,h.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(P.request);var R=h.PercServiceUtils.extractGlobalErrorCode(P.request);N(h.PercServiceUtils.STATUS_ERROR,S,R)}})}function f(O,Q,M,P){if(M==null){M=""}var N={ItemByWfStateRequest:{path:O,workflow:Q,state:M}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,h.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);P(h.PercServiceUtils.STATUS_ERROR,T)}},N)}function C(P,M,O){var N={MoveFolderItem:{itemPath:P,targetFolderPath:M}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_MOVE,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},N)}function A(N,O){var M=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ADD_NEW_FOLDER+N,h.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(h.PercServiceUtils.STATUS_ERROR,R)}})}function z(N,O){var M=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_FOLDER+h.perc_utils.encodeURL(N),h.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(h.PercServiceUtils.STATUS_ERROR,R)}})}function I(O,M,P){var N={RenameFolderItem:{path:O,name:M}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_RENAME_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);var Q=h.PercServiceUtils.extractFieldErrorCode(R.request);P(h.PercServiceUtils.STATUS_ERROR,T,Q)}},N)}function x(O,M,N,P){h.ajax({url:h.perc_paths.PATH_VALIDATE_DELETE_FOLDER+O,dataType:"text",type:"GET",success:function(Q){q(Q,O,M,N,P)},error:j})}function F(O,N,Q){h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);var M={DeleteFolderCriteria:{path:O,skipItems:"NO"}};var P=3600000;h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(M),timeout:P,success:Q,error:J});h.unblockUI()}function k(N,M,O){x(N,M,"fsfolder",O)}function G(N,O,M){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_LAST_EXISTING+N,h.PercServiceUtils.TYPE_GET,(M!=null&&M)?true:false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(h.PercServiceUtils.STATUS_ERROR,R)}})}function B(M,N){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_VALIDATE_EXIST+M,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}},null,null,null,true)}function q(O,P,M,N,S){var R;if(N=="section"){R=I18N.message("perc.ui.finder.section.delete@Title")}else{R=I18N.message("perc.ui.finder.folder.delete@Title")}var Q=3600000;h.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:R,question:E(O,M,N),success:function(){var U="EMPTY";if(h("#perc_delete_folder_force").length>0){U=h("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var T={DeleteFolderCriteria:{path:P,skipItems:U}};h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(T),timeout:Q,success:S,error:J});h.unblockUI()},width:500})}function D(P,M,N,Q){var O="";q(O,P,M,N,Q)}function j(M){var N=h.PercServiceUtils.extractDefaultErrorMessage(errors);var O="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(N!="")?N:O})}function J(O){var M=h.PercServiceUtils.extractDefaultErrorMessage(O);var N="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(M!="")?M:N})}function E(Q,N,S){var M;var R;var U="";var T="";if(S=="Assets"){M="perc.ui.finder.folder.delete@ConfirmAssets";R="perc.ui.finder.folder.delete@WarningAssets";var P=Q.indexOf("AssetsNotAuthorized");if(Q.indexOf("AssetsNotAuthorized")>-1){U+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(Q.indexOf("AssetsInUseTemplates")>-1){U+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(Q.indexOf("AssetsInUsePages")>-1){U+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";T="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(S=="fsfolder"){M="perc.ui.finder.fsfolder.delete@Confirm";R="perc.ui.finder.fsfolder.delete@Warning"}else{if(S=="Sites"){M="perc.ui.finder.folder.delete@ConfirmPages";R="perc.ui.finder.folder.delete@WarningPages"}else{M="perc.ui.finder.section.delete@Confirm";R="perc.ui.finder.section.delete@Warning"}if(Q.indexOf("PagesNotAuthorized")>-1){U+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(Q.indexOf("PagesInUseTemplates")>-1){U+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(Q.indexOf("PagesInUsePages")>-1){U+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";T="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var O;if(Q=="Success"){O=I18N.message(M,[N])}else{O=I18N.message(R,[N])+"<br/><br/>"}return O+U+T}function b(N,M){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+N,h.PercServiceUtils.TYPE_GET,true,function(P,O){M(P,O)})}function n(M,N){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,h.PercServiceUtils.TYPE_POST,true,function(P,O){N(P,O)},M)}function e(O,N,P){var M=h.perc_paths.RENDER_LINK_PREVIEW+"/"+O;if(N=="image"){M+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{M+="/default"}h.PercServiceUtils.makeJsonRequest(M,h.PercServiceUtils.TYPE_GET,true,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){P(true,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(false,S)}})}})(jQuery);(function(j){var D="NONE";var x="READER";var G="ASSIGNEE";var y="ADMIN";j.PercUserService={ACCESS_NONE:D,ACCESS_READ:x,ACCESS_WRITE:G,ACCESS_ADMIN:y,getUsers:K,findUser:A,findDirectoryUsers:B,importDirectoryUsers:C,getDirectoryStatus:e,getRoles:L,createUser:n,deleteUser:F,updateUser:h,findRole:z,deleteRole:E,updateRole:f,createRole:q,getAvailableUsers:b,getAccessLevel:J,validateDeleteRole:I,validateDeleteUsers:k};function K(N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_USERS,j.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){O.data.UserList.users=H(O.data.UserList.users);N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}})}function A(O,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_FIND+"/"+O,j.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){P.data.User.name=P.data.User.name.toString();N(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);N(j.PercServiceUtils.STATUS_ERROR,R)}})}function B(O,P){if(O==null){P(j.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}O=O.replace(/%+$/,"");var N=j.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(O)+"%25";var M=this;j.PercServiceUtils.makeJsonRequest(N,j.PercServiceUtils.TYPE_GET,false,function(R,Q){if(R==j.PercServiceUtils.STATUS_SUCCESS){P(j.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{try{var T=j.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(j.PercServiceUtils.STATUS_ERROR,T)}catch(S){P(j.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function C(N,O){if(N==null||N==undefined||N.ImportUsers.externalUsers.length==0){O(j.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_EXTERNAL_IMPORT,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},N)}function e(N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_EXTERNAL_STATUS,j.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}})}function L(N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_ROLES,j.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){O.data.RoleList.roles=H(O.data.RoleList.roles);N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}})}function n(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_CREATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function F(O,N){var M=this;j.PercServiceUtils.makeDeleteRequest(j.perc_paths.USER_DELETE+"/"+O,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);N(j.PercServiceUtils.STATUS_ERROR,R)}})}function h(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_UPDATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function z(O,P){var M=this;var N={psstring:{value:O}};j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_FIND,j.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==j.PercServiceUtils.STATUS_SUCCESS){Q.data.Role.name=Q.data.Role.name.toString();P(j.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=j.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(j.PercServiceUtils.STATUS_ERROR,S)}},N)}function E(N,O){var M={psstring:{value:N}};j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_DELETE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function q(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_CREATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function f(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_UPDATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function b(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_AVAILABLE_USERS,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){P.data.UserList.users=H(P.data.UserList.users);O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function J(P,R,S,N,Q){var M=this;var O;if(P!=null){O={AccessLevelRequest:{type:P,itemId:R,parentFolderPath:N}}}else{O={AccessLevelRequest:{itemId:R,parentFolderPath:N}}}j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_ACCESS_LEVEL,j.PercServiceUtils.TYPE_POST,(typeof(Q)!="undefined"&&Q!=null&&Q)?true:false,function(U,T){if(U==j.PercServiceUtils.STATUS_SUCCESS){S(j.PercServiceUtils.STATUS_SUCCESS,T.data.AccessLevel.accessLevel)}else{var V=j.PercServiceUtils.extractDefaultErrorMessage(T.request);S(j.PercServiceUtils.STATUS_ERROR,V)}},O)}function I(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_DELETE_VALIDATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function k(M,O){var N=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_REMOVE_USERS_VALIDATE,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function H(M){M=j.perc_utils.convertCXFArray(M);j.each(M,function(O,N){M[O]=N.toString()});return M}})(jQuery);(function(f){f.PercWebResourcesService={deleteFile:b,validateFileUpload:e};function k(x,y,n,q,A){var z;if(q=="section"){z=I18N.message("perc.ui.finder.section.delete@Title")}else{z=I18N.message("perc.ui.finder.folder.delete@Title")}f.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:z,question:h(x,n,q),success:function(){var C="EMPTY";if(f("#perc_delete_folder_force").length>0){C=f("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var B={DeleteFolderCriteria:{path:y,skipItems:C}};f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(B),success:A,error:cbDfErrors});f.unblockUI()},width:500})}function j(x){var n=f.PercServiceUtils.extractDefaultErrorMessage(x);var q="Could not delete the file.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete File Error",content:(n!="")?n:q})}function h(x){var q;var n="";n="perc.ui.finder.fsfile.delete@Filename";q="perc.ui.finder.fsfile.delete@Confirm";var y;y=I18N.message(n,[x]);y=y+"<br /><br />"+I18N.message(q,[x]);return y}function b(q,n,y){var x=I18N.message("perc.ui.finder.fsfile.delete@Title");f.perc_utils.confirm_dialog({id:"perc-finder-delete-fsfile",title:x,question:h(n),success:function(){f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.PercServiceUtils.makeDeleteRequest(f.perc_paths.WEBRESOURCESMGT+q,false,function(A,z){if(A==f.PercServiceUtils.STATUS_SUCCESS){y(f.PercServiceUtils.STATUS_SUCCESS,z.data)}else{j(z.request)}});f.unblockUI()},width:500})}function e(n,x,q){n="/"+n.slice(3).join("/")+"/"+x;f.PercServiceUtils.makeRequest(f.perc_paths.WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD+n,f.PercServiceUtils.TYPE_GET,false,function(z,y){q(z,y)})}})(jQuery);(function(x){x.PercWorkflowService=function(){return{checkIn:D,checkOut:n,forceCheckOut:q,transition:J,getTransitions:F,isCheckedOutToCurrentUser:K,isApproveAvailableToCurrentUser:y,getWorkflowObject:z,createNewWorkflowStep:h,deleteWorkflowStep:b,updateWorkflowStep:k,getStatusByWorkflow:j,getWorkflowList:I,getWorkflows:G,createWorkflow:e,updateWorkflow:B,deleteWorkflow:E,bulkApproveItems:A,getBulkApproveStatus:f,getDefaultWorkflow:C}};function j(N,M){var L="/Rhythmyx/services/workflowmanagement/workflows/"+x.perc_utils.encodeURL(N)+"/states/choices";M=M==null?function(){}:M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,M)}function n(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_CHECKOUT+"/"+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function D(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_CHECKIN+"/"+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function F(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_TRANSITIONS+"/"+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function J(N,M,P,O){if(x.perc_utils.isBlankString(N)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}O=O==null?function(){}:O;var L=x.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+N+"/"+M+"?comment="+P;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,O)}function q(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function K(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function y(M,N){if(x.perc_utils.isBlankString(M)){x.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}N=N==null?function(){}:N;var L=x.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+M;x.PercServiceUtils.makeJsonRequest(L,x.PercServiceUtils.TYPE_GET,true,N)}function z(L,O){var N=x.perc_paths.WORKFLOW_STEPPED+L;var M=function(P,Q){if(P==x.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};x.PercServiceUtils.makeJsonRequest(N,x.PercServiceUtils.TYPE_GET,false,M)}function k(L,Q,M,P){var O=x.perc_paths.WORKFLOW_STEPPED+L+"/steps/"+Q;var N=function(R,S){if(R==x.PercServiceUtils.STATUS_ERROR){P(false,[S.request,S.textstatus,S.error])}else{P(true,[S.data,S.textstatus])}};x.PercServiceUtils.makeJsonRequest(O,x.PercServiceUtils.TYPE_PUT,false,N,M)}function h(L,Q,M,P){var O=x.perc_paths.WORKFLOW_STEPPED+L+"/steps/"+H(Q);if((Q.indexOf("/")!=-1)||(Q.indexOf("\\")!=-1)||(Q.indexOf(";")!=-1)||(Q.indexOf('"')!=-1)){M.Workflow.workflowSteps[0].stepName=Q.replace(/[\\\/\;"]/g,"#")}var N=function(R,S){if(R==x.PercServiceUtils.STATUS_ERROR){P(false,[S.request,S.textstatus,S.error])}else{P(true,[S.data,S.textstatus])}};x.PercServiceUtils.makeJsonRequest(O,x.PercServiceUtils.TYPE_POST,false,N,M)}function b(L,P,O){var N=x.perc_paths.WORKFLOW_STEPPED+L+"/steps/"+P;var M=function(Q,R){if(Q==x.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};x.PercServiceUtils.makeJsonRequest(N,x.PercServiceUtils.TYPE_DELETE,false,M)}function I(N){var M=x.perc_paths.WORKFLOW_STEPPED;var L=function(O,P){if(O==x.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{P.data.EnumVals.entries=x.perc_utils.convertCXFArray(P.data.EnumVals.entries);N(true,[P.data,P.textstatus])}};x.PercServiceUtils.makeJsonRequest(M,x.PercServiceUtils.TYPE_GET,false,L)}function C(N){var M=x.perc_paths.DEFAULT_WORKFLOW_META;var L=function(O,P){if(O==x.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{P.data.EnumVals.entries=x.perc_utils.convertCXFArray(P.data.EnumVals.entries);N(true,P.data)}};x.PercServiceUtils.makeJsonRequest(M,x.PercServiceUtils.TYPE_GET,false,L)}function G(N){var M=x.perc_paths.WORKFLOW_META;var L=function(O,P){if(O==x.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};x.PercServiceUtils.makeJsonRequest(M,x.PercServiceUtils.TYPE_GET,false,L)}function e(L,M,P){var O=x.perc_paths.WORKFLOW_STEPPED+H(L);if((L.indexOf("/")!=-1)||(L.indexOf("\\")!=-1)||(L.indexOf(";")!=-1)||(L.indexOf('"')!=-1)){M.Workflow.workflowName=L.replace(/[\\\/\;"]/g,"#")}var N=function(Q,R){if(Q==x.PercServiceUtils.STATUS_ERROR){P(false,[R.request,R.textstatus,R.error])}else{P(true,[R.data,R.textstatus])}};x.PercServiceUtils.makeJsonRequest(O,x.PercServiceUtils.TYPE_POST,false,N,M)}function B(P,L,O){var N=x.perc_paths.WORKFLOW_STEPPED+P;var M=function(Q,R){if(Q==x.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};x.PercServiceUtils.makeJsonRequest(N,x.PercServiceUtils.TYPE_PUT,false,M,L)}function H(L){var M=L.toString();M=M.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(M))}function E(L,O){var N=x.perc_paths.WORKFLOW_STEPPED+L;var M=function(P,Q){if(P==x.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};x.PercServiceUtils.makeJsonRequest(N,x.PercServiceUtils.TYPE_DELETE,false,M)}function A(L,O){var N=x.perc_paths.WORKFLOW_BULK_APPROVE;var M=function(P,Q){if(P==x.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};x.PercServiceUtils.makeJsonRequest(N,x.PercServiceUtils.TYPE_POST,false,M,L)}function f(L,M,P){var O=x.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(M){O+="/full/"+L}else{O+="/processed/"+L}var N=function(Q,R){if(Q==x.PercServiceUtils.STATUS_ERROR){P(false,[R.request,R.textstatus,R.error])}else{P(true,[R.data,R.textstatus])}};x.PercServiceUtils.makeJsonRequest(O,x.PercServiceUtils.TYPE_GET,false,N)}})(jQuery);(function(e){e.PercImportProgressDialog=function b(I){var j={IDS:{MAIN_DIALOG:"perc_import_progress_dialog",MAIN_DIALOG_CLOSE_BUTTON:"perc_import_progress_dialog_close",MAIN_DIALOG_CLOSE_DISABLED_BUTTON:"perc_import_progress_dialog_close_disabled",MAIN_DIALOG_DONE_BUTTON:"perc_import_progress_dialog_done",MAIN_DIALOG_DONE_DISABLED_BUTTON:"perc_import_progress_dialog_done_disabled"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.ImportProgressDialog.title@Import"),IMPORT_ERROR_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import failed message"),IMPORT_SUCCESS_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import succeded message")},OTHER:{EVENTS_ENABLE_DONE_BUTTON:"enableDoneButton",POLLING_PERIOD_DURATION:100,IMPORT_LOG_URL:e.perc_paths.VIEW_IMPORT_LOG+"?templateId="}};var x={Done:{id:j.IDS.MAIN_DIALOG_DONE_BUTTON,click:function(M){I.onSuccessCallback(K)}},"Done Disabled":{id:j.IDS.MAIN_DIALOG_DONE_DISABLED_BUTTON},"Close Normal":{id:j.IDS.MAIN_DIALOG_CLOSE_BUTTON,click:function(){E=true;if(I.backgroundRefreshCallback!==undefined&&q===true){I.backgroundRefreshCallback()}D.remove()}}};var H={id:j.IDS.MAIN_DIALOG,title:j.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:true,width:686,height:"auto",percButtons:x};var A=e("<div/>");var D;var B;var K;var q=false;var z=-1;var G;var E=false;function F(M){G='<div class="progress">';G+='<p class="progress-message">&nbsp;</p>';G+='<div class="progress-bar-container">';G+='<div class="progress-bar"></div>';G+="</div>";G+='<div class="error-message">';G+=j.TEXT.IMPORT_ERROR_MESSAGE;G+="</div>";G+='<div class="success-message">';G+=j.TEXT.IMPORT_SUCCESS_MESSAGE;G+="</div>";G+="</div>";G=e(G);A.append(e("<div>").append(G));if(M.showVideo===true){A.append(e('<div align="center" style="margin-top:24px;height: 315px; overflow:hidden">').append(e('<iframe id="perc_import_video" src="//help.percussion.com/in-product/single2" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="560px" height="0px" style="display: block; overflow: hidden">')).append(e('<img id="perc_import_image" src="../images/images/ImportVideoNotFound.png" width="560px" height="0px">')))}A.append(e("<div>").append('<p class="hint">Ask questions. Get answers. Visit the <a target="_blank" href="http://cm1community.percussion.com/percussion" title="Percussion Community">Percussion Community</a> to access Video Tutorials, Forums, and more.</p>'));if(M.showVideo===true){A.append(e('<img height="0px" width="0px" src="http://help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(O).load(N))}function O(){e("#"+j.IDS.MAIN_DIALOG).find("#perc_import_image").attr("height","315px")}function N(){e("#"+j.IDS.MAIN_DIALOG).find("#perc_import_video").attr("height","315px")}D=e(A).perc_dialog(H);f();C()}function f(){var M=e("#"+x["Done Disabled"].id);var N=e("#"+x.Done.id);N.hide();e("#"+j.IDS.MAIN_DIALOG).bind(j.OTHER.EVENTS_ENABLE_DONE_BUTTON,function(P,O){L(O)})}function L(M){var O=e("#"+x.Done.id),N=e("#"+x["Done Disabled"].id);if(M===true){O.show();N.hide()}else{O.hide();N.show()}}function C(){I.startProgressCallback(function(N,M){if(N!=e.PercServiceUtils.STATUS_SUCCESS){k()}else{B=M;n()}})}function n(){if(q===true){return}I.pollingProgressCallback(B,function(N,P){if(N!=e.PercServiceUtils.STATUS_SUCCESS||P.status<0){k()}else{var M=G.find(".progress-message");var O=G.find(".progress-bar");if(P.status>z){if(P.message!==undefined&&P.message.length>0){P.message=P.message.charAt(0).toUpperCase()+P.message.slice(1)+"...";M.html(P.message)}O.css("width",P.status+"%");z=P.status}if(P.status==100){q=true;if(I.backgroundRefreshCallback!==undefined&&E===true){I.backgroundRefreshCallback();return}y();return}setTimeout(n,j.OTHER.POLLING_PERIOD_DURATION)}})}function h(){G.find(".progress-message").css("visibility","hidden");G.find(".progress-bar-container").css("visibility","hidden")}function k(){h();G.find(".error-message").show()}function y(){I.importResultCallback(B,function(M,N){K=N;J(K);h();G.find(".success-message").show();L(true)})}function J(){function M(O){var N=G.find('a[title="Download the import log here"]');N.attr("href",j.OTHER.IMPORT_LOG_URL+O)}if(K.id!==undefined){M(K.id)}else{e.PercSiteService.getTemplates(K.Site.name,function(N,O){M(O.TemplateSummary[0].id)})}}F(I)}})(jQuery);var $perc_newSiteDialogLayout;(function(e){var h;e.perc_createNewSiteDialog=function(B){var A=null;h=e("<div></div>").perc_wizard({steps:2,modal:true,resizable:false,templateUrl:"../jsp/dialogs/perc_newSiteDialog.jsp",title:I18N.message("perc.ui.newsitedialog.title@Create Site"),height:"auto",width:690,open:function(){var D=e("#sitename"),F=e("#templatename"),G=e("#url"),C=e("input#type_url");if(!$perc_newSiteDialogLayout){$perc_newSiteDialogLayout=true;e.perc_filterField(D,e.perc_textFilters.HOSTNAME);e.perc_filterField(F,e.perc_textFilters.URL);e("input[type=radio]").change(function(H){var I=e(this);if(I.attr("id")!=="type_url"){G.attr("readonly","readonly").attr("disabled","true");n(G)}else{G.removeAttr("readonly").removeAttr("disabled")}});var E=e("#perc_templateList").perc_imageselect({hardSelect:false,onSelect:function(I,H){e("#perc_selectedTemplate img").remove();e("#perc_selectedTemplate").html("<img src='"+H+"'/><br/><span>"+I.split(".")[2]+"</span>");e("#selectedtemplate").val(I)}});x();e("#perc-select-template-type").change(function(){if(e(this).val()=="base"){e("#perc-base-template-lib").show();e("#perc-resp-template-lib").hide()}else{e("#perc-base-template-lib").hide();e("#perc-resp-template-lib").show()}});A=e("#perc_newSiteDialogForm").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:f(),messages:b(),showErrors:function(H,I){if(this.pendingRequest<1){this.defaultShowErrors();var J=e("#perc_newSiteDialogForm");J.find(".perc_dialog_field.perc_field_success").prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");J.find(".perc_dialog_field.perc_field_error").prevAll(".perc_dialog_label").addClass("perc_dialog_label_error");e(this.currentElements).removeClass(this.settings.errorClass)}}})}else{k()}G.removeAttr("readonly").removeAttr("disabled");n(D);n(G);C.attr("checked",true)},onOk:function(){y(B)},onNext:j,onValidate:function(){return A.form()}});return h};function j(G){var L=h.find("select[name=sitename-select]");if(L.length>0){h.find("input[name=sitename]").val(L.val())}var J=e("#sitename"),F=e("#url"),A={templateName:undefined,templateId:undefined,pageId:undefined},C,H=true;function I(M){e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:M})}function D(M,N){if(M!=e.PercServiceUtils.STATUS_SUCCESS){I(N);return}A.templateName=N.Site.templateName;A.tabId="perc-tab-layout";C=e.perc_paths.SITES_ROOT+"/"+N.Site.name;e.PercSiteService.getTemplates(N.Site.name,K)}function K(M,N){if(M!=e.PercServiceUtils.STATUS_SUCCESS){I(N);return}A.templateId=N.TemplateSummary[0].id;e.PercPathService.getFolderPathItem(C,B)}function B(N,Q){if(N!=e.PercServiceUtils.STATUS_SUCCESS){I(Q);return}var P;for(var O=0;O<Q.PathItem.length;O++){if(Q.PathItem[O].category=="LANDING_PAGE"){P=Q.PathItem[O];O=Q.PathItem.length}}A.pageId=P.id;var M=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_DESIGN,E.name,null,null,null,P.path,null,A)}if(h.find("input[type=radio]").filter(":checked").attr("id")==="type_url"){var E={name:e.trim(J.val()),baseUrl:e.trim(F.val())};if(!(/^(https?):\/\//i).test(E.baseUrl)){E.baseUrl="http://"+E.baseUrl}H=false;e(".ui-dialog-titlebar .ui-icon-closethick").click();e.PercImportProgressDialog({showVideo:true,backgroundRefreshCallback:function(){e.perc_finderInstance.refresh()},onSuccessCallback:function(M){D("success",M)},startProgressCallback:function(M){e.PercSiteService.createSiteFromUrlAsync(E,function(O,N){M(O,N)})},pollingProgressCallback:e.PercSiteService.createSiteFromUrlStatus,importResultCallback:e.PercSiteService.createSiteFromUrlResult})}return H}function y(B){var A=z();A.selectedtemplate=e("#perc-select-template-type").val()=="base"?A.perc_selected_basetemplate:A.perc_selected_resptemplate;if(A.selectedtemplate.length==0){e.perc_utils.alert_dialog({title:"Error",content:"Please select a template for your homepage."});return}if(A.templatename==null||e.trim(A.templatename)==""){e.perc_utils.alert_dialog({title:"Error",content:"Template name cannot be blank."});return}var C={Site:{name:A.sitename,label:A.sitename,description:A.description,homePageTitle:"Home",navigationTitle:"Home",baseTemplateName:A.selectedtemplate,templateName:e.trim(A.templatename)}};e.PercBlockUI();e(".ui-dialog-titlebar .ui-icon-closethick").click();e.ajax({url:e.perc_paths.SITE_CREATE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(C),success:function(E,D){B(A.sitename);e.unblockUI()},error:function(F,D,E){var G=e.PercServiceUtils.extractDefaultErrorMessage(F);e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:G})}})}function k(){e("#perc_newSiteDialog .perc_dialog_field").each(function(){e(this).val("")});e("#perc_selectedTemplate").html("");e(".perc_imageselect_selected").removeClass("perc_imageselect_selected")}function z(){var A=new Object();e("#perc_newSiteDialog .perc_dialog_field").each(function(){A[this.id]=e(this).val()});return A}function x(){var B=e("#perc-base-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"base",hiddenFieldId:"perc_selected_basetemplate"});var A=e("#perc-resp-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"resp",hiddenFieldId:"perc_selected_resptemplate"})}function q(C,B,D,A){for(i=0;i<A.SiteSummary.length;i++){if((A.SiteSummary[i].name+"").toLowerCase()==D.toLowerCase()){return false}}return true}function f(){var A={sitename:{required:true,perc_remote:{url:e.perc_paths.SITES_ALL,contentType:"application/json",type:"GET",dataType:"json",handler:q}},url:{required:"input[type=radio]#type_url:checked",maxlength:2000,noBinary:"noBinary"},description:{maxlength:255},selectedtemplate:{required:true}};return A}function b(){var A={sitename:{required:"Site name is a required field.",perc_remote:"The site name must be unique."},url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."},templatename:{required:"Template name is a required field.",perc_remote:"The template name must be unique."},selectedtemplate:{required:"Selected template is required."}};return A}function n(B){B.prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");var A=B.next();if(A.find(".perc_field_error").length>0){B.removeClass("perc_field_error");A.remove()}}})(jQuery);(function(b){b.perc_iframe_fix=function(e){b.perc_iframe_scope="perc-iframe-scope";var y=false;var k=b('<div class="perc-iframe-overlay-dnd-container"/>');b("body").append(k);k.height(e.height()).width(e.width()).addClass("ui-layout-ignore").css({overflow:"hidden",position:"absolute",left:"-10000px",top:"0px",zIndex:1000});q();function f(){k.css({left:e.position().left,top:e.position().top});k.height(e.height());k.width(e.width())}function z(){k.css({left:"-10000px",top:"0px"})}function h(){var A=e.contents().find(":data(droppable)");A.each(function(){var I=b(this);var K=b.data(this,"droppable");var G=b("<div/>").addClass("allDroppablesHelpers").addClass("perc-iframe-dnd-overlay-droppable").attr("for",I.attr("id")).width(I.outerWidth()).height(I.outerHeight());k.append(G);var F,D;var E=e;if(b.browser.msie){var C=E[0].contentWindow;var J=C.document.documentElement;F=J.scrollLeft;D=J.scrollTop}else{F=e[0].contentWindow.scrollX;D=e[0].contentWindow.scrollY}var B=b(this).offset().left-F;var H=b(this).offset().top-D;if(b.browser.mozilla||b.browser.safari){B-=window.scrollX;H-=window.scrollY}G.css({position:"absolute",left:B+"px",top:H+"px"});G.droppable({greedy:K.options.greedy,tolerance:K.options.tolerance,accept:K.options.accept,over:function(L){K._over.call(K,L)},activate:function(L){K._activate.call(K,L)},deactivate:function(L){K._deactivate.call(K,L)},out:function(L){K._out.call(K,L)},drop:function(L){K._drop.call(K,L)}})})}function x(){k.empty()}function n(){if(!y){y=true;f();h()}}function j(){z();x();y=false}function q(){var A=b("<div/>").addClass("ui-layout-ignore").droppable({addClasses:false,activate:function(B,C){n(C.draggable)},deactivate:function(){setTimeout(j,100)}});b("body").append(A)}}})(jQuery);(function(j){function k(C,D,A,B){if(!j.perc_fakes.page_service.create_page){j.perc_pathmanager.get_folder_path(C,function(E){e(E,D,A,B)},B)}else{if(false){B("Could not create new page: random failure")}else{A("16777215-101-733")}}}function e(B,F,A,D){var E={};j.each(F,function(){E[this.name]=this.value});var H=null;var G=null;var C=E.addToRecent?true:false;if(E.landingpage){H=j.perc_paths.SECTION_CREATE;pass_in={CreateSiteSection:{pageName:E.page_name,pageTitle:E.page_title,templateId:E.template,pageUrlIdentifier:E.page_name,pageLinkTitle:E.page_linktext,folderPath:B,addToRecent:true}}}else{H=j.perc_paths.PAGE_CREATE;pass_in={Page:{name:E.page_name,title:E.page_title,templateId:E.template,linkTitle:E.page_linktext,folderPath:B,addToRecent:true}}}j.ajax({dataType:"json",data:JSON.stringify(pass_in),contentType:"application/json",type:"POST",url:H,success:A,error:D})}function q(C,A,B){j.ajax({url:j.perc_paths.PAGE_EDIT+"/"+C,type:"GET",success:A,error:B,dataType:"text"})}function b(C,B,A){j.ajax({url:j.perc_paths.PAGE_DELETE+"/"+C,type:"DELETE",success:function(){B()},error:A})}function y(C,B,A){j.ajax({url:j.perc_paths.SITE_DELETE+"/"+C,type:"DELETE",success:B,error:A})}function n(B,C,D,A){if(!j.perc_fakes.page_service.new_asset){A("New asset not yet implemented!")}else{D("54321")}}function f(B,A,F,C){if(!j.perc_fakes.page_service.get_widget_ctypes){function E(G){var H={};j.each(G.AssetDropCriteria,function(){H[this.widgetId]=this.supportedCtypes});F(H)}j.ajax({url:j.perc_paths.ASSET_WIDGET_DROP_CRITERIA+B+"/"+A,type:"GET",dataType:"json",success:E,error:C})}else{var D={"12345":["percPage","article"],"4567":[]};F(D)}}function z(A,B,C){j.ajax({url:j.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:B,dataType:"xml",processData:false,success:C,error:function(F,D,E){j.unblockUI();j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(F)})}})}function h(A,B){j.ajax({url:j.perc_paths.PAGE_CREATE+"/"+A,type:"GET",dataType:"text",success:B,error:function(E,C,D){j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(E)})}})}function x(C,A,B){j.ajax({url:j.perc_paths.PAGE_PREVIEW+C,type:"POST",contentType:"text/xml",dataType:"xml",data:A,processData:false,success:B,error:function(F,D,E){j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(F)})}})}j.perc_pagemanager={save_page:z,render_region:x,load_page:h,create_new_page:k,render_page:q,new_asset:n,delete_page:b,delete_site:y,get_widget_ctypes:f,createPage:e}})(jQuery);(function(k){var h=k.perc_utils;function n(D,C,z,B){q(D,function(E){C(E.PathItem)},A(z),B);function A(E){return function(F){var G=k.map(F.PathItem,function(H){var I=H.path.split("/");if(I[I.length-1]==""){I.pop()}H.path=k.map(I,function(J){return J});H.path_component=I[I.length-1];return H});G=k.grep(G,function(H){return H.type!="percNavTree"&&H.name!=".system"});E(G)}}}function q(E,D,z,B){if(E.length<=2){e(E,true,z,B)}else{var A=k.map(E,function(G){return G});var C=A.pop();function F(H){var G=k.grep(H.PathItem,function(K){var I=K.path.split("/");var J=I.pop();if(J==""){J=I.pop()}return J==C});if(G.length==0){B("Item not found")}else{if(G[0].leaf==true){e(E,false,D,B)}else{e(E,true,z,B)}}}e(A,true,F,B)}}function x(B,z,A){z(B[1])}function f(B,z,A){e(B,false,function(C){z(C.PathItem["folderPath"])},A)}function j(C,A,B){var z=k.map(C,function(D){return D});q(C,function(){z.pop();e(z,true,function(D){A(D,z)},B)},function(D){A(D,z)},B)}function y(E,A,D){var B=E.join("/")+"/";var C=k.perc_utils.acop(E);var z=C.pop();e(C,true,function(G){var F=k.grep(G.PathItem,function(H){return H.name==z});if(F.length>0){D(I18N.message("perc.ui.saveasdialog.error@Duplicate folder"))}else{B=k.perc_utils.encodeURL(B);k.ajax({type:"GET",success:A,error:D,url:k.perc_paths.PATH_ADD_FOLDER+B,dataType:"json"})}},D)}function e(F,D,G,C,A){var B;var E;if(A){B=F;E=k.perc_paths.PATH_PAGINATED_FOLDER+B}else{B=k.perc_utils.encodeURL(F.join("/")+"/");E=k.perc_paths.PATH_FOLDER+B}if(!k.perc_fakes.path_service){if(D){k.ajax({type:"GET",success:G,error:function(J,H,I){if(J.status!=0){C("Error finding path "+B)}},url:E,dataType:"json",cache:false})}else{k.ajax({type:"GET",success:G,error:function(J,H,I){if(J.status!=0){C("Error finding path "+B)}},url:k.perc_paths.PATH_ITEM+B,dataType:"json",cache:false})}}else{var z={"/":{PathItem:[{name:"Sites",leaf:"false",path:"/Sites/"}]},"/Sites/":{PathItem:[{name:"Test",leaf:"false",path:"/Sites/Test/"},{name:"TestTwo",leaf:"false",path:"/Sites/TestTwo/"}]},"/Sites/Test/":{PathItem:[{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}]},"/Sites/Test/Test/":{PathItem:{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}},"/Sites/TestTwo/":{PathItem:[{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}]},"/Sites/TestTwo/TestTwo/":{PathItem:{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}}};G(z[B])}}function b(C,D){var z=function(E){D(true,E.ItemProperties)};var A=function(G,E,F){D(false,k.PercServiceUtils.extractDefaultErrorMessage(G))};var B=k.perc_utils.encodeURL(C);k.ajax({type:"GET",success:z,error:A,url:k.perc_paths.PATH_ITEM_PROPERTIES+B,dataType:"json",cache:false})}k.perc_pathmanager={is_leaf:n,open_path:e,get_folder_path:f,get_site_id:x,open_containing_folder:j,add_folder:y,getItemProperties:b}})(jQuery);(function(b){b.perc_build_new_folder_button=function(e,k){var j=b.perc_utils;var q=["",b.perc_paths.SITES_ROOT_NO_SLASH];var h={};var z=null;var f=b("<a id='perc-finder-new-folder' class='perc-font-icon ui-disabled' href='#' title='Click to create new folder'><span class='icon-plus'></span><span class='icon-folder-close'></span></a>").perc_button().click(function(){x()});function x(){b.PercFolderHelper().getAccessLevelByPath(q.join("/"),false,function(B,A){if(B==b.PercFolderHelper().PERMISSION_ERROR||A==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create a folder here."});return}else{b.PercBlockUI(b.PercBlockUIMode.CURSORONLY);b.PercPathService.createNewFolder(q.join("/"),function(D,C){if(D==b.PercServiceUtils.STATUS_SUCCESS){h=C;e.refresh(function(){var E=b(".perc-finder").css("visibility")=="visible";if(E){j.makeFolderEditable(h.PathItem)}});b.unblockUI()}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:C})}})}})}function n(A){q=A;y(true);if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){y(false)}else{if(A[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&A.length<4){y(false)}else{if(A.length==2&&A[1]==b.perc_paths.SITES_ROOT_NO_SLASH){y(false)}else{b.PercFolderHelper().getAccessLevelByPath(A.join("/"),true,function(C,B){if(C==b.PercFolderHelper().PERMISSION_ERROR||B==b.PercFolderHelper().PERMISSION_READ){y(false)}})}}}}function y(A){if(A){b(".perc-finder-menu #perc-finder-new-folder").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(x)}else{b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}e.addPathChangedListener(n);return f}})(jQuery);(function(b){b.perc_build_new_page_button=function(q,f){var n;var j=b('<a id="mcol-new-page" class="perc-font-icon" href="#" title="Click to create new page" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file"></span></a>').perc_button();function e(x){n=x;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){h(false)}else{if(x[1]==b.perc_paths.SITES_ROOT_NO_SLASH){j.show();h(true);if(x.length<3){h(false)}else{b.PercFolderHelper().getAccessLevelByPath(x.join("/"),true,function(z,y){if(z==b.PercFolderHelper().PERMISSION_ERROR||y==b.PercFolderHelper().PERMISSION_READ){h(false)}})}}else{if(x[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||x[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){j.hide()}}}}function h(x){if(x){j.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(k)}else{j.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function k(){var y=q.getCurrentItem();var x="";if(y!=null){x=y.folderPaths;if(y.type=="Folder"){x=y.folderPath}}b.PercUserService.getAccessLevel("percPage",-1,function(A,z){if(A==b.PercServiceUtils.STATUS_ERROR||z==b.PercUserService.ACCESS_READ||z==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Page",content:"You are not authorized to create a new page."});return}else{if(f){f.confirm_if_dirty(function(){b.PercNewPageDialog().openDialog(n.join("/"))})}else{open_new_page_dialog(b.PercNewPageDialog().openDialog(n.join("/")),null)}}},x)}q.addPathChangedListener(e);return j}})(jQuery);(function(e){var b;e.perc_build_copy_page_button=function(k,x){var f=e("<a id='perc-finder-copy-page' href='#' title='Click to copy selected page'>Copy</a>").click(function(A){y()});function y(){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);var D=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE");var C=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE");var A=e("#perc-finder-listview .perc-datatable-row-highlighted");if(D[0]==undefined&&C[0]==undefined&&A.size()==0){return}b=D.text();if(!b||b==""){b=C.text()}var F;if(A.size()>0){listSelectedRowData=A.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"){F=listSelectedRowData.id;b=listSelectedRowData.name}}else{if(D[0]!=undefined){F=D.attr("id")}else{F=C.attr("id")}}var B=k.getCurrentItem();var E="";if(B!=null){E=B.id}e.PercUserService.getAccessLevel("percPage",E,function(H,G){if(H==e.PercServiceUtils.STATUS_ERROR||G==e.PercUserService.ACCESS_READ||G==e.PercUserService.ACCESS_NONE){e.perc_utils.alert_dialog({title:"Copy Page",content:"You are not authorized to copy the page '"+b+".'"});e.unblockUI();return}else{F=F.replace("perc-finder-listing-","");h(F)}})}function h(A){var B=k.getCurrentPath();var C=k.getPathItemById(A);e.PercPageService.copyPage(A,function(E,D){if(E=="error"){z(D);k.refresh()}else{k.refresh(function(){var G=D.data.split("/");var F=G[G.length-1];B[B.length-1]=F;k.open(B)})}e.unblockUI()})}function z(A){A=A.replace("PAGE_NAME",b);e.perc_utils.alert_dialog({id:"perc-finder-copy-page-error",title:"Error",content:A})}function q(F){var C=F[F.length-1];if(F[1]==e.perc_paths.SITES_ROOT_NO_SLASH){if(F.length<4){n(false)}else{var E=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE.perc_last_selected");var D=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE.perc_last_selected");var A=e(".mcol-listing.perc-listing-type-Folder.perc-listing-category-FOLDER.ui-draggable.perc_last_selected.ui-droppable[title='"+C+"']").eq(0).attr("id");var G=e(".mcol-listing.perc-listing-type-Folder.perc-listing-category-SECTION_FOLDER.perc_last_selected.ui-droppable[title='"+C+"']").eq(0).attr("id");var B=e("#perc-finder-listview .perc-datatable-row-highlighted");if(B.size()>0){listSelectedRowData=B.data("percRowData");j(F,function(H){if(H&&(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE")){n(true)}else{n(false)}});return}else{if(E[0]!=undefined||D[0]!=undefined){j(F,function(H){if(!H||A!=undefined||G!=undefined){n(false)}else{n(true)}})}else{n(false)}}}}else{n(false)}}function j(B,C){var A=B.slice(0,B.length-1).join("/");e.PercFolderHelper().getAccessLevelByPath(A,false,function(E,D){if(E==e.PercFolderHelper().PERMISSION_ERROR){e.perc_utils.alert_dialog({title:"Error",content:D});return}else{C(!(D==e.PercFolderHelper().PERMISSION_READ));return}})}function n(A){if(A){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(y)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}k.addPathChangedListener(q);return f}})(jQuery);(function(b){b.perc_build_download_button=function(k,h){var f=b('<a id="perc-finder-download" href="#" title="Click to download the selected file">Download File</a>');function e(x){if(x[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&x.length>4){y=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(y==undefined){var y=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened.perc_last_selected").data("spec")}if(y!=undefined&&y.type=="FSFile"&&y.leaf){n(true);j(true);return}}n(false);j(false)}function j(x){if(x){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(q)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function q(){}function n(x){var y;if(x){y=b.perc_paths.WEBRESOURCESMGT+"/"+k.getCurrentPath().slice(3).join("/")}else{y="#"}f.attr("href",y)}k.addPathChangedListener(e);return f}})(jQuery);(function(b){b.perc_build_upload_button=function(k,h){var f=b('<a id="perc-finder-upload" href="#" title="Click to upload a file">Upload File...</a>').click(e);function n(q){if(q.length>3&&b.perc_paths.DESIGN_THEMES==q[0]+"/"+q[1]+"/"+q[2]+"/"+q[3]){j(true);return}j(false)}function j(q){if(q){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function e(){b.perc_upload_theme_file_dialog.open(k)}k.addPathChangedListener(n);return f}})(jQuery);(function(b){b.perc_build_folderproperties_button=function(e,j){var f=b('<a id="perc-finder-folderproperties" href="#" title="Folder properties">Folder properties</a>');var h=undefined;var x=undefined;function y(D){if(D.length>1&&D[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){q(false);x=undefined;return}h=b("#perc-finder-listview .perc-datatable-row-highlighted");if(h.length>0){x=h.data("percRowData");if(x.type!="Folder"&&x.type!="FSFolder"){h=undefined}}else{var E;E=".mcol-listing.perc-listing-type-FSFolder.mcol-opened";E+=", .mcol-listing.perc-listing-type-Folder.mcol-opened";var A=b(E);var C;for(C=0;C<A.length;C++){var B=b(A[C]);var z=B.data("spec").path;if(z==D.join("/")+"/"){h=B;x=B.data("spec")}}}if(h!=undefined&&h.length>0){q(true)}else{q(false);x=undefined}}function q(z){if(z){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function n(){if(x.category=="SYSTEM"){b.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  Its properties cannot be modified."});return}else{if(x.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){var z=pathItem.category=="SECTION_FOLDER"?"section":"folder";b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this "+z+"."});return}else{if(x.category=="SECTION_FOLDER"){b.perc_utils.alert_dialog({title:"Warning",content:"Use the navigation editor to change section properties."});return}}}b.PercFolderPropertiesDialog().open(x,function(B,A){if(A===undefined){if(B!==""&&B!==x.name){var C=x.folderPaths+"/"+B;C=C.substring(1);C=C.replace("/Folders/$System$","");b.perc_finder().open(C.split("/"))}else{b.perc_finder().refresh()}}})}function k(z){var A;if(z){A=b.perc_paths.WEBRESOURCESMGT+"/"+e.getCurrentPath().slice(3).join("/")}else{A="#"}f.attr("href",A)}e.addPathChangedListener(y);return f}})(jQuery);(function(b){b.perc_build_actions_button=function(E,h){var j=b.perc_build_copy_page_button(E,h);var k=b.perc_build_folderproperties_button(E,h);var G=b.perc_build_download_button(E,h);var C=b.perc_build_upload_button(E,h);var f=[j,k,G,C];var e=F(f).hover(q,y);var H='<div id="perc-finder-actions" ><a id="perc-finder-actions-button" class="perc-font-icon" title="Select an action" href="#"><span class="icon-cog"></span><span class="icon-caret-down"></span></a></div>';var n=b(H).append(e).hover(q,y);var D=false;function y(){D=false;setTimeout(function(){if(!D){z(false)}},500)}function q(I){var J=b(I.target);if(J.attr("id")==n.attr("id")){D=true;return}if(J.is("#perc-finder-actions *")){D=true;return}}function x(){if(b("#perc-finder-actions-button").hasClass("ui-disabled")){return false}else{if(e.css("display")=="none"){z(true)}else{z(false)}return false}}function z(K){if(K){var J=n.position().left+n.outerWidth()-e.outerWidth()-1;var I=n.position().top+n.outerHeight()+9;e.css("top",I).css("left",J).css("display","block")}else{e.hide()}}function B(I){var J=b("#perc-finder-actions-button");if(I){J.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(x)}else{J.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function F(J){var K=b('<ul class="perc-actions-menu box_shadow_with_padding">');var I=b('<li class="perc-actions-menu-item">');for(l=0;l<J.length;l++){I.clone().append(J[l]).appendTo(K)}return K}function A(){var I=f.length;var K=0;function J(){var L=b(this).hasClass("ui-enabled");if(I==1&&K==f.length-1){B(L);I=f.length;K=0}else{if(I==1&&K<f.length-1){B(true);I=f.length;K=0}else{if(!L){K++}I--}}}for(m=0;m<f.length;m++){f[m].bind("actions-change-enabled-state",J)}}A();return n}})(jQuery);(function(b){b.perc_build_delete_page_button=function(A,x){var h=b.perc_utils;var e=b.perc_finder();var n=["","site"];var q="<span id='perc-delete-warn-msg'>";var k="</span>";var f=b('<a id="perc-finder-delete" class="perc-font-icon icon-remove" title="Click to delete selected item" href="#" ></a>').unbind().perc_button().click(z);function z(){var C=n;if(b.perc_utils.isPathUnderDesign(C)){C=b.perc_utils.encodePathArray(n)}b.PercFolderHelper().getAccessLevelByPath(C.join("/"),false,function(E,D){if(E==b.PercFolderHelper().PERMISSION_ERROR){b.perc_utils.alert_dialog({title:"Error",content:D});A.refresh();return}else{if(D==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to delete this."});return}else{y()}}})}function y(){b.perc_pathmanager.open_path(h.acop(n),false,function(N){function M(P,S,Q){var R=I18N.message("perc.ui.deleteassetdialog.title@Delete Asset");H(P,"asset",R,function(){var T=N.PathItem["id"];b.PercAssetService.forceDeleteAsset(T,D(T,"asset"),M)})}function K(P,S,Q){var R=I18N.message("perc.ui.deletepagedialog.title@Delete Page");H(P,"page",R,function(){var T=N.PathItem["id"];b.PercPageService.forceDeletePage(T,D(T,"page"),K)})}function H(R,Q,T,S){var P=b.PercDeleteItemHelper.extractDeleteErrorMessage(R,N.PathItem["name"],Q);if(P.canForceDelete){F(P.dialogid,T,P.content,P.chkBoxId,S)}else{h.alert_dialog({id:P.dialogid,title:T,content:q+P.content+k})}}function F(U,S,P,T,R){var Q=b("<div/>").append(q+P+k).perc_dialog({id:U,title:S,success:function(){if(b("#"+T).length>0){if(b("#"+T).get(0).checked){R()}}},width:500,resizable:false,percButtons:{Ok:{id:"perc-finder-delete-approved-ok",cls:"ui-state-disabled",click:function(){}},Cancel:{id:"perc-finder-delete-approved-cancel",cls:"perc-cancel",click:function(){Q.remove()}}},open:function(){b("#"+T).click(function(){if(b(this).get(0).checked){b("#perc-finder-delete-approved-ok").click(function(){if(b("#"+T).length>0){if(b("#"+T).get(0).checked){R();Q.remove()}}});b("#perc-finder-delete-approved-ok").removeClass("ui-state-disabled")}else{b("#perc-finder-delete-approved-ok").addClass("ui-state-disabled")}})}})}function J(){b.PercBlockUI();b.perc_pagemanager.delete_site(N.PathItem["name"],function(){dialog.remove();var P={type:"site",name:N.PathItem["name"]};e.fireActionEvent(e.ACTIONS.DELETE,P);setTimeout(function(){b.PercDirtyController.setDirty(false);b.PercNavigationManager.goToLocation(b.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(P){b.unblockUI();site_delete_handle_error(P)})}function I(){var P=N.PathItem["id"];b.PercAssetService.deleteAsset(P,function(){D(P,"asset")},M)}function E(){var P=N.PathItem["id"];b.PercRedirectHandler.createRedirect(N.PathItem.path,"","page").fail(function(Q){b.perc_utils.alert_dialog({title:"Redirect creation error",content:Q,okCallBack:function(){b.perc_pagemanager.delete_page(P,function(){D(P,"page")},K)}})}).done(function(){b.perc_pagemanager.delete_page(P,function(){D(P,"page")},K)})}function D(U,S){setTimeout(function(){A.refresh()},200);var R=false;if(U==b.PercNavigationManager.getId()){R=true;x.clear()}var T={type:S,id:U,isOpen:R};e.fireActionEvent(e.ACTIONS.DELETE,T);b("form.perc-template-pages-controls").submit();var P=jQuery.Event("click");P.deletedPageId=U;b(".resetPaging").trigger(P);var Q=b.PercNavigationManager.getView();if(S=="page"&&Q!=b.PercNavigationManager.VIEW_EDITOR){L(Q)}}function L(Q){var R={templateId:memento.templateId,pageId:null};var P=$j.deparam.querystring();$j.PercNavigationManager.goToLocation(Q,P.site,null,null,null,P.path,null,R)}if(N.PathItem["type"]=="percPage"){if(N.PathItem["category"]=="LANDING_PAGE"){return}else{b.PercPageService.validateDeletePage(N.PathItem["id"],function(){var Q=b.PercDirtyController.dirtyObjectType;var P={id:"perc-finder-delete-confirm",title:"Delete Page",question:q+"Page: "+N.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletepagedialog.warning@Confirm")+k,success:function(){b.PercViewReadyManager.setProcessingFlag();var R=b.PercDirtyController.isDirty();x.confirm_if_dirty(function(){if(R){x.save(Q,E)}else{E()}},function(){},{title:I18N.message("perc.ui.deletepagedialog.title@Delete Page"),question:"Page: "+N.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["page",Q]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};h.confirm_dialog(P)},K)}}else{if(N.PathItem["type"]=="Folder"){if(N.PathItem["category"]=="FOLDER"){function G(){if(b.PercNavigationManager.isAdmin()){b.PercPathService.deleteFolderSkipValidation(n.join("/"),n[n.length-1],n[1],function(P){B(P)})}else{b.PercPathService.deleteFolder(n.join("/"),n[n.length-1],n[1],B)}}if(N.PathItem.path.match("^/Sites/")||N.PathItem.path.match("^//Sites/")){b.PercRedirectHandler.createRedirect(N.PathItem.path,"","folder").fail(function(P){b.perc_utils.alert_dialog({title:"Redirect creation error",content:P,okCallBack:function(){G()}})}).done(function(){G()})}else{G()}}else{return}}else{if(N.PathItem["type"]=="FSFolder"){var C=b.perc_utils.encodePathArray(n);b.PercPathService.deleteFSFolder(C.join("/"),n[n.length-1],B)}else{if(N.PathItem["type"]=="FSFile"){var C="";var O=N.PathItem["path"].split("/");O=O.slice(3,O.length-1);b.each(O,function(P,Q){C=C+"/"+Q});C=b.perc_utils.encodeURL(C);b.PercWebResourcesService.deleteFile(C,n[n.length-1],B)}else{b.PercAssetService.validateDeleteAsset(N.PathItem["id"],function(){var Q=b.PercDirtyController.dirtyObjectType;var P={id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:q+I18N.message("perc.ui.deleteassetdialog.tag@Asset")+": "+N.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deleteassetdialog.warning@Confirm")+"<br/><br/>"+I18N.message("perc.ui.common.question@Continue")+k,success:function(){var R=b.PercDirtyController.isDirty();x.confirm_if_dirty(function(){if(R){x.save(Q,I)}else{I()}},function(){},{title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:"Asset: "+N.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["asset",Q]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};h.confirm_dialog(P)},M)}}}}},h.show_error)}function B(D){setTimeout(function(){A.refresh()},200);var C={type:"folder"};e.fireActionEvent(e.ACTIONS.DELETE,C)}function j(C){n=C;b.perc_pathmanager.open_path(h.acop(C),false,function(E){var G=E.PathItem.type;var D=E.PathItem.category;var F=(typeof(D)!="undefined")&&(D=="LANDING_PAGE"||D=="SECTION_FOLDER"||D=="SYSTEM");if(G=="Folder"&&E.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){F=true}else{if((D=="ASSET"||D=="PAGE")&&E.PathItem.accessLevel==b.PercFolderHelper().PERMISSION_READ){F=true}}if((G=="FSFolder"||G=="FSFile")&&n.length>=5&&E.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){F=false}if(!F&&n.length>2){if(G=="site"){b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-disabled").addClass("ui-enabled").unbind().click(z)}}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}},function(D){var E=b.PercServiceUtils.extractDefaultErrorMessage(D);b.perc_utils.alert_dialog({title:"Error",content:E})})}A.addPathChangedListener(j);return f}})(jQuery);(function(b){b.perc_build_preview_button=function(j,h){var e=b("<a id='perc-finder-preview' class='perc-font-icon icon-eye-open' href='#' title='Launch Preview'></a>").perc_button().click(function(q){n()});function n(){if(b("#perc-finder-listview .perc-datatable-row-highlighted").size()>0){var x=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(x.category=="LANDING_PAGE"||x.category=="PAGE"){j.launchPagePreview(x.id)}else{if(x.category=="ASSET"){j.launchAssetPreview(x.id)}}}else{var y=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");if(y.size()>0){j.launchPagePreview(y.data("spec").id)}else{if(q.size()>0){j.launchAssetPreview(q.data("spec").id)}}}}function k(A){var x=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");var y=b("#perc-finder-listview .perc-datatable-row-highlighted");if(A[1]=="Sites"&&A.length<4){f(false)}else{if(y.size()>0){listSelectedRowData=y.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"||listSelectedRowData.category=="ASSET"){f(true)}else{f(false)}}else{if(x.size()>0){var z=x.data("spec").path.split("/");if(z.length==A.length&&b(z).last()[0]==b(A).last()[0]){f(true)}else{f(false)}}else{if(q.size()>0){var z=q.data("spec").path.split("/");if(z.length==A.length&&b(z).last()[0]==b(A).last()[0]){f(true)}else{f(false)}}else{f(false)}}}}}function f(q){if(q){b("#perc-finder-preview").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{b("#perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}j.addPathChangedListener(k);return e}})(jQuery);(function(b){var f={height:200,minWidth:952,minHeight:100,get_max_height:function h(){return b(window).innerHeight()-150}};b.perc_finder=function(){if(b.perc_finderInstance==null){b.perc_finderInstance=e()}return b.perc_finderInstance};function e(){b("body").append('<div id="perc-wide_scroll_div_one" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div id="wide_scroll_div_two" style="height:100px;width:100%"></div></div>');var aa=b("#perc-wide_scroll_div_one").width()-b("#wide_scroll_div_two").innerWidth();b("#perc-wide_scroll_div_one").remove();var ae="perc-finder-listing-";var am=100;var R=true,z=false,aj="perc-finder-expand-state",H=H(),av=F(H),Z=b.perc_utils,aE=[],E=null;actionListeners=[],openListeners=[],_finderPathIdArray={},path_changed=function(aQ){aE=aQ},finderOpenInProgress=false,lastClickPath=null,dragDelay=(b.PercNavigationManager.isAutoTest()?0:250),actions={DELETE:"delete",FINDER_OPEN_START:"open_start",FINDER_OPEN_END:"open_end"},isLibMode=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";b.perc_utils.preLoadImages("/cm/images/images/loading.gif");function ay(aS){aS.preventDefault();var aT,aR,aQ,aU;aQ=b(this).parents(".perc-finder-goto-or-search");aU=aQ.find("input.perc-finder-goto-or-search:first");aT=aU.val();aR=/^\//.test(aT);if(aT){if(aR){b("#perc-finder-go-action").trigger("click")}else{b("#perc-finder-item-search").val(aT);b("#perc-finder-search-submit").trigger("click")}}return false}b("body").on("click",".perc-action-goto-or-search",ay);b.perc_filterField(b("#mcol-path-summary"),b.perc_textFilters.PATH);b("#mcol-path-summary").bind("keyup",function(aQ){if(aQ.keyCode==13){b("#mcol-path-summary").blur();ay.apply(this,[aQ]);b("#mcol-path-summary").focus();aQ.preventDefault();aQ.stopPropagation()}if(aQ.keyCode==27||aQ.keyCode==9){b("#mcol-path-summary").val(M().join("/")).blur();b("#perc-finder-item-search").blur();aQ.preventDefault();aQ.stopPropagation()}ar(false)});b(document).mousedown(function(aQ){if(aQ.target.id!="perc-finder-go-action"&&aQ.target.id!="mcol-path-summary"){b("#mcol-path-summary").blur();if(aQ.target.id!="perc-finder-search-submit"&&aQ.target.id!="perc-finder-listing-Search"&&b(aQ.target).parents(".perc-datatable-row").length>0){b("#mcol-path-summary").val(M().join("/"))}}if(aQ.target.id!="perc-finder-item-search"){b("#perc-finder-item-search").blur()}ar(false)});b("#perc-finder-go-action").click(function(){var aQ=true;an(aQ)});b(".perc-finder-outer").hover(function y(){b(this).removeClass("ui-disabled")},function ag(){b(this).addClass("ui-disabled")});function aN(aR){var aQ=aR.split("/");for(i=0;i<aQ.length;i++){if(aQ[i]==".."){if(i-1>=0){aQ.splice(i-1,2);i=i-2}else{aQ.splice(i,1);i--}}if(aQ[1]=="."){aQ.splice(i,1);i--}}return aQ.join("/")}function an(aS){b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");b("#perc-finder-item-name").removeClass("mcol-opened");var aR=b.trim(b("#mcol-path-summary").val());var aQ=M().join("/");aR=aR.replace(/\/(\/)+/g,"/");aR=aN(aR);aR=(aR.charAt(0)!="/")?"/"+aR:aR;aR=(aR=="/"||aR=="")?"/"+M()[1]:aR;if(aR==aQ&&aS==true&&(b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_SEARCH_RESULTS&&b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_RESULT)){return}else{b.PercPathService.validatePath(aR,function(aU,aT){if(aU==b.PercServiceUtils.STATUS_SUCCESS){b("#mcol-path-summary").val(aT);if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var aW=$j.PercComponentWrapper("perc-action-finder-go-clicked",["perc-ui-component-finder"]);var aV=$j.PercViewReadyManager.setWrapper(aW);if(!aV){if(!aV){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}ab(aT.split("/"),function(){})}else{ar(true,aT)}})}}function aL(aQ,aS,aT){var aR=aS;if(b.perc_utils.isPathUnderDesign(aS)){aR=b.perc_utils.encodePathArray(aS)}b.PercPathService.validatePath(aR.join("/"),function(aV,aU){if(aV==b.PercServiceUtils.STATUS_SUCCESS){aT(aQ)}else{b.perc_utils.alert_dialog({title:"Error",content:"Path not found: "+aS.join("/")});aD()}})}function ar(aQ,aS){var aR=b(".perc-finder-message");if(aQ){aR.empty().append('<i class="icon-bell"></i>');b('<label class="perc-finder-error"></label>').text(aS).appendTo(aR);aR.fadeIn()}else{aR.fadeOut(function(){b(this).empty()})}fixIframeHeight();fixHeight()}function I(){return/collapsed/.test(b.cookie(aj))}function V(){return(""+b.cookie(aj)).replace(/[^0-9.]/g,"")}function aJ(aQ){if(!isLibMode&&V()!==aQ){var aR=I()?"collapsed":"expanded";b.cookie(aj,aR+aQ)}}function aq(aS){if(!isLibMode){var aQ,aR;aQ=V();aR=aS?"expanded":"collapsed";b.cookie(aj,aR+aQ)}}function aC(){fixBottomHeight();fixIframeHeight();fixHeight();if(b("#perc_site_map").length>0){b("#perc_site_map").perc_site_map("layoutAll")}}function ap(aT){var aU,aS,aQ=b(".perc-finder-body");if(b(".perc-finder-body").is(":visible")===aT){return}aU=b("#perc-finder-expander");aS=aU.parents(".perc-finder-outer");aq(aT);if(aT){aS.removeAttr("collapsed");aQ.slideDown(aC);aU.removeClass("icon-plus-sign").addClass("icon-minus-sign")}else{aS.attr("collapsed",true);aQ.slideUp(aC);aU.removeClass("icon-minus-sign").addClass("icon-plus-sign")}var aV=b("#frame");var aW=b(".perc-main");var aR=b("#bottom")}function at(){ap(!b(".perc-finder-body").is(":visible"))}b("#perc-finder-expander").click(at);function k(aR,aQ){aR=parseInt(aR,10);return isNaN(aR)?aQ:aR}var aP=(function(){var aR,aX,aY;function aU(){b(".perc-finder").addClass("ui-resizable-resizing");aR=b(".perc-finder .ui-resizable");aX=k(b(".perc-pagingbar-finder").outerHeight(),0)}function aZ(){aV()}function aQ(a0){aC();b(this).css("width","auto");if(a0){aJ(aY)}b(".perc-finder").removeClass("ui-resizable-resizing")}function aT(a0){return a0&&a0.scrollWidth>a0.clientWidth?aa:0}function aV(){var a0=b(".perc-finder")[0];aY=b(".perc-finder-body").height();aR.css("height",aY-aT(a0)-aX)}function aS(a0){if(isLibMode){a0=f.get_max_height()-100}a0=k(a0,b(".perc-finder-body").height());if(a0!==aY){aY=Math.max(a0,f.minHeight);aY=Math.min(a0,f.get_max_height());b(".perc-finder-body").css("height",aY);aJ(aY);b(".perc-finder").trigger("resize")}aU();aV();aQ()}b(".perc-finder-body").resizable({handles:"s",minHeight:f.minHeight,maxHeight:f.get_max_height(),start:aU,resize:aZ,stop:aQ});b(window).resize(function aW(){b(".perc-finder-body").resizable("option","maxHeight",f.get_max_height())});aS(k(V(),f.height));return aS});var ak=b("[view=PERC_SITE]").length||!I();if(isLibMode){ak=true}ap(ak);return{on:function(){b(".perc-finder-body").on.apply(b(".perc-finder-body"),arguments)},ACTIONS:actions,elem:av,open:ab,search:N,addPathChangedListener:T,executePathChangedListeners:aA,finderOpenInProgress:finderOpenInProgress,update_finder_height:aP,goToNewPath:an,refresh:aD,idFromItem:aF,addActionListener:J,removeActionListener:x,fireActionEvent:q,addOpenListener:S,removeOpenListener:D,getCurrentPath:M,getPathItemByPath:aO,getPathItemById:X,getParentPathItemByPath:aw,launchPagePreview:ai,launchPagePreviewByPath:aG,launchAssetPreview:B,insertAfter:aB,maxResults:am,flagChangeView:R,onDragStart:C,onDragStop:U,scrollIntoView:aM,setStateButtonsDesignNode:K,getCurrentItem:aH,setCurrentItem:ao};function aH(){return E}function ao(aQ){return E=aQ}function az(aQ,aR){_finderPathIdArray[aQ]=aR}function aF(aQ){var aR=typeof(aQ.id)=="undefined"?aQ.path.split("/")[1]:aQ.id;return ae+aR}function aD(aQ){b(".mcol-opened").each(function(){b(this).removeClass("mcol-opened")});var aS=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR&&(aS==null||aS.wrapperName!="perc-action-finder-refresh")){var aT=[];aT.push("perc-ui-component-finder");var aU=$j.PercComponentWrapper("perc-action-finder-refresh",aT);var aR=$j.PercViewReadyManager.setWrapper(aU);if(!aR){if(!aR){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}ab(aE,aQ)}function M(){return aE.slice(0)}function N(aR){ac(H);aK(H).filter(".mcol-opened").removeClass(".mcol-opened");var aQ=aB(H);b.each(aR,function(){O(aQ,P(this,j(aQ)))})}function j(aQ){return function(aS,aT){var aR=Z.acop(aT);aR.pop();G(aS,aQ,[aS.data("name")],aR,function(){})}}function au(aQ){finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);aE=["","Sites"];aD(function(){})}function ab(aS,aQ){if(finderOpenInProgress){return}finderOpenInProgress=true;q(actions.FINDER_OPEN_START,null);var aR=Q([""]);af(H,aR,aS.slice(1),[""],aQ)}function af(aT,aQ,aV,aR,aS){if(aV[aV.length-1]===""){aV.pop()}if(aV.length>0){aT.data("child",aV[0])}if(aR.length>1&&aR[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){K(true)}else{K(false)}b(".perc-finder-panel-loading").remove();Y(aT).append('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>');aQ(aU,aT);function aU(aW,aZ){if(aZ){aT.find(".mcol-direc-wrapper").empty().addClass("mcol-direc-wrapper-last").append(aZ)}else{ah(aT,aW)}if(aV.length==0){$j("#mcol-path-summary").val(aR.join("/"));finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);path_changed(aR);ac(aT);aK(aT).filter(".mcol-opened").removeClass("mcol-opened");var aY=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aY!=null){aY.handleComponentProgress("perc-ui-component-finder","complete")}if(aS){aS()}}else{var aX=aK(aT).filter(function(){if(typeof(b(this).data("name"))!="undefined"&&typeof(aV[0])!="undefined"){return b(this).data("name")==aV[0]}return false});b.PercQueuePostAJAX(function(){setTimeout(function(){G(aX,aT,aV,aR,aS)},150)})}aP();var aY=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aY!=null){aY.handleComponentProgress("perc-ui-component-finder","processing")}}}function A(){var aQ=b(this).parents("td");var aR=aQ.data("startIndex")-am;aQ.data("startIndex",aR);L(aQ,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function ax(){var aQ=b(this).parents("td");var aR=aQ.data("startIndex")+am;aQ.data("startIndex",aR);L(aQ,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function L(aR,aS){var aT=aR.data("path");var aU=aR.data("startIndex");var aQ=b.perc_utils.encodeURL(aT.join("/"))+"/?startIndex="+aU+"&maxResults="+am;b.perc_pathmanager.open_path(aQ,true,aV,au,true);function aV(aX){var aW={};b.each(b.perc_utils.convertCXFArray(aX.PagedItemList["childrenInPage"]),function(){aW[Z.extract_path_end(this.path)+"_item"]=this});aR.data("totalResult",aX.PagedItemList["childrenCount"]);aR.data("startIndex",aX.PagedItemList["startIndex"]);ah(aR,aW);if(aS){aR.find(".mcol-direc-wrapper").attr({scrollTop:aR.find(".mcol-direc-wrapper").attr("scrollHeight")})}}}function W(aR,aQ){var aV=aR.data("startIndex");var aS=aR.data("totalResult");var aT="";if(am>=aS){var aX=aS-(aV-1);aT=aX+" item"+(aX!=1?"s":"")}else{var aU=((aV-1+am>aS)?aS:(aV-1+am));aT=aV+" - "+aU+" of "+aS}var aW=b('<div class="perc-paging-finder"/>').data("name",aQ).append(b('<span class="perc-paging-text" />').text(aT)).append(b('<div class="perc-paging-finder-navigator" />').append(b('<a class="perc-paging-finder-previous" />').text("<<").click(A)).append(b('<a class="perc-paging-finder-next"/>').text(">>").click(ax))).addClass(aQ);aW=b("<div/>").append(aW).append("<div style='clear:both'/>");if((aS-(aV-1+am))>0){aW.find(".perc-paging-finder-next").removeClass("perc-hide-navigator")}else{aW.find(".perc-paging-finder-next").addClass("perc-hide-navigator")}if(aV>am){aW.find(".perc-paging-finder-previous").removeClass("perc-hide-navigator")}else{aW.find(".perc-paging-finder-previous").addClass("perc-hide-navigator")}return aW}function ah(aR,aS){aR.find(".mcol-direc-wrapper").removeClass("mcol-direc-wrapper-last");var aT={};b.each(aK(aR),function(){aT[b(this).data("name")+"_item"]=b(this)});var aQ=Z.odiff(aS,aT);b.each(Z.odiff(aT,aS),function(){if(this.is(".mcol-opened")){ac(aR)}if(!z&&!this.hasClass("ui-resizable-e")&&!this.parent().hasClass("perc-view-column-fixed")){this.remove()}});if(aR.data("path").join("/")!=""&&aR.find(".perc-paging-finder-top").size()==0){Y(aR).prepend(W(aR,"perc-paging-finder-top"))}b.each(aQ,function(){if(!isLibMode||this.path!="/Search/"){O(aR,P(this,j(aR)))}})}function G(aV,aT,aW,aR,aS){if(aV.length==0){path_changed(aR);finderOpenInProgress=false;$j("#mcol-path-summary").val(aR.join("/"));var aU=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aU!=null){aU.handleComponentProgress("perc-ui-component-finder","complete")}}else{if(aV.is(".mcol-opened")){aR.push(aW.shift());aM(aV);if(typeof(aV.data("spec"))!="undefined"){E=aV.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aV.addClass("perc_last_selected")}af(aT.next(),aV.data("loader"),aW,aR,aS)}else{ac(aT);aK(aT).filter(".mcol-opened").removeClass("mcol-opened");aV.addClass("mcol-opened");aM(aV);if(typeof(aV.data("spec"))!="undefined"){E=aV.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aV.addClass("perc_last_selected")}var aQ=aB(aT);aR.push(aW.shift());af(aQ,aV.data("loader"),aW,aR,aS)}}aP()}function P(a5,aW){var aX=10;var a6=(a5.type=="Folder")?"a":"z";var a0=Z.extract_path(a5.path);var a3=Z.choose_icon(a5.type,a5.icon,a0);var a2=b("<a />").addClass("mcol-listing").attr("alt",a5.name).attr("id",aF(a5)).append(b("<img src='"+a3+"' style='float:left'></img>")).append(b("<div unselectable='on' class='perc-finder-item-name' style='cursor: default; text-overflow : ellipsis;overflow : hidden'>"+a5.name+"</div>")).attr("title",a5.name).data("tag",a6+(a5.name+"").toLowerCase()).data("name",a0[a0.length-1]).data("spec",a5);az(a5.path,a5.id);if(a5.type){a2.addClass("perc-listing-type-"+a5.type)}if(a5.category){a2.addClass("perc-listing-category-"+a5.category)}if(a5.leaf){a2.data("loader",function(a7){aI(a5,function(a8){a7(null,a8)})})}else{a2.data("loader",Q(Z.acop(a0)))}a2.singleclick(a1);a2.dblclick(function(a7){aL(a7,a0,function(){if(a5.type=="Folder"){a1(a7)}else{al(a5)}})});if(aU(a5)){a2.draggable({helper:function(){return b(this).clone().css(("overflow","visible"),("width",this.offsetWidth)[0])},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:C,stop:U,delay:dragDelay})}if(aT(a5)){a2.droppable({tolerance:"pointer",accept:aS,over:aV,out:aR,drop:aQ})}var a4=1,aY=500;function aV(a9,bb){var a8=a4;var a7=bb.draggable.data("spec").path;var bc=a5.path;var ba=a5.type;if(!aZ(a7,bc,bb.draggable.data("spec").type,ba)){return}if(a5.accessLevel!=b.PercFolderHelper().PERMISSION_READ&&bb.draggable.data("spec").accessLevel!=b.PercFolderHelper().PERMISSION_READ){b(this).addClass("perc-finder-item-over")}if(b(this).hasClass("perc-listing-type-site")){return}setTimeout(function(){if(a4==a8){a1()}},aY)}function aR(a7,a8){b(this).removeClass("perc-finder-item-over");a4++}function aQ(a8,ba){var a7=ba.draggable.data("spec").path;var bb=ba.draggable.data("spec").type;var bc=a5.path;var a9=a5.type;b(this).removeClass("perc-finder-item-over");aR();if(a5.accessLevel==b.PercFolderHelper().PERMISSION_READ||ba.draggable.data("spec").accessLevel==b.PercFolderHelper().PERMISSION_READ){return false}if(!aZ(a7,bc,bb,a9)){return false}b.PercPathService.moveItem(a7,bc,function(bd,bh){if(bd==b.PercServiceUtils.STATUS_SUCCESS){var bf=null;if(bb=="percPage"){bf="page"}else{if(bb=="Folder"&&bc.indexOf("/Sites")==0){bf="folder"}}if(bf){b.PercRedirectHandler.createRedirect(a7,bc+ba.draggable.data("spec").name,bf).fail(function(bi){b.perc_utils.alert_dialog({title:"Redirect creation error",content:bi,okCallBack:function(){aD()}})}).done(function(){aD()})}else{aD()}}else{var bg=bh;if(bh.indexOf("item with the same name already exists in the folder")!=-1){var be="asset";if(bb=="percPage"){be="page"}else{if(bb=="Folder"){be="folder"}}bg=I18N.message("perc.ui.finder.move.error@Duplicate",[be,ba.draggable.data("spec").name,bc])}b.perc_utils.alert_dialog({title:"Error",content:bg})}})}function aZ(a9,be,a8,bc){if(bc&&(bc!="Folder"&&bc!="site")){return false}var bd=(be.match("/$")=="/")?be.substr(0,be.length-1):be;if(bd==(a9.substring(0,a9.lastIndexOf("/")))){return false}if(a8=="Folder"){var ba=a9.substr(1).split("/");if(ba[ba.length-1]==""){ba.pop()}var bd=be.substr(1).split("/");if(bd[bd.length-1]==""){bd.pop()}var a7=true;for(var bb=0;bb<ba.length;bb++){if(ba[bb]!=bd[bb]){a7=false;break}}if(a7){return false}}return true}function aU(a9){var a8=a9.type;var a7=a9.category;if(!a8){return false}if(a8=="site"){return false}if(a8=="percPage"&&a7=="LANDING_PAGE"){return false}if(a8=="Folder"&&a7=="SECTION_FOLDER"){return false}if(a8=="Folder"&&a9.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){return false}if(a8=="FSFile"){return false}if(a8=="FSFolder"){return false}return true}function aT(a9){var a8=a9.type;var a7=a9.category;if(!a8&&a9.path==b.perc_paths.ASSETS_ROOT+"/"){return true}if(!a8){return false}if(a8=="percPage"){return false}return true}function aS(ba){var a7=ba&&ba.data("spec")&&ba.data("spec").path;if(!a7){return false}var a9=a5.path;if(a5.type&&a5.type=="site"){var bc=a7.substr(1).split("/")[1];var bb=a9.substr(1).split("/")[1];if(bc!=bb){return false}}if(ba.data("spec").category&&ba.data("spec").category=="ASSET"){if(!a5.type||a5.type!="Folder"){return false}}if(a9.length>=a7.length&&b.grep(a7,function(bf,be){return bf==a9[be]}).length==0){return false}var bd=Z.extract_path(a7)[1];var a8=Z.extract_path(a9)[1];if(bd!=a8){return false}return true}return a2;function a1(ba){if(ba.currentTarget.id=="perc-finder-listing-Search"){b.Percussion.setView("search");b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon_on.png");return}b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon.png");b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");var bc=b(this);var a9=bc.children(".perc-finder-item-name");var a8=a9.find("#perc_finder_inline_field_edit");var a7=a8.length;if(a7==0){var be=b("#perc_finder_inline_field_edit");if(be.length>0){lastClickPath=a0;be.blur()}bc.focus();if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var bd=$j.PercComponentWrapper("perc-action-finder-item-clicked",["perc-ui-component-finder"]);var bb=$j.PercViewReadyManager.setWrapper(bd);if(!bb){if(!bb){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aW(a2,Z.acop(a0))}}}function C(){var aR=b(".perc-finder-table");var aQ={};aQ.left=aR.offset().left;aQ.top=aR.offset().top;aQ.width=aR.width();aQ.height=aR.height();z=true;b("body").css("overflow","visible").bind("mousemove.finderDrag",aQ,function(aS){var aU=aS.data.left+aS.data.width;var aT=aS.data.top+aS.data.height;var aW=(aS.pageX>=aS.data.left)&&(aS.pageX<=aU);var aV=(aS.pageY>=aS.data.top)&&(aS.pageY<=aT);n(aV&&aW)})}function U(){z=false;b("body").css("overflow","hidden").unbind("mousemove.finderDrag");n(true)}function aI(aQ,aS){var aR=" ";b.perc_pathmanager.getItemProperties(aQ.path,function(aW,aU){if(aW){var aY=null;var a2=null;var aX=null;var a3=aQ.category=="ASSET"||aQ.category=="RESOURCE";if(a3){aY="Asset";a2="Type";aX="<a href='#' class='perc-finder-preview-link' id='perc-asset-preview-link' title='Click for preview'>"}else{aY="Page Link";a2="Template";aX="<a href='#' class='perc-finder-preview-link' id='perc-page-preview-link' title='Click for preview'>"}var a1=aU.lastPublishedDate;if(a1==undefined||a1==null||a1==""){a1=""}else{var aZ=b.perc_utils.splitDateTime(a1);a1='<div style="padding:9px 0 0 10px;">Last Published: <span></span></div><div style="padding:3px 0 0 10px;"><span "perc_finder_details_lpdate">'+aZ.date+" "+aZ.time+"</span></div>"}var a0=b.perc_utils.splitDateTime(aU.lastModifiedDate);if(aQ.path.split("/")[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){var aV=b.perc_utils.formatFileSize(aU.size);aR='<div style="padding:10px 0 0 10px;">Properties: <span id="perc_finder_details_name">'+aU.name+'</span></div><div style="padding:10px 0 0 10px;">Size: <span id="perc_finder_details_size">'+aV+'</span></div><div style="padding:10px 0 0 10px;">Last Modified: <span></span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+a0.date+" "+a0.time+"</span></div>"}else{aR='<div style="padding:9px 0 0 10px;">'+aY+': <span id="perc_finder_details_name">'+aX+aU.name+'</a></span></div><div style="padding:9px 0 0 10px;">'+a2+': <span id="perc_finder_details_type">'+aU.type+'</span></div><div style="padding:9px 0 0 10px; width:170px;">Status: <div id="perc_finder_details_status" status="'+aU.status+'" workflow="'+aU.workflow+'" class="perc-ellipsis" title="'+aU.status+" ("+aU.workflow+')">'+aU.status+" ("+aU.workflow+')</div></div><div style="padding:9px 0 0 10px;">Last Modified: <span id="perc_finder_details_lmuser">'+aU.lastModifier+'</span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+a0.date+" "+a0.time+"</span></div>"+a1}var aT=b(aR);if(a3){aT.find("#perc-asset-preview-link").each(function(){b(this).unbind().bind("click",function(){B(aQ.id)})})}else{aT.find("#perc-page-preview-link").each(function(){b(this).unbind().bind("click",function(){ai(aQ.id)})})}aS(aT)}else{b.perc_utils.alert_dialog({title:"Error",content:aU});aD()}var a4=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(a4!=null){a4.handleComponentProgress("perc-ui-component-finder","complete")}})}function B(aS,aR){if(aR){var aQ=aS.split("-");aQ[0]=aR;aS=aQ.join("-")}b.PercAssetService.getAssetViewForAssetId(aS,function(aU,aT){if(aU==b.PercServiceUtils.STATUS_SUCCESS){var aV=window.open(aT,"percAssetPreviewWindow"+aS.replace(/\-/g,""));b(aV.document).ready(function(){if(aR){window.setTimeout(function(){aV.document.title=aV.document.title+" (Revision "+aR+")"},1000)}aV.focus()})}else{b.perc_utils.alert_dialog({title:"Error",content:aT})}})}function ai(aR,aQ){b.PercPathService.getPathItemById(aR,function(aT,aS,aW){if(aT==b.PercServiceUtils.STATUS_SUCCESS){var aV=aS.PathItem.folderPaths.slice(1)+"/"+aS.PathItem.name;if(aQ){aV+="?sys_revision="+aQ+"&percmobilepreview=true"}else{aV+="?percmobilepreview=true"}var aU=window.open(aV,"percPagePreviewWindow"+aR.replace(/\-/g,""));b(aU.document).ready(function(){if(aQ){window.setTimeout(function(){aU.document.title=aU.document.title+" (Revision "+aQ+")"},1000)}aU.focus()})}else{b.unblockUI();var aX="";if(aW=="cannot.find.item"){aX=I18N.message("perc.ui.common.error@Preview Content Deleted")}else{aX=aS}b.perc_utils.alert_dialog({title:"Error",content:aX})}})}function aG(aQ,aS,aR){b.PercPathService.getPathItemForPath(aQ,function(aU,aT){if(aU==b.PercServiceUtils.STATUS_SUCCESS){var aW=aT.PathItem.folderPaths.slice(1)+"/"+aT.PathItem.name;if(aR){aW+="?sys_revision="+aR+"&percmobilepreview=true"}else{aW+="?percmobilepreview=true"}var aV=window.open(aW,"percPagePreviewWindow"+aS.replace(/\-/g,""));b(aV.document).ready(function(){if(aR){window.setTimeout(function(){aV.document.title=aV.document.title+" (Revision "+aR+")"},1000)}aV.focus()})}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:aT})}})}function Q(aQ){return function(aS,aT){var aR=b.perc_utils.encodeURL(aQ.join("/"))+"/?startIndex=1&maxResults="+am;if(typeof(aT.data("child"))!="undefined"&&aT.data("child")!=""){aR+="&child="+b.perc_utils.encodeURL(aT.data("child"));aT.data("child","")}b.perc_pathmanager.open_path(aR,true,aU,au,true);function aU(aW){var aV={};b.each(b.perc_utils.convertCXFArray(aW.PagedItemList["childrenInPage"]),function(){aV[Z.extract_path_end(this.path)+"_item"]=this});aT.data("path",aQ);aT.data("startIndex",aW.PagedItemList["startIndex"]);aT.data("totalResult",aW.PagedItemList["childrenCount"]);aS(aV)}}}function O(aQ,aR){Y(aQ).append(aR)}function aM(aT){var aR=aT.closest(".mcol-direc-wrapper");var aS=aT.position().top+aT.outerHeight();var aQ=aR.closest("td").height();if(aS<0||aS>aQ){aR.animate({scrollTop:aS-aQ},200)}}function K(aQ){if(aQ){b.percFinderButtons().disableAllButtonsButSite()}}function aB(aR){var aQ=ad();b("#perc-finder-table-top").append(aQ);return aQ}function ac(aQ){if(z){aQ.nextAll().hide()}else{aQ.nextAll().remove()}}function ad(aR){aR=aR!==false;var aW=b('<td tabindex="-1" class="mcol-direc" />');var aQ=b('<div class="perc-resize ui-resizable" />');var aT=b('<div class="perc-resize-width mcol-direc-wrapper" />');function aV(aX,aY){aT.css("width",aQ.width()-aT.siblings().outerWidth())}function aU(aX,aY){b(".perc-finder").addClass("ui-resizable-resizing")}function aS(aX,aY){b(".perc-finder").removeClass("ui-resizable-resizing")}if(aR){aQ.resizable({handles:"e",resize:aV,start:aU,stop:aS})}return aW.append(aQ.append(aT))}function H(){var aQ=false,aR;aR=ad(aQ);aR.find(".mcol-direc-wrapper").addClass("perc-view-column-fixed");aR.find(".ui-resizable").append('<div class="ui-resizable-handle ui-resizable-e perc-resize-disabled" />');return aR}function F(aQ){var aR=b("<div class='perc-finder-table'><table><tr id='perc-finder-table-top'></tr></table></div>");aR.find("tr").append(aQ);return aR}function aK(aQ){return Y(aQ).children()}function Y(aQ){return aQ.find(".mcol-direc-wrapper")}function n(aQ){b(".mcol-listing").each(function(){b(this).droppable("option","disabled",!aQ)});b("#perc-finder-listview table").droppable("option","disabled",!aQ)}function aO(aT){if(!aT||typeof(aT)!="string"||aT.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}var aS=null;var aR=null;b.each(_finderPathIdArray,function(aU,aV){if(aU==aT){aR=aV}});if(!aR){var aQ="";if(aT[aT.length-1]!="/"){aQ=aT+"/"}else{aQ=aT.substring(0,aT.length-1)}b.each(_finderPathIdArray,function(aU,aV){if(aU==aQ){aR=aV}})}if(aR){aS=X(aR.toString())}return aS}function X(aQ){if(!aQ||typeof(aQ)!="string"||aQ.length<1){b.perc_utils.alert_dialog({title:"Error",content:"objectId must be a valid string"});return}var aR=b("#"+ae+aQ).data("spec");return aR}function aw(aQ){if(!aQ||typeof(aQ)!="string"||aQ.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}if(aQ.charAt(aQ.length-1)=="/"){aQ=aQ.substring(0,aQ.length-1)}aQ=aQ.substring(0,aQ.lastIndexOf("/"));return aO(aQ)}function T(aQ){(function(aR){path_changed=function(aS){aR(aS);aQ(aS)}})(path_changed)}function aA(aQ){path_changed(aQ)}function S(aQ){if(b.inArray(aQ,openListeners)==-1){openListeners.push(aQ)}}function D(aS){if(b.inArray(aS,openListeners)>-1){var aQ=openListeners.length;for(var aR=0;aR<aQ;aR++){if(openListeners[aR]===aS){openListeners.splice(aR,1);return}}}}function al(aS){var aQ=openListeners.length;for(var aR=0;aR<aQ;aR++){openListeners[aR](aS)}}function J(aQ){if(b.inArray(aQ,actionListeners)==-1){actionListeners.push(aQ)}}function x(aS){if(b.inArray(aS,actionListeners)>-1){var aQ=actionListeners.length;for(var aR=0;aR<aQ;aR++){if(actionListeners[aR]===aS){actionListeners.splice(aR,1);return}}}}function q(aT,aS){var aQ=actionListeners.length;for(var aR=0;aR<aQ;aR++){actionListeners[aR](aT,typeof(aS)=="object"?aS:null)}}}b.perc_finderInstance=null})(jQuery);(function(b){b.percFinderButtons=function(){var f=b.PercDirtyController;var h={createButtons:k,disableAllButtonsButSite:n};return h;function n(){b(".perc-finder-menu #perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-actions-button").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-page").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-asset").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}function k(q,A){var z=b.perc_build_delete_page_button(q,A);var I=b('<div class="perc-finder-buttonbar"/>');I.append(z);var B=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";if(!B){var G=b.perc_build_new_page_button(q,A);I.append(G);var C=b.PercNewAssetDialog.init(q,A);I.append(C)}var y=b.perc_build_new_folder_button(q,A);I.append(y);if(!B){var E='<a id="perc-finder-new-site" class="perc-form ui-state-default perc-font-icon icon-sitemap" href="#" title="Click to create new Site"></a>';I.append(E)}var D=b.perc_build_preview_button(q,A);I.append(D);var H=b.perc_build_actions_button(q,A);I.append(H);b(".perc-finder-menu ").append(I);function x(J){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_DESIGN,J,null,null,null,b.perc_paths.SITES_ROOT+"/"+J,null,null)}$newSiteDialog=b.perc_createNewSiteDialog(x);b("#perc-finder-new-site").unbind("click").click(e);q.addPathChangedListener(j);var F={"delete":z,newPage:G,newFolder:y,newAsset:C,newSite:E,launchPreview:D,launchAction:H};return F}function e(){f.confirmIfDirty(function(){$newSiteDialog.perc_wizard("open");b(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.perc-dialog.perc-dialog-corner-all.ui-draggable").find("div").css("z-index","")})}function j(){if(!b.PercNavigationManager.isAdmin()){b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}}}})(jQuery);(function(b){b.perc_upload_theme_file_dialog={open:e};function e(f){var D=n();var x=window.location.protocol+"//"+window.location.host+"/cm";var z={};buttonSave={id:"perc-addItem-dialog-save"};buttonCancel={id:"perc-addItem-dialog-cancel",click:function(){y.remove()}};z.Save=buttonSave;z.Cancel=buttonCancel;var y=E();function E(){var F=b.perc_paths.WEBRESOURCESMGT_FILE_UPLOAD;var G='<div id=\'perc-design-file-upload\'><form id="perc-theme-file-upload-form" name="perc-theme-file-upload-form" enctype="multipart/form-data" method="post" action="'+F+'"><label for="upload-theme-file-attachment">File name:</label><br><input type="hidden" name="upload-theme-file-path" /><input type="file" size="50" name="upload-theme-file-attachment" /></form><div id="perc-theme-file-upload-response" style="display:none"></div></div>';var H=b(G).perc_dialog({title:I18N.message("perc.ui.uploadtheme.dialog.title@Upload File"),id:"perc-upload-theme-file-dialog",width:686,resizable:false,modal:true,closeOnEscape:true,percButtons:z,open:function(){q();b("#perc-theme-file-upload-form").ajaxForm({target:"#perc-theme-file-upload-response",success:k,error:h,iframe:true})}});return b(H)}function q(){var H=window.location.protocol+"//"+window.location.host+"/cm";var G=b("#perc-addItem-dialog-save");var I="url("+H+"/images/images/buttonSave.png)";var F="url("+H+"/images/images/buttonSaveOver.png)";G.css("background-image",I).hover(function(){b(this).css("background-image",F)},function(){b(this).css("background-image",I)}).unbind("click").click(j)}function j(){if(C()==false){return false}A();return false}function C(){var F=y.find("input:file");var G=y.find("label.perc_field_error");if(F.val()==""){if(G.length==0){F.after('<label class="perc_field_error" for="upload-theme-file-attachment" style="display: block;">'+I18N.message("perc.ui.uploadtheme.form.text@Please select a file.")+"</label>")}return false}else{G.remove();return true}}function A(){var G=y.find("input:file").val().replace(/.+[\\\/]/,"");G=b.perc_utils.encodeURL(G);var F=b.perc_utils.encodePathArray(D);b.PercWebResourcesService.validateFileUpload(F,G,function(I,H){if(I==b.PercServiceUtils.STATUS_SUCCESS){if(H.data==b.PercServiceUtils.STATUS_SUCCESS){B()}else{var J={id:"perc-design-file-upload-file-exist-warning",title:I18N.message("perc.ui.uploadtheme.dialog.title@Warning"),question:H.data,yes:"OK",success:B};b.perc_utils.confirm_dialog(J)}}else{var J={id:"perc-design-file-upload-file-exist-error",title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:b.PercServiceUtils.extractDefaultErrorMessage(H.request)};b.perc_utils.alert_dialog(J)}})}function B(){b.PercBlockUI();var G=y.find("input:file").val().replace(/.+[\\\/]/,"");G=b.perc_utils.encodeURL(G);var F=b.perc_utils.encodePathArray(D);y.find('input[name="upload-theme-file-path"]').val("/"+F.slice(3).join("/")+"/"+G);y.find("#perc-theme-file-upload-form").submit()}function k(){var F=b("#perc-theme-file-upload-response").text();if(F==""){b.unblockUI();y.remove();f.refresh(function(){})}else{var G={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:F};b.perc_utils.alert_dialog(G);b.unblockUI()}}function h(H,J,I){var F="There was an unknown error";if(J=="timeout"){F="The operation is talking too much time"}var G={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:F};b.perc_utils.alert_dialog(G);b.unblockUI()}function n(){var G=f.getCurrentPath();F=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(F==undefined){var F=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened").data("spec")}if(F!=undefined&&F.type=="FSFile"&&F.leaf){G.pop()}return G}}})(jQuery);(function(e){e.PercDeleteItemHelper={extractDeleteErrorMessage:b};function b(x,h,B){var j,A,q=false,n=e.PercServiceUtils.extractDefaultErrorMessage(x),C="perc.ui.delete"+B+"dialog.warning",f="perc_delete_"+B+"_force",k=x.responseText,y=k.match(/User: (.*) is editing the item. Failed to delete item./);if(y){j="perc-finder-delete-error-open";var E=B.charAt(0).toUpperCase();var F=B.substr(1);var D=E+F+": ";var z=y[1].split(" ");A=D+h+"<br/><br/>"+I18N.message(C+"@Open",[z[0]])}else{if(k.indexOf(B+".deleteNotAuthorized")>0){j="perc-finder-delete-auth";A=I18N.message(C+"@Not Authorized",[h])}else{if(k.indexOf(B+".deleteTemplates")>0){j="perc-finder-delete-templates";A=I18N.message(C+"@Templates",[h])}else{if(k.indexOf(B+".deleteApprovedPages")>0){j="perc-finder-delete-approved";A=I18N.message(C+"@Approved Pages",[h])+"<br/><br/><input type='checkbox' id='"+f+"' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message(C+"@Approved Pages Checkbox")+"</label>";q=true}else{if(n!=""){j="perc-finder-delete-error-open";A=n}else{j="perc-finder-delete-error-open";A=I18N.message(C+"@GenericText")}}}}}var G={dialogid:j,content:A,canForceDelete:q,chkBoxId:f};return G}})(jQuery);(function(b){fixIframeHeight=function(){b("#perc-widget-library").width(b("#tabs-3").width()-45);var j=b("#frame");if(j.length==0){return}var n=b(".perc-main");var f=b("#bottom");var k=f.position().top;n.height(k);var e,h;if(window.innerHeight){e=window.innerHeight;h=window.innerWidth}else{if(document.documentElement.clientHeight){e=document.documentElement.clientHeight-4;h=document.documentElement.clientWidth}}j.height(e-k);j.width(h)};fixTemplateHeight=function(){fixBottomHeight()};fixBottomHeight=function(){var k=b.PercNavigationManager.getView();var e;var h;if(k==b.PercNavigationManager.VIEW_DESIGN){e=b(".perc-templates-layout");h=e.position().top+47}else{if(k==b.PercNavigationManager.VIEW_WORKFLOW){e=b(".perc-whitebg");h=b("#tabs").position().top+90;b(".perc-finder-fix").css("padding-bottom",0)}else{if(k==b.PercNavigationManager.VIEW_PUBLISH){e=b(".perc-whitebg");if(b("#tabs").length){h=b("#tabs").position().top+90}else{if(b("#perc-pub-inline-help").length){h=b("#perc-pub-inline-help").position().top+90}}}else{if(k==b.PercNavigationManager.VIEW_DASHBOARD){e=b(".perc-body-background");h=b(".perc-body-background").position().top}else{return}}}}if(e.css("display")!="none"){var f,j;if(window.innerHeight){f=window.innerHeight;j=window.innerWidth}else{if(document.documentElement.clientHeight){f=document.documentElement.clientHeight-4;j=document.documentElement.clientWidth}}e.height(f-h)}};fixHeight=function(){var h=b.PercNavigationManager.getView();if(h==b.PercNavigationManager.VIEW_SITE_ARCH){var f=b(".perc-main");if(f.length>0){var e=f.height();b("#perc_sa_container").css("margin-top",e+3)}}b(".perc-finder").width("auto")}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(k){var e=16;var A=5;var q;var y;k.fn.PercDataTable=function(E){if(E.percVisibleColumns&&E.aoColumns){var L=[];k.each(E.percVisibleColumns,function(P,Q){L.push(E.aoColumns[Q])});E.aoColumns=L}for(var J=0;J<E.aoColumns.length;J++){var D=E.aoColumns[J];D.sSortDataType="perc-type-"+D.sType}E=k.extend(true,{},j,E);y=E;q=h(E);k(this).append(q);q.dataTable(E).data("config",E);if(E.percExpandParentFrameVertically){var M=q.parents(".dataTables_wrapper").outerHeight()+e;var C=q.parents(".dataTables_wrapper").outerWidth()+e;var N=f();var H=M;var K=E.additionalIframeHeight?E.additionalIframeHeight:0;if(E.iDisplayLength){var G=q.find("thead").height();var B=k(q.find("tbody tr")[0]).height();var I=k(".dataTables_paginate").height();var O=G+B*E.iDisplayLength+I+K;H=O}if(E.percStayBelow){var F=k(E.percStayBelow);H+=F.offset().top+F.outerHeight()+e}k(N).height(H+A)}return q};function z(){var C=k(this);var B=C.data("config");if(B&&B.percTableRedrawCallback){if(typeof(B.percTableRedrawCallback)==="object"){k.each(B.percTableRedrawCallback,function(D,E){this(C)})}else{if(typeof(B.percTableRedrawCallback)==="function"){B.percTableRedrawCallback(C)}}}setTimeout(function(){var E=C.parent().children(".dataTables_paginate.paging_full_numbers");E.find(".perc-datatable-paginator-pages-label").removeClass("paginate_button");var D=E.find("span span.paginate_button, span span.paginate_active");k.each(D,function(F,G){k(G).attr("perc-page",F+1)});if(!D||D.length<2){E.hide()}else{E.show()}E.css("position","absolute")},1)}function f(){var C=parent.document.getElementsByTagName("IFRAME");for(var B=0;B<C.length;B++){if(C[B].contentWindow==window){return C[B]}}}function x(K,E,D,N,J){if(y.bPaginate){var H=y;var F=H.iDisplayLength;var I=J.length;var G=Math.ceil(I/F);var C=Math.ceil(N/F);var B=C+" of "+G+(G==1?" Page":" Pages");if(G==0){B=""}var M=k(".perc-datatables-info");if(M.length>0){M.html(B)}else{k("<div class='datatables_info perc-datatables-info'>"+B+"</div>").appendTo("body")}var L=k(".perc-footer-bar");if(L.length==0){k("<div class='perc-footer-bar'>&nbsp;</div>").appendTo("body")}}}var j={percExpandParentFrameVertically:true,additionalIframeHeight:0,percColumnWidths:["*","123"],percRowDblclickCallback:k.PercOpenPage,showPreviewBtnOnHover:false,iDisplayLength:5,bFilter:false,bAutoWidth:false,bPaginate:true,bSort:true,sPaginationType:"full_numbers",bLengthChange:false,bInfo:true,fnDrawCallback:z,fnFooterCallback:x,oLanguage:{sZeroRecords:"No Pages Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};function h(C){var D=C.percData;var B=C.percHeaders;var H=k("<table class='perc-datatable' style='table-layout : fixed' cellpadding='0' cellspacing='0'>");var E=k("<tbody>");var G=C.aoColumns;k.each(D,function(P,K){var O=K;var M="";if(P==0){M="perc-first"}else{if(P==D.length-1){M="perc-last"}}var L=k("<tr class='perc-datatable-row perc-index-"+P+" "+M+"'>");if(O.rowData){L.data("percRowData",O.rowData)}if(C.percRowClickCallback){if(O.rowData){L.click(O.rowData,C.percRowClickCallback)}else{L.click(C.percRowClickCallback)}}if(C.showPreviewBtnOnHover){L.mouseover(function(){k(this).css("background-color","#CAF589");k(this).find(".perc-preview-col").show()}).mouseout(function(){k(this).css("background-color","white");k(this).find(".perc-preview-col").hide()})}if(C.percRowDblclickCallback){if(O.rowData){L.dblclick(O.rowData,C.percRowDblclickCallback)}else{L.dblclick(C.percRowDblclickCallback)}}var N=0;k.each(O.rowContent,function(ab,X){if(C.percVisibleColumns){if(k.inArray(ab,C.percVisibleColumns)==-1){return true}}var T=G[N++];var Q=T.sType;var S="perc-type-"+Q;var V=X;var Z="";if(ab==0){Z="perc-first"}else{if(ab==O.rowContent.length-1){Z="perc-last"}else{Z="perc-middle"}}var R="";if(C.percHeaderClasses&&C.percHeaderClasses[ab]){R="perc-"+C.percHeaderClasses[ab].replace(/ /g,"-").toLowerCase()}else{R="perc-"+C.percHeaders[ab].replace(/ /g,"-").toLowerCase()}var U=k("<td class='"+S+" "+R+" perc-datatable-column perc-ellipsis perc-index-"+ab+" perc-cell-"+ab+"-"+P+" "+Z+"' valign='top'>");if(typeof V=="object"){var Y="";var aa="";var W;if(k.isArray(V)){k.each(V,function(ae,ac){if(!ac){ac="&nbsp;"}var ad=ac;var af="";if(ae==0){af="perc-first"}else{if(ae==V.length-1){af="perc-last"}else{af="perc-middle"}}if(typeof ad=="string"){Y=ad}else{ad=k.extend({content:"",title:""},ad);Y=ad.content;aa=ad.title}if(aa=="&nbsp;"){aa=""}W=k("<div style='width:100%' class='perc-datatable-columnrow perc-ellipsis perc-index-"+ae+" "+af+"'>");if(ad.callback){var ag=k("<span>").attr("title",aa).append(Y);ag.css("cursor","pointer").addClass("perc-callback");W.append(ag);if(O.rowData){ag.click(O.rowData,ad.callback)}else{ag.click(ad.callback)}}else{W.attr("title",aa).append(Y)}U.append(W)})}else{var aa=X.title;var Y=X.content;var W=k("<div title='"+aa+"' class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(Y);U.append(W)}}else{var W=k("<div class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(X);U.append(W)}L.append(U)});E.append(L)});H.append(E);if(B){var F=k("<thead>");var J=k("<tr class='perc-datatable-head-row'>");var I=0;k.each(B,function(S,Q){if(C.percVisibleColumns){if(k.inArray(S,C.percVisibleColumns)==-1){return true}}var O=G[I++];var K=O.sType;var N="perc-type-"+K;var M="";if(C.percColumnWidths){if(S<C.percColumnWidths.length-1){M=C.percColumnWidths[S];if(M=="*"){M=""}}else{M=C.percColumnWidths[C.percColumnWidths.length-1]}}if(k.browser.msie||k.browser.webkit){M=parseInt(M)+20}M+="px";var L="";if(C.percHeaderClasses&&C.percHeaderClasses[S]){L="perc-"+C.percHeaderClasses[S].replace(/ /g,"-").toLowerCase()}else{L="perc-"+C.percHeaders[S].replace(/ /g,"-").toLowerCase()}var T="";if(S==0){T="perc-first"}else{if(S==B.length-1){T="perc-last"}else{T="perc-middle"}}var U=k("<th class='"+N+" "+L+" perc-datatable-head-column perc-index-"+S+" "+T+"'>").css("width",M);var R=k("<span class='perc-sort' style='padding: 0px 10px 0px 0px; border-bottom:none'>&nbsp;</span>");if(typeof(C.sortFunction)!="undefined"&&!C.bSort){var V=C.percColNames[S];var P={};P.colName=V;P.sortFunction=C.sortFunction;U.click(P,n);if(k.browser.mozilla){U.css("MozUserSelect","none")}else{if(k.browser.msie){U.bind("selectstart",function(){return false})}}if(V==C.sortColumn){U.addClass("sorting_"+C.sortOrder)}}U.append(Q);U.append(R);J.append(U)});F.append(J);H.append(F)}if(C.bSort){b()}return H}function n(E){var D=k(this);var C=E.data.colName;var F=E.data.sortFunction;D.siblings().removeClass("sorting_asc").removeClass("sorting_desc");var B="asc";if(D.is(".sorting_asc")){D.removeClass("sorting_asc").addClass("sorting_desc");B="desc"}else{if(D.is(".sorting_desc")){D.removeClass("sorting_desc").addClass("sorting_asc")}else{D.addClass("sorting_asc")}}F(C,B)}function b(){k.fn.dataTableExt.afnSortData["perc-type-string"]=function(E,C){var B=[];var D;k("td:eq("+C+")",E.oApi._fnGetTrNodes(E)).each(function(){D=k(this).text();B.push(D)});return B};k.fn.dataTableExt.afnSortData["perc-type-numeric"]=k.fn.dataTableExt.afnSortData["perc-type-string"];k.fn.dataTableExt.afnSortData["perc-type-date"]=function(D,C){var B=[];k("td:eq("+C+")",D.oApi._fnGetTrNodes(D)).each(function(){var H=Array("","");var F=k(this).find("div");H[0]=k(F[0]).text();H[1]=k(F[1]).text();var G=H.join(" ");var E=new Date(G);B.push(E)});return B}}})(jQuery);(function(n){var j;var h;var f;var b=null;var k;var e;n.fn.PercFixedTableHeader=function(q){n(".perc-fixedtableheader").remove();e=q;k=n(this);var y=k.css("z-index");if(y=="auto"){y="1000"}if(n.browser.msie||n.browser.chrome||n.browser.safari){var x="-3px"}else{var x="1px"}b=n(this).clone(true);b.find("tbody").remove();b.css("position","relative").css("margin-bottom","-30px").css("top",x).css("left","1px").css("z-index",y+1).css("background","white").attr("cellpadding","0").addClass("perc-fixedtableheader");e.container.prepend(b);remove=q.remove;if(remove){remove.bind("click",function(){b.remove()})}j=q.resizable;if(j){j.bind("resize",function(){z()})}n(window).resize(function(){z()});function z(){b.css("width",k.css("width"))}z()}})(jQuery);(function(j){var f={};var b=function(){};j.fn.PercFinderListView=function(A,G){var M=j(this);var L;if(j.isFunction(A.folderDblClickCallback)){b=A.folderDblClickCallback}if(G.PagedItemList!=undefined){L=j.perc_utils.convertCXFArray(G.PagedItemList["childrenInPage"]);M.data("totalResult",G.PagedItemList["childrenCount"]);M.data("startIndex",G.PagedItemList["startIndex"])}else{L=j.perc_utils.convertCXFArray(G.PathItem)}var F=x(A.displayFormat,L);var H=F.percData;var I=F.percTypes;if(H.length>0){var z=[];for(s=0;s<I.length;s++){z.push("&nbsp;")}H.push({rowContent:z})}var E=F.percHeaders;var B=F.percColNames;var C=F.percWidths;var D=C;var K={percRowClickCallback:q,percRowDblclickCallback:k,percColumnWidths:D,percData:H,percHeaders:E,aoColumns:I};K.oLanguage={sZeroRecords:"No Files Found"};K.bPaginate=false;K.bInfo=false;K.bSort=false;K.oLanguage.sZeroRecords="No Items Found";K.sortFunction=A.sortFunction;K.sortColumn=A.sortColumn;K.sortOrder=A.sortOrder;K.percColNames=B;M.empty();M.PercDataTable(K);var J=j(M.find("table"));var y=j(J.parents(".mcol-direc"));J.PercFixedTableHeader({resizable:j(".perc-finder-body.ui-resizable"),remove:j("#perc-finder-choose-columnview"),container:y});if(typeof(A.callback)!="undefined"){A.callback(M)}h(J);j(".perc-datatable-row:last").unbind()};function h(z){var y=z.find(".perc-datatable-row");j.map(y,function(B,A){if(j(B).data("percRowData")!=undefined&&j(B).data("percRowData").category=="ASSET"){j(B).css("cursor","default");j(B).draggable({helper:function(){return j("<div />").html(j(this).find(".perc-datatable-columnrow").html()).addClass("dataTables_wrapper").css("color","white")},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:j.perc_finder().onDragStart,stop:j.perc_finder().onDragStop,delay:j.perc_finder().dragDelay})}});j(z).droppable({tolerance:"pointer",accept:false,over:function(){},out:function(){},drop:function(){}})}function q(z){j(".perc-datatable-row").removeClass("perc-datatable-row-highlighted");j(this).addClass("perc-datatable-row-highlighted");var y=j.merge([""],n(z));j("#mcol-path-summary").val(y.join("/"));if(typeof(z.data.id)!="undefined"){j.perc_finder().setCurrentItem(z.data)}j.perc_finder().flagChangeView=false;j.perc_finder().executePathChangedListeners(y);j.perc_finder().flagChangeView=true}function n(z){if(!z.data){return""}var y=z.data.folderPaths;if(z.data.type=="site"){y=z.data.folderPaths}else{y=z.data.folderPaths+"/"+z.data.name}return y.replace("Folders/$System$/","").substring(2,y.length).split("/")}function k(y){if(y.data.type=="Folder"||y.data.type=="FSFolder"){b("/"+n(y).join("/"))}else{j.PercNavigationManager.openPathItem("/"+n(y).join("/"))}}function x(X,F){var C=[];var Q=[];var O=[];var N=[];var R=[];var z=X.SimpleDisplayFormat.columns;var V,H;for(H=0;H<F.length;H++){var G=j.perc_utils.convertCXFArray(F[H].columnData.column);var K=e(G,"@name","$");var T=[];var U=j.perc_utils.choose_icon(F[H].type,F[H].icon,n({data:F[H]}));var P='<img style="float:left;" src="'+U+'" />';for(V=0;V<z.length;V++){var A=z[V];var I=A.name;var J=A.label;var Y=K[I];if(A.type.toLowerCase()=="date"&&Y!=null&&Y!=""){var S=j.perc_utils.splitDateTime(Y);var L=S.date+", "+S.time;Y="<div title='"+L+"'>"+S.date+"</div>"}if(A.type.toLowerCase()=="number"&&Y!=null&&Y!=""){Y='<div title = "'+Y+' Bytes" style="text-align:right;">'+j.perc_utils.formatFileSize(Y)+"</div>"}if(A.type.toLowerCase()=="text"&&Y!=null&&Y!=""&&V!=0){Y='<span title = "'+Y+'" style="font-weight: normal;">'+Y+"</span>"}if(Y==null||Y==""){Y="&nbsp;"}if(V==0&&P!=""){var E="",M,y=F[H];if(j.isArray(y.folderPaths)){M=y.folderPaths[0]}else{M=y.folderPaths}if(F[H].type=="site"){E=M.replace("/"+j.perc_paths.SITES_ROOT,"")}else{E=M.replace("/"+j.perc_paths.SITES_ROOT,"").replace("/"+j.perc_paths.DESIGN_ROOT,"").replace("//Folders/$System$"+j.perc_paths.ASSETS_ROOT,"")+"/"+F[H].name}Y=P+'<span title = "'+E+'" style="padding-left:4px;">'+Y+"</span>"}T.push(Y)}var D={rowContent:T,rowData:F[H]};C.push(D)}for(V=0;V<z.length;V++){var A=z[V];O.push(A.name);N.push(A.label);R.push((A.width==-1?"*":(j.browser.msie?A.width-20:A.width)));var B=A.type.toLowerCase();if(B=="text"){B="string"}if(V==0){B="html"}Q.push({sType:B})}var W={percData:C,percColNames:O,percHeaders:N,percTypes:Q,percWidths:R};return W}function e(z,A,B){var F;var E={};for(F=0;F<z.length;F++){var D=z[F];var y=D[A];var C=D[B];E[y]=C}return E}})(jQuery);(function(e){e.fn.PercScrollingTemplateBrowser=function(f){var x=e("<div class='perc-scrollable'>");var q=e("<div class='perc-items'>");x.append(q);var h=e("<a style = 'margin:50px 0px' class='prevPage browse left' ></a>");var k=e("<a style = 'margin:50px 0px' class='nextPage browse right'></a>");var y=e("<div style='clear:both'>");e(this).append(h).append(x).append(k).append(y);if(f.width){x.width(f.width)}var j=null;if(f.widgetDefId){j=f.widgetDefId}var n=f.siteName;var A=f.hiddenFieldId?f.hiddenFieldId:"perc-select-template";var z=function(B,D){if(D.TemplateSummary.length==0){var C=e("<div class='perc-empty'>No Templates Found</div>").css("margin-top","70px");x.css("text-align","center").css("background","white").append(C)}else{e.each(D.TemplateSummary,function(E,F){q.append(b(this,f));q.find(".item .item-id").hide();q.find(".item").bind("click",function(){var G=e(this).find(".item-id").text();e("#"+f.hiddenFieldId).val(G);q.find(".item").removeClass("perc-selected-item");e(this).addClass("perc-selected-item")});$firstItem=q.find(".item:first");e("#"+f.hiddenFieldId).val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});x.scrollable({items:q,size:4,keyboard:true})}};if(!f.isBase){e.PercSiteService.getTemplates(n,z,j)}else{e.PercSiteService.getBaseTemplates(f.baseType,z)}return e(this)};function b(k,h){var f="<div for=\"@ITEM_ID@\" class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";var n=k.name;var j=k.id;if(h.isBase){n=n.replace("perc."+h.baseType+".","");j=k.name}return f.replace(/@IMG_SRC@/,k.imageThumbPath).replace(/@ITEM_ID@/g,j).replace(/@ITEM_LABEL@/,n).replace(/@ITEM_TT@/g,n)}})(jQuery);(function($,P){P.PercFinderView=function(){var percFinderListviewContainerInitialHeight;var percFinderListviewContainer;var PERC_FINDER_VIEW_COLUMN="column";var PERC_FINDER_VIEW_LIST="list";var PERC_FINDER_SEARCH_RESULTS="search";var PERC_FINDER_SEARCH_TYPE_MYPAGES="MyPages";var PERC_FINDER_RESULT="result";var MAX_RESULTS;var utils=$.perc_utils;var currentContentPath;var currentContentId;var finderButtons;var dirty=false;var finder=$.perc_finder();var contentId=null;var pageView=P.pageView();var dialogFlag=true;this.setView=setView;var chooseColumnView=$("#perc-finder-choose-columnview").click(setViewColumn);var chooseListView=$("#perc-finder-choose-listview").click(setViewList);var chooseSearchView=$("#perc-finder-search-submit").click(setViewSearch);var chooseMyPagesView=$("#perc-finder-choose-mypagesview").click(setMyPagesView);setColumnViewButtonOn();var dirtyController=$.PercDirtyController;var percFinderViewAPI={reload:function(){},getContentId:function(){return currentContentId},clear:function(){$("#frame").each(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},confirm_if_dirty:confirm_if_dirty,save:save};this.disableSearchBar=function disableSearchBar(disable){if(disable){$("#perc-finder-item-search").attr("disabled",true);$("#perc-finder-item-search").val("");chooseSearchView.unbind("click")}else{$("#perc-finder-item-search").removeAttr("disabled");chooseSearchView.click(setViewSearch)}};this.disableListViewButton=function disableListViewButton(disable){if(disable){chooseListView.unbind("click")}else{chooseListView.click(setViewList)}};var currentFinderView=PERC_FINDER_VIEW_COLUMN;this.getCurrentFinderView=function(){return currentFinderView};this.PERC_FINDER_VIEW_COLUMN=PERC_FINDER_VIEW_COLUMN;this.PERC_FINDER_VIEW_LIST=PERC_FINDER_VIEW_LIST;this.PERC_FINDER_SEARCH_RESULTS=PERC_FINDER_SEARCH_RESULTS;this.PERC_FINDER_RESULT=PERC_FINDER_RESULT;var pagingBar="";$("#perc-finder-item-search").focus(function(){$(this).css("color","#FFFFFF").css("background-color","#5a5d69")}).bind("keyup",function(evt){if(evt.keyCode==13){$("#perc-finder-item-search").blur();performSearch();$("#perc-finder-item-search").focus();evt.preventDefault();evt.stopPropagation()}if(evt.keyCode==27||evt.keyCode==9){$("#perc-finder-item-search").css("color","#CCCCCC").css("background-color","#41434F").blur();evt.preventDefault();evt.stopPropagation()}$(".perc-finder-message").fadeOut(function(){$(this).empty()})});function pagePrevious(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")-MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function pageNext(newStartIndex){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")+MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function refreshView(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");$(".perc-fixedtableheader").remove();percFinderListviewContainer.empty();percFinderListviewContainer.css("text-align","left");percFinderListviewContainer.append($('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>'));var column=percFinderListviewContainer.data("sortColumn");var order=percFinderListviewContainer.data("sortOrder");var startIndex=percFinderListviewContainer.data("startIndex");var callbackFunction=percFinderListviewContainer.data("callback");var config={startIndex:startIndex,maxResults:MAX_RESULTS,callback:callbackFunction,sortFunction:sortView,sortColumn:column,sortOrder:order};percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height();if(currentFinderView===PERC_FINDER_VIEW_LIST){config.path=percFinderListviewContainer.data("path");fillListView(config,function(){expandTableBorders(true)})}else{if(currentFinderView===PERC_FINDER_SEARCH_RESULTS||currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES){var searchQuery=$("#perc-finder-listview").data("searchQuery");var searchType=percFinderListviewContainer.data("searchType");config.searchCriteria={SearchCriteria:{query:searchQuery,searchType:searchType,startIndex:startIndex,maxResults:MAX_RESULTS,sortColumn:column,sortOrder:order}};fillResultView(config,function(){expandTableBorders(true)})}}}function expandTableBorders(expand){if(percFinderListviewContainer){var finder=$(".perc-finder");var lastRow=percFinderListviewContainer.find("tr:last");lastRowHeight=lastRow.height();var containerElement=$("#perc-finder-listview table:first");var containerHeight=containerElement.height();var fixedColumnHeight=$(".perc-view-column-fixed").height();var differenceValue=fixedColumnHeight-containerHeight;if(expand){if(lastRowHeight>0){lastRow.height(lastRowHeight+differenceValue)}}else{lastRow.height(20)}}}function fillPagingBar(dir){var startIndex=dir.data("startIndex");var totalResult=dir.data("totalResult");var endIndex=((startIndex-1+MAX_RESULTS>totalResult)?totalResult:(startIndex-1+MAX_RESULTS));var itemText="0 Items";if(totalResult!=0){itemText=startIndex+" - "+endIndex+" of "+totalResult+" Total"}pagingBar.find(".perc-pagingbar-items").text(itemText);if((totalResult-(startIndex-1+MAX_RESULTS))>0){pagingBar.find(".perc-pagingbar-next").removeClass("perc-disabled-navigator").unbind("click").click(pageNext)}else{pagingBar.find(".perc-pagingbar-next").addClass("perc-disabled-navigator").unbind("click")}if(startIndex>MAX_RESULTS){pagingBar.find(".perc-pagingbar-previous").removeClass("perc-disabled-navigator").unbind("click").click(pagePrevious)}else{pagingBar.find(".perc-pagingbar-previous").addClass("perc-disabled-navigator").unbind("click")}}function showPagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){var finderDiv=$(".perc-finder");pagingBar=$('<div class="perc-pagingbar-finder"/>').append($('<div class="perc-pagingbar-navigator" />').append($('<a class="perc-pagingbar-previous" />').attr("title","Previous")).append($('<a class="perc-pagingbar-next"/>').attr("title","Next"))).append($('<span class="perc-pagingbar-items" />'));fillPagingBar(dir);var newHeight=finderDiv.height();finderDiv.append(pagingBar);fixIframeHeight();fixHeight()}var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}finder.update_finder_height()}function updatePagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){fillPagingBar(dir)}}function addListViewContainer(){var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");$(allColumns[0]).siblings().hide();var newColumn=$.perc_finderInstance.insertAfter(lastColumn);newColumn.css("width","100%");var newColumnContent=newColumn.find(".mcol-direc-wrapper");newColumnContent.find(".ui-resizable-handle").remove();percFinderListviewContainer=$("<div id='perc-finder-listview'>");newColumnContent.css("width","100%");newColumnContent.append(percFinderListviewContainer);return percFinderListviewContainer}function fillListView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercPathService.getContentForPath(displayFormat.SimpleDisplayFormat,config,function(status,content){if(status){percFinderListviewContainer.PercFinderListView(config,content);var newPath=$.trim($("#mcol-path-summary").val());$.PercPathService.getPathItemForPath(newPath,function(status,content){if(content.PathItem.type=="Folder"||content.PathItem.type=="FSFolder"){$(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");if(callback){callback()}return}var index=newPath.lastIndexOf("/");newPath=newPath.substring(index+1);$("#perc-finder-listview td.perc-first").each(function(){var self=$(this);var selectedText=self.find("span").text();if(newPath==selectedText){self.parent().click();finder.scrollIntoView(self)}});if(callback){callback()}})}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height()})})}function fillResultView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.searchCriteria.SearchCriteria.formatId=displayFormat.SimpleDisplayFormat.id;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercSearchService.getSearchResult(config.searchCriteria,function(status,result){if(status){$("#perc-finder-listview").PercFinderListView(config,result);if(callback){callback()}}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}})})}function performSearch(){if(currentFinderView===PERC_FINDER_SEARCH_RESULTS){var encodedSearchText=encodeURIComponent($.trim($("#perc-finder-item-search").val()));var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("searchQuery",encodedSearchText);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}else{setView(PERC_FINDER_SEARCH_RESULTS)}setSearchViewButtonsStates();$("#mcol-path-summary").val("")}function sortView(column,order){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn",column);percFinderListviewContainer.data("sortOrder",order);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function setViewColumn(){setView(PERC_FINDER_VIEW_COLUMN)}function setViewList(){setView(PERC_FINDER_VIEW_LIST)}function setViewSearch(){performSearch()}function setMyPagesView(){setView(PERC_FINDER_SEARCH_TYPE_MYPAGES,true)}function set_view_options_button_state(view){$(".perc-finder-view-options a").removeClass("ui-active");switch(view){case PERC_FINDER_VIEW_COLUMN:chooseColumnView.addClass("ui-active");break;case PERC_FINDER_VIEW_LIST:case PERC_FINDER_SEARCH_RESULTS:chooseListView.addClass("ui-active");break;case PERC_FINDER_SEARCH_TYPE_MYPAGES:chooseMyPagesView.addClass("ui-active");break;default:chooseColumnView.addClass("ui-active")}}function setView(view,forceSet){var force=forceSet?true:false;MAX_RESULTS=$.perc_finderInstance.maxResults;set_view_options_button_state(view);if(view===currentFinderView&&!force){return}if((currentFinderView===PERC_FINDER_SEARCH_RESULTS&&view===PERC_FINDER_VIEW_LIST)||(currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES&&view===PERC_FINDER_VIEW_LIST)){return}currentFinderView=view;var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");allColumns.find("#perc-finder-listview").parents("td").remove();var finderDiv=$(".perc-finder");if(pagingBar){pagingBar.remove();fixIframeHeight();fixHeight();pagingBar=null;var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}}$(".perc-finder-body").attr("perc-view",view);if(view===PERC_FINDER_VIEW_COLUMN){allColumns.show();finder.open(finder.getCurrentPath());setColumnViewButtonOn()}else{if(view===PERC_FINDER_VIEW_LIST){percFinderListviewContainer=addListViewContainer();var contentPath=lastColumn.data("path");if(typeof(contentPath)=="undefined"){lastColumn=lastColumn.prev();contentPath=lastColumn.data("path").join("/")}else{contentPath=contentPath.join("/")}_updateListViewContainerData(contentPath,lastColumn.data("startIndex"),showPagingBar);setListViewButtonOn()}else{if(view===PERC_FINDER_SEARCH_RESULTS||view===PERC_FINDER_SEARCH_TYPE_MYPAGES){$(".perc-view-column-fixed a").removeClass("mcol-opened");$("#perc-finder-listing-Search").addClass("mcol-opened");var percFinderListviewContainer=addListViewContainer();var searchQuery=encodeURIComponent($.trim($("#perc-finder-item-search").val()));if(searchQuery==null){searchQuery==""}percFinderListviewContainer.data("searchQuery",searchQuery);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",showPagingBar);if(view===PERC_FINDER_SEARCH_TYPE_MYPAGES){percFinderListviewContainer.data("searchType",PERC_FINDER_SEARCH_TYPE_MYPAGES)}refreshView();setListViewButtonOn(view);setSearchViewButtonsStates();finder.setStateButtonsDesignNode(false);$("#mcol-path-summary").val(searchQuery)}}}}function _updateListViewContainerData(contentPath,startIndex,pagingBarCallback){percFinderListviewContainer.data("path",contentPath);percFinderListviewContainer.data("startIndex",startIndex);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",pagingBarCallback);refreshView()}function setListViewButtonOn(view){$("#perc-finder-choose-view #perc-finder-choose-columnview").removeClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").addClass("ui-enabled")}function setColumnViewButtonOn(){$("#perc-finder-choose-view #perc-finder-choose-columnview").addClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setViewButtonsOff(){$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setSearchViewButtonsStates(){$.percFinderButtons().disableAllButtonsButSite()}function confirm_if_dirty(callback,errorCallback,options){dirtyController.confirmIfDirty(callback,errorCallback,options)}function openAsset(assetId,isEditMode){$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,assetId).done(function(){$.perc_utils.info("Added asset with id "+assetId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)});var aName=$.PercNavigationManager.getName();var handler=isEditMode?$.PercAssetController.getAssetEditorForAssetId:$.PercAssetController.getAssetViewForAssetId;handler(assetId,function(status,assetEditorUrl){if(status==$.PercServiceUtils.STATUS_SUCCESS){$.PercIFrameView.renderAssetEditor(finder,null,assetEditorUrl,null,null,false);addTransitionButtons("percAsset");$("#perc-revisions-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){var isEditMode=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT;_openRevisions(assetId,aName,isEditMode)});$("#perc-pubhistory-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){_openPublishingHistory(assetId,aName)});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(assetId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{assetId:assetId,aName:aName,trName:"Publish"},{assetId:assetId,aName:aName},{assetId:assetId,aName:aName,trName:"Take Down"},{assetId:assetId,aName:aName,trName:"Stage"},{assetId:assetId,aName:aName,trName:"Remove from Staging"},assetId],percDropdownDisabledFlag:disableAction})}}})}}else{var dlgTitle="Error";var dlgContent=assetEditorUrl;if(assetEditorUrl.indexOf("must be checked out by the current user")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Overridden",[contentName])}else{if(assetEditorUrl.indexOf("Item not found")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Deleted",[contentName])}}$.perc_utils.alert_dialog({title:dlgTitle,content:dlgContent,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}})}function _openRevisions(assetId,assetName,isEditMode){var mode=isEditMode?$.PercRevisionDialog.ITEM_MODE_VIEW:$.PercRevisionDialog.ITEM_MODE_EDIT;$.PercRevisionDialog.open(assetId,assetName,$.PercRevisionDialog.ITEM_TYPE_ASSET,mode)}function _openPublishingHistory(assetId,assetName){$.PercPublishingHistoryDialog.open(assetId,assetName,$.PercPublishingHistoryDialog.ITEM_TYPE_ASSET)}function checkOutCheckInPage(newId,notificationId,notifyComplete,pathType){if(newId!=null){var type="percPage";if(pathType==$.PercNavigationManager.PATH_TYPE_ASSET){type="percAsset"}$.PercWorkflowController().checkOut(type,newId,function(status){if(status){if(contentId&&(newId!=contentId)){$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}else{notifyComplete(notificationId,true)}}else{notifyComplete(notificationId,false)}})}else{$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}function save(type,callback){if(type=="asset"){var newAsset=true;if($.PercNavigationManager.getId()){newAsset=false}$.PercIFrameView.saveContent(newAsset);callback()}else{if(type=="page"||type=="template"){if(layoutModel!=undefined&&layoutModel!=null){$.PercBlockUI();layoutModel.save(function(){$.unblockUI();callback()})}}}}function addTransitionButtons(itemType){function addSaveAndCloseButtons(){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&view==$.PercNavigationManager.VIEW_EDIT_ASSET){var saveButton='<a style="float: right;" name="perc_wizard_save" title="Save" class="perc-save" id="perc-save-content">  </a>';$("#perc-content-menu").append($(saveButton));$("#perc-save-content").click(function(){var newAsset=!contentId||contentId==null;if(!newAsset){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){$.PercIFrameView.saveContent(newAsset)},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})}else{$.PercIFrameView.saveContent(newAsset)}})}if($.PercNavigationManager.getMode()!=$.PercNavigationManager.MODE_EDIT){var editButton='<a style="float: right;" name="perc_page_edit" title="Edit" class="perc-edit-button" id="perc-page-edit">  </a>';$("#perc-content-menu").append($(editButton));currentContentPath=$.PercNavigationManager.getPath();$.PercPathService.getPathItemForPath(currentContentPath,function(message,item){var currentItem=item.PathItem;$("#perc-page-edit").data("currentItem",currentItem).click(function(){var item=$(this).data("currentItem");if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.PercNavigationManager.handleOpenPage(item,true)}else{if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDIT_ASSET){$.PercNavigationManager.handleOpenAsset(item,true)}else{var eMsg="Cannot open unknown view.";$.perc_utils.alert_dialog({title:"Error",content:eMsg})}}})})}var closeButton="<a style='float: right;' class='perc-close' title='Close' id='perc-page-close'></a>";$("#perc-content-menu").append($(closeButton));$("#perc-page-close").click(function(){if(contentId){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){confirm_if_dirty(function(){$.PercBlockUI($.PercBlockUIMode.CURSORONLY);if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkIn(contentId,function(status){contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()})}else{contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}})}function addCommentsIcon(){$.PercRevisionService.getLastComment(contentId,function(status,result){if(status==$.PercServiceUtils.STATUS_SUCCESS){if(result.data&&result.data.length>0){var commentIcon=$("<a style='float: right;' tooltip='"+result.data+"' class='perc-last-comment-menubar'><span class='perc-font-icon icon-comment'/></a>");commentIcon.tooltip({delay:500,left:-150,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+result.data+"</p>"}});$("#tooltip").css("margin-right","20px");$("#perc-content-menu").append(commentIcon)}else{$.perc_utils.info("No comment for this page in its last transaction.")}}else{$.perc_utils.info("Failed to get the last comment information from server for page id: "+contentId+". See server log for more details.")}})}if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&contentId){$.PercWorkflowController().getTransitions(contentId,function(status,results){if(status){var dropdownLabels=[];var dropdownParams=[];var dropdownActions=[];var dropdownButtonImage="";var dropdownButtonImageOver="";results.unshift(results[0]);$.each(results,function(index){var trName=results[index].name;var trClass=results[index].cssClass;var trAlt=results[index].alt;trClass+=" perc-wf-button";var trNameNormal=trName.toLowerCase().replace(/[^a-zA-Z0-9\/]/g,"_");var trId="perc_item_transition_"+trNameNormal;var baseImageName="/cm/images/images/splitButtonWf"+trNameNormal;var imageExt=".gif";var regImageFilename=baseImageName+imageExt;var overImageFilename=baseImageName+"Over"+imageExt;if(index==0){defaultButtonImage=regImageFilename;defaultButtonImageOver=overImageFilename;dropdownButtonImage="/cm/images/images/splitButtonArrow.gif";dropdownButtonImageOver="/cm/images/images/splitButtonArrowOn.gif";name}var param={name:trName,contentId:contentId,itemType:itemType};dropdownParams.push(param);dropdownLabels.push(trName);dropdownActions.push(handlePageWorkflowDropdownAction)});var pageWorkflowDropdown=$("#perc-dropdown-page-workflow");pageWorkflowDropdown.append($("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-workflow-split-button-"+$.perc_textFilters.IDNAMECDATA(dropdownLabels[0]))).append($("<div />").addClass("perc-workflow").css("display","inline-block"));pageWorkflowDropdown.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-workflow",percDropdownOptionLabels:dropdownLabels,percDropdownCallbacks:dropdownActions,percDropdownCallbackData:dropdownParams,percDropdownTitleImage:dropdownButtonImage,percDropdownTitleImageOver:dropdownButtonImageOver,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-page-workflow"});pageWorkflowDropdown.find(".perc-dropdown-title").unbind("click");pageWorkflowDropdown.children("a").click(function(){dropdownActions[0](dropdownParams[0])});addSaveAndCloseButtons()}})}else{addSaveAndCloseButtons();addCommentsIcon()}}finder.addPathChangedListener(function(p){if(currentFinderView===PERC_FINDER_VIEW_COLUMN){return}if(finder.flagChangeView){setView(PERC_FINDER_VIEW_COLUMN)}});$.PercNavigationManager.registerFinder(finder);$.PercNavigationManager.addLocationChangeListener(function(url,id,notifyComplete,params){var newId=params.id;var modeSwitch=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY&&params.mode==$.PercNavigationManager.MODE_EDIT;if(!modeSwitch&&!$.PercNavigationManager.isReopenAllowed()&&contentId&&contentId==newId){var options={title:"Open "+type,content:"The "+type+" '"+$.PercNavigationManager.getName()+"' is already open."};$.perc_utils.alert_dialog(options);notifyComplete(id,false);return}var ok=false;dirty=dirtyController.isDirty();if(dirty){confirm_if_dirty(function(){if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}return})}else{if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}}});$(".perc-finder").append(finder.elem);finder.on("resize",function(event,ui){if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}});finder.update_finder_height();finderButtons=$.percFinderButtons().createButtons(finder,percFinderViewAPI);var contentId=$.PercNavigationManager.getId();var pageMode=$.PercNavigationManager.getMode();var contentName=$.PercNavigationManager.getName();var type=$.PercNavigationManager.getPathType();var view=$.PercNavigationManager.getView();function checkForMigrationWarnings(contentId){function onPageHasEmptyMigrationWidgets(){$.perc_utils.alert_dialog({title:I18N.message("Warning"),content:I18N.message("Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray."),okCallBack:function(){$.PercPageService.clearFlagShowMigrationEmptyMessage(contentId)}})}$.PercPageService.checkForEmptyMigrationWidgets(contentId,onPageHasEmptyMigrationWidgets)}if(type==$.PercNavigationManager.PATH_TYPE_PAGE&&contentId&&contentName){if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percPage",contentId,function(status){if(!status){contentId=null;contentName=null;var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}return}else{checkForMigrationWarnings(contentId);pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}})}else{pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&contentId){var assetId=contentId;var path=$.PercNavigationManager.getPath();$("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name' title = "+contentName+"> "+contentName+"</span>");if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){openAsset(assetId,true)}})}else{openAsset(assetId,false)}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&!contentId){var memento=$j.PercNavigationManager.getMemento();if(memento.widgetId){$.PercNewAssetDialog.openViewer(memento.folderPath,memento.widgetId)}else{$.PercNewAssetDialog.open()}}else{if(!contentId){var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}}}}}if(contentName!=null){$("#perc-editor-inline-help").hide()}function handlePageWorkflowDropdownAction(params){var contentId=params.contentId;var itemType=params.itemType;var trName=params.name;confirm_if_dirty(function(){var type=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"asset":"page";doIfItemExists(params.contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){var buttons={};buttons[trName]={click:function(){userComment=$("#perc-workflow-comment").val();commentDialog.remove();$.PercBlockUI();$.PercWorkflowController().transition(contentId,itemType,trName,encodeURIComponent(userComment),function(status){if(status){contentId=null;$.unblockUI();if(type=="page"&&trName=="Archive"){$.PercRedirectHandler.createRedirect($.PercNavigationManager.getPath(),"","page").fail(function(errMsg){$.perc_utils.alert_dialog({title:"Redirect creation error",content:errMsg,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}).done(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}else{$.unblockUI()}})},id:"perc-workflow-comment-ok"};buttons.Cancel={click:function(){commentDialog.remove()},id:"perc-workflow-comment-cancel"};var userComment="";var commentDialog=$("<div><div class='perc-workflow-comment-label' data='"+trName+'\'>Enter comments (limit to 255 characters)</div><textarea id="perc-workflow-comment" name="perc-workflow-comment" maxlength="255"></textarea></div>').perc_dialog({dialogClass:"perc-workflow-comment-dialog",title:"Enter Comments",modal:true,resizable:false,percButtons:buttons,width:400,id:"perc-workflow-comment-dialog"})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _openSchedule(callbackData){var itemId=callbackData.assetId;var assetName=callbackData.aName;if(dialogFlag){$.PercScheduleDialog.open(itemId,assetName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,assetName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,assetName)}}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Continue to publish now?",success:function(){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}}function _publishItem(callbackData){var itemId=callbackData.assetId;var trName=callbackData.trName;var view=$.PercNavigationManager.getView();var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){$.unblockUI();if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var SitePublishResponse=JSON.parse(results[0]).SitePublishResponse;if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES){$.perc_utils.alert_dialog({title:"Warning",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration multiple sites",[SitePublishResponse.warningMessage])})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{if(typeof(SitePublishResponse.warningMessage)!="undefined"&&SitePublishResponse.warningMessage!=""){$.perc_utils.alert_dialog({title:"Warning",content:SitePublishResponse.warningMessage,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}}}}}}})(jQuery,jQuery.Percussion);(function(x){x.PercIFrameView={renderAssetEditor:f,saveContent:A};var e=x.PercDirtyController;var n=false;var C=null;var z,y,j,h;function f(E,H,F,M,G,I){j=x("#frame");j.contents().remove();j.unbind(".reload");C=M;z=I;y=H;j[0].src=F;var J=/sys_folderid=([0-9]+)/;J=J.exec(F);h=J&&J.length>0?J[1]:null;x.PercContentPreSubmitHandlers.clearHandlers();j.load(function(){if(n==false){n=true;B()}else{q()}});fixIframeHeight();if(z){var K=x("#perc-layout-menu").length>0?"#perc-layout-menu":"#perc-content-menu";x(K).html("");x('<a style="float: right;" name="perc_wizard_save" class="perc-save" id="perc-save-content">  </a>').appendTo(K);x('<a style="float: right;" class="perc-close" id="perc-cancel-content">  </a>').appendTo(K);x("#perc-save-content").unbind("click").click(function(){A(true)});x("#perc-cancel-content").unbind("click").click(function(){L()});function L(){x.PercNavigationManager.goToDashboard()}}}function q(){if(j.contents().find("#perc-content-edit-errors").length==0){if(z){D(j);x.unblockUI()}else{x.PercPathService.getPathItemById(x.PercNavigationManager.getId(),function(F,E){if(F==x.PercServiceUtils.STATUS_SUCCESS){var G=E.PathItem.name;x.PercNavigationManager.setReopenAllowed(true);x.PercNavigationManager.goToLocation(x.PercNavigationManager.VIEW_EDIT_ASSET,x.PercNavigationManager.getSiteName(),x.PercNavigationManager.getMode(),x.PercNavigationManager.getId(),G,x.PercNavigationManager.getPath(),x.PercNavigationManager.PATH_TYPE_ASSET);x.unblockUI()}else{x.unblockUI();x.perc_utils.alert_dialog({title:"Error",content:E})}})}}else{b(j.contents().find("#perc-content-form"));x.unblockUI()}}function B(){if(z&&y){j.contents().find("[name=sys_workflowid]").val(y)}var E=j.contents().find("#perc-content-form");b(E);if(!z){j.contents().find("#perc-site-impact-panel").show();x.PercSiteImpactView.renderSiteImpact(x.PercNavigationManager.getId(),x.PercSiteImpactView.ITEM_TYPE_ASSET,j.contents().find("#perc-site-impact-panel"))}}function A(E){e.setDirty(false,"asset");x.PercBlockUI();var F=true;x.each(x.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){F=false}});if(!F){x.unblockUI();return}x.PercContentPreSubmitHandlers.clearHandlers();x(window).removeData();j.removeData();j.contents().find("#perc-content-form").submit()}function k(E,G,F){x.PercNavigationManager.goToLocation(x.PercNavigationManager.VIEW_EDIT_ASSET,x.PercNavigationManager.getSiteName(),x.PercNavigationManager.getMode(),F,G,E+"/"+G,x.PercNavigationManager.PATH_TYPE_ASSET)}function b(F){if(h){var G=F.attr("action");G=G+"?sys_folderid="+h+"&sys_asset_folderid="+h;F.attr("action",G)}var E=F.find("[name=sys_title]");var E=F.find("[name=sys_title]");if(E.length>0){x.perc_filterField(E,x.perc_textFilters.URL)}F.find("[type=text]").keypress(function(H){if(H.keyCode==13){return false}})}function D(F){var E=F.contents().find("[name=sys_contentid]").val();if(E==""){x.perc_utils.alert_dialog({title:"Error",content:"Unable to create asset"});return}var E="-1-101-"+E;path="//Folders/$System$/Assets"+C;x.PercAssetController.putAssetInFolder(E,path,function(G,H){k(x.perc_paths.ASSETS_ROOT+C,F.contents().find("[name=sys_title]").val(),H.AssetFolderRelationship.assetId)})}})(jQuery);(function(b){b.PercNewPageDialog=function(){var f={openDialog:e};function e(q,k){var D="";if(q){q=q.split("/");if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){D=q[2]}}var h=30;var E="<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> ";if(!k){E=E+"<label for='perc-select-template'>Select a template: </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a>"}else{E=E+"<input type='hidden' id='perc-select-template' name='template' value='"+k+"'/>"}E=E+"<div style='float:left;><fieldset><label for='perc-page-linktext' class='perc-required-field'>"+(!k?I18N.message("perc.ui.newpagedialog.label@Page link text"):I18N.message("perc.ui.newblogpostdialog.label@Post title"))+":</label> <br/> <input type='text' tabindex='"+h+"' class='required' id='perc-page-linktext' name='page_linktext' maxlength='512'/> <br/> ";if(!k){E=E+"<input type='text' style = 'display:none' tabindex='"+h+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> "}else{E=E+"<label for='perc-page-title' class='perc-required-field' style='display: none;'>"+I18N.message("perc.ui.newblogpostdialog.label@Hidden Post title")+":</label> <br style='display: none;'/> <input type='hidden' tabindex='"+h+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> <br style='display: none;'/>"}E=E+"<label for='perc-page-name' class='perc-required-field'>"+(!k?I18N.message("perc.ui.newpagedialog.label@Page name"):I18N.message("perc.ui.newblogpostdialog.label@Post name"))+":</label> <br/> <input type='text' tabindex='"+h+"' class='required' id='perc-page-name' name='page_name' maxlength='255'/><br/> </fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>";var y=!k?800:420;var F=b(E).perc_dialog({title:(!k?I18N.message("perc.ui.newpagedialog.title@New Page"):I18N.message("perc.ui.newblogpostdialog.title@New Post")),buttons:{},percButtons:{Save:{click:function(){j(D)},id:"perc-page-save"},Cancel:{click:function(){H()},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:y,resizable:false,modal:true});if(!k){B()}function C(K){var L=b.PercServiceUtils.extractDefaultErrorMessage(K);var J=b.PercServiceUtils.extractFieldErrorCode(K);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:L,okCallBack:function(){if(J=="page.alreadyExists"){b("#perc-page-name").focus()}}})}function H(){F.remove()}function j(J){b.PercSiteService.getSiteProperties(J,function(L,K){if(L==b.PercServiceUtils.STATUS_SUCCESS){var N=b(F.find("#perc-page-name")[0]).val();var M=K.SiteProperties.defaultFileExtention;if(M&&N.lastIndexOf(".")<0){if(N.length+M.length<255){N+="."+M}else{N=N.substring(0,254-M.length)+"."+M}b(F.find("#perc-page-name")[0]).val(N)}}else{b.perc_utils.alert_dialog({title:"Error",content:K})}F.find("form").submit()})}var n=F.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,messages:x(),debug:true,submitHandler:function(K){var J=b(K).find("[name=page_name]").val();J=b.trim(J);J=b.perc_textFilters.WINDOWS_FILE_NAME(J);b(K).find("[name=page_name]").val(J);b.perc_pathmanager.open_containing_folder(q,function(M,L){b.perc_pagemanager.create_new_page(L,b(K).serializeArray(),function(N){F.remove();G(L.join("/"),J,N.Page.id)},C)})}});function B(){var L=F.find("div.perc-scrollable div.perc-items");var M="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",M);var K;if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){K=b.perc_paths.TEMPLATES_BY_SITE+"/"+q[2]}else{K=b.perc_paths.TEMPLATES_USER}b.getJSON(K,function(N){b.each(N.TemplateSummary,function(){L.append(J(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var O=b(this).find(".item-id").text();b("#perc-select-template").val(O);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});function J(O){var N="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return N.replace(/@IMG_SRC@/,O.imageThumbPath).replace(/@ITEM_ID@/,O.id).replace(/@ITEM_LABEL@/,O.name).replace(/@ITEM_TT@/g,O.name)}}var A=b("#perc-page-linktext");var z=b("#perc-page-title");var I=b("#perc-page-name");b.perc_textAutoFill(A,z);b.perc_textAutoFill(A,I,b.perc_autoFillTextFilters.URL,null,255);b.perc_filterField(I,b.perc_textFilters.URL);function x(){var J={page_linktext:{required:(!k?"Page link text":"Post Title")+"  is a required field."},page_title:{required:(!k?"Page":"Hidden Post")+" title is a required field."},page_name:{required:(!k?"Page":"Post")+" name is a required field."}};return J}function G(L,J,K){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR,b.PercNavigationManager.getSiteName(),b.PercNavigationManager.MODE_EDIT,K,J,L+"/"+J,b.PercNavigationManager.PATH_TYPE_PAGE)}}return f}})(jQuery);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(e,q){var z=b.perc_utils;var k;b.PercNewAssetDialog.open=function(){var C=30;var J;var G;var H={};G=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:H,percButtons:{Next:{click:function(){var N=b.PercNavigationManager.getMemento().lastOpenedItem;if(!z.isBlankString(N)){b.PercWorkflowController().checkIn(N,function(O){D()})}else{D()}},id:"perc-page-save"},Cancel:{click:function(){K();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var N=b.PercNavigationManager.getBookmark();var O=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(N)!=O){window.location.href=O}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var E=b("#perc-select-template_perc_is");var I="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";E.attr("style",I);function K(){G.remove()}function D(){G.find("form").submit()}J=G.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(O){var N=b("#perc-editor-url").val();var P=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(k,function(R,Q){G.remove();path=Q.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(T){var S=T.id;var U=S.substring(S.lastIndexOf("-")+1);N+="&sys_folderid="+U+"&sys_asset_folderid="+U+"&sys_workflowid="+P;b.PercIFrameView.renderAssetEditor(e,P,N,path,Q,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(j(),function(P){var O=G.find("div.perc-scrollable div.perc-items");for(a in P){var N=P[a];O.append(h(N));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var Q=b(this).find(".item-editor-url").text();var R=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(Q);b("#perc-workflow-id").val(R);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var M=b("#perc-page-name");var B=b("#perc-page-title");var A=b("#perc-page-url");function F(N){return N.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function L(N){return N.replace(/\\/g,"")}b.perc_textAutoFill(M,B,L);b.perc_textAutoFill(M,A,F);b.perc_textAutoFill(M,"#perc-page-linktitle",L);b.perc_filterField(M,L);b.perc_filterField(B,L);b.perc_filterField(A,F);b.perc_filterField("#perc-page-linktitle",L)};b.PercNewAssetDialog.openViewer=function(A,B){b.PercAssetService.getAssetEditorForWidgetAndFolder(A,B,function(D,C){if(D==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var F=C.AssetEditor.pop();var E=F.url;var G=F.workflowId;path=A.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(A,function(I){var H=I.id;var J=H.substring(H.lastIndexOf("-")+1);E+="&sys_folderid="+J+"&sys_asset_folderid="+J+"&sys_workflowid="+G;b.PercIFrameView.renderAssetEditor(e,G,E,path,A.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function f(){b.PercFolderHelper().getAccessLevelByPath(k.join("/"),false,function(B,A){if(B==b.PercFolderHelper().PERMISSION_ERROR||A==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var D=e.getCurrentItem();var C="";if(D!=null){C=D.folderPaths;if(D.type=="Folder"){C=D.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(F,E){if(F==b.PercServiceUtils.STATUS_ERROR||E==b.PercUserService.ACCESS_READ||E==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{q.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},C)}})}function h(B){var A="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return A.replace(/@IMG_SRC@/,B.icon).replace(/@ITEM_ID@/g,B.title).replace(/@ITEM_URL@/,B.url).replace(/@ITEM_WORKFLOW_ID@/,B.workflowId).replace(/@ITEM_LABEL@/,B.title)}function j(){return b.deparam.querystring().path}var y=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function n(A){k=A;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){x(false)}else{if(A[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){y.show();x(true);if(A.length<3){x(false)}else{b.PercFolderHelper().getAccessLevelByPath(A.join("/"),true,function(C,B){if(C==b.PercFolderHelper().PERMISSION_ERROR||B==b.PercFolderHelper().PERMISSION_READ){x(false)}})}}else{if(A[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||A[1]==b.perc_paths.SITES_ROOT_NO_SLASH){y.hide()}}}}function x(A){if(A){y.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(f)}else{y.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}e.addPathChangedListener(n);return y}})(jQuery);(function($,P){var CONTENT_TAB=0;var LAYOUT_TAB=1;var STYLES_TAB=2;var view=$.PercNavigationManager.getView();var dialogFlag=true;var querystring=$.deparam.querystring();var pageMode=$.PercNavigationManager.getMode();var isAdmin=$.PercNavigationManager.isAdmin();var isDesigner=$.PercNavigationManager.isDesigner();P.pageView=function(){$(".perc-page-status").hide();$(".perc-page-name").hide();var dirtyController=$.PercDirtyController;if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.perc_iframe_fix($("#frame"))}var utils=$.perc_utils;var pageModel;var currentPageId;var unassigned="UNASSIGNED";var dirty=false;var pageViewAPI={resetPageName:resetPageName,reload:function(){loadTab($("#perc-pageEditor-tabs").tabs("selected"))},getPageId:function(){return currentPageId},clear:function(){$("#frame").each(function(){this.open();this.close()})},confirm_if_dirty:confirm_if_dirty,openPage:openPage,isDirty:isDirty};$("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu, #perc-error-alert").css("visibility","hidden");function openPage(pageId,pageName){try{$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,pageId).done(function(){$.perc_utils.info("Added page with id "+pageId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)})}catch(err){$.perc_utils.error("Error adding page with id "+pageId+" to recent item list.")}currentPageId=pageId;$(".perc-page-status").show();$(".perc-page-name").show();getPageStatus(currentPageId);var pglabel=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"Editing Page:":"Viewing Page:";var pgType=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"page-editing":"page-viewing";if(pageName){var titleValue=$.PercNavigationManager.getPath();$(".perc-page-name-name").html('<span class = "perc-title-value"><span class = "perc-page-name-text">'+pageName+"</span></span>");$(".perc-title-value").attr("title",titleValue);$(".perc-title-value").prepend('<span class = "perc-page-name-label">'+pglabel+"</span>");$(".perc-page-details").attr("type",pgType);$("#perc-pageEditor-menu-name").html(pageName);_addMyPagesAction(pageId);$(".perc-page-details").show()}var $tabs=$("#perc-pageEditor-tabs");var currentTabIndex=$tabs.tabs().tabs("option","selected");var defaultTabIndex=0;if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,function(){$tabs.data("disabled.tabs",[]).tabs("select",defaultTabIndex);$("#perc-pageEditor-tabs").find("li").each(function(i){if(pageModel.getTemplateModel().getTemplateType()!==unassigned){$(this).removeClass("ui-state-disabled")}});var enableMenu=pageModel.getTemplateModel().getTemplateType()!==unassigned;if(isAdmin||isDesigner){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Edit Template","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,enableMenu,true]})}else{actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Change Template"],percDropdownDisabledFlag:[false,true,true]})}addMoreMenus()})}$("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)});var actionsDropdown=$("#perc-dropdown-actions");var viewDropdown=$("#perc-dropdown-view");if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","View Meta-data"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)}],percDropdownCallbackData:["Action","View Meta-data"],percDropdownDisabledFlag:[false,true]});viewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History"],percDropdownCallbacks:[function(){},_openRevisions,_openComments,_previewPage,_openPublishingHistory],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"View"],percDropdownDisabledFlag:[false,true,true,true,true]});addMoreMenus()}function _addMyPagesAction(pageId){$.PercPageService.isMyPage(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$(".perc-my-pages-action").addClass("perc-my-pages-error").attr("title","Error occurred retreving the status.")}else{if(result){$(".perc-my-pages-action").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").click(function(){_removeFromMyPages(pageId)})}else{$(".perc-my-pages-action").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").click(function(){_addToMyPages(pageId)})}}})}function _addToMyPages(pageId){$.PercPageService.addToMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-add-to-my-pages").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").unbind().click(function(){_removeFromMyPages(pageId)})}})}function _removeFromMyPages(pageId){$.PercPageService.removeFromMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-remove-from-my-pages").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").unbind().click(function(){_addToMyPages(pageId)})}})}function addMoreMenus(){if(isAdmin||isDesigner){var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]})}else{var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-layout-actions",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]})}var layoutViewDropdown=$("#perc-dropdown-view-layout");layoutViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","View","View"],percDropdownDisabledFlag:[false,true,true]});var styleViewDropdown=$("#perc-dropdown-view-style");styleViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(currentPageId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Take Down"},{pageId:currentPageId,pageName:pageName,trName:"Stage"},{pageId:currentPageId,pageName:pageName,trName:"Remove from Staging"},currentPageId],percDropdownDisabledFlag:disableAction})}}});$.PercAssetService.getUnusedAssets(currentPageId,populateOrphanAssets);var viewDropDownData={percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History","Disable JavaScript"],percDropdownCallbacks:[$.noop,_openRevisions,_openComments,_previewPage,_openPublishingHistory,$.noop],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"Disable JavaScript"],percDropdownDisabledFlag:[false,true,true,true,true,true]};viewDropdown.PercDropdown(viewDropDownData)}if(currentTabIndex==defaultTabIndex){loadTab(defaultTabIndex)}initOrphanAssetsMenu()}}function handleIn(){var self=$(this);self.attr("src",self.data("overIconSrc"))}function handleOut(){var self=$(this);self.attr("src",self.data("iconSrc"))}function populateOrphanAssets(status,unusedAssets){$("#perc_orphan_assets_expander").show();if(status==$.PercServiceUtils.STATUS_ERROR){$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled");$.perc_utils.alert_dialog({title:"Error",content:unusedAssets});return}if(unusedAssets.length>0){var orphanAssetsContainer=$(".perc-orphan-assets-list");orphanAssetsContainer.empty();var htmlAssets="";for(var i=0;i<unusedAssets.length;i++){var asset=unusedAssets[i];var hoverText="Local";var folderPaths="";if(typeof(asset.folderPaths)!="undefined"){hoverText=asset.folderPaths.replace("//Folders/$System$","")+"/"+asset.name;folderPaths=asset.folderPaths}orphanAssetsContainer.append($("<a />").attr("alt",hoverText).attr("title",hoverText).addClass("perc-orphan-asset").data("spec",{type:asset.type,id:asset.id,relationshipId:asset.relationshipId}).append($("<div />").css("position","relative").addClass("perc-widget-tool").append($("<img />").attr("src",asset.icon).data("iconSrc",asset.icon).data("overIconSrc",asset.overIcon).hover(handleIn,handleOut)).append($("<div />").css("overflow","hidden").addClass("perc-asset-label").append($("<nobr />").html(asset.title)))).css("cursor","pointer").data("assetId",asset.id).data("assetType",asset.type).data("assetFolderPaths",folderPaths).data("widgetId",asset.widgetId).unbind().click(selectOrphanAsset))}$("#perc_orphan_assets_expander").unbind().click(function(){clearSelection();$.fn.percOrphanAssetsMaximizer(P)});orphanAssetsContainer.find(".perc-orphan-asset").draggable({helper:function(){var helper=$(this).clone();helper.find(".perc-asset-label").css("padding","0px 0px 5px 5px");return helper},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:function(){$("body").css("overflow","hidden")},stop:function(){$("body").css("overflow","auto")},delay:25});$("#perc_orphan_assets_maximizer").removeClass("perc-disabled");$("#perc_orphan_assets_expander").removeClass("perc-disabled")}else{$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled")}}$(window).resize(function(){fixIframeHeight()});function initOrphanAssetsMenu(){$("#perc_asset_library").disableSelection();$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}function deleteOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanIds=[];var orphanTypes=[];var orphanIsShared=[];var orphanWidgetsIds=[];for(var i=0;i<unused.length;i++){orphanIds.push($(unused[i]).data("assetId"));orphanTypes.push($(unused[i]).data("assetType"));orphanWidgetsIds.push($(unused[i]).data("widgetId"));var folderPaths=$(unused).data("assetFolderPaths");if(typeof(folderPaths)!="undefined"){orphanIsShared.push(true)}else{orphanIsShared.push(false)}}var title="Remove Unused Asset";var assetmsg=(i<2)?"asset":"assets";var msg="Are you sure you want to remove the unused "+assetmsg+"?";var options={id:"perc-orphan-asset-delete-dialog",title:title,question:msg,type:"YES_PREFERRED_NO",cancel:function(){},success:function(){pageModel.clearOrphanAssets(orphanWidgetsIds,orphanTypes,orphanIds,orphanAssetDeleted)}};$.perc_utils.confirm_dialog(options)}function orphanAssetDeleted(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");$(unused).remove();clearSelection();var remainingAssets=$("#perc_asset_library").find(".perc-orphan-assets-list").find("a");if(remainingAssets.length==0){$.fn.percOrphanAssetsMaximizer(P);$("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();$("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function editOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanId=$(unused).data("assetId");var orphanType=$(unused).data("assetType");var orphanWidgetId=$(unused).data("widgetId");var orphanIsShared=false;var widgetData={widgetid:orphanWidgetId,widgetdefid:orphanType};pageModel.configureAsset(widgetData,orphanId,orphanIsShared,orphanAssetEdited)}function orphanAssetEdited(){}function selectOrphanAsset(e){if(e.shiftKey){$(this).toggleClass("perc-orphan-assets-selected")}else{if($(this).is(".perc-orphan-assets-selected")){clearSelection()}else{clearSelection();$(this).toggleClass("perc-orphan-assets-selected")}}var parent=$(this).parent();var selected=$(parent).find(".perc-orphan-assets-selected");if(selected.length>0){$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/delete.png").unbind().click(deleteOrphanAsset);$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/edit.png").unbind().click(editOrphanAsset)}else{$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}if(selected.length>=2){$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}}function clearSelection(){$(".perc-orphan-assets-list").find("a").removeClass("perc-orphan-assets-selected");$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}$("#perc-pageEditor-tabs").tabs({disabled:[1,2],select:function(event,ui){if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);$("#perc-pageEditor-tabs").tabs("select",ui.index);resetJavaScriptMenu()});return false}else{resetJavaScriptMenu()}loadTab(ui.index,true)}});if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR&&$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$("#perc-wid-lib-expander").click(function(){$.fn.percWidLibMaximizer(P)})}function loadTab(index,addWrapper){if(addWrapper){var viewWrapper=$j.PercComponentWrapper("perc-action-page-tab-selected",["perc-ui-component-editor-toolbar","perc-ui-component-editor-frame"]);var isWrapperSet=$j.PercViewReadyManager.setWrapper(viewWrapper);if(!isWrapperSet){$j.PercViewReadyManager.showRenderingProgressWarning();return}}if(index==CONTENT_TAB){loadContent(currentPageId)}else{if(index==LAYOUT_TAB){loadLayout(currentPageId)}else{if(index==STYLES_TAB){loadCss(currentPageId)}}}}function _changeTemplate(){var successCallBack=function(){window.location.reload()};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);openChangeTemplateDialog()});return false}else{openChangeTemplateDialog()}function openChangeTemplateDialog(){$.PercChangeTemplateDialog().openDialog(currentPageId,pageModel.getTemplateModel().getId(),$.PercNavigationManager.getSiteName(),successCallBack)}}function _loadTemplate(){var memento={templateId:pageModel.getTemplateModel().getId(),pageId:currentPageId,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,$.PercNavigationManager.getSiteName(),null,null,null,$.PercNavigationManager.getPath(),null,memento)}function resetJavaScriptMenu(){$(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}function resetPageName(){$.ajax({url:$.perc_paths.PAGE_CREATE+"/"+currentPageId,success:function(data){$("#perc-pageEditor-menu-name").html(data.Page.name)},type:"GET",dataType:"json"})}function confirm_if_dirty(callback,errorCallback,options){options=options||{};errorCallback=errorCallback||function(){};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(callback,errorCallback,options)}else{callback()}}function loadContent(pageId){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupContent);$.PercAssetService.getUnusedAssets(pageId,populateOrphanAssets);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}else{var previewPath=$.perc_paths.PAGE_PREVIEW+currentPageId;$("#frame").contents().remove();$("#frame").attr("src",previewPath);$("#frame").unbind().load(function(){fixIframeHeight();window.setTimeout(function(){$.perc_utils.handleLinks($("#frame"))},500);var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}}function loadLayout(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupLayout);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function loadCss(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setUpCss);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function setupContent(){fixIframeHeight();P.contentView($("#frame"),pageModel)}function setupLayout(){fixIframeHeight();var layoutController=P.layoutController(pageModel);var sizeController=P.sizeController(pageModel);P.layoutView($("#frame"),pageModel,layoutController,sizeController,function(isDirty){setDirty(isDirty)});$("#region-tool").draggable({helper:"clone"})}function setDirty(isDirty){dirtyController.setDirty(isDirty,"page");dirty=isDirty}function isDirty(){return dirty}function setUpCss(){fixIframeHeight();var cssController=P.cssController(pageModel,$("#frame"),P.CSSPreviewView($("#frame"),pageModel));$("#perc-css-editor-save").click(function(){cssController.save(function(){})});$("#perc-css-editor-cancel").click(function(){pageModel.load();dirtyController.setDirty(false,"template")})}function _openSchedule(callbackData){var itemId=callbackData.pageId;var pageName=callbackData.pageName;if(dialogFlag){$.PercScheduleDialog.open(itemId,pageName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,pageName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,pageName)}}function getPageStatus(pageId){var pagePath=$.PercNavigationManager.getPath();$.perc_pathmanager.getItemProperties(pagePath,function(status,itemProps){var pageStatus=itemProps.status;$(".perc-page-status-status").html(pageStatus);$.PercItemPublisherService.getScheduleDates(pageId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;if(scheduleDates.startDate&&pageStatus=="Pending"){$(".perc-page-status-status").html("Approved for "+scheduleDates.startDate)}})})}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Clear the schedule and continue to publish now?",success:function(){_immediateItemPublish(itemId,itemType)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{_immediateItemPublish(itemId,itemType)}}function _immediateItemPublish(itemId,itemType){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}function _publishItem(callbackData){var itemId=callbackData.pageId;var trName=callbackData.trName;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var siteName=$.PercNavigationManager.getSiteName();if(siteName===undefined&&itemType=="Page"){var currentItemPath=$.perc_finder().getPathItemById(itemId).folderPath;siteName=currentItemPath.replace("/"+$.perc_paths.SITES_ROOT,"").split("/")[1]}confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){doIfDefaultServerNotModified(siteName,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.unblockUI();$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var publishStatus=JSON.parse(results[0]).SitePublishResponse.status;if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}}}}}function _openRevisions(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercRevisionDialog.open(pageId,pageName,$.PercRevisionDialog.ITEM_TYPE_PAGE,$.PercRevisionDialog.ITEM_MODE_VIEW)}function _openComments(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercCommentsDialog.open(pageId,pageName,$.PercCommentsDialog.ITEM_TYPE_PAGE)}function _openPublishingHistory(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercPublishingHistoryDialog.open(pageId,pageName,$.PercPublishingHistoryDialog.ITEM_TYPE_PAGE)}function _openOptimizer(callbackData){$.PercPageOptimizerDialog.open(callbackData.pageId,callbackData.pageName)}function _previewPage(currentPageId){confirm_if_dirty(function(){jQuery.perc_finder().launchPagePreview(currentPageId)})}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfDefaultServerNotModified(siteName,callback){$.PercNavigationManager.loadSiteProperties(siteName,function(siteProperties){$.PercItemPublisherService.isDefaultServerModified(siteProperties.id,function(status,result){if(status){if(result){$.perc_utils.alert_dialog({content:"Cannot publish or remove this item until the CM1 server is restarted.",title:"Warning"})}else{callback()}}})})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}return pageViewAPI}})(jQuery,jQuery.Percussion);(function(j){j.PercAssetController={getAssetEditorLibrary:f,getAssetEditorForAssetId:b,getAssetViewForAssetId:e,getPathItemForPath:h,putAssetInFolder:k};function f(q,n){function x(C,A){var B=[];var z=A.AssetEditor;for(i in z){var F=z[i].icon;var G=z[i].title;var y=z[i].url;var D=z[i].workflowId;var E=new j.PercAssetEditorModel(F,G,y,D);B.push(E)}n(B)}j.PercAssetService.getAssetEditorLibrary(q,x)}function b(n,q){j.PercAssetService.getAssetEditorForAssetId(n,function(x,y){q(x,y)})}function e(n,q){j.PercAssetService.getAssetViewForAssetId(n,function(x,y){q(x,y)})}function h(q,n){function x(y,z){var A=new j.PercPathItemModel(z.PathItem.id,z.PathItem.folderPaths,z.PathItem.icon,z.PathItem.name,z.PathItem.type,z.PathItem.folderPath,z.PathItem.leaf,z.PathItem.path);n(A)}j.PercPathService.getPathItemForPath(q,x)}function k(y,x,n){var q={AssetFolderRelationship:{assetId:y,folderPath:x}};j.PercAssetService.putAssetInFolder(q,n)}})(jQuery);(function(h){h.PercWorkflowController=function(){return{checkIn:f,checkOut:k,transition:q,getTransitions:x,isCheckedOutToCurrentUser:j,doesItemExist:y}};var n=h.PercWorkflowService();function f(C,D){D=D==null?function(){}:D;var B=function(E,F){if(E==h.PercServiceUtils.STATUS_ERROR){var G=h.PercServiceUtils.extractDefaultErrorMessage(F.request);h.perc_utils.debug("Error : "+G);D(false)}else{D(true)}};n.checkIn(C,B)}function k(C,B,D){D=D==null?function(){}:D;n.checkOut(B,function(F,H){if(F==h.PercServiceUtils.STATUS_SUCCESS){var E=H.data.ItemUserInfo;if(E.checkOutUser!=E.currentUser){if(E.assignmentType=="Admin"){var G={title:e[C],question:b(0,E,C),cancel:function(){D(false)},success:function(){z(B,D)},type:"OVERRIDE_OK"};h.perc_utils.confirm_dialog(G)}else{if(E.assignmentType=="Assignee"){var G={title:e[C],content:b(1,E,C)};h.perc_utils.alert_dialog(G);D(false);return}else{var G={title:e[C],content:b(2,E,C)};h.perc_utils.alert_dialog(G);D(false);return}}}else{D(true)}}else{var I=h.PercServiceUtils.extractDefaultErrorMessage(H.request);if(I.indexOf("Not a valid content id")!=-1){var G={title:e[C],content:b(3,E,C)};h.perc_utils.alert_dialog(G);D(false);return}h.perc_utils.alert_dialog({title:"Error",content:I});D(false)}})}function z(B,C){C=C==null?function(){}:C;n.forceCheckOut(B,function(D,E){if(D==h.PercServiceUtils.STATUS_SUCCESS){C(true)}else{var F=h.PercServiceUtils.extractDefaultErrorMessage(E.request);h.perc_utils.alert_dialog({title:"Error",content:F});C(false)}})}function q(E,D,C,G,F){F=F==null?function(){}:F;var B=function(I,K){if(I==h.PercServiceUtils.STATUS_ERROR){var O=h.PercServiceUtils.extractDefaultErrorMessage(K.request);h.perc_utils.alert_dialog({title:"Error",content:O});F(false)}else{var H=K.data;var M=H.ItemTransitionResults.failedAssets;if(M){var L=(D=="percAsset")?"asset":"page";var N="Could not publish the "+L+" because the following related asset(s) could not be published.<br/><br/>";if(h.isArray(M)){h.each(M,function(){var P=this.folderPaths;P=P.substring(P.indexOf("/Assets"))+"/"+this.name;N+="<b>"+P+"</b><br/>"})}else{var J=M.folderPaths;J=J.substring(J.indexOf("/Assets"))+"/"+M.name;N+="<b>"+J+"</b><br/>"}N+="<br/>Either remove the related asset(s) or publish them first and then publish this "+L+".";h.perc_utils.alert_dialog({title:"Error",content:N});F(false)}else{F(true)}}};n.transition(E,C,G,B)}function x(B,C){C=C==null?function(){}:C;n.getTransitions(B,function(D,F){if(D==h.PercServiceUtils.STATUS_SUCCESS){var E=[];var G=F.data.ItemStateTransition.transitionTriggers;if(h.isArray(G)){h.each(G,function(I){if(A[G[I]]){E.push(A[G[I]])}})}else{if(A[G]){E.push(A[G])}}C(true,E)}else{var H=h.PercServiceUtils.extractDefaultErrorMessage(F.request);h.perc_utils.alert_dialog({title:"Error",content:H});C(false,[])}})}function j(C,D){D=D==null?function(){}:D;var B=function(E,F){if(E==h.PercServiceUtils.STATUS_SUCCESS){D(F.data==true,F.data)}else{D(false,h.PercServiceUtils.extractDefaultErrorMessage(F.request))}};n.isCheckedOutToCurrentUser(C,B)}function y(B,C){C=C==null?function(){}:C;j(B,function(D,E){if(typeof E=="string"){C(D||E.indexOf("does not exist")==-1)}else{C(D)}})}function b(C,B,F){var E="";var D="page";if(F=="percAsset"){D="asset"}if(C==0){E="The "+D+" '"+B.itemName+"' is currently being edited by '"+B.checkOutUser+"'.<br/>Select 'Override' to edit this "+D+" anyway. <br/>Unsaved changes to '"+B.itemName+"' may be lost."}else{if(C==1){E="The "+D+" '"+B.itemName+"' is currently being edited by '"+B.checkOutUser+"'."}else{if(C==2){E="You are not authorized to edit the "+D+" '"+B.itemName+"'."}else{if(C==3){E="The "+D+" has been deleted in another session."}}}}return E}var e=[];e.percPage="Open Page";e.percAsset="Open Asset";var A=[];A.Reject={name:"Reject",cssClass:"perc-wf-reject",alt:"Reject"};A.Submit={name:"Submit",cssClass:"perc-wf-submit",alt:"Submit"};A.Approve={name:"Approve",cssClass:"perc-wf-approve",alt:"Approve"};A.Resubmit={name:"Resubmit",cssClass:"perc-wf-resubmit",alt:"Resubmit"};A["Quick Edit"]={name:"Quick Edit",cssClass:"perc-wf-edit",alt:"Edit"};A.Archive={name:"Archive",cssClass:"perc-wf-archive",alt:"Archive"}})(jQuery);(function(b){b.PercPathItemModel=function(x,f,n,j,k,h,e,q){this.id=x;this.folderPaths=f;this.icon=n;this.name=j;this.type=k;this.folderPath=h;this.leaf=e;this.path=q}})(jQuery);(function(b){b.PercWidgetModel=function(){this.id=null;this.locked=false;this.html=null;this.ccs=null;this.definitionId=null;this.name=null;this.properties=null;this.assetIds=null;this.relationshipId=-1;this.setId=function(e){this.id=e};this.getId=function(){return this.id};this.setHtml=function(e){this.html=e};this.getHtml=function(){return this.html};this.setCss=function(e){this.css=e};this.getCss=function(){return this.css};this.setDefinitionId=function(e){this.definitionId=e};this.getDefinitionId=function(){return this.definitionId};this.setProperties=function(e){this.properties=e};this.getProperties=function(){return this.properties};this.setName=function(e){this.name=e};this.getName=function(){return this.name};this.setAssetIds=function(e){this.assetIds=e};this.getAssetIds=function(){return this.assetIds};this.setRelationshipId=function(e){this.relationshipId=e};this.getRelationshipId=function(){return this.relationshipId}};b.PercAssetDropCriteriaModel=function(k,q,f,j,e,x,n,h){this.widgetId=k;this.appendSupport=q;this.locked=f;this.multiItemSupport=j;this.ownerId=e;this.supportedContentTypes=x;this.assetShared=n;this.relationshipId=h;this.log=function(){console.log("widgetId              = "+this.widgetId);console.log("appendSupport         = "+this.appendSupport);console.log("locked                = "+this.locked);console.log("multiItemSupport      = "+this.multiItemSupport);console.log("ownerId               = "+this.ownerId);console.log("supportedContentTypes = "+this.supportedContentTypes)}};b.PercAssetEditorModel=function(f,j,e,h){this.icon=f;this.title=j;this.url=e;this.workflowId=h;this.log=function(){console.log("icon       = "+this.icon);console.log("title      = "+this.title);console.log("url        = "+this.url);console.log("workFlowId = "+this.workflowId)}}})(jQuery);(function(h){var f=h.perc_utils;var e=20;h.perc_browser=function(x){var N={customRootSite:"",new_asset_option:true,initial_val:"",on_save:function(){},selectable_object:"folder",new_folder_opt:true,displayed_containers:"Assets",selection_types:function(){return true},asset_name:I18N.message("perc.ui.saveasdialog.label@Save as"),location:I18N.message("perc.ui.saveasdialog.label@Location:"),title:I18N.message("perc.ui.saveasdialog.title@Save As"),no_name_error:I18N.message("perc.ui.saveasdialog.error@Name required"),save_class:"perc-save"};h.extend(N,x);var D=N.selection_types;if(!h.isFunction(D)){D=function(P){return f.elem(P,N.selection_types)}}var y={All:[""],Sites:["",h.perc_paths.SITES_ROOT_NO_SLASH],Assets:["",h.perc_paths.ASSETS_ROOT_NO_SLASH],CustomSite:["",h.perc_paths.SITES_ROOT_NO_SLASH,"<sitename>"]};var k=y[N.displayed_containers];if(typeof(k[2])!="undefined"){k[2]=k[2].replace("<sitename>",N.customRootSite)}var n=N.selectable_object=="leaf"||N.selectable_object=="all";var K=N.selectable_object=="folder"||N.selectable_object=="all";var J=window.parent.parent.jQuery("<div><p id='perc-saveas-dialog-error' class='perc-field-error' />"+f.input(N.asset_name,"asset-name","perc-saveas-dialog-assetname",e)+f.select(N.location,"location","perc-saveas-dialog-location",e)+"<div id='perc-saveas-dialog-direc'></div></div>");var z=J.find("#perc-saveas-dialog-direc");var E=J.find("#perc-saveas-dialog-location").change(function(){var P=this.value.split("/");H(P)});var C=J.find("#perc-saveas-dialog-assetname");var L=null;var I=null;var F=null;C.val(N.initial_val);if(!N.new_asset_option){C.attr("readonly","readonly")}J.perc_dialog({modal:true,title:N.title,resizable:false,width:320,zIndex:400000000,buttons:{},percButtons:{Save:{click:function(){G()},id:"perc-save-as-save"},Cancel:{click:function(){J.remove()},id:"perc-save-as-cancel"}},id:"perc-save-as-dialog"});if(N.new_folder_opt){J.parent().find("#perc-saveas-dialog-new-folder").click(function(){F()})}else{J.parent().find("#perc-saveas-dialog-new-folder").remove()}H(k);function O(P){J.remove();alert(P)}function H(P){F=q(f.acop(P));if(!N.new_asset_option){C.val("")}M(f.acop(P));j(f.acop(P))}function j(Q){z.empty();h.perc_pathmanager.open_path(Q,true,P,A);function P(R){h.each(R.PathItem,function(){if(D(this["type"])&&this["path"]!=h.perc_paths.SEARCH_ROOT+"/"&&this["path"]!=h.perc_paths.DESIGN_ROOT+"/"){b(z,B(this))}})}}function M(Q){var S=J.find("#perc-saveas-dialog-location");S.attr("size","2");E.empty();var P="";L=[];for(var R=0;R<k.length-1;R++){L.push(Q.shift())}while(Q.length){L.push(Q.shift());P+="&nbsp;&nbsp;";E.append(h("<option  style = 'color:#000' value='"+L.join("/")+"'></option>").append(P+L[L.length-1]))}E.val(L.join("/"));S.attr("size","1")}function q(P){return function(){f.prompt_dialog({title:I18N.message("perc.ui.saveasdialog.title@New Folder"),question:I18N.message("perc.ui.saveasdialog.text@New folder prompt"),yes:I18N.message("perc.ui.common.label@Save"),no:I18N.message("perc.ui.common.label@Cancel"),success:function(Q){h.perc_pathmanager.add_folder(f.acat(P,[Q]),function(){H(f.acop(P))},A)}})}}function A(P){h("#perc-saveas-dialog-error").text(P).effect("pulsate",{times:1})}function G(){var P=C.val();if(!P||P==""){A(N.no_name_error);return}if(!N.new_asset_option){N.on_save(I,function(){J.remove()},A)}else{N.on_save(f.acop(L),P,function(){J.remove()},A)}}function B(Q){var V=f.extract_path_end(Q.path);var P=(Q.type=="Folder")?"a":"z";var T=f.extract_path(Q.path);var U=f.choose_icon(Q.type,Q.icon,T);var R=h("<a href='#'/>").addClass("mcol-listing").attr("id","perc-saveas-dialog-listing"+f.path_id(T)).append(h("<img src='"+U+"' style='float:left'></img>")).append(Q.name).data("name",V).data("tag",P+(Q.name+"").toLowerCase());var S="perc-saveas-dialog-selected";function W(){R.siblings("."+S).removeClass(S);R.addClass(S);if(Q.leaf){C.val(Q.name);I=Q}else{L=f.acop(T)}}if(Q.leaf){if(n){R.click(W);R.dblclick(function(){R.click();h("#perc-saveas-dialog-save-button").click()})}}else{if(K){R.click(W)}R.dblclick(function(){H(T)})}return R}};function b(k,n){var j=null;k.prepend(n);k.children().each(function(){if(h.data(this,"tag")>h.data(n.get(0),"tag")){j=this;return false}return true});if(j){h(j).before(n)}else{k.append(n)}}})(jQuery);(function(b){b.perc_asset_edit_dialog=function(E,q,G,e,J,n){n=n||"page";var y=b.perc_utils;var K;var x;var I=G;var j=false;var h={AssetEditUrlRequest:{type:n,assetId:G,widgetId:e.widgetid,parentId:J,widgetDefinition:e.widgetdefid}};b.ajax({url:b.perc_paths.CONTENT_EDIT_CRITERIA+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(h),success:function(M){x=M.ContentEditCriteria;f()},error:function(O,M,N){y.alert_dialog({id:"perc-content_edit_error",title:"Error opening editor for content",content:b.PercServiceUtils.extractDefaultErrorMessage(O),width:400})}});function f(){var O=x.url+"&sys_folderid="+x.legacyFolderId+"&percpageid="+J+"&sys_workflowid="+x.workflowId;var N="<div id='edit-widget-content'><iframe name='edit-widget-content-frame' id='edit-widget-content-frame' height='100%' FRAMEBORDER='0' width='100%' src='"+O+"'></iframe></div>";K=b(N).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:x.preferredEditorHeight,width:x.preferredEditorWidth,percButtons:{Save:{click:function(){k(x.contentName,null);b.PercDirtyController.setDirty(false)},id:"perc-content-edit-save-button"},Cancel:{click:function(){K.remove();b.PercDirtyController.setDirty(false);q(G)},id:"perc-content-edit-cancel-button"}},id:"perc-asset-edit-dialog"});if(x.producesResource===false&&x.assetType!=="shared"&&x.createSharedAsset===true){var M='<div class="perc-content-edit-share">';M+='<form action="">';M+='<input type="checkbox" id="perc-content-edit-share-checkbox" name="perc-content-edit-share-checkbox" />';M+='<label for="perc-content-edit-share-checkbox">'+I18N.message("perc.ui.saveasdialog.label@Shared Asset")+"</label>";M+="</form>";M+="</div>";K.parent().find(".ui-dialog-buttonpane").append(M)}b.PercContentPreSubmitHandlers.clearHandlers();b("#edit-widget-content-frame").load(function(){if(j==false){j=true;L()}else{z()}});var P=b("#edit-widget-content").get(0);b.data(P,"pageid",J);b.data(P,"assetid",G);b.data(P,"widgetData",e)}function L(){if(x.assetType=="shared"){var O="This is a shared Asset.  Your edits will take effect on all pages that use this Asset.";var M=C("#perc-content-edit-content-top-placeholder");M.addClass("perc_shared_asset_edit_warning perc-asset-edit-info-line");M.html(O);M.show();if(I!=undefined&&I!=""){var N='<label for="perc-content-edit-meta-data-item_folder_path" >Folder path:</label> <br/><div id="perc-content-edit-meta-data-item_folder_path" class="datadisplay">'+x.folderPath+"</div> <br/>";C("#perc-content-edit-meta-data-top-placeholder").html(N);C("#perc-content-edit-metadata-panel").show();C("#perc-site-impact-panel").show();b.PercSiteImpactView.renderSiteImpact(I,b.PercSiteImpactView.ITEM_TYPE_ASSET,C("#perc-site-impact-panel"))}}}function F(){var M=b("#edit-widget-content").get(0);if(b.data(M,"assetid")){k(null,null)}else{if(x.producesResource){b.perc_browser({on_save:A,initial_val:""})}else{k(x.contentName,null)}}}function A(P,N,M,O){b.perc_pathmanager.open_containing_folder(P,function(R){var Q=b.grep(R.PathItem,function(S){return S.name==N});if(Q.length){O(I18N.message("perc.ui.saveasdialog.error@Duplicate asset"))}else{b.perc_pathmanager.open_path(y.acop(P),false,function(S){k(N,S.PathItem["folderPath"]);M()},O)}},O)}function k(N,M){b.PercBlockUI();var Q=x.url;b.data(b("#edit-widget-content").get(0),"folderPath",M);Q=Q.split("?")[0];if(N&&N!=""){C("#perc-content-edit-sys_title").val(N)}var O=b("#edit-widget-content").get(0);if(!(b.data(O,"assetid"))&&x.workflowId){C("#perc-content-edit-sys_workflowid").val(x.workflowId)}b.perc_utils.debug("Doing a save asset:");b.perc_utils.debug(x);if(x.producesResource){var R=x.legacyFolderId;Q=Q+"?sys_folderid="+R+"&sys_asset_folderid="+R}C("#perc-content-form").attr("action",Q);var P=true;b.each(b.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){P=false}});if(!P){b.unblockUI();return}b.PercContentPreSubmitHandlers.clearHandlers();b("#edit-widget-content-frame").contents().find("#perc-content-form").submit()}function B(O,N,M){return true}function z(){if(b("#edit-widget-content-frame").contents().find("#perc-content-edit-errors").length>0){b.unblockUI();return}var O=b("#edit-widget-content").get(0);var P=b.data(O,"assetid");var Q=b.data(O,"widgetData");var N=b.data(O,"folderPath");var M=x.producesResource;if(!P||P==""){P="-1-101-"+b("#edit-widget-content-frame").contents().find("[name=sys_contentid]").val();b.PercAssetService.set_relationship(P,Q,J,"1",M,N,function(){E(P,M);b.unblockUI()},function(R){b.unblockUI();var S=b.PercServiceUtils.extractDefaultErrorMessage(R);b.perc_utils.alert_dialog({title:"Error",content:S})})}else{b.PercAssetService.updateAsset(J,P,function(){E(P,M);b.unblockUI()})}setTimeout(H,500)}function H(){var M=K.parent().find("#perc-content-edit-share-checkbox:checked");var N=M.length>0;b("#edit-widget-content-frame").remove();b("#edit-widget-content").remove();if(N){b.perc_save_as_shared_asset_dialog.createDialog({widgetData:e,assetId:I,parentId:J,onSave:function(O){E(O,false)}})}}function C(M){var N=D();return b(M,N)}function D(){var M=null;for(i=0;i<frames.length;i++){if(frames[i].name=="edit-widget-content-frame"){M=frames[i].document;break}}return M}}})(jQuery);(function(e){var b=e.perc_utils;e.perc_load_template=function(h,x){j();function n(){function y(z){q().each(function(){var A=e(this).attr("widgetid");e(this).attr("id",A);var C=z[A];function B(F){var E=F.data("spec")&&F.data("spec").type;return E&&C&&(E==C||e.grep(C,function(G){return G==E}).length)}e(this).droppable("option","accept",B);var D={widgetid:A,widgetdefid:e(this).attr("widgetdefid"),widgetName:e(this).attr("widgetName")};e(this).droppable("option","drop",function(E,G){var F=G.draggable.data("spec").id;if(F){e.PercAssetService.set_relationship(F,D,h,"1",true,null,j,b.show_error)}})})}e.perc_pagemanager.get_widget_ctypes(h,false,y,b.show_error)}function j(){e.perc_templatemanager.load_template(h,function(z){var y=e.xmlDOM(z).find("rootRegion>children>region>regionId").text();e.perc_templatemanager.render_region(y,z,function(A){x.html(e(A).find("result").text());e.xmlDOM(z).find("widgetItem").each(function(){x.find("#"+e(this).find("id").text()).data("widget",{widgetid:e(this).find("id").text(),widgetdefid:e(this).find("definitionId").text()})});f()})})}function f(){var y=[{icon:function(){return e("<a class='perc-widget-delete' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(B,z,A,C){k(B,z,A,C)}},{icon:function(){return e("<a class='perc-widget-edit' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/edit.png'></img></div>")},action:function(B,z,A,C){e.perc_asset_edit_dialog(j,function(){},B,z,A,C,"template")}}];q().perc_decorate(true,y,h).droppable({accept:"#nothing",scope:e.perc_iframe_scope,activeClass:"perc-widget-active",hoverClass:"perc-widget-hover"});n()}function k(A,y,z,C){var B={AssetWidgetRelationship:{ownerId:C,widgetId:y,widgetName:z,assetId:A,assetOrder:"0"}};e.ajax({url:e.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(B),success:function(E,D){j()},error:function(F,D,E){var G=e.PercServiceUtils.extractDefaultErrorMessage(F);e.perc_utils.alert_dialog({title:"Error",content:E})}})}function q(){return x.find(".perc-widget")}};e.perc_content_viewer=function(K){var W={};var U=false;var aa=null;var O=null;var x=null;var C=true;var Q=[];var B=null;var f=b.id;var D=null;var j={CONTENT:"CONTENT",LAYOUT:"LAYOUT"};var N={};e.extend(W,N,K);var S={isPageDirty:y,setPageDirty:ac,reload:Z,openPage:X,resetPageName:k,savePage:Y,getPageId:E,previewPage:T,switchToContent:ad,switchToLayout:I,addWidgetAssociation:ab,confirm_if_dirty:q,clear:P};return S;function q(ae,ah,ag){ag=ag||{};ah=ah||function(){};var af={id:"perc-editor-page-dirty",title:"Unsaved Changes",question:"This page contains unsaved changes. If you continue, all changes will be lost. Click OK to proceed and discard changes, Cancel to return to the page you were editing.",success:ae,cancel:ah,yes:"Continue anyway"};e.extend(af,ag);if(U){b.confirm_dialog(af)}else{ae()}}function E(){return aa}function k(){e.ajax({url:e.perc_paths.PAGE_CREATE+"/"+E(),success:function(ae){e("#perc-pageEditor-menu-name").html(ae.Page.name)},type:"GET",dataType:"json"})}function y(){return U}function ac(ae){U=ae}function T(){var ae=E();if(!ae){alert("No page is open for the preview.");return}if(y()){alert("This page has been changed. You must save the page to preview it.");e.fn.jmodal({data:{innerText:"Yes!"},title:"Information",content:"No Preview Available!",buttonText:{button1:"Yes",button2:"No",button3:""},fixed:true,button1Event:function(ah,ag){alert(ah.innerText);ag.complete()},button2Event:function(ah,ag){alert(ah.innerText);ag.complete()},button3Event:function(ah,ag){alert(ah.innerText);ag.complete()}});return}var af=e.perc_paths.PAGE_PREVIEW+ae;window.open(af,ae.replace(/-/g,"_"),"",true)}function G(){e.perc_page_edit_dialog(K.mcol,S,E())}function X(af,ae){q(function(){F(af,ae)})}function F(ah,ae){aa=ah;O=ae;e("#perc-pageEditor-menu-name").html(ae);e("#perc-pageEditor-show-hide").unbind().perc_button().removeClass("ui-state-disabled").html(I18N.message("perc.ui.webmgt.pageeditor.menu@Hide")).click(function(){C=!C;var ai=C?I18N.message("perc.ui.webmgt.pageeditor.menu@Hide"):I18N.message("perc.ui.webmgt.pageeditor.menu@Show");e(this).html(ai);z()});e("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").click(function(){G()});e("#perc-preview-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").click(function(){T()});var af=e("#perc-pageEditor-tabs");af.tabs("enable");af.tabs("select",0);var ag=false;af.tabs("option","select",function(ai,aj){if(ag){ag=false;return true}if(aj.index==0){q(function(){ad();ag=true;af.tabs("select",0)});return false}else{q(function(){I();ag=true;af.tabs("select",1)});return false}});ad()}function P(){aa=null;O=null;e("#perc-pageEditor-menu-name").html("");e("#perc-pageEditor-show-hide").unbind().addClass("ui-state-disabled");e("#perc-metadata-button").unbind().addClass("ui-meta-pre-disabled");e("#perc-preview-button").unbind().addClass("ui-meta-pre-disabled");var ae=e("#perc-pageEditor-tabs");ae.tabs("disable");if(e.perc_use_iframe){e("#perc-pageEditor-content").contents().find("body").empty()}else{e("#perc-pageEditor-content").empty()}}function ad(){if(B){B.close()}L(j.CONTENT);f=R;e("#perc-content").append(e("#perc-pageEditor-content"));Z()}function R(){e("#perc-widget-library-button").unbind().addClass("ui-state-disabled");Q=[{icon:function(){return e("<a class='perc-widget-delete' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(ah,af,ag,ae){A(ah,af,ag,ae)}},{icon:function(){return e("<a class='perc-widget-edit' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/edit.png'></img></div>")},action:function(ah,af,ag,ae){e.perc_asset_edit_dialog(Z,function(){},ah,af,ag,ae)}}]}function L(ae){if(ae==j.CONTENT){e("#perc-widget-library-button").hide();e("#perc-metadata-button").show()}else{if(ae==j.LAYOUT){e("#perc-widget-library-button").show();e("#perc-metadata-button").hide()}}}function A(ah,af,ag,ae){var ai={AssetWidgetRelationship:{ownerId:ae,widgetId:af,widgetName:ag,assetId:ah,assetOrder:"0"}};e.ajax({url:e.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(ai),success:function(ak,aj){Z()},error:function(al,aj,ak){alert(ak)}})}function I(){L(j.LAYOUT);f=h;e("#perc-layout").append(e("#perc-pageEditor-content"));Z()}function h(){B=e.perc_create_widget_library($j("#perc-widget-library-button"));Q=[{icon:function(){return e("<a href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(af,ae){alert("Delete not yet supported")}},{icon:function(){return e("<a href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/configure.png'></img></a>")},action:function(af,ae){alert("Configuration is not yet defined")}}]}function Z(){var ai=e.perc_paths.PAGE_EDIT+"/"+aa;if(e.perc_use_iframe){var ag="<style>.perc-region{ min-height: 50px; } .perc-region-visible-grid{ border: 1px dotted #000000; }  .perc-widget{ height: 100px; width: 100%; position: relative; }  .perc-widget-visible-grid{ border: 1px dashed blue; }  div.perc-region-hover { border: thick dotted green; }  .perc-region-active { border: thick dashed green; }  div.perc-widget-hover { background-color: blue; }  .perc-widget-active { background-color: yellow; }  .perc-widget-menubar{ position: absolute; right: 0; top: 0; }  .perc-widget-menubar ul{ }  .perc-widget-menubar li{ font-family: Arial; font-size: 10px; display: inline; padding: 1px; }  .perc-widget-menubar li a{ cursor: pointer; }.perc-show-feedback { background-color: grey; border: 2px solid green; }</style>";if(e.browser.mozilla){var ae=e("#perc-pageEditor-content");ae.unbind(".reload");ae.bind("load.reload",function(){ae.contents().find("body").append(e(ag));z();n()});ae[0].src=ai}else{function af(ak){var aj=e("#perc-pageEditor-content");aj.contents().remove();var al=aj.contents()[0];al.open();al.write(ak);al.close();aj.contents().find("body").append(e(ag))}e.perc_pagemanager.render_page(E(),function(aj){af(aj);z();n()})}}else{function ah(aj){e("#perc-pageEditor-content").empty().append(e(aj))}e.perc_pagemanager.render_page(E(),function(aj){ah(aj);z();n()})}}function z(){f();V().perc_decorate(C,Q,aa).droppable({accept:"#nothing",scope:e.perc_iframe_scope,activeClass:"perc-widget-active",hoverClass:"perc-widget-hover"});M().perc_decorate(C,Q,aa).droppable({accept:".perc-widget",scope:e.perc_iframe_scope,activeClass:"perc-region-active",hoverClass:"perc-region-hover",drop:function(ae,ag){if(ag.draggable.data("widget")){var af=ag.draggable.data("widget").id;ab(af,e(this))}}})}function V(){if(e.perc_use_iframe){return e("#perc-pageEditor-content").contents().find(".perc-widget")}return e("#perc-pageEditor-content").find(".perc-widget")}function M(){if(e.perc_use_iframe){return e("#perc-pageEditor-content").contents().find(".perc-region")}return e("#perc-pageEditor-content").find(".perc-region")}function n(){function ae(af){V().each(function(){var ag=e(this).attr("widgetid");var aj=af[ag];function ai(al){var ak=al.data("spec")&&al.data("spec").type;return ak&&aj&&(ak==aj||e.grep(aj,function(am){return am==ak}).length)}e(this).droppable("option","accept",ai);var ah=e(this).attr("widgetdefid");e(this).droppable("option","drop",function(ak,am){var al=am.draggable.data("spec").id;if(al){e.PercAssetService.set_relationship(al,ag,ah,aa,"1",function(){S.reload()},b.show_error)}})})}e.perc_pagemanager.get_widget_ctypes(aa,true,ae,b.show_error)}function ab(af,ae){var ag=ae.attr("id");e.ajax({url:e.perc_paths.PAGE_CREATE+"/"+E(),success:function(ah){x=b.unxml(e.perc_schemata.page,e(ah));H(af,ag,function(){Z()})},type:"GET",dataType:"xml"})}function H(ah,ai,af){var ag=x.Page.regionBranches.regionWidgetAssociations;var ae=e.grep(ag,function(aj){return aj.regionId==ai});if(ae.length>0){ae=ae[0]}else{ae={regionId:ai,widgetItems:[],_tagName:"regionWidget"};ag.push(ae)}ae.widgetItems.push({definitionId:ah,_tagName:"widgetItem"});e.ajax({url:e.perc_paths.PAGE_CREATE+"/",dataType:"json",contentType:"application/xml",type:"POST",data:b.rexml(e.perc_schemata.page,x),success:af,error:function(al,aj,ak){alert("Unable to add widget "+ah+" to region "+ai+".")}})}function Y(){}function J(){}}})(jQuery);(function(e){e.PercSiteImpactService={getSiteImpactDetails:b};function b(h,j){var f=e.perc_paths.ASSET_SITE_IMPACT+"/"+h;e.PercServiceUtils.makeJsonRequest(f,e.PercServiceUtils.TYPE_GET,true,j)}})(jQuery);(function(h){h.perc_schemata=h.perc_schemata||{};var e="<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Page><name>Page Name</name><templateId>2000</templateId><folderPath>//folderpath</folderPath><author>authorName</author><id>1000</id><category>PAGE</category><regionBranches><regionWidgetAssociations><regionWidget><regionId>rid</regionId><widgetItems><widgetItem><definitionId>STUFF</definitionId><properties><property><name>AAA</name><value>BBB</value></property></properties></widgetItem></widgetItems></regionWidget></regionWidgetAssociations><regions><region><regionId>templateRegion</regionId><children><region><regionId>rid</regionId><children><code><templateCode>#region('' '' '' '' '')</templateCode></code></children></region></children></region></regions></regionBranches></Page>";var j,f,b;f={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return f}alert("Unhandled case");return"$"}],endTag:"$"};b={Page:{id:"$",category:"$",folderPaths:"$",name:"$",type:"$",folderPath:"$",author:"$",linkTitle:"$",templateId:"$",title:"$",footer:"$",header:"$",keywords:["$"],description:"$",tags:["$"],additionalHeadContent:"$",afterBodyStartContent:"$",beforeBodyCloseContent:"$",regionBranches:{regions:[j],regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};h.extend(h.perc_schemata,{page:b,page_test_data:e})})(jQuery);(function(h){var j,e,f;e={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return e}alert("Unhandled case");return"$"}],endTag:"$",cssClass:"$"};f={Template:{id:"$",description:"$",imageThumbPath:"$",label:"$",name:"$",readOnly:"$",sourceTemplateName:"$",bodyMarkup:"$",cssOverride:"$",cssRegion:"$",type:"$",theme:"$",htmlHeader:"$",regionTree:{rootRegion:j,regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",name:"$",description:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};var b='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Template><id>16777215-101-710</id><description></description><imageThumbPath></imageThumbPath><label>Plain</label><name>Test3 Templ</name><readOnly>false</readOnly><sourceTemplateName>perc.base.plain</sourceTemplateName><bodyMarkup>#perc_templateHeader()&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;#perc_templateFooter()</bodyMarkup><cssOverride></cssOverride><cssRegion></cssRegion><htmlHeader></htmlHeader><regionTree><regionWidgetAssociations/><rootRegion><regionId>percRoot</regionId><children><code><templateCode>#perc_templateHeader()</templateCode></code><region><regionId>container</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-20</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-22</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-23</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-21</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>#perc_templateFooter()</templateCode></code></children></rootRegion></regionTree><theme></theme></Template>';h.perc_schemata=h.perc_schemata||{};h.extend(h.perc_schemata,{template:f,template_test_data:b})})(jQuery);(function($,P){var modelObject;P.templateModel=function(templateManager,templateId,callback){var utils=$.perc_utils;var templObj;var root;var cssObj={themeName:null,cssOverride:null};var regionIds={};var regcount=1;var javaScriptOff=false;var assetDropCriteria={};var pageAssetDropCriteria={};var templateService=$.PercTemplateService();var widgetContentTypes={};var widgetPrefs={};load();modelObject={save:save,load:load,editWidget:editWidget,editRegion:editRegion,editRegionParent:editRegionParent,eachRegion:eachRegion,getRegionPosition:getRegionPosition,newRegion:newRegion,newResponsiveRegion:newResponsiveRegion,getRoot:getRoot,render:render,renderAll:renderAll,getTemplateRegionIds:getTemplateRegionIds,canOverride:canOverride,getName:getName,getAssetDropCriteria:getAssetDropCriteria,getPageAssetDropCriteria:getPageAssetDropCriteria,loadAssetDropCriteria:loadAssetDropCriteria,getWidgetContentTypes:getWidgetContentTypes,getWidgetPrefs:getWidgetPrefs,clearAsset:clearAsset,configureAsset:configureAsset,promoteAsset:promoteAsset,setAssetRelationship:setAssetRelationship,getSpecialWidgets:getSpecialWidgets,getType:getType,getTemplateType:getTemplateType,isPage:isPage,isTemplate:isTemplate,isTemplateLeaf:isTemplateLeaf,containsRegionId:containsRegionId,getWidgetByName:getWidgetByName,getId:getId,getCSSObj:getCSSObj,setCSSObj:setCSSObj,getThemeList:getThemeList,getThemeCSS:getThemeCSS,isJavaScriptOff:isJavaScriptOff,setJavaScriptOff:setJavaScriptOff,findWidgetParentRegion:findWidgetParentRegion,getTemplateObj:getTemplateObj,renderByObject:renderByObject,isResponsiveBaseTemplate:isResponsiveBaseTemplate};return modelObject;function isResponsiveBaseTemplate(){var srcTpl=templObj.Template.sourceTemplateName;return srcTpl.indexOf("perc.resp.")==0}function getId(){return templateId}function getTemplateObj(){return templObj}function isJavaScriptOff(){return javaScriptOff}function setJavaScriptOff(so){javaScriptOff=so}function containsRegionId(regionId){var contains=false;eachRegion(function(){if(this.regionId==regionId){contains=true;return false}});return contains}function load(){templateManager.load_template(templateId,function(xml){templObj=utils.unxml($.perc_schemata.template,$.xmlDOM(xml));root=P.regionsFromTree(templObj.Template.regionTree.rootRegion,templObj.Template.regionTree.regionWidgetAssociations,"template");eachRegion(function(){regionIds[this.regionId]=true});loadWidgetPrefs();cssObj.themeName=templObj.Template.theme;cssObj.cssOverride=templObj.Template.cssOverride;loadPageAssetDropCriteria(function(){});loadAssetDropCriteria(function(adc){for(widgetId in assetDropCriteria){widgetContentTypes[widgetId]=assetDropCriteria[widgetId].supportedContentTypes}callback()});$.PercNavigationManager.setTemplateModel(modelObject)})}function getName(){return templObj.Template.name}function isTemplateLeaf(){}function getType(){return"template"}function getTemplateType(){return templObj.Template.type}function isPage(){return false}function isTemplate(){return true}function canOverride(region){return false}function getCSSObj(){return cssObj}function setCSSObj(newcssObj){cssObj=newcssObj}function getThemeList(callback){templateService.getThemeList(function(status,data){if(status==true){callback(true,data)}else{callback(false,data)}})}function getThemeCSS(callback){themeName=getCSSObj().themeName;if(themeName!=null&&themeName!=""){templateService.getThemeCSS(themeName,function(status,data){if(status==true){callback(true,data)}else{callback(false,data)}})}else{data={};data.text=function(){return"No Theme has been selected."};callback(false,data)}}function setAssetRelationship(widgetData,assetid,isResource,callback){$.PercAssetService.set_relationship(assetid,widgetData,templateId,"1",isResource,null,callback,utils.show_error)}function getAssetDropCriteria(){return assetDropCriteria}function getPageAssetDropCriteria(){return pageAssetDropCriteria}function loadWidgetPrefs(){eachRegion(function(){$.each(this.widgets,function(){var defid=this.definitionId;if(!widgetPrefs[defid]){$.perc_widget_definition_client.restGetWidgetPrefs(defid,function(wPrefs){widgetPrefs[defid]=wPrefs})}})})}function loadAssetDropCriteria(callback){templateService.getAssetDropCriteria(templateId,false,function(adc){assetDropCriteria=adc;callback(adc)},function(request){var defaultMsg=$.PercServiceUtils.extractDefaultErrorMessage(request);$.perc_utils.alert_dialog({title:"Error",content:defaultMsg})})}function loadPageAssetDropCriteria(callback){if(typeof(gPageId)!="undefined"&&gPageId){templateService.getAssetDropCriteria(gPageId,true,function(adc){pageAssetDropCriteria=adc;callback()},function(request){$.unblockUI();var memento={templateId:gSelectTemp,pageId:null};var querystring=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,querystring.site,null,null,null,querystring.path,null,memento)})}else{callback()}}function getWidgetContentTypes(widgetid){return widgetContentTypes[widgetid]}function getWidgetPrefs(widgetDefId){return widgetPrefs[widgetDefId]}function clearAsset(widgetId,widgetDefinitionId,assetId,callback){if(assetId){$.PercAssetService.clear_asset(templateId,widgetId,widgetDefinitionId,assetId,callback)}}function configureAsset(widgetData,assetId,isSharedAsset,callback){var wfCallBack=function(aId,producesResource){$.PercWorkflowController().checkIn(aId,function(status){callback()})};var cancelCallback=function(aId){if(aId){$.PercWorkflowController().checkIn(aId,function(status){})}};if(assetId){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){$.perc_asset_edit_dialog(wfCallBack,cancelCallback,assetId,widgetData,templateId,"template")}else{callback()}})}else{$.perc_asset_edit_dialog(wfCallBack,cancelCallback,assetId,widgetData,templateId,"template")}}function promoteAsset(assetId,widgetData,isResource,callback){$.PercAssetService.promoteAsset(assetId,widgetData,templateId,"1",isResource,function(status,message){if(status==$.PercServiceUtils.STATUS_SUCCESS){callback()}else{$.perc_utils.alert_dialog({title:"Error",content:message})}})}function getSpecialWidgets(viewType){var specialWidgets={LockedWidgets:{},TransperantWidgets:{},ContentWidgets:{}};var lockedWidgets={};var transparentWidgets={};var contentWidgets={};$.each(pageAssetDropCriteria,function(){var twadc=assetDropCriteria[this.widgetId];if(!twadc){lockedWidgets[this.widgetId]=this.widgetId;transparentWidgets[this.widgetId]=this.widgetId}else{if(!twadc.locked&&this.locked){transparentWidgets[this.widgetId]=this.widgetId}}});$.each(assetDropCriteria,function(){if(this&&this.locked){contentWidgets[this.widgetId]=this.widgetId}});specialWidgets.LockedWidgets=lockedWidgets;specialWidgets.TransperantWidgets=transparentWidgets;specialWidgets.ContentWidgets=contentWidgets;return specialWidgets}function getWidgetByName(widgetName){var widget=null;eachRegion(function(){$.each(this.widgets,function(){if(typeof(this.name)=="string"&&this.name.toUpperCase()==widgetName.toUpperCase()){widget=this}})});return widget}function editWidget(widgetId,callback){var found=false;eachRegion(function(){$.each(this.widgets,function(){if(this.id==widgetId){callback.call(this);found=true}});return !found});return found}function getRoot(){return root}function newRegion(){var regionId="temp-region-"+regcount;while(regionIds[regionId]){regcount++;regionId="temp-region-"+regcount}regionIds[regionId]=true;return{children:[],widgets:[],vertical:true,regionId:regionId,fixed:false,width:"",height:"",owner:"template"}}function newResponsiveRegion(isRow,cols){var regionId="temp-region-"+regcount;while(regionIds[regionId]){regcount++;regionId="temp-region-"+regcount}regionIds[regionId]=true;var large=isRow?"":cols?"large-"+cols:"large-1";return{children:[],widgets:[],regionId:regionId,row:isRow,columns:!isRow,large:large,owner:"template"}}function getTemplateRegionIds(){return regionIds}function editRegion(regionId,callback){var found=false;eachRegion(function(){if(this.regionId==regionId){callback.call(this);found=true;return false}else{return true}});return found}function editRegionParent(regionId,callback){var found=false;eachRegion(function(){var r=[];if(this.children){r=$.grep(this.children,function(c){return c.regionId==regionId})}if(r.length>0){callback.call(this);found=true;return false}return true});return found}function getRegionPosition(regionId){var position=-1;var parentReg=null;editRegionParent(regionId,function(){parentReg=this;var found=false;$.each(parentReg.children,function(){position++;if(this.regionId===regionId){found=true;return false}})});return position}function eachRegion(callback){_eachRegion(root,callback)}function _eachRegion(tree,callback){if(false===callback.call(tree)){return}if(typeof(tree)=="undefined"||typeof(tree.children)=="undefined"||typeof(tree.children.length)=="undefined"){return}$.each(tree.children,function(){_eachRegion(this,callback)})}function findWidgetParentRegion(widgetId,callback){var found=false;eachRegion(function(){var parentRegionId=this.regionId;$.each(this.widgets,function(){if(this.id==widgetId){callback(parentRegionId);found=true}});return !found});return found}function save(postCallback,newWidgetObj,requireMigration){updateTemplObj();var saveAssetsCallback=function(){$.PercTemplateService().updateInspectedElements(newWidgetObj,function(status,result){if(status){postCallback()}else{}})};if(newWidgetObj){callback=saveAssetsCallback}else{callback=postCallback}templateManager.save_template(templateId,requireMigration,utils.rexml($.perc_schemata.template,templObj),callback)}function renderAll(frame,callback){function finish(){callback()}var rootPath=javaScriptOff?$.perc_paths.TEMPLATE_RENDER_SCRIPTSOFF:$.perc_paths.TEMPLATE_RENDER;var renderPath=rootPath+"/"+templateId+"?timestamp="+new Date().getTime();if(typeof(gPageId)!="undefined"&&gPageId){rootPath=javaScriptOff?$.perc_paths.PAGE_EDIT_SCRIPTSOFF:$.perc_paths.PAGE_EDIT;renderPath=rootPath+"/"+gPageId+"?editType=TEMPLATE&timestamp="+new Date().getTime()}$.PercBlockUI($.PercBlockUIMode.CURSORONLY);frame.contents().remove();frame.attr("src",renderPath);frame.unbind().load(function(){loadAssetDropCriteria(function(){loadPageAssetDropCriteria(function(){$.unblockUI();callback()})})})}function render(callback){updateTemplObj();templateManager.render_region(root.children[0].regionId,utils.rexml($.perc_schemata.template,templObj),gPageId,function(data){callback($(data).find("result").text())})}function renderByObject(tObj,callback){templObj=tObj;root=P.regionsFromTree(templObj.Template.regionTree.rootRegion,templObj.Template.regionTree.regionWidgetAssociations,"template");templateManager.render_region(root.children[0].regionId,utils.rexml($.perc_schemata.template,templObj),gPageId,function(data){callback($(data).find("result").text())})}function updateTemplObj(){templObj.Template.regionTree.rootRegion=P.treeFromRegions(root,true);templObj.Template.regionTree.regionWidgetAssociations=createRegionWidgetAssociations(root);var cssObj=getCSSObj();templObj.Template.cssOverride=cssObj.cssOverride;templObj.Template.theme=cssObj.themeName}function createRegionWidgetAssociations(root){if(root.widgets.length>0){return[{_tagName:"regionWidget",regionId:root.regionId,widgetItems:$.map(root.widgets,function(w){return P.widgetItemFromWidget(w)})}]}else{return $.map(root.children,function(c){return createRegionWidgetAssociations(c)})}}};P.regionsFromTree=function(tree,regionWidgetAssociations,owner){return modelObject.isResponsiveBaseTemplate()?P.respRegionsFromTree(tree,regionWidgetAssociations,owner):P.baseRegionsFromTree(tree,regionWidgetAssociations,owner)};P.baseRegionsFromTree=function(tree,regionWidgetAssociations,owner){var regId=tree.regionId;var widgets=$.grep(regionWidgetAssociations,function(a){return a.regionId==regId});if(widgets[0]){widgets=$.map(widgets[0].widgetItems,function(w){return P.widgetFromWidgetItem(w)})}else{widgets=[]}var openTag=tree.startTag||"perc-vertical perc-fixed";var fixed=!!openTag.match(/perc-fixed/);var vertical=!!openTag.match(/perc-vertical/);var height=openTag.match(/height[^:]*:([^;]*);/);height=height?$.trim(height[1]):"";var width=openTag.match(/width[^:]*:([^;]*);/);width=width?$.trim(width[1]):"";var padding=openTag.match(/padding[^:]*:([^;]*);/);padding=padding?$.trim(padding[1]):"";var margin=openTag.match(/margin[^:]*:([^;]*);/);margin=margin?$.trim(margin[1]):"";var noAutoResize=$(openTag).attr("noAutoResize");var tempNoAutoResize=noAutoResize==""||noAutoResize==undefined?false:eval(noAutoResize);if(noAutoResize!=undefined){$(openTag).removeAttr("noAutoResize");$(openTag).attr("data-noautoresize",tempNoAutoResize);noAutoResize=tempNoAutoResize}else{noAutoResize=$(openTag).attr("data-noautoresize");noAutoResize=noAutoResize==""||noAutoResize==undefined?false:eval(noAutoResize)}var vspan=openTag.match(/vspan_[0-9]*/);vspan=vspan?$.trim(vspan[0]):"";var hspan=openTag.match(/hspan_[0-9]*/);hspan=hspan?$.trim(hspan[0]):"";var subTrees=$.grep(tree.children,function(c){return c._tagName=="region"});var subRegions=$.map(subTrees,function(r){return P.baseRegionsFromTree(r,regionWidgetAssociations,owner)});subRegions=subRegions?subRegions:[];var region={regionId:regId,noAutoResize:noAutoResize,vertical:vertical,children:subRegions,widgets:widgets,fixed:fixed,width:width,height:height,owner:owner,margin:margin,padding:padding,vspan:vspan,hspan:hspan,cssClass:tree.cssClass};return region};P.respRegionsFromTree=function(tree,regionWidgetAssociations,owner){var regId=tree.regionId;var widgets=$.grep(regionWidgetAssociations,function(a){return a.regionId==regId});if(widgets[0]){widgets=$.map(widgets[0].widgetItems,function(w){return P.widgetFromWidgetItem(w)})}else{widgets=[]}var openTag=tree.startTag||"row";var row=!!openTag.match(/row/);var columns=!!openTag.match(/columns/);var large=openTag.match(/large-[0-9]*/);large=large?$.trim(large[0]):"";var padding=openTag.match(/padding[^:]*:([^;]*);/);padding=padding?$.trim(padding[1]):"";var margin=openTag.match(/margin[^:]*:([^;]*);/);margin=margin?$.trim(margin[1]):"";var subTrees=$.grep(tree.children,function(c){return c._tagName=="region"});var subRegions=$.map(subTrees,function(r){return P.respRegionsFromTree(r,regionWidgetAssociations,owner)});subRegions=subRegions?subRegions:[];var region={regionId:regId,row:row,children:subRegions,widgets:widgets,columns:columns,large:large,owner:owner,margin:margin,padding:padding,cssClass:tree.cssClass};return region};P.widgetFromWidgetItem=function(widgetItem){var properties=[];$.each(widgetItem.properties,function(){properties[this.name]=JSON.parse(this.value||"")});var cssProperties=[];if(widgetItem.cssProperties){$.each(widgetItem.cssProperties,function(){cssProperties[this.name]=JSON.parse(this.value||"")})}return{id:widgetItem.id,definitionId:widgetItem.definitionId,name:widgetItem.name,description:widgetItem.description,properties:properties,cssProperties:cssProperties}};P.treeFromRegions=function(region,isTop){return modelObject.isResponsiveBaseTemplate()?P.respTreeFromRegions(region,isTop):P.baseTreeFromRegions(region,isTop)};P.baseTreeFromRegions=function(region,isTop){var leaf=region.children.length==0?" perc-region-leaf":"";var fixed=region.fixed?" perc-fixed ":"";var direction=region.vertical?" perc-vertical ":" perc-horizontal ui-helper-clearfix ";var padding=region.padding?"padding: "+region.padding+";":"";var margin=region.margin?"margin: "+region.margin+";":"";var hspan=region.hspan?" "+region.hspan+" ":" ";var vspan=region.vspan?" "+region.vspan+" ":" ";var cssClass=region.cssClass?" "+region.cssClass+" ":" ";var noAutoResize=region.noAutoResize?" perc-noAutoResize ":" ";var startTag="<div ";if(region.height||region.width||region.padding||region.margin){startTag+='style="';if(region.height){if(!isNaN(region.height)){region.height+="px"}startTag+="height:"+region.height+";"}if(region.width){if(!isNaN(region.width)){region.width+="px"}startTag+="width:"+region.width+";"}startTag+=padding+margin+'"'}startTag+=" class="+('"perc-region'+leaf+noAutoResize+fixed+direction+hspan+vspan+cssClass).replace(/\s\s+/g," ")+'"  data-noautoresize="'+region.noAutoResize+'" id="'+region.regionId+'"> <div class="'+direction+'">';var endTag="</div></div>";var children;if(leaf){children=[{_tagName:"code",templateCode:'#region("'+region.regionId+'","","","","")'}]}else{children=$.map(region.children,function(c){return P.baseTreeFromRegions(c)});if(isTop){var startChild={_tagName:"code",templateCode:"#perc_templateHeader()"};var endChild={_tagName:"code",templateCode:"#perc_templateFooter()"};children.unshift(startChild);children.push(endChild)}}if(isTop){return{children:children,regionId:region.regionId}}else{return{_tagName:"region",noAutoResize:region.noAutoResize,regionId:region.regionId,startTag:startTag,endTag:endTag,children:children,cssClass:region.cssClass}}};P.respTreeFromRegions=function(region,isTop){var leaf=region.children.length==0?" perc-region-leaf":"";var row=region.row?" row ":"";var columns=region.columns?" columns ":"";var large=region.large?" "+region.large+" ":"";var padding=region.padding?"padding: "+region.padding+";":"";var margin=region.margin?"margin: "+region.margin+";":"";var cssClass=region.cssClass?" "+region.cssClass+" ":" ";var startTag="<div ";if(region.padding||region.margin){startTag+='style="';startTag+=padding+margin+'"'}startTag+=' class="perc-region'+leaf+row+columns+large+cssClass+'" id="'+region.regionId+'">';var endTag=" </div> ";var children;if(leaf){children=[{_tagName:"code",templateCode:'#region("'+region.regionId+'","","","","")'}]}else{children=$.map(region.children,function(c){return P.respTreeFromRegions(c)});if(isTop){var startChild={_tagName:"code",templateCode:"#perc_templateHeader()"};var endChild={_tagName:"code",templateCode:"#perc_templateFooter()"};children.unshift(startChild);children.push(endChild)}}if(isTop){return{children:children,regionId:region.regionId}}else{return{_tagName:"region",regionId:region.regionId,startTag:startTag,endTag:endTag,children:children,cssClass:region.cssClass}}};P.widgetItemFromWidget=function(widget){var properties=[];delete widget.properties.sys_perc_name;delete widget.properties.sys_perc_description;if(widget.properties){for(prop in widget.properties){properties.push({_tagName:"property",name:prop,value:JSON.stringify(widget.properties[prop])})}}var cssProperties=[];if(widget.cssProperties){for(prop in widget.cssProperties){cssProperties.push({_tagName:"property",name:prop,value:JSON.stringify(widget.cssProperties[prop])})}}return{_tagName:"widgetItem",id:widget.id,definitionId:widget.definitionId,name:widget.name,description:widget.description,properties:properties,cssProperties:cssProperties}};$.PercTemplateMetadataModel=function(id,additionalHeadContent,beforeBodyCloseContent,afterBodyStartContent,protectedRegion,protectedRegionText){this.id=id;this.additionalHeadContent=additionalHeadContent;this.beforeBodyCloseContent=beforeBodyCloseContent;this.afterBodyStartContent=afterBodyStartContent;this.protectedRegion=protectedRegion;this.protectedRegionText=protectedRegionText}})(jQuery,jQuery.Percussion);(function(e,b){b.layoutController=function(x){var A=e("#frame");return{addRegion:L,moveRegion:S,removeRegion:h,removeWidgetParentRegion:N,addWidget:y,moveWidget:f,removeWidget:k,convertHTMLWidget:z};function z(U,Y){var X=K();var V={_tagName:"widgetItem",definitionId:"percRichText",name:U.name,id:X,properties:[]};I(U.regionId,V,U.id);if(typeof(U.assetId)!="undefined"&&U.assetId){var T=x.getAssetDropCriteria()[U.id];var W={PSCreateAssetRequest:{originalAssetId:U.assetId,ownerId:U.ownerId,widgetId:X,widgetName:U.name,targetAssetType:"percRichTextAsset",sharedAsset:T.assetShared}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.CONVERT_WIDGET,e.PercServiceUtils.TYPE_POST,false,function(aa,Z){if(aa==e.PercServiceUtils.STATUS_SUCCESS){k(U.regionId,U.id);Y(e.PercServiceUtils.STATUS_SUCCESS,Z.data)}else{k(U.regionId,X);var ab=e.PercServiceUtils.extractDefaultErrorMessage(Z.request);Y(e.PercServiceUtils.STATUS_ERROR,ab)}},W)}else{k(U.regionId,U.id);Y(e.PercServiceUtils.STATUS_SUCCESS,"")}}function L(V,T,U){x.isResponsiveBaseTemplate()?J(V,T,U):G(V,T,U)}function J(Y,U,X){var T=null;x.editRegion(Y,function(){T=this});var V=null;if(!D(T)){e.perc_utils.alert_dialog({title:"Region creation warning",content:"Reached maximum allowed columns(12) for the region."});X(null);return}var W=null;if(U=="after"||U=="before"||U=="above"||U=="below"){W=T;x.editRegionParent(Y,function(){T=this})}if(T.children&&T.children.length==0){V=H(T)}else{V=T.row?O(T,U,W):F(T,U,W)}X(V)}function F(X,aa,V){var T=null;switch(aa){case"north":var ab=x.newResponsiveRegion(true);X.children.unshift(ab);T=ab;break;case"south":var ab=x.newResponsiveRegion(true);X.children.push(ab);T=ab;break;case"below":var ab=x.newResponsiveRegion(true);var Z=q(X,V.regionId);X.children.splice(Z,0,ab);T=ab;break;case"east":case"west":var Y=x.newResponsiveRegion(false,11);Y.children=X.children;var W=x.newResponsiveRegion(true);W.children=[Y];X.children=[W];var U=x.newResponsiveRegion(false);aa=="east"?W.children.push(U):W.children.unshift(U);T=U;break}return T}function O(X,aa,V){var T=null;switch(aa){case"east":var U=x.newResponsiveRegion(false,1);X.children.push(U);P(X,U);T=U;break;case"west":var U=x.newResponsiveRegion(false,1);X.children.unshift(U);P(X,U);T=U;break;case"after":var U=x.newResponsiveRegion(false,1);var Z=q(X,V.regionId);X.children.splice(Z,0,U);P(X,U);T=U;break;case"north":case"south":var W=x.newResponsiveRegion(true);W.children=X.children;var Y=x.newResponsiveRegion(false,12);Y.children=[W];X.children=[Y];var ab=x.newResponsiveRegion(true);aa=="north"?Y.children.unshift(ab):Y.children.push(ab);T=ab;break}return T}function P(T,Z){var aa=q(T,Z.regionId);var W=T.children;var V=false;for(var U=aa+1;U<W.length;U++){var X=W[U].large;if(X&&X.length>0){var Y=X.split("-")[1];Y=parseInt(Y,10);if(Y>1){W[U].large="large-"+(Y-1);V=true;break}}}if(!V){for(var U=aa-1;U>=0;U--){var X=W[U].large;if(X&&X.length>0){var Y=X.split("-")[1];Y=parseInt(Y,10);if(Y>1){W[U].large="large-"+(Y-1);V=true;break}}}}}function D(T){return !(T.row&&T.children&&T.children.length==12)}function H(T){var W;if(T.row){var V=x.newResponsiveRegion(false,12);V.widgets=T.widgets;T.widgets=[];T.children=[V];W=V}else{var U=x.newResponsiveRegion(true);T.children=[U];U.widgets=T.widgets;T.widgets=[];W=U}return W}function M(U,T){x.editRegion(U,function(){var W=this;var V=this.widgets;x.editRegionParent(U,function(){var Z=this;if(Z.regionId===x.getRoot().regionId&&Z.children.length===1){return}var ae=Z.children.length===1;var ac=q(Z,W.regionId);ac=ac==Z.children.length-1?ac-1:ac;var Y=E(Z,U);if(W.columns&&!ae){var aa=Z.children;var ab=aa[ac].large;if(ab&&ab.length>0){var X=W.large.split("-")[1];X=parseInt(X,10);var ad=ab.split("-")[1];ad=parseInt(ad,10);aa[ac].large="large-"+(ad+X)}}})})}function q(U,T){var W=0;var V=false;e.each(U.children,function(){if(this.regionId===T){V=true;return false}W++});if(!V){throw"Failed to find the position of a region with id "+T+"as it does not exist under supplied parent region."}return W}function G(X,V,W){var U=X;if(V==="after"||V==="below"){var T=A.contents().find("#"+X).parent().parent(".perc-region");X=T.attr("id")}x.editRegion(X,function(){var ag=this;if(x.isPage()){ag.owner="page"}if(V==="center"){var ak=x.newRegion();e.perc_utils.copyRegionObject(ag,ak);ak.width=j(ag);ak.height=R(ag);ag.widgets=[];ag.children=[ak];if(W&&typeof(W)==="function"){W(ak)}return}var ad=(V==="north"||V==="south"||V==="below");var Z=!ad;var ab=(V==="south"||V==="east");var ai=((ad!=ag.vertical&&ag.children.length>1)||ag.children.length===0);if(ai){var ah=x.newRegion();e.perc_utils.copyRegionObject(ag,ah);ag.widgets=[];var ak=x.newRegion();ag.children=ab?[ah,ak]:[ak,ah];if(Z){ak.width=Math.floor(j(ag)/2);ak.height=R(ag);if(ah.children.length===0||ah.width===""){ah.width=ak.width}ah.height=ak.height}else{ah.width="";ah.height="";ak.width="";ak.height=""}ag.vertical=ad;if(W&&typeof(W)==="function"){W(ak)}}else{ag.vertical=ad;var ak=x.newRegion();if(ad){ak.width="";ak.height="";if(V==="below"){var Y=0;e.each(ag.children,function(){Y++;if(this.regionId===U){return false}});ag.children.splice(Y,0,ak)}}else{if(V==="after"){var af=j(U);var al=Math.floor(af/2);var ae=R(U);ak.width=al;ak.height=ae;var Y=0;e.each(ag.children,function(){Y++;if(this.regionId===U){if(!this.noAutoResize){this.width=Math.floor(af/2)}ak.height=ae;return false}});ag.children.splice(Y,0,ak)}else{var aj;if(ab){aj=ag.children[ag.children.length-1]}else{aj=ag.children[0]}var ac=j(aj);var aa=R(aj);ak.width=Math.floor(ac/2);ak.height=aa;if(!aj.noAutoResize){if(aj.children.length===0){aj.width=ak.width}aj.height=ak.height}}}if(V==="after"||V==="below"){}else{if(ab){ag.children.push(ak)}else{ag.children.unshift(ak)}}if(W&&typeof(W)==="function"){W(ak)}}})}function h(U,T){x.isResponsiveBaseTemplate()?M(U,T):n(U,T)}function n(U,T){x.editRegion(U,function(){var W=this;var V=this.widgets;x.editRegionParent(U,function(){var Y=this;if(Y.regionId===x.getRoot().regionId&&Y.children.length===1){return}var ab=false;if(Y.children.length===1){Y.vertical=Y.children[0].vertical;ab=true}var X=E(Y,U);Y.owner="template";if(!T&&X.children.length>0){var aa=X.children;var Z=X.index;for(c=0;c<aa.length;c++){var ac=aa[c];Y.children.splice(Z,0,ac);Z++}}if(!T&&typeof(V)!="undefined"&&V.length>0){Y.widgets=new Array();for(c=0;c<V.length;c++){Y.widgets.push(V[c])}}})})}function N(U,V){var T=null;x.findWidgetParentRegion(U,function(W){T=W});if(T){h(T,V)}}function K(){var T="";while(x.editWidget(T)||T==""){T=Math.floor(Math.random()*1000000000)}return T+""}function y(X,U,T,W){var V={_tagName:"widgetItem",definitionId:U,id:K(),properties:[]};I(X,V,T);if(W){W(V.id)}}function I(V,U,T){if(V===x.getRoot().regionId){e.perc_utils.debug("Add widget: widget can not be added to root region");return}x.editRegion(V,function(){if(this&&!(this.children&&this.children.length>0)){if(!this.widgets||this.widgets.length===0||!T){var W=this;if(x.isResponsiveBaseTemplate()&&this.row){if(x.isPage()){e.perc_utils.alert_dialog({title:"Add widget warning",content:"Widgets cannot be added to this region due to a template configuration issue.  Please contact your administrator to update the template."});return}else{L(V,"center",function(X){W=X})}}if(!W.widgets){W.widgets=new Array()}W.widgets.push(U)}else{for(widgetIndex in this.widgets){if(T===this.widgets[widgetIndex].id){this.widgets.splice(widgetIndex,0,U);break}}}}this.owner="page"})}function k(U,T){x.editRegion(U,function(){this.widgets=e.grep(this.widgets,function(V){return V.id!=T});if(this.widgets.length===0){this.owner="template"}})}function f(V,W,U,T){x.editRegion(V,function(){var X=this;var Y=null;x.editRegion(U,function(){Y=this;if(T<0||T>Y.widgets.length){return}var Z=e.grep(X.widgets,function(aa){return aa.id===W});k(V,W);Y.widgets.splice(T,0,Z[0]);Y.owner="page"});if(X.widgets.length===0){X.owner="template"}})}function S(V,U,T){x.editRegion(V,function(){var W=this;if(T<0||T>=W.children.length){return}var Y;e.each(W.children,function(Z){if(this.regionId===U){Y=Z}});var X=W.children[Y];if(Y>T){for(p=Y;p>T;p--){W.children[p]=W.children[p-1]}}else{for(p=Y;p<T;p++){W.children[p]=W.children[p+1]}}W.children[T]=X})}function Q(T,V,U){e.each(T.children,function(W){if(this.regionId===V){T.children.splice(W,1,U);return false}})}function E(U,Y){var T;var V;var X;var W;e.each(U.children,function(Z){if(this.regionId===Y){V=this;X=this.children;W=Z;U.children.splice(Z,1);return false}});T={index:W,region:V,children:X};return T}function j(V){var U=V.width;var W=V.regionId;if(!C(V)){U="";W=V}if(U===""){var W="#"+W;var T=B(W);var U=T.width();return U}else{if(U==="auto"){return U}else{if(!isNaN(U)){return U}else{if(isNaN(U)){U=U.replace("px","");return U}}}}return U}function R(V){var U=V.height;var W=V.regionId;if(!C(V)){U="";W=V}if(U===""||U==="auto"){var W="#"+W;var T=B(W);U=T.height();return U}else{if(!isNaN(U)){return U}else{if(isNaN(U)&&typeof U==="string"){U=U.replace("px","");return U}}}return U}function C(T){return(T&&"object"===typeof T)}function B(T){return A[0].contentWindow.jQuery(T)}}})(jQuery,jQuery.Percussion);(function(e,b){b.sizeController=function(q){var z=10;var k=1;var n=(z+k)*2;var x=(z+k)*2;var j=e("#frame");return{puff:h};function h(){var B={};f(".perc-region").each(function(){var G=f(this);var I=G.attr("id");var H=G.parents(".perc-region");B[I]=H.length});var D=[];A(B,D);function A(G,H){for(id in G){H.push({regionId:id,regionDepth:G[id]})}H.sort(function(J,I){return I.regionDepth-J.regionDepth})}for(i in D){var F=D[i].regionId;var E=f("#"+F);C(E)}function C(M){var J=M.parent().parent(".perc-region");var I=f(J.children().children(".perc-region"));if(I.length==0){return}var L=J.hasClass("perc-vertical")?"vertical":"horizontal";if(L=="vertical"){var H=-1;var G=0;I.each(function(){var O=f(this);if(O.width()+n>H){H=O.width()+n}var N=f(O).outerHeight(true);G+=N});if(H>J.width()){J.css("width",H)}if(G>J.height()){J.css("height",G)}}else{var K=0;I.each(function(){var N=f(this).outerWidth(true);K+=N});if(K>J.width()){J.css("width",K)}J.css("height","auto")}}}function y(B){var C=B.attr("id");var A=false;q.editRegion(C,function(){if((this.width||this.height)&&this.children.length==0){A=true}});return A}function f(A){return j[0].contentWindow.jQuery(A)}}})(jQuery,jQuery.Percussion);(function(e,b){b.decorationController=function(n,k,D,J){var A=false,F=null;var B;e.each(J,function(){var L=this.name;if(L=="edit"||L=="configure"||this.tooltip=="Configure region"){B=this;return}});var H=null;h(true);return{visible:h,refresh:j,unselectAll:E,setOtherDecorator:z,removeDecorations:K,addClicks:C};function z(L){H=L}function j(){F=null;if(A){y()}else{K()}}function h(L){if(typeof L=="boolean"){if(L!=A){A=L}}return A}function C(){n().unbind("click.decorate").bind("click.decorate",function(L){if(H!=null){H.unselectAll()}L.stopPropagation();if(F){if(!A){F.removeClass(k)}F.removeClass(D);f(F)}F=e(this);if(!A){F.addClass(k)}I(F);F.addClass(D)});e.each(n(),function(){var L=e(this).hasClass("perc-locked");if(!L){e(this).unbind("dblclick.decorate").bind("dblclick.decorate",function(M){M.stopPropagation();if(B){B.callback(e(this))}})}})}function E(){if(F){F.removeClass(D);f(F)}}function G(){n().unbind(".decorate")}function y(){C();if(A){n().addClass(k)}}function K(){G();if(!A){n().removeClass(k)}}function I(M){var N=q(M);if(M.hasClass("perc-locked")){var L={name:"locked",img:"/cm/images/icons/editor/locked",callback:function(O){},tooltip:"Locked"};x(M,N,L)}else{e.each(J,function(){if(typeof(this.widgetType)=="undefined"||this.widgetType==M.attr("widgetdefid")){x(M,N,this)}})}}function q(L){var M=e("<div class='perc-ui-menu'/>");L.append(M);return M}function x(M,L,R){var T=e.isFunction(R.img)?R.img(M):R.img;if(T==null){return}var O=T.indexOf("Inactive",T.length-"Inactive".length)!==-1;var S=e.isFunction(R.tooltip)?R.tooltip(M):R.tooltip;var Q=T+".png";var N=T+"Over.png";var P=e("<img src='"+Q+"'/>").addClass("perc-ui-menu-icon").attr("alt",S).attr("title",S);if(O){P.css("cursor","default")}P.click(function(){R.callback(M)});P.bind("mouseenter",function(){e(this).attr("src",N)}).bind("mouseleave",function(){e(this).attr("src",Q)});L.append(P)}function f(L){L.children(".perc-ui-menu").remove()}}})(jQuery,jQuery.Percussion);(function(e,b){b.cssController=function(j,F,C){var n=e.PercDirtyController;var A={getCurrentView:E,getThemeList:D,getThemeCSS:K,setTemplateTheme:H,getTemplateTheme:z,setOverrideCSS:f,getOverrideCSS:x,showGalleryView:q,showThemeView:y,showCSSOverrideView:J,save:I,updateTemplateObject:h,model:j,refreshCssViews:k};return A;var B=this;var F=e("#frame");var L=null;function h(){f()}function I(M){e.PercBlockUI();j.save(function(N){j.renderAll(F,function(){G()});M(true,N);e.unblockUI();n.setDirty(false)})}function q(){L=0;b.cssGalleryView(this)}function y(){L=1;b.cssThemeView(this)}function J(){L=2;b.cssOverrideView(this)}function E(){return L}function D(M){j.getThemeList(function(N,O){M(N,O)})}function K(M){j.getThemeCSS(function(N,O){M(O.text())})}function H(M,O){var N=j.getCSSObj();N.themeName=M;j.setCSSObj(N);O(true)}function z(N){var M=j.getCSSObj();N(M.themeName)}function f(){if(e("#perc-css-override-editor-area").val()==undefined){return}var M=e("#perc-css-override-editor-area").val();e.perc_utils.debug("set override CSS: "+M);var N=j.getCSSObj();N.cssOverride=M;j.setCSSObj(N)}function x(N){var M=j.getCSSObj();N(M.cssOverride)}function G(){C.afterRender()}function k(){b.cssGalleryView(this);b.cssOverrideView(this)}}})(jQuery,jQuery.Percussion);(function(e,b){b.cssGalleryView=function(h){var j=e.PercDirtyController;var f=e("#perc-css-gallery");q();function k(z){if(typeof(z)==="string"){return z.replace(/ /g,"-")}else{return z}}function q(){f.empty();var z='<div class="perc-buttons" id="perc-css-gallery-button-bar">  <form>  </form></div>';f.append('<div id="perc-css-gallery-status"></div>');f.append(z);h.getThemeList(function(B,C){if(B==true){var A=C.ThemeSummary;f.append("<table id='perc-themes-table'><tr id='perc-themes-table-row'></tr><table>");if(A.length>0){e(A).each(function(){var F=this.name;var D=this.thumbUrl;var E=k(F);e("#perc-themes-table-row").append(n(E,D,F));$j("#theme-"+E).click(function(){j.setDirty(true,"style",y);h.setTemplateTheme(F,function(G){$j("#perc-css-gallery-edit-save").removeClass("ui-state-disabled");x(E)})})});h.getTemplateTheme(function(D){var E=k(D);x(E)})}}else{f.append("<div>Gallery could not be loaded.</div>")}})}function y(A){var z=e.PercNavigationManager.getView();if(z==e.PercNavigationManager.VIEW_EDITOR){h.save(A)}else{if(z==e.PercNavigationManager.VIEW_EDIT_TEMPLATE){callbackFunc=A||function(){};h.setOverrideCSS();h.save(function(B,C){if(B==true){j.setDirty(false,"template");callbackFunc()}})}}}function n(A,C,B){var z;z='<td><div id="theme-'+A+'-container" class="perc-css-gallery-item" style="display: table-cell"><a id="theme-'+A+'" href="#"><img src="'+C+'" /><br /><span class="perc-css-gallery-item-name" style="text-align: center">'+B+"</span></div></a></td>";return z}function x(A){var z=".perc-css-gallery-item";var C="#theme-"+A+"-container";var D=".perc-theme-clear";var B="#theme-"+A+"-clear";$j(z).removeClass("perc-css-gallery-themeHighlighted");$j(D).css("display","none");$j(C).addClass("perc-css-gallery-themeHighlighted");$j(B).css("display","inline")}}})(jQuery,jQuery.Percussion);(function(e,b){b.cssThemeView=function(h){var f=e("#perc-css-theme-editor");h.getThemeCSS(function(k){j(k)});function j(n){f.empty();var k='<form id="perc-css-theme-editor-form"><div id="perc-css-theme-editor-alert-text" class=".ui-state-highlight"></div> <div class="ui-layout-east" style=""> </div> <div class="ui-layout-center">  <pre><div style="" id="perc-css-theme-editor-area">'+n+"</div></pre><br /> </div></form>";f.append(k)}}})(jQuery,jQuery.Percussion);(function(e,b){b.cssOverrideView=function(h){var n;var j=e.PercDirtyController;var f=e("#perc-css-editor");h.getOverrideCSS(function(x){k(x)});function q(y){var x=e.PercNavigationManager.getView();if(x==e.PercNavigationManager.VIEW_EDITOR){h.save(y)}else{if(x==e.PercNavigationManager.VIEW_EDIT_TEMPLATE){callbackFunc=y||function(){};h.setOverrideCSS();h.save(function(z,A){if(z==true){j.setDirty(false,"template");callbackFunc()}})}}}function k(y){f.empty();var x='<form id="perc-css-override-editor-form"><div id="perc-css-override-editor-alert-text" class=".ui-state-highlight"></div> <div class="ui-layout-east" style="text-align: right;"> </div> <div class="ui-layout-center"> <div id="perc-css-override-editor-alert-text">&nbsp;</div>  <textarea rows="15" cols="90" id="perc-css-override-editor-area">'+y+"</textarea><br /> </div></form>";f.append(x);e("#perc-css-override-editor-area").unbind().change(function(){j.setDirty(true,"style",q)})}}})(jQuery,jQuery.Percussion);(function(e,b){b.CSSPreviewView=function(x,y){var F={};var h=e.PercDirtyController;var A=[{name:"configure",img:function(J){var I="/cm/images/images/buttonConfigStandalone";if(!F[J.attr("widgetdefid")].hasCssPrefs){I="/cm/images/images/buttonConfigStandaloneInactive"}return I},callback:function(I){if(F[I.attr("widgetdefid")].hasCssPrefs){B(I)}},tooltip:"Configure"}];var q=b.decorationController(E,"perc-widget-puff","perc-region-selected",A);n();C();k();e.perc_finder().addActionListener(function(K,J){if(K==e.perc_finder().ACTIONS.DELETE&&(J.type=="asset"||J.type=="page")){if(typeof(J.isOpen)!="undefined"&&J.isOpen){return}var L=e.PercNavigationManager.getView();if(L==e.PercNavigationManager.VIEW_DESIGN){var I=e("#tabs").tabs("option","selected");if(I==3){h.setDirty(true,"template",z);k()}}else{if(L==e.PercNavigationManager.VIEW_EDITOR){var I=e("#perc-pageEditor-tabs").tabs("option","selected");if(I==2){h.setDirty(true,"page",z);k()}}}}});function z(K){var J=e.PercNavigationManager.getView();var I=b.cssController(y,e("#frame"),b.CSSPreviewView(e("#frame"),y));if(J==e.PercNavigationManager.VIEW_EDITOR){I.save(K)}else{if(J==e.PercNavigationManager.VIEW_EDIT_TEMPLATE){callbackFunc=K||function(){};I.setOverrideCSS();I.save(function(L,M){if(L==true){h.setDirty(false,"template");callbackFunc()}})}}}e("#perc-style-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var K=this;var J=function(){var N=I18N.message("perc.ui.menu@JavaScript Off");var M=I18N.message("perc.ui.menu@JavaScript On");if(e(K).text()==N){e(K).text(M);e(K).attr("title","Turns on JavaScript");y.setJavaScriptOff(true);k()}else{e(K).text(N);e(K).attr("title","Turns off JavaScript");y.setJavaScriptOff(false);k()}h.setDirty(false,"style")};if(h.isDirty()){var L=y.isTemplate?"This template":"This page";L+=" contains unsaved changes. If you toggle JavaScript, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";var I={question:L};h.confirmIfDirty(function(){J()},function(){},I)}else{J()}});return{afterRender:G,initRender:k};function C(){e.ajax({url:e.perc_paths.WIDGETS_ALL,type:"GET",dataType:"json",success:function(I,J){e.each(I.WidgetSummary,function(){F[this.id]=this})},error:function(J,L,I){var K=e.PercServiceUtils.extractDefaultErrorMessage(J);e.perc_utils.alert_dialog({title:"Error",content:K})}})}function B(M){var L=M.attr("widgetid"),K=M.attr("widgetdefid");var J=function(N,O){y.editWidget(L,function(){this.cssProperties[N]=O});h.setDirty(true,"style",z)};var I;y.editWidget(L,function(){I=this.cssProperties});b.widgetPropertiesDialog(J,I,K,H,"CssPref",y.getWidgetByName)}function H(){}function k(){y.renderAll(x,function(){G();e("#frame").attr("perc-view-type","style");var J=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(J!=null){J.handleComponentProgress("perc-ui-component-editor-frame","complete")}var I=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(I!=null){I.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function D(){e.perc_utils.handleLinks(x);e.perc_utils.handleObjects(x)}function G(){x.contents().find("div").unbind();q.refresh();D();x.contents().find("body").css("z-index","-1000").unbind().click(function(){q.unselectAll()})}function n(){}function j(I){}function f(I){}function E(){var I=y.getSpecialWidgets("Layout");if(I){x.contents().find(".perc-widget").each(function(){var J=e(this).attr("widgetid");if(J in I.LockedWidgets){e(this).addClass("perc-locked")}if(J in I.TransperantWidgets){e(this).addClass("perc-widget-transperant")}})}return x.contents().find(".perc-widget")}}})(jQuery,jQuery.Percussion);(function(b){b.PercChangeTemplateDialog=function(){var z={openDialog:q};var h=null;var f=null;var j=null;var y=null;var B=null;var A=null;var k=null;var x=function(){};function q(F,G,C,D){h=F;f=G;j=C;x=D;var E=b.perc_paths.TEMPLATES_BY_SITE+"/"+j;b.getJSON(E,function(H){k=H.TemplateSummary;if(k.length<=1&&f!=""){e()}else{n()}})}function e(){b.perc_utils.alert_dialog({title:"Warning",content:"Unable to process request, only one template exists.",id:"perc-no-template-message"})}function n(){var F=30;var J="<div><form action='' method='GET'> <a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a><div style = 'display:block' id = 'perc-template-label'><span class='perc-label-left'></span><span class = 'perc-label-right'></span></div></form></div>";var I=800;var H=b(J).perc_dialog({title:"Change Template",buttons:{},percButtons:{Save:{click:function(){D()},id:"perc-page-save"},Cancel:{click:function(){G()},id:"perc-page-cancel"}},id:"perc-change-template-dialog",width:I,modal:true});C();function E(L){var M=b.PercServiceUtils.extractDefaultErrorMessage(L);var K=b.PercServiceUtils.extractFieldErrorCode(L);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:M})}function G(){H.remove()}function D(){if(H.find("#perc-select-template").val()==B){H.remove();return}var L=[h];var K={MigrateContentRestData:{siteName:j,templateId:H.find("#perc-select-template").val(),refPageId:"",pageIds:L,sourceType:A}};b.PercTemplateService().assignTemplateAndMigrateContent(K,function(N,M){if(N==b.PercServiceUtils.STATUS_SUCCESS){H.remove();x()}else{E(M)}})}function C(){var M=H.find("div.perc-scrollable div.perc-items");var N="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",N);b.each(k,function(){M.append(K(this,f));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var P=b(this).find(".item-id").text();var O=b(this).find(".perc-text-overflow").text();b("#perc-select-template").val(P);b(".perc-label-right").html("Selected Template:&nbsp;"+O);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});if(this.id==f){y=this.name;B=this.id}});var L=null;if(!y){y="Unassigned";L="None";A="UNASSIGNED"}else{L=y;A="TEMPLATE"}b(".perc-label-left").html("Current Template:&nbsp;"+y);b(".perc-label-right").html("Selected Template:&nbsp;"+L);b("#perc-select-template").val(y);b.PercTextOverflow(b("div.perc-text-overflow"),122);function K(R,Q){var P='<div class="item">';if(R.id==Q){P='<div class="item perc-selected-item">'}var O=P+"<div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return O.replace(/@IMG_SRC@/,R.imageThumbPath).replace(/@ITEM_ID@/,R.id).replace(/@ITEM_LABEL@/,R.name).replace(/@ITEM_TT@/g,R.name)}}}return z}})(jQuery);var layoutModel;(function(f,k){var b=0,e=1,n=2,y=3,x=4,j=5,q=6;var A=10;var h;var z=false;k.layoutView=function(aX,X,aa,ad,az){f.perc_utils.debug("Calling layoutView()");h=aX.contents();layoutModel=X;var aq=k.sizeController(X);var O=true;var aK={};var ab=null;var aV="";aV+="<div id='_REGION_ID_' class='perc-region-library-tool' name='_REGION_ID_' style='overflow: hidden;white-space: nowrap;text-overflow: ellipsis;'>";aV+="<div id='_REGION_ID_-2'>";aV+="_REGION_LABEL_";aV+="</div>";aV+="</div>";var aD=null;var G=0;var ay=f.PercDirtyController;var aP={};aX.contents().find("body").append("<div id='placeholder-region'></div>");var aF=[{name:"delete",img:"/cm/images/icons/editor/delete",callback:function(bc){var bd=bc.closest(".perc-region").attr("id");aa.removeWidget(bd,bc.attr("widgetid"));H(true);aH()},tooltip:"Delete widget"},{name:"configure",img:function(bd){if(aP[bd.attr("widgetdefid")].id=="percRawHtml"){var bc="/cm/images/icons/editor/buttonConfigure2Gray"}else{var bc="/cm/images/icons/editor/configureInactive"}if(layoutModel.isTemplate()||aP[bd.attr("widgetdefid")].hasUserPrefs){if(aP[bd.attr("widgetdefid")].id=="percRawHtml"){var bc="/cm/images/icons/editor/buttonConfigure2"}else{var bc="/cm/images/icons/editor/configure"}}return bc},callback:function(bc){if(layoutModel.isTemplate()||aP[bc.attr("widgetdefid")].hasUserPrefs){aZ(bc)}},tooltip:"Configure"},{widgetType:"percRawHtml",name:"convert",img:"/cm/images/icons/editor/buttonConvert",callback:function(bd){var bc={id:bd.attr("widgetid"),name:bd.attr("widgetname"),assetId:bd.attr("assetid"),regionId:bd.closest(".perc-region").attr("id"),ownerId:bd.attr("ownerId")};f.perc_utils.confirm_dialog({id:"convertHTMLWidget",title:"Convert HTML widget",question:"You are about to convert an HTML widget to a Rich Text widget. You will not be able to convert back. Do you want to convert?",showAgainCheck:true,width:500,cancel:function(){},success:function(){aa.convertHTMLWidget(bc,function(be,bf){if(be==f.PercServiceUtils.STATUS_SUCCESS){aH();H(true)}else{f.perc_utils.alert_dialog({title:"Conversion Error",content:bf})}})}})},tooltip:"Convert to Rich Text Widget"}];var aY=[{img:function(bc){if(f(bc).parent()[0].nodeName!="DIV"){return null}else{return"/cm/images/icons/editor/delete"}},callback:function(bc){a3(bc)},tooltip:"Delete region"},{img:function(bc){if(f(bc).parent()[0].nodeName!="DIV"){return"/cm/images/images/buttonConfigStandalone"}else{return"/cm/images/icons/editor/configure"}},callback:function(bc){f.PercEditRegionPropertiesDialog().editRegionProperties(bc)},tooltip:"Configure region"}];var aQ=k.decorationController(ak,"perc-widget-puff","perc-widget-selected",aF);var ap=layoutModel.isTemplate()?k.decorationController(aI,"perc-region-puff","perc-region-selected",aY):k.decorationController(aI,"perc-region-puff","perc-region-selected",[]);aQ.setOtherDecorator(ap);ap.setOtherDecorator(aQ);f("#perc-region-auto-resize").click(function(){var bc=f(this).is(":checked");updateSizeFields(bc)});f("#perc-region-library-expander").unbind().click(function(){f.fn.percRegionLibraryMaximizer(k);K()});f("#perc-orphan-assets-expander").unbind().click(function(){f.fn.percOrphanAssetsMaximizer(k);af()});function ba(bd){callback=function(){if(bc&&layoutModel.isTemplate()){layoutModel.loadAssetDropCriteria(function(){aH(bd)})}else{if(bd){bd()}}};var bc=R();f.PercBlockUI();layoutModel.save(function(){if(layoutModel.isTemplate()){f.PercRegionCSSHandler.mergeRegionCSS()}f.unblockUI();callback()},bc,z);H(false)}function R(){var bc=null;var bd=[];aX.contents().find(".perc-widget[widgetdefid='percRawHtml'][assetid='']").each(function(){var bh=f(this);if(bh.hasClass("perc-widget-transperant")&&bh.find(".html-sample-content").length<1){z=true}if(bh.find(".html-sample-content").length<1){var bg={};bg.widgetId=bh.attr("widgetid");var bf="";try{bf=f(bh.html()).wrapAll("<div></div>").parent()}catch(be){f.perc_utils.info("Failed to fill the widget content for widget id: "+bg.widgetId+"  and the error is "+be);bf=f("").wrapAll("<div></div>").parent()}bf.find("a[tempURL]").each(function(){var bi=f(this).attr("tempURL");f(this).attr("href",bi);f(this).removeAttr("tempURL")});bg.content=bf.html();bg.ownerId=bh.attr("ownerid");bd.push(bg)}});if(bd.length>0){bc={InspectedElementsData:{}};bc.InspectedElementsData.newAssets=bd}return bc}f(".perc-dropdown-option-HideGuides").unbind().click(function(){ap.visible(!ap.visible());aQ.visible(!aQ.visible());O=!O;aH()});f("#perc-save").unbind().click(function(){if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.clearItoolMarkup()}ba();if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.saveCallback()}});f("#perc-layout-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var be=this;var bd=function(){var bh=I18N.message("perc.ui.menu@JavaScript Off");var bg=I18N.message("perc.ui.menu@JavaScript On");if(f(be).text()==bh){f(be).text(bg);f(be).attr("title","Turns on JavaScript");layoutModel.setJavaScriptOff(true);layoutModel.load();aS()}else{f(be).text(bh);f(be).attr("title","Turns off JavaScript");layoutModel.setJavaScriptOff(false);layoutModel.load();aS()}H(false)};if(ay.isDirty()){var bf=layoutModel.isTemplate?"This template":"This page";bf+=" contains unsaved changes. If you toggle JavaScript, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";var bc={question:bf};ay.confirmIfDirty(function(){bd()},function(){},bc)}else{bd()}});f("#perc-layout-cancel").unbind().click(function(){a6();if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.cancelCallback()}});function a6(bc){layoutModel.load();aS();H(false);if(bc){bc()}if(layoutModel.isTemplate()){f.PercRegionCSSHandler.prepareForEditRegionCSS()}}aM();bb();f(".perc-widget-type").unbind().change(bb);f(".perc-widget-category").unbind().change(aA);aS();f.perc_finder().addActionListener(function(be,bd){if(be==f.perc_finder().ACTIONS.DELETE&&(bd.type=="asset"||bd.type=="page")){if(typeof(bd.isOpen)!="undefined"&&bd.isOpen){return}var bf=f.PercNavigationManager.getView();if(bf==f.PercNavigationManager.VIEW_DESIGN){var bc=f("#tabs").tabs("option","selected");if(bc==2){aS()}}else{if(bf==f.PercNavigationManager.VIEW_EDITOR){var bc=f("#perc-pageEditor-tabs").tabs("option","selected");if(bc==1){aS()}}}}});function aS(){layoutModel.renderAll(aX,function(){aW();f("#frame").attr("perc-view-type","layout");var bd=f.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(bd!=null){bd.handleComponentProgress("perc-ui-component-editor-frame","complete")}var bc=f.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(bc!=null){bc.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function aH(bc){layoutModel.render(function(bd){window.frames[aX.attr("id")].jQuery("body").empty().append(bd).ready(function(){aW(bc)})})}function aW(bf){aX.contents().find("div").unbind();aQ.refresh();ap.refresh();if(O){if(!layoutModel.isResponsiveBaseTemplate()){a4()}f(".perc-dropdown-option-HideGuides").html("Hide Guides")}else{f(".perc-dropdown-option-HideGuides").html("Show Guides")}aX.contents().find(".perc-region").each(function(){var bg=f(this);bg.attr("title",bg.attr("id"));P(bg);var bh=bg.find(".perc-region");if(bh.length==0){bg.addClass("perc-region-leaf")}});al();ar();aX.contents().find("body").css("z-index","-1000").css("position","static").unbind().click(function(bg){aQ.unselectAll();ap.unselectAll();K()}).append("<div id='perc-widget-drop-feedback'></div>");ax=aX.contents().find("#perc-widget-drop-feedback");G=0;ax.hide();if(aD){var be=aX.contents().find("#"+aD);be.click();aD=null}K();aX.contents().find(".perc-region").click(function(){var bg="perc-re-"+f(this).attr("id");f(".perc-region-library-tool").removeClass("perc-region-selected");f(".perc-region-library-tool[name="+bg+"]").addClass("perc-region-selected")});aX.contents().find(".sf-menu").superfish({pathClass:"current",autoArrows:false,delay:400,pathLevels:0});var bd=f.PercNavigationManager.getView()==f.PercNavigationManager.VIEW_EDIT_TEMPLATE;var bc=(U()&&bd)?"visible":"hidden";f("#perc-error-alert").css("visibility",bc);f.PercInspectionToolHandler.afterRenderCallback();if(bf){bf()}}var ax;function ar(){f.perc_utils.handleLinks(aX);f.perc_utils.handleObjects(aX)}function al(){layoutModel.eachRegion(function(){if(layoutModel.canOverride(this)||layoutModel.isTemplate()){var bd=this.regionId;if(bd!="percRoot"){var bc=f(aX.contents().find("#"+bd)[0]);if(layoutModel.isTemplate()){ac(bc);a1(bc)}if(bc.find(".perc-region").length==0){Q(bc)}V(bc)}}})}function Q(bf){var bg=bf.attr("id");var bd=bf.find(".perc-widget");var bc=bf.find(".perc-widget:last");var be=bc.attr("widgetid");bf.droppable({accept:".perc-widget-tool",tolerance:"pointer",greedy:true,scope:f.perc_iframe_scope,drop:function(bh,bi){F(bi,bf)},over:function(bh,bi){aU(bf)},out:function(bh,bi){aj(bf)}});bd.droppable({accept:".perc-widget-tool",tolerance:"pointer",greedy:true,scope:f.perc_iframe_scope,drop:function(bh,bi){a7(bi,f(this),bf)},over:function(bh,bi){aE(f(this),bf)},out:function(bh,bi){a5(f(this),bf)}})}function a2(bc){var bd;if(!bc||aP[bc].responsive){return}bd=f("#nonResponsiveWidgetWarning").length;if(bd){return}f.perc_utils.confirm_dialog({id:"nonResponsiveWidgetWarning",title:"Responsive Design",question:"The widget you have selected is not responsive. As a result, it may not display well on smaller devices.",type:"OK",cancel:function(){},success:function(){},showAgainCheck:true,dontShowAgainAction:null})}function a8(bk){var bg=aX.contents().find("#"+bk);var be=bg.offset().top+bg.height();var bh=bg.find(".perc-widget");ab=bk;if(bh.length==0){bg.css("background-color","#CAF589")}else{if(G==0){var bd=bg.find(".perc-widget:last");var bi=bd.attr("widgetid");var bf=bd.offset();var bc=bf.top+bd.height();var bj=5;if(bc>be){return}ax.show();ax.height(bj).width(bd.width()).css("background-color","#CAF589").css("left",bf.left).css("top",bc).css("z-index","2000").css("position","absolute")}}}function ai(bd){var bc=aX.contents().find("#"+bd);bc.css("background-color","")}function ac(bh){bh.children("perc-region-feedback").remove();var bi=bh.attr("id");var bg=f.map(["north","south","east","west","after","below","center"],function(bj){return ag(bi,bj)});bg[b].css({top:"2px",left:"10px",width:"100%",height:"10px"}).addClass("north");bg[e].css({bottom:"2px",left:"10px",width:"100%",height:"10px"}).addClass("south");bg[n].css({top:"10px",right:"2px",height:"100%",width:"10px"}).addClass("east");bg[y].css({top:"10px",left:"2px",height:"100%",width:"10px"}).addClass("west");bg[x].css({top:"0px",right:"-4px",height:"100%",width:"6px"}).addClass("after");bg[j].css({bottom:"-4px",left:"0px",width:"100%",height:"6px"}).addClass("below");bg[q].css({top:"12px",left:"12px",width:"100%",height:"100%"}).addClass("center");var be=bh.parent().parent(".perc-region");var bd=bh.next(".perc-region");var bc=be.hasClass("perc-horizontal");var bf=bh.find(".perc-region").length>0;f.each(bg,function(bk){if(bk==x&&(!bc||bd.length==0)){return true}if(bk==j&&(bc||bd.length==0)){return true}if(bk==q&&bf){return true}bh.append(this);if(bk===b||bk===e){var bl=bg[bk].width()-20;bg[bk].css("width",bl)}else{if(bk===n||bk===y){var bj=bg[bk].height()-20;bg[bk].css("height",bj)}else{if(bk===q){var bj=bg[bk].height()-24;var bl=bg[bk].width()-24;bg[bk].css("height",bj).css("width",bl)}}}})}function ag(bd,bc){return f("<div/>").addClass("perc-region-feedback").css({position:"absolute"}).droppable({scope:f.perc_iframe_scope,accept:"#region-tool",tolerance:"pointer",greedy:true,hoverClass:"perc-show-feedback",over:function(be,bf){aX.contents().find(".perc-region").removeClass("perc-hover-region-feedback");f(this).parent().addClass("perc-hover-region-feedback")},out:function(){var bf=f(this).parent().parent()[0];var be=bf.tagName;if(be=="BODY"){h.find(".perc-region").removeClass("perc-hover-region-feedback")}},drop:function(bf,bg){aX.contents().find(".perc-region").removeClass("perc-hover-region-feedback");var be=f("#tabs-3");if(be.offset().top+be.height()>bf.clientY){return false}aa.addRegion(bd,bc,function(bh){if(bh!=null){aD=bh.regionId;H(true);aH()}})}})}function V(bc){if(bc.is(".perc-region-leaf")){N(bc)}else{T(bc)}}var L;function T(bd){if(bd.hasClass("perc-horizontal")){E(bd).sortable({delay:500,containment:"parent",tolerance:"pointer",items:"> .perc-horizontal > .perc-region",axis:"x",start:function(bg,bh){L=new Object();var be=f(this).find(".perc-horizontal > .perc-region");var bf=0;be.each(function(){var bk=f(this);var bj=bk.attr("id");var bi=bk.height();if(bi>bf){bf=bi}L[bj]=bi});be.height(bf);bh.placeholder.width(bh.item.width()).css("visibility","visible").css("background-color","#CAF589")},stop:function(bg,bh){var bf=f(this).children(".perc-horizontal > .perc-region");bf.each(function(){var bk=f(this);var bi=bk.attr("id");var bj=L[bi];bk.height(bj)});var be=bh.item.prevAll(".perc-region").length;aD=bh.item.attr("id");aa.moveRegion(bd.attr("id"),bh.item.attr("id"),be);H(true);aH()}})}else{var bc=E(bd);if(typeof(bc.sortable)=="function"){E(bd).sortable({delay:500,containment:"parent",tolerance:"pointer",items:"> .perc-vertical > .perc-region",placeholder:"placeholder-region",axis:"y",forcePlaceholderSize:true,stop:function(be,bf){var bg=bf.item.prevAll(".perc-region").length;aD=bf.item.attr("id");aa.moveRegion(bd.attr("id"),bf.item.attr("id"),bg);H(true);aH()}})}}}function N(bc){E(bc).sortable({connectWith:".perc-region-leaf",dropOnEmpty:true,placeholder:"placeholder-widget",items:"div.perc-widget:not('.perc-locked')",tolerance:"pointer",start:function(bd,be){f(this).css("overflow","visible")},stop:function(bg,bh){var bf=bh.item.prevAll(".perc-widget").length;var be=bh.item.attr("widgetid");var bd=bc.attr("id");var bi=bd;if(bc.children().children("[widgetid="+be+"]").length>0){aa.moveWidget(bd,be,bi,bf);H(true);aH()}},receive:function(bg,bh){var bf=bh.item.prevAll(".perc-widget").length;var be=bh.item.attr("widgetid");var bd=bh.sender.attr("id");var bi=bc.attr("id");aa.moveWidget(bd,be,bi,bf);H(true);aH()}})}function a1(bc){layoutModel.isResponsiveBaseTemplate()?a9(bc):at(bc)}function a9(bf){var bl=bf.attr("id");var bh=null;var bg=null;layoutModel.editRegion(bl,function(){bh=this});if(bf.next().length>0){layoutModel.editRegion(bf.next().attr("id"),function(){bg=this})}if(bh.row||(bh.columns&&bh.large=="large-12")){bf.css("border","1px solid #33C9ED");return}var be=null;layoutModel.editRegionParent(bl,function(){be=this});var bm=Math.floor((f(aX.contents().find("#"+be.regionId)[0]).width())/12);var bi=layoutModel.getRegionPosition(bl);if(bi==be.children.length-1||(bg!=null&&(bh.large=="large-1"&&bg.large=="large-1"))){return}var bd=bf.outerWidth();var bc=bf.next().outerWidth();var bk=bc-bf.next().innerWidth();var bj=bd+bc;E(bf).resizable({handles:"e",grid:bm,start:function(bn,bo){f.each(be.children,function(){f(aX.contents().find("#"+this.regionId)[0]).css("min-width",bm+"px")});bf.resizable("option","maxWidth",bj-bm);console.log("regionResizing.width()"+bf.width());console.log("minw"+bm);console.log("regionResizing.next().width()"+bf.next().width());console.log("parentWidth",f(aX.contents().find("#"+be.regionId)[0]).width())},resize:function(bn,bo){bf.next().width(bj-bf.outerWidth()-bk)},stop:function(bo,bq){H(true);f.each(be.children,function(){f(aX.contents().find("#"+this.regionId)[0]).css("min-width","")});regL=Math.round(bf.outerWidth()/bm);regR=Math.round(bf.next().outerWidth()/bm);regL=regL==0?1:regL;regR=regR==0?1:regR;var bn=parseInt(bh.large.split("-")[1],10);var bp=parseInt(bg.large.split("-")[1],10);if((bn+bp)>(regL+regR)){regL<regR?regL++:regR++}else{if((bn+bp)<(regL+regR)){regL>regR?regL--:regR--}}bh.large="large-"+regL;bg.large="large-"+regR;aD=bf.attr("id");aH()}})}function P(bd){var bc=bd.attr("noautoresize");if(bc!=undefined){bd.removeAttr("noautoresize");bd.attr("data-noautoresize",bc)}else{return"false"}return bc}function at(bg){var bf=P(bg);if(bf=="true"){bg.css("border","1px solid #33C9ED");return}var bd;var bc;var be;E(bg).resizable({handles:"e, s",start:function(bh,bi){if(bg.parent().hasClass("perc-vertical")){return}bd=bg.next();if(P(bd)=="true"){return}bc=bg.width()+bd.width();bg.resizable("option","maxWidth",bc)},resize:function(bh,bi){if(bg.parent().hasClass("perc-vertical")){return}bd=bg.next();if(P(bd)=="true"){return}be=bi.size.width/bc;bd.width(bc-bg.width())},stop:function(bh,bi){H(true);layoutModel.editRegion(bg.attr("id"),function(){this.width=bi.size.width;this.height=bi.size.height});if(bg.parent().hasClass("perc-horizontal")){if(P(bd)=="true"){return}if(bi.originalSize.width!=bi.size.width){layoutModel.editRegion(bd.attr("id"),function(){this.width=bc-bi.size.width})}}aD=bg.attr("id");aH()}})}function a4(){aq.puff()}function E(bc){return aX[0].contentWindow.jQuery(bc[0])}function aM(){if(!f("#perc-delete-region-dialog").data("dialog")){f("#perc-delete-region-dialog").perc_dialog({modal:true,zIndex:100000,autoOpen:false,width:500,resizable:false,buttons:{},percButtons:{Ok:{click:function(){f("#perc-delete-region-dialog").dialog("close")},id:"perc-delete-region-ok"},Cancel:{click:function(){f("#perc-delete-region-dialog").dialog("close")},id:"perc-delete-region-cancel"}}})}}function a3(bf){var bh=bf.attr("id");var be=f("#perc-region-id-label");var bd=f("#perc-delete-region-dialog");var bc=f("#perc-delete-content-choice");be.html(bh);bd.dialog("open");bc.attr("checked","checked");var bg=layoutModel.isResponsiveBaseTemplate()?an(bf):W(bf);if(bg){bc.removeAttr("disabled")}else{bc.attr("disabled","disabled")}bd.parent().find(".perc-ok").unbind().click(function(){var bi=f("#perc-delete-content-choice:checked").length!=0;aa.removeRegion(bh,bi);bd.dialog("close");H(true);aH()})}function W(bg){var bc=bg.parent();var bo=bg.hasClass("perc-vertical");var bk=bc.hasClass("perc-vertical");var bd=f(bg).children().children(".perc-region").length;var bi=f(bg).children().children(".perc-widget").length;var be=f(bc).children(".perc-region").length;var bj=bd==1;var bf=bd==0;var bn=be==1;var bh=bi>0;var bm=be>1;var bl=bo==bk;return(bf&&bh&&!bm)||bj||(!bf&&bm&&bl)}function an(bc){return false}function aZ(bg){var bf=bg.attr("widgetid"),be=bg.attr("widgetdefid");var bd=function(bh,bi){layoutModel.editWidget(bf,function(){if(bh=="sys_perc_name"){this.name=bi}else{if(bh=="sys_perc_description"){this.description=bi}else{this.properties[bh]=bi}}});H(true)};var bc;layoutModel.editWidget(bf,function(){bc=this.properties;if(layoutModel.isTemplate()){bc.sys_perc_name=(typeof(this.name)!="undefined")?this.name:"";bc.sys_perc_description=(typeof(this.description)!="undefined")?this.description:""}});k.widgetPropertiesDialog(bd,bc,be,aH,"UserPref",layoutModel.getWidgetByName)}function aI(){return aX.contents().find(".perc-region")}function ak(){var bc=layoutModel.getSpecialWidgets("Layout");if(bc){aX.contents().find(".perc-widget").each(function(){var bd=f(this);var bf=bd.attr("widgetid");var be=bd.hasClass("perc-widget-transperant");var bg=bd.attr("assetid");if(bf in bc.LockedWidgets){bd.addClass("perc-locked")}if(bf in bc.TransperantWidgets){bd.addClass("perc-widget-transperant")}else{if(layoutModel.isTemplate()&&bg!=""&&!(bf in bc.ContentWidgets)){bd.addClass("perc-widget-transperant")}}})}return aX.contents().find(".perc-widget")}function bb(){f(".perc-widget-list").empty();f.getJSON(f.perc_paths.WIDGETS_ALL+"/type/"+f(".perc-widget-type").val()+"?filterDisabledWidgets=yes",function(bc){f.each(bc.WidgetSummary,function(){aP[this.id]=this;f(".perc-widget-list").append(M(this))});ah();a0(aP);f(".perc-widget-list").width("auto");fixIframeHeight()})}function a0(bg){var bd=function(bi,bj){if(bi==f.PercServiceUtils.STATUS_ERROR){var bk=f.PercServiceUtils.extractDefaultErrorMessage(bj.request);f.perc_utils.debug("Error : "+bk);return}f(bj.data.WidgetPackageInfoResult.packageInfoList).each(function(){var bl=this;var bn=bg[bl.widgetName];var bm=f("div.perc-widget-tool[id=widget-"+bl.widgetName+"-0]").closest("a");bm.tooltip({delay:800,bodyHandler:function(){var bo="<p> Name: "+bn.label+"</p><p> Description: "+bn.description+'</p><p class="perc-widget-is-responsive-label" status="'+(bn.responsive?"Yes":"No")+'"> Is Responsive: '+(bn.responsive?"Yes":"No")+"</p><p> Provider URL: "+bl.providerUrl+"</p><p> Version: "+bl.version+"</p>";return bo}})})};var bf=f.perc_paths.WIDGET_INFO;var bc=[];for(var bh in bg){bc.push(bh)}var be={WidgetPackageInfoRequest:{widgetNames:bc}};f.PercServiceUtils.makeJsonRequest(bf,f.PercServiceUtils.TYPE_POST,false,bd,be)}function ah(){var be=f(".perc-widget-type").val();var bd=[];f(".perc-widget-category-predefined").text(function(bg,bh){bd[bg]=bh.toLowerCase()});var bf=[];f.each(f(".perc-widget-list .perc-widget-tool"),function(bg,bj){if(typeof(f(bj).data("widget").type)!="undefined"){var bh=f(bj).data("widget").type;if(bh.toLowerCase()=="custom"){var bi=f(bj).data("widget").category;if(typeof(bi)!="undefined"){f.each(bi.split(","),function(bk,bl){if(bl!=""&&f.inArray(bl,bf)==-1){bf.push(bl)}})}}}});var bc=f(".perc-widget-category");bc.val("all");f(".perc-widget-category-custom").remove();if(be=="all"){f(".perc-widget-category-predefined").show();if(bf.length>0){bc.append(f("<option />").addClass("perc-widget-category-custom").val("other").text("Other"))}}if(be=="percussion"||be=="community"){f(".perc-widget-category-predefined").show()}if(be=="custom"){f(".perc-widget-category-predefined").hide();f.each(bf,function(bg,bh){bc.append(f("<option />").addClass("perc-widget-category-custom").val(bh).text(bh.charAt(0).toUpperCase()+bh.slice(1)))})}}function aA(){f.each(f(".perc-widget-list .perc-widget-tool"),function(){if(au(this)){f(this).parent("a").show()}else{f(this).parent("a").hide()}});f(".perc-widget-list").width("auto");fixIframeHeight()}function au(bg){var bf=f(".perc-widget-category").val();if(bf=="all"){return true}if(bf=="other"){var bd=f(bg).data("widget").type;return(bd.toLowerCase()=="custom")}if(typeof(f(bg).data("widget").category)=="undefined"){return false}var be=f(bg).data("widget").category.split(",");var bc=[];f(".perc-widget-category-predefined").text(function(bh,bi){bc[bh]=bi.toLowerCase()});return(f.inArray(bf,be)!=-1)}var B=new Object();function aJ(){var bc=aX[0].contentWindow.$(".perc-region");B=new Object();bc.each(function(){var bf=f(this).attr("id");var bd=aX[0].contentWindow.$(this);var be=bd.css("overflow");B[bf]=be;f(this).css("overflow","hidden")})}function J(){var bc=aX[0].contentWindow.$(".perc-region");bc.each(function(){var be=f(this).attr("id");var bd=B[be];f(this).css("overflow",bd)})}function M(bc){var bd;bd=f("<a/>").addClass("perc-tooltip-custom").css("overflow","hidden").append(f("<div/>").css({position:"relative"}).addClass("perc-widget-tool").append(f('<img src="/Rhythmyx'+bc.icon+'" alt=""></img>')).append(f("<div/>").append(f("<nobr/>").append(bc.label)).addClass("perc-widget-label").css("overflow","hidden")).attr("id","widget-"+bc.id+"-"+f(".perc-widget").size()).draggable({appendTo:"body",refreshPositions:true,helper:"clone",revert:false,start:function(){f.perc_utils.addAutoScroll();ab=null;aJ();f.percHideBodyScrollbars()},stop:function(){f.perc_utils.removeAutoScroll();J();f.percShowBodyScrollbars()}}).data("widget",bc));bd.attr("alt",bd.find("nobr").html());bd.attr("title",bd.find("nobr").html());return bd}function H(bd){dirty=bd;var bc=layoutModel.isTemplate()?"template":"page";ay.setDirty(bd,bc,ba)}function af(){var bc=f("#perc-orphan-assets");bc.html('<a class="mcol-listing perc-listing-type-percRichTextAsset perc-listing-category-ASSET ui-draggable ui-droppable mcol-opened" alt="RichText1" id="perc-finder-listing-16777215-101-721" title="RichText1"><img style="float: left;" src="/Rhythmyx/rx_resources/images/ContentTypeIcons/filetypeIconsRichText.png"><div style="cursor: default; text-overflow: ellipsis; overflow: hidden;" class="perc-finder-item-name" unselectable="on">RichText1</div></a>')}function K(){var bf=f("#perc-region-library");var bg=aX.contents().find(".perc-region");bf.empty();var bc="";var bd=[];bg.each(function(){var bh=f(this).attr("id");bd.push(bh)});bd.sort();for(r=0;r<bd.length;r++){bc+=aV.replace(/_REGION_ID_/g,"perc-re-"+bd[r]).replace(/_REGION_LABEL_/g,bd[r])}bf.html(bc);var be="perc-re-"+aX.contents().find(".perc-region-selected").attr("id");f(".perc-region-library-tool[name="+be+"]").addClass("perc-region-selected");f(".perc-region-library-tool").click(function(){var bi=f(this);f(".perc-region-library-tool").removeClass("perc-region-selected");bi.addClass("perc-region-selected");var bj=String(bi.attr("name")).replace(/^perc-re-/,"");var bh=aX.contents().find("#"+bj);bh.click()});f.PercTextOverflow(f(".perc-region-library-tool div"),122);fixIframeHeight()}var I=[];var C={};function aU(bc){var bd=bc.attr("id");I.push(bd);if(!C[bd]){C[bd]=[]}am()}function aj(bc){var bd=bc.attr("id");I.shift();if(C[bd]){delete C[bd]}am()}function F(bc,be){var bd=bc.draggable.data("widget").id;aB(bd,be);I=[];C={};am()}function aE(bd,be){var bf=be.attr("id");var bc=bd.attr("widgetid");if(C[bf]){C[bf].push(bc)}am()}function a5(bd,be){var bf=be.attr("id");var bc=bd.attr("widgetid");if(C[bf]){Z(C[bf],bc)}am()}function a7(bd,bc,bf){var be=bd.draggable.data("widget").id;aB(be,bf,bc);I=[];C={};am()}function am(){h=aX.contents();ax.hide();var bd=I[0];var bc=null;if(C[bd]){bc=C[bd][0]}if(bc&&bd){var be=h.find(".perc-widget[widgetid='"+bc+"']");aN(be)}else{if(bd){var bf=h.find("#"+bd);aC(bf)}else{}}}function aC(be){var bd=be.find(".perc-widget");if(bd.length==0){S(be)}else{var bc=f(bd[bd.length-1]);ao(bc)}}function S(bg){var be=bg.offset();var bd=be.top+A;var bc=be.left+A;var bf=bg.width();aO(bc,bd,bf)}function ao(bh){var be=bh.offset();var bc=be.left;var bg=bh.css("width");var bd=be.top;var bf=bh.height();var bi=bd+bf;aO(bc,bi,bg)}function aN(bg){var be=bg.offset();var bd=be.top;var bc=be.left;var bf=bg.css("width");aO(bc,bd,bf)}function aO(be,bd,bc){ax.css("background-color","#CAF589").css("left",be).css("top",bd).css("z-index","50000").css("position","absolute").css("height","5px").css("width",bc).show()}function aB(bi,bh,bf){var bd=I[0];var bg=h.find("#"+bd);var bc=null;var be=null;if(C[bd]){bc=C[bd][0];be=h.find(".perc-widget[widgetid="+bc+"]")}if(bc&&bd){aa.addWidget(bd,bi,bc);H(true);aH()}else{if(bd){aa.addWidget(bd,bi);H(true);aH()}}if(layoutModel.isResponsiveBaseTemplate()){a2(bi)}}function Z(bc,bd){for(i=0;i<bc.length;i++){if(bc[i]===bd){bc.splice(i,1)}}}function ae(){console.log([JSON.stringify(I),JSON.stringify(C)])}function aw(bc){layoutModel.eachRegion(function(){if(layoutModel.canOverride(this)||layoutModel.isTemplate()){var be=this.regionId;if(be!="percRoot"){var bd=f(aX.contents().find("#"+be)[0]);if(layoutModel.isTemplate()){D(bd,bc)}aT(bd,bc)}}})}function aT(bd,bc){if(bd.is(".perc-region-leaf")){aL(bd,bc)}else{aR(bd,bc)}}function aR(bd,bc){E(bd).sortable({disabled:bc,enable:!bc})}function aL(bd,bc){E(bd).sortable({disabled:bc,enable:!bc})}function D(bd,bc){E(bd).resizable({disabled:bc,enable:!bc})}f("#perc-error-alert").unbind().click(function(){f.PercLayoutErrorDialog().openLayoutErrorDialog()});function U(){var bd=document.getElementById("frame").contentWindow.percGlobalErrors;if(bd.length>0){return true}var bh=document.getElementById("frame").contentWindow.document;var bf=bh.styleSheets;for(var be=0;be<bf.length;be++){try{var bc=bf[be].cssRules?bf[be].cssRules:bf[be].rules;var bi=bc.length;if(bi==0){return true}}catch(bg){return true}}return false}function av(){if(f("#perc-wid-lib-expander").hasClass("perc-whitebg")){f.fn.percWidLibMaximizer(k)}if(f("#perc-region-library-expander").hasClass("perc-whitebg")){f.fn.percRegionLibraryMaximizer(k)}f("#perc-layout-menu #perc-lib-expander-div, #perc-layout-menu #perc-dropdown-actions-layout, #perc-layout-menu #perc-dropdown-help-layout, #perc-layout-menu #perc-dropdown-view-layout, #perc-region-library-maximizer, #perc-wid-lib-maximizer").addClass("perc-disable-menu-item");f(".perc-overlay-div, #region-tool-disabled").show();f("#region-tool").hide()}function aG(){f("#perc-layout-menu #perc-lib-expander-div, #perc-layout-menu #perc-dropdown-actions-layout, #perc-layout-menu #perc-dropdown-help-layout, #perc-layout-menu #perc-dropdown-view-layout, #perc-region-library-maximizer, #perc-wid-lib-maximizer").removeClass("perc-disable-menu-item");f(".perc-overlay-div, #region-tool-disabled").hide();f("#region-tool").show();f("#perc-undo-tool, #perc-undo-tool-disabled").hide()}var Y={removeDropsSortingResizing:aw,afterRender:aW,setLayoutDirty:H,enableToolbarMenu:aG,disableToolbarMenu:av,dirtyController:ay,widgetDecorator:aQ,regionDecorator:ap,layoutController:aa,cancel:a6,refreshRender:aH};if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.init(Y,X,aX)}f.PercEditRegionPropertiesDialog().initEditRegionPropertiesDialog(Y,layoutModel,aX)}})(jQuery,jQuery.Percussion);(function(N,x){var L=[];var A=[];var Y=[];if(!window.Node){window.Node=new Object();Node.ELEMENT_NODE=1;Node.ATTRIBUTE_NODE=2;Node.TEXT_NODE=3;Node.CDATA_SECTION_NODE=4;Node.ENTITY_REFERENCE_NODE=5;Node.ENTITY_NODE=6;Node.PROCESSING_INSTRUCTION_NODE=7;Node.COMMENT_NODE=8;Node.DOCUMENT_NODE=9;Node.DOCUMENT_TYPE_NODE=10;Node.DOCUMENT_FRAGMENT_NODE=11;Node.NOTATION_NODE=12}var G=null;var ah=null;var O=null;var k=null;var J=null;N.PercInspectionToolHandler={init:aa,saveCallback:h,cancelCallback:ae,afterRenderCallback:z,clearItoolMarkup:T};function aa(al,P,ak){O=al;k=P;J=ak;ad(false);N("#perc-region-tool-inspector").unbind().click(function(am){n();am.stopPropagation()});N("#perc-undo-tool").unbind().click(function(){j()});N("#perc-region-tool-menu").on("mouseover",".perc-dropdown-option-Stacked",function(){y("perc-row")});N("#perc-region-tool-menu").on("mouseout",".perc-dropdown-option-Stacked",function(){B("perc-row")});N("#perc-region-tool-menu").on("mouseover",".perc-dropdown-option-SidebySide",function(){y("perc-col")});N("#perc-region-tool-menu").on("mouseout",".perc-dropdown-option-SidebySide",function(){B("perc-col")});N("#perc-region-tool-inspector").hover(function(an){var am=N(an.relatedTarget);if(N.browser.msie&&am.is("ul")){am=am.find("a:first")}var ao=N("#perc-region-tool-menu").find("li.current");if(!am.is("a.perc-dropdown-option")&&!am.is("span.sf-sub-indicator")){ao.showSuperfishUl().siblings().hideSuperfishUl()}else{clearTimeout(ao.parents(["ul.","sf-js-enabled",":first"].join(""))[0].sfTimer)}if(!N(this).is(".buttonPressed")){N(this).css("background-position","0px -34px")}},function(an){var am=N(an.relatedTarget);if(N.browser.msie&&am.is("ul")){am=am.find("a:first")}if(!am.is("a.perc-dropdown-option")&&!am.is("span.sf-sub-indicator")){N("#perc-region-tool-menu").find("li.current").hideSuperfishUl()}if(!N(this).is(".buttonPressed")){N(this).css("background-position","0px 0px")}})}function h(){V();af();if(!(N("#perc-region-tool-inspector").hasClass("buttonPressed"))){N("#perc-undo-tool").hide();N("#perc-undo-tool-disabled").hide()}}function ae(){D();V();O.enableToolbarMenu()}function z(){if(G){G()}}function af(){if(A.length>0){N("#perc-undo-tool").show();N("#perc-undo-tool-disabled").hide()}else{N("#perc-undo-tool").hide();N("#perc-undo-tool-disabled").show()}}function j(){var P=A.pop();k.renderByObject(P,function(ak){window.frames[J.attr("id")].jQuery("body").empty().append(ak).ready(function(){O.afterRender(function(){if(L.length>0){e();L.pop();af();O.removeDropsSortingResizing(true)}if(G){G()}})})})}function F(){ai();R()}function ai(){var P=window.frames[0].jQuery;P(".perc-region.perc-region-leaf").filter(function(){var ak=P(this).find(".perc-widget");return ak.size()!=1||ak.eq(0).attr("widgetdefid")!="percRawHtml"||ak.eq(0).hasClass(".perc-locked")||ak.eq(0).children().size()==0||ak.eq(0).find(".html-sample-content").size()==1||(ak.eq(0).children().size()==1&&!ak.eq(0).children().eq(0).is("div"))||(ak.eq(0).children().size()==1&&ak.eq(0).children().eq(0).is("div")&&ak.eq(0).children().eq(0).children().length==0&&ak.eq(0).children().eq(0).outerHeight(true)==0&&ak.eq(0).children().eq(0).innerHeight()==0)}).addClass("perc-region-itool-unselectable")}function R(){var P=window.frames[0].jQuery;P(".perc-region.perc-region-leaf:not('.perc-region-itool-unselectable')").find(".perc-widget").each(function(){P(this).contents().filter(function(){return this.nodeType==Node.TEXT_NODE&&N.trim(P(this).text()).length>0}).wrap('<span class="perc-itool-text-node-wrapper"/>');if(P(this).children().size()==1){var ak=P(this);while(ak.children().length==1&&ak.children().eq(0).is("div")){ak.addClass("perc-itool-region-elem");ak=ak.find("> div")}ak.children().addClass("perc-itool-selectable-elem")}else{P(this).children().each(function(){if(P(this).outerHeight(true)==0&&P(this).innerHeight()==0){P(this).addClass("perc-zero-size-elem")}else{P(this).addClass("perc-itool-selectable-elem")}})}})}function I(){var P=J.contents();P.find(".perc-itool-selectable-elem").unbind("mouseenter");P.find(".perc-region-itool-unselectable").unbind("mouseenter");P.find(".perc-region-itool-unselectable").unbind("mouseleave");P.find(".perc-itool-selectable-elem").removeClass("perc-itool-selectable-elem");P.find(".perc-region-itool-unselectable").removeClass("perc-region-itool-unselectable");P.find(".perc-itool-region-elem").removeClass("perc-itool-region-elem")}function Q(){return A.length>0}function V(){A.length=0;L.length=0}function C(){var ak={apply:function(an){var am={status:false,message:"We're sorry. Because your page is form based you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page is form based you will not be able to breakdown your template with the inspector tool."};if(!(an.size()==1&&an.eq(0).children().length==1&&an.eq(0).children().eq(0).is("form"))){am.status=true;am.message="";am.consoleMsg=""}return am}};ah.push(ak);var P={apply:function(an){var am={status:false,message:"We're sorry. Because your page is table based you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page is table based you will not be able to breakdown your template with the inspector tool."};if(!(an.size()==1&&an.eq(0).children().length==1&&an.eq(0).children().eq(0).is("table"))){am.status=true;am.message="";am.consoleMsg=""}return am}};ah.push(P);var al={apply:function(an){var am={status:false,message:"We're sorry. The page does not have any inspectable elements you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page does not have any inspectable elements you will not be able to breakdown your template with the inspector tool."};var ao=an.filter(function(){var ap=window.frames[0].jQuery(this);var aq=ap.children().length===1&&!ap.children().eq(0).is("div");return !(aq)});if(ao.size()>0){am.status=true;am.message="";am.consoleMsg=""}return am}};ah.push(al)}function ab(){if(!window.console){return}if(ah==null){ah=[];C()}var P=J.contents().find(".perc-widget[widgetdefid='percRawHtml']:not('.perc-locked')").filter(":only-child").filter(function(){var am=window.frames[0].jQuery(this);var al=am.find(".html-sample-content").length==1;return !(al)});for(i=0;i<ah.length;i++){var ak=ah[i].apply(P);if(!ak.status){console.log(ak.consoleMsg);break}}}function b(P){k.render(function(ak){window.frames[J.attr("id")].jQuery("body").empty().append(ak).ready(function(){O.afterRender(function(){N.each(P,function(){var al=this;k.editRegion(al.regionId,function(){this.width=al.width;this.height=al.height})});S()})})})}function S(){k.render(function(P){window.frames[J.attr("id")].jQuery("body").empty().append(P).ready(function(){O.afterRender(function(){if(G){G()}});if(L.length>0){e()}})})}function e(){N.each(L,function(){N.each(this,function(){var P=this;var ak=J.contents().find('div[widgetid ="'+P.widgetId+'"]');try{ak.html(P.content)}catch(al){N.perc_utils.info("Failed to fill the widget content for widget id: "+P.widgetId+"  and the error is "+al)}ak.attr("ownerId",P.ownerid);if(P.isTransparent){ak.addClass("perc-widget-transperant")}ak.parents(".perc-region-puff:first").removeAttr("style").addClass("perc-new-splitted-region")})});O.removeDropsSortingResizing(true);O.setLayoutDirty(true);T();Z()}function n(){var al=N("#perc-region-tool-inspector");var am="This template contains unsaved changes. If you toggle Region Inspect mode, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";callbackFunction=function(){af();V();if(al.hasClass("buttonPressed")){D();O.enableToolbarMenu()}else{N.PercWorkflowController().checkOut("percPage",memento.pageId,function(an){if(an){Z();O.disableToolbarMenu()}})}G=null};var ak={question:am,dontSaveCallback:function(){G=callbackFunction;O.cancel()}};var P=O.dirtyController.isDirty();O.dirtyController.confirmIfDirty(function(){callbackFunction()},function(){},ak)}function q(){O.widgetDecorator.unselectAll();O.regionDecorator.unselectAll();O.regionDecorator.removeDecorations();O.widgetDecorator.removeDecorations()}function Z(){af();ab();F();q();var al=N("#perc-region-tool-inspector");al.addClass("buttonPressed");al.css("background-position","0px -68px");var P=J.contents();var ak=window.frames[0].jQuery;P.find(".perc-region-puff").addClass("perc-region-puff-gray");P.find(".perc-new-splitted-region").removeClass("perc-region-puff-gray");var am=P.find("#itool-placeholder-highlighter");if(am.length<1){P.find(".perc-region:first").append("<div id='itool-placeholder-highlighter' style='display:none;position:absolute;z-index:60000;opacity:0.8;filter:alpha(opacity=80);'></div>");am=P.find("#itool-placeholder-highlighter")}K(P,ak,am);H(P,ak,am);P.find(".perc-region:first").addClass("perc-itool-custom-cursor").mouseleave(function(){am.hide();P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter")});O.removeDropsSortingResizing(true)}function K(P,ak,al){P.find(".perc-region-itool-unselectable").mouseenter(function(){if(P.find(".perc-itool-selected-elem").length>0){return}var am=ak(this);am.css("background-color","orange").attr("title","You cannot further sub-divide this region.").css("cursor","default").css("z-index","1000000");P.find(".perc-region-puff").addClass("perc-region-puff-gray");am.closest(".perc-region-puff").removeClass("perc-region-puff-gray");P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter");am.find("div").each(function(){var an=ak(this).attr("title");ak(this).attr("tempTitle",an);ak(this).removeAttr("title")});al.hide()}).mouseleave(function(){var am=ak(this);am.find("div").each(function(){var an=ak(this).attr("tempTitle");ak(this).attr("title",an);ak(this).removeAttr("tempTitle")});am.css("background-color","transparent").removeAttr("title")})}function H(P,ak,al){ak("body").on("mouseenter",".perc-itool-selectable-elem, .perc-itool-multi-selectable-highlighter",function(an){var am=ak(this);var ao=P.find(".perc-itool-selected-elem").length==0||an.shiftKey&&ak(this).hasClass("perc-itool-multi-selectable-highlighter")||an.shiftKey&&ak(this).hasClass("perc-itool-multi-selectable");if(!ao){return}if(am.hasClass("perc-itool-multi-selectable-highlighter")){am.hide()}P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter");al.show();P.find(".perc-region-puff").addClass("perc-region-puff-gray");am.closest(".perc-region-puff").removeClass("perc-region-puff-gray");al.offset({top:am.offset().top,left:am.offset().left});al.height(am.innerHeight()).width(am.innerWidth());am.addClass("perc-itool-highlighter");al.unbind("click").click(function(ap){ap.preventDefault();f(ap)})});ak("body").on("mouseleave","#itool-placeholder-highlighter",function(){P.find(".perc-itool-multi-selectable-highlighter").show();ak(this).hide()})}function f(){var P=J.contents();var ak=window.frames[0].jQuery;var al=P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter").addClass("perc-itool-selected-elem");P.find("#itool-placeholder-highlighter").hide();ak(".perc-text-node-wrapper").contents().unwrap();if(al.prev()&&!al.prev().hasClass("perc-itool-selected-elem")){al.prev().addClass("perc-itool-multi-selectable")}if(al.next()&&!al.next().hasClass("perc-itool-selected-elem")){al.next().addClass("perc-itool-multi-selectable")}U(al,false);E(al);if(al.hasClass("perc-itool-multi-selectable")){al.removeClass("perc-itool-multi-selectable")}ad(true)}function E(ak){var P=J.contents();N(ak[0]).siblings().filter(":not('.perc-itool-selected-elem')").each(function(al){currentSibling=N(this);if(currentSibling.hasClass("perc-zero-size-elem")){if(currentSibling.prev().length>0){currentSibling.appendTo(currentSibling.prev());return}else{currentSibling.appendTo(currentSibling.next());return}}P.find(".perc-region:first").append("<div class = 'perc-sib-highlighter-div-"+al+" perc-sibling-div' style='border:5px solid grey; display:none;position:absolute;z-index:50000;opacity:1;filter:alpha(opacity=100);'></div>");var am=P.find(".perc-sib-highlighter-div-"+al);if(currentSibling.hasClass("perc-itool-multi-selectable")){am.addClass("perc-itool-multi-selectable-highlighter")}X(am,currentSibling)})}function U(am,P){var ak=J.contents();var al=N("<div class='perc-itool-selected-green-border' style='border:5px solid #A2C437; display:none;position:absolute;z-index:50000;opacity:1;filter:alpha(opacity=100);'></div>");ak.find(".perc-region:first").append(al);al.on("click",function(){if(am.prev().hasClass("perc-itool-selected-elem")&&am.next().hasClass("perc-itool-selected-elem")){return}ac()});if(P){al.css("border-color","#00afea")}al.show();al.offset({top:am.offset().top,left:am.offset().left}).height(am.innerHeight()-10).width(am.innerWidth()-10)}function y(am,an){var al=window.frames[0].jQuery;var ak=J.contents();var P=al(".perc-itool-selected-elem");if(P.length==0||(P.length==1&&P.is("div")&&al(P).hasClass("perc-itools-wrapper"))||(al(P[0]).parent().hasClass("perc-itools-wrapper"))){return}P.siblings(":not('.perc-itool-selected-elem')").each(function(){if(al(this).is("div")){al(this).addClass("perc-itools-wrapper perc-make-me-region").addClass(am)}else{al(this).wrap("<div class='perc-widget perc-itool-nov-div-wrapper perc-itools-wrapper perc-itool-region-puff'></div>")}});ak.find(".perc-sibling-div").remove();if(P.length==1&&P.is("div")){P.addClass("perc-itool-region-puff-self perc-make-me-region perc-self-wrapper perc-itools-wrapper").addClass(am);E(P)}else{P.wrapAll("<div  class='perc-widget perc-itool-multi-wrapper perc-itool-nov-div-wrapper perc-itool-region-puff-self perc-self-wrapper perc-itools-wrapper "+am+"'></div>");E(al(P[0]).parent())}ak.find(".perc-sibling-div").css({"border-color":"#00afea"});al(".perc-itool-selected-green-border").remove();al(P).each(function(){U(al(this),false)});if(am=="perc-col"){if(P.length==1){P.parent().addClass("perc-clear")}else{P.parent().parent().addClass("perc-clear")}}if(P.length==1){al(".perc-itool-selected-green-border").css("border-color","#00afea")}else{U(al(".perc-itool-multi-wrapper"),true);al(".perc-itool-selected-green-border").parent(".perc-itool-selected-green-border").css("border-color","#00afea")}if(an){an()}}function B(an,ak){var al=J.contents();var am=window.frames[0].jQuery;var P=am(".perc-itool-selected-elem");if(P.length==0){return}if(P.length>1){P.unwrap()}am(".perc-itool-nov-div-wrapper").contents().unwrap();if(an=="perc-col"){P.parent().removeClass("perc-clear")}am(".perc-itools-wrapper").removeClass("perc-itools-wrapper perc-make-me-region").removeClass(an);am(".perc-itool-region-puff-self").removeClass("perc-itool-region-puff-self perc-make-me-region perc-self-wrapper").removeClass(an);al.find(".perc-sibling-div").remove();E(P);am(".perc-itool-selected-green-border").remove();am(P).each(function(){U(am(this),false)})}function X(P,ak){P.show();P.offset({top:ak.offset().top,left:ak.offset().left});P.height(ak.innerHeight()-10).width(ak.innerWidth()-10)}function T(){var al=J.contents();var am=window.frames[0].jQuery;am(".perc-itool-highlighter").removeClass("perc-itool-highlighter");am(".perc-itool-selected-elem").removeClass("perc-itool-selected-elem");am("#itool-placeholder-highlighter").remove();am(".perc-itool-selected-green-border").remove();am(".perc-itool-selected-elem-off").removeClass("perc-itool-selected-elem-off");am(".perc-text-node-wrapper").contents().unwrap();al.find("#perc-next-sib-wrapper").remove();al.find("#perc-pre-sib-wrapper").remove();al.find(".perc-pre-sib-wrapper").removeClass("perc-pre-sib-wrapper");al.find(".perc-pre-next-wrapper").removeClass("perc-pre-next-wrapper");al.find(".perc-sibling-div").remove();am(".perc-itool-multi-selectable").removeClass("perc-itool-multi-selectable");al.find(".perc-region-puff").removeClass("perc-region-puff-gray");al.find(".perc-itool-selectable-elem").removeClass("perc-itool-selectable-elem");var ak=am(".perc-zero-size-elem").parent().parent();var P=am(".perc-zero-size-elem").detach();P.appendTo(ak);am(".perc-zero-size-elem").removeClass("perc-zero-size-elem");I()}function ac(){var al=J.contents();var am=window.frames[0].jQuery;am(".perc-itool-selected-elem").removeClass("perc-itool-selected-elem");am("#itool-placeholder-highlighter").remove();am(".perc-itool-selected-elem-off").removeClass("perc-itool-selected-elem-off");am(".perc-text-node-wrapper").contents().unwrap();am(".perc-itool-multi-selectable").removeClass("perc-itool-multi-selectable");var ak=am(".perc-zero-size-elem").parent().parent();var P=am(".perc-zero-size-elem").detach();P.appendTo(ak);al.find(".perc-itool-selected-green-border").remove();al.find(".perc-pre-sib-wrapper").removeClass("perc-pre-sib-wrapper");al.find(".perc-pre-next-wrapper").removeClass("perc-pre-next-wrapper");al.find(".perc-itool-region-puff").removeClass("perc-itool-region-puff");al.find(".perc-sibling-div").remove();ad(false);Z()}function D(){V();af();var P=N("#perc-region-tool-inspector");P.removeClass("buttonPressed");P.css("background-position","0px -34px");J.contents().find(".perc-itool-custom-cursor").removeClass("perc-itool-custom-cursor");O.widgetDecorator.addClicks();O.regionDecorator.addClicks();T();ad(false);O.removeDropsSortingResizing(false)}function ad(P){var ak=N("#perc-region-tool-menu");ak.html("");ak.PercDropdown({percDropdownRootClass:"perc-region-tool-menu",percDropdownOptionLabels:["","Stacked","Side by Side"],percDropdownCallbacks:[function(){},W,M],percDropdownCallbackData:["","Stacked","Side by Side"],percDropdownDisabledFlag:[false,P,P],percDropdownItemImage:["","../images/images/menuIconStacked.png","../images/images/menuIconSide.png"],percDropdownDisabledItemImage:["","../images/images/menuIconStackedGray.png","../images/images/menuIconSideGray.png"]})}function W(){ag(true)}function M(){ag(false)}function ag(P){var ak=window.frames[0].jQuery;if(ak(".perc-itools-wrapper").length==0){if(P){y("perc-row",function(){aj(P)})}else{y("perc-col",function(){aj(P)})}}else{aj(P)}}function aj(aq){ad(false);var ay=jQuery.extend(true,{},k.getTemplateObj());A.push(ay);T();var ar=aq?"south":"left";var an=window.frames[0].jQuery;an(".perc-zero-size-div").removeClass("perc-zero-size-div");var ao=an(".perc-itool-region-puff-self");var ak=ao.parents(".perc-region-puff:first").attr("id");var am=ao.parents(".perc-widget[widgetdefid='percRawHtml']").attr("widgetid");var ap=ao.parents(".perc-widget[widgetdefid='percRawHtml']").hasClass("perc-widget-transperant");var aw=ao.parents(".perc-widget-puff:first").attr("ownerId");an.fn.reverse=[].reverse;var at=an(".perc-self-wrapper");var av=[];var au=an(".perc-itools-wrapper").parent();while(au.not(".perc-widget[widgetdefid='percRawHtml']").length>0){av.push(au);au=au.parent()}av=an(av).reverse();var ax=aq?an(".perc-itools-wrapper"):an(".perc-itools-wrapper").reverse();var al=[];var P=ak;av.each(function(aA){var aE=N(this);var aD=aE.attr("id");var aB;var aC="";var aF=aE.attr("class");userRegionClasses=aF?aF.split(" "):[];for(i=0;i<userRegionClasses.length;i++){var az=userRegionClasses[i];if(az.indexOf("perc-")==-1){aC+=az+" "}}O.layoutController.addRegion(P,"center",function(aG){aB=aG.regionId;k.editRegion(aG.regionId,function(){if(aD&&aD!=""){this.regionId=aD}this.cssClass=aC;if(!aq){var aH={};aH.regionId=this.regionId;aH.width=aE.width();aH.height=aE.height();al.push(aH)}})});P=aD&&aD!=""?aD:aB;an(P).addClass("perc-region-puff-gray")});ax.each(function(aB){var az=N(this);var aF="";var aD="";if(az.is(".perc-make-me-region")){var aC=N(this);aF=aC.attr("id");var aE=aC.attr("class");userRegionClasses=aE?aE.split(" "):[];for(i=0;i<userRegionClasses.length;i++){var aA=userRegionClasses[i];if(aA.indexOf("perc-")==-1){aD+=aA+" "}}}O.layoutController.addRegion(P,ar,function(aH){k.editRegion(aH.regionId,function(){if(aF&&aF!=""){this.regionId=aF}this.cssClass=aD;if(!aq){var aI={};aI.regionId=this.regionId;aI.width=az.width();aI.height=az.height();al.push(aI)}});var aG=[];O.layoutController.addWidget(aH.regionId,"percRawHtml",null,function(aJ){var aI={};aI.widgetId=aJ;aI.content=az.html();aI.isTransparent=ap;aI.ownerid=aw;aG.push(aI)});L.push(aG)})});O.layoutController.removeWidgetParentRegion(am,true);b(al)}})(jQuery,jQuery.Percussion);(function(h,f){var k=0;var j=1;var b=2;var e=false;f.templateView=function(){h.perc_iframe_fix(h("#frame"));var A,x,Q,z;var J=h("#frame");h("body").css("overflow","hidden");var D=h.PercDirtyController;var F=false;var S=h.perc_utils;function N(){J.contents().find("body").html("");J.css("display","none")}h(window).resize(function(){fixIframeHeight();fixBottomHeight()});N();h("#tabs").tabs({selected:-1,show:function(){fixBottomHeight()},select:function(ai,ae){if(!gSelectTemp){return false}var ad=h(this);if(D.isDirty()){e=false;D.confirmIfDirty(function(){O(false);ad.tabs("select",ae.index);B()});return false}else{B()}H();if(ae.index==k){h("body").css("overflow","auto");var W=h("#perc-dropdown-actions");W.html("");var Y=["Actions","Edit Meta-data","Edit Page"];var al=[true,true,memento.isEditPage];W.PercDropdown({percDropdownRootClass:"perc-dropdown-actions",percDropdownOptionLabels:Y,percDropdownCallbacks:[function(){},function(){},function(){M()}],percDropdownCallbackData:["Actions","Edit Meta-data","Edit Page"],percDropdownDisabledFlag:al});var ab=h("#perc-dropdown-view");ab.html("");var Y=["View","Disable JavaScript"];var ah=[false,true];ab.PercDropdown({percDropdownRootClass:"perc-dropdown-view",percDropdownOptionLabels:Y,percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:ah});A=f.templateModel(h.perc_templatemanager,gSelectTemp,L);J.css("display","block");h(".perc-dropdown-option-EditMeta-data, .perc-dropdown-option-ViewMeta-data, #perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){h.perc_template_metadata_dialog(gSelectTemp)});h("#perc-metadata-button").find("img").attr("src","/cm/images/icons/buttonMetadata.png").bind("mouseenter",function(){h(this).attr("src","/cm/images/icons/buttonMetadataOver.png")}).bind("mouseleave",function(){h(this).attr("src","/cm/images/icons/buttonMetadata.png")});h("#perc-preview-button").hide();h("#perc-revisions-button").hide();return}if(ae.index==j){h("body").css("overflow","auto");var af=h("#perc-dropdown-actions-layout");af.html("");var Y=["Actions","Edit Page"];var U=[true,memento.isEditPage];af.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:Y,percDropdownCallbacks:[function(){},function(){M()}],percDropdownCallbackData:["Actions","Edit Page"],percDropdownDisabledFlag:U});var V=h("#perc-dropdown-view-layout");V.html("");V.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript","Hide Guides"],percDropdownDisabledFlag:[false,true,true]});var Z=true;h.PercTemplateService().checkImportLogExists(gSelectTemp,function(an,ao){if(an==h.PercServiceUtils.STATUS_ERROR){Z=false}});var ag=h("#perc-dropdown-help-layout");ag.html("");var ac=["Help","Download Report Log","Video Tutorials","Import FAQs","Percussion Community","More Help"];var am=[false,Z,true,true,true,true];ag.PercDropdown({percDropdownRootClass:"perc-dropdown-help",percDropdownOptionLabels:ac,percDropdownCallbacks:[function(){},function(){E()},I,function(){P("ImportFAQs","http://help.percussion.com/in-product/import-faqs")},function(){P("PercussionCommunity","http://cm1community.percussion.com/percussion")},function(){P("MoreHelp","http://help.percussion.com")}],percDropdownCallbackData:["Help","Download Report Log","Video Tutorials","Import FAQs","Percussion Community","More Help"],percDropdownDisabledFlag:am});A=f.templateModel(h.perc_templatemanager,gSelectTemp,y);J.css("display","block");h("#perc-error-alert").css("visibility","hidden");return}if(ae.index==b){h("body").css("overflow","auto");var aa=h("#perc-dropdown-actions-style");aa.html("");var ak=["Actions","Edit Page"];var aj=[true,memento.isEditPage];aa.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:ak,percDropdownCallbacks:[function(){},function(){M()}],percDropdownCallbackData:["Actions","Edit Page"],percDropdownDisabledFlag:aj});var X=h("#perc-dropdown-view-style");X.html("");X.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});A=f.templateModel(h.perc_templatemanager,gSelectTemp,K);J.css("display","block");return}}});function I(){var V=h("<div/>");V.append(h('<div style="height: 400px; overflow:hidden; margin-left: 68px; margin-right: 92px">').append(h('<iframe id="perc_iframe_video" src="//help.percussion.com/in-product/gallery" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="480px" height="0px" style="display: block; overflow: hidden">')).append(h('<img id="perc_notfound_image" src="../images/images/VideoTutorialNotFound.png" width="480px" height="0px">')));V.append(h('<img height="0px" width="0px" src="//help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(q).load(R));var W={"Close Normal":{id:"perc_video_tutorial_close",click:function(){dialog.remove()}}};var U={id:"perc_video_tutorial_dialog",title:"Video Tutorial",modal:true,resizable:false,closeOnEscape:false,width:"auto",height:"auto",percButtons:W};dialog=h(V).perc_dialog(U)}function R(){h("#perc_video_tutorial_dialog").find("#perc_iframe_video").attr("height","400px")}function q(){h("#perc_video_tutorial_dialog").find("#perc_notfound_image").attr("height","400px")}h("#perc-styleTabs").tabs({collapsible:true,selected:0,select:function(U,V){Q.updateTemplateObject();switch(V.index){case 0:Q.showGalleryView();break;case 1:Q.showThemeView();break;case 2:Q.showCSSOverrideView();break}}});function M(){h.PercPathService.getPathItemById(memento.pageId,function(V,X){if(V==h.PercServiceUtils.STATUS_SUCCESS){T();var U=$j.deparam.querystring();var W=true;X.PathItem.path=X.PathItem.folderPaths.replace("//","/")+"/"+X.PathItem.name;h.PercNavigationManager.handleOpenPage(X.PathItem,W)}else{h.perc_utils.alert_dialog({title:"Error",content:X});return}})}function B(){h(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}h("#perc-css-editor-cancel").click(function(){A.load();D.setDirty(false,"template")});h("#perc-css-editor-save").click(function(){Q.setOverrideCSS();Q.save(function(U,V){if(U==true){D.setDirty(false,"template")}})});h("#perc-wid-lib-expander").click(function(){h.fn.percWidLibMaximizer(f)});function L(){fixIframeHeight();if(h.PercNavigationManager.isJavascriptOff()){A.setJavaScriptOff(true)}f.contentView(h("#frame"),A);n(A);C()}function y(){if(A.isResponsiveBaseTemplate()){h("#region-tool, #region-tool-help").css("visibility","visible");h("#perc-region-tool-inspector, #perc-region-tool-menu").css("visibility","hidden")}else{h("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu").css("visibility","visible")}var U=f.layoutController(A);f.layoutView(h("#frame"),A,U,null,function(V){O(V)});fixIframeHeight();if(h.PercNavigationManager.isJavascriptOff()){A.setJavaScriptOff(true)}h("#region-tool").draggable({start:function(V,W){S.addAutoScroll()},stop:function(V,W){S.removeAutoScroll()},helper:"clone",refreshPositions:true});h("#w1").data("widget",{definitionId:"widgetType"}).draggable({});n(A);C()}function O(U){D.setDirty(U,"template");F=U}function K(){if(h.PercNavigationManager.isJavascriptOff()){A.setJavaScriptOff(true)}Q=f.cssController(A,h("#frame"),f.CSSPreviewView(h("#frame"),A));Q.refreshCssViews();fixIframeHeight();n(A);C()}function n(U){h(".perc-template-name-text").html("").text(U.getName());if(U.isResponsiveBaseTemplate()){h(".perc-template-name-label").html("").text("Editing Responsive Template:");h(".perc-template-details").attr("type","template-responsive")}else{h(".perc-template-name-label").html("").text("Editing Template:");h(".perc-template-details").attr("type","template-base")}}h(".perc-style-sub-tab").click(function(){fixIframeHeight()});function G(U){return function(){var V=h.map(arguments,function(W){return W});V.unshift(U);console.log.apply(console,V)}}function H(){var U=h("#perc-region-tool-inspector");U.removeClass("buttonPressed");h("#perc-layout-menu #perc-lib-expander-div, #perc-layout-menu #perc-dropdown-actions-layout, #perc-layout-menu #perc-dropdown-view-layout, #perc-region-library-maximizer, #perc-wid-lib-maximizer").removeClass("perc-disable-menu-item");h(".perc-overlay-div, #region-tool-disabled, #perc-undo-tool, #perc-undo-tool-disabled").hide();h("#region-tool").show()}function E(){var U=h.perc_paths.VIEW_IMPORT_LOG+"?templateId="+gSelectTemp;P("perc_dropdown_option_DownloadReportLog",U)}function P(V,U){window.open(U,"perc_dropdown_option_"+V)}function T(){$j.PercTemplateService().regionCSSClearCache(A.getTemplateObj().Template.theme,A.getTemplateObj().Template.name,function(U,V){})}function C(){if(!e){if(A.isTemplate()){h.PercTemplateService().regionCSSPrepareForEdit(A.getTemplateObj().Template.theme,A.getTemplateObj().Template.name,function(U,V){e=true})}}}fixTemplateHeight()}})(jQuery,jQuery.Percussion);(function(j,h){var b=0;var e=1;var k=10;var f=0;h.templateDesignView=function(){j.perc_iframe_fix(j("#frame"));var x,ag,ac,Q;var q=j("#frame");j("body").css("overflow","hidden");var E=j.PercDirtyController;var K=false;var al=j.perc_utils;function T(){q.contents().find("body").html("");q.css("display","none")}j(window).resize(function(){fixIframeHeight();fixBottomHeight()});T();var ah=j("#perc-pageEditor-menu-name").text();if(ah==""){j("#perc-site-templates-label").hide();j("#perc-site-templates-inline-help").show();j("#perc-temp-lib-expander").removeClass("expander-enabled");j("#perc-temp-lib-expander").addClass("expander-disabled");j("#perc-temp-lib-maximizer").replaceWith('<a id="perc-temp-lib-disabled" style="float: left;" href="#"></a>')}else{j("#perc-site-templates-label").show();j("#perc-site-templates-inline-help").hide();j("#perc-temp-lib-expander").removeClass("expander-disabled");j("#perc-temp-lib-expander").addClass("expander-enabled");j("#perc-temp-lib-disabled").replaceWith('<a id="perc-temp-lib-maximizer" style="float: left;" href="#"></a>')}var X=j.PercNavigationManager.getSiteName();if(typeof X=="undefined"){var B=false}else{var B=true}var aj=j("#perc-dropdown-actions");aj.html("");var H=["Actions","Create Template from Page","Add template","Export template","Import template"];var n=[true,B,B,false,B];aj.PercDropdown({percDropdownRootClass:"perc-dropdown-template-action",percDropdownOptionLabels:H,percDropdownCallbacks:[function(){},I,P,function(){},V],percDropdownCallbackData:["Actions","Create Template from Page","Add Template","Export Template","Import Template"],percDropdownDisabledFlag:n});j(".perc-dropdown-option-CreateTemplatefromPage").addClass("perc-drop-disabled").css("color","#9FA3AA");O(e);j("#tabs").tabs({disabled:[1,2,3],show:function(){fixBottomHeight()},select:function(an,ao){if(!gSelectTemp){return false}var am=j(this);T();j("body").css("overflow","hidden");return}});this.getCurrentTemplatesView=Z;this.setCurrentTemplatesView=N;this.VIEW_MODE_THUMBNAILS=b;this.VIEW_MODE_CATALOG=e;af();function M(ap,am){var ao=j.PercNavigationManager.getSiteName();var an=JSON.parse(j.cookie("perc-unassigned-panel-"+ao+"-settings"));if(an!=null){if(ap!=null&&typeof(ap)!="undefined"){an.showPanel=ap}if(am!=null&&typeof(am)!="undefined"){an.pageNumber=am}}else{an={showPanel:ap,pageNumber:am}}j.cookie("perc-unassigned-panel-"+ao+"-settings",JSON.stringify(an))}function af(){var ap=j(".perc-panel-expander-icon");var am=j(".perc-unassigned-panel");ap.click(function(){if(typeof(j.PercNavigationManager.getSiteName())!="undefined"){M(ap.is(".perc-collapsed"));if(ap.is(".perc-collapsed")){am.removeClass("perc-closed").addClass("perc-opened");am.show("slide",{},500,function(){j("#perc-assigned-templates").template_selected("updateTemplatesPagingSize")});ap.removeClass("perc-collapsed").addClass("perc-expanded");aa();f=setInterval(aa,10000)}else{am.removeClass("perc-opened").addClass("perc-closed");am.hide("slide",{},500,function(){j("#perc-assigned-templates").template_selected("updateTemplatesPagingSize")});ap.removeClass("perc-expanded").addClass("perc-collapsed");window.clearInterval(f);M(false)}}});var ao=j.PercNavigationManager.getSiteName();if(typeof(ao)!="undefined"){j.PercPageService.getUnassignedPagesBySite(ao,1,k,function(at,aq){if(at==j.PercServiceUtils.STATUS_SUCCESS){var av=JSON.parse(j.cookie("perc-unassigned-panel-"+j.PercNavigationManager.getSiteName()+"-settings"));var aw=false;var ar=1;if(av!=null){aw=av.showPanel;ar=av.pageNumber}else{var au=aq.UnassignedResults;if(typeof(au.unassignedItemList.childrenInPage)!="undefined"){aw=au.unassignedItemList.childrenInPage.length>0}}if(aw){am.removeClass("perc-closed").addClass("perc-opened");am.show("slide",{},500,function(){});ap.removeClass("perc-collapsed").addClass("perc-expanded");aa(ar);f=setInterval(aa,10000)}}})}else{ap.addClass("perc-disabled")}var an=j(".perc-unassigned-panel .perc-template-pages-controls .perc-jump");j.perc_filterField(an,j.perc_textFilters.ONLY_DIGITS);j(".perc-unassigned-panel .perc-template-pages-controls .previous").click(C);j(".perc-unassigned-panel .perc-template-pages-controls .next").click(Y);j(".perc-unassigned-panel .perc-template-pages-controls").submit(function(){aa(parseInt(an.val()));return false})}function C(){var am=j(".perc-unassigned-panel .perc-template-pages-controls .perc-jump");aa(parseInt(am.val())-1)}function Y(){var am=j(".perc-unassigned-panel .perc-template-pages-controls .perc-jump");aa(parseInt(am.val())+1)}function aa(am){if(typeof(am)=="undefined"){var ap=j(".perc-unassigned-panel .perc-template-pages-controls .perc-jump");var am=ap.val()!=""?parseInt(ap.val()):1}am=(am!=0)?am:1;M(null,am);var ao=(((am-1)*k)+1);var an=j.PercNavigationManager.getSiteName();if(typeof(an)!="undefined"){j.PercPageService.getUnassignedPagesBySite(an,ao,k,function(ar,aq){if(ar==j.PercServiceUtils.STATUS_SUCCESS){var au=aq.UnassignedResults;y(au.importStatus);ad(au.unassignedItemList);var av=au.importStatus.catalogedPageCount+au.importStatus.importedPageCount;var at=0;if(typeof(au.unassignedItemList.childrenInPage)!="undefined"){at=j.perc_utils.convertCXFArray(au.unassignedItemList.childrenInPage).length}F(au.unassignedItemList.startIndex,at,av)}else{}})}}function F(au,ao,av){var am=j(".perc-unassigned-panel");var an=am.find(".perc-panel-page-group-range");var ap=am.find(".perc-panel-total");var ar=am.find(".perc-jump");if(ao>0){an.text(au+"-"+(au+ao-1))}else{an.text(0)}ap.text(av);var at=Math.floor((au-1)/k)+1;ar.val(at);if(at<=1){am.find(".previous").removeClass("previous").addClass("previous-disabled").unbind("click")}else{am.find(".previous-disabled").removeClass("previous-disabled").addClass("previous").unbind("click").click(C)}var aq=au+k-1;if(aq>=av){am.find(".next").removeClass("next").addClass("next-disabled").unbind("click")}else{am.find(".next-disabled").removeClass("next-disabled").addClass("next").unbind("click").click(Y)}}function y(at){var an=j(".perc-panel-progress");var am=an.find(".perc-progress-finished");var aq=an.find(".perc-progress-bar-container");var ao=aq.find(".perc-progress-bar");var au=an.find(".perc-progress-message");var ar=0;var ap=at.catalogedPageCount+at.importedPageCount;if(ap>0){ar=((at.importedPageCount*100)/ap)}if(ar==100){au.show();au.css("margin-left","3px").text("Congratulations.");aq.hide();am.show();window.clearInterval(f)}else{var av="Imported "+at.importedPageCount+" of "+ap+" cataloged pages";if(av.length>34){av=av.replace(" cataloged pages","")}au.text(av);am.hide();aq.show();if(ap==0){aq.css("background-color","#D7D7D9")}else{aq.css("background-color","#E6E6E9")}}ao.css("width",ar+"%")}function ad(aq){var am=j(".perc-unassigned-panel");var an=am.find(".perc-imported-page-selected").size()==1?am.find(".perc-imported-page-selected").attr("id"):null;var ao=am.find(".perc-panel-pages-list");ao.empty();var ap=j("<ul/>");ao.append(ap);var av=j.perc_utils.convertCXFArray(aq.childrenInPage);for(var ar=0;ar<10;ar++){var au={id:"",path:"",name:"",status:"blankSlot"};if(typeof(av)!="undefined"&&av[ar]){au=av[ar]}var at=j("<li/>").attr("id",au.id).attr("title",au.path).append(j("<img/>").addClass("perc-left-img").attr("src","../images/images/inspectButton.png").attr("data",JSON.stringify(au))).append(j("<div/>").text(au.name)).append(j("<span/>").addClass("perc-imported-page-dropdown"));at.find(".perc-left-img").PercImageTooltip();at.find(".perc-imported-page-dropdown").PercDropdown({percDropdownRootClass:"perc-imported-page-dropdown-list",percDropdownOptionLabels:["","Open Page","Change Template"],percDropdownCallbacks:[function(){},U,R],percDropdownCallbackData:["",{pageId:au.id,pagePath:au.path},{pageId:au.id}]});switch(au.status){case"Imported":at.addClass("perc-imported-page").click(function(){j(".perc-imported-page-selected").removeClass("perc-imported-page-selected");j(this).addClass("perc-imported-page-selected");var aw=j(".perc-dropdown-option-CreateTemplatefromPage");aw.removeClass("perc-drop-disabled").attr("style","")});at.find(".perc-imported-page-dropdown").show();break;case"Importing":at.find(".perc-left-img").attr("src","/Rhythmyx/sys_resources/images/running.gif");at.find(".perc-imported-page-dropdown").hide();at.attr("disabled","disabled");break;case"Cataloged":at.find(".perc-left-img").attr("src","/Rhythmyx/sys_resources/images/iconSpider.png");at.find(".perc-imported-page-dropdown").hide();at.addClass("perc-page-disabled");break;case"blankSlot":at.empty();break}ap.append(at)}if(an){am.find(".perc-imported-page[id='"+an+"']").addClass("perc-imported-page-selected")}}function U(am){j.PercNavigationManager.openPage(am.pagePath,true)}function R(am){j.PercChangeTemplateDialog().openDialog(am.pageId,"",j.PercNavigationManager.getSiteName(),function(){window.location.reload()})}function Z(){if(j("#perc-activated-templates").hasClass("perc-templates-detailed")){return e}else{return b}}function N(am){if(am==b){j("#perc-activated-templates").removeClass("perc-templates-detailed");ab()}else{if(am==e){j("#perc-activated-templates").addClass("perc-templates-detailed");ak()}}}function V(){z()}function P(){j.PercAddTemplateDialog(function am(an){if(an!==undefined&&an!==""){j("#perc-assigned-templates").template_selected("refresh",an)}})}function I(){j.PercBlockUI();if(j(".perc-dropdown-option-CreateTemplatefromPage").hasClass("perc-drop-disabled")){j.unblockUI();return}var am=j(".perc-imported-page-selected").attr("id");if(!am){j.perc_utils.alert_dialog({title:"Warning",content:"Please select an imported page to create a template from page."});j.unblockUI()}else{j.PercWorkflowController().checkOut("percPage",am,function(an){if(an){j.PercTemplateService().createTemplateFromPage(am,j.PercNavigationManager.getSiteName(),function(ao,ap){if(!ao){j.perc_utils.alert_dialog({title:"Error",content:ap.errorMessage})}else{var aq=j(".perc-unassigned-panel .perc-template-pages-controls .perc-jump");aa(parseInt(aq.val()));if(ap.name!==undefined&&ap.name!==""){W();j.cookie("templateImport",ap.name);j.PercBlockUI();location.reload()}}})}})}}function O(aq){var ar=[];var am=[];var ao=[];var an=[];var at=j.PercNavigationManager.getSiteName();if(aq==e){ar=["View","Thumbnails"];am=[true,true];ao=[function(){},ab];an=["View","Thumbnails"]}else{if(aq==b){ar=["View","Catalog"];am=[true,true];ao=[function(){},ak];an=["View","Catalog"]}}if(at==null||at==""){am[1]=false}var ap=j("#perc-dropdown-view");ap.html("");ap.PercDropdown({percDropdownRootClass:"perc-dropdown-template-view",percDropdownOptionLabels:ar,percDropdownCallbacks:ao,percDropdownCallbackData:an,percDropdownDisabledFlag:am})}function W(){var am;am=$j.PercNavigationManager.getMemento();am.view=null}function ab(){W();j(".perc-templates-layout").css("background-color","#FFFFFF");j(".perc-prev-templates-carousel").css("display","none");j(".perc-next-templates-carousel").css("display","none");j("#perc-assigned-templates").width("auto").height("auto");j("#perc-assigned-templates").data("scrollable").begin();j(".perc-items").width("auto");j(".perc-template-item").css("margin-bottom","20px");j(".perc-template-item .perc-template-paging-container").hide();j(".perc-template-item-middle-droppable").height("212px");j("#perc-activated-templates").removeClass("perc-templates-detailed");O(b);fixIframeHeight();j("#perc-activated-templates-scrollable").trigger("autoscroll");J()}function J(){var an=j("#perc-template-view-container");var ap=j(".perc-unassigned-panel-expander");var ao=j(".perc-panel-expander-icon");var am=j(".perc-unassigned-panel");if(ao.is(".perc-expanded")){am.removeClass("perc-opened").addClass("perc-closed");am.hide();ao.removeClass("perc-expanded").addClass("perc-collapsed");window.clearInterval(f);M(false)}ap.hide();an.css("margin-left","0px")}function L(){var am=j("#perc-template-view-container");var an=j(".perc-unassigned-panel-expander");an.show();am.css("margin-left","38px")}function ak(){W();j(".perc-templates-layout").css("background-color","");j(".perc-prev-templates-carousel").css("display","inline-block");j(".perc-next-templates-carousel").css("display","inline-block");j(".perc-items").width("20000em");j("#perc-assigned-templates").data("scrollable").updateItemWrap();j(".perc-template-item").css("margin-bottom","0px");j(".perc-template-item .perc-template-paging-container").show();j(".perc-template-item-middle-droppable").height(j(".perc-template-item").height);j("#perc-activated-templates").addClass("perc-templates-detailed");O(e);j("#perc-assigned-templates").height("auto");fixIframeHeight();j("#perc-activated-templates-scrollable").trigger("autoscroll");L()}j("#perc-wid-lib-expander").click(function(){j.fn.percWidLibMaximizer(h)});var S=j("#perc-assigned-templates").template_selected();S.on("template_selected.change",function(an,ao){if(ao!==undefined&&ao.templateId!==undefined&&ao.templateName!==undefined){var am=j.perc_paths.TEMPLATE_EXPORT;am+="/"+ao.templateId+"/"+ao.templateName+".xml";var ap=j(".perc-dropdown-option-Exporttemplate");ap.attr("href",am).attr("style","").removeClass("perc-drop-disabled")}});function ai(){fixIframeHeight();h.contentView(j("#frame"),x)}function A(){fixIframeHeight();var am=h.layoutController(x);h.layoutView(j("#frame"),x,am,null,function(an){G(an)});j("#region-tool").draggable({start:function(an,ao){al.addAutoScroll()},stop:function(an,ao){al.removeAutoScroll()},helper:"clone",refreshPositions:true});j("#w1").data("widget",{definitionId:"widgetType"}).draggable({})}function G(am){E.setDirty(am,"template");K=am}j(".perc-style-sub-tab").click(function(){fixIframeHeight()});function D(am){return function(){var an=j.map(arguments,function(ao){return ao});an.unshift(am);console.log.apply(console,an)}}fixTemplateHeight();function z(ao){var am=this;var an="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='41px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp'></iframe></div>";if(ao){an="<div id='perc-import-template-wrapper'><iframe name='perc-import-template-frame' id='perc-import-template-frame' height='83px' FRAMEBORDER='0' width='100%' src='../jsp/importTemplate.jsp?status=PERC_ERROR&message=The file you attempted to import is not a valid XML file. Choose a valid CM1 template XML file for upload.'></iframe></div>"}dialog=j(an).perc_dialog({resizable:false,title:"Import Template",modal:true,closeOnEscape:true,percButtons:{Import:{click:function(){var ap=j.perc_paths.TEMPLATE_IMPORT;j.PercTemplateService().getSiteProperties(j.PercNavigationManager.getSiteName(),function(ar,aq){if(ar){ap=ap+"/"+aq.SiteProperties.id;var at=j("#perc-import-template-frame").contents().find(".perc-template-import-field").val();if(at==""){j("#perc-import-template-frame").css("height","67px");j("#perc-import-template-frame").contents().find(".perc-import-error").show();return}j("#perc-import-template-frame").contents().find("#perc-import-template-form").attr("action",ap);j("#perc-import-template-frame").contents().find("#perc-import-template-form").submit();j("#perc-import-template-frame").load(function(){ae()})}})},id:"perc-template-import"},Cancel:{click:function(){dialog.remove()},id:"perc-import-dialog-cancel"}},id:"perc-import-dialog",width:490})}function ae(){var am=j("#perc-import-template-frame").contents().find("body").text();if(am!="null"){dialog.remove();j.cookie("templateImport",am);location.reload()}else{dialog.remove();z(true)}}}})(jQuery,jQuery.Percussion);(function(b){b.perc_template_metadata_dialog=function(h){var y;var j;var f;var n;var k;y=b("<div id='perc_template_metadata_dialog'><div class='perc-metadata-setcion-wrapper'><div class = 'fieldGroup perc-first-section'><div class = 'perc-section-header'><div class = 'perc-section-label' groupname = 'perc-section-doctype-container'><span class = 'perc-min-max perc-items-minimizer'></span>DocType/HTML Tags</div></div><div id = 'perc-section-doctype-container'><textarea id='perc_template_metadata_custom_doctype' class='percCustomDoctype tempmeta perc-readOnlyText' readonly = 'readonly' rows='10' cols='200'></textarea> <br /><input style = 'width:auto' type='radio' name='doctype' value='html5' /> HTML5 (recommended)<br /><input style = 'width:auto' type='radio' name='doctype' value= 'xhtml' /> XHTML Transitional<br /><input style = 'width:auto' type='radio' name='doctype' value= 'custom' /> Custom<br /></div></div><div class = 'fieldGroup'><div class = 'perc-section-header'><div class = 'perc-section-label' groupname = 'perc-section-add-code-container'><span class = 'perc-min-max perc-items-maximizer'></span>Additional Code</div></div><div id = 'perc-section-add-code-container' style='display: none'><label for='perc_template_metadata_additional_head_content'>Additional head content:</label> <br/> <textarea id='perc_template_metadata_additional_head_content' class='tempmeta' rows='10' cols='200'></textarea> <br /><label for='perc_template_metadata_code_insert_after_body_start'>Code insert after body start:</label> <br/> <textarea id='perc_template_metadata_code_insert_after_body_start' class='tempmeta' rows='10' cols='200'></textarea> <br /><label for='perc_template_metadata_code_insert_before_body_close'>Code insert before body close:</label> <br/> <textarea id='perc_template_metadata_code_insert_before_body_close' class='tempmeta' rows='10' cols='200'></textarea> </div></div>"+x()+"</div></div>").perc_dialog({title:"Template Meta-data",modal:true,width:800,height:"auto",open:function(){q(h)},percButtons:{Save:{click:function(){return true},id:"perc_template_metadata-save-button"},Cancel:{click:function(){return true},id:"perc_template_metadata-cancel-button"}},id:"perc-template-metadata-dialog"});function q(A){b.PercSiteTemplatesController(false).loadTemplateMetadata(A,function(C){var G=C.HtmlMetadata.additionalHeadContent?C.HtmlMetadata.additionalHeadContent:"";var F=C.HtmlMetadata.beforeBodyCloseContent?C.HtmlMetadata.beforeBodyCloseContent:"";var E=C.HtmlMetadata.afterBodyStartContent?C.HtmlMetadata.afterBodyStartContent:"";var H=C.HtmlMetadata.protectedRegion?C.HtmlMetadata.protectedRegion:"";var D=C.HtmlMetadata.protectedRegionText?C.HtmlMetadata.protectedRegionText:"";var B=C.HtmlMetadata.docType.options;k=C.HtmlMetadata.docType.selected;for(i=0;i<B.length;i++){if(B[i].option=="xhtml"){f=B[i].value}else{if(B[i].option=="html5"){j=B[i].value}else{if(B[i].option=="custom"){n=B[i].value}}}}b("#perc_template_metadata_additional_head_content").val(G);b("#perc_template_metadata_code_insert_after_body_start").val(E);b("#perc_template_metadata_code_insert_before_body_close").val(F);b("#perc_template_metadata_protected_region").val(H);b("#perc_template_metadata_custom_doctype").val(j);if(D==""){D="Please sign in"}b("#perc_template_metadata_protected_region_text").val(D);b("input[value='"+k+"']").click()});z(A)}function e(B){var A={HtmlMetadata:{additionalHeadContent:b("#perc_template_metadata_additional_head_content").val(),afterBodyStartContent:b("#perc_template_metadata_code_insert_after_body_start").val(),beforeBodyCloseContent:b("#perc_template_metadata_code_insert_before_body_close").val(),id:B,protectedRegion:b("#perc_template_metadata_protected_region").val(),protectedRegionText:b("#perc_template_metadata_protected_region_text").val(),docType:{selected:b('input[name="doctype"]:checked').val(),options:[{option:"xhtml",value:"PERC_XHTML"},{option:"html5",value:"PERC_HTML5"},{option:"custom",value:b("#perc_template_metadata_custom_doctype").val()}]}}};b.PercSiteTemplatesController(false).saveTemplateMetadata(A,function(){});y.remove()}function z(A){b("#perc_template_metadata-save-button").click(function(){e(A)});b("#perc_template_metadata-cancel-button").click(function(){y.remove()})}function x(){var A="";A="<div class = 'fieldGroup perc-last-section'><div class = 'perc-section-header'><div class = 'perc-section-label' groupname = 'perc-section-protected-container'><span class = 'perc-min-max perc-items-maximizer'></span>Protected Regions</div></div><div id = 'perc-section-protected-container' style='display: none'><label for='perc_template_metadata_protected_region'>Protected region name:</label><br/><input id='perc_template_metadata_protected_region' name='perc_template_metadata_protected_region' maxlength='200' type=''/><br/><label for='perc_template_metadata_protected_region_text'>Protected region default text:</label><br/><input id='perc_template_metadata_protected_region_text' name='perc_template_metadata_protected_region_text' maxlength='200' type='text' /></div></div>";return A}y.find(".perc-section-label").unbind().click(function(){var A=b(this);A.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");y.find("#"+A.attr("groupName")).toggle()});y.find("input[name='doctype']").click(function(){var A=b("#perc_template_metadata_custom_doctype");if(b(this).attr("value")=="html5"){A.val(j).attr("readonly","readonly").addClass("perc-readOnlyText")}else{if(b(this).attr("value")=="xhtml"){A.val(f).attr("readonly","readonly").addClass("perc-readOnlyText")}else{if(b(this).attr("value")=="custom"){A.removeAttr("readonly").removeClass("perc-readOnlyText");if(n!=""&&n!=null){A.val(n)}}}}})}})(jQuery);(function(e,b){b.contentView=function(E,q){var x=[];var J={name:"delete",img:function(N){var M="/cm/images/icons/editor/delete";var L=q.getAssetDropCriteria()[N.attr("widgetid")];var O=L&&L.locked?N.attr("assetid"):"";if(!O){M="/cm/images/icons/editor/deleteInactive"}return M},tooltip:function(M){var P=M.attr("widgetid");var L=q.getAssetDropCriteria()[P];var O=L&&L.locked?M.attr("assetid"):"";var N="";if(O){N="Delete local content"}if(O&&L.assetShared){N="Remove shared asset from widget. This will not delete the asset from the system."}return N},callback:function(N){var R=N.attr("widgetid");var M=q.getAssetDropCriteria()[R];var Q="Are you sure you want to delete this local content?";var P="Delete Local Content";if(typeof(M)!="undefined"&&M.assetShared){Q="Are your sure you want to remove the shared asset from the widget?\nThis will not delete the asset from the system.";P="Remove Shared Asset"}var L={title:P,question:Q,type:"YES_NO",cancel:function(){},success:function(){q.clearAsset(N.attr("widgetid"),N.attr("widgetdefid"),N.attr("assetid"),K)}};var O=M&&M.locked?N.attr("assetid"):"";if(O){e.perc_utils.confirm_dialog(L)}}};var H={name:"edit",img:function(N){var P=N.attr("widgetid");var L=q.getAssetDropCriteria()[P];var M="/cm/images/icons/editor/edit";if(typeof(L)!="undefined"&&L.assetShared){M="/cm/images/icons/editor/editAsset"}if(q.getWidgetContentTypes(P)==""){M="/cm/images/icons/editor/editInactive"}else{if(q.isTemplate()||q.isLandingPage()){var O=N.attr("widgetdefid");if((q.isTemplate()&&q.getWidgetPrefs(O).attr("is_editable_on_template")=="false")||(q.isPage()&&q.isLandingPage()&&O=="percTitle")){M="/cm/images/icons/editor/editInactive"}}}if(q.isTemplate()&&L&&!L.locked&&N.attr("assetid")&&q.getWidgetPrefs(O).attr("is_editable_on_template")!="false"){M+="Middle"}return M},tooltip:function(M){var O=M.attr("widgetid");var L=q.getAssetDropCriteria()[O];var N="Edit local content";if(typeof(L)!="undefined"&&L.assetShared){N="Edit shared asset"}return N},callback:function(N){if(q.getWidgetContentTypes(N.attr("widgetid"))!=""){var P=N.attr("widgetdefid");if((q.isTemplate()&&q.getWidgetPrefs(P).attr("is_editable_on_template")=="false")||(q.isPage()&&q.isLandingPage()&&P=="percTitle")){return}var M=q.getAssetDropCriteria()[N.attr("widgetid")];var O=M&&M.locked?N.attr("assetid"):"";var L=M&&M.assetShared;var Q={widgetid:N.attr("widgetid"),widgetdefid:N.attr("widgetdefid"),widgetName:N.attr("widgetName")};q.configureAsset(Q,O,L,K)}}};var n=null;if(q.isTemplate()){n={name:"promote",img:function(N){var M=null;var L=q.getAssetDropCriteria()[N.attr("widgetid")];var O=L&&!L.locked?N.attr("assetid"):"";var P=N.attr("widgetdefid");if(O&&q.getWidgetPrefs(P).attr("is_editable_on_template")!="false"){M="/cm/images/icons/editor/promote"}return M},tooltip:function(M){var N="";var L=q.getAssetDropCriteria()[M.attr("widgetid")];var O=L&&!L.locked?M.attr("assetid"):"";if(O){N="Promote content to template"}return N},callback:function(M){var L=q.getAssetDropCriteria()[M.attr("widgetid")];var N=L&&!L.locked?M.attr("assetid"):"";if((L&&!L.existingAsset)&&M.attr("assetid")){L=q.getPageAssetDropCriteria()[M.attr("widgetid")]}if(N){var O={widgetid:M.attr("widgetid"),widgetdefid:M.attr("widgetdefid"),widgetName:M.attr("widgetName")};q.promoteAsset(N,O,L.assetShared,K)}}}}x.push(J);x.push(H);if(n){x.push(n)}var F=b.decorationController(I,"perc-widget-puff","perc-widget-selected",x);e("#show-hide-decorations").unbind().click(function(){F.visible(!F.visible())});var y=e("#frame");var z;var j;var C;B();K();e.perc_finder().addActionListener(function(N,M){if(N==e.perc_finder().ACTIONS.DELETE&&(M.type=="asset"||M.type=="page")){if(typeof(M.isOpen)!="undefined"&&M.isOpen){return}var O=e.PercNavigationManager.getView();if(O==e.PercNavigationManager.VIEW_DESIGN){var L=e("#tabs").tabs("option","selected");if(L==1){K()}}else{if(O==e.PercNavigationManager.VIEW_EDITOR){var L=e("#perc-pageEditor-tabs").tabs("option","selected");if(L==0){K()}}}}});function I(){var L=q.getSpecialWidgets("Content");if(L){E.contents().find(".perc-widget").each(function(){var M=e(this).attr("widgetid");if(M in L.LockedWidgets){e(this).addClass("perc-locked")}if(M in L.TransperantWidgets){e(this).addClass("perc-widget-transperant")}})}return E.contents().find(".perc-widget")}function B(){I().each(function(){h(e(this))})}var f=0;function h(O){var M=O.attr("widgetid");var N=q.getWidgetContentTypes(M);function L(R){var Q=R.data("spec")&&R.data("spec").type;if(Q==undefined||Q==""){Q=R.data("percRowData")&&R.data("percRowData").type}var P=Q&&N&&(Q==N||e.grep(N,function(S){return S==Q}).length);return P}O.droppable({scope:e.perc_iframe_scope,tolerance:"pointer",over:function(P,Q){var R=e(this).parent().parent().attr("id");f++;if(L(Q.draggable)){document.body.style.cursor="default";if(R==z||f==1){C.each(function(){e(this).css("background-color","")});e(this).css("background-color","#CAF589")}}else{document.body.style.cursor="not-allowed"}},out:function(P,Q){f--;document.body.style.cursor="default";e(this).css("background-color","")},drop:function(U,R){f--;document.body.style.cursor="default";e(this).css("background-color","");if(!L(R.draggable)){return false}if(O.hasClass("perc-locked")){return false}var T="";var Q="";var W=R.draggable.data("spec");if(typeof(W)=="undefined"){W=R.draggable.data("percRowData")}if(typeof(W)!="undefined"){T=(typeof(W.id)!="undefined")?W.id:R.draggable.data("percRowData").id;Q=(typeof(W.relationshipId)!="undefined")?W.relationshipId:""}if(T){var P=q.getAssetDropCriteria()[O.attr("widgetid")];var V=P&&P.locked?O.attr("assetid"):"";var S={widgetid:M,widgetdefid:O.attr("widgetdefid"),widgetName:O.attr("widgetName"),relationshipId:P.relationshipId};var X={title:"Content replace warning",question:"The asset you are dropping will replace the current content of the widget.<br/>Do you want to continue?",type:"YES_NO",cancel:function(){},success:function(){if(Q==""){q.setAssetRelationship(S,T,true,K)}else{q.updateAssetRelationship(S,T,Q,function(){D(R.draggable);K()},function(Y,Z){A(Z,R.draggable)})}}};if(V){e.perc_utils.confirm_dialog(X)}else{if(Q==""){q.setAssetRelationship(S,T,true,K)}else{q.updateAssetRelationship(S,T,Q,function(){D(R.draggable);K()},function(Y,Z){A(Z,R.draggable)})}}}}})}function A(N,L){var M={title:"Warning",content:N,okCallBack:function(){D(L)}};e.perc_utils.alert_dialog(M)}function D(M){M.remove();var L=e(".perc-orphan-assets-list");if(L.find(".perc-orphan-asset").size()==0){e.fn.percOrphanAssetsMaximizer(b);e("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();e("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function K(){q.renderAll(E,function(){G();e("#frame").attr("perc-view-type","content");var M=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(M!=null){M.handleComponentProgress("perc-ui-component-editor-frame","complete")}var L=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(L!=null){L.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function k(){e.perc_utils.handleLinks(E);e.perc_utils.handleObjects(E)}function G(){F.refresh();B();k();E.contents().find("body").css("z-index","-1000").css("position","static").unbind().click(function(){F.unselectAll()});f=0;y=e("#frame");j=y.contents().find(".perc-region");C=y.contents().find(".perc-widget");j.mouseover(function(L){z=e(this).attr("id");L.stopPropagation()})}e(document).ready(function(){e("#perc-content-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var M=I18N.message("perc.ui.menu@JavaScript Off");var L=I18N.message("perc.ui.menu@JavaScript On");if(e(this).text()==M){e(this).text(L);e(this).attr("title","Turns on JavaScript");q.setJavaScriptOff(true);K()}else{e(this).text(M);e(this).attr("title","Turns off JavaScript");q.setJavaScriptOff(false);K()}})})}})(jQuery,jQuery.Percussion);function countProperties(e){var b=0;for(var f in e){if(e.hasOwnProperty(f)){++b}}return b}(function($,P){P.widgetPropertiesDialog=function(setWidgetProperty,widgetProperties,widgetDefinitionId,postCallback,propertyType,getWidgetByName){$.perc_widget_definition_client.restGetWidgetDefinition(widgetDefinitionId,propertyType,function(widgetDef){if(widgetProperties){if(typeof(widgetProperties.sys_perc_name)!="undefined"&&typeof(widgetProperties.sys_perc_description)!="undefined"){widgetDef.userPrefDef.sys_perc_name=(new $.perc_sys_pref("perc_sys_name","","Name","sys_perc_name"));widgetDef.userPrefDef.sys_perc_description=(new $.perc_sys_pref("perc_sys_description","","Description","sys_perc_description"))}widgetDef.setValuesFromWidgetProperties(widgetProperties)}var dialogOptions={modal:true,width:500,title:"Configure Widget Properties",zIndex:100000,percButtons:{Ok:{click:saveProperties,id:"perc-widget-properties-ok"},Cancel:{click:function(){$(this).remove()},id:"perc-widget-properties-cancel"}},id:"perc_edit_widget_properties"};var dialog=$("#perc_edit_widget_properties");var numOfFields=countProperties(widgetDef.userPrefDef);var dlgHeight="auto";if(numOfFields>10){dlgHeight="700"}if($("#perc_edit_widget_properties > #perc-section-system-container").size()==0){dialogOptions.height=dlgHeight}$("<div/>").append(widgetDef.render()).perc_dialog(dialogOptions);_addFieldGroups()});function saveProperties(){var widget=$(this).find("[name=sys_perc_name]");var widgetName=$.trim(widget.val()).toUpperCase();var originalName=$.trim(widget.attr("originalValue")).toUpperCase();if(typeof(widgetName)!="undefined"&&widgetName!=""&&widgetName!=originalName&&getWidgetByName(widgetName)!=null){$.perc_utils.alert_dialog({title:"Error",content:"Widget name '"+widgetName+"' is already in use. Please use another name."});return}$(this).find("input").each(function(){var value=$.trim($(this).val());if($(this).attr("type")=="checkbox"){value=$(this).is(":checked")?"true":"false"}setWidgetProperty($(this).attr("name"),value)});$(this).find("select").each(function(){setWidgetProperty($(this).attr("name"),$(this).val())});$(this).find("textarea").each(function(){setWidgetProperty($(this).attr("name"),$(this).val())});postCallback();$(this).remove()}function _addFieldGroups(){var dialog=$("#perc_edit_widget_properties");if(dialog.find("#perc-section-system-container").size()>0){dialog.find(".ui-dialog-content.ui-widget-content").addClass("group-style")}var fieldGroups=[{groupName:"perc-section-system-container",groupLabel:"Widget Summary"},{groupName:"perc-section-properties-container",groupLabel:"Properties"}];$.each(fieldGroups,function(index){var minmaxClass=(index==0)?"perc-items-minimizer":"perc-items-maximizer";var groupHtml="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span  class='perc-min-max "+minmaxClass+"' ></span>"+this.groupLabel+"</div></div>";dialog.find("#"+this.groupName).before(groupHtml);index!=0&&dialog.find("#"+this.groupName).hide()});dialog.find(".perc-section-label").unbind().click(function(){var self=$(this);self.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");dialog.find("#"+self.attr("groupName")).toggle()})}};$.perc_widget_definition_model=function(){this.widgetDefinitionXml=null;this.userPrefDef=null;this.setValuesFromWidgetProperties=function(widgetProperties){for(p in this.userPrefDef){var propertyName=this.userPrefDef[p].name;this.userPrefDef[p].realValue=widgetProperties[propertyName]}};this.getUserPrefDef=function(){return this.userPrefDef};this.init=function(xml,propertyType){var self=this;this.widgetDefinitionXml=xml;var $widgetDefinitionXml=$(this.widgetDefinitionXml);var $userPreferences=$widgetDefinitionXml.find(propertyType);this.userPrefDef=new Object();if($userPreferences.length==0){return}$userPreferences.each(function(){var datatype=$(this).attr("datatype");var default_value=$(this).attr("default_value");var display_name=$(this).attr("display_name");var name=$(this).attr("name");var enumValues=null;if(datatype==""||datatype==null){datatype="string"}else{if(datatype=="enum"){enumValues=new Object();$(this).find("EnumValue").each(function(){var display_value=$(this).attr("display_value");var value=$(this).attr("value");enumValues[value]=display_value})}}self.userPrefDef[name]=(new $.perc_user_pref(datatype,default_value,display_name,name,enumValues))})};this.render=function(){var html=$("<div/>");var systemContainer=$("<div id='perc-section-system-container' />");var propertiesContainer=$("<div id='perc-section-properties-container' />");var sysProperties="";var properties="";for(u in this.userPrefDef){if((this.userPrefDef[u].name=="sys_perc_name"||this.userPrefDef[u].name=="sys_perc_description")&&(this.userPrefDef[u].datatype=="perc_sys_name"||this.userPrefDef[u].datatype=="perc_sys_description")){sysProperties+="\t"+this.userPrefDef[u].render()}else{properties+="\t"+this.userPrefDef[u].render()}}if(sysProperties!=""&&properties!=""){systemContainer.append($(sysProperties));html.append($("<div class='fieldGroup' />").append(systemContainer));propertiesContainer.append($(properties));html.append($("<div class='fieldGroup' />").append(propertiesContainer))}else{if(properties==""){html.append($(sysProperties))}else{html.append($(properties))}}$.perc_filterField(html.find("[name=sys_perc_name]"),$.perc_textFilters.ID_WITH_SPACE);$.perc_filterField(html.find("[name=sys_perc_description]"),$.perc_textFilters.DESCRIPTION);return html}};$.perc_widget_definition_client=new function(){this.restGetWidgetDefinition=function(widgetDefinitionId,propertyType,callback){$.ajax({url:$.perc_paths.WIDGET_FULL+"/"+widgetDefinitionId,dataType:"xml",type:"GET",success:function(xml,textstatus){var model=new $.perc_widget_definition_model(xml);model.init(xml,propertyType);callback(model)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+widgetDefinitionId)}})};this.restGetWidgetPrefs=function(widgetDefinitionId,callback){$.ajax({url:$.perc_paths.WIDGET_FULL+"/"+widgetDefinitionId,dataType:"xml",type:"GET",success:function(xml,textstatus){var $widgetDefinitionXml=$(xml);var $widgetPrefs=$widgetDefinitionXml.find("WidgetPrefs");callback($widgetPrefs)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+widgetDefinitionId)}})}};$.perc_sys_pref=function(datatype,default_value,display_name,name){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.realValue=null;this.render=function(){var buff="";if(datatype=="perc_sys_name"){var value=(typeof(this.realValue)!="undefined")?this.realValue:this.default_value;buff="<tr>\n";buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'" originalValue="'+value+'" maxlength="30"></td>\n</tr>\n';buff+="</tr>\n";return buff}if(datatype=="perc_sys_description"){var value=(typeof(this.realValue)!="undefined")?this.realValue:this.default_value;buff="<tr>\n";buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><textarea style="resize: none; border: 1px inset #F0F0F0; padding: 2px; height: 40px" class="perc-widget-property" name="'+this.name+'" type="text" maxlength="100">'+value+"</textarea></td>\n</tr>\n";buff+="</tr>\n";return buff}return buff}};$.perc_user_pref=function(datatype,default_value,display_name,name,enumValues){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.enumValues=enumValues;this.realValue=null;this.render=function(){var buff="<tr>\n";var datatype=this.datatype;var value=undefined;if(typeof(this.realValue)!=="boolean"){if(this.realValue===undefined){value=this.default_value}else{value=(this.realValue==="0")?this.default_value:this.realValue}}else{if(this.realValue===undefined){value=this.default_value}else{value=this.realValue}}if(value===undefined){value=""}if(datatype=="string"||datatype=="number"){buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'"></td>\n</tr>\n'}else{if(datatype=="bool"){var checked=(value==true||value=="true"||value=="on")?"CHECKED":"";buff+='   <td class = "checkbox-size"><input class="perc-widget-property" name="'+this.name+'" type="checkbox" '+checked+'> <label for="'+this.name+'">'+this.display_name+"</label></td>\n</tr>\n"}else{if(datatype=="enum"){buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+="   <td>\n";buff+='   <select class="perc-widget-property" name="'+this.name+'" value="'+value+'">\n';for(v in enumValues){var selected=(v==value)?"SELECTED":"";buff+='       <option value="'+v+'" '+selected+"> "+enumValues[v]+"   </option>\n"}buff+="   </select>\n";buff+="</td>\n</tr>\n"}else{if(datatype=="list"){var values=eval(value);buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><textarea class="perc-widget-property" name="'+this.name+'">\n';for(v in values){buff+=values[v]+"\n"}buff+="</textarea>\n"}}}}buff+="</tr>\n";return buff}}})(jQuery,jQuery.Percussion);(function(e){e.PercSiteImpactView={renderSiteImpact:b,ITEM_TYPE_ASSET:"asset",ITEM_TYPE_PAGE:"page"};function b(n,j,f){var k;var h=f;e.PercSiteImpactService.getSiteImpactDetails(n,z);function z(B,A){var C=this;if(B==e.PercServiceUtils.STATUS_ERROR){var D=e.PercServiceUtils.extractDefaultErrorMessage(A.request);e.perc_utils.alert_dialog({title:"Error",content:D});return}y(A.data);e("#perc-site-impact-pages-wrapper .perc-site-impact-item").click(function(){var E=e(this).attr("id");e.perc_finder().launchPagePreview(E)})}function y(H){var A="";var D=[];var F=[];e.each(H.pages,function(){var I=this.name;var J=this.status;var L=this.path.replace("/Sites/","");var N=L.substring(0,L.indexOf("/"));var M={rowContent:[[{content:I,title:this.path}],N,J],rowData:{pagePath:this.path,pageId:this.id,templateName:this.type,pageName:this.name}};var K={title:"",menuItemsAlign:"left",stayInsideOf:".perc-datatable",items:[{label:"Open in Finder",callback:x},{label:"Preview Page",callback:q}]};D.push(M);F.push(K)});var C={percColumnWidths:["260","150","75"],percVisibleColumns:null,percData:D,percRowDblclickCallback:function(){},percRowClickCallback:function(){},fnDrawCallback:function(I){f.find("table").removeAttr("style")},bPaginate:false,percHeaders:["Page Name","Site","Status"],aoColumns:[{sType:"string"},{sType:"string"},{sType:"string"}],percMenus:F};f.find(".perc-site-impact-pages").PercActionDataTable(C);var E="";var B=[];e.each(H.templates,function(){var I=this.template.name;var K=this.site;var J={rowContent:[I,K]};B.push(J)});var G={percColumnWidths:["*","300"],percVisibleColumns:null,bPaginate:false,fnDrawCallback:function(I){f.find("table").removeAttr("style")},percData:B,percHeaders:["Template Name","Site"],aoColumns:[{sType:"string"},{sType:"string"}],oLanguage:{sZeroRecords:"No Templates Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};f.find(".perc-site-impact-templates").PercDataTable(G)}function x(A){var B=A.data;e.PercPathService.validatePath(B.pagePath,function(D,C){if(D==e.PercServiceUtils.STATUS_SUCCESS){e.perc_finder().open(C.split("/"),function(){})}})}function q(A){var B=A.data;if(B){var C=window.parent.jQuery;C.perc_finder().launchPagePreviewByPath(B.pagePath,B.pageId)}else{alert("Unable to load the preview of page")}}}})(jQuery);(function(f){var h=100;var b='<div style="width:304px;"><div style="margin-left:7px; margin-right:7px; height:20px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{name}}</div><div style="text-align:center; width:auto; margin-left:7px; margin-right:7px; vertical-align: middle;"><div style="width:290px; height:207px; border:1px solid #BBBBBB; background: url({{url}}) no-repeat center;"></div></div><div style="word-wrap:break-word; white-space:normal; margin-left:7px; margin-right:7px;">{{path}}</div></div>';function e(j,k,n){for(i=0;i<k.length;i++){key=k[i];re=new RegExp("{{"+key+"}}","gi");j=j.replace(re,n[key])}return j}f.fn.PercImageTooltip=function(j){var n;if(j!=null&&f.isFunction(j.clickCallback)){n=j.clickCallback}else{n=function(){}}var k=f(this).hover(function(q){f.PercImageTooltip.showTooltip(q,n)},function(){})};f.PercImageTooltip={tooltipDom:f("<div/>").addClass("perc-tooltip").addClass("perc-tooltip-arrow-down").append(f("<div/>").addClass("perc-tooltip-content").append("Title Goes Here")).css("position","absolute").css("top","-10000px").css("left","-10000px").css("z-index","10000").hover(function(j){f.PercImageTooltip.enterTooltip(j)},function(j){f.PercImageTooltip.exitTooltip(j)}).click(function(j){j.stopPropagation()}),hiderDom:f("<div class='perc-tooltip-hider'/>").css("position","absolute").css("top","-10000px").css("left","-10000px").css("z-index","9000").hover(function(j){f.PercImageTooltip.enterHider(j)},function(j){f.PercImageTooltip.exitHider(j)}),hiderHoverState:0,tooltipHoverState:0,showTooltip:function(J,k){var D=["name","path","url"];var I=k;var z=this;checkImageAvailable=function(O,Q){var R=Q.path.replace("/Sites/","").replace(/^\//,"");var P=e(b,D,{url:O,path:R,name:Q.name});var N={async:true,type:"HEAD",url:O,success:function(T,S){f.PercImageTooltip.tooltipDom.find(".perc-tooltip-content").html(P)},error:function(U,S,T){if(f(".perc-tooltip").position().top!=-10000){setTimeout(function(){checkImageAvailable(O,Q)},500)}}};f.ajax(N)};var q=f(J.currentTarget);var G=q.offset();var K=G.left;var L=G.top;var A=q.width();var C=q.height();var M=f.parseJSON(q.attr("data"));if(M==""){return}var n="/Rhythmyx/rx_resources/images/TemplateImages/"+f.PercNavigationManager.getSiteName()+"/"+M.id+"-page.jpg?nocache="+Math.random();var F=M.path.replace("/Sites/","").replace(/^\//,"");var B=e(b,D,{url:"/Rhythmyx/sys_resources/images/running.gif",path:F,name:M.name});f.PercImageTooltip.tooltipDom.find(".perc-tooltip-content").html(B).css("display","block");var y=f.PercImageTooltip.tooltipDom.width();var E=f.PercImageTooltip.tooltipDom.height();var H=J.pageX;var j=H+20;if(j<0){j=0}var x=(L-E+h);f.PercImageTooltip.tooltipDom.css("top",x).css("left",j).css("display","block");f.PercImageTooltip.hiderDom.css("width",y+5).css("height",C).css("top",L).css("left",K).css({background:"blue",opacity:0}).css("cursor",q.css("cursor")).unbind("click").click(function(N){if(f.isFunction(I)){I(q,M.id)}if(q.data("events")&&q.data("events")["click"]&&q.data("events")["click"][0]&&q.data("events")["click"][0].data&&q.data("events")["click"][0].handler){var O={data:q.data("events")["click"][0].data};q.data("events")["click"][0].handler(O)}});checkImageAvailable(n,M)},exitHider:function(k){this.hiderHoverState=0;var j=this;setTimeout(function(){j.hideTooltip(k)},500)},enterHider:function(k){this.hiderHoverState=1;var j=this;setTimeout(function(){j.hideTooltip(k)},500)},exitTooltip:function(k){this.tooltipHoverState=0;var j=this;setTimeout(function(){j.hideTooltip(k)},500)},enterTooltip:function(k){this.tooltipHoverState=1;var j=this;setTimeout(function(){j.hideTooltip(k)},500)},hideTooltip:function(j){if(this.tooltipHoverState==0&&this.hiderHoverState==0){this.tooltipDom.blur().css("top",-10000).css("left",-10000).find(".perc-tooltip-content").html("");this.hiderDom.css("top",-10000).css("left",-10000)}}};f(document).ready(function(){f("body").append(f.PercImageTooltip.tooltipDom);f("body").append(f.PercImageTooltip.hiderDom)})})(jQuery);(function(b){b.PercContentPreSubmitHandlers={_handlers:[],addHandler:function(e){if(typeof(e)!="function"){alert("handler must be a function");return}if(b.inArray(e,this._handlers)==-1){this._handlers.push(e)}},removeHandler:function(h){if(typeof(h)!="function"){alert("handler must be a function");return}if(b.inArray(h,this._handlers)>-1){var e=this._handlers.length;for(var f=0;f<e;f++){if(this._handlers[f]===h){this._handlers.splice(f,1);return}}}},getHandlers:function(){return this._handlers},clearHandlers:function(){this._handlers=[]}}})(jQuery);(function(e){e.PercSiteSummaryService={getSiteSummaryData:b};function b(j,n){var h=e.perc_paths.SITE_STATS_SUMMARY+"/"+j;var k=function(y,A){if(y==e.PercServiceUtils.STATUS_ERROR){n(e.PercServiceUtils.STATUS_ERROR,A)}else{var x=A.data.SiteSummaryData;var z=x.statistics;var B={Pages:z.pages,Templates:z.templates,Files:z.binary,"Style Sheets":z.css,"Internal Links":z.linksInternal};var q={id:x.siteId,statistics:B,issues:x.issues,abridged_log_message:x.abridgedErrorMessage};n(e.PercServiceUtils.STATUS_SUCCESS,q)}};e.PercServiceUtils.makeJsonRequest(h,e.PercServiceUtils.TYPE_GET,true,k);function f(q){return Math.floor(Math.random()*q)}}})(jQuery);(function(n){var f,j,e,C;f=null;j=["missing-page","missing-asset","missing-css"];e=700;C=16;n.PercSiteSummaryDialog={open:E};function z(){return n.PercNavigationManager.getSiteName()}function x(G){return I18N.message(G,G)}function F(H){var G=n("[templates] .perc-site-summary-"+H).clone();if(G.length===0){G=n("[templates] .perc-site-summary-missing-unknown").clone();G.html(x(H))}return G}function k(I){var H,G,K=n("<div></div>"),J=0;for(H in I){G=n('<table class="perc-stat"></table>').appendTo(K);G=n("<tr></tr>").appendTo(G);n('<td class="perc-stat-label"></td>').html(x(H)).appendTo(G);n('<td class="perc-stat-value"></td>').html(I[H]).appendTo(G);J=J+1}if(J>C){K.addClass("perc-3column")}return K}function q(I){var K,J,L,H,M=n("<div>"),G={};for(K=0;K<I.length;K++){L=I[K];H=G[L.type]||(G[L.type]=n("<div>"));H=n("<dl>").appendTo(H);n("<dt>").append(n("<small>").html("Referenced by: "+L.refUri)).appendTo(H);n("<dd>").text(L.suggestion).appendTo(H)}for(K=0;K<j.length;K++){H=G[j[K]];if(H&&H.length){F(j[K]).appendTo(M);H.appendTo(M);delete G[j[K]]}}for(J in G){H=G[J];if(H&&H.length){F(J).appendTo(M);H.appendTo(M)}}return M}function h(H){var G=n("<div>");if(H){G.text(H)}return G}function y(H,G){var I;I=f.find(".perc-site-summary-statistics .ui-widget-content").empty();k(G.statistics).appendTo(I);if(G.abridged_log_message){I=f.find(".perc-site-summary-warnings .perc-log-top").empty().addClass("perc-log-header");h(G.abridged_log_message).appendTo(I)}else{f.find(".perc-site-summary-warnings .perc-log-top").empty().removeClass("perc-log-header")}I=f.find(".perc-site-summary-warnings .perc-log").empty();q(G.issues).appendTo(I);if(G.abridged_log_message){I=f.find(".perc-site-summary-warnings .perc-log-footer").empty();h(G.abridged_log_message).appendTo(I)}}function E(H,G){if(!z()){n.perc_utils.alert_dialog({title:"Error",content:"Please select a site to view the summary."});return}if(H===n.PercServiceUtils.STATUS_ERROR){var J=n.PercServiceUtils.extractDefaultErrorMessage(G.request);n.perc_utils.alert_dialog({title:"Error",content:J});return}var I=n("[templates] .perc-site-summary-dialog-title").html();f=n("[templates] .perc-site-summary").clone();f.perc_dialog({id:"perc-site-summary-dialog",title:I,modal:true,width:e,height:578,resizable:false,closeOnEscape:true,percButtons:{Close:{click:function(){n(this).dialog("close")},id:"perc-site-summary-dialog-close"}},close:function(K,L){n(this).dialog("destroy").remove()},open:function(K,L){y(H,G)}})}function B(G){G.preventDefault();n.PercSiteSummaryService.getSiteSummaryData(z(),E)}function b(G){G.preventDefault();n.PercSiteSummaryService.getSiteSummaryData(z(),y)}function A(G){G.preventDefault();f.printThis()}function D(H){var J=n(this),I=J.parents(".perc-section:first"),G;G=I.find(".ui-widget-content");G.toggleClass("perc-hide");if(G.hasClass("perc-hide")){J.removeClass("perc-section-open").addClass("perc-section-closed")}else{J.removeClass("perc-section-closed").addClass("perc-section-open")}}n(function(){n("body").on("click",".perc-site-summary h2 a",D);n("body").on("click",".perc-action-print",A);n("body").on("click",".perc-action-refresh",b);n("body").on("click",".perc-site-summary-action.perc-open-dialog",B)})})(jQuery);
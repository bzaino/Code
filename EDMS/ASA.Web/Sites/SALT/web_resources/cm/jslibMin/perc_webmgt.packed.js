/* jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Form Plugin
 * version: 2.60
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(e){e.fn.ajaxSubmit=function(H){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof H=="function"){H={success:H}}var y=this.attr("action");var h=(typeof y==="string")?e.trim(y):"";if(h){h=(h.match(/^([^#]+)/)||[])[1]}h=h||window.location.href||"";H=e.extend(true,{url:h,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},H);var I={};this.trigger("form-pre-serialize",[this,H,I]);if(I.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(H.beforeSerialize&&H.beforeSerialize(this,H)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var t,E,C=this.formToArray(H.semantic);if(H.data){H.extraData=H.data;for(t in H.data){if(H.data[t] instanceof Array){for(var z in H.data[t]){C.push({name:t,value:H.data[t][z]})}}else{E=H.data[t];E=e.isFunction(E)?E():E;C.push({name:t,value:E})}}}if(H.beforeSubmit&&H.beforeSubmit(C,this,H)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[C,this,H,I]);if(I.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var f=e.param(C);if(H.type.toUpperCase()=="GET"){H.url+=(H.url.indexOf("?")>=0?"&":"?")+f;H.data=null}else{H.data=f}var G=this,B=[];if(H.resetForm){B.push(function(){G.resetForm()})}if(H.clearForm){B.push(function(){G.clearForm()})}if(!H.dataType&&H.target){var F=H.success||function(){};B.push(function(n){var k=H.replaceTarget?"replaceWith":"html";e(H.target)[k](n).each(F,arguments)})}else{if(H.success){B.push(H.success)}}H.success=function(K,n,L){var J=H.context||H;for(var q=0,k=B.length;q<k;q++){B[q].apply(J,[K,n,L||G,G])}};var x=e("input:file",this).length>0;var j="multipart/form-data";var A=(G.attr("enctype")==j||G.attr("encoding")==j);if(H.iframe!==false&&(x||H.iframe||A)){if(H.closeKeepAlive){e.get(H.closeKeepAlive,D)}else{D()}}else{e.ajax(H)}this.trigger("form-submit-notify",[this,H]);return this;function D(){var q=G[0];if(e(":input[name=submit],:input[id=submit]",q).length){alert('Error: Form elements must not have name or id of "submit".');return}var O=e.extend(true,{},e.ajaxSettings,H);O.context=O.context||O;var R="jqFormIO"+(new Date().getTime()),M="_"+R;var J=e('<iframe id="'+R+'" name="'+R+'" src="'+O.iframeSrc+'" />');var N=J[0];J.css({position:"absolute",top:"-1000px",left:"-1000px"});var K={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;J.attr("src",O.iframeSrc)}};var W=O.global;if(W&&!e.active++){e.event.trigger("ajaxStart")}if(W){e.event.trigger("ajaxSend",[K,O])}if(O.beforeSend&&O.beforeSend.call(O.context,K,O)===false){if(O.global){e.active--}return}if(K.aborted){return}var S=false;var V=0;var L=q.clk;if(L){var T=L.name;if(T&&!L.disabled){O.extraData=O.extraData||{};O.extraData[T]=L.value;if(L.type=="image"){O.extraData[T+".x"]=q.clk_x;O.extraData[T+".y"]=q.clk_y}}}function U(){var ac=G.attr("target"),aa=G.attr("action");q.setAttribute("target",R);if(q.getAttribute("method")!="POST"){q.setAttribute("method","POST")}if(q.getAttribute("action")!=O.url){q.setAttribute("action",O.url)}if(!O.skipEncodingOverride){G.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(O.timeout){setTimeout(function(){V=true;Q()},O.timeout)}var ab=[];try{if(O.extraData){for(var ad in O.extraData){ab.push(e('<input type="hidden" name="'+ad+'" value="'+O.extraData[ad]+'" />').appendTo(q)[0])}}J.appendTo("body");N.attachEvent?N.attachEvent("onload",Q):N.addEventListener("load",Q,false);q.submit()}finally{q.setAttribute("action",aa);if(ac){q.setAttribute("target",ac)}else{G.removeAttr("target")}e(ab).remove()}}if(O.forceSync){U()}else{setTimeout(U,10)}var Y,Z,X=50;function Q(){Z=N.contentWindow?N.contentWindow.document:N.contentDocument?N.contentDocument:N.document;if(!Z||Z.location.href==O.iframeSrc){return}N.detachEvent?N.detachEvent("onload",Q):N.removeEventListener("load",Q,false);var ab=true;try{if(V){throw"timeout"}var af=O.dataType=="xml"||Z.XMLDocument||e.isXMLDoc(Z);b("isXml="+af);if(!af&&window.opera&&(Z.body==null||Z.body.innerHTML=="")){if(--X){b("requeing onLoad callback, DOM not available");setTimeout(Q,250);return}}S=true;K.responseText=Z.body?Z.body.innerHTML:Z.documentElement?Z.documentElement.innerHTML:null;K.responseXML=Z.XMLDocument?Z.XMLDocument:Z;K.getResponseHeader=function(ah){var ag={"content-type":O.dataType};return ag[ah]};var ae=/(json|script)/.test(O.dataType);if(ae||O.textarea){var aa=Z.getElementsByTagName("textarea")[0];if(aa){K.responseText=aa.value}else{if(ae){var ad=Z.getElementsByTagName("pre")[0];var n=Z.getElementsByTagName("body")[0];if(ad){K.responseText=ad.textContent}else{if(n){K.responseText=n.innerHTML}}}}}else{if(O.dataType=="xml"&&!K.responseXML&&K.responseText!=null){K.responseXML=P(K.responseText)}}Y=k(K,O.dataType,O)}catch(ac){b("error caught:",ac);ab=false;K.error=ac;O.error.call(O.context,K,"error",ac);W&&e.event.trigger("ajaxError",[K,O,ac])}if(K.aborted){b("upload aborted");ab=false}if(ab){O.success.call(O.context,Y,"success",K);W&&e.event.trigger("ajaxSuccess",[K,O])}W&&e.event.trigger("ajaxComplete",[K,O]);if(W&&!--e.active){e.event.trigger("ajaxStop")}O.complete&&O.complete.call(O.context,K,ab?"success":"error");setTimeout(function(){J.removeData("form-plugin-onload");J.remove();K.responseXML=null},100)}var P=e.parseXML||function(n,aa){if(window.ActiveXObject){aa=new ActiveXObject("Microsoft.XMLDOM");aa.async="false";aa.loadXML(n)}else{aa=(new DOMParser()).parseFromString(n,"text/xml")}return(aa&&aa.documentElement&&aa.documentElement.nodeName!="parsererror")?aa:null};var k=e.httpData||function(ae,ac,ab){var aa=ae.getResponseHeader("content-type")||"",n=ac==="xml"||!ac&&aa.indexOf("xml")>=0,ad=n?ae.responseXML:ae.responseText;if(n&&ad.documentElement.nodeName==="parsererror"){e.error("parsererror")}if(ab&&ab.dataFilter){ad=ab.dataFilter(ad,ac)}if(typeof ad==="string"){if(ac==="json"||!ac&&aa.indexOf("json")>=0){ad=e.parseJSON(ad)}else{if(ac==="script"||!ac&&aa.indexOf("javascript")>=0){e.globalEval(ad)}}}return ad}}};e.fn.ajaxForm=function(f){if(this.length===0){var h={s:this.selector,c:this.context};if(!e.isReady&&h.s){b("DOM not ready, queuing ajaxForm");e(function(){e(h.s,h.c).ajaxForm(f)});return this}b("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(j){if(!j.isDefaultPrevented()){j.preventDefault();e(this).ajaxSubmit(f)}}).bind("click.form-plugin",function(x){var q=x.target;var k=e(q);if(!(k.is(":submit,input:image"))){var j=k.closest(":submit");if(j.length==0){return}q=j[0]}var n=this;n.clk=q;if(q.type=="image"){if(x.offsetX!=undefined){n.clk_x=x.offsetX;n.clk_y=x.offsetY}else{if(typeof e.fn.offset=="function"){var y=k.offset();n.clk_x=x.pageX-y.left;n.clk_y=x.pageY-y.top}else{n.clk_x=x.pageX-q.offsetLeft;n.clk_y=x.pageY-q.offsetTop}}}setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(D){var C=[];if(this.length===0){return C}var h=this[0];var t=D?h.getElementsByTagName("*"):h.elements;if(!t){return C}var y,x,q,E,k,A,f;for(y=0,A=t.length;y<A;y++){k=t[y];q=k.name;if(!q){continue}if(D&&h.clk&&k.type=="image"){if(!k.disabled&&h.clk==k){C.push({name:q,value:e(k).val()});C.push({name:q+".x",value:h.clk_x},{name:q+".y",value:h.clk_y})}continue}E=e.fieldValue(k,true);if(E&&E.constructor==Array){for(x=0,f=E.length;x<f;x++){C.push({name:q,value:E[x]})}}else{if(E!==null&&typeof E!="undefined"){C.push({name:q,value:E})}}}if(!D&&h.clk){var z=e(h.clk),B=z[0];q=B.name;if(q&&!B.disabled&&B.type=="image"){C.push({name:q,value:z.val()});C.push({name:q+".x",value:h.clk_x},{name:q+".y",value:h.clk_y})}}return C};e.fn.formSerialize=function(f){return e.param(this.formToArray(f))};e.fn.fieldSerialize=function(h){var f=[];this.each(function(){var t=this.name;if(!t){return}var k=e.fieldValue(this,h);if(k&&k.constructor==Array){for(var q=0,j=k.length;q<j;q++){f.push({name:t,value:k[q]})}}else{if(k!==null&&typeof k!="undefined"){f.push({name:this.name,value:k})}}});return e.param(f)};e.fn.fieldValue=function(q){for(var n=[],j=0,f=this.length;j<f;j++){var k=this[j];var h=e.fieldValue(k,q);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}h.constructor==Array?e.merge(n,h):n.push(h)}return n};e.fieldValue=function(f,y){var j=f.name,D=f.type,E=f.tagName.toLowerCase();if(y===undefined){y=true}if(y&&(!j||f.disabled||D=="reset"||D=="button"||(D=="checkbox"||D=="radio")&&!f.checked||(D=="submit"||D=="image")&&f.form&&f.form.clk!=f||E=="select"&&f.selectedIndex==-1)){return null}if(E=="select"){var z=f.selectedIndex;if(z<0){return null}var B=[],h=f.options;var q=(D=="select-one");var A=(q?z+1:h.length);for(var k=(q?z:0);k<A;k++){var x=h[k];if(x.selected){var C=x.value;if(!C){C=(x.attributes&&x.attributes.value&&!(x.attributes.value.specified))?x.text:x.value}if(q){return C}B.push(C)}}return B}return e(f).val()};e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})};e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var h=this.type,f=this.tagName.toLowerCase();if(h=="text"||h=="password"||f=="textarea"){this.value=""}else{if(h=="checkbox"||h=="radio"){this.checked=false}else{if(f=="select"){this.selectedIndex=-1}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};e.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};e.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var j=e(this).parent("select");if(f&&j[0]&&j[0].type=="select-one"){j.find("option").selected(false)}this.selected=f}}})};function b(){if(e.fn.ajaxSubmit.debug){var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}}})(jQuery);
/*
 * jQuery blockUI plugin
 * Version 2.31 (06-JAN-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(t){if(/1\.(0|1|2)\.(0|1|2)/.test(t.fn.jquery)||/^1.1/.test(t.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+t.fn.jquery);return}t.fn._fadeIn=t.fn.fadeIn;var f=function(){};var x=document.documentMode||0;var j=t.browser.msie&&((t.browser.version<8&&!x)||x<8);var k=t.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!x;t.blockUI=function(D){h(window,D)};t.unblockUI=function(D){q(window,D)};t.growlUI=function(H,F,G,D){var E=t('<div class="growlUI"></div>');if(H){E.append("<h1>"+H+"</h1>")}if(F){E.append("<h2>"+F+"</h2>")}if(G==undefined){G=3000}t.blockUI({message:E,fadeIn:700,fadeOut:1000,centerY:false,timeout:G,showOverlay:false,onUnblock:D,css:t.blockUI.defaults.growlCSS})};t.fn.block=function(D){return this.unblock({fadeOut:0}).each(function(){if(t.css(this,"position")=="static"){this.style.position="relative"}if(t.browser.msie){this.style.zoom=1}h(this,D)})};t.fn.unblock=function(D){return this.each(function(){q(this,D)})};t.blockUI.version=2.31;t.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var e=null;var n=[];function h(F,Q){var L=(F==window);var I=Q&&Q.message!==undefined?Q.message:undefined;Q=t.extend({},t.blockUI.defaults,Q||{});Q.overlayCSS=t.extend({},t.blockUI.defaults.overlayCSS,Q.overlayCSS||{});var N=t.extend({},t.blockUI.defaults.css,Q.css||{});var Y=t.extend({},t.blockUI.defaults.themedCSS,Q.themedCSS||{});I=I===undefined?Q.message:I;if(L&&e){q(window,{fadeOut:0})}if(I&&typeof I!="string"&&(I.parentNode||I.jquery)){var T=I.jquery?I[0]:I;var aa={};t(F).data("blockUI.history",aa);aa.el=T;aa.parent=T.parentNode;aa.display=T.style.display;aa.position=T.style.position;if(aa.parent){aa.parent.removeChild(T)}}var M=Q.baseZ;var X=(t.browser.msie||Q.forceIframe)?t('<iframe class="blockUI" style="z-index:'+(M++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+Q.iframeSrc+'"></iframe>'):t('<div class="blockUI" style="display:none"></div>');var W=t('<div class="blockUI blockOverlay" style="z-index:'+(M++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var V;if(Q.theme&&L){var R='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+M+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(Q.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';V=t(R)}else{V=L?t('<div class="blockUI blockMsg blockPage" style="z-index:'+M+';display:none;position:fixed"></div>'):t('<div class="blockUI blockMsg blockElement" style="z-index:'+M+';display:none;position:absolute"></div>')}if(I){if(Q.theme){V.css(Y);V.addClass("ui-widget-content")}else{V.css(N)}}if(!Q.applyPlatformOpacityRules||!(t.browser.mozilla&&/Linux/.test(navigator.platform))){W.css(Q.overlayCSS)}W.css("position",L?"fixed":"absolute");if(t.browser.msie||Q.forceIframe){X.css("opacity",0)}var K=[X,W,V],Z=L?t("body"):t(F);t.each(K,function(){this.appendTo(Z)});if(Q.theme&&Q.draggable&&t.fn.draggable){V.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var H=j&&(!t.boxModel||t("object,embed",L?null:F).length>0);if(k||H){if(L&&Q.allowBodyStretch&&t.boxModel){t("html,body").css("height","100%")}if((k||!t.boxModel)&&!L){var P=A(F,"borderTopWidth"),U=A(F,"borderLeftWidth");var J=P?"(0 - "+P+")":0;var O=U?"(0 - "+U+")":0}t.each([X,W,V],function(ab,af){var ac=af[0].style;ac.position="absolute";if(ab<2){L?ac.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+Q.quirksmodeOffsetHack+') + "px"'):ac.setExpression("height",'this.parentNode.offsetHeight + "px"');L?ac.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):ac.setExpression("width",'this.parentNode.offsetWidth + "px"');if(O){ac.setExpression("left",O)}if(J){ac.setExpression("top",J)}}else{if(Q.centerY){if(L){ac.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}ac.marginTop=0}else{if(!Q.centerY&&L){var ad=(Q.css&&Q.css.top)?parseInt(Q.css.top):0;var ae="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+ad+') + "px"';ac.setExpression("top",ae)}}}})}if(I){if(Q.theme){V.find(".ui-widget-content").append(I)}else{V.append(I)}if(I.jquery||I.nodeType){t(I).show()}}if((t.browser.msie||Q.forceIframe)&&Q.showOverlay){X.show()}if(Q.fadeIn){var S=Q.onBlock?Q.onBlock:f;var E=(Q.showOverlay&&!I)?S:f;var D=I?S:f;if(Q.showOverlay){W._fadeIn(Q.fadeIn,E)}if(I){V._fadeIn(Q.fadeIn,D)}}else{if(Q.showOverlay){W.show()}if(I){V.show()}if(Q.onBlock){Q.onBlock()}}z(1,F,Q);if(L){e=V[0];n=t(":input:enabled:visible",e);if(Q.focusInput){setTimeout(C,20)}}else{b(V[0],Q.centerX,Q.centerY)}if(Q.timeout){var G=setTimeout(function(){L?t.unblockUI(Q):t(F).unblock(Q)},Q.timeout);t(F).data("blockUI.timeout",G)}}function q(G,H){var F=(G==window);var E=t(G);var I=E.data("blockUI.history");var J=E.data("blockUI.timeout");if(J){clearTimeout(J);E.removeData("blockUI.timeout")}H=t.extend({},t.blockUI.defaults,H||{});z(0,G,H);var D;if(F){D=t("body").children().filter(".blockUI").add("body > .blockUI")}else{D=t(".blockUI",G)}if(F){e=n=null}if(H.fadeOut){D.fadeOut(H.fadeOut);setTimeout(function(){y(D,I,H,G)},H.fadeOut)}else{y(D,I,H,G)}}function y(D,G,F,E){D.each(function(H,I){if(this.parentNode){this.parentNode.removeChild(this)}});if(G&&G.el){G.el.style.display=G.display;G.el.style.position=G.position;if(G.parent){G.parent.appendChild(G.el)}t(E).removeData("blockUI.history")}if(typeof F.onUnblock=="function"){F.onUnblock(E,F)}}function z(D,H,I){var G=H==window,F=t(H);if(!D&&(G&&!e||!G&&!F.data("blockUI.isBlocked"))){return}if(!G){F.data("blockUI.isBlocked",D)}if(!I.bindEvents||(D&&!I.showOverlay)){return}var E="mousedown mouseup keydown keypress";D?t(document).bind(E,I,B):t(document).unbind(E,B)}function B(G){if(G.keyCode&&G.keyCode==9){if(e&&G.data.constrainTabKey){var F=n;var E=!G.shiftKey&&G.target==F[F.length-1];var D=G.shiftKey&&G.target==F[0];if(E||D){setTimeout(function(){C(D)},10);return false}}}if(t(G.target).parents("div.blockMsg").length>0){return true}return t(G.target).parents().children().filter("div.blockUI").length==0}function C(D){if(!n){return}var E=n[D===true?n.length-1:0];if(E){E.focus()}}function b(H,D,J){var I=H.parentNode,G=H.style;var E=((I.offsetWidth-H.offsetWidth)/2)-A(I,"borderLeftWidth");var F=((I.offsetHeight-H.offsetHeight)/2)-A(I,"borderTopWidth");if(D){G.left=E>0?(E+"px"):"0"}if(J){G.top=F>0?(F+"px"):"0"}}function A(D,E){return parseInt(t.css(D,E))||0}})(jQuery);(function(b){b.fn.caret=function(D,z){var h,n,B=this[0];if(typeof D==="object"&&typeof D.start==="number"&&typeof D.end==="number"){h=D.start;n=D.end}else{if(typeof D==="number"&&typeof z==="number"){h=D;n=z}else{if(typeof D==="string"){if((h=B.value.indexOf(D))>-1){n=h+D.length}else{h=null}}else{if(Object.prototype.toString.call(D)==="[object RegExp]"){var A=D.exec(B.value);if(A!=null){h=A.index;n=h+A[0].length}}}}}if(typeof h!="undefined"){if(b.browser.msie){var x=this[0].createTextRange();x.collapse(true);x.moveStart("character",h);x.moveEnd("character",n-h);x.select()}else{this[0].selectionStart=h;this[0].selectionEnd=n}this[0].focus();return this}else{if(b.browser.msie){if(this[0].tagName.toLowerCase()!="textarea"){var j=this.val();var q=document.selection.createRange().duplicate();q.moveEnd("character",j.length);var C=(q.text==""?j.length:j.lastIndexOf(q.text));q=document.selection.createRange().duplicate();q.moveStart("character",-j.length);var y=q.text.length}else{var q=document.selection.createRange();var f=q.duplicate();f.moveToElementText(this[0]);f.setEndPoint("EndToEnd",q);var C=f.text.length-q.text.length;var y=C+q.text.length}}else{var C=B.selectionStart,y=B.selectionEnd}var k=B.value.substring(C,y);return{start:C,end:y,text:k,replace:function(e){return B.value.substring(0,C)+e+B.value.substring(y,B.value.length)}}}return this}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercViewReadyManager={wrappers:[],isInitialized:false,init:function(){this.isInitialized=true},setWrapper:function(e){if(!this.isInitialized){return false}var h=false;var f=this;b(e.components).each(function(j,n){var k=n;if(f.getWrapper(k)!=null){h=true;return}});if(h){return false}b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing");this.wrappers.push(e);e.init();this.logMessage("Added wrapper '"+e.wrapperName+"' to manager");return true},setProcessingFlag:function(){b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing")},getWrapper:function(e){var f=null;b(this.wrappers).each(function(){if(this.isComponentInWrapper(e,true)){f=this;return}});return f},logMessage:function(e){if(window.console&&gDebug){console.log(e)}},handleWrapperComplete:function(e){this.wrappers.splice(b.inArray(e,this.wrappers),1);this.logMessage("Removed wrapper '"+e+"' from manager");if(this.wrappers.length==0){b("#perc-ui-view-indicator").removeClass("perc-ui-view-processing").addClass("perc-ui-view-ready");this.logMessage("The view is ready.")}},showRenderingProgressWarning:function(){b.perc_utils.alert_dialog({content:"Please wait for the page components to finish rendering.",title:"Warning"})}};b.PercComponentWrapper=function(f,h){var e={wrapperName:f,wrapperStatus:"initialized",processedComponents:[],components:h,isWrapperComplete:function(){return this.wrapperStatus=="processed"},isComponentInWrapper:function(j,k){return k?b.inArray(j,this.components)!=-1&&b.inArray(j,this.processedComponents)==-1:b.inArray(j,this.components)!=-1},handleComponentProgress:function(q,n){if(b.inArray(q,this.components)==-1){b.PercViewReadyManager.logMessage("The component '"+q+"' doesn't exist in the wrapper."+this.wrapperName);return}if(n=="complete"){this.processedComponents.push(q);var k=b("#"+q);k.remove();var j=b("[perc-ui-component='"+q+"']");j.addClass("perc-ui-component-ready").removeClass("perc-ui-component-processing");if(this.components.length==this.processedComponents.length){this.wrapperStatus="processed";b.PercViewReadyManager.handleWrapperComplete(this.wrapperName)}}else{b(".perc-ui-component-overlay").each(function(){var y=b(this);var x=b("[perc-ui-component='"+y.attr("id")+"']");var t=x.position();if(t==null){return}y.css("top",t.top).css("left",t.left).css("height",x.height()).css("width",x.width())})}},init:function(){b(this.components).each(function(){var q=this;var n=b("[perc-ui-component='"+q+"']");n.addClass("perc-ui-component-processing").removeClass("perc-ui-component-ready");var j=n.position();var k=b("<div class='perc-ui-component-overlay ui-widget-overlay' style='position:absolute; background-color:silver; opacity:0.3; border-radius: 6px; border: 1px solid silver; z-index:9000'><img src='/cm/images/images/Busy.gif' style='margin: auto;  position: absolute;  top: 0; left: 0; bottom: 0; right: 0;'></div>");k.attr("id",q).css("top",j.top).css("left",j.left).css("height",n.height()).css("width",n.width());n.after(k)})}};return e}})(jQuery);var $j=jQuery.noConflict();$j.perc={};(function(b){b.perc_redirect=function(f,e){var j=window.location.href.indexOf("debug=true")!=-1;var h=f.indexOf("?")!=-1;if(j){if(e==null||e=="undefined"){e=new Object()}e.debug="true"}var k=(e==null||e=="undefined")?"":b.param(e);if(k.length>0){k=(h?"&":"?")+k}var n=f+k;window.location.href=n}})(jQuery);(function(b){b.perc_textAutoFill=function(n,q,h,e,k){var f=false;var j=false;e=typeof(e)!="undefined"?e:false;k=typeof(k)!="undefined"?k:-1;b(n).bind("focus.textAutoFill",function(t){var x=b(q).val();f=(x=="undefined"||x==null||x==""||e==true);j=true});b(n).bind("keyup.textAutoFill",{filter:h},function(x){var t=b(q).attr("disabled");if(!j){var A=b(q).val();f=(A=="undefined"||A==null||A=="");j=true}var y=function(B){return B};if(typeof x.data.filter=="function"){y=x.data.filter}if(f&&!t){if(k>0&&b(n).val().length>k){var z=b(n).val().substring(0,k);b(q).val(y(z))}else{b(q).val(y(b(n).val()))}}})}})(jQuery);(function(b){b.perc_filterField=function(h,e,f){b(h).bind("keypress.filterField",{filter:e},function(D){var k=function(E){return E};var B=D.charCode?D.charCode:D.which;if(B==0||B==8||B==13){return}var z=String.fromCharCode(B);if(typeof D.data.filter=="function"){k=D.data.filter}var A=k(z);if(A.length==0){D.preventDefault()}else{if(z!=A){var C=D.target;var j=b(C).caret().start;var q=b(C).caret().end;var y=C.value.slice(0,j);var x=C.value.slice(q);var n=y+A+x;C.value=n;var t=y.length+1;b(C).caret({start:t,end:t});D.preventDefault()}}});b(h).bind("blur.filterField",{filter:e},function(j){h.val(j.data.filter(h.val()));if(b.isFunction(f)){f(b(h))}})}})(jQuery);(function(b){b.perc_filterFieldText=function(h,e,f){b(h).bind("keypress.filterField",{filter:e},function(F){var k=function(G){return G};var D=F.charCode?F.charCode:F.which;if(D==0||D==8){return}var A=String.fromCharCode(D);if(typeof F.data.filter=="function"){k=F.data.filter}var y=b(F.target).caret().start;var q=h.val();var z=h.attr("maxlength");if(typeof(z)!="undefined"&&q.length==z){return}q=q.substring(0,y)+A+q.substring(y,q.length);var C="";if(typeof(f)!="undefined"&&f.length==1){var B=q.split(f);for(var x=0;x<B.length;x++){B[x]=k(B[x])}C=B.join(f)}else{C=k(q)}if(C.length==0){F.preventDefault()}else{if(q!=C){var E=F.target;var j=b(E).caret().start;var n=C;E.value=b.trim(n);var t=j+1;b(E).caret({start:t,end:t});F.preventDefault()}}});b(h).bind("blur.filterField",{filter:e},function(j){theText=h.val();var k="";if(typeof(f)!="undefined"&&f.length==1){var q=theText.split(f);for(var n=0;n<q.length;n++){q[n]=e(q[n])}k=q.join(f)}else{k=j.data.filter(theText)}h.val(b.trim(k))})}})(jQuery);(function(b){b.perc_textFilters={URL:function(e){return e.replace(/[ ]/g,"-").replace(/[\\\/\:\*\?\"<\>\|\#\;\%\']/g,"")},HOSTNAME:function(e){return e.replace(/[^a-zA-Z0-9\-\.]/g,"")},NOSPACES:function(e){return e.replace(/ /g,"")},NOBACKSLASH:function(e){return e.replace(/[\\]/g,"")},IDNAMECDATA:function(e){return e.replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(e){var f=e.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(f.length>0&&f.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){f=f.substring(1,f.length)}return f},PATH:function(e){return e.replace(/[\\\:\*\?\"<\>\|\#\;\%]/g,"")},ID:function(e){return e.replace(/[^a-zA-Z0-9\-\.\:\_]/g,"")},ID_WITH_SPACE:function(e){return e.replace(/[^a-zA-Z0-9\-\.\:\_ ]/g,"")},ONLY_DIGITS:function(e){return e.replace(/[^0-9]/g,"")},ALPHA_NUMERIC:function(e){return e.replace(/[^a-zA-Z0-9]/g,"")},DIGITS_DOT:function(e){return e.replace(/[^0-9\.]/g,"")},DESCRIPTION:function(e){return e.replace(/[<>&]/g,"")},WINDOWS_FILE_NAME:function(e){return e.replace(/\.*$/g,"")}}})(jQuery);(function(b){b.perc_autoFillTextFilters={URL:function(e){return e.replace(/[ \_]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"").replace(/[-]+/g,"-").toLowerCase()},IDNAMECDATA:function(e){return e.replace(/[:\ \.]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(e){var f=e.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(f.length>0&&f.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){f=f.substring(1,f.length)}return f}}})(jQuery);(function(b){b.PercBlockUI=function(h,f){var e={};if(typeof(h)!="object"||h==null){h=b.PercBlockUIMode.OVERLAY}b.extend(e,h);if(typeof(f)!="undefined"&&f!=null&&f!=""){b.extend(e,{message:f})}b.blockUI(h)};b.PercBlockUIMode={OVERLAY:{message:'<img src="/cm/images/images/Busy.gif"/><br/>Processing. Please wait...',css:{border:"none",backgroundColor:"#fff",opacity:"0.9",color:"#000",fontFamily:"Verdana",fontSize:"11px","-webkit-border-radius":"10px","-moz-border-radius":"10px",padding:"5px",width:"25%"},overlayCSS:{opacity:"0.6"},fadeIn:40,fadeOut:40,baseZ:9999},CURSORONLY:{message:null,overlayCSS:{opacity:0},fadeIn:0,fadeOut:0,baseZ:9999}}})(jQuery);(function(f){var e=false;var b=[];f(document).ready(function(){f("body").ajaxSend(function(){e=true});f("body").ajaxComplete(function(){e=false;h()})});function h(){if(b.length>0&&!e){var j=b.shift();j();h()}}f.PercQueuePostAJAX=function(j){if(typeof(j)=="function"){b.push(j);h()}}})(jQuery);(function(b){b.PercTruncateText=function(h,f){if(h.length<=f){return h}var e=f-3;return h.substr(0,e)+"..."}})(jQuery);(function(b){b.PercTextOverflow=function(e,f){if(b.browser.msie||b.browser.safari){e.css("white-space","nowrap").css("text-overflow","ellipsis").css("width",f).css("overflow","hidden")}else{e.textOverflow("...",false)}}})(jQuery);(function(b){b.fn.binder=b.fn.binder||function(e,f,j){var h=b(this);if((j||false)){h.bind(e,f,j)}else{j=f;h.bind(e,j)}return h};b.fn.singleclick=b.fn.singleclick||function(e,f){return b(this).binder("singleclick",e,f)};b.event.special.singleclick=b.event.special.singleclick||{setup:function(f,e){b(this).bind("click",b.event.special.singleclick.handler)},teardown:function(e){b(this).unbind("click",b.event.special.singleclick.handler)},handler:function(h){var e=function(k){var q=this;var j=b(q);var n=j.data("singleclick-timeout")||false;if(n){clearTimeout(n)}n=false;j.data("singleclick-timeout",n)};var f=function(k){var q=this;e.call(q);var j=b(q);j.data("singleclick-clicks",(j.data("singleclick-clicks")||0)+1);var n=setTimeout(function(){var t=j.data("singleclick-clicks");e.apply(q,[k]);j.data("singleclick-clicks",0);if(t===1){k.type="singleclick";b.event.handle.apply(q,[k])}},500);j.data("singleclick-timeout",n)};f.apply(this,[h])}}})(jQuery);(function(b){b(document).ready(function(){b.editable.addInputType("filteredText",{element:function(h,f){var e=b('<input type="text">');if(h.width!="none"){e.width(h.width)}if(h.height!="none"){e.height(h.height)}e.attr("autocomplete","off");b.perc_filterField(e,b.perc_textFilters.URL);e.attr("id",h.fieldid);b(this).append(e);return(e)}})})})(jQuery);
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(h){var f=document.documentElement.style,j=("textOverflow" in f||"OTextOverflow" in f),k=document.createRange!==undefined,e=function(q){var n=[];h.each(q[0].childNodes,function(){if(this.nodeType===3){n.push(this)}else{h.each(this.childNodes,arguments.callee)}});return h(n)},b=function(x,B,q){var t=document.createRange(),z=0,n=x.length,y=0,A;if(q<=B){return h(x)}if(n===1||!k){return h.map(x,function(C){return C.textContent}).join("").substr(B,q)}for(;z<n;z+=1){A=x[z];if(B>=y&&B<=y+A.length){t.setStart(A,B-y)}if(y<=q&&y+A.length>=q){t.setEnd(A,q-y);break}y+=A.length}return h(t.cloneContents())};h.extend(h.fn,{textOverflow:function(t,n){var q=t||"";if(!j){return this.each(function(){var B=h(this),D=B.clone(),G=B.clone(),A=B.text(),x=B.width(),C=e(G),E=0,F=0,z=A.length,y=function(){if(x!==B.width()){B.replaceWith(G);B=G;G=B.clone();B.textOverflow(t,false);x=B.width()}};B.after(D.hide());if(D.width()>x){while(E<z){F=Math.floor(E+((z-E)/2));D.empty().append(b(C,0,F)).append(q);if(D.width()<x){E=F+1}else{z=F}}if(E<A.length){B.empty().append(b(C,0,E-1)).append(q)}}D.remove();if(n){setInterval(y,200)}})}else{return this}}})})(jQuery);(function(j){var k="/Rhythmyx";var h=k+"/services";var n="/cm";var e={ANALYTICS:h+"/analytics",PAGEMGT:h+"/pagemanagement",SITEMGT:h+"/sitemanage",MIGRATIONMGT:h+"/migrationmanagement",PATHMGT:h+"/pathmanagement",ASSETMGT:h+"/assetmanagement",DELIVERY:h+"/delivery",ITEMMGT:h+"/itemmanagement",USERMGT:h+"/user",UTILS:h+"/utils",METADATAMGT:h+"/metadatamanagement",ACTIVITY:h+"/activitymanagement",FINDER:h+"/searchmanagement",WORKFLOW:h+"/workflowmanagement",ROLEMGT:h+"/rolemanagement",DESIGN:h+"/design",FOLDERMGT:h+"/foldermanagement",LICENSE:h+"/licensemanagement",PUBMGT:h+"/publishmanagement",SHARE:h+"/share",WDGMGT:h+"/widgetmanagement",PAGEOPTMGT:h+"/pageoptimizermanagement",RECMGT:h+"/recentmanagement",REDMGT:h+"/redirectmanagement",CLDSVC:h+"/cloudservicemanagement",CATMGT:h+"/categorymanagement"};var b="Assets";var f="Sites";var t="Search";var q="Design";j.perc_displayformats={"/":"","/Design":"CM1_Design"};j.perc_paths={PATH_ADD_FOLDER:e.PATHMGT+"/path/addFolder",PATH_ADD_NEW_FOLDER:e.PATHMGT+"/path/addNewFolder",PATH_FOLDER:e.PATHMGT+"/path/folder",PATH_CHILD_FOLDERS:e.PATHMGT+"/path/childFolders",PATH_PAGINATED_FOLDER:e.PATHMGT+"/path/paginatedFolder",PATH_ITEM:e.PATHMGT+"/path/item",PATH_ITEM_BY_ID:e.PATHMGT+"/path/item/id",PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE:e.PATHMGT+"/path/item/wfState",PATH_ITEM_MOVE:e.PATHMGT+"/path/moveItem",PATH_ITEM_PROPERTIES:e.PATHMGT+"/path/itemProperties",PATH_VALIDATE_DELETE_FOLDER:e.PATHMGT+"/path/validateFolderDelete",PATH_DELETE_FOLDER:e.PATHMGT+"/path/deleteFolder",PATH_RENAME_FOLDER:e.PATHMGT+"/path/renameFolder",PATH_GET_FOLDER_PROPERTIES:e.PATHMGT+"/path/folderProperties",PATH_SAVE_FOLDER_PROPERTIES:e.PATHMGT+"/path/saveFolderProperties",PATH_LAST_EXISTING:e.PATHMGT+"/path/lastExisting",PATH_VALIDATE_EXIST:e.PATHMGT+"/path/validate",DISPLAY_FORMAT:h+"/ui/uicomps/displayformat/name/",TEMPLATES_ALL:e.PAGEMGT+"/template/summary/all",TEMPLATE_HTML_PARSE:e.PAGEMGT+"/render/parse",TEMPLATE_EXPORT:e.PAGEMGT+"/template/export",TEMPLATE_IMPORT:e.PAGEMGT+"/template/import",TEMPLATES_USER:e.PAGEMGT+"/template/summary/all/user",TEMPLATE_LOAD_SAVE:e.PAGEMGT+"/template",TEMPLATE_LOAD_METADATA:e.PAGEMGT+"/template/loadTemplateMetadata",TEMPLATE_SAVE_METADATA:e.PAGEMGT+"/template/saveTemplateMetadata",TEMPLATE_CREATE_FROM_URL:e.SITEMGT+"/sitetemplates/createFromUrl",TEMPLATE_CREATE_FROM_URL_ASYNC:e.SITEMGT+"/sitetemplates/createFromUrlAsync",TEMPLATE_CREATE_FROM_URL_RESULT:e.SITEMGT+"/sitetemplates/getImportedTemplate",TEMPLATE_CREATE_FROM_PAGE:e.SITEMGT+"/sitetemplates/createFromPage",TEMPLATE_RENDER:e.PAGEMGT+"/render/template",TEMPLATE_RENDER_SCRIPTSOFF:e.PAGEMGT+"/render/template/scriptsoff",TEMPLATES_BY_SITE:e.SITEMGT+"/sitetemplates/templates",TEMPLATES_WITH_NOSITE:e.SITEMGT+"/sitetemplates/nosite",TEMPLATES_READONLY:e.PAGEMGT+"/template/summary/all/readonly",TEMPLATES_SAVE:e.SITEMGT+"/sitetemplates",PAGE_CREATE:e.PAGEMGT+"/page",SAVE_PAGE_METADATA:e.PAGEMGT+"/page/savePageMetadata",PAGES_WITH_TEMPLATE:e.PAGEMGT+"/page/pagesByTemplate",UNASSIGNED_PAGES_BY_SITE:e.PAGEMGT+"/page/unassignedPagesBySite",MIGRATION_EMPTY_FLAG:e.PAGEMGT+"/page/migrationEmptyFlag",CLEAR_MIGRATION_EMPTY_FLAG:e.PAGEMGT+"/page/clearMigrationEmptyFlag",RENDER_LINK_PREVIEW:e.PAGEMGT+"/renderlink/preview",BLOG_LOAD:e.SITEMGT+"/section/blogs",POST_LOAD:e.SITEMGT+"/section/blogPosts",SECTION_CREATE:e.SITEMGT+"section/create",SECTION_CREATE_SECTION_LINK:e.SITEMGT+"/section/createSectionLink",SECTION_DELETE_SECTION_LINK:e.SITEMGT+"/section/deleteSectionLink",SECTION_CREATE_EXTERNAL_LINK:e.SITEMGT+"/section/createExternalLinkSection",SECTION_SECTION_FROM_FOLDER:e.SITEMGT+"/section/createSectionFromFolder",SECTION_CONVERT_TO_FOLDER:e.SITEMGT+"/section/convertToFolder/",SECTION_DELETE:e.SITEMGT+"section",SECTION_LOAD:e.SITEMGT+"section",SECTION_MOVE:e.SITEMGT+"section/move",SECTION_REPLACE_LANDING_PAGE:e.SITEMGT+"section/replaceLandingPage",SECTION_UPDATE:e.SITEMGT+"section/update",SECTION_LINK_UPDATE:e.SITEMGT+"section/updateSectionLink",SECTION_EXTERNAL_LINK_UPDATE:e.SITEMGT+"section/updateExternalLink",SECTION_GET_ROOT:e.SITEMGT+"section/root",SECTION_GET_TREE:e.SITEMGT+"section/tree",SECTION_GET_CHILDREN:e.SITEMGT+"section/childSections",SECTION_GET_PROPERTIES:e.SITEMGT+"section/properties",PAGE_DELETE:e.PAGEMGT+"/page",PAGE_FORCE_DELETE:e.PAGEMGT+"/page/forceDelete",PAGE_VALIDATE_DELETE:e.PAGEMGT+"/page/validateDelete",PAGE_COPY:e.PAGEMGT+"/page/copy",PAGE_CHANGE_TEMPLATE:e.PAGEMGT+"/page/changeTemplate",PAGE_EDIT:e.PAGEMGT+"/render/page/editmode",PAGE_EDIT_SCRIPTSOFF:e.PAGEMGT+"/render/page/editmode/scriptsoff",PAGE_PREVIEW:e.PAGEMGT+"/render/page/",PAGE_EDITURL:e.PAGEMGT+"/page/pageEditUrl",PAGE_VIEWURL:e.PAGEMGT+"/page/pageViewUrl",PAGE_NONSEO:e.PAGEMGT+"/page/nonSEOPages",WIDGETS_ALL:e.PAGEMGT+"/widget",WIDGET_FULL:e.PAGEMGT+"/widget/full",WIDGET_INFO:e.PAGEMGT+"/widget/packageinfo",THEME_CSS:e.PAGEMGT+"/theme/css",REGION_CSS:e.PAGEMGT+"/theme/regioncss",REGION_CSS_MERGE:e.PAGEMGT+"/theme/regioncss/merge",REGION_CSS_PREPARE_FOR_EDIT:e.PAGEMGT+"/theme/regioncss/prepareForEdit",REGION_CSS_CLEAR_CACHE:e.PAGEMGT+"/theme/regioncss/clearCache",THEME_SUMMARY_ALL:e.PAGEMGT+"/theme/summary/all",RICHTEXT_CUSTOM_STYLES:e.PAGEMGT+"/theme/customstyles",ANALYTICS_GET_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_STORE_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_DELETE_CONFIG:e.ANALYTICS+"/provider/config",ANALYTICS_TEST_CONNECTION:e.ANALYTICS+"/provider/testConnection",ANALYTICS_GET_PROFILES:e.ANALYTICS+"/provider/profiles",CONTENT_EDIT_CRITERIA:e.ASSETMGT+"/asset/contentEditCriteria",ASSET_WIDGET_REL:e.ASSETMGT+"/asset/createAssetWidgetRelationship",ASSET_FROM_LOCALCONTENT:e.ASSETMGT+"/asset/shareLocalContent",ASSET_WIDGET_PROMOTE:e.ASSETMGT+"/asset/promoteAssetWidget",ASSET_WIDGET_REL_UPDATE:e.ASSETMGT+"/asset/updateAssetWidgetRelationship",ASSET_ADD_TO_FOLDER:e.ASSETMGT+"/asset/addAssetToFolder",ASSET_WIDGET_DROP_CRITERIA:e.ASSETMGT+"/asset/assetWidgetDropCriteria/",ASSET_WIDGET_REL_DEL:e.ASSETMGT+"/asset/clearAssetWidgetRelationship",ASSET_ORPHAN_WIDGET_REL_DEL:e.ASSETMGT+"/asset/clearOrphanAssetsWidgetRelationship",ASSET_EDITOR_LIBRARY:e.ASSETMGT+"/asset/assetEditors",ASSET_TYPES:e.ASSETMGT+"/asset/assetTypes",ASSET_EDITOR:e.ASSETMGT+"/asset/assetEditor",ASSET_EDITOR_URL_FOR_ASSET_ID:e.ASSETMGT+"/asset/assetEditUrl",ASSET_VIEW_URL_FOR_ASSET_ID:e.ASSETMGT+"/asset/assetViewUrl",ASSET_DELETE:e.ASSETMGT+"/asset",ASSET_FORCE_DELETE:e.ASSETMGT+"/asset/forceDelete",ASSET_VALIDATE_DELETE:e.ASSETMGT+"/asset/validateDelete",ASSET_REMOVE:e.ASSETMGT+"/asset/remove",ASSET_FORCE_REMOVE:e.ASSETMGT+"/asset/forceRemove",ASSET_UPDATE:e.ASSETMGT+"/asset/updateAsset",ASSET_UNUSED:e.ASSETMGT+"/asset/unusedAssets",ASSET_PROMOTE:e.ASSETMGT+"/asset/promoteAsset",CONVERT_WIDGET:e.ASSETMGT+"/asset/createWidgetAsset",UPDATE_INSPECTED_ELEMENT:e.ASSETMGT+"/asset/updateInspectedElements",SITES_ALL:e.SITEMGT+"/site",SAAS_SITES_NAMES:e.SITEMGT+"/site/sass/sitenames",SITES_ALL_CHOICES:e.SITEMGT+"/site/choices",SITES_BY_TEMPLATE:e.SITEMGT+"/sitetemplates/sites",SITE_CREATE:e.SITEMGT+"/site",SITE_CREATE_FROM_URL:e.SITEMGT+"/site/importFromUrl",SITE_CREATE_FROM_URL_ASYNC:e.SITEMGT+"/site/importFromUrlAsync",SITE_CREATE_FROM_URL_RESULT:e.SITEMGT+"/site/getImportedSite",VIEW_IMPORT_LOG:e.SITEMGT+"/site/importLogViewer",SITE_GET_PROPERTIES:e.SITEMGT+"/site/properties",SITE_IS_BEING_IMPORTED:e.SITEMGT+"/site/isSiteImporting",SITE_PUBLISH:e.SITEMGT+"/publish",SITE_ITEM_PUBLISH_ACTIONS:e.SITEMGT+"/publish/publishingActions",PAGE_PUBLISH:e.SITEMGT+"/publish/page",RESOURCE_PUBLISH:e.SITEMGT+"/publish/resource",PAGE_TAKEDOWN:e.SITEMGT+"/publish/takedown/page",RESOURCE_TAKEDOWN:e.SITEMGT+"/publish/takedown/resource",INCREMENTAL_LIST:e.SITEMGT+"/publish/incremental/content/",INCREMENTAL_PUBLISH:e.SITEMGT+"/publish/incremental/publish/",SITE_UPDATE_PROPERTIES:e.SITEMGT+"/site/updateProperties",SITE_DELETE:e.SITEMGT+"/site",PUBLISH_CURRENT_STATUS:e.SITEMGT+"pubstatus/current",PUBLISH_LOGS:e.SITEMGT+"pubstatus/logs",PUBLISH_PURGE:e.SITEMGT+"pubstatus/purge",PUBLISH_LOGS_DETAILS:e.SITEMGT+"pubstatus/details",SITE_GET_PUBLISH_PROPERTIES:e.SITEMGT+"/site/publishProperties",SITE_UPDATE_PUBLISH_PROPERTIES:e.SITEMGT+"/site/updatePublishProperties",SITE_COPY:e.SITEMGT+"/site/copy",SITE_COPY_VALIDATE_FOLDERS:e.SITEMGT+"/site/copy/validateFolders",SITE_COPY_INFO:e.SITEMGT+"/site/copysiteinfo",SITE_STATS_SUMMARY:e.SITEMGT+"/site/statistics",SITE_ARCHITECTURE:e.SITEMGT+"/siteArchitecture",URL_ADMIN:n+"/jsp/admin.jsp",URL_ARCHITECTURE:n+"/jsp/siteArchitecture.jsp",URL_DASHBOARD:n+"/jsp/dashboard.jsp",URL_WEBMGT:n+"/jsp/webmgt.jsp",IMAGE_ROOT:n+"/images",METADATA_FIND:e.METADATAMGT+"/metadata",METADATA_DELETE_BY_PREFIX:e.METADATAMGT+"/metadata/byprefix",METADATA_FIND_BY_PREFIX:e.METADATAMGT+"/metadata/byprefix",METADATA_DELETE:e.METADATAMGT+"/metadata",METADATA_SAVE:e.METADATAMGT+"/metadata",METADATA_SAVE_GLOBAL_VARIABLES:e.METADATAMGT+"/metadata/globalvariables",PROCESS_STATUS_ALL:e.SITEMGT+"/monitor/all",WORKFLOW_CHECKOUT:e.ITEMMGT+"/workflow/checkOut",WORKFLOW_CHECKIN:e.ITEMMGT+"/workflow/checkIn",WORKFLOW_FORCE_CHECKOUT:e.ITEMMGT+"/workflow/forceCheckOut",WORKFLOW_TRANSITION:e.ITEMMGT+"/workflow/transition",WORKFLOW_TRANSITION_COMMENT:e.ITEMMGT+"/workflow/transitionWithComments",WORKFLOW_TRANSITIONS:e.ITEMMGT+"/workflow/getTransitions",WORKFLOW_CHECKED_OUT_TO_USER:e.ITEMMGT+"/workflow/isCheckedOutToCurrentUser",WORKFLOW_IS_APPROVE_ALLOWED:e.ITEMMGT+"/workflow/isApproveAvailableToCurrentUser",WORKFLOW_BULK_APPROVE:e.ITEMMGT+"/workflow/bulkApprove",WORKFLOW_STEPPED:e.WORKFLOW+"/workflows/",WORKFLOW_META:e.WORKFLOW+"/workflows/metadata",DEFAULT_WORKFLOW_META:e.WORKFLOW+"/workflows/metadata/default",USER_USERS:e.USERMGT+"/user/users",USER_USERS_NAMES:e.USERMGT+"/user/users/names",USER_ROLES:e.USERMGT+"/user/roles",USER_FIND:e.USERMGT+"/user/find",USER_EXTERNAL_FIND:e.USERMGT+"/user/external/find",USER_EXTERNAL_IMPORT:e.USERMGT+"/user/import",USER_EXTERNAL_STATUS:e.USERMGT+"/user/external/status",USER_STATUS:e.USERMGT+"/user/status",USER_DELETE:e.USERMGT+"/user/delete",USER_UPDATE:e.USERMGT+"/user/update",USER_CREATE:e.USERMGT+"/user/create",USER_CURRENT:e.USERMGT+"/user/current",USER_ACCESS_LEVEL:e.USERMGT+"/user/accessLevel",ROLE_FIND:e.ROLEMGT+"/role/find",ROLE_DELETE:e.ROLEMGT+"/role/delete",ROLE_UPDATE:e.ROLEMGT+"/role/update",ROLE_CREATE:e.ROLEMGT+"/role/create",ROLE_AVAILABLE_USERS:e.ROLEMGT+"/role/availableUsers",ROLE_DELETE_VALIDATE:e.ROLEMGT+"/role/validateForDelete",ROLE_REMOVE_USERS_VALIDATE:e.ROLEMGT+"/role/validateDeleteUsers",CAT_ALL:e.CATMGT+"/category/all",CAT_UPDATE:e.CATMGT+"/category/update",CAT_LOCK_INFO:e.CATMGT+"/category/lockinfo",CAT_LOCK_TAB:e.CATMGT+"/category/locktab",CAT_REMOVE_TAB_LOCK:e.CATMGT+"/category/removelocktab",CAT_UPDATE_IN_DTS:e.CATMGT+"/category/updateindts",UTIL_GET_MAXINTERVAL:e.UTILS+"/utility/maxInactiveInterval",UTIL_GET_PRIVATE_KEYS:e.UTILS+"/utility/privatekeys",UTIL_ENCRYPT_STRING:e.UTILS+"/utility/encryptstring",UTIL_ENCRYPT_STRINGS:e.UTILS+"/utility/encryptstrings",UTIL_DECRYPT_STRING:e.UTILS+"/utility/decryptstring",UTIL_LOG_DATA:e.UTILS+"/utility/log",ITEM_REVISIONS:e.ITEMMGT+"/item/revisions",ITEM_PROMOTE_REVISION:e.ITEMMGT+"/item/restoreRevision",ITEM_SETDATES:e.ITEMMGT+"/item/setitemdates",ITEM_GETDATES:e.ITEMMGT+"/item/getitemdates",ITEM_LAST_COMMENT:e.ITEMMGT+"/item/lastComment",ASSET_SITE_IMPACT:e.ITEMMGT+"/item/siteimpact/asset",ADD_TO_MYPAGES:e.ITEMMGT+"/item/addtomypages",REMOVE_FROM_MYPAGES:e.ITEMMGT+"/item/removefrommypages",IS_MY_PAGE:e.ITEMMGT+"/item/ismypage",MY_CONTENT:e.ITEMMGT+"/item/mycontent",ITEM_SETSOPROMETA:e.ITEMMGT+"/item/setsoprometadata",ITEM_GETSOPROMETA:e.ITEMMGT+"/item/getsoprometadata",ASSETS_ROOT_NO_SLASH:b,SITES_ROOT_NO_SLASH:f,DESIGN_ROOT_NO_SLASH:q,SEARCH_ROOT_NO_SLASH:t,ASSETS_ROOT:"/"+b,SITES_ROOT:"/"+f,DESIGN_ROOT:"/"+q,SEARCH_ROOT:"/"+t,FINDER_SEARCH:e.FINDER+"/search/get",DESIGN_THEMES:"/"+q+"/web_resources/themes",ACTIVITY_CONTENT:e.ACTIVITY+"/activity/contentactivity",ACTIVITY_TRAFFIC:e.ACTIVITY+"/activity/contenttraffic",ACTIVITY_TRAFFIC_DETAILS:e.ACTIVITY+"/activity/trafficdetails",ACTIVITY_EFFECTIVENESS:e.ACTIVITY+"/activity/effectiveness",GADGETLIST:n+"/gadgets/listing",ASSET_FORMS:e.ASSETMGT+"/asset/forms",ASSET_FORMS_EXPORT:e.DELIVERY+"/form/submissions",ASSET_FORMS_CLEAR:e.DELIVERY+"/form",COMMENTS_DEFAULT_MODERATION:e.DELIVERY+"/comment/defaultModerationState",COMMENTS_SET_MODERATIONS:e.DELIVERY+"/comment/moderate",COMMENTS_GET_ALL:e.DELIVERY+"/comment/pageswithcomments",COMMENTS_GET_PAGE:e.DELIVERY+"/comment/commentsonpage",COMMENTS_GET_ARTICLE:e.PAGEMGT+"/page/folderpath/Sites",WEBRESOURCESMGT:e.DESIGN+"/webresources",WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD:e.DESIGN+"/webresources/validateFileUpload",WEBRESOURCESMGT_FILE_UPLOAD:e.DESIGN+"/webresources/uploadFile",FOLDERMGT_FOLDERS_WITH_WORKFLOW:e.FOLDERMGT+"/folders",FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/start/",FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/status/",FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB:e.FOLDERMGT+"/folders/GetAssociatedFoldersJob/cancel/",FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN:e.FOLDERMGT+"/folders/workflowassignment",FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS:e.FOLDERMGT+"/folders/workflowassignment/isInProgress",FOLDERMGT_FOLDER_PAGES:e.FOLDERMGT+"/folders/folderpages/id/",MEMBERSHIP_GET_ALL:e.DELIVERY+"/membership/admin/users",MEMBERSHIP_ACT_BLK_DEL_ACCOUNT:e.DELIVERY+"/membership/admin/account",MEMBERSHIP_ACT_SAVE_GROUP:e.DELIVERY+"/membership/admin/user/group",LICENSE_ACTIVATE:e.LICENSE+"/license/activate",LICENSE_GET_INFORMATION:e.LICENSE+"/license/status",LICENSE_GET_NETSUITE_METHOD:e.LICENSE+"/license/methodWithCheckUrl",LICENSE_GET_MODULE:e.LICENSE+"/license/module/",LICENSE_SAVE_MODULE:e.LICENSE+"/license/module/save",SERVER_DETAILS:e.PUBMGT+"/servers/",DEFAULT_PUB_PATH:e.PUBMGT+"/servers/defaultFolderLocation/",DEFAULT_SERVER_MODIFIED:e.PUBMGT+"/servers/isDefaultServerModified/",STOP_PUB_SERVER:e.PUBMGT+"/servers/stopPublishing/",JOB_STATUS:e.SHARE+"/jobstatus",TEMPLATE_MIGRATE_CONTENT:e.MIGRATIONMGT+"/contentmigration/migrate",WIDGET_DEFS_SUMMARIES:e.WDGMGT+"/widgetbuilder/summaries",WIDGET_DEF:e.WDGMGT+"/widgetbuilder/definition/",WIDGET_DEF_VALIDATE:e.WDGMGT+"/widgetbuilder/validate/",WIDGET_DEF_DEPLOY:e.WDGMGT+"/widgetbuilder/deploy/",CLDSVC_ACTIVE:e.CLDSVC+"/cloudservice/active/",CLDSVC_ACTIVE_FMT:e.CLDSVC+"/cloudservice/%s/active/",CLDSVC_ACTIVESTATES:e.CLDSVC+"/cloudservice/activestates/",CLDSVC_INFO:e.CLDSVC+"/cloudservice/info/",CLDSVC_INFO_FMT:e.CLDSVC+"/cloudservice/%s/info/",CLDSVC_DATA:e.CLDSVC+"/cloudservice/pagedata/",CLDSVC_DATA_FMT:e.CLDSVC+"/cloudservice/%s/pagedata/",PAGE_OPT_ACTIVE:e.PAGEOPTMGT+"/pageoptimizer/active/",PAGE_OPT_DATA:e.PAGEOPTMGT+"/pageoptimizer/pagedata/",PAGE_OPT_INFO:e.PAGEOPTMGT+"/pageoptimizer/info/",RECENT_ROOT:e.RECMGT+"/recent/",REDIRECT_ROOT:e.REDMGT+"/redirect/",ITEM_PUB_HISTORY:e.ITEMMGT+"/item/pubhistory/"}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(k,y){var x=k.nodeName.toLowerCase();if("area"===x){var t=k.parentNode,q=t.name,n;return !k.href||!q||t.nodeName.toLowerCase()!=="map"?!1:(n=f("img[usemap=#"+q+"]")[0],!!n&&h(n))}return(/input|select|textarea|button|object/.test(x)?!k.disabled:"a"==x?k.href||y:y)&&h(k)}function h(k){return !f(k).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(k,n){return typeof k=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),n&&n.call(b)},k)}):this._focus.apply(this,arguments)},scrollParent:function(){var k;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?k=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):k=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!k.length?f(document):k},zIndex:function(q){if(q!==e){return this.css("zIndex",q)}if(this.length){var n=f(this[0]),k,b;while(n.length&&n[0]!==document){k=n.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){b=parseInt(n.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}n=n.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(x,t){function b(y,B,A,z){return f.each(q,function(){B-=parseFloat(f.curCSS(y,"padding"+this,!0))||0,A&&(B-=parseFloat(f.curCSS(y,"border"+this+"Width",!0))||0),z&&(B-=parseFloat(f.curCSS(y,"margin"+this,!0))||0)}),B}var q=t==="Width"?["Left","Right"]:["Top","Bottom"],n=t.toLowerCase(),k={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+t]=function(y){return y===e?k["inner"+t].call(this):this.each(function(){f(this).css(n,b(this,y)+"px")})},f.fn["outer"+t]=function(y,z){return typeof y!="number"?k["outer"+t].call(this,y):this.each(function(){f(this).css(n,b(this,y,!0,z)+"px")})}}),f.extend(f.expr[":"],{data:function(k,q,n){return !!f.data(k,n[3])},focusable:function(k){return j(k,!isNaN(f.attr(k,"tabindex")))},tabbable:function(k){var q=f.attr(k,"tabindex"),n=isNaN(q);return(n||q>=0)&&j(k,!n)}}),f(function(){var k=document.body,n=k.appendChild(n=document.createElement("div"));n.offsetHeight,f.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=n.offsetHeight===100,f.support.selectstart="onselectstart" in n,k.removeChild(n).style.display="none"}),f.extend(f.ui,{plugin:{add:function(k,x,t){var q=f.ui[k].prototype;for(var n in t){q.plugins[n]=q.plugins[n]||[],q.plugins[n].push([x,t[n]])}},call:function(n,k,x){var t=n.plugins[k];if(!t||!n.element[0].parentNode){return}for(var q=0;q<t.length;q++){n.options[t[q][0]]&&t[q][1].apply(n.element,x)}}},contains:function(n,k){return document.compareDocumentPosition?n.compareDocumentPosition(k)&16:n!==k&&n.contains(k)},hasScroll:function(k,t){if(f(k).css("overflow")==="hidden"){return !1}var q=t&&t==="left"?"scrollLeft":"scrollTop",n=!1;return k[q]>0?!0:(k[q]=1,n=k[q]>0,k[q]=0,n)},isOverAxis:function(n,k,q){return n>k&&n<k+q},isOver:function(k,y,x,t,q,n){return f.ui.isOverAxis(k,x,q)&&f.ui.isOverAxis(y,t,n)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(k){for(var t=0,q;(q=k[t])!=null;t++){try{f(q).triggerHandler("remove")}catch(n){}}j(k)}}else{var h=f.fn.remove;f.fn.remove=function(k,n){return this.each(function(){return n||(!k||f.filter(k,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(q){}}),h.call(f(this),k,n)})}}f.widget=function(k,y,x){var t=k.split(".")[0],q;k=k.split(".")[1],q=t+"-"+k,x||(x=y,y=f.Widget),f.expr[":"][q]=function(b){return !!f.data(b,k)},f[t]=f[t]||{},f[t][k]=function(A,z){arguments.length&&this._createWidget(A,z)};var n=new y;n.options=f.extend(!0,{},n.options),f[t][k].prototype=f.extend(!0,n,{namespace:t,widgetName:k,widgetEventPrefix:f[t][k].prototype.widgetEventPrefix||k,widgetBaseClass:q},x),f.widget.bridge(k,f[t][k])},f.widget.bridge=function(k,b){f.fn[k]=function(x){var t=typeof x=="string",q=Array.prototype.slice.call(arguments,1),n=this;return x=!t&&q.length?f.extend.apply(null,[!0,x].concat(q)):x,t&&x.charAt(0)==="_"?n:(t?this.each(function(){var z=f.data(this,k),y=z&&f.isFunction(z[x])?z[x].apply(z,q):z;if(y!==z&&y!==e){return n=y,!1}}):this.each(function(){var y=f.data(this,k);y?y.option(x||{})._init():f.data(this,k,new b(x,this))}),n)}},f.Widget=function(n,k){arguments.length&&this._createWidget(n,k)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(k,q){f.data(q,this.widgetName,this),this.element=f(q),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),k);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,k){var b=n;if(arguments.length===0){return f.extend({},this.options)}if(typeof n=="string"){if(k===e){return this.options[n]}b={},b[n]=k}return this._setOptions(b),this},_setOptions:function(k){var n=this;return f.each(k,function(t,q){n._setOption(t,q)}),this},_setOption:function(n,k){return this.options[n]=k,n==="disabled"&&this.widget()[k?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",k),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(k,y,x){var t,q,n=this.options[k];x=x||{},y=f.Event(y),y.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase(),y.target=this.element[0],q=y.originalEvent;if(q){for(t in q){t in y||(y[t]=q[t])}}return this.element.trigger(y,x),!(f.isFunction(n)&&n.call(this.element[0],y,x)===!1||y.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=!1;f(document).mouseup(function(b){h=!1}),f.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var j=this;this.element.bind("mousedown."+this.widgetName,function(b){return j._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===f.data(b.target,j.widgetName+".preventClickEvent")){return f.removeData(b.target,j.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(j){if(h){return}this._mouseStarted&&this._mouseUp(j),this._mouseDownEvent=j;var q=this,n=j.which==1,k=typeof this.options.cancel=="string"&&j.target.nodeName?f(j.target).closest(this.options.cancel).length:!1;if(!n||k||!this._mouseCapture(j)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){q.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)){this._mouseStarted=this._mouseStart(j)!==!1;if(!this._mouseStarted){return j.preventDefault(),!0}}return !0===f.data(j.target,this.widgetName+".preventClickEvent")&&f.removeData(j.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return q._mouseMove(b)},this._mouseUpDelegate=function(b){return q._mouseUp(b)},f(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),j.preventDefault(),h=!0,!0},_mouseMove:function(j){return !f.browser.msie||document.documentMode>=9||!!j.button?this._mouseStarted?(this._mouseDrag(j),j.preventDefault()):(this._mouseDistanceMet(j)&&this._mouseDelayMet(j)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,j)!==!1,this._mouseStarted?this._mouseDrag(j):this._mouseUp(j)),!this._mouseStarted):this._mouseUp(j)},_mouseUp:function(j){return f(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,j.target==this._mouseDownEvent.target&&f.data(j.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(j)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var z=/left|center|right/,y=/top|center|bottom/,x="center",t={},q=k.fn.position,n=k.fn.offset;k.fn.position=function(f){if(!f||!f.of){return q.apply(this,arguments)}f=k.extend({},f);var E=k(f.of),D=E[0],C=(f.collision||"flip").split(" "),B=f.offset?f.offset.split(" "):[0,0],A,e,F;return D.nodeType===9?(A=E.width(),e=E.height(),F={top:0,left:0}):D.setTimeout?(A=E.width(),e=E.height(),F={top:E.scrollTop(),left:E.scrollLeft()}):D.preventDefault?(f.at="left top",A=e=0,F={top:f.of.pageY,left:f.of.pageX}):(A=E.outerWidth(),e=E.outerHeight(),F=E.offset()),k.each(["my","at"],function(){var b=(f[this]||"").split(" ");b.length===1&&(b=z.test(b[0])?b.concat([x]):y.test(b[0])?[x].concat(b):[x,x]),b[0]=z.test(b[0])?b[0]:x,b[1]=y.test(b[1])?b[1]:x,f[this]=b}),C.length===1&&(C[1]=C[0]),B[0]=parseInt(B[0],10)||0,B.length===1&&(B[1]=B[0]),B[1]=parseInt(B[1],10)||0,f.at[0]==="right"?F.left+=A:f.at[0]===x&&(F.left+=A/2),f.at[1]==="bottom"?F.top+=e:f.at[1]===x&&(F.top+=e/2),F.left+=B[0],F.top+=B[1],this.each(function(){var N=k(this),M=N.outerWidth(),L=N.outerHeight(),K=parseInt(k.curCSS(this,"marginLeft",!0))||0,J=parseInt(k.curCSS(this,"marginTop",!0))||0,I=M+K+(parseInt(k.curCSS(this,"marginRight",!0))||0),H=L+J+(parseInt(k.curCSS(this,"marginBottom",!0))||0),G=k.extend({},F),b;f.my[0]==="right"?G.left-=M:f.my[0]===x&&(G.left-=M/2),f.my[1]==="bottom"?G.top-=L:f.my[1]===x&&(G.top-=L/2),t.fractions||(G.left=Math.round(G.left),G.top=Math.round(G.top)),b={left:G.left-K,top:G.top-J},k.each(["left","top"],function(O,h){k.ui.position[C[O]]&&k.ui.position[C[O]][h](G,{targetWidth:A,targetHeight:e,elemWidth:M,elemHeight:L,collisionPosition:b,collisionWidth:I,collisionHeight:H,offset:B,my:f.my,at:f.at})}),k.fn.bgiframe&&N.bgiframe(),N.offset(k.extend(G,{using:f.using}))})},k.ui.position={fit:{left:function(f,B){var A=k(window),h=B.collisionPosition.left+B.collisionWidth-A.width()-A.scrollLeft();f.left=h>0?f.left-h:Math.max(f.left-B.collisionPosition.left,f.left)},top:function(f,B){var A=k(window),h=B.collisionPosition.top+B.collisionHeight-A.height()-A.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-B.collisionPosition.top,f.top)}},flip:{left:function(e,F){if(F.at[0]===x){return}var E=k(window),D=F.collisionPosition.left+F.collisionWidth-E.width()-E.scrollLeft(),C=F.my[0]==="left"?-F.elemWidth:F.my[0]==="right"?F.elemWidth:0,B=F.at[0]==="left"?F.targetWidth:-F.targetWidth,A=-2*F.offset[0];e.left+=F.collisionPosition.left<0?C+B+A:D>0?C+B+A:0},top:function(e,F){if(F.at[1]===x){return}var E=k(window),D=F.collisionPosition.top+F.collisionHeight-E.height()-E.scrollTop(),C=F.my[1]==="top"?-F.elemHeight:F.my[1]==="bottom"?F.elemHeight:0,B=F.at[1]==="top"?F.targetHeight:-F.targetHeight,A=-2*F.offset[1];e.top+=F.collisionPosition.top<0?C+B+A:D>0?C+B+A:0}}},k.offset.setOffset||(k.offset.setOffset=function(A,G){/static/.test(k.curCSS(A,"position"))&&(A.style.position="relative");var F=k(A),E=F.offset(),D=parseInt(k.curCSS(A,"top",!0),10)||0,C=parseInt(k.curCSS(A,"left",!0),10)||0,B={top:G.top-E.top+D,left:G.left-E.left+C};"using" in G?G.using.call(A,B):F.css(B)},k.fn.offset=function(e){var f=this[0];return !f||!f.ownerDocument?null:e?k.isFunction(e)?this.each(function(b){k(this).offset(e.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,e)}):n.call(this)}),function(){var f=document.getElementsByTagName("body")[0],G=document.createElement("div"),F,E,D,C,B;F=document.createElement(f?"div":"body"),D={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},f&&k.extend(D,{position:"absolute",left:"-1000px",top:"-1000px"});for(var A in D){F.style[A]=D[A]}F.appendChild(G),E=f||document.documentElement,E.insertBefore(F,E.firstChild),G.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",C=k(G).offset(function(h,e){return e}).offset(),F.innerHTML="",E.removeChild(F),B=C.top+C.left+(f?2000:0),t.fractions=B>21&&B<22}()})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.draggable",f.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(h){var j=this.options;return this.helper||j.disabled||f(h.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(h),this.handle?(j.iframeFix&&f(j.iframeFix===!0?"iframe":j.iframeFix).each(function(){f('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(f(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(h){var j=this.options;return this.helper=this._createHelper(h),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),f.ui.ddmanager&&(f.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,j.cursorAt&&this._adjustOffsetFromHelper(j.cursorAt),j.containment&&this._setContainment(),this._trigger("start",h)===!1?(this._clear(),!1):(this._cacheHelperProportions(),f.ui.ddmanager&&!j.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,h),this._mouseDrag(h,!0),f.ui.ddmanager&&f.ui.ddmanager.dragStart(this,h),!0)},_mouseDrag:function(h,k){this.position=this._generatePosition(h),this.positionAbs=this._convertPositionTo("absolute");if(!k){var j=this._uiHash();if(this._trigger("drag",h,j)===!1){return this._mouseUp({}),!1}this.position=j.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return f.ui.ddmanager&&f.ui.ddmanager.drag(this,h),!1},_mouseStop:function(h){var q=!1;f.ui.ddmanager&&!this.options.dropBehaviour&&(q=f.ui.ddmanager.drop(this,h)),this.dropped&&(q=this.dropped,this.dropped=!1);var n=this.element[0],k=!1;while(n&&(n=n.parentNode)){n==document&&(k=!0)}if(!k&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!q||this.options.revert=="valid"&&q||this.options.revert===!0||f.isFunction(this.options.revert)&&this.options.revert.call(this.element,q)){var j=this;f(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){j._trigger("stop",h)!==!1&&j._clear()})}else{this._trigger("stop",h)!==!1&&this._clear()}return !1},_mouseUp:function(h){return this.options.iframeFix===!0&&f("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),f.ui.ddmanager&&f.ui.ddmanager.dragStop(this,h),f.ui.mouse.prototype._mouseUp.call(this,h)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(h){var j=!this.options.handle||!f(this.options.handle,this.element).length?!0:!1;return f(this.options.handle,this.element).find("*").andSelf().each(function(){this==h.target&&(j=!0)}),j},_createHelper:function(h){var k=this.options,j=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[h])):k.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return j.parents("body").length||j.appendTo(k.appendTo=="parent"?this.element[0].parentNode:k.appendTo),j[0]!=this.element[0]&&!/(fixed|absolute)/.test(j.css("position"))&&j.css("position","absolute"),j},_adjustOffsetFromHelper:function(h){typeof h=="string"&&(h=h.split(" ")),f.isArray(h)&&(h={left:+h[0],top:+h[1]||0}),"left" in h&&(this.offset.click.left=h.left+this.margins.left),"right" in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left),"top" in h&&(this.offset.click.top=h.top+this.margins.top),"bottom" in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&f.browser.msie){h={top:0,left:0}}return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:f(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:f(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:f(window).scrollLeft())+f(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:f(window).scrollTop())+(f(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){var q=f(h.containment),n=q[0];if(!n){return}var k=q.offset(),j=f(n).css("overflow")!="hidden";this.containment=[(parseInt(f(n).css("borderLeftWidth"),10)||0)+(parseInt(f(n).css("paddingLeft"),10)||0),(parseInt(f(n).css("borderTopWidth"),10)||0)+(parseInt(f(n).css("paddingTop"),10)||0),(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(f(n).css("borderLeftWidth"),10)||0)-(parseInt(f(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(f(n).css("borderTopWidth"),10)||0)-(parseInt(f(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=q}else{h.containment.constructor==Array&&(this.containment=h.containment)}},_convertPositionTo:function(h,t){t||(t=this.position);var q=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:t.top+this.offset.relative.top*q+this.offset.parent.top*q-(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*q),left:t.left+this.offset.relative.left*q+this.offset.parent.left*q-(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*q)}},_generatePosition:function(D){var C=this.options,B=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,A=/(html|body)/i.test(B[0].tagName),z=D.pageX,y=D.pageY;if(this.originalPosition){var x;if(this.containment){if(this.relative_container){var t=this.relative_container.offset();x=[this.containment[0]+t.left,this.containment[1]+t.top,this.containment[2]+t.left,this.containment[3]+t.top]}else{x=this.containment}D.pageX-this.offset.click.left<x[0]&&(z=x[0]+this.offset.click.left),D.pageY-this.offset.click.top<x[1]&&(y=x[1]+this.offset.click.top),D.pageX-this.offset.click.left>x[2]&&(z=x[2]+this.offset.click.left),D.pageY-this.offset.click.top>x[3]&&(y=x[3]+this.offset.click.top)}if(C.grid){var q=C.grid[1]?this.originalPageY+Math.round((y-this.originalPageY)/C.grid[1])*C.grid[1]:this.originalPageY;y=x?q-this.offset.click.top<x[1]||q-this.offset.click.top>x[3]?q-this.offset.click.top<x[1]?q+C.grid[1]:q-C.grid[1]:q:q;var n=C.grid[0]?this.originalPageX+Math.round((z-this.originalPageX)/C.grid[0])*C.grid[0]:this.originalPageX;z=x?n-this.offset.click.left<x[0]||n-this.offset.click.left>x[2]?n-this.offset.click.left<x[0]?n+C.grid[0]:n-C.grid[0]:n:n}}return{top:y-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():A?0:B.scrollTop()),left:z-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(f.browser.safari&&f.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():A?0:B.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(h,k,j){return j=j||this._uiHash(),f.ui.plugin.call(this,h,[k,j]),h=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),f.Widget.prototype._trigger.call(this,h,k,j)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),f.extend(f.ui.draggable,{version:"1.8.21"}),f.ui.plugin.add("draggable","connectToSortable",{start:function(h,q){var n=f(this).data("draggable"),k=n.options,j=f.extend({},q,{item:n.element});n.sortables=[],f(k.connectToSortable).each(function(){var b=f.data(this,"sortable");b&&!b.options.disabled&&(n.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",h,j))})},stop:function(h,n){var k=f(this).data("draggable"),j=f.extend({},n,{item:k.element});f.each(k.sortables,function(){this.instance.isOver?(this.instance.isOver=0,k.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(h),this.instance.options.helper=this.instance.options._helper,k.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",h,j))})},drag:function(h,q){var n=f(this).data("draggable"),k=this,j=function(E){var D=this.offset.click.top,C=this.offset.click.left,B=this.positionAbs.top,A=this.positionAbs.left,z=E.height,y=E.width,x=E.top,t=E.left;return f.ui.isOver(B+D,A+C,x,t,z,y)};f.each(n.sortables,function(b){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=f(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return q.helper[0]},h.target=this.instance.currentItem[0],this.instance._mouseCapture(h,!0),this.instance._mouseStart(h,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",h),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(h)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",h,this.instance._uiHash(this.instance)),this.instance._mouseStop(h,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",h),n.dropped=!1)})}}),f.ui.plugin.add("draggable","cursor",{start:function(h,n){var k=f("body"),j=f(this).data("draggable").options;k.css("cursor")&&(j._cursor=k.css("cursor")),k.css("cursor",j.cursor)},stop:function(h,k){var j=f(this).data("draggable").options;j._cursor&&f("body").css("cursor",j._cursor)}}),f.ui.plugin.add("draggable","opacity",{start:function(h,n){var k=f(n.helper),j=f(this).data("draggable").options;k.css("opacity")&&(j._opacity=k.css("opacity")),k.css("opacity",j.opacity)},stop:function(h,k){var j=f(this).data("draggable").options;j._opacity&&f(k.helper).css("opacity",j._opacity)}}),f.ui.plugin.add("draggable","scroll",{start:function(h,k){var j=f(this).data("draggable");j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"&&(j.overflowOffset=j.scrollParent.offset())},drag:function(h,q){var n=f(this).data("draggable"),k=n.options,j=!1;if(n.scrollParent[0]!=document&&n.scrollParent[0].tagName!="HTML"){if(!k.axis||k.axis!="x"){n.overflowOffset.top+n.scrollParent[0].offsetHeight-h.pageY<k.scrollSensitivity?n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop+k.scrollSpeed:h.pageY-n.overflowOffset.top<k.scrollSensitivity&&(n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop-k.scrollSpeed)}if(!k.axis||k.axis!="y"){n.overflowOffset.left+n.scrollParent[0].offsetWidth-h.pageX<k.scrollSensitivity?n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft+k.scrollSpeed:h.pageX-n.overflowOffset.left<k.scrollSensitivity&&(n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft-k.scrollSpeed)}}else{if(!k.axis||k.axis!="x"){h.pageY-f(document).scrollTop()<k.scrollSensitivity?j=f(document).scrollTop(f(document).scrollTop()-k.scrollSpeed):f(window).height()-(h.pageY-f(document).scrollTop())<k.scrollSensitivity&&(j=f(document).scrollTop(f(document).scrollTop()+k.scrollSpeed))}if(!k.axis||k.axis!="y"){h.pageX-f(document).scrollLeft()<k.scrollSensitivity?j=f(document).scrollLeft(f(document).scrollLeft()-k.scrollSpeed):f(window).width()-(h.pageX-f(document).scrollLeft())<k.scrollSensitivity&&(j=f(document).scrollLeft(f(document).scrollLeft()+k.scrollSpeed))}}j!==!1&&f.ui.ddmanager&&!k.dropBehaviour&&f.ui.ddmanager.prepareOffsets(n,h)}}),f.ui.plugin.add("draggable","snap",{start:function(h,n){var k=f(this).data("draggable"),j=k.options;k.snapElements=[],f(j.snap.constructor!=String?j.snap.items||":data(draggable)":j.snap).each(function(){var q=f(this),t=q.offset();this!=k.element[0]&&k.snapElements.push({item:this,width:q.outerWidth(),height:q.outerHeight(),top:t.top,left:t.left})})},drag:function(P,O){var N=f(this).data("draggable"),M=N.options,L=M.snapTolerance,K=O.offset.left,J=K+N.helperProportions.width,I=O.offset.top,H=I+N.helperProportions.height;for(var G=N.snapElements.length-1;G>=0;G--){var F=N.snapElements[G].left,E=F+N.snapElements[G].width,D=N.snapElements[G].top,C=D+N.snapElements[G].height;if(!(F-L<K&&K<E+L&&D-L<I&&I<C+L||F-L<K&&K<E+L&&D-L<H&&H<C+L||F-L<J&&J<E+L&&D-L<I&&I<C+L||F-L<J&&J<E+L&&D-L<H&&H<C+L)){N.snapElements[G].snapping&&N.options.snap.release&&N.options.snap.release.call(N.element,P,f.extend(N._uiHash(),{snapItem:N.snapElements[G].item})),N.snapElements[G].snapping=!1;continue}if(M.snapMode!="inner"){var B=Math.abs(D-H)<=L,A=Math.abs(C-I)<=L,z=Math.abs(F-J)<=L,y=Math.abs(E-K)<=L;B&&(O.position.top=N._convertPositionTo("relative",{top:D-N.helperProportions.height,left:0}).top-N.margins.top),A&&(O.position.top=N._convertPositionTo("relative",{top:C,left:0}).top-N.margins.top),z&&(O.position.left=N._convertPositionTo("relative",{top:0,left:F-N.helperProportions.width}).left-N.margins.left),y&&(O.position.left=N._convertPositionTo("relative",{top:0,left:E}).left-N.margins.left)}var x=B||A||z||y;if(M.snapMode!="outer"){var B=Math.abs(D-I)<=L,A=Math.abs(C-H)<=L,z=Math.abs(F-K)<=L,y=Math.abs(E-J)<=L;B&&(O.position.top=N._convertPositionTo("relative",{top:D,left:0}).top-N.margins.top),A&&(O.position.top=N._convertPositionTo("relative",{top:C-N.helperProportions.height,left:0}).top-N.margins.top),z&&(O.position.left=N._convertPositionTo("relative",{top:0,left:F}).left-N.margins.left),y&&(O.position.left=N._convertPositionTo("relative",{top:0,left:E-N.helperProportions.width}).left-N.margins.left)}!N.snapElements[G].snapping&&(B||A||z||y||x)&&N.options.snap.snap&&N.options.snap.snap.call(N.element,P,f.extend(N._uiHash(),{snapItem:N.snapElements[G].item})),N.snapElements[G].snapping=B||A||z||y||x}}}),f.ui.plugin.add("draggable","stack",{start:function(h,q){var n=f(this).data("draggable").options,k=f.makeArray(f(n.stack)).sort(function(t,x){return(parseInt(f(t).css("zIndex"),10)||0)-(parseInt(f(x).css("zIndex"),10)||0)});if(!k.length){return}var j=parseInt(k[0].style.zIndex)||0;f(k).each(function(b){this.style.zIndex=j+b}),this[0].style.zIndex=j+k.length}}),f.ui.plugin.add("draggable","zIndex",{start:function(h,n){var k=f(n.helper),j=f(this).data("draggable").options;k.css("zIndex")&&(j._zIndex=k.css("zIndex")),k.css("zIndex",j.zIndex)},stop:function(h,k){var j=f(this).data("draggable").options;j._zIndex&&f(k.helper).css("zIndex",j._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var h=this.options,j=h.accept;this.isover=0,this.isout=1,this.accept=f.isFunction(j)?j:function(b){return b.is(j)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},f.ui.ddmanager.droppables[h.scope]=f.ui.ddmanager.droppables[h.scope]||[],f.ui.ddmanager.droppables[h.scope].push(this),h.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var h=f.ui.ddmanager.droppables[this.options.scope];for(var j=0;j<h.length;j++){h[j]==this&&h.splice(j,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(h,j){h=="accept"&&(this.accept=f.isFunction(j)?j:function(b){return b.is(j)}),f.Widget.prototype._setOption.apply(this,arguments)},_activate:function(h){var j=f.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),j&&this._trigger("activate",h,this.ui(j))},_deactivate:function(h){var j=f.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),j&&this._trigger("deactivate",h,this.ui(j))},_over:function(h){var j=f.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return}this.accept.call(this.element[0],j.currentItem||j.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",h,this.ui(j)))},_out:function(h){var j=f.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return}this.accept.call(this.element[0],j.currentItem||j.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",h,this.ui(j)))},_drop:function(h,n){var k=n||f.ui.ddmanager.current;if(!k||(k.currentItem||k.element)[0]==this.element[0]){return !1}var j=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var q=f.data(this,"droppable");if(q.options.greedy&&!q.options.disabled&&q.options.scope==k.options.scope&&q.accept.call(q.element[0],k.currentItem||k.element)&&f.ui.intersect(k,f.extend(q,{offset:q.element.offset()}),q.options.tolerance)){return j=!0,!1}}),j?!1:this.accept.call(this.element[0],k.currentItem||k.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",h,this.ui(k)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),f.extend(f.ui.droppable,{version:"1.8.21"}),f.ui.intersect=function(I,H,G){if(!H.offset){return !1}var F=(I.positionAbs||I.position.absolute).left,E=F+I.helperProportions.width,D=(I.positionAbs||I.position.absolute).top,C=D+I.helperProportions.height,B=H.offset.left,A=B+H.proportions.width,z=H.offset.top,y=z+H.proportions.height;switch(G){case"fit":return B<=F&&E<=A&&z<=D&&C<=y;case"intersect":return B<F+I.helperProportions.width/2&&E-I.helperProportions.width/2<A&&z<D+I.helperProportions.height/2&&C-I.helperProportions.height/2<y;case"pointer":var x=(I.positionAbs||I.position.absolute).left+(I.clickOffset||I.offset.click).left,t=(I.positionAbs||I.position.absolute).top+(I.clickOffset||I.offset.click).top,q=f.ui.isOver(t,x,z,B,H.proportions.height,H.proportions.width);return q;case"touch":return(D>=z&&D<=y||C>=z&&C<=y||D<z&&C>y)&&(F>=B&&F<=A||E>=B&&E<=A||F<B&&E>A);default:return !1}},f.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(j,y){var x=f.ui.ddmanager.droppables[j.options.scope]||[],t=y?y.type:null,q=(j.currentItem||j.element).find(":data(droppable)").andSelf();g:for(var n=0;n<x.length;n++){if(x[n].options.disabled||j&&!x[n].accept.call(x[n].element[0],j.currentItem||j.element)){continue}for(var k=0;k<q.length;k++){if(q[k]==x[n].element[0]){x[n].proportions.height=0;continue g}}x[n].visible=x[n].element.css("display")!="none";if(!x[n].visible){continue}t=="mousedown"&&x[n]._activate.call(x[n],y),x[n].offset=x[n].element.offset(),x[n].proportions={width:x[n].element[0].offsetWidth,height:x[n].element[0].offsetHeight}}},drop:function(h,k){var j=!1;return f.each(f.ui.ddmanager.droppables[h.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&f.ui.intersect(h,this,this.options.tolerance)&&(j=this._drop.call(this,k)||j),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],h.currentItem||h.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,k))}),j},dragStart:function(h,j){h.element.parents(":not(body,html)").bind("scroll.droppable",function(){h.options.refreshPositions||f.ui.ddmanager.prepareOffsets(h,j)})},drag:function(h,j){h.options.refreshPositions&&f.ui.ddmanager.prepareOffsets(h,j),f.each(f.ui.ddmanager.droppables[h.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var q=f.ui.intersect(h,this,this.options.tolerance),n=!q&&this.isover==1?"isout":q&&this.isover==0?"isover":null;if(!n){return}var k;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(k=f.data(b[0],"droppable"),k.greedyChild=n=="isover"?1:0)}k&&n=="isover"&&(k.isover=0,k.isout=1,k._out.call(k,j)),this[n]=1,this[n=="isout"?"isover":"isout"]=0,this[n=="isover"?"_over":"_out"].call(this,j),k&&n=="isout"&&(k.isout=0,k.isover=1,k._over.call(k,j))})},dragStop:function(h,j){h.element.parents(":not(body,html)").unbind("scroll.droppable"),h.options.refreshPositions||f.ui.ddmanager.prepareOffsets(h,j)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var k=this,z=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!z.aspectRatio,aspectRatio:z.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:z.helper||z.ghost||z.animate?z.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=z.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var y=this.handles.split(",");this.handles={};for(var x=0;x<y.length;x++){var t=f.trim(y[x]),q="ui-resizable-"+t,n=f('<div class="ui-resizable-handle '+q+'"></div>');n.css({zIndex:z.zIndex}),"se"==t&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[t]=".ui-resizable-"+t,this.element.append(n)}}this._renderAxis=function(A){A=A||this.element;for(var E in this.handles){this.handles[E].constructor==String&&(this.handles[E]=f(this.handles[E],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var D=f(this.handles[E],this.element),C=0;C=/sw|ne|nw|se|n|s/.test(E)?D.outerHeight():D.outerWidth();var B=["padding",/ne|nw|n/.test(E)?"Top":/se|sw|s/.test(E)?"Bottom":/^e$/.test(E)?"Right":"Left"].join("");A.css(B,C),this._proportionallyResize()}if(!f(this.handles[E]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!k.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}k.axis=b&&b[1]?b[1]:"se"}}),z.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(z.disabled){return}f(this).removeClass("ui-resizable-autohide"),k._handles.show()},function(){if(z.disabled){return}k.resizing||(f(this).addClass("ui-resizable-autohide"),k._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var k=function(q){f(q).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){k(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),k(this.originalElement),this},_mouseCapture:function(k){var q=!1;for(var n in this.handles){f(this.handles[n])[0]==k.target&&(q=!0)}return !this.options.disabled&&q},_mouseStart:function(k){var z=this.options,y=this.element.position(),x=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(x.is(".ui-draggable")||/absolute/.test(x.css("position")))&&x.css({position:"absolute",top:y.top,left:y.left}),this._renderProxy();var t=j(this.helper.css("left")),q=j(this.helper.css("top"));z.containment&&(t+=f(z.containment).scrollLeft()||0,q+=f(z.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:q},this.size=this._helper?{width:x.outerWidth(),height:x.outerHeight()}:{width:x.width(),height:x.height()},this.originalSize=this._helper?{width:x.outerWidth(),height:x.outerHeight()}:{width:x.width(),height:x.height()},this.originalPosition={left:t,top:q},this.sizeDiff={width:x.outerWidth()-x.width(),height:x.outerHeight()-x.height()},this.originalMousePosition={left:k.pageX,top:k.pageY},this.aspectRatio=typeof z.aspectRatio=="number"?z.aspectRatio:this.originalSize.width/this.originalSize.height||1;var n=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",n=="auto"?this.axis+"-resize":n),x.addClass("ui-resizable-resizing"),this._propagate("start",k),!0},_mouseDrag:function(H){var G=this.helper,F=this.options,E={},D=this,C=this.originalMousePosition,B=this.axis,A=H.pageX-C.left||0,z=H.pageY-C.top||0,y=this._change[B];if(!y){return !1}var x=y.apply(this,[H,A,z]),t=f.browser.msie&&f.browser.version<7,q=this.sizeDiff;this._updateVirtualBoundaries(H.shiftKey);if(this._aspectRatio||H.shiftKey){x=this._updateRatio(x,H)}return x=this._respectSize(x,H),this._propagate("resize",H),G.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(x),this._trigger("resize",H,this.ui()),!1},_mouseStop:function(D){this.resizing=!1;var C=this.options,B=this;if(this._helper){var A=this._proportionallyResizeElements,z=A.length&&/textarea/i.test(A[0].nodeName),y=z&&f.ui.hasScroll(A[0],"left")?0:B.sizeDiff.height,x=z?0:B.sizeDiff.width,t={width:B.helper.width()-x,height:B.helper.height()-y},q=parseInt(B.element.css("left"),10)+(B.position.left-B.originalPosition.left)||null,n=parseInt(B.element.css("top"),10)+(B.position.top-B.originalPosition.top)||null;C.animate||this.element.css(f.extend(t,{top:n,left:q})),B.helper.height(B.size.height),B.helper.width(B.size.width),this._helper&&!C.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",D),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(n){var k=this.options,z,y,x,t,q;q={minWidth:h(k.minWidth)?k.minWidth:0,maxWidth:h(k.maxWidth)?k.maxWidth:Infinity,minHeight:h(k.minHeight)?k.minHeight:0,maxHeight:h(k.maxHeight)?k.maxHeight:Infinity};if(this._aspectRatio||n){z=q.minHeight*this.aspectRatio,x=q.minWidth/this.aspectRatio,y=q.maxHeight*this.aspectRatio,t=q.maxWidth/this.aspectRatio,z>q.minWidth&&(q.minWidth=z),x>q.minHeight&&(q.minHeight=x),y<q.maxWidth&&(q.maxWidth=y),t<q.maxHeight&&(q.maxHeight=t)}this._vBoundaries=q},_updateCache:function(n){var k=this.options;this.offset=this.helper.offset(),h(n.left)&&(this.position.left=n.left),h(n.top)&&(this.position.top=n.top),h(n.height)&&(this.size.height=n.height),h(n.width)&&(this.size.width=n.width)},_updateRatio:function(n,k){var y=this.options,x=this.position,t=this.size,q=this.axis;return h(n.height)?n.width=n.height*this.aspectRatio:h(n.width)&&(n.height=n.width/this.aspectRatio),q=="sw"&&(n.left=x.left+(t.width-n.width),n.top=null),q=="nw"&&(n.top=x.top+(t.height-n.height),n.left=x.left+(t.width-n.width)),n},_respectSize:function(J,I){var H=this.helper,G=this._vBoundaries,F=this._aspectRatio||I.shiftKey,E=this.axis,D=h(J.width)&&G.maxWidth&&G.maxWidth<J.width,C=h(J.height)&&G.maxHeight&&G.maxHeight<J.height,B=h(J.width)&&G.minWidth&&G.minWidth>J.width,A=h(J.height)&&G.minHeight&&G.minHeight>J.height;B&&(J.width=G.minWidth),A&&(J.height=G.minHeight),D&&(J.width=G.maxWidth),C&&(J.height=G.maxHeight);var z=this.originalPosition.left+this.originalSize.width,y=this.position.top+this.size.height,x=/sw|nw|w/.test(E),t=/nw|ne|n/.test(E);B&&x&&(J.left=z-G.minWidth),D&&x&&(J.left=z-G.maxWidth),A&&t&&(J.top=y-G.minHeight),C&&t&&(J.top=y-G.maxHeight);var q=!J.width&&!J.height;return q&&!J.left&&J.top?J.top=null:q&&!J.top&&J.left&&(J.left=null),J},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var y=this.helper||this.element;for(var x=0;x<this._proportionallyResizeElements.length;x++){var t=this._proportionallyResizeElements[x];if(!this.borderDif){var q=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];this.borderDif=f.map(q,function(A,z){var C=parseInt(A,10)||0,B=parseInt(n[z],10)||0;return C+B})}if(!f.browser.msie||!f(y).is(":hidden")&&!f(y).parents(":hidden").length){t.css({height:y.height()-this.borderDif[0]-this.borderDif[2]||0,width:y.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var k=this.element,x=this.options;this.elementOffset=k.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var t=f.browser.msie&&f.browser.version<7,q=t?1:0,n=t?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-q+"px",top:this.elementOffset.top-q+"px",zIndex:++x.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(n,k,q){return{width:this.originalSize.width+k}},w:function(n,k,y){var x=this.options,t=this.originalSize,q=this.originalPosition;return{left:q.left+k,width:t.width-k}},n:function(n,k,y){var x=this.options,t=this.originalSize,q=this.originalPosition;return{top:q.top+y,height:t.height-y}},s:function(n,k,q){return{height:this.originalSize.height+q}},se:function(k,q,n){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[k,q,n]))},sw:function(k,q,n){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[k,q,n]))},ne:function(k,q,n){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[k,q,n]))},nw:function(k,q,n){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[k,q,n]))}},_propagate:function(k,n){f.ui.plugin.call(this,k,[n,this.ui()]),k!="resize"&&this._trigger(k,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(k,x){var t=f(this).data("resizable"),q=t.options,n=function(y){f(y).each(function(){var z=f(this);z.data("resizable-alsoresize",{width:parseInt(z.width(),10),height:parseInt(z.height(),10),left:parseInt(z.css("left"),10),top:parseInt(z.css("top"),10)})})};typeof q.alsoResize=="object"&&!q.alsoResize.parentNode?q.alsoResize.length?(q.alsoResize=q.alsoResize[0],n(q.alsoResize)):f.each(q.alsoResize,function(b){n(b)}):n(q.alsoResize)},resize:function(k,A){var z=f(this).data("resizable"),y=z.options,x=z.originalSize,t=z.originalPosition,q={height:z.size.height-x.height||0,width:z.size.width-x.width||0,top:z.position.top-t.top||0,left:z.position.left-t.left||0},n=function(B,C){f(B).each(function(){var D=f(this),G=f(this).data("resizable-alsoresize"),F={},E=C&&C.length?C:D.parents(A.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(E,function(I,H){var J=(G[H]||0)+(q[H]||0);J&&J>=0&&(F[H]=J||null)}),D.css(F)})};typeof y.alsoResize=="object"&&!y.alsoResize.nodeType?f.each(y.alsoResize,function(C,B){n(C,B)}):n(y.alsoResize)},stop:function(k,n){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(E,D){var C=f(this).data("resizable"),B=C.options,A=C._proportionallyResizeElements,z=A.length&&/textarea/i.test(A[0].nodeName),y=z&&f.ui.hasScroll(A[0],"left")?0:C.sizeDiff.height,x=z?0:C.sizeDiff.width,t={width:C.size.width-x,height:C.size.height-y},q=parseInt(C.element.css("left"),10)+(C.position.left-C.originalPosition.left)||null,n=parseInt(C.element.css("top"),10)+(C.position.top-C.originalPosition.top)||null;C.element.animate(f.extend(t,n&&q?{top:n,left:q}:{}),{duration:B.animateDuration,easing:B.animateEasing,step:function(){var b={width:parseInt(C.element.css("width"),10),height:parseInt(C.element.css("height"),10),top:parseInt(C.element.css("top"),10),left:parseInt(C.element.css("left"),10)};A&&A.length&&f(A[0]).css({width:b.width,height:b.height}),C._updateCache(b),C._propagate("resize",E)}})}}),f.ui.plugin.add("resizable","containment",{start:function(I,H){var G=f(this).data("resizable"),F=G.options,E=G.element,D=F.containment,C=D instanceof f?D.get(0):/parent/.test(D)?E.parent().get(0):D;if(!C){return}G.containerElement=f(C);if(/document/.test(D)||D==document){G.containerOffset={left:0,top:0},G.containerPosition={left:0,top:0},G.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var B=f(C),A=[];f(["Top","Right","Left","Bottom"]).each(function(n,k){A[n]=j(B.css("padding"+k))}),G.containerOffset=B.offset(),G.containerPosition=B.position(),G.containerSize={height:B.innerHeight()-A[3],width:B.innerWidth()-A[1]};var z=G.containerOffset,y=G.containerSize.height,x=G.containerSize.width,t=f.ui.hasScroll(C,"left")?C.scrollWidth:x,q=f.ui.hasScroll(C)?C.scrollHeight:y;G.parentData={element:C,left:z.left,top:z.top,width:t,height:q}}},resize:function(J,I){var H=f(this).data("resizable"),G=H.options,F=H.containerSize,E=H.containerOffset,D=H.size,C=H.position,B=H._aspectRatio||J.shiftKey,A={top:0,left:0},z=H.containerElement;z[0]!=document&&/static/.test(z.css("position"))&&(A=E),C.left<(H._helper?E.left:0)&&(H.size.width=H.size.width+(H._helper?H.position.left-E.left:H.position.left-A.left),B&&(H.size.height=H.size.width/H.aspectRatio),H.position.left=G.helper?E.left:0),C.top<(H._helper?E.top:0)&&(H.size.height=H.size.height+(H._helper?H.position.top-E.top:H.position.top),B&&(H.size.width=H.size.height*H.aspectRatio),H.position.top=H._helper?E.top:0),H.offset.left=H.parentData.left+H.position.left,H.offset.top=H.parentData.top+H.position.top;var y=Math.abs((H._helper?H.offset.left-A.left:H.offset.left-A.left)+H.sizeDiff.width),x=Math.abs((H._helper?H.offset.top-A.top:H.offset.top-E.top)+H.sizeDiff.height),t=H.containerElement.get(0)==H.element.parent().get(0),q=/relative|absolute/.test(H.containerElement.css("position"));t&&q&&(y-=H.parentData.left),y+H.size.width>=H.parentData.width&&(H.size.width=H.parentData.width-y,B&&(H.size.height=H.size.width/H.aspectRatio)),x+H.size.height>=H.parentData.height&&(H.size.height=H.parentData.height-x,B&&(H.size.width=H.size.height*H.aspectRatio))},stop:function(F,E){var D=f(this).data("resizable"),C=D.options,B=D.position,A=D.containerOffset,z=D.containerPosition,y=D.containerElement,x=f(D.helper),t=x.offset(),q=x.outerWidth()-D.sizeDiff.width,n=x.outerHeight()-D.sizeDiff.height;D._helper&&!C.animate&&/relative/.test(y.css("position"))&&f(this).css({left:t.left-z.left-A.left,width:q,height:n}),D._helper&&!C.animate&&/static/.test(y.css("position"))&&f(this).css({left:t.left-z.left-A.left,width:q,height:n})}}),f.ui.plugin.add("resizable","ghost",{start:function(k,x){var t=f(this).data("resizable"),q=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:0.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof q.ghost=="string"?q.ghost:""),t.ghost.appendTo(t.helper)},resize:function(k,t){var q=f(this).data("resizable"),n=q.options;q.ghost&&q.ghost.css({position:"relative",height:q.size.height,width:q.size.width})},stop:function(k,t){var q=f(this).data("resizable"),n=q.options;q.ghost&&q.helper&&q.helper.get(0).removeChild(q.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(E,D){var C=f(this).data("resizable"),B=C.options,A=C.size,z=C.originalSize,y=C.originalPosition,x=C.axis,t=B._aspectRatio||E.shiftKey;B.grid=typeof B.grid=="number"?[B.grid,B.grid]:B.grid;var q=Math.round((A.width-z.width)/(B.grid[0]||1))*(B.grid[0]||1),n=Math.round((A.height-z.height)/(B.grid[1]||1))*(B.grid[1]||1);/^(se|s|e)$/.test(x)?(C.size.width=z.width+q,C.size.height=z.height+n):/^(ne)$/.test(x)?(C.size.width=z.width+q,C.size.height=z.height+n,C.position.top=y.top-n):/^(sw)$/.test(x)?(C.size.width=z.width+q,C.size.height=z.height+n,C.position.left=y.left-q):(C.size.width=z.width+q,C.size.height=z.height+n,C.position.top=y.top-n,C.position.left=y.left-q)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.selectable",f.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var h=this;this.element.addClass("ui-selectable"),this.dragged=!1;var j;this.refresh=function(){j=f(h.options.filter,h.element[0]),j.addClass("ui-selectee"),j.each(function(){var k=f(this),n=k.offset();f.data(this,"selectable-item",{element:this,$element:k,left:n.left,top:n.top,right:n.left+k.outerWidth(),bottom:n.top+k.outerHeight(),startselected:!1,selected:k.hasClass("ui-selected"),selecting:k.hasClass("ui-selecting"),unselecting:k.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=j.addClass("ui-selectee"),this._mouseInit(),this.helper=f("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(h){var k=this;this.opos=[h.pageX,h.pageY];if(this.options.disabled){return}var j=this.options;this.selectees=f(j.filter,this.element[0]),this._trigger("start",h),f(j.appendTo).append(this.helper),this.helper.css({left:h.clientX,top:h.clientY,width:0,height:0}),j.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=f.data(this,"selectable-item");b.startselected=!0,!h.metaKey&&!h.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,k._trigger("unselecting",h,{unselecting:b.element}))}),f(h.target).parents().andSelf().each(function(){var n=f.data(this,"selectable-item");if(n){var b=!h.metaKey&&!h.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),n.unselecting=!b,n.selecting=b,n.selected=b,b?k._trigger("selecting",h,{selecting:n.element}):k._trigger("unselecting",h,{unselecting:n.element}),!1}})},_mouseDrag:function(j){var z=this;this.dragged=!0;if(this.options.disabled){return}var y=this.options,x=this.opos[0],t=this.opos[1],q=j.pageX,n=j.pageY;if(x>q){var k=q;q=x,x=k}if(t>n){var k=n;n=t,t=k}return this.helper.css({left:x,top:t,width:q-x,height:n-t}),this.selectees.each(function(){var h=f.data(this,"selectable-item");if(!h||h.element==z.element[0]){return}var b=!1;y.tolerance=="touch"?b=!(h.left>q||h.right<x||h.top>n||h.bottom<t):y.tolerance=="fit"&&(b=h.left>x&&h.right<q&&h.top>t&&h.bottom<n),b?(h.selected&&(h.$element.removeClass("ui-selected"),h.selected=!1),h.unselecting&&(h.$element.removeClass("ui-unselecting"),h.unselecting=!1),h.selecting||(h.$element.addClass("ui-selecting"),h.selecting=!0,z._trigger("selecting",j,{selecting:h.element}))):(h.selecting&&((j.metaKey||j.ctrlKey)&&h.startselected?(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.$element.addClass("ui-selected"),h.selected=!0):(h.$element.removeClass("ui-selecting"),h.selecting=!1,h.startselected&&(h.$element.addClass("ui-unselecting"),h.unselecting=!0),z._trigger("unselecting",j,{unselecting:h.element}))),h.selected&&!j.metaKey&&!j.ctrlKey&&!h.startselected&&(h.$element.removeClass("ui-selected"),h.selected=!1,h.$element.addClass("ui-unselecting"),h.unselecting=!0,z._trigger("unselecting",j,{unselecting:h.element})))}),!1},_mouseStop:function(h){var k=this;this.dragged=!1;var j=this.options;return f(".ui-unselecting",this.element[0]).each(function(){var b=f.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,k._trigger("unselected",h,{unselected:b.element})}),f(".ui-selecting",this.element[0]).each(function(){var b=f.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,k._trigger("selected",h,{selected:b.element})}),this._trigger("stop",h),this.helper.remove(),!1}}),f.extend(f.ui.selectable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.sortable",f.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){f.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var h=this.items.length-1;h>=0;h--){this.items[h].item.removeData(this.widgetName+"-item")}return this},_setOption:function(h,j){h==="disabled"?(this.options[h]=j,this.widget()[j?"addClass":"removeClass"]("ui-sortable-disabled")):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(j,y){var x=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(j);var t=null,q=this,n=f(j.target).parents().each(function(){if(f.data(this,x.widgetName+"-item")==q){return t=f(this),!1}});f.data(j.target,x.widgetName+"-item")==q&&(t=f(j.target));if(!t){return !1}if(this.options.handle&&!y){var k=!1;f(this.options.handle,t).find("*").andSelf().each(function(){this==j.target&&(k=!0)});if(!k){return !1}}return this.currentItem=t,this._removeCurrentsFromItems(),!0},_mouseStart:function(h,t,q){var n=this.options,k=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(f("body").css("cursor")&&(this._storedCursor=f("body").css("cursor")),f("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!q){for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("activate",h,k._uiHash(this))}}return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!n.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(j){this.position=this._generatePosition(j),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var y=this.options,x=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-j.pageY<y.scrollSensitivity?this.scrollParent[0].scrollTop=x=this.scrollParent[0].scrollTop+y.scrollSpeed:j.pageY-this.overflowOffset.top<y.scrollSensitivity&&(this.scrollParent[0].scrollTop=x=this.scrollParent[0].scrollTop-y.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-j.pageX<y.scrollSensitivity?this.scrollParent[0].scrollLeft=x=this.scrollParent[0].scrollLeft+y.scrollSpeed:j.pageX-this.overflowOffset.left<y.scrollSensitivity&&(this.scrollParent[0].scrollLeft=x=this.scrollParent[0].scrollLeft-y.scrollSpeed)):(j.pageY-f(document).scrollTop()<y.scrollSensitivity?x=f(document).scrollTop(f(document).scrollTop()-y.scrollSpeed):f(window).height()-(j.pageY-f(document).scrollTop())<y.scrollSensitivity&&(x=f(document).scrollTop(f(document).scrollTop()+y.scrollSpeed)),j.pageX-f(document).scrollLeft()<y.scrollSensitivity?x=f(document).scrollLeft(f(document).scrollLeft()-y.scrollSpeed):f(window).width()-(j.pageX-f(document).scrollLeft())<y.scrollSensitivity&&(x=f(document).scrollLeft(f(document).scrollLeft()+y.scrollSpeed))),x!==!1&&f.ui.ddmanager&&!y.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,j)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var t=this.items.length-1;t>=0;t--){var q=this.items[t],n=q.item[0],k=this._intersectsWithPointer(q);if(!k){continue}if(n!=this.currentItem[0]&&this.placeholder[k==1?"next":"prev"]()[0]!=n&&!f.ui.contains(this.placeholder[0],n)&&(this.options.type=="semi-dynamic"?!f.ui.contains(this.element[0],n):!0)){this.direction=k==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(q)){this._rearrange(j,q)}else{break}this._trigger("change",j,this._uiHash());break}}return this._contactContainers(j),f.ui.ddmanager&&f.ui.ddmanager.drag(this,j),this._trigger("sort",j,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,n){if(!h){return}f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,h);if(this.options.revert){var k=this,j=k.placeholder.offset();k.reverting=!0,f(this.helper).animate({left:j.left-this.offset.parent.left-k.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:j.top-this.offset.parent.top-k.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){k._clear(h)})}else{this._clear(h,n)}return !1},cancel:function(){var h=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("deactivate",null,h._uiHash(this)),this.containers[j].containerCache.over&&(this.containers[j]._trigger("out",null,h._uiHash(this)),this.containers[j].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(h){var k=this._getItemsAsjQuery(h&&h.connected),j=[];return h=h||{},f(k).each(function(){var b=(f(h.item||this).attr(h.attribute||"id")||"").match(h.expression||/(.+)[-=_](.+)/);b&&j.push((h.key||b[1]+"[]")+"="+(h.key&&h.expression?b[1]:b[2]))}),!j.length&&h.key&&j.push(h.key+"="),j.join("&")},toArray:function(h){var k=this._getItemsAsjQuery(h&&h.connected),j=[];return h=h||{},k.each(function(){j.push(f(h.item||this).attr(h.attribute||"id")||"")}),j},_intersectsWith:function(F){var E=this.positionAbs.left,D=E+this.helperProportions.width,C=this.positionAbs.top,B=C+this.helperProportions.height,A=F.left,z=A+F.width,y=F.top,x=y+F.height,t=this.offset.click.top,q=this.offset.click.left,n=C+t>y&&C+t<x&&E+q>A&&E+q<z;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>F[this.floating?"width":"height"]?n:A<E+this.helperProportions.width/2&&D-this.helperProportions.width/2<z&&y<C+this.helperProportions.height/2&&B-this.helperProportions.height/2<x},_intersectsWithPointer:function(h){var t=this.options.axis==="x"||f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height),q=this.options.axis==="y"||f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width),n=t&&q,k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return n?this.floating?j&&j=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(h){var q=f.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),n=f.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return this.floating&&j?j=="right"&&n||j=="left"&&!n:k&&(k=="down"&&q||k=="up"&&!q)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(B){var A=this,z=[],y=[],x=this._connectWith();if(x&&B){for(var t=x.length-1;t>=0;t--){var q=f(x[t]);for(var n=q.length-1;n>=0;n--){var k=f.data(q[n],this.widgetName);k&&k!=this&&!k.options.disabled&&y.push([f.isFunction(k.options.items)?k.options.items.call(k.element):f(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}y.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var t=y.length-1;t>=0;t--){y[t][0].each(function(){z.push(this)})}return f(z)},_removeCurrentsFromItems:function(){var j=this.currentItem.find(":data("+this.widgetName+"-item)");for(var h=0;h<this.items.length;h++){for(var k=0;k<j.length;k++){j[k]==this.items[h].item[0]&&this.items.splice(h,1)}}},_refreshItems:function(H){this.items=[],this.containers=[this];var G=this.items,F=this,E=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],H,{item:this.currentItem}):f(this.options.items,this.element),this]],D=this._connectWith();if(D&&this.ready){for(var C=D.length-1;C>=0;C--){var B=f(D[C]);for(var A=B.length-1;A>=0;A--){var z=f.data(B[A],this.widgetName);z&&z!=this&&!z.options.disabled&&(E.push([f.isFunction(z.options.items)?z.options.items.call(z.element[0],H,{item:this.currentItem}):f(z.options.items,z.element),z]),this.containers.push(z))}}}for(var C=E.length-1;C>=0;C--){var y=E[C][1],x=E[C][0];for(var A=0,t=x.length;A<t;A++){var q=f(x[A]);q.data(this.widgetName+"-item",y),G.push({item:q,instance:y,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var q=this.items.length-1;q>=0;q--){var n=this.items[q];if(n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0]){continue}var k=this.options.toleranceElement?f(this.options.toleranceElement,n.item):n.item;h||(n.width=k.outerWidth(),n.height=k.outerHeight());var j=k.offset();n.left=j.left,n.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var q=this.containers.length-1;q>=0;q--){var j=this.containers[q].element.offset();this.containers[q].containerCache.left=j.left,this.containers[q].containerCache.top=j.top,this.containers[q].containerCache.width=this.containers[q].element.outerWidth(),this.containers[q].containerCache.height=this.containers[q].element.outerHeight()}}return this},_createPlaceholder:function(h){var n=h||this,k=n.options;if(!k.placeholder||k.placeholder.constructor==String){var j=k.placeholder;k.placeholder={element:function(){var q=f(document.createElement(n.currentItem[0].nodeName)).addClass(j||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return j||(q.style.visibility="hidden"),q},update:function(t,q){if(j&&!k.forcePlaceholderSize){return}q.height()||q.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),q.width()||q.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=f(k.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),k.placeholder.update(n,n.placeholder)},_contactContainers:function(B){var A=null,z=null;for(var y=this.containers.length-1;y>=0;y--){if(f.ui.contains(this.currentItem[0],this.containers[y].element[0])){continue}if(this._intersectsWith(this.containers[y].containerCache)){if(A&&f.ui.contains(this.containers[y].element[0],A.element[0])){continue}A=this.containers[y],z=y}else{this.containers[y].containerCache.over&&(this.containers[y]._trigger("out",B,this._uiHash(this)),this.containers[y].containerCache.over=0)}}if(!A){return}if(this.containers.length===1){this.containers[z]._trigger("over",B,this._uiHash(this)),this.containers[z].containerCache.over=1}else{if(this.currentContainer!=this.containers[z]){var x=10000,t=null,q=this.positionAbs[this.containers[z].floating?"left":"top"];for(var n=this.items.length-1;n>=0;n--){if(!f.ui.contains(this.containers[z].element[0],this.items[n].item[0])){continue}var k=this.containers[z].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;Math.abs(k-q)<x&&(x=Math.abs(k-q),t=this.items[n],this.direction=k-q>0?"down":"up")}if(!t&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[z],t?this._rearrange(B,t,null,!0):this._rearrange(B,null,this.containers[z].element,!0),this._trigger("change",B,this._uiHash()),this.containers[z]._trigger("change",B,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[z]._trigger("over",B,this._uiHash(this)),this.containers[z].containerCache.over=1}}},_createHelper:function(h){var k=this.options,j=f.isFunction(k.helper)?f(k.helper.apply(this.element[0],[h,this.currentItem])):k.helper=="clone"?this.currentItem.clone():this.currentItem;return j.parents("body").length||f(k.appendTo!="parent"?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(j[0]),j[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(j[0].style.width==""||k.forceHelperSize)&&j.width(this.currentItem.width()),(j[0].style.height==""||k.forceHelperSize)&&j.height(this.currentItem.height()),j},_adjustOffsetFromHelper:function(h){typeof h=="string"&&(h=h.split(" ")),f.isArray(h)&&(h={left:+h[0],top:+h[1]||0}),"left" in h&&(this.offset.click.left=h.left+this.margins.left),"right" in h&&(this.offset.click.left=this.helperProportions.width-h.right+this.margins.left),"top" in h&&(this.offset.click.top=h.top+this.margins.top),"bottom" in h&&(this.offset.click.top=this.helperProportions.height-h.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var h=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&f.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(h.left+=this.scrollParent.scrollLeft(),h.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&f.browser.msie){h={top:0,left:0}}return{top:h.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:h.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(f(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)){var n=f(h.containment)[0],k=f(h.containment).offset(),j=f(n).css("overflow")!="hidden";this.containment=[k.left+(parseInt(f(n).css("borderLeftWidth"),10)||0)+(parseInt(f(n).css("paddingLeft"),10)||0)-this.margins.left,k.top+(parseInt(f(n).css("borderTopWidth"),10)||0)+(parseInt(f(n).css("paddingTop"),10)||0)-this.margins.top,k.left+(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(f(n).css("borderLeftWidth"),10)||0)-(parseInt(f(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,k.top+(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(f(n).css("borderTopWidth"),10)||0)-(parseInt(f(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,t){t||(t=this.position);var q=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:t.top+this.offset.relative.top*q+this.offset.parent.top*q-(f.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*q),left:t.left+this.offset.relative.left*q+this.offset.parent.left*q-(f.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*q)}},_generatePosition:function(j){var z=this.options,y=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!f.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,x=/(html|body)/i.test(y[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var t=j.pageX,q=j.pageY;if(this.originalPosition){this.containment&&(j.pageX-this.offset.click.left<this.containment[0]&&(t=this.containment[0]+this.offset.click.left),j.pageY-this.offset.click.top<this.containment[1]&&(q=this.containment[1]+this.offset.click.top),j.pageX-this.offset.click.left>this.containment[2]&&(t=this.containment[2]+this.offset.click.left),j.pageY-this.offset.click.top>this.containment[3]&&(q=this.containment[3]+this.offset.click.top));if(z.grid){var n=this.originalPageY+Math.round((q-this.originalPageY)/z.grid[1])*z.grid[1];q=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?n+z.grid[1]:n-z.grid[1]:n:n;var k=this.originalPageX+Math.round((t-this.originalPageX)/z.grid[0])*z.grid[0];t=this.containment?k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2]?k-this.offset.click.left<this.containment[0]?k+z.grid[0]:k-z.grid[0]:k:k}}return{top:q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(f.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():x?0:y.scrollTop()),left:t-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(f.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():x?0:y.scrollLeft())}},_rearrange:function(j,h,t,q){t?t[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,k=this.counter;window.setTimeout(function(){k==n.counter&&n.refreshPositions(!q)},0)},_clear:function(h,q){this.reverting=!1;var n=[],k=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var j in this._storedCSS){if(this._storedCSS[j]=="auto"||this._storedCSS[j]=="static"){this._storedCSS[j]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!q&&n.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!q&&n.push(function(b){this._trigger("update",b,this._uiHash())});if(!f.ui.contains(this.element[0],this.currentItem[0])){q||n.push(function(b){this._trigger("remove",b,this._uiHash())});for(var j=this.containers.length-1;j>=0;j--){f.ui.contains(this.containers[j].element[0],this.currentItem[0])&&!q&&(n.push(function(b){return function(t){b._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[j])),n.push(function(b){return function(t){b._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[j])))}}for(var j=this.containers.length-1;j>=0;j--){q||n.push(function(b){return function(t){b._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over&&(n.push(function(b){return function(t){b._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over=0)}this._storedCursor&&f("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!q){this._trigger("beforeStop",h,this._uiHash());for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return !1}q||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!q){for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){f.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(h){var j=h||this;return{helper:j.helper,placeholder:j.placeholder||f([]),position:j.position,originalPosition:j.originalPosition,offset:j.positionAbs,item:j.currentItem,sender:h?h.element:null}}}),f.extend(f.ui.sortable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var h=this,n=h.options;h.running=0,h.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),h.headers=h.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(n.disabled){return}f(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled){return}f(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled){return}f(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled){return}f(this).removeClass("ui-state-focus")}),h.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var k=h.element.find("a").filter(n.navigationFilter).eq(0);if(k.length){var j=k.closest(".ui-accordion-header");j.length?h.active=j:h.active=k.closest(".ui-accordion-content").prev()}}h.active=h._findActive(h.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),h.active.next().addClass("ui-accordion-content-active"),h._createIcons(),h.resize(),h.element.attr("role","tablist"),h.headers.attr("role","tab").bind("keydown.accordion",function(b){return h._keydown(b)}).next().attr("role","tabpanel"),h.headers.not(h.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),h.active.length?h.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):h.headers.eq(0).attr("tabIndex",0),f.browser.safari||h.headers.find("a").attr("tabIndex",-1),n.event&&h.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(b){h._clickHandler.call(h,b,this),b.preventDefault()})},_createIcons:function(){var h=this.options;h.icons&&(f("<span></span>").addClass("ui-icon "+h.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(h.icons.header).toggleClass(h.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var h=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var j=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(h.autoHeight||h.fillHeight)&&j.css("height",""),f.Widget.prototype.destroy.call(this)},_setOption:function(h,j){f.Widget.prototype._setOption.apply(this,arguments),h=="active"&&this.activate(j),h=="icons"&&(this._destroyIcons(),j&&this._createIcons()),h=="disabled"&&this.headers.add(this.headers.next())[j?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(this.options.disabled||h.altKey||h.ctrlKey){return}var q=f.ui.keyCode,n=this.headers.length,k=this.headers.index(h.target),j=!1;switch(h.keyCode){case q.RIGHT:case q.DOWN:j=this.headers[(k+1)%n];break;case q.LEFT:case q.UP:j=this.headers[(k-1+n)%n];break;case q.SPACE:case q.ENTER:this._clickHandler({target:h.target},h.target),h.preventDefault()}return j?(f(h.target).attr("tabIndex",-1),f(j).attr("tabIndex",0),j.focus(),!1):!0},resize:function(){var h=this.options,k;if(h.fillSpace){if(f.browser.msie){var j=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}k=this.element.parent().height(),f.browser.msie&&this.element.parent().css("overflow",j),this.headers.each(function(){k-=f(this).outerHeight(!0)}),this.headers.next().each(function(){f(this).height(Math.max(0,k-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")}else{h.autoHeight&&(k=0,this.headers.next().each(function(){k=Math.max(k,f(this).height("").height())}).height(k))}return this},activate:function(j){this.options.active=j;var h=this._findActive(j)[0];return this._clickHandler({target:h},h),this},_findActive:function(h){return h?typeof h=="number"?this.headers.filter(":eq("+h+")"):this.headers.not(this.headers.not(h)):h===!1?f([]):this.headers.filter(":eq(0)")},_clickHandler:function(D,C){var B=this.options;if(B.disabled){return}if(!D.target){if(!B.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(B.icons.headerSelected).addClass(B.icons.header),this.active.next().addClass("ui-accordion-content-active");var A=this.active.next(),z={options:B,newHeader:f([]),oldHeader:B.active,newContent:f([]),oldContent:A},y=this.active=f([]);this._toggle(y,A,z);return}var x=f(D.currentTarget||C),t=x[0]===this.active[0];B.active=B.collapsible&&t?!1:this.headers.index(x);if(this.running||!B.collapsible&&t){return}var q=this.active,y=x.next(),A=this.active.next(),z={options:B,newHeader:t&&B.collapsible?f([]):x,oldHeader:this.active,newContent:t&&B.collapsible?f([]):y,oldContent:A},n=this.headers.index(this.active[0])>this.headers.index(x[0]);this.active=t?f([]):x,this._toggle(y,A,z,t,n),q.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(B.icons.headerSelected).addClass(B.icons.header),t||(x.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(B.icons.header).addClass(B.icons.headerSelected),x.next().addClass("ui-accordion-content-active"));return},_toggle:function(F,E,D,C,B){var A=this,z=A.options;A.toShow=F,A.toHide=E,A.data=D;var y=function(){if(!A){return}return A._completed.apply(A,arguments)};A._trigger("changestart",null,A.data),A.running=E.size()===0?F.size():E.size();if(z.animated){var x={};z.collapsible&&C?x={toShow:f([]),toHide:E,complete:y,down:B,autoHeight:z.autoHeight||z.fillSpace}:x={toShow:F,toHide:E,complete:y,down:B,autoHeight:z.autoHeight||z.fillSpace},z.proxied||(z.proxied=z.animated),z.proxiedDuration||(z.proxiedDuration=z.duration),z.animated=f.isFunction(z.proxied)?z.proxied(x):z.proxied,z.duration=f.isFunction(z.proxiedDuration)?z.proxiedDuration(x):z.proxiedDuration;var t=f.ui.accordion.animations,q=z.duration,n=z.animated;n&&!t[n]&&!f.easing[n]&&(n="slide"),t[n]||(t[n]=function(b){this.slide(b,{easing:n,duration:q||700})}),t[n](x)}else{z.collapsible&&C?F.toggle():(E.hide(),F.show()),y(!0)}E.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),F.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),f.extend(f.ui.accordion,{version:"1.8.21",animations:{slide:function(B,A){B=f.extend({easing:"swing",duration:300},B,A);if(!B.toHide.size()){B.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},B);return}if(!B.toShow.size()){B.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},B);return}var z=B.toShow.css("overflow"),y=0,x={},t={},q=["height","paddingTop","paddingBottom"],n,k=B.toShow;n=k[0].style.width,k.width(k.parent().width()-parseFloat(k.css("paddingLeft"))-parseFloat(k.css("paddingRight"))-(parseFloat(k.css("borderLeftWidth"))||0)-(parseFloat(k.css("borderRightWidth"))||0)),f.each(q,function(j,h){t[h]="hide";var b=(""+f.css(B.toShow[0],h)).match(/^([\d+-.]+)(.*)$/);x[h]={value:b[1],unit:b[2]||"px"}}),B.toShow.css({height:0,overflow:"hidden"}).show(),B.toHide.filter(":hidden").each(B.complete).end().filter(":visible").animate(t,{step:function(b,h){h.prop=="height"&&(y=h.end-h.start===0?0:(h.now-h.start)/(h.end-h.start)),B.toShow[0].style[h.prop]=y*x[h.prop].value+x[h.prop].unit},duration:B.duration,easing:B.easing,complete:function(){B.autoHeight||B.toShow.css("height",""),B.toShow.css({width:n,overflow:z}),B.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=0;f.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var j=this,n=this.element[0].ownerDocument,k;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(q){if(j.options.disabled||j.element.propAttr("readOnly")){return}k=!1;var b=f.ui.keyCode;switch(q.keyCode){case b.PAGE_UP:j._move("previousPage",q);break;case b.PAGE_DOWN:j._move("nextPage",q);break;case b.UP:j._keyEvent("previous",q);break;case b.DOWN:j._keyEvent("next",q);break;case b.ENTER:case b.NUMPAD_ENTER:j.menu.active&&(k=!0,q.preventDefault());case b.TAB:if(!j.menu.active){return}j.menu.select(q);break;case b.ESCAPE:j.element.val(j.term),j.close(q);break;default:clearTimeout(j.searching),j.searching=setTimeout(function(){j.term!=j.element.val()&&(j.selectedItem=null,j.search(null,q))},j.options.delay)}}).bind("keypress.autocomplete",function(b){k&&(k=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(j.options.disabled){return}j.selectedItem=null,j.previous=j.element.val()}).bind("blur.autocomplete",function(b){if(j.options.disabled){return}clearTimeout(j.searching),j.closing=setTimeout(function(){j.close(b),j._change(b)},150)}),this._initSource(),this.menu=f("<ul></ul>").addClass("ui-autocomplete").appendTo(f(this.options.appendTo||"body",n)[0]).mousedown(function(q){var b=j.menu.element[0];f(q.target).closest(".ui-menu-item").length||setTimeout(function(){f(document).one("mousedown",function(t){t.target!==j.element[0]&&t.target!==b&&!f.ui.contains(b,t.target)&&j.close()})},1),setTimeout(function(){clearTimeout(j.closing)},13)}).menu({focus:function(b,t){var q=t.item.data("item.autocomplete");!1!==j._trigger("focus",b,{item:q})&&/^key/.test(b.originalEvent.type)&&j.element.val(q.value)},selected:function(b,x){var t=x.item.data("item.autocomplete"),q=j.previous;j.element[0]!==n.activeElement&&(j.element.focus(),j.previous=q,setTimeout(function(){j.previous=q,j.selectedItem=t},1)),!1!==j._trigger("select",b,{item:t})&&j.element.val(t.value),j.term=j.element.val(),j.close(b),j.selectedItem=t},blur:function(b,q){j.menu.element.is(":visible")&&j.element.val()!==j.term&&j.element.val(j.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),f.fn.bgiframe&&this.menu.element.bgiframe(),j.beforeunloadHandler=function(){j.element.removeAttr("autocomplete")},f(window).bind("beforeunload",j.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),f(window).unbind("beforeunload",this.beforeunloadHandler),f.Widget.prototype.destroy.call(this)},_setOption:function(j,k){f.Widget.prototype._setOption.apply(this,arguments),j==="source"&&this._initSource(),j==="appendTo"&&this.menu.element.appendTo(f(k||"body",this.element[0].ownerDocument)[0]),j==="disabled"&&k&&this.xhr&&this.xhr.abort()},_initSource:function(){var j=this,n,k;f.isArray(this.options.source)?(n=this.options.source,this.source=function(q,t){t(f.ui.autocomplete.filter(n,q.term))}):typeof this.options.source=="string"?(k=this.options.source,this.source=function(q,b){j.xhr&&j.xhr.abort(),j.xhr=f.ajax({url:k,data:q,dataType:"json",success:function(x,t){b(x)},error:function(){b([])}})}):this.source=this.options.source},search:function(k,j){k=k!=null?k:this.element.val(),this.term=this.element.val();if(k.length<this.options.minLength){return this.close(j)}clearTimeout(this.closing);if(this._trigger("search",j)===!1){return}return this._search(k)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var k=this,j=++h;return function(b){j===h&&k.__response(b),k.pending--,k.pending||k.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(j){return j.length&&j[0].label&&j[0].value?j:f.map(j,function(k){return typeof k=="string"?{label:k,value:k}:f.extend({label:k.label||k.value,value:k.value||k.label},k)})},_suggest:function(j){var k=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(k,j),this.menu.deactivate(),this.menu.refresh(),k.show(),this._resizeMenu(),k.position(f.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new f.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(j,n){var k=this;f.each(n,function(b,q){k._renderItem(j,q)})},_renderItem:function(j,k){return f("<li></li>").data("item.autocomplete",k).append(f("<a></a>").text(k.label)).appendTo(j)},_move:function(k,j){if(!this.menu.element.is(":visible")){this.search(null,j);return}if(this.menu.first()&&/^previous/.test(k)||this.menu.last()&&/^next/.test(k)){this.element.val(this.term),this.menu.deactivate();return}this.menu[k](j)},widget:function(){return this.menu.element},_keyEvent:function(k,j){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(k,j),j.preventDefault()}}}),f.extend(f.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(j,n){var k=new RegExp(f.ui.autocomplete.escapeRegex(n),"i");return f.grep(j,function(b){return k.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var e=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(f){if(!b(f.target).closest(".ui-menu-item a").length){return}f.preventDefault(),e.select(f)}),this.refresh()},refresh:function(){var e=this,f=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");f.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(h){e.activate(h,b(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var n=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();n<0?this.element.scrollTop(k+n):n>=j&&this.element.scrollTop(k+n-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(".ui-menu-item:first"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var e=b(this).offset().top-k-j+b(this).height();return e<10&&e>-10});h.length||(h=this.element.children(".ui-menu-item:last")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var e=b(this).offset().top-k+j-b(this).height();return e<10&&e>-10});h.length||(h=this.element.children(".ui-menu-item:first")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(E,D){var C,B,A,z,y="ui-button ui-widget ui-state-default ui-corner-all",x="ui-state-hover ui-state-active ",t="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",q=function(){var e=E(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},n=function(f){var k=f.name,j=f.form,h=E([]);return k&&(j?h=E(j).find("[name='"+k+"']"):h=E("[name='"+k+"']",f.ownerDocument).filter(function(){return !this.form})),h};E.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",q),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var f=this,F=this.options,k=this.type==="checkbox"||this.type==="radio",j="ui-state-hover"+(k?"":" ui-state-active"),e="ui-state-focus";F.label===null&&(F.label=this.buttonElement.html()),this.buttonElement.addClass(y).attr("role","button").bind("mouseenter.button",function(){if(F.disabled){return}E(this).addClass("ui-state-hover"),this===C&&E(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(F.disabled){return}E(this).removeClass(j)}).bind("click.button",function(b){F.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){f.buttonElement.addClass(e)}).bind("blur.button",function(){f.buttonElement.removeClass(e)}),k&&(this.element.bind("change.button",function(){if(z){return}f.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(F.disabled){return}z=!1,B=b.pageX,A=b.pageY}).bind("mouseup.button",function(b){if(F.disabled){return}if(B!==b.pageX||A!==b.pageY){z=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(F.disabled||z){return !1}E(this).toggleClass("ui-state-active"),f.buttonElement.attr("aria-pressed",f.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(F.disabled||z){return !1}E(this).addClass("ui-state-active"),f.buttonElement.attr("aria-pressed","true");var b=f.element[0];n(b).not(b).map(function(){return E(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(F.disabled){return !1}E(this).addClass("ui-state-active"),C=this,E(document).one("mouseup",function(){C=null})}).bind("mouseup.button",function(){if(F.disabled){return !1}E(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(F.disabled){return !1}(h.keyCode==E.ui.keyCode.SPACE||h.keyCode==E.ui.keyCode.ENTER)&&E(this).addClass("ui-state-active")}).bind("keyup.button",function(){E(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===E.ui.keyCode.SPACE&&E(this).click()})),this._setOption("disabled",F.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var f=this.element.parents().filter(":last"),e="label[for='"+this.element.attr("id")+"']";this.buttonElement=f.find(e),this.buttonElement.length||(f=f.length?f.siblings():this.element.siblings(),this.buttonElement=f.filter(e),this.buttonElement.length||(this.buttonElement=f.find(e))),this.element.addClass("ui-helper-hidden-accessible");var h=this.element.is(":checked");h&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",h)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(y+" "+x+" "+t).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),E.Widget.prototype.destroy.call(this)},_setOption:function(e,f){E.Widget.prototype._setOption.apply(this,arguments);if(e==="disabled"){f?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var e=this.element.is(":disabled");e!==this.options.disabled&&this._setOption("disabled",e),this.type==="radio"?n(this.element[0]).each(function(){E(this).is(":checked")?E(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):E(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var h=this.buttonElement.removeClass(t),G=E("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(h.empty()).text(),F=this.options.icons,k=F.primary&&F.secondary,j=[];F.primary||F.secondary?(this.options.text&&j.push("ui-button-text-icon"+(k?"s":F.primary?"-primary":"-secondary")),F.primary&&h.prepend("<span class='ui-button-icon-primary ui-icon "+F.primary+"'></span>"),F.secondary&&h.append("<span class='ui-button-icon-secondary ui-icon "+F.secondary+"'></span>"),this.options.text||(j.push(k?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||h.attr("title",G))):j.push("ui-button-text-only"),h.addClass(j.join(" "))}}),E.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,f){e==="disabled"&&this.buttons.button("option",e,f),E.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var e=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return E(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return E(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),E.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var t="ui-dialog ui-widget ui-widget-content ui-corner-all ",q={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(e){var f=j(this).css(e).offset().top;f<0&&j(this).css("top",e.top-f)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var G=this,F=G.options,E=F.title||"&#160;",D=j.ui.dialog.getTitleId(G.element),C=(G.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(t+F.dialogClass).css({zIndex:F.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){F.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(G.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":D}).mousedown(function(b){G.moveToTop(!1,b)}),B=G.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(C),A=(G.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(C),z=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){z.addClass("ui-state-hover")},function(){z.removeClass("ui-state-hover")}).focus(function(){z.addClass("ui-state-focus")}).blur(function(){z.removeClass("ui-state-focus")}).click(function(b){return G.close(b),!1}).appendTo(A),y=(G.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(F.closeText).appendTo(z),x=j("<span></span>").addClass("ui-dialog-title").attr("id",D).html(E).prependTo(A);j.isFunction(F.beforeclose)&&!j.isFunction(F.beforeClose)&&(F.beforeClose=F.beforeclose),A.find("*").add(A).disableSelection(),F.draggable&&j.fn.draggable&&G._makeDraggable(),F.resizable&&j.fn.resizable&&G._makeResizable(),G._createButtons(F.buttons),G._isOpen=!1,j.fn.bgiframe&&C.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(f){var z=this,y,x;if(!1===z._trigger("beforeClose",f)){return}return z.overlay&&z.overlay.destroy(),z.uiDialog.unbind("keypress.ui-dialog"),z._isOpen=!1,z.options.hide?z.uiDialog.hide(z.options.hide,function(){z._trigger("close",f)}):(z.uiDialog.hide(),z._trigger("close",f)),j.ui.dialog.overlay.resize(),z.options.modal&&(y=0,j(".ui-dialog").each(function(){this!==z.uiDialog[0]&&(x=j(this).css("z-index"),isNaN(x)||(y=Math.max(y,x)))}),j.ui.dialog.maxZ=y),z},isOpen:function(){return this._isOpen},moveToTop:function(x,B){var A=this,z=A.options,y;return z.modal&&!x||!z.stack&&!z.modal?A._trigger("focus",B):(z.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=z.zIndex),A.overlay&&(j.ui.dialog.maxZ+=1,A.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),y={scrollTop:A.element.scrollTop(),scrollLeft:A.element.scrollLeft()},j.ui.dialog.maxZ+=1,A.uiDialog.css("z-index",j.ui.dialog.maxZ),A.element.attr(y),A._trigger("focus",B),A)},open:function(){if(this._isOpen){return}var e=this,x=e.options,f=e.uiDialog;return e.overlay=x.modal?new j.ui.dialog.overlay(e):null,e._size(),e._position(x.position),f.show(x.show),e.moveToTop(!0),x.modal&&f.bind("keydown.ui-dialog",function(y){if(y.keyCode!==j.ui.keyCode.TAB){return}var B=j(":tabbable",this),A=B.filter(":first"),z=B.filter(":last");if(y.target===z[0]&&!y.shiftKey){return A.focus(1),!1}if(y.target===A[0]&&y.shiftKey){return z.focus(1),!1}}),j(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e},_createButtons:function(f){var A=this,z=!1,y=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),x=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(y);A.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof f=="object"&&f!==null&&j.each(f,function(){return !(z=!0)}),z&&(j.each(f,function(B,D){D=j.isFunction(D)?{click:D,text:B}:D;var C=j('<button type="button"></button>').click(function(){D.click.apply(A.element[0],arguments)}).appendTo(x);j.each(D,function(E,e){if(E==="click"){return}E in k?C[E](e):C.attr(E,e)}),j.fn.button&&C.button()}),y.appendTo(A.uiDialog))},_makeDraggable:function(){function y(b){return{position:b.position,offset:b.offset}}var x=this,B=x.options,A=j(document),z;x.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,b){z=B.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),x._trigger("dragStart",e,y(b))},drag:function(b,e){x._trigger("drag",b,y(e))},stop:function(e,b){B.position=[b.position.left-A.scrollLeft(),b.position.top-A.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(z),x._trigger("dragStop",e,y(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(B){function b(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}B=B===h?this.options.resizable:B;var A=this,z=A.options,y=A.uiDialog.css("position"),x=typeof B=="string"?B:"n,e,s,w,se,sw,ne,nw";A.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:A.element,maxWidth:z.maxWidth,maxHeight:z.maxHeight,minWidth:z.minWidth,minHeight:A._minHeight(),handles:x,start:function(e,f){j(this).addClass("ui-dialog-resizing"),A._trigger("resizeStart",e,b(f))},resize:function(f,e){A._trigger("resize",f,b(e))},stop:function(e,f){j(this).removeClass("ui-dialog-resizing"),z.height=j(this).height(),z.width=j(this).width(),A._trigger("resizeStop",e,b(f)),j.ui.dialog.overlay.resize()}}).css("position",y).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var z=[],y=[0,0],x;if(f){if(typeof f=="string"||typeof f=="object"&&"0" in f){z=f.split?f.split(" "):[f[0],f[1]],z.length===1&&(z[1]=z[0]),j.each(["left","top"],function(A,e){+z[A]===z[A]&&(y[A]=z[A],z[A]=e)}),f={my:z.join(" "),at:z.join(" "),offset:y.join(" ")}}f=j.extend({},j.ui.dialog.prototype.options.position,f)}else{f=j.ui.dialog.prototype.options.position}x=this.uiDialog.is(":visible"),x||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},f)),x||this.uiDialog.hide()},_setOptions:function(e){var z=this,y={},x=!1;j.each(e,function(A,f){z._setOption(A,f),A in q&&(x=!0),A in n&&(y[A]=f)}),x&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",y)},_setOption:function(x,C){var B=this,A=B.uiDialog;switch(x){case"beforeclose":x="beforeClose";break;case"buttons":B._createButtons(C);break;case"closeText":B.uiDialogTitlebarCloseText.text(""+C);break;case"dialogClass":A.removeClass(B.options.dialogClass).addClass(t+C);break;case"disabled":C?A.addClass("ui-dialog-disabled"):A.removeClass("ui-dialog-disabled");break;case"draggable":var z=A.is(":data(draggable)");z&&!C&&A.draggable("destroy"),!z&&C&&B._makeDraggable();break;case"position":B._position(C);break;case"resizable":var y=A.is(":data(resizable)");y&&!C&&A.resizable("destroy"),y&&typeof C=="string"&&A.resizable("option","handles",C),!y&&C!==!1&&B._makeResizable(C);break;case"title":j(".ui-dialog-title",B.uiDialogTitlebar).html(""+(C||"&#160;"))}j.Widget.prototype._setOption.apply(B,arguments)},_size:function(){var x=this.options,B,A,z=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),x.minWidth>x.width&&(x.width=x.minWidth),B=this.uiDialog.css({height:"auto",width:x.width}).height(),A=Math.max(0,x.minHeight-B);if(x.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:A,height:"auto"})}else{this.uiDialog.show();var y=this.element.css("height","auto").height();z||this.uiDialog.hide(),this.element.height(Math.max(y,A))}}else{this.element.height(Math.max(x.height-B,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(f){var e=f.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=j.ui.dialog.overlay.create(e)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(e){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(x){if(j(x.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){e.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(e.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var f=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&f.bgiframe(),this.instances.push(f),f},destroy:function(e){var x=j.inArray(e,this.instances);x!=-1&&this.oldInstances.push(this.instances.splice(x,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),e.remove();var f=0;j.each(this.instances,function(){f=Math.max(f,this.css("z-index"))}),this.maxZ=f},height:function(){var e,f;return j.browser.msie&&j.browser.version<7?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<f?j(window).height()+"px":e+"px"):j(document).height()+"px"},width:function(){var e,f;return j.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),f=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<f?j(window).width()+"px":e+"px"):j(document).width()+"px"},resize:function(){var e=j([]);j.each(j.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){var h=5;f.widget("ui.slider",f.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var j=this,y=this.options,x=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),t="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",q=y.values&&y.values.length||1,n=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(y.disabled?" ui-slider-disabled ui-disabled":"")),this.range=f([]),y.range&&(y.range===!0&&(y.values||(y.values=[this._valueMin(),this._valueMin()]),y.values.length&&y.values.length!==2&&(y.values=[y.values[0],y.values[0]])),this.range=f("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(y.range==="min"||y.range==="max"?" ui-slider-range-"+y.range:"")));for(var k=x.length;k<q;k+=1){n.push(t)}this.handles=x.add(f(n.join("")).appendTo(j.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){y.disabled||f(this).addClass("ui-state-hover")},function(){f(this).removeClass("ui-state-hover")}).focus(function(){y.disabled?f(this).blur():(f(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),f(this).addClass("ui-state-focus"))}).blur(function(){f(this).removeClass("ui-state-focus")}),this.handles.each(function(z){f(this).data("index.ui-slider-handle",z)}),this.handles.keydown(function(D){var C=f(this).data("index.ui-slider-handle"),B,A,z,b;if(j.options.disabled){return}switch(D.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:D.preventDefault();if(!j._keySliding){j._keySliding=!0,f(this).addClass("ui-state-active"),B=j._start(D,C);if(B===!1){return}}}b=j.options.step,j.options.values&&j.options.values.length?A=z=j.values(C):A=z=j.value();switch(D.keyCode){case f.ui.keyCode.HOME:z=j._valueMin();break;case f.ui.keyCode.END:z=j._valueMax();break;case f.ui.keyCode.PAGE_UP:z=j._trimAlignValue(A+(j._valueMax()-j._valueMin())/h);break;case f.ui.keyCode.PAGE_DOWN:z=j._trimAlignValue(A-(j._valueMax()-j._valueMin())/h);break;case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:if(A===j._valueMax()){return}z=j._trimAlignValue(A+b);break;case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(A===j._valueMin()){return}z=j._trimAlignValue(A-b)}j._slide(D,C,z)}).keyup(function(z){var b=f(this).data("index.ui-slider-handle");j._keySliding&&(j._keySliding=!1,j._stop(z,b),j._change(z,b),f(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(E){var D=this.options,C,B,A,z,y,x,t,q,n;return D.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),C={x:E.pageX,y:E.pageY},B=this._normValueFromMouse(C),A=this._valueMax()-this._valueMin()+1,y=this,this.handles.each(function(j){var k=Math.abs(B-y.values(j));A>k&&(A=k,z=f(this),x=j)}),D.range===!0&&this.values(1)===D.min&&(x+=1,z=f(this.handles[x])),t=this._start(E,x),t===!1?!1:(this._mouseSliding=!0,y._handleIndex=x,z.addClass("ui-state-active").focus(),q=z.offset(),n=!f(E.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:E.pageX-q.left-z.width()/2,top:E.pageY-q.top-z.height()/2-(parseInt(z.css("borderTopWidth"),10)||0)-(parseInt(z.css("borderBottomWidth"),10)||0)+(parseInt(z.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(E,x,B),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(k){var j={x:k.pageX,y:k.pageY},n=this._normValueFromMouse(j);return this._slide(k,this._handleIndex,n),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(k){var j,x,t,q,n;return this.orientation==="horizontal"?(j=this.elementSize.width,x=k.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(j=this.elementSize.height,x=k.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=x/j,t>1&&(t=1),t<0&&(t=0),this.orientation==="vertical"&&(t=1-t),q=this._valueMax()-this._valueMin(),n=this._valueMin()+t*q,this._trimAlignValue(n)},_start:function(k,j){var n={handle:this.handles[j],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("start",k,n)},_slide:function(k,j,x){var t,q,n;this.options.values&&this.options.values.length?(t=this.values(j?0:1),this.options.values.length===2&&this.options.range===!0&&(j===0&&x>t||j===1&&x<t)&&(x=t),x!==this.values(j)&&(q=this.values(),q[j]=x,n=this._trigger("slide",k,{handle:this.handles[j],value:x,values:q}),t=this.values(j?0:1),n!==!1&&this.values(j,x,!0))):x!==this.value()&&(n=this._trigger("slide",k,{handle:this.handles[j],value:x}),n!==!1&&this.value(x))},_stop:function(k,j){var n={handle:this.handles[j],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("stop",k,n)},_change:function(k,j){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[j],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(j),n.values=this.values()),this._trigger("change",k,n)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(j,t){var q,n,k;if(arguments.length>1){this.options.values[j]=this._trimAlignValue(t),this._refreshValue(),this._change(null,j);return}if(!arguments.length){return this._values()}if(!f.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(j):this.value()}q=this.options.values,n=arguments[0];for(k=0;k<q.length;k+=1){q[k]=this._trimAlignValue(n[k]),this._change(null,k)}this._refreshValue()},_setOption:function(j,q){var n,k=0;f.isArray(this.options.values)&&(k=this.options.values.length),f.Widget.prototype._setOption.apply(this,arguments);switch(j){case"disabled":q?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(n=0;n<k;n+=1){this._change(null,n)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(k){var j,q,n;if(arguments.length){return j=this.options.values[k],j=this._trimAlignValue(j),j}q=this.options.values.slice();for(n=0;n<q.length;n+=1){q[n]=this._trimAlignValue(q[n])}return q},_trimAlignValue:function(k){if(k<=this._valueMin()){return this._valueMin()}if(k>=this._valueMax()){return this._valueMax()}var j=this.options.step>0?this.options.step:1,q=(k-this._valueMin())%j,n=k-q;return Math.abs(q)*2>=j&&(n+=q>0?j:-j),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var D=this.options.range,C=this.options,B=this,A=this._animateOff?!1:C.animate,z,y={},x,t,q,n;this.options.values&&this.options.values.length?this.handles.each(function(j,k){z=(B.values(j)-B._valueMin())/(B._valueMax()-B._valueMin())*100,y[B.orientation==="horizontal"?"left":"bottom"]=z+"%",f(this).stop(1,1)[A?"animate":"css"](y,C.animate),B.options.range===!0&&(B.orientation==="horizontal"?(j===0&&B.range.stop(1,1)[A?"animate":"css"]({left:z+"%"},C.animate),j===1&&B.range[A?"animate":"css"]({width:z-x+"%"},{queue:!1,duration:C.animate})):(j===0&&B.range.stop(1,1)[A?"animate":"css"]({bottom:z+"%"},C.animate),j===1&&B.range[A?"animate":"css"]({height:z-x+"%"},{queue:!1,duration:C.animate}))),x=z}):(t=this.value(),q=this._valueMin(),n=this._valueMax(),z=n!==q?(t-q)/(n-q)*100:0,y[B.orientation==="horizontal"?"left":"bottom"]=z+"%",this.handle.stop(1,1)[A?"animate":"css"](y,C.animate),D==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[A?"animate":"css"]({width:z+"%"},C.animate),D==="max"&&this.orientation==="horizontal"&&this.range[A?"animate":"css"]({width:100-z+"%"},{queue:!1,duration:C.animate}),D==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[A?"animate":"css"]({height:z+"%"},C.animate),D==="max"&&this.orientation==="vertical"&&this.range[A?"animate":"css"]({height:100-z+"%"},{queue:!1,duration:C.animate}))}}),f.extend(f.ui.slider,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){function n(){return ++t}function k(){return ++q}var t=0,q=0;j.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(f,e){if(f=="selected"){if(this.options.collapsible&&e==this.options.selected){return}this.select(e)}else{this.options[f]=e,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var e=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+k());return j.cookie.apply(null,[e].concat(j.makeArray(arguments)))},_ui:function(f,e){return{tab:f,panel:e,index:this.anchors.index(f)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var e=j(this);e.html(e.data("label.tabs")).removeData("label.tabs")})},_tabify:function(I){function y(e,f){e.css("display",""),!j.support.opacity&&f.opacity&&e[0].style.removeAttribute("filter")}var H=this,G=this.options,F=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=j(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return j("a",this)[0]}),this.panels=j([]),this.anchors.each(function(e,N){var M=j(N).attr("href"),L=M.split("#")[0],K;L&&(L===location.toString().split("#")[0]||(K=j("base")[0])&&L===K.href)&&(M=N.hash,N.href=M);if(F.test(M)){H.panels=H.panels.add(H.element.find(H._sanitizeSelector(M)))}else{if(M&&M!=="#"){j.data(N,"href.tabs",M),j.data(N,"load.tabs",M.replace(/#.*$/,""));var J=H._tabId(N);N.href="#"+J;var f=H.element.find("#"+J);f.length||(f=j(G.panelTemplate).attr("id",J).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(H.panels[e-1]||H.list),f.data("destroy.tabs",!0)),H.panels=H.panels.add(f)}else{G.disabled.push(e)}}}),I?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),G.selected===h?(location.hash&&this.anchors.each(function(f,e){if(e.hash==location.hash){return G.selected=f,!1}}),typeof G.selected!="number"&&G.cookie&&(G.selected=parseInt(H._cookie(),10)),typeof G.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(G.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),G.selected=G.selected||(this.lis.length?0:-1)):G.selected===null&&(G.selected=-1),G.selected=G.selected>=0&&this.anchors[G.selected]||G.selected<0?G.selected:0,G.disabled=j.unique(G.disabled.concat(j.map(this.lis.filter(".ui-state-disabled"),function(f,e){return H.lis.index(f)}))).sort(),j.inArray(G.selected,G.disabled)!=-1&&G.disabled.splice(j.inArray(G.selected,G.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),G.selected>=0&&this.anchors.length&&(H.element.find(H._sanitizeSelector(H.anchors[G.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(G.selected).addClass("ui-tabs-selected ui-state-active"),H.element.queue("tabs",function(){H._trigger("show",null,H._ui(H.anchors[G.selected],H.element.find(H._sanitizeSelector(H.anchors[G.selected].hash))[0]))}),this.load(G.selected)),j(window).bind("unload",function(){H.lis.add(H.anchors).unbind(".tabs"),H.lis=H.anchors=H.panels=null})):G.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[G.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),G.cookie&&this._cookie(G.selected,G.cookie);for(var E=0,D;D=this.lis[E];E++){j(D)[j.inArray(E,G.disabled)!=-1&&!j(D).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}G.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(G.event!=="mouseover"){var C=function(f,e){e.is(":not(.ui-state-disabled)")&&e.addClass("ui-state-"+f)},B=function(f,e){e.removeClass("ui-state-"+f)};this.lis.bind("mouseover.tabs",function(){C("hover",j(this))}),this.lis.bind("mouseout.tabs",function(){B("hover",j(this))}),this.anchors.bind("focus.tabs",function(){C("focus",j(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){B("focus",j(this).closest("li"))})}var A,z;G.fx&&(j.isArray(G.fx)?(A=G.fx[0],z=G.fx[1]):A=z=G.fx);var x=z?function(e,f){j(e).closest("li").addClass("ui-tabs-selected ui-state-active"),f.hide().removeClass("ui-tabs-hide").animate(z,z.duration||"normal",function(){y(f,z),H._trigger("show",null,H._ui(e,f[0]))})}:function(e,f){j(e).closest("li").addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),H._trigger("show",null,H._ui(e,f[0]))},b=A?function(f,e){e.animate(A,A.duration||"normal",function(){H.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),y(e,A),H.element.dequeue("tabs")})}:function(f,e,J){H.lis.removeClass("ui-tabs-selected ui-state-active"),e.addClass("ui-tabs-hide"),H.element.dequeue("tabs")};this.anchors.bind(G.event+".tabs",function(){var e=this,L=j(e).closest("li"),K=H.panels.filter(":not(.ui-tabs-hide)"),J=H.element.find(H._sanitizeSelector(e.hash));if(L.hasClass("ui-tabs-selected")&&!G.collapsible||L.hasClass("ui-state-disabled")||L.hasClass("ui-state-processing")||H.panels.filter(":animated").length||H._trigger("select",null,H._ui(this,J[0]))===!1){return this.blur(),!1}G.selected=H.anchors.index(this),H.abort();if(G.collapsible){if(L.hasClass("ui-tabs-selected")){return G.selected=-1,G.cookie&&H._cookie(G.selected,G.cookie),H.element.queue("tabs",function(){b(e,K)}).dequeue("tabs"),this.blur(),!1}if(!K.length){return G.cookie&&H._cookie(G.selected,G.cookie),H.element.queue("tabs",function(){x(e,J)}),H.load(H.anchors.index(this)),this.blur(),!1}}G.cookie&&H._cookie(G.selected,G.cookie);if(J.length){K.length&&H.element.queue("tabs",function(){b(e,K)}),H.element.queue("tabs",function(){x(e,J)}),H.load(H.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}j.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var e=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var f=j.data(this,"href.tabs");f&&(this.href=f);var x=j(this).unbind(".tabs");j.each(["href","load","cache"],function(z,y){x.removeData(y+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){j.data(this,"destroy.tabs")?j(this).remove():j(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),e.cookie&&this._cookie(null,e.cookie),this},add:function(D,C,B){B===h&&(B=this.anchors.length);var A=this,z=this.options,y=j(z.tabTemplate.replace(/#\{href\}/g,D).replace(/#\{label\}/g,C)),x=D.indexOf("#")?this._tabId(j("a",y)[0]):D.replace("#","");y.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var b=A.element.find("#"+x);return b.length||(b=j(z.panelTemplate).attr("id",x).data("destroy.tabs",!0)),b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),B>=this.lis.length?(y.appendTo(this.list),b.appendTo(this.list[0].parentNode)):(y.insertBefore(this.lis[B]),b.insertBefore(this.panels[B])),z.disabled=j.map(z.disabled,function(f,e){return f>=B?++f:f}),this._tabify(),this.anchors.length==1&&(z.selected=0,y.addClass("ui-tabs-selected ui-state-active"),b.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){A._trigger("show",null,A._ui(A.anchors[0],A.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[B],this.panels[B])),this},remove:function(f){f=this._getIndex(f);var z=this.options,y=this.lis.eq(f).remove(),x=this.panels.eq(f).remove();return y.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(f+(f+1<this.anchors.length?1:-1)),z.disabled=j.map(j.grep(z.disabled,function(b,e){return b!=f}),function(b,e){return b>=f?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(y.find("a")[0],x[0])),this},enable:function(e){e=this._getIndex(e);var f=this.options;if(j.inArray(e,f.disabled)==-1){return}return this.lis.eq(e).removeClass("ui-state-disabled"),f.disabled=j.grep(f.disabled,function(b,x){return b!=e}),this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e])),this},disable:function(f){f=this._getIndex(f);var e=this,x=this.options;return f!=x.selected&&(this.lis.eq(f).addClass("ui-state-disabled"),x.disabled.push(f),x.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[f],this.panels[f]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(x){x=this._getIndex(x);var C=this,B=this.options,A=this.anchors.eq(x)[0],z=j.data(A,"load.tabs");this.abort();if(!z||this.element.queue("tabs").length!==0&&j.data(A,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(x).addClass("ui-state-processing");if(B.spinner){var y=j("span",A);y.data("label.tabs",y.html()).html(B.spinner)}return this.xhr=j.ajax(j.extend({},B.ajaxOptions,{url:z,success:function(D,e){C.element.find(C._sanitizeSelector(A.hash)).html(D),C._cleanup(),B.cache&&j.data(A,"cache.tabs",!0),C._trigger("load",null,C._ui(C.anchors[x],C.panels[x]));try{B.ajaxOptions.success(D,e)}catch(b){}},error:function(b,D,e){C._cleanup(),C._trigger("load",null,C._ui(C.anchors[x],C.panels[x]));try{B.ajaxOptions.error(b,D,x,A)}catch(e){}}})),C.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(f,e){return this.anchors.eq(f).removeData("cache.tabs").data("load.tabs",e),this},length:function(){return this.anchors.length}}),j.extend(j.ui.tabs,{version:"1.8.21"}),j.extend(j.ui.tabs.prototype,{rotation:null,rotate:function(y,x){var C=this,B=this.options,A=C._rotate||(C._rotate=function(e){clearTimeout(C.rotation),C.rotation=setTimeout(function(){var b=B.selected;C.select(++b<C.anchors.length?b:0)},y),e&&e.stopPropagation()}),z=C._unrotate||(C._unrotate=x?function(b){A()}:function(b){b.clientX&&C.rotate(null)});return y?(this.element.bind("tabsshow",A),this.anchors.bind(B.event+".tabs",z),A()):(clearTimeout(C.rotation),this.element.unbind("tabsshow",A),this.anchors.unbind(B.event+".tabs",z),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=f("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),f.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===e?this._value():(this._setOption("value",b),this)},_setOption:function(h,j){h==="value"&&(this.options.value=j,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),f.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var j=this.value(),h=this._percentage();this.oldValue!==j&&(this.oldValue=j,this._trigger("change")),this.valueDiv.toggle(j>this.min).toggleClass("ui-corner-right",j===this.options.max).width(h.toFixed(0)+"%"),this.element.attr("aria-valuenow",j)}}),f.extend(f.ui.progressbar,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(F,E){function D(e){var f;return e&&e.constructor==Array&&e.length==3?e:(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10)]:(f=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[parseFloat(f[1])*2.55,parseFloat(f[2])*2.55,parseFloat(f[3])*2.55]:(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]:(f=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]:(f=/rgba\(0, 0, 0, 0\)/.exec(e))?B.transparent:B[F.trim(e).toLowerCase()]}function C(f,j){var h;do{h=F.curCSS(f,j);if(h!=""&&h!="transparent"||F.nodeName(f,"body")){break}j="backgroundColor"}while(f=f.parentNode);return D(h)}function y(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},G,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){G=h[j],typeof h[G]=="string"&&(k=G.replace(/\-(\w)/g,function(H,e){return e.toUpperCase()}),f[k]=h[G])}}else{for(G in h){typeof h[G]=="string"&&(f[G]=h[G])}}return f}function x(e){var h,f;for(h in e){f=e[h],(f==null||F.isFunction(f)||h in z||/scrollbar/.test(h)||!/color/i.test(h)&&isNaN(parseFloat(f)))&&delete e[h]}return e}function t(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function q(f,k,j,h){typeof f=="object"&&(h=k,j=null,k=f,f=k.effect),F.isFunction(k)&&(h=k,j=null,k={});if(typeof k=="number"||F.fx.speeds[k]){h=j,j=k,k={}}return F.isFunction(j)&&(h=j,j=null),k=k||{},j=j||k.duration,j=F.fx.off?0:typeof j=="number"?j:j in F.fx.speeds?F.fx.speeds[j]:F.fx.speeds._default,h=h||k.complete,[f,k,j,h]}function n(e){return !e||typeof e=="number"||F.fx.speeds[e]?!0:typeof e=="string"&&!F.effects[e]?!0:!1}F.effects={},F.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(f,h){F.fx.step[h]=function(b){b.colorInit||(b.start=C(b.elem,h),b.end=D(b.end),b.colorInit=!0),b.elem.style[h]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},A=["add","remove","toggle"],z={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};F.effects.animateClass=function(f,k,j,h){return F.isFunction(j)&&(h=j,j=null),this.queue(function(){var H=F(this),G=H.attr("style")||" ",e=x(y.call(this)),b,I=H.attr("class")||"";F.each(A,function(J,K){f[K]&&H[K+"Class"](f[K])}),b=x(y.call(this)),H.attr("class",I),H.animate(t(e,b),{queue:!1,duration:k,easing:j,complete:function(){F.each(A,function(J,K){f[K]&&H[K+"Class"](f[K])}),typeof H.attr("style")=="object"?(H.attr("style").cssText="",H.attr("style").cssText=G):H.attr("style",G),h&&h.apply(this,arguments),F.dequeue(this)}})})},F.fn.extend({_addClass:F.fn.addClass,addClass:function(f,k,j,h){return k?F.effects.animateClass.apply(this,[{add:f},k,j,h]):this._addClass(f)},_removeClass:F.fn.removeClass,removeClass:function(f,k,j,h){return k?F.effects.animateClass.apply(this,[{remove:f},k,j,h]):this._removeClass(f)},_toggleClass:F.fn.toggleClass,toggleClass:function(G,k,j,h,b){return typeof k=="boolean"||k===E?j?F.effects.animateClass.apply(this,[k?{add:G}:{remove:G},j,h,b]):this._toggleClass(G,k):F.effects.animateClass.apply(this,[{toggle:G},k,j,h])},switchClass:function(h,H,G,k,j){return F.effects.animateClass.apply(this,[{add:H,remove:h},G,k,j])}}),F.extend(F.effects,{version:"1.8.21",save:function(f,e){for(var h=0;h<e.length;h++){e[h]!==null&&f.data("ec.storage."+e[h],f[0].style[e[h]])}},restore:function(f,e){for(var h=0;h<e.length;h++){e[h]!==null&&f.css(e[h],f.data("ec.storage."+e[h]))}},setMode:function(f,e){return e=="toggle"&&(e=f.is(":hidden")?"show":"hide"),e},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var H={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},G=F("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k=document.activeElement;try{k.id}catch(j){k=document.body}return h.wrap(G),(h[0]===k||F.contains(h[0],k))&&F(k).focus(),G=h.parent(),h.css("position")=="static"?(G.css({position:"relative"}),h.css({position:"relative"})):(F.extend(H,{position:h.css("position"),zIndex:h.css("z-index")}),F.each(["top","left","bottom","right"],function(b,e){H[e]=h.css(e),isNaN(parseInt(H[e],10))&&(H[e]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),G.css(H).show()},removeWrapper:function(e){var h,f=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(h=e.parent().replaceWith(e),(e[0]===f||F.contains(e[0],f))&&F(f).focus(),h):e},setTransition:function(f,k,j,h){return h=h||{},F.each(k,function(b,G){var e=f.cssUnit(G);e[0]>0&&(h[G]=e[0]*j+e[1])}),h}}),F.fn.extend({effect:function(j,L,K,J){var I=q.apply(this,arguments),H={options:I[1],duration:I[2],callback:I[3]},G=H.options.mode,k=F.effects[j];return F.fx.off||!k?G?this[G](H.duration,H.callback):this.each(function(){H.callback&&H.callback.call(this)}):k.call(this,H)},_show:F.fn.show,show:function(f){if(n(f)){return this._show.apply(this,arguments)}var e=q.apply(this,arguments);return e[1].mode="show",this.effect.apply(this,e)},_hide:F.fn.hide,hide:function(f){if(n(f)){return this._hide.apply(this,arguments)}var e=q.apply(this,arguments);return e[1].mode="hide",this.effect.apply(this,e)},__toggle:F.fn.toggle,toggle:function(e){if(n(e)||typeof e=="boolean"||F.isFunction(e)){return this.__toggle.apply(this,arguments)}var f=q.apply(this,arguments);return f[1].mode="toggle",this.effect.apply(this,f)},cssUnit:function(e){var h=this.css(e),f=[];return F.each(["em","px","%","pt"],function(k,j){h.indexOf(j)>0&&(f=[parseFloat(h),j])}),f}}),F.easing.jswing=F.easing.swing,F.extend(F.easing,{def:"easeOutQuad",swing:function(h,H,G,k,j){return F.easing[F.easing.def](h,H,G,k,j)},easeInQuad:function(h,f,G,k,j){return k*(f/=j)*f+G},easeOutQuad:function(h,f,G,k,j){return -k*(f/=j)*(f-2)+G},easeInOutQuad:function(h,f,G,k,j){return(f/=j/2)<1?k/2*f*f+G:-k/2*(--f*(f-2)-1)+G},easeInCubic:function(h,f,G,k,j){return k*(f/=j)*f*f+G},easeOutCubic:function(h,f,G,k,j){return k*((f=f/j-1)*f*f+1)+G},easeInOutCubic:function(h,f,G,k,j){return(f/=j/2)<1?k/2*f*f*f+G:k/2*((f-=2)*f*f+2)+G},easeInQuart:function(h,f,G,k,j){return k*(f/=j)*f*f*f+G},easeOutQuart:function(h,f,G,k,j){return -k*((f=f/j-1)*f*f*f-1)+G},easeInOutQuart:function(h,f,G,k,j){return(f/=j/2)<1?k/2*f*f*f*f+G:-k/2*((f-=2)*f*f*f-2)+G},easeInQuint:function(h,f,G,k,j){return k*(f/=j)*f*f*f*f+G},easeOutQuint:function(h,f,G,k,j){return k*((f=f/j-1)*f*f*f*f+1)+G},easeInOutQuint:function(h,f,G,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+G:k/2*((f-=2)*f*f*f*f+2)+G},easeInSine:function(h,f,G,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+G},easeOutSine:function(h,f,G,k,j){return k*Math.sin(f/j*(Math.PI/2))+G},easeInOutSine:function(h,f,G,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+G},easeInExpo:function(h,f,G,k,j){return f==0?G:k*Math.pow(2,10*(f/j-1))+G},easeOutExpo:function(h,f,G,k,j){return f==j?G+k:k*(-Math.pow(2,-10*f/j)+1)+G},easeInOutExpo:function(h,f,G,k,j){return f==0?G:f==j?G+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+G:k/2*(-Math.pow(2,-10*--f)+2)+G},easeInCirc:function(h,f,G,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+G},easeOutCirc:function(h,f,G,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+G},easeInOutCirc:function(h,f,G,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+G:k/2*(Math.sqrt(1-(f-=2)*f)+1)+G},easeInElastic:function(k,j,L,K,J){var I=1.70158,H=0,G=K;if(j==0){return L}if((j/=J)==1){return L+K}H||(H=J*0.3);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return -(G*Math.pow(2,10*(j-=1))*Math.sin((j*J-I)*2*Math.PI/H))+L},easeOutElastic:function(k,j,L,K,J){var I=1.70158,H=0,G=K;if(j==0){return L}if((j/=J)==1){return L+K}H||(H=J*0.3);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return G*Math.pow(2,-10*j)*Math.sin((j*J-I)*2*Math.PI/H)+K+L},easeInOutElastic:function(k,j,L,K,J){var I=1.70158,H=0,G=K;if(j==0){return L}if((j/=J/2)==2){return L+K}H||(H=J*0.3*1.5);if(G<Math.abs(K)){G=K;var I=H/4}else{var I=H/(2*Math.PI)*Math.asin(K/G)}return j<1?-0.5*G*Math.pow(2,10*(j-=1))*Math.sin((j*J-I)*2*Math.PI/H)+L:G*Math.pow(2,-10*(j-=1))*Math.sin((j*J-I)*2*Math.PI/H)*0.5+K+L},easeInBack:function(b,H,G,k,j,h){return h==E&&(h=1.70158),k*(H/=j)*H*((h+1)*H-h)+G},easeOutBack:function(b,H,G,k,j,h){return h==E&&(h=1.70158),k*((H=H/j-1)*H*((h+1)*H+h)+1)+G},easeInOutBack:function(b,H,G,k,j,h){return h==E&&(h=1.70158),(H/=j/2)<1?k/2*H*H*(((h*=1.525)+1)*H-h)+G:k/2*((H-=2)*H*(((h*=1.525)+1)*H+h)+2)+G},easeInBounce:function(h,H,G,k,j){return k-F.easing.easeOutBounce(h,j-H,0,k,j)+G},easeOutBounce:function(h,f,G,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+G:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+G:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+G:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+G},easeInOutBounce:function(h,H,G,k,j){return H<j/2?F.easing.easeInBounce(h,H*2,0,k,j)*0.5+G:F.easing.easeOutBounce(h,H*2-j,0,k,j)*0.5+k*0.5+G}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.blind=function(h){return this.queue(function(){var z=f(this),y=["position","top","bottom","left","right"],x=f.effects.setMode(z,h.options.mode||"hide"),t=h.options.direction||"vertical";f.effects.save(z,y),z.show();var q=f.effects.createWrapper(z).css({overflow:"hidden"}),n=t=="vertical"?"height":"width",k=t=="vertical"?q.height():q.width();x=="show"&&q.css(n,0);var b={};b[n]=x=="show"?k:0,q.animate(b,h.duration,h.options.easing,function(){x=="hide"&&z.hide(),f.effects.restore(z,y),f.effects.removeWrapper(z),h.callback&&h.callback.apply(z[0],arguments),z.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.bounce=function(h){return this.queue(function(){var G=f(this),F=["position","top","bottom","left","right"],E=f.effects.setMode(G,h.options.mode||"effect"),D=h.options.direction||"up",C=h.options.distance||20,B=h.options.times||5,A=h.duration||250;/show|hide/.test(E)&&F.push("opacity"),f.effects.save(G,F),G.show(),f.effects.createWrapper(G);var z=D=="up"||D=="down"?"top":"left",y=D=="up"||D=="left"?"pos":"neg",C=h.options.distance||(z=="top"?G.outerHeight({margin:!0})/3:G.outerWidth({margin:!0})/3);E=="show"&&G.css("opacity",0).css(z,y=="pos"?-C:C),E=="hide"&&(C=C/(B*2)),E!="hide"&&B--;if(E=="show"){var x={opacity:1};x[z]=(y=="pos"?"+=":"-=")+C,G.animate(x,A/2,h.options.easing),C=C/2,B--}for(var t=0;t<B;t++){var q={},b={};q[z]=(y=="pos"?"-=":"+=")+C,b[z]=(y=="pos"?"+=":"-=")+C,G.animate(q,A/2,h.options.easing).animate(b,A/2,h.options.easing),C=E=="hide"?C*2:C/2}if(E=="hide"){var x={opacity:0};x[z]=(y=="pos"?"-=":"+=")+C,G.animate(x,A/2,h.options.easing,function(){G.hide(),f.effects.restore(G,F),f.effects.removeWrapper(G),h.callback&&h.callback.apply(this,arguments)})}else{var q={},b={};q[z]=(y=="pos"?"-=":"+=")+C,b[z]=(y=="pos"?"+=":"-=")+C,G.animate(q,A/2,h.options.easing).animate(b,A/2,h.options.easing,function(){f.effects.restore(G,F),f.effects.removeWrapper(G),h.callback&&h.callback.apply(this,arguments)})}G.queue("fx",function(){G.dequeue()}),G.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.clip=function(h){return this.queue(function(){var B=f(this),A=["position","top","bottom","left","right","height","width"],z=f.effects.setMode(B,h.options.mode||"hide"),y=h.options.direction||"vertical";f.effects.save(B,A),B.show();var x=f.effects.createWrapper(B).css({overflow:"hidden"}),t=B[0].tagName=="IMG"?x:B,q={size:y=="vertical"?"height":"width",position:y=="vertical"?"top":"left"},n=y=="vertical"?t.height():t.width();z=="show"&&(t.css(q.size,0),t.css(q.position,n/2));var b={};b[q.size]=z=="show"?n:0,b[q.position]=z=="show"?0:n/2,t.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){z=="hide"&&B.hide(),f.effects.restore(B,A),f.effects.removeWrapper(B),h.callback&&h.callback.apply(B[0],arguments),B.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.drop=function(h){return this.queue(function(){var z=f(this),y=["position","top","bottom","left","right","opacity"],x=f.effects.setMode(z,h.options.mode||"hide"),t=h.options.direction||"left";f.effects.save(z,y),z.show(),f.effects.createWrapper(z);var q=t=="up"||t=="down"?"top":"left",n=t=="up"||t=="left"?"pos":"neg",k=h.options.distance||(q=="top"?z.outerHeight({margin:!0})/2:z.outerWidth({margin:!0})/2);x=="show"&&z.css("opacity",0).css(q,n=="pos"?-k:k);var b={opacity:x=="show"?1:0};b[q]=(x=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,z.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){x=="hide"&&z.hide(),f.effects.restore(z,y),f.effects.removeWrapper(z),h.callback&&h.callback.apply(this,arguments),z.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.explode=function(h){return this.queue(function(){var z=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3,y=h.options.pieces?Math.round(Math.sqrt(h.options.pieces)):3;h.options.mode=h.options.mode=="toggle"?f(this).is(":visible")?"hide":"show":h.options.mode;var x=f(this).show().css("visibility","hidden"),t=x.offset();t.top-=parseInt(x.css("marginTop"),10)||0,t.left-=parseInt(x.css("marginLeft"),10)||0;var q=x.outerWidth(!0),n=x.outerHeight(!0);for(var k=0;k<z;k++){for(var b=0;b<y;b++){x.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(q/y),top:-k*(n/z)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:q/y,height:n/z,left:t.left+b*(q/y)+(h.options.mode=="show"?(b-Math.floor(y/2))*(q/y):0),top:t.top+k*(n/z)+(h.options.mode=="show"?(k-Math.floor(z/2))*(n/z):0),opacity:h.options.mode=="show"?0:1}).animate({left:t.left+b*(q/y)+(h.options.mode=="show"?0:(b-Math.floor(y/2))*(q/y)),top:t.top+k*(n/z)+(h.options.mode=="show"?0:(k-Math.floor(z/2))*(n/z)),opacity:h.options.mode=="show"?1:0},h.duration||500)}}setTimeout(function(){h.options.mode=="show"?x.css({visibility:"visible"}):x.css({visibility:"visible"}).hide(),h.callback&&h.callback.apply(x[0]),x.dequeue(),f("div.ui-effects-explode").remove()},h.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.fade=function(h){return this.queue(function(){var j=f(this),b=f.effects.setMode(j,h.options.mode||"hide");j.animate({opacity:b},{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){h.callback&&h.callback.apply(this,arguments),j.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.fold=function(h){return this.queue(function(){var G=f(this),F=["position","top","bottom","left","right"],E=f.effects.setMode(G,h.options.mode||"hide"),D=h.options.size||15,C=!!h.options.horizFirst,B=h.duration?h.duration/2:f.fx.speeds._default/2;f.effects.save(G,F),G.show();var A=f.effects.createWrapper(G).css({overflow:"hidden"}),z=E=="show"!=C,y=z?["width","height"]:["height","width"],x=z?[A.width(),A.height()]:[A.height(),A.width()],t=/([0-9]+)%/.exec(D);t&&(D=parseInt(t[1],10)/100*x[E=="hide"?0:1]),E=="show"&&A.css(C?{height:0,width:D}:{height:D,width:0});var q={},b={};q[y[0]]=E=="show"?x[0]:D,b[y[1]]=E=="show"?x[1]:0,A.animate(q,B,h.options.easing).animate(b,B,h.options.easing,function(){E=="hide"&&G.hide(),f.effects.restore(G,F),f.effects.removeWrapper(G),h.callback&&h.callback.apply(G[0],arguments),G.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.highlight=function(h){return this.queue(function(){var n=f(this),k=["backgroundImage","backgroundColor","opacity"],j=f.effects.setMode(n,h.options.mode||"show"),b={backgroundColor:n.css("backgroundColor")};j=="hide"&&(b.opacity=0),f.effects.save(n,k),n.show().css({backgroundImage:"none",backgroundColor:h.options.color||"#ffff99"}).animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){j=="hide"&&n.hide(),f.effects.restore(n,k),j=="show"&&!f.support.opacity&&this.style.removeAttribute("filter"),h.callback&&h.callback.apply(this,arguments),n.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.pulsate=function(h){return this.queue(function(){var x=f(this),t=f.effects.setMode(x,h.options.mode||"show"),q=(h.options.times||5)*2-1,n=h.duration?h.duration/2:f.fx.speeds._default/2,k=x.is(":visible"),j=0;k||(x.css("opacity",0).show(),j=1),(t=="hide"&&k||t=="show"&&!k)&&q--;for(var b=0;b<q;b++){x.animate({opacity:j},n,h.options.easing),j=(j+1)%2}x.animate({opacity:j},n,h.options.easing,function(){j==0&&x.hide(),h.callback&&h.callback.apply(this,arguments)}),x.queue("fx",function(){x.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.puff=function(h){return this.queue(function(){var q=f(this),n=f.effects.setMode(q,h.options.mode||"hide"),k=parseInt(h.options.percent,10)||150,j=k/100,b={height:q.height(),width:q.width()};f.extend(h.options,{fade:!0,mode:n,percent:n=="hide"?k:100,from:n=="hide"?b:{height:b.height*j,width:b.width*j}}),q.effect("scale",h.options,h.duration,h.callback),q.dequeue()})},f.effects.scale=function(h){return this.queue(function(){var z=f(this),y=f.extend(!0,{},h.options),x=f.effects.setMode(z,h.options.mode||"effect"),t=parseInt(h.options.percent,10)||(parseInt(h.options.percent,10)==0?0:x=="hide"?0:100),q=h.options.direction||"both",n=h.options.origin;x!="effect"&&(y.origin=n||["middle","center"],y.restore=!0);var k={height:z.height(),width:z.width()};z.from=h.options.from||(x=="show"?{height:0,width:0}:k);var b={y:q!="horizontal"?t/100:1,x:q!="vertical"?t/100:1};z.to={height:k.height*b.y,width:k.width*b.x},h.options.fade&&(x=="show"&&(z.from.opacity=0,z.to.opacity=1),x=="hide"&&(z.from.opacity=1,z.to.opacity=0)),y.from=z.from,y.to=z.to,y.mode=x,z.effect("size",y,h.duration,h.callback),z.dequeue()})},f.effects.size=function(h){return this.queue(function(){var I=f(this),H=["position","top","bottom","left","right","width","height","overflow","opacity"],G=["position","top","bottom","left","right","overflow","opacity"],F=["width","height","overflow"],E=["fontSize"],D=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],B=f.effects.setMode(I,h.options.mode||"effect"),A=h.options.restore||!1,z=h.options.scale||"both",y=h.options.origin,x={height:I.height(),width:I.width()};I.from=h.options.from||x,I.to=h.options.to||x;if(y){var t=f.effects.getBaseline(y,x);I.from.top=(x.height-I.from.height)*t.y,I.from.left=(x.width-I.from.width)*t.x,I.to.top=(x.height-I.to.height)*t.y,I.to.left=(x.width-I.to.width)*t.x}var b={from:{y:I.from.height/x.height,x:I.from.width/x.width},to:{y:I.to.height/x.height,x:I.to.width/x.width}};if(z=="box"||z=="both"){b.from.y!=b.to.y&&(H=H.concat(D),I.from=f.effects.setTransition(I,D,b.from.y,I.from),I.to=f.effects.setTransition(I,D,b.to.y,I.to)),b.from.x!=b.to.x&&(H=H.concat(C),I.from=f.effects.setTransition(I,C,b.from.x,I.from),I.to=f.effects.setTransition(I,C,b.to.x,I.to))}(z=="content"||z=="both")&&b.from.y!=b.to.y&&(H=H.concat(E),I.from=f.effects.setTransition(I,E,b.from.y,I.from),I.to=f.effects.setTransition(I,E,b.to.y,I.to)),f.effects.save(I,A?H:G),I.show(),f.effects.createWrapper(I),I.css("overflow","hidden").css(I.from);if(z=="content"||z=="both"){D=D.concat(["marginTop","marginBottom"]).concat(E),C=C.concat(["marginLeft","marginRight"]),F=H.concat(D).concat(C),I.find("*[width]").each(function(){var k=f(this);A&&f.effects.save(k,F);var j={height:k.height(),width:k.width()};k.from={height:j.height*b.from.y,width:j.width*b.from.x},k.to={height:j.height*b.to.y,width:j.width*b.to.x},b.from.y!=b.to.y&&(k.from=f.effects.setTransition(k,D,b.from.y,k.from),k.to=f.effects.setTransition(k,D,b.to.y,k.to)),b.from.x!=b.to.x&&(k.from=f.effects.setTransition(k,C,b.from.x,k.from),k.to=f.effects.setTransition(k,C,b.to.x,k.to)),k.css(k.from),k.animate(k.to,h.duration,h.options.easing,function(){A&&f.effects.restore(k,F)})})}I.animate(I.to,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){I.to.opacity===0&&I.css("opacity",I.from.opacity),B=="hide"&&I.hide(),f.effects.restore(I,A?H:G),f.effects.removeWrapper(I),h.callback&&h.callback.apply(this,arguments),I.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.shake=function(h){return this.queue(function(){var G=f(this),F=["position","top","bottom","left","right"],E=f.effects.setMode(G,h.options.mode||"effect"),D=h.options.direction||"left",C=h.options.distance||20,B=h.options.times||3,A=h.duration||h.options.duration||140;f.effects.save(G,F),G.show(),f.effects.createWrapper(G);var z=D=="up"||D=="down"?"top":"left",y=D=="up"||D=="left"?"pos":"neg",x={},t={},q={};x[z]=(y=="pos"?"-=":"+=")+C,t[z]=(y=="pos"?"+=":"-=")+C*2,q[z]=(y=="pos"?"-=":"+=")+C*2,G.animate(x,A,h.options.easing);for(var b=1;b<B;b++){G.animate(t,A,h.options.easing).animate(q,A,h.options.easing)}G.animate(t,A,h.options.easing).animate(x,A/2,h.options.easing,function(){f.effects.restore(G,F),f.effects.removeWrapper(G),h.callback&&h.callback.apply(this,arguments)}),G.queue("fx",function(){G.dequeue()}),G.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.slide=function(h){return this.queue(function(){var z=f(this),y=["position","top","bottom","left","right"],x=f.effects.setMode(z,h.options.mode||"show"),t=h.options.direction||"left";f.effects.save(z,y),z.show(),f.effects.createWrapper(z).css({overflow:"hidden"});var q=t=="up"||t=="down"?"top":"left",n=t=="up"||t=="left"?"pos":"neg",k=h.options.distance||(q=="top"?z.outerHeight({margin:!0}):z.outerWidth({margin:!0}));x=="show"&&z.css(q,n=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[q]=(x=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,z.animate(b,{queue:!1,duration:h.duration,easing:h.options.easing,complete:function(){x=="hide"&&z.hide(),f.effects.restore(z,y),f.effects.removeWrapper(z),h.callback&&h.callback.apply(this,arguments),z.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.effects.transfer=function(h){return this.queue(function(){var t=f(this),q=f(h.options.to),n=q.offset(),k={top:n.top,left:n.left,height:q.innerHeight(),width:q.innerWidth()},j=t.offset(),b=f('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(h.options.className).css({top:j.top,left:j.left,height:t.innerHeight(),width:t.innerWidth(),position:"absolute"}).animate(k,h.duration,h.options.easing,function(){b.remove(),h.callback&&h.callback.apply(t[0],arguments),t.dequeue()})})}})(jQuery);(function(f,e){if(f.ui&&f.ui.dialog){f.ui.dialog.overlay.events=f.map("focus,keydown,keypress".split(","),function(b){return b+".dialog-overlay"}).join(" ")}}(jQuery));(function(f){var e=f.ui.dialog.prototype._createButtons;var b=f.ui.dialog.prototype._setData;f.ui.dialog.prototype._createButtons=function(j){var h=this;e.apply(this,[j]);if(typeof(this.options.percButtons)!="undefined"&&this.options.percButtons!=null){h._createPercButtons(this.options.percButtons)}};f.ui.dialog.prototype._setData=function(j,k){var h=this;if(j=="perc-buttons"){h._createPercButtons(k)}b.apply(this,[j,k])};f.ui.dialog.prototype._createPercButtons=function(k){var j=this;var h=false;var q=window.location.protocol+"//"+window.location.host+"/cm";uiDialogButtonPane=f("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");var n={Ok:{bgimage:"url("+q+"/images/images/buttonOk.png)",bgimageOver:"url("+q+"/images/images/buttonOkOver.png)",width:"78px",height:"29px",cls:"perc-ok",display:"block"},Override:{bgimage:"url("+q+"/images/images/buttonOverride.png)",bgimageOver:"url("+q+"/images/images/buttonOverrideOver.png)",width:"126px",height:"29px",cls:"perc-ok",display:"block"},Move:{bgimage:"url("+q+"/images/images/buttonMove.png)",bgimageOver:"url("+q+"/images/images/buttonMoveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Select:{bgimage:"url("+q+"/images/images/buttonSelect.png)",bgimageOver:"url("+q+"/images/images/buttonSelectOver.png)",width:"100px",height:"29px",cls:"perc-save",display:"block"},Yes:{bgimage:"url("+q+"/images/images/buttonYes.png)",bgimageOver:"url("+q+"/images/images/buttonYesOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Preferred":{bgimage:"url("+q+"/images/images/ButtonYesBlue.png)",bgimageOver:"url("+q+"/images/images/ButtonYesBlueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Silver":{bgimage:"url("+q+"/images/images/buttonYesNoFocus.png)",bgimageOver:"url("+q+"/images/images/buttonYesOverNoFocus.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Continue:{bgimage:"url("+q+"/images/images/buttonContinue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Continue Preferred":{bgimage:"url("+q+"/images/images/buttonContinueBlue.png)",bgimageOver:"url("+q+"/images/images/buttonContinueBlueOver.png)",width:"126px",height:"29px",cls:"perc-save",display:"block"},"New Folder":{bgimage:"url("+q+"/images/images/buttonSave.gif)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.gif)",width:"auto",height:"22px",cls:"perc-save",display:"block"},Save:{bgimage:"url("+q+"/images/images/buttonSave.png)",bgimageOver:"url("+q+"/images/images/buttonSaveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Don't Save":{bgimage:"url("+q+"/images/images/buttonDontSave.png)",bgimageOver:"url("+q+"/images/images/buttonDontSaveOver.png)",width:"88px",height:"29px",cls:"perc-dont-save",display:"block"},Cancel:{bgimage:"url("+q+"/images/images/buttonCancel.gif)",bgimageOver:"url("+q+"/images/images/buttonCancelOver.gif)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"Cancel Blue":{bgimage:"url("+q+"/images/images/buttonCancelBlue.png)",bgimageOver:"url("+q+"/images/images/buttonCancelBlueOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},No:{bgimage:"url("+q+"/images/images/buttonNo.png)",bgimageOver:"url("+q+"/images/images/buttonNoOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"No Silver":{bgimage:"url("+q+"/images/images/ButtonNoSilver.png)",bgimageOver:"url("+q+"/images/images/ButtonNoSilverOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},Next:{bgimage:"url("+q+"/images/images/buttonNext.png)",bgimageOver:"url("+q+"/images/images/buttonNextOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Back:{bgimage:"url("+q+"/images/images/buttonBack.gif)",bgimageOver:"url("+q+"/images/images/buttonBack.gif)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Finish:{bgimage:"url("+q+"/images/images/buttonFinish.png)",bgimageOver:"url("+q+"/images/images/buttonFinishOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Close:{bgimage:"url("+q+"/images/images/buttonClose.png)",bgimageOver:"url("+q+"/images/images/buttonCloseOver.png)",width:"78px",height:"29px",cls:"perc-close",display:"block"},"Close Normal":{bgimage:"url("+q+"/images/images/buttonCloseNormal.png)",bgimageOver:"url("+q+"/images/images/buttonCloseNormalOver.png)",width:"78px",height:"29px",cls:"perc-close-normal",display:"block"},Done:{bgimage:"url("+q+"/images/images/buttonDone.png)",bgimageOver:"url("+q+"/images/images/buttonDoneOver.png)",width:"78px",height:"29px",cls:"perc-done",display:"block"},"Done Disabled":{bgimage:"url("+q+"/images/images/buttonDoneDisabled.png)",width:"78px",height:"29px",cls:"perc-done-disabled",display:"block"},Import:{bgimage:"url("+q+"/images/images/buttonImport.png)",bgimageOver:"url("+q+"/images/images/buttonImportOver.png)",width:"78px",height:"29px",cls:"perc-import",display:"block"},Activate:{bgimage:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",bgimageOver:"url("+q+"/images/images/perc-lmg-activate-sprites.png)",width:"78px",height:"29px",cls:"perc-activate",display:"block"},Start:{bgimage:"url("+q+"/images/images/buttonStart.png)",bgimageOver:"url("+q+"/images/images/buttonStartOver.png)",width:"78px",height:"29px",cls:"perc-start",display:"block"},Search:{bgimage:"url("+q+"/images/images/blueButtonSearch.png)",bgimageOver:"url("+q+"/images/images/blueButtonSearchOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Submit:{bgimage:"url("+q+"/images/images/buttonWfsubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfsubmitOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Approve:{bgimage:"url("+q+"/images/images/buttonWfapprove.png)",bgimageOver:"url("+q+"/images/images/buttonWfapproveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"},Reject:{bgimage:"url("+q+"/images/images/buttonWfreject.png)",bgimageOver:"url("+q+"/images/images/buttonWfrejectOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Resubmit:{bgimage:"url("+q+"/images/images/buttonWfresubmit.png)",bgimageOver:"url("+q+"/images/images/buttonWfresubmitOver.png)",width:"126px",height:"29px",cls:"perc-search",display:"block"},Archive:{bgimage:"url("+q+"/images/images/buttonWfarchive.png)",bgimageOver:"url("+q+"/images/images/buttonWfarchiveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"}};this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof k=="object"&&k!==null&&f.each(k,function(){return !(h=true)}));if(h){f.each(k,function(t,x){f("<div></div>").attr("id",x.id).css("background-image",n[t].bgimage).css("display",n[t].display).css("float","right").css("height",n[t].height).css("width",n[t].width).addClass(n[t].cls).addClass(x.cls).click(function(){x.click.apply(j.element[0],arguments)}).hover(function(){f(this).css("background-image",n[t].bgimageOver)},function(){f(this).css("background-image",n[t].bgimage)}).focus(function(){f(this).addClass("ui-state-focus")}).blur(function(){f(this).removeClass("ui-state-focus")}).appendTo(uiDialogButtonPane)});uiDialogButtonPane.appendTo(this.uiDialog)}}})(jQuery);(function(X){X.globalEventIds={"#perc_head #perc-links":"#perc_head #perc_topnav"};document.onclick=function(){X.each(X.globalEventIds,function(ay,ax){if(X(ay).hasClass("perc-visible")){X(ax).click()}})};X.ajaxSetup({cache:false});X.Percussion=X.Percussion||{};X.perc_fakes={path_service:false,page_service:{create_page:false,render_page:false,new_asset:false,get_widget_ctypes:false},template_service:{get_template_css:false,set_template_css:false}};X.perc_utils={id:ab,acop:at,acat:L,odiff:x,a_o:V,o_a:n,elem:ak,show_error:ad,alert_dialog:z,prompt_dialog:ar,confirm_dialog:al,choose_icon:M,path_id:au,input:e,handleLinks:j,handleObjects:T,select:ah,extract_path:av,extract_path_end:ag,click_and_double_click:ao,unxml:R,rexml:Z,arem:O,deep_get:H,debug:K,info:ap,error:Q,isBlankString:ae,convertCXFArray:an,encodeURL:am,preLoadImages:N,replaceURLWithHTMLLinks:y,sortCaseInsensitive:J,formatTimeFromDate:C,copyRegionObject:copyRegionObject,max:I,min:aq,addArrays:W,newArray:t,splitDateTime:ai,addAutoScroll:S,removeAutoScroll:E,formatFileSize:aa,parseUTCintoDate:aw,getDisplayFormat:b,makeFolderEditable:D,contains:U,encodePathArray:F,isPathUnderDesign:af,percParseInt:h,logToServer:k};function h(az){var ax=null;if(az){try{ax=parseInt(az,10)}catch(ay){}}return ax}function b(az){if(typeof az!=="string"){return""}var ax=az.split("/");var ay="";while(ax.length>0){ay=X.perc_displayformats[ax.join("/")];if(ay!=undefined){return ay}ax.pop()}return""}function k(ax,az,ay){if(!(X.type(ax)==="string")){return}if(ax==="debug"){K(ay)}else{if(ax==="error"){Q(ay)}else{ap(ay)}}X.PercUtilService.logToServer(ax,az,ay)}function aw(az){var ax=az.replace(/(\d\d)-(\d\d)-(\d\d)/,"$1/$2/$3").replace(/([+-]\d\d):(\d\d)/,"$1$2").replace(/\.\d\d\d/,"").replace("T"," ");var ay=new Date(ax);return ay}function ai(ay,ax){var aA=new Date(ay);if(typeof(aA)=="undefined"||isNaN(aA)){aA=aw(ay)}if(!ax){ax="M d, yy"}var az=X.datepicker.formatDate(ax,aA);var aB=C(aA);return{date:az,time:aB}}function an(ax){if(typeof(ax)=="undefined"){return[]}if(!X.isArray(ax)){return[ax]}return ax}function ae(ax){return !ax||ax==null||typeof ax!="string"||X.trim(ax).length<1}function ak(az,ay){var ax=X.grep(ay,function(aA){return aA==az});return ax.length>0}function ah(ay,ax,az){return"<label for='"+az+"'>"+ay+"</label><br/><select name='"+ax+"' id='"+az+"' ></select><br/>"}function e(ay,ax,aB,aA,az){az=az||"text";return"<label for='"+aB+"'>"+ay+"</label><br/><input type='"+az+"' name='"+ax+"' id='"+aB+"' ></input><br/>"}function av(ay){var ax=ay.split("/");if(ax.length>1&&ax[ax.length-1]==""){ax.pop()}return ax}function au(ax){return X.map(ax,function(ay){return ay}).join("-")}X.fn.perc_dialog=function(ay){ay.dialogClass="perc-dialog perc-dialog-corner-all";ay.zIndex=9500;var az=X(this).dialog(ay);var ax=az.closest(".ui-dialog");if(ay.id){ax.attr("id",ay.id)}X(window).trigger("resize").trigger("resize");return az};function Y(ax,ay){var az=X("<div/>").addClass("perc-show-again").append(X("<input/>").attr("type","checkBox").attr("id","perc_show_again_check")).append(X("<label/>").attr("for","perc_show_again_check").text("Do not show again"));X(this).parent().find(".ui-dialog-buttonpane").append(az)}function f(az){var ay=X.PercNavigationManager.getUserName();var aA="dontShowAgain-"+ay+"-"+az;var ax=X.cookie(aA);return ax=="true"}function A(az,aA){var aC=X(this).parent().find("#perc_show_again_check").is(":checked");if(aC){var ax=X.PercNavigationManager.getUserName();var ay=X(this).parent().attr("id");var aB="dontShowAgain-"+ax+"-"+ay;X.cookie(aB,"true")}}function al(az){var aB={title:"Please Confirm",question:"Do you really want to do this ?",type:"OK_CANCEL",cancel:function(){},success:function(){},showAgainCheck:false,dontShowAgainAction:null};function ay(){aB.success();aA.dialog("close");aA.remove()}function aD(){aB.cancel();aA.dialog("close");aA.remove()}X.extend(aB,az);var aC={};if(aB.type=="YES_NO"){aC={Yes:{click:ay,id:"perc-confirm-generic-yes"},No:{click:aD,id:"perc-confirm-generic-no"}}}else{if(aB.type=="YES_PREFERRED_NO"){aC={"Yes Preferred":{click:ay,id:"perc-confirm-generic-yes"},"No Silver":{click:aD,id:"perc-confirm-generic-no"}}}else{if(aB.type=="YES_NO_PREFERRED"){aC={"Yes Silver":{click:function(){aB.success();aA.remove()},id:"perc-confirm-generic-yes"},No:{click:function(){aB.cancel();aA.remove()},id:"perc-confirm-generic-no"}}}else{if(aB.type=="OK"){aC={Ok:{click:ay,id:"perc-confirm-generic-ok"}}}else{if(aB.type=="OVERRIDE_OK"){aC={Ok:{click:aD,id:"perc-confirm-generic-ok"},Override:{click:ay,id:"perc-confirm-generic-override"}}}else{if(aB.type=="SAVE_BEFORE_CONTINUE"){aC={Save:{click:function(){aB.save(ay)},id:"perc-confirm-generic-save"},Cancel:{click:aD,id:"perc-confirm-generic-cancel"},"Don't Save":{click:function(){aB.dontSaveCallback();aA.dialog("close");aA.remove()},id:"perc-confirm-generic-continue"}}}else{if(aB.type=="CANCEL_CONTINUE"){aC={Continue:{click:ay,id:"perc-confirm-generic-continue"},"Cancel Blue":{click:aD,id:"perc-confirm-generic-cancel"}}}else{if(aB.type=="CANCEL_START"){aC={Start:{click:ay,id:"perc-confirm-generic-start"},Cancel:{click:aD,id:"perc-confirm-generic-cancel"}}}else{aC={Ok:{click:ay,id:"perc-confirm-generic-ok"},Cancel:{click:aD,id:"perc-confirm-generic-cancel"}}}}}}}}}}var aA;var ax={dialogClass:"perc-confirm-dialog",title:aB.title,modal:true,resizable:false,percButtons:aC,id:aB.id};if(az.height){ax.height=az.height}if(az.width){ax.width=az.width}if(aB.showAgainCheck){if(f(ax.id)){if(typeof(az.dontShowAgainAction)=="function"){az.dontShowAgainAction()}else{az.success()}return""}ax.open=Y;ax.beforeclose=A}aA=X("<div/>").append(aB.question).perc_dialog(ax)}function z(ay){var aA={title:"Please Confirm",content:"Something is wrong!",okCallBack:function(){}};X.extend(aA,ay);var ax=(aA.width==undefined||aA.width==null)?Math.max(aA.title.length*35,400):aA.width;var az;az=X("<div/>").append(aA.content).perc_dialog({dialogClass:"perc-alert-dialog",title:aA.title,modal:true,width:ax,resizable:false,id:aA.id,percButtons:{Ok:{click:function(){az.remove();aA.okCallBack()},id:"perc-alert-generic-ok"}}})}function ar(ay){var aA={title:"Beg Pardon?",question:"I'm sorry, what was the thing you needed to do?",cancel:function(){},success:function(){}};X.extend(aA,ay);var ax=X("<input type='text' id='perc-prompt-dialog-question' />");var az=X("<div/>").append(X("<label for='perc-prompt-dialog-question'/>").append(aA.question)).append(X("<br/>")).append(ax).dialog({dialogClass:"perc-prompt-dialog",title:aA.title,modal:true,resizable:false,percButtons:{Yes:{click:function(){var aB=ax.val();az.remove();aA.success(aB)},id:"perc-prompt-generic-yes"},No:{click:function(){az.remove();aA.cancel()},id:"perc-prompt-generic-no"}},id:aA.id})}function ab(ax){return ax}function at(ax){return X.map(ax,ab)}function L(ay,ax){return at(ay).concat(at(ax))}function x(ax,ay){var az={};X.each(ax,function(aB,aA){if(!ay[aB]){az[aB]=aA}});return az}function O(ax,ay){X.each(ax,function(az){if(ax[az]===ay){delete ax[az]}})}function V(ay){var ax=[];X.each(ay,function(az){ax.push([az,this])});return ax}function n(ax){var ay={};X.each(ax,function(){ay[this.k]=this.v});return ay}function ag(ay){var ax=ay.split("/");if(ax[ax.length-1]===""){ax.pop()}return ax[ax.length-1]}function ad(ax){if(ax){alert(ax)}}X.fn.perc_button=function(){this.addClass("ui-state-default ui-corner-all").hover(function(){if(!X(this).hasClass("ui-state-disabled")){X(this).addClass("ui-state-hover")}},function(){X(this).removeClass("ui-state-hover")});return this};function aa(az){var ay=1024;var aA=(1024*1024);var ax=parseFloat(az);if(isNaN(ax)){return""}if(ax<ay){return ax+" B"}if(ax>aA){return(ax/aA).toFixed(0)+" MB"}return(ax/ay).toFixed(0)+" KB"}function M(az,ay,aA){var ax={site:"../images/images/iconWebsite.gif",folder:"../images/images/iconFolder.gif",percPage:"../images/images/iconPage.gif"};if(aA==","+X.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/iconLibrary.gif"}if(aA==","+X.perc_paths.SITES_ROOT_NO_SLASH){return"../images/images/iconWebsite.gif"}if(aA==","+X.perc_paths.DESIGN_ROOT_NO_SLASH){return"../images/images/iconDesign.png"}if(aA==",Search"){return"../images/images/searchIcon.png"}if(ay){return ay}if(az&&ax[az]){return ax[az]}if(az=="percImageAsset"){return"../images/images/genericImage.png"}if(az=="percFileAsset"||az=="percFlashAsset"){return"../images/images/genericFile.png"}if(az&&aA[1]==X.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/genericAsset.png"}if(az){return"../images/images/iconPage.gif"}return"../images/images/iconFolder.gif"}X.fn.percWidLibMaximizer=function(az){var aC="#perc-layout-menu";if($j("#tabs-3").length){aC="#tabs-3 #perc-layout-menu"}if($j(aC).parent().find(".perc-template-container").hasClass("perc-visible")){$j(aC).parent().find(".perc-template-container").removeClass("perc-visible").addClass("perc-hidden");$j(aC).parent().find("#perc-wid-lib-expander").removeClass("perc-whitebg");$j(aC).parent().find("#perc-wid-lib-minimizer").replaceWith('<a id="perc-wid-lib-maximizer" style="float: left;" href="#"></a>')}else{var ay=$j(aC).parent().find(".perc-region-library-container");if(ay.hasClass("perc-visible")){X.fn.percRegionLibraryMaximizer(az)}$j(aC).parent().find(".perc-template-container").removeClass("perc-hidden").addClass("perc-visible");$j(aC).parent().find("#perc-wid-lib-expander").addClass("perc-whitebg");$j(aC).parent().find("#perc-wid-lib-maximizer").replaceWith('<a id="perc-wid-lib-minimizer" style="float: left;" href="#"></a>')}var aA=X("#frame");var aB=X(".perc-main");var ax=X("#bottom");fixIframeHeight(aB,ax,aA)};X.fn.percRegionLibraryMaximizer=function(aC){var aB="#perc-layout-menu";if($j("#tabs-3").length){aB="#tabs-3 #perc-layout-menu"}var aH=$j(aB).parent();var aG=$j(aH.find(".perc-region-library-container"));var aF=$j(aB).parent().find(".perc-template-container");var aE=$j(aH.find("#perc-region-library-expander"));var az=$j(aH.find("#perc-region-library-maximizer"));var aD=$j(aH.find("#perc-region-library-minimizer"));if(aG.hasClass("perc-visible")){aG.removeClass("perc-visible").addClass("perc-hidden");aE.removeClass("perc-whitebg");aD.replaceWith('<a id="perc-region-library-maximizer" style="float: left;" href="#"></a>')}else{if(aF.hasClass("perc-visible")){X.fn.percWidLibMaximizer(aC)}aG.removeClass("perc-hidden").addClass("perc-visible");aE.addClass("perc-whitebg");az.replaceWith('<a id="perc-region-library-minimizer" style="float: left;" href="#"></a>')}var ay=X("#frame");var aA=X(".perc-main");var ax=X("#bottom");fixIframeHeight(aA,ax,ay)};X.fn.percOrphanAssetsMaximizer=function(aD){var aC="#perc-layout-menu";if($j("#tabs-2").length){aC="#tabs-2 #perc-content-menu"}var aG=$j(aC).parent();var aE=aG.find("#perc_asset_library");var aF=aG.find("#perc_orphan_assets_expander");if(aE.hasClass("perc-visible")){var aA=aG.find("#perc_orphan_assets_minimizer");aE.removeClass("perc-visible").addClass("perc-hidden");aF.removeClass("perc-whitebg");aA.replaceWith('<a id="perc_orphan_assets_maximizer" style="float: left;" href="#"></a>')}else{var az=aG.find("#perc_orphan_assets_maximizer");aE.removeClass("perc-hidden").addClass("perc-visible");aF.addClass("perc-whitebg");az.replaceWith('<a id="perc_orphan_assets_minimizer" style="float: left;" href="#"></a>')}var ay=X("#frame");var aB=X(".perc-main");var ax=X("#bottom");fixIframeHeight(aB,ax,ay)};function ao(aA,aB,az){var ay=false;var ax=500;aA.click(function(){if(ay){}else{ay=true;setTimeout(function(){ay=false},ax);aB()}});aA.dblclick(az)}X.fn.perc_toggle=function(ax){if(X(ax).length&&X(ax).hasClass("perc-hidden")){X(ax).removeClass("perc-hidden");X(ax).addClass("perc-visible")}else{X(ax).removeClass("perc-visible");X(ax).addClass("perc-hidden")}return this};X.fn.perc_toggle_padding=function(){var ay=X.fn.perc_toggle_padding.arguments;for(var ax=0;ax<ay.length;ax++){if(X(ay[ax]).length&&X(ay[ax]).hasClass("perc-nopadding")){X(ay[ax]).removeClass("perc-nopadding")}else{X(ay[ax]).addClass("perc-nopadding")}}return this};var q=0;function S(){X("#frame").percAutoScroll({offsetY:10,width:10,speed:10,directions:"n, s"});X("#frame").percAutoScroll.postScrollView=function(ax,ay){X("div.ui-droppable").each(function(){if(!X(this).hasClass("ui-layout-ignore")){X(this).css("top",X(this).position().top-ay)}})}}function E(){X("#frame").percAutoScroll.remove()}function R(aB,aC){if(X.isFunction(aB)){aB=aB(aC.get(0).tagName)}if(aB.valueOf()==="$"){return aC.text()}if(X.isArray(aB)){var az=[];var ay=aB[0];var aA=aC.children();if(aA.length==0&&ay=="$"){var ax=aC.length;for(i=0;i<ax;i++){az.unshift(X(aC[i]).text())}}else{aA.each(function(){var aD=R(ay,X(this));aD._tagName=X(this)[0].tagName;az.push(aD)})}return az}var az={};X.each(aB,function(aE){var aD=[];var aF=aC.children().filter(function(){aD.push(this.tagName);return this.tagName.toLowerCase()==aE.toLowerCase()});if(aF.length){az[aE]=R(this,aF)}else{K("Expected to find child: "+aE+", tags found: "+aD)}});return az}function Z(ay,ax){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+ac(ay,ax)}function ac(aA,ay,aB){if(X.isFunction(aA)){aA=aA(ay._tagName)}if(aA.valueOf()==="$"){if(!ay){K("Unexpected null in rexml");return""}else{if(typeof(ay)==="string"){return ay.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}else{return ay}}}else{if(X.isArray(aA)){var az="";if(aA.length==1&&aA[0]=="$"){var ax=ay.length;for(i=0;i<ax;i++){az+="<"+aB+">"+ay[i]+"</"+aB+">"}}else{if(X.isArray(ay)){X.each(ay,function(){az+="<"+this._tagName+">"+ac(aA[0],this,this.tagName)+"</"+this._tagName+">"})}else{K("Expected array, got %o instead",ay)}}return az}else{var az="";X.each(aA,function(aC){if(aC in ay){var aD=X.isArray(aA[aC])&&aA[aC].length==1&&(aA[aC])[0]=="$";if(!aD){az+="<"+aC+">"}az+=ac(aA[aC],ay[aC],aC);if(!aD){az+="</"+aC+">"}}else{K("Can't find "+aC+" in %o",ay)}});return az}}}function H(az,aA){var ax=aA.split(" ");var ay;while((ay=shift(ax))){if(ay in az){az=az[ay]}else{return null}}return az}function am(ax){return encodeURIComponent(ax).replace(/%2F/g,"/")}var G=false;function aj(){return G}function K(ax){if(!aj()){return}var ay;if(arguments.length>1){ay="DEBUG ["+arguments[0]+"] "+arguments[1]}else{ay="[DEBUG] "+arguments[0]}B(ay)}function ap(ax){var ay;if(arguments.length>1){ay="INFO ["+arguments[0]+"] "+arguments[1]}else{ay="[INFO] "+arguments[0]}B(ay)}function Q(ax){var ay;if(arguments.length>1){ay="ERROR ["+arguments[0]+"] "+arguments[1]}else{ay="[ERROR] "+arguments[0]}B(ay)}function B(ax){if(window.console&&console&&console.log){if(X.browser.msie){console.log(ax)}else{console.log.apply(console,arguments)}}}var P=[];function N(){var az=arguments.length;for(var ay=az;ay--;){var ax=document.createElement("img");ax.src=arguments[ay];P.push(ax)}}function y(ay){var ax=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return ay.replace(ax,"<a href='$1'>$1</a>")}function T(ay){var ax=0;ay.contents().find(".perc-flash").find("object").each(function(){ax++;var aE=X(this).attr("width");var aA=X(this).attr("height");var az=aE;var aC=aA;if(aE==""){var aB=X(this).children("embed").attr("width");if(aB==""){az="100%"}else{az=aB}}if(aA==""){var aD=X(this).children("embed").attr("height");if(aD==""){aC="100%"}else{aC=aD}}if(az.lastIndexOf("%")<0&&az.lastIndexOf("px")<0){az=az+"px"}if(aC.lastIndexOf("%")<0&&aC.lastIndexOf("px")<0){aC=aC+"px"}X(this).replaceWith(X('<div id="perc-object-placeholder-'+ax+'" class="perc-object-placeholder" style="width: '+az+"; height: "+aC+';"></div>'))})}function j(ax){ax.contents().find("a").each(function(){var ay=X(this).attr("href");X(this).attr("tempURL",ay);X(this).removeAttr("target");X(this).attr("href","javascript:void(0)")});if(X.browser.msie){ax.contents().find("iframe").each(function(){var ay=X(this).attr("src");if(ay.length>0){var az="wmode=transparent";if(ay.indexOf("?")!=-1){X(this).attr("src",ay+"&"+az)}else{X(this).attr("src",ay+"?"+az)}}})}}function J(ax){if(X.isArray(ax)){ax.sort(function(az,aB){var aA=String(az).toUpperCase();var ay=String(aB).toUpperCase();if(aA>ay){return 1}if(aA<ay){return -1}return 0})}}function C(aA,ay){var aC;var ax=aA.getHours();var aB=aA.getMinutes();var aD=aA.getSeconds();var az=(ax>=12?" PM":" AM");aB=(aB<10?"0":"")+aB;ax=ax%12;if(ax==0){ax=12}aC=ax+":"+aB;if(ay){aC+=":"+(aD<10?"0"+aD:aD)}aC+=az;return aC}function I(ay){var ax=-1;for(a=0;a<ay.length;a++){if(ax<ay[a]){ax=ay[a]}}return ax}function aq(ay){var ax=10000000;for(a=0;a<ay.length;a++){if(ay[a]<ax){ax=ay[a]}}return ax}function W(az,ax){var ay=[];for(i=0;i<az.length;i++){ay[i]=az[i]+ax[i]}return ay}function t(ax){var ay=new Array(ax);for(i=0;i<ax;i++){ay[i]=0}return ay}X.percHideBodyScrollbars=function(){X("body").css("overflow","hidden")};X.percShowBodyScrollbars=function(){X("body").css("position","").css("overflow","")};function D(az){var aA=X("#perc-finder-listing-"+az.id);var ax=aA.children(".perc-finder-item-name");var ay=az.type;ax.editable(function(aE,aC){var aE=X.trim(aE);aE=X.perc_textFilters.WINDOWS_FILE_NAME(aE);if(ay!="FSFolder"){aE=aE.replace(/ /g,"-")}var aD=X(this);var aB=aD.parent().attr("title");if(aE.length==0){return aB}if(aE!=aB){X.PercBlockUI(X.PercBlockUIMode.CURSORONLY);X.PercPathService.renameFolder(az.path,aE,function(aG,aF,aI){if(aG==X.PercServiceUtils.STATUS_SUCCESS){var aJ=X.perc_finder().lastClickPath;if(X.perc_finder().lastClickPath==null){aJ=aF.PathItem.path.split("/");aJ.push(aE)}X.perc_finder().lastClickPath=null;X.perc_finder().open(aJ);X.unblockUI()}else{aD.text(aB);X.unblockUI();var aH="";if(aI=="renameFolderItem.reservedName"||aI=="renameFolderItem.longName"||aI=="renameFolderItem.invalidCharInName"){aH=aF.replace("<old_name>",aB).replace("<new_name>",aE)}else{aH="Cannot rename folder '"+aB+"' to '"+aE+"' because an object with the same name already exists."}X.perc_utils.alert_dialog({id:"perc-finder-rename-folder-error",title:"Error",content:aH})}})}else{X.perc_finder().refresh()}return aE},{type:"filteredText",event:"dblclick",height:"14px",width:"125px",select:true,onblur:"submit",fieldid:"perc_finder_inline_field_edit",onedit:function(aB){X("#perc_finder_inline_field_edit").blur()},data:function(aC,aB){return X(this).parent().attr("title")}});X("#perc-finder-listing-"+az.id).children(".perc-finder-item-name").trigger("dblclick")}function U(ax,aA){var ay=ax.entries;if(!X.isArray(ay)){var az=[];az.push(ay);ay=az}for(i=0;i<ay.length;i++){if(ay[i].value==aA){return true}}return false}function F(ax){if(typeof(ax)=="undefined"){return}var ay=[];X(ax).each(function(az,aB){var aA=am(aB);ay.push(aA)});return ay}function af(ax){if(ax.length==0){return false}if(ax[1]=="Design"){return true}else{return false}}})(jQuery);function copyRegionObject(e,b){b.vertical=e.vertical;b.children=e.children;b.widgets=e.widgets;b.width=e.width;b.height=e.height;b.owner=e.owner}function htmlEntities(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#39;")}(function(b){b.perc_sessionTimeout=function(j){var q={serverCheck:10,sessionStateUrl:"/Rhythmyx/sessioncheck",logoutUrl:"/Rhythmyx/logout",dialogTitle:"Are you still there?",dialogMessageTimeout:"You will be automatically logged out in"};var y=q;if(j){y=b.extend(q,j)}var C={expiry:0,warning:0,counter:0};var E=null;var t;var z;var A=new Date().getTime();var e=(window.opener&&window.opener!==window);function h(I){var J="";if(I){J="extendSession=true";x()}var H=new Date().getTime();b.ajax({url:y.sessionStateUrl,type:"get",cache:false,data:J,contentType:"application/json; charset=utf-8",dataType:"json",success:function(K){C=K;A=H;B()},error:function(K,M,L){console.log("error :"+K.responseText);C.expiry=C.expiry+H-A;A=H;B()}})}function B(){if(C.expiry<=0){F()}else{if(C.expiry<C.warning){if(E===null){D()}}else{if(E!==null){x()}window.clearInterval(z);if(C.warning<C.expiry){z=window.setTimeout(function(){h(false)},C.expiry-C.warning)}}}}function f(){var I=new Date().getTime();var H=(I-A);var J=C.expiry-H;if(J>0){b("#logouttime").html(k(J));if(H>y.serverCheck*1000){h(false)}}else{x();h(false)}}function D(){E=n();window.clearInterval(t);f();t=window.setInterval(function(){f()},1000)}function x(){window.clearInterval(t);if(E!==null){E.remove();E=null}}function k(K){var L=Math.floor((K/1000)%60);var J=Math.floor((K/1000/60)%60);var H=Math.floor((K/(1000*60*60))%24);var I="";if(H>0){I+=H+" hour";if(H>1){I+="s"}I+=" "}return I+J+" min "+L+"s"}function F(){x();if(e){b.get("/Rhythmyx/logout",function(H){window.close()})}else{top.document.location.href="/Rhythmyx/logout"}}function G(){x();h(true)}function n(){E=H();function H(){var I="<div id='perc-session-timeout-content'><p>"+y.dialogMessageTimeout+'</p><p><span id="logouttime"/></p></div>';var J=b(I).perc_dialog({title:y.dialogTitle,id:"perc-session-timeout-dialog",width:400,resizable:false,modal:true,buttons:{"Extend Session":function(){G()},Logout:function(){F()}}});return b(J)}return E}h(false)}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,B){var n,C=B.location,y=Array.prototype.slice,E=decodeURIComponent,b=$.param,f,x,I,e=$.bbq=$.bbq||{},D,H,q,j=$.event.special,h="hashchange",N="querystring",Q="fragment",L="elemUrlAttr",t="href",G="src",K=/^.*\?|#.*$/g,J=/^.*\#/,P={};function R(S){return typeof S==="string"}function O(T){var S=y.call(arguments,1);return function(){return T.apply(this,S.concat(y.call(arguments)))}}function z(S){return S.replace(/^[^#]*#?(.*)$/,"$1")}function A(S){return S.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function k(U,Z,S,V,T){var ab,Y,X,aa,W;if(V!==n){X=S.match(U?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);W=X[3]||"";if(T===2&&R(V)){Y=V.replace(U?J:K,"")}else{aa=x(X[2]);V=R(V)?x[U?Q:N](V):V;Y=T===2?V:T===1?$.extend({},V,aa):$.extend({},aa,V);Y=b(Y)}ab=X[1]+(U?"#":Y||!X[1]?"?":"")+Y+W}else{ab=Z(S!==n?S:C[t])}return ab}b[N]=O(k,0,A);b[Q]=f=O(k,1,z);$.deparam=x=function(V,S){var U={},T={"true":!0,"false":!1,"null":null};$.each(V.replace(/\+/g," ").split("&"),function(Y,ad){var X=ad.split("="),ac=E(X[0]),W,ab=U,Z=0,ae=ac.split("]["),aa=ae.length-1;if(/\[/.test(ae[0])&&/\]$/.test(ae[aa])){ae[aa]=ae[aa].replace(/\]$/,"");ae=ae.shift().split("[").concat(ae);aa=ae.length-1}else{aa=0}if(X.length===2){W=E(X[1]);if(S){W=W&&!isNaN(W)?+W:W==="undefined"?n:T[W]!==n?T[W]:W}if(aa){for(;Z<=aa;Z++){ac=ae[Z]===""?ab.length:ae[Z];ab=ab[ac]=Z<aa?ab[ac]||(ae[Z+1]&&isNaN(ae[Z+1])?{}:[]):W}}else{if($.isArray(U[ac])){U[ac].push(W)}else{if(U[ac]!==n){U[ac]=[U[ac],W]}else{U[ac]=W}}}}else{if(ac){U[ac]=S?n:""}}});return U};function M(U,S,T){if(S===n||typeof S==="boolean"){T=S;S=b[U?Q:N]()}else{S=R(S)?S.replace(U?J:K,""):S}return x(S,T)}x[N]=O(M,0);x[Q]=I=O(M,1);$[L]||($[L]=function(S){return $.extend(P,S)})({a:t,base:t,iframe:G,img:G,input:G,form:"action",link:t,script:G});q=$[L];function F(V,T,U,S){if(!R(U)&&typeof U!=="object"){S=U;U=T;T=n}return this.each(function(){var Y=$(this),W=T||q()[(this.nodeName||"").toLowerCase()]||"",X=W&&Y.attr(W)||"";Y.attr(W,b[V](X,U,S))})}$.fn[N]=O(F,N);$.fn[Q]=O(F,Q);e.pushState=D=function(V,S){if(R(V)&&/^#/.test(V)&&S===n){S=2}var U=V!==n,T=f(C[t],U?V:{},U?S:2);C[t]=T+(/#/.test(T)?"":"#")};e.getState=H=function(S,T){return S===n||typeof S==="boolean"?I(S):I(T)[S]};e.removeState=function(S){var T={};if(S!==n){T=H();$.each($.isArray(S)?S:arguments,function(V,U){delete T[U]})}D(T,2)};j[h]=$.extend(j[h],{add:function(S,U,T){return function(W){var V=W[Q]=f();W.getState=function(X,Y){return X===n||typeof X==="boolean"?x(V,X):x(V,Y)[X]};S.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,n){var k=n.location,q,t=$.event.special,e="hashchange",h=$.browser,j=h.msie&&h.version<8,f="on"+e in n&&!j;function b(x){x=x||k.href;return x.replace(/^[^#]*#?(.*)$/,"$1")}$[e+"Delay"]=100;t[e]=$.extend(t[e],{setup:function(){if(f){return false}q.start()},teardown:function(){if(f){return false}q.stop()}});q=(function(){var x={},C,y,z,B;function A(){z=B=function(D){return D};if(j){y=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;B=function(){return b(y.document.location.href)};z=function(F,D){if(F!==D){var E=y.document;E.open().close();E.location.hash="#"+F}};z(b())}}x.start=function(){if(C){return}var E=b();z||A();(function D(){var G=b(),F=B(E);if(G!==E){z(E=G,F);$(n).trigger(e)}else{if(F!==E){k.href=k.href.replace(/#.*/,"")+"#"+F}}C=setTimeout(D,$[e+"Delay"])})()};x.stop=function(){if(!y){C&&clearTimeout(C);C=0}};return x})()})(jQuery,this);jQuery.cookie=function(e,t,z){if(typeof t!="undefined"){z=z||{};if(t===null){t="";z.expires=-1}var j="";if(z.expires&&(typeof z.expires=="number"||z.expires.toUTCString)){var k;if(typeof z.expires=="number"){k=new Date();k.setTime(k.getTime()+(z.expires*24*60*60*1000))}else{k=z.expires}j="; expires="+k.toUTCString()}var y=z.path?"; path="+(z.path):"";var n=z.domain?"; domain="+(z.domain):"";var b=z.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),j,y,n,b].join("")}else{var h=null;if(document.cookie&&document.cookie!=""){var x=document.cookie.split(";");for(var q=0;q<x.length;q++){var f=jQuery.trim(x[q]);if(f.substring(0,e.length+1)==(e+"=")){h=decodeURIComponent(f.substring(e.length+1));break}}}return h}};(function(j){var F="success";var h="error";var B="abort";var G="DELETE";var e="GET";var f="POST";var n="PUT";j.PercServiceUtils={STATUS_ERROR:h,STATUS_SUCCESS:F,STATUS_ABORT:B,TYPE_DELETE:G,TYPE_GET:e,TYPE_POST:f,TYPE_PUT:n,makeJsonRequest:t,makeXmlRequest:E,makeRequest:D,makeXdmJsonRequest:q,makeDeleteRequest:k,extractDefaultErrorMessage:z,extractFieldErrorCode:b,extractGlobalErrorCode:y,makeXdmXmlRequest:C,convertMapToArray:A};j.ajaxSetup({timeout:60000});function t(K,P,R,S,L,M,Q){var T=this;var J=j.isFunction(j.getCm1License)?j.getCm1License():"";var N=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var I=j.perc_utils.percParseInt(Q);var O={dataType:"json",async:!R,contentType:"application/json",type:P,url:K,headers:{"perc-tid":J,"perc-version":N},success:function(W,V){var U={data:W,textstatus:V};S(T.STATUS_SUCCESS,U)},error:function(X,V,W){if(X.status==204||X.status==1223){var U={data:{},textstatus:X.statusText};S(T.STATUS_SUCCESS,U);return}else{if(X.status>0){var U={request:X,textstatus:V,error:W};S(T.STATUS_ERROR,U)}else{if(j.isFunction(M)){M(T.STATUS_ABORT)}}}}};if(L){j.extend(O,{data:JSON.stringify(L)})}if(I){j.extend(O,{timeout:I})}return j.ajax(O)}function D(J,P,Q,T,K,S,R,N,L){var U=this;var I=j.isFunction(j.getCm1License)?j.getCm1License():"";var M=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var O={dataType:R,async:!Q,contentType:S,type:P,url:(N)?J:escape(J),headers:{"perc-tid":I,"perc-version":M},success:function(X,W){var V={data:X,textstatus:W};T(U.STATUS_SUCCESS,V)},error:function(Y,W,X){if(Y.status==204||Y.status==1223){var V={data:{},textstatus:Y.statusText};T(U.STATUS_SUCCESS,V);return}else{if(Y.status>0){var V={request:Y,textstatus:W,error:X};T(U.STATUS_ERROR,V)}else{if(j.isFunction(L)){L(U.STATUS_ABORT)}}}}};if(K){j.extend(O,{data:JSON.stringify(K)})}j.ajax(O)}function C(L,J,P,Q,M){var R=this;var K=j.isFunction(j.getCm1License)?j.getCm1License():"";var O=j.isFunction(j.getCm1Version)?j.getCm1Version():"";if(typeof(easyXDM)=="undefined"){R.makeJsonRequest(J,P,false,Q,M);return}if(Q==null||typeof(Q)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(P==R.TYPE_GET||P==R.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(L==null||typeof(L)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){L=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var N=new easyXDM.Rpc({remote:L+"/perc-common-ui/cors/"},{remote:{request:{}}});var I={url:J,headers:{"Content-Type":"application/json",Accept:"application/xml,text/plain","perc-tid":K,"perc-version":O},method:P,timeout:60000};if(M!=null&&M!=""&&typeof(M)!="undefined"){I.data=easyXDM.getJSONObject().stringify(M)}N.request(I,function(S){var T=S.headers["Content-Type"]=="application/json";var U={data:T?JSON.parse(S.data):S.data,status:S.status};Q(R.STATUS_SUCCESS,U)},function(S){var T={message:S.message,status:S.status};Q(R.STATUS_ERROR,T)})}function q(L,J,P,Q,M){var R=this;var K=j.isFunction(j.getCm1License)?j.getCm1License():"";var O=j.isFunction(j.getCm1Version)?j.getCm1Version():"";if(typeof(easyXDM)=="undefined"){R.makeJsonRequest(J,P,false,Q,M);return}if(Q==null||typeof(Q)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(P==R.TYPE_GET||P==R.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(L==null||typeof(L)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){L=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var N=new easyXDM.Rpc({remote:L+"/perc-common-ui/cors/"},{remote:{request:{}}});var I={url:J,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":K,"perc-version":O},method:P,timeout:60000};if(M!=null&&M!=""&&typeof(M)!="undefined"){I.data=easyXDM.getJSONObject().stringify(M)}N.request(I,function(S){var T=S.headers["Content-Type"]=="application/json";var U={data:T?JSON.parse(S.data):S.data,status:S.status};Q(R.STATUS_SUCCESS,U)},function(S){var T={message:S.message,status:S.status};Q(R.STATUS_ERROR,T)})}function E(I,O,P,Q,L,K){var R=this;var J=j.isFunction(j.getCm1License)?j.getCm1License():"";var M=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var N={dataType:"xml",async:!P,contentType:"text/xml",type:O,url:I,headers:{"perc-tid":J,"perc-version":M},success:function(U,T){var S={data:U,textstatus:T};Q(R.STATUS_SUCCESS,S)},error:function(V,T,U){if(V.status>0){var S={request:V,textstatus:T,error:U};Q(R.STATUS_ERROR,S)}else{if(j.isFunction(K)){K(R.STATUS_ABORT)}}}};if(L){j.extend(N,{data:L})}j.ajax(N)}function k(I,O,P,L,K){var Q=this;var J=j.isFunction(j.getCm1License)?j.getCm1License():"";var M=j.isFunction(j.getCm1Version)?j.getCm1Version():"";var N={dataType:"text",async:!O,contentType:"text/xml",type:Q.TYPE_DELETE,url:I,headers:{"perc-tid":J,"perc-version":M},success:function(T,S){var R={data:T,textstatus:S};P(Q.STATUS_SUCCESS,R)},error:function(U,S,T){if(U.status>0){var R={request:U,textstatus:S,error:T};P(Q.STATUS_ERROR,R)}else{if(j.isFunction(K)){K(Q.STATUS_ABORT)}}}};if(L){j.extend(N,{data:L})}j.ajax(N)}function z(L){var P="";if(L==null||typeof(L)=="undefined"){return""}if(typeof(L.responseText)=="undefined"&&typeof(L.message)!="undefined"){L.responseText=L.message}if(L.responseText==null||L.responseText.length==0){return""}var K=null;try{K=JSON.parse(L.responseText);if(j.browser.msie&&!K&&typeof(L.responseText)=="string"&&L.responseText.length>0){return L.responseText}}catch(O){}if(K!=null&&K.Errors){var N="";if(typeof(K.defaultMessage)!="undefined"){N=K.defaultMessage}else{if(typeof(K.Errors.globalError.defaultMessage)!="undefined"){N=K.Errors.globalError.defaultMessage}else{if(typeof(K.Errors.localizedMessage)!="undefined"){N=K.Errors.localizedMessage}else{if(typeof(K.Errors.globalError.code)!="undefined"){var M=L.status==500?"Server Error: ":"";N=M+K.Errors.globalError.code}}}}P+=N}else{if(K!=null&&K.ValidationErrors!=undefined){var J=K.ValidationErrors;if(J.fieldErrors!=undefined){P+=x(J.fieldErrors)}else{if(J.globalErrors!=undefined){P+=x(J.globalErrors)}else{if(J.globalError!=undefined){P+=x(J.globalError)}}}}}var I;if(typeof(L.responseText)!="undefined"&&L.responseText.indexOf("<?xml")!=-1){I=j(L.responseText)}else{if(typeof(L)=="string"&&L.indexOf("<?xml")!=-1){I=j(L)}}if(typeof(I)!="undefined"&&I.is("ValidationErrors")){if(I.find("globalErrors").find("defaultMessage").text()!=""){P+=I.find("globalErrors").find("defaultMessage").text()}else{if(I.find("globalError").find("defaultMessage").text()!=""){P+=I.find("globalError").find("defaultMessage").text()!=""}else{if(I.next("defaultMessage")){P+=I.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(P==""){P=L.responseText}return P}function x(I){I=j.makeArray(I);var J="";for(var K=0;K<I.length;K++){var L=I[K];if(L.defaultMessage){J+=H(L.defaultMessage,L.arguments)}else{if(L.code){J+=L.code}}}return J}function H(L,I){I=j.makeArray(I);var K="";for(var J=0;J<I.length;J++){K=new RegExp("\\{"+J+"\\}","g");L=L.replace(K,I[J])}return L}function b(K){var J=JSON.parse(K.responseText);if(J.ValidationErrors==undefined){return""}var I=J.ValidationErrors;if(I.fieldErrors!=undefined){return I.fieldErrors.code}return""}function y(K){var J=JSON.parse(K.responseText);if(J.ValidationErrors==undefined){return""}var I=J.ValidationErrors;if(I.globalError!=undefined){return I.globalError.code}return""}function A(J){var K=[];if(j.isArray(J.entry)){K=J.entry}else{if(J.entry){K.push(J.entry)}}var I=[];j(K).each(function(){I[this.key]=this.value});return I}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:500,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.curCSS($E[0],"display",true)=="none"){hidden=true;visibility=$.curCSS($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.curCSS($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.curCSS($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.curCSS($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.curCSS($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.curCSS($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");input.attr("id",settings.fieldid);$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}textarea.attr("id",settings.fieldid);$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");select.attr("id",settings.fieldid);$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},fieldid:"jeditable_inline_field"}})(jQuery);(function(e){e.tools=e.tools||{};e.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var f;function b(C,A){var F=this,D=e(this),h=!A.vertical,j=C.children(),y=0,t;if(!f){f=F}e.each(A,function(G,H){if(e.isFunction(H)){D.bind(G,H)}});if(j.length>1){j=e(A.items,C)}function z(H){var G=e(H);return A.globalNav?G:C.parent().find(H)}C.data("finder",z);var k=z(A.prev),q=z(A.next),n=z(A.prevPage),B=z(A.nextPage);e.extend(F,{getIndex:function(){return y},getClickIndex:function(){var G=F.getItems();return G.index(G.filter("."+A.activeClass))},getConf:function(){return A},getSize:function(){return F.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/A.size)},getPageIndex:function(){return Math.ceil(y/A.size)},getNaviButtons:function(){return k.add(q).add(n).add(B)},getRoot:function(){return C},getItemWrap:function(){return j},updateItemWrap:function(){j=F.getRoot().children()},getItems:function(){return j.children(A.item)},getVisibleItems:function(){return F.getItems().slice(y,y+A.size)},seekTo:function(G,K,H){if(G<0){G=0}if(y===G){return F}if(e.isFunction(K)){H=K}if(G>F.getSize()-A.size){return A.loop?F.begin():this.end()}var I=F.getItems().eq(G);if(!I.length){return F}var J=e.Event("onBeforeSeek");D.trigger(J,[G]);if(J.isDefaultPrevented()){return F}if(K===undefined||e.isFunction(K)){K=A.speed}function L(){if(H){H.call(F,G)}D.trigger("onSeek",[G])}if(h){j.animate({left:-I.position().left},K,A.easing,L)}else{j.animate({top:-I.position().top},K,A.easing,L)}f=F;y=G;J=e.Event("onStart");D.trigger(J,[G]);if(J.isDefaultPrevented()){return F}k.add(n).toggleClass(A.disabledClass,G===0);q.add(B).toggleClass(A.disabledClass,G>=F.getSize()-A.size);return F},move:function(I,H,G){t=I>0;return this.seekTo(y+I,H,G)},next:function(H,G){return this.move(1,H,G)},prev:function(H,G){return this.move(-1,H,G)},movePage:function(K,J,I){t=K>0;var G=A.size*K;var H=y%A.size;if(H>0){G+=(K>0?-H:A.size-H)}return this.move(G,J,I)},prevPage:function(H,G){return this.movePage(-1,H,G)},nextPage:function(H,G){return this.movePage(1,H,G)},setPage:function(H,I,G){return this.seekTo(H*A.size,I,G)},begin:function(H,G){t=false;return this.seekTo(0,H,G)},end:function(H,G){t=true;var I=this.getSize()-A.size;return I>0?this.seekTo(I,H,G):F},reload:function(){D.trigger("onReload");return F},focus:function(){f=F;return F},click:function(I){var J=F.getItems().eq(I),G=A.activeClass,H=A.size;if(I<0||I>=F.getSize()){return F}if(H==1){if(A.loop){return F.next()}if(I===0||I==F.getSize()-1){t=(t===undefined)?true:!t}return t===false?F.prev():F.next()}if(H==2){if(I==y){I--}F.getItems().removeClass(G);J.addClass(G);return F.seekTo(I,time,fn)}if(!J.hasClass(G)){F.getItems().removeClass(G);J.addClass(G);var L=Math.floor(H/2);var K=I-L;if(K>F.getSize()-H){K=F.getSize()-H}if(K!==I){return F.seekTo(K)}}return F},bind:function(G,H){D.bind(G,H);return F},unbind:function(G){D.unbind(G);return F}});e.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(G,H){F[H]=function(I){return F.bind(H,I)}});k.addClass(A.disabledClass).click(function(){F.prev()});q.click(function(){F.next()});B.click(function(){F.nextPage()});if(F.getSize()<A.size){q.add(B).addClass(A.disabledClass)}n.addClass(A.disabledClass).click(function(){F.prevPage()});var x=A.hoverClass,E="keydown."+Math.random().toString().substring(10);F.onReload(function(){if(x){F.getItems().hover(function(){e(this).addClass(x)},function(){e(this).removeClass(x)})}if(A.clickable){F.getItems().each(function(G){e(this).unbind("click.scrollable").bind("click.scrollable",function(H){if(e(H.target).is("a")){return}return F.click(G)})})}if(A.keyboard){e(document).unbind(E).bind(E,function(G){if(G.altKey||G.ctrlKey){return}if(A.keyboard!="static"&&f!=F){return}var H=A.keyboardSteps;if(h&&(G.keyCode==37||G.keyCode==39)){F.move(G.keyCode==37?-H:H);return G.preventDefault()}if(!h&&(G.keyCode==38||G.keyCode==40)){F.move(G.keyCode==38?-H:H);return G.preventDefault()}return true})}else{e(document).unbind(E)}});F.reload()}e.fn.scrollable=function(h){var j=this.eq(typeof h=="number"?h:0).data("scrollable");if(j){return j}var k=e.extend({},e.tools.scrollable.conf);h=e.extend(k,h);h.keyboardSteps=h.keyboardSteps||h.size;this.each(function(){j=new b(e(this),h);e(this).data("scrollable",j)});return h.api?j:this}})(jQuery);(function(e){e.fn.wheel=function(j){return this[j?"bind":"trigger"]("wheel",j)};e.event.special.wheel={setup:function(){e.event.add(this,h,f,{})},teardown:function(){e.event.remove(this,h,f)}};var h=!e.browser.mozilla?"mousewheel":"DOMMouseScroll"+(e.browser.version<"1.9"?" mousemove":"");function f(j){switch(j.type){case"mousemove":return e.extend(j.data,{clientX:j.clientX,clientY:j.clientY,pageX:j.pageX,pageY:j.pageY});case"DOMMouseScroll":e.extend(j,j.data);j.delta=-j.detail/3;break;case"mousewheel":j.delta=j.wheelDelta/120;break}j.type="wheel";return e.event.handle.call(this,j,j.delta)}var b=e.tools.scrollable;b.plugins=b.plugins||{};b.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};e.fn.mousewheel=function(k){var n=e.extend({},b.plugins.mousewheel.conf),j;if(typeof k=="number"){k={speed:k}}k=e.extend(n,k);this.each(function(){var q=e(this).scrollable();if(q){j=q}q.getRoot().wheel(function(t,x){q.move(x<0?1:-1,k.speed||50);return false})});return k.api?j:this}})(jQuery);
/* jQuery Validation Plugin - v1.10.0 - 9/7/2012
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2012 Jrn Zaefferer; Licensed MIT, GPL */
(function(b){b.extend(b.fn,{validate:function(e){if(!this.length){e&&e.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var f=b.data(this[0],"validator");return f?f:(this.attr("novalidate","novalidate"),f=new b.validator(e,this[0]),b.data(this[0],"validator",f),f.settings.onsubmit&&(this.validateDelegate(":submit","click",function(h){f.settings.submitHandler&&(f.submitButton=h.target),b(h.target).hasClass("cancel")&&(f.cancelSubmit=!0)}),this.submit(function(h){function j(){var k;return f.settings.submitHandler?(f.submitButton&&(k=b("<input type='hidden'/>").attr("name",f.submitButton.name).val(f.submitButton.value).appendTo(f.currentForm)),f.settings.submitHandler.call(f,f.currentForm,h),f.submitButton&&k.remove(),!1):!0}return f.settings.debug&&h.preventDefault(),f.cancelSubmit?(f.cancelSubmit=!1,j()):f.form()?f.pendingRequest?(f.formSubmitted=!0,!1):j():(f.focusInvalid(),!1)})),f)},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}var e=!0,f=b(this[0].form).validate();return this.each(function(){e&=f.element(this)}),e},removeAttrs:function(e){var h={},f=this;return b.each(e.split(/\s/),function(k,j){h[j]=f.attr(j),f.removeAttr(j)}),h},rules:function(B,A){var z=this[0];if(B){var y=b.data(z.form,"validator").settings,x=y.rules,t=b.validator.staticRules(z);switch(B){case"add":b.extend(t,b.validator.normalizeRule(A)),x[z.name]=t,A.messages&&(y.messages[z.name]=b.extend(y.messages[z.name],A.messages));break;case"remove":if(!A){return delete x[z.name],t}var q={};return b.each(A.split(/\s/),function(f,e){q[e]=t[e],delete t[e]}),q}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(z),b.validator.classRules(z),b.validator.attributeRules(z),b.validator.staticRules(z)),z);if(n.required){var k=n.required;delete n.required,n=b.extend({required:k},n)}return n}}),b.extend(b.expr[":"],{blank:function(e){return !b.trim(""+e.value)},filled:function(e){return !!b.trim(""+e.value)},unchecked:function(e){return !e.checked}}),b.validator=function(e,f){this.settings=b.extend(!0,{},b.validator.defaults,e),this.currentForm=f,this.init()},b.validator.format=function(e,f){return arguments.length===1?function(){var h=b.makeArray(arguments);return h.unshift(e),b.validator.format.apply(this,h)}:(arguments.length>2&&f.constructor!==Array&&(f=b.makeArray(arguments).slice(1)),f.constructor!==Array&&(f=[f]),b.each(f,function(h,j){e=e.replace(new RegExp("\\{"+h+"\\}","g"),j)}),e)},b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(f,e){this.lastActive=f,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,f,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(f)).hide())},onfocusout:function(f,e){!this.checkable(f)&&(f.name in this.submitted||!this.optional(f))&&this.element(f)},onkeyup:function(f,e){if(e.which===9&&this.elementValue(f)===""){return}(f.name in this.submitted||f===this.lastActive)&&this.element(f)},onclick:function(f,e){f.name in this.submitted?this.element(f):f.parentNode.name in this.submitted&&this.element(f.parentNode)},highlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).addClass(h).removeClass(f):b(e).addClass(h).removeClass(f)},unhighlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).removeClass(h).addClass(f):b(e).removeClass(h).addClass(f)}},setDefaults:function(e){b.extend(b.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function f(j){var n=b.data(this[0].form,"validator"),k="on"+j.type.replace(/^validate/,"");n.settings[k]&&n.settings[k].call(n,this[0],j)}this.labelContainer=b(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm),this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};b.each(this.settings.groups,function(k,j){b.each(j.split(/\s/),function(n,q){e[q]=k})});var h=this.settings.rules;b.each(h,function(j,k){h[j]=b.validator.normalizeRule(k)}),b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f),this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),b.extend(this.submitted,this.errorMap),this.invalid=b.extend({},this.errorMap),this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var f=0,e=this.currentElements=this.elements();e[f];f++){this.check(e[f])}return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=b(e);var f=this.check(e)!==!1;return f?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),f},showErrors:function(e){if(e){b.extend(this.errorMap,e),this.errorList=[];for(var f in e){this.errorList.push({message:e[f],element:this.findByName(f)[0]})}this.successList=b.grep(this.successList,function(h){return !(h.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(f){var e=0;for(var h in f){e++}return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var e=this.lastActive;return e&&b.grep(this.errorList,function(f){return f.element.name===e.name}).length===1&&e},elements:function(){var e=this,f={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in f||!e.objectLength(b(this).rules())?!1:(f[this.name]=!0,!0)})},clean:function(e){return b(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=b([]),this.toHide=b([]),this.currentElements=b([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var h=b(e).attr("type"),f=b(e).val();return h==="radio"||h==="checkbox"?b('input[name="'+b(e).attr("name")+'"]:checked').val():typeof f=="string"?f.replace(/\r/g,""):f},check:function(j){j=this.validationTargetFor(this.clean(j));var z=b(j).rules(),y=!1,x=this.elementValue(j),t;for(var q in z){var n={method:q,parameters:z[q]};try{t=b.validator.methods[q].call(this,x,j,n.parameters);if(t==="dependency-mismatch"){y=!0;continue}y=!1;if(t==="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!t){return this.formatAndAdd(j,n),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+n.method+"' method",k),k}}if(y){return}return this.objectLength(z)&&this.successList.push(j),!0},customMetaMessage:function(e,h){if(!b.metadata){return}var f=this.settings.meta?b(e).metadata()[this.settings.meta]:b(e).metadata();return f&&f.messages&&f.messages[h]},customDataMessage:function(e,f){return b(e).data("msg-"+f.toLowerCase())||e.attributes&&b(e).attr("data-msg-"+f.toLowerCase())},customMessage:function(f,e){var h=this.settings.messages[f];return h&&(h.constructor===String?h:h[e])},findDefined:function(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined){return arguments[e]}}return undefined},defaultMessage:function(e,f){return this.findDefined(this.customMessage(e.name,f),this.customDataMessage(e,f),this.customMetaMessage(e,f),!this.settings.ignoreTitle&&e.title||undefined,b.validator.messages[f],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(f,k){var j=this.defaultMessage(f,k.method),h=/\$?\{(\d+)\}/g;typeof j=="function"?j=j.call(this,k.parameters,f):h.test(j)&&(j=b.validator.format(j.replace(h,"{$1}"),k.parameters)),this.errorList.push({message:j,element:f}),this.errorMap[f.name]=j,this.submitted[f.name]=j},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var f,e;for(f=0;this.errorList[f];f++){var h=this.errorList[f];this.settings.highlight&&this.settings.highlight.call(this,h.element,this.settings.errorClass,this.settings.validClass),this.showLabel(h.element,h.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success){for(f=0;this.successList[f];f++){this.showLabel(this.successList[f])}}if(this.settings.unhighlight){for(f=0,e=this.validElements();e[f];f++){this.settings.unhighlight.call(this,e[f],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(e,h){var f=this.errorsFor(e);f.length?(f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.attr("generated")&&f.html(h)):(f=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(h||""),this.settings.wrapper&&(f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,b(e)):f.insertAfter(e))),!h&&this.settings.success&&(f.text(""),typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f,e)),this.toShow=this.toShow.add(f)},errorsFor:function(e){var f=this.idOrName(e);return this.errors().filter(function(){return b(this).attr("for")===f})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return b(this.currentForm).find('[name="'+e+'"]')},getLength:function(e,f){switch(f.nodeName.toLowerCase()){case"select":return b("option:selected",f).length;case"input":if(this.checkable(f)){return this.findByName(f.name).filter(":checked").length}}return e.length},depend:function(f,e){return this.dependTypes[typeof f]?this.dependTypes[typeof f](f,e):!0},dependTypes:{"boolean":function(f,e){return f},string:function(e,f){return !!b(e,f.form).length},"function":function(f,e){return f(e)}},optional:function(e){var f=this.elementValue(e);return !b.validator.methods.required.call(this,f,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(e,f){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],f&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!f&&this.pendingRequest===0&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return b.data(e,"previousValue")||b.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,f){e.constructor===String?this.classRuleSettings[e]=f:b.extend(this.classRuleSettings,e)},classRules:function(e){var h={},f=b(e).attr("class");return f&&b.each(f.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(h,b.validator.classRuleSettings[this])}),h},attributeRules:function(h){var q={},n=b(h);for(var k in b.validator.methods){var j;k==="required"?(j=n.get(0).getAttribute(k),j===""&&(j=!0),j=!!j):j=n.attr(k),j?q[k]=j:n[0].getAttribute("type")===k&&(q[k]=!0)}return q.maxlength&&/-1|2147483647|524288/.test(q.maxlength)&&delete q.maxlength,q},metadataRules:function(e){if(!b.metadata){return{}}var f=b.data(e.form,"validator").settings.meta;return f?b(e).metadata()[f]:b(e).metadata()},staticRules:function(e){var h={},f=b.data(e.form,"validator");return f.settings.rules&&(h=b.validator.normalizeRule(f.settings.rules[e.name])||{}),h},normalizeRules:function(e,f){return b.each(e,function(k,j){if(j===!1){delete e[k];return}if(j.param||j.depends){var h=!0;switch(typeof j.depends){case"string":h=!!b(j.depends,f.form).length;break;case"function":h=j.depends.call(f,f)}h?e[k]=j.param!==undefined?j.param:!0:delete e[k]}}),b.each(e,function(j,h){e[j]=b.isFunction(h)?h(f):h}),b.each(["minlength","maxlength","min","max"],function(){e[this]&&(e[this]=Number(e[this]))}),b.each(["rangelength","range"],function(){e[this]&&(e[this]=[Number(e[this][0]),Number(e[this][1])])}),b.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e.messages&&delete e.messages,e},normalizeRule:function(e){if(typeof e=="string"){var f={};b.each(e.split(/\s/),function(){f[this]=!0}),e=f}return e},addMethod:function(e,h,f){b.validator.methods[e]=h,b.validator.messages[e]=f!==undefined?f:b.validator.messages[e],h.length<3&&b.validator.addClassRules(e,b.validator.normalizeRule(e))},methods:{required:function(f,k,j){if(!this.depend(j,k)){return"dependency-mismatch"}if(k.nodeName.toLowerCase()==="select"){var h=b(k).val();return h&&h.length>0}return this.checkable(k)?this.getLength(f,k)>0:b.trim(f).length>0},remote:function(h,t,q){if(this.optional(t)){return"dependency-mismatch"}var n=this.previousValue(t);this.settings.messages[t.name]||(this.settings.messages[t.name]={}),n.originalMessage=this.settings.messages[t.name].remote,this.settings.messages[t.name].remote=n.message,q=typeof q=="string"&&{url:q}||q;if(this.pending[t.name]){return"pending"}if(n.old===h){return n.valid}n.old=h;var k=this;this.startRequest(t);var j={};return j[t.name]=h,b.ajax(b.extend(!0,{url:q,mode:"abort",port:"validate"+t.name,dataType:"json",data:j,success:function(z){k.settings.messages[t.name].remote=n.originalMessage;var y=z===!0||z==="true";if(y){var x=k.formSubmitted;k.prepareElement(t),k.formSubmitted=x,k.successList.push(t),delete k.invalid[t.name],k.showErrors()}else{var f={},e=z||k.defaultMessage(t,"remote");f[t.name]=n.message=b.isFunction(e)?e(h):e,k.invalid[t.name]=!0,k.showErrors(f)}n.valid=y,k.stopRequest(t,y)}},q)),"pending"},minlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j},maxlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h<=j},rangelength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j[0]&&h<=j[1]},min:function(f,e,h){return this.optional(e)||f>=h},max:function(f,e,h){return this.optional(e)||f<=h},range:function(f,e,h){return this.optional(e)||f>=h[0]&&f<=h[1]},email:function(f,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(f)},url:function(f,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(f)},date:function(f,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(f))},dateISO:function(f,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(f)},number:function(f,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(f)},digits:function(f,e){return this.optional(e)||/^\d+$/.test(f)},creditcard:function(j,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(j)){return !1}var x=0,t=0,q=!1;j=j.replace(/\D/g,"");for(var n=j.length-1;n>=0;n--){var k=j.charAt(n);t=parseInt(k,10),q&&(t*=2)>9&&(t-=9),x+=t,q=!q}return x%10===0},equalTo:function(f,k,j){var h=b(j);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(k).valid()}),f===h.val()}}}),b.format=b.validator.format})(jQuery),function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(b,n,k){var j=b.port;b.mode==="abort"&&(e[j]&&e[j].abort(),e[j]=k)})}else{var h=f.ajax;f.ajax=function(k){var j=("mode" in k?k:f.ajaxSettings).mode,b=("port" in k?k:f.ajaxSettings).port;return j==="abort"?(e[b]&&e[b].abort(),e[b]=h.apply(this,arguments)):h.apply(this,arguments)}}}(jQuery),function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(e,h){function f(j){return j=b.event.fix(j),j.type=h,b.event.handle.call(this,j)}b.event.special[h]={setup:function(){this.addEventListener(e,f,!0)},teardown:function(){this.removeEventListener(e,f,!0)},handler:function(j){var k=arguments;return k[0]=b.event.fix(j),k[0].type=h,b.event.handle.apply(this,k)}}}),b.extend(b.fn,{validateDelegate:function(e,h,f){return this.bind(h,function(k){var j=b(k.target);if(j.is(e)){return f.apply(j,arguments)}})}})}(jQuery);(function(j){var e={},y,A,C,x=j.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),b=false;j.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){j.tooltip.blocked=!j.tooltip.blocked}};j.fn.extend({tooltip:function(D){D=j.extend({},j.tooltip.defaults,D);q(D);return this.each(function(){j.data(this,"tooltip",D);this.tOpacity=e.parent.css("opacity");this.tooltipText=this.title;j(this).removeAttr("title");this.alt=""}).mouseover(z).mouseout(k).click(k)},fixPNG:x?function(){return this.each(function(){var D=j(this).css("backgroundImage");if(D.match(/^url\(["']?(.*\.png)["']?\)$/i)){D=RegExp.$1;j(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+D+"')"}).each(function(){var E=j(this).css("position");if(E!="absolute"&&E!="relative"){j(this).css("position","relative")}})}})}:function(){return this},unfixPNG:x?function(){return this.each(function(){j(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){j(this)[j(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function q(D){if(e.parent){return}e.parent=j('<div id="'+D.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(j.fn.bgiframe){e.parent.bgiframe()}e.title=j("h3",e.parent);e.body=j("div.body",e.parent);e.url=j("div.url",e.parent)}function f(D){return j.data(D,"tooltip")}function n(D){if(f(this).delay){C=setTimeout(B,f(this).delay)}else{B()}b=!!f(this).track;j(document.body).bind("mousemove",h);h(D)}function z(){if(j.tooltip.blocked||this==y||(!this.tooltipText&&!f(this).bodyHandler)){return}y=this;A=this.tooltipText;if(f(this).bodyHandler){e.title.hide();var G=f(this).bodyHandler.call(this);if(G.nodeType||G.jquery){e.body.empty().append(G)}else{e.body.html(G)}e.body.show()}else{if(f(this).showBody){var F=A.split(f(this).showBody);e.title.html(F.shift()).show();e.body.empty();for(var E=0,D;(D=F[E]);E++){if(E>0){e.body.append("<br/>")}e.body.append(D)}e.body.hideWhenEmpty()}else{e.title.html(A).show();e.body.hide()}}if(f(this).showURL&&j(this).url()){e.url.html(j(this).url().replace("http://","")).show()}else{e.url.hide()}e.parent.addClass(f(this).extraClass);if(f(this).fixPNG){e.parent.fixPNG()}n.apply(this,arguments)}function B(){C=null;if((!x||!j.fn.bgiframe)&&f(y).fade){if(e.parent.is(":animated")){e.parent.stop().show().fadeTo(f(y).fade,y.tOpacity)}else{e.parent.is(":visible")?e.parent.fadeTo(f(y).fade,y.tOpacity):e.parent.fadeIn(f(y).fade)}}else{e.parent.show()}h()}function h(G){if(j.tooltip.blocked){return}if(G&&G.target.tagName=="OPTION"){return}if(!b&&e.parent.is(":visible")){j(document.body).unbind("mousemove",h)}if(y==null){j(document.body).unbind("mousemove",h);return}e.parent.removeClass("viewport-right").removeClass("viewport-bottom");var I=e.parent[0].offsetLeft;var H=e.parent[0].offsetTop;if(G){I=G.pageX+f(y).left;H=G.pageY+f(y).top;var E="auto";if(f(y).positionLeft){E=j(window).width()-I;I="auto"}e.parent.css({left:I,right:E,top:H})}var D=t(),F=e.parent[0];if(D.x+D.cx<F.offsetLeft+F.offsetWidth){I-=F.offsetWidth+20+f(y).left;e.parent.css({left:I+"px"}).addClass("viewport-right")}if(D.y+D.cy<F.offsetTop+F.offsetHeight){H-=F.offsetHeight+20+f(y).top;e.parent.css({top:H+"px"}).addClass("viewport-bottom")}}function t(){return{x:j(window).scrollLeft(),y:j(window).scrollTop(),cx:j(window).width(),cy:j(window).height()}}function k(F){if(j.tooltip.blocked){return}if(C){clearTimeout(C)}y=null;var E=f(this);function D(){e.parent.removeClass(E.extraClass).hide().css("opacity","")}if((!x||!j.fn.bgiframe)&&E.fade){if(e.parent.is(":animated")){e.parent.stop().fadeTo(E.fade,0,D)}else{e.parent.stop().fadeOut(E.fade,D)}}else{D()}if(f(this).fixPNG){e.parent.unfixPNG()}}})(jQuery);(function(e){var b=["3gp","3g2","7z","ace","air","swf","fxp","pdf","ppd","aac","aif","avi","dxf","dwf","bin","bmp","sh","btif","bz","bz2","csh","dae","cgm","wbs","dvi","dtd","dra","dts","dwg","xif","f4v","flv","gtar","gif","h261","h263","h264","ico","ief","jad","jar","class","jnlp","jpm","jpg","jpeg","jpgv","m3u","m4v","mdb","asf","exe","cab","clp","mdi","xls","xlsb","xltm","xlsm","chm","mny","xlsx","xltx","docx","dotx","ppt","mpp","pub","vsd","wm","wma","doc","wps","xps","mid","mpga","mpeg","mp4a","mp4","oda","ogx","oga","ogv","osf","odb","odi","odp","ots","odt","sxd","otf","psd","pic","pbm","png","ai","pbd","qt","rar","rm","rtf","rtx","svg","sdc","sda","sdd","smf","sdw","sgl","au","tiff","tar","ttf","vcd","wav","hlp","wsdl","zip"];e.validator.addMethod("noBinary",function(k,j){var h=e.trim(k).match(/[\w_.-]*?(?=[\?#])|[\w_.-]*$/i);if(typeof(h[0])!="undefined"){var f=h[0].split(".")}if(typeof(f[f.length-1])!="undefined"){var n=f[f.length-1]}return this.optional(j)||e.inArray(n.toLowerCase(),b)==-1});e.validator.addMethod("perc_remote",function(q,h,t){if(this.optional(h)){return"dependency-mismatch"}var k=this.previousValue(h);if(!this.settings.messages[h.name]){this.settings.messages[h.name]={}}t=typeof t=="string"&&{url:t}||t;var j=null;if("handler" in t){j=t.handler}if(k.old!==q){k.old=q;var f=this;this.startRequest(h);var n={};n[h.name]=q;e.ajax(e.extend(true,{url:t,mode:"abort",port:"validate"+h.name,dataType:"json",data:n,success:function(y){var z=j==null?y===true:j(f,h.name,q,y);if(z){var x=f.formSubmitted;f.prepareElement(h);f.formSubmitted=x;f.successList.push(h);f.showErrors()}else{var A={};if(typeof(y)!="string"){y=false}A[h.name]=k.message=y||f.defaultMessage(h,"perc_remote");f.showErrors(A)}k.valid=z;f.stopRequest(h,z)}},t));return"pending"}else{if(this.pending[h.name]){return"pending"}}return k.valid})})(jQuery);(function(b){b.PercDirtyController={dirtyState:false,dirtyObjectType:"object",utils:b.perc_utils,saveCallback:function(){},navigationEvent:function(){if(this.dirtyState){return"This "+this.dirtyObjectType+" contains unsaved changes.\nIf you continue, all changes will be lost.\nClick OK to proceed and discard changes,\nCancel to return to the "+this.dirtyObjectType+" you were editing."}},setDirty:function(f,e){this.dirtyState=f;this.dirtyObjectType=e;this.saveCallback=function(){}},setDirty:function(h,f,e){this.dirtyState=h;this.dirtyObjectType=f;this.saveCallback=e},isDirty:function(){return this.dirtyState},confirmIfDirty:function(j,e,f){if(this.dirtyState){var h=this.setConfirmDialogOptions(j,e,f);this.utils.confirm_dialog(h)}else{j()}},setConfirmDialogOptions:function(n,h,j){var e=this.dirtyObjectType;h=h||function(){};var f=this;var k={id:"perc-editor-page-dirty",title:"Unsaved Edits",success:function(){f.setDirty(false);n()},cancel:h,yes:"Continue anyway"};if(f.isSaveOptionAllowed()){k.dontSaveCallback=j&&j.dontSaveCallback?function(){f.setDirty(false);j.dontSaveCallback()}:k.success;k.type="SAVE_BEFORE_CONTINUE";k.question="You will lose your edits if you do not save. Save your edits before leaving this tab?";k.width="356px";k.save=f.saveCallback||function(){}}else{k.type="CANCEL_CONTINUE";k.question="This page contains unsaved edits. All edits will be lost. CONTINUE?";k.width="326px"}j=j||{};b.extend(k,j);return k},isSaveOptionAllowed:function(){var e=b.PercNavigationManager.getView();return(e==b.PercNavigationManager.VIEW_EDIT_TEMPLATE||e==b.PercNavigationManager.VIEW_EDITOR||e==b.PercNavigationManager.VIEW_WIDGET_BUILDER)}}})(jQuery);(function(P){P.PercNavigationManager={};var q="";var H={};var h="";var x="";var X="";var A="";var z={};var C="";var T="";var Y=false;var E=false;var ae=false;var K="";var J=false;var G=false;var N=[];var k={};var ac=false;var ab=false;var F;var t="";var y=null;var W={URL_BASE:"/cm/app/",MODE_EDIT:"edit",MODE_READONLY:"readonly",VIEW_EDIT_ASSET:"editAsset",VIEW_HOME:"home",VIEW_DASHBOARD:"dash",VIEW_DESIGN:"design",VIEW_EDITOR:"editor",VIEW_SITE_ARCH:"arch",VIEW_PUBLISH:"publish",VIEW_USERS:"users",VIEW_WORKFLOW:"workflow",VIEW_WIDGET_BUILDER:"widgetbuilder",PATH_TYPE_PAGE:"page",PATH_TYPE_ASSET:"asset",PATH_TYPE_UNKNOWN:"unknown",VIEW_EDIT_TEMPLATE:"editTemplate"};function aa(){P.perc_sessionTimeout();n();M();if(t){alert(t)}}function U(ag){var af=ag.type;switch(af){case"site":V(ag);break;case"percPage":S(ag);break;case"Folder":L(ag);break;case"FSFolder":L(ag);break;default:if(ag.category=="ASSET"){Z(ag)}}}function V(ag){if(!(Y||E)){P.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this site."});return}var af=W.VIEW_SITE_ARCH;if(h==W.VIEW_DESIGN){af=W.VIEW_DESIGN}if(h==W.VIEW_PUBLISH){af=W.VIEW_PUBLISH}R(ag.id,af,x,null,null,ag.path,null,null)}function S(ah,ag){var af=P.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(af!=null){P.PercViewReadyManager.showRenderingProgressWarning();return}P.PercFolderHelper().getAccessLevelById(ah.id,false,function(aj,ai){if(aj==P.PercFolderHelper().PERMISSION_ERROR){P.perc_utils.alert_dialog({title:"Error",content:ai});return}else{if(ag&&ai==P.PercFolderHelper().PERMISSION_READ){P.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the page '"+ah.name+"'."})}else{var al=I(ah.path);var ak=ag?W.MODE_EDIT:W.MODE_READONLY;R(al,W.VIEW_EDITOR,ak,ah.id,ah.name,ah.path,W.PATH_TYPE_PAGE,null)}}})}function L(ag){if(ag.type=="FSFolder"){var af=ag.path;var ah=af.split("/");if(P.Percussion.getCurrentFinderView()!=P.Percussion.PERC_FINDER_VIEW_COLUMN){return}else{if(ah.length>5){P.perc_utils.makeFolderEditable(ag)}else{P.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  It cannot be renamed."});return}}}}function Z(ag,af){P.PercFolderHelper().getAccessLevelById(ag.id,false,function(ai,ah){if(ai==P.PercFolderHelper().PERMISSION_ERROR){P.perc_utils.alert_dialog({title:"Error",content:ah});return}else{if(af&&ah==P.PercFolderHelper().PERMISSION_READ){P.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the asset '"+ag.name+"'."})}else{var aj=af?W.MODE_EDIT:W.MODE_READONLY;R(null,W.VIEW_EDIT_ASSET,aj,ag.id,ag.name,ag.path,W.PATH_TYPE_ASSET,null)}}})}function R(am,aj,ai,ah,an,al,ak,af){var ag=j(am,aj,ai,ah,an,al,ak,af);P.PercBlockUI(P.PercBlockUIMode.CURSORONLY);P.PercQueuePostAJAX(function(){D(ag)})}function ad(af){return P.param.querystring(W.URL_BASE,af)}function j(am,aj,ai,ah,an,al,ak,af){var ag={view:aj};if(!O(am)){P.extend(ag,{site:am})}if(!O(ai)){P.extend(ag,{mode:ai})}if(!O(ah)){P.extend(ag,{id:ah})}if(!O(an)){P.extend(ag,{name:an})}if(!O(al)){P.extend(ag,{path:al})}if(J){P.extend(ag,{debug:"true"})}if(G){P.extend(ag,{at:"true"})}if(af!=null&&typeof(af)=="object"){P.extend(ag,{memento:JSON.stringify(af)})}if(!O(ak)){P.extend(ag,{pathType:ak})}if(ab){P.extend(ag,{disableJS:"true"})}return ag}function Q(){var ai=window.location;var aj=ai.protocol;aj+="//";aj+=ai.host;var ag=0;for(var af in z){++ag}var ah=ag==0?null:encodeURIComponent(z);aj+=ad(j(q,h,x,T,C,X,A,ah));return aj}function e(af){var ag=W.PATH_TYPE_UNKNOWN;if(af){if(af.indexOf(P.perc_paths.ASSETS_ROOT+"/")==0){ag=W.PATH_TYPE_ASSET}if(af.indexOf(P.perc_paths.SITES_ROOT+"/")==0){ag=W.PATH_TYPE_PAGE}}return ag}function I(ag){var af=P.perc_paths.SITES_ROOT+"/";if(ag.indexOf(af)===0){var ah=ag.indexOf("/",af.length);if(ah==-1){ah=ag.length-1}return ag.substring(af.length,ah)}return""}function n(){var af=P.deparam.querystring();q=af.site;h=af.view;x=af.mode;X=af.path;T=af.id;C=af.name;J=af.debug;G=af.at;A=af.pathType;t=af.warningMessage;ab=(af.disableJS=="true"?true:false);if(typeof(af.memento)!="undefined"){z=JSON.parse(decodeURIComponent(af.memento))}}function M(){K=P.cookie("perc_userName");Y=P.cookie("perc_isAdmin")=="true"?true:false;E=P.cookie("perc_isDesigner")=="true"?true:false;ae=P.cookie("perc_isAccessibilityUser")=="true"?true:false;P.perc_utils.info("UserInfo","userName: "+K+", isAdmin: "+Y+", isDesigner: "+E+", isAccessibilityUser: "+ae)}function D(ai){var ag=ad(ai);var af=N.length;if(af==0){window.location.href=ag;return}var aj=b();k[aj]={url:ag,listenerTotal:af,continueFlag:true,listenersComplete:0};for(var ah=0;ah<af;ah++){P.unblockUI();N[ah](ag,aj,B,ai)}}function B(ah,af){var ag=k[ah];ag.continueFlag&=af;++ag.listenersComplete;if(ag.listenersComplete==ag.listenerTotal){if(ag.continueFlag){P.PercBlockUI(P.PercBlockUIMode.CURSORONLY);window.location.href=ag.url}else{delete k[ah];P.unblockUI()}}}function b(){var ai=[];var af="0123456789ABCDEF";for(var ag=0;ag<32;ag++){ai[ag]=af.substr(Math.floor(Math.random()*16),1)}ai[12]="4";ai[16]=af.substr((ai[16]&3)|8,1);var ah=ai.join("");return ah}function O(af){return(af==null||af.length==0)}var f={getBookmark:Q,getSiteName:function(){return q},getMemento:function(){return z},clearMemento:function(){z={}},getView:function(){return h},getMode:function(){return x},setMode:function(af){x=af},clearId:function(){T=""},getId:function(){return T},getName:function(){return C},setName:function(af){C=af},getPath:function(){return X},setPath:function(af){X=af},getUserName:function(){return K},isAutoTest:function(){return G},isDebug:function(){return J},isAdmin:function(){return Y},isDesigner:function(){return E},isAccessibilityUser:function(){return ae},isJavascriptOff:function(){return ab},isReopenAllowed:function(){return ac},setReopenAllowed:function(af){ac=af},getPathType:function(){if(A){return A}return e(X)},goTo:function(ag,af){if(af){R(q,ag,null,null,null,X,null,null)}else{R(q,ag,null,T,C,X,A,null)}},goToDashboard:function(){f.goTo(W.VIEW_DASHBOARD,true)},goToLocation:function(aj,am,ah,ak,al,ag,ai,af){R(am,aj,ah,ak,al,ag,ai,af)},handleOpenAsset:Z,handleOpenPage:S,registerFinder:function(ag){y=ag;ag.addOpenListener(U);ag.addPathChangedListener(function(aj){if(ag.finderOpenInProgress){return}var ah=aj.slice(1);var ai="/"+ah.join("/");X=ai});var af=X;X=X?X:"/Sites";if(X){y.open(X.split("/"),function(){X=af})}},addLocationChangeListener:function(af){if(P.inArray(af,N)==-1){N.push(af)}},removeLocationChangeListener:function(ah){if(P.inArray(ah,openListeners)>-1){var af=N.length;for(var ag=0;ag<af;ag++){if(N[ag]===ah){N.splice(ag,1);return}}}},openPathItem:function(af){P.PercPathService.getPathItemForPath(af,function(ag,ah){if(ag==P.PercServiceUtils.STATUS_SUCCESS){ah.PathItem.path=af;U(ah.PathItem)}else{P.perc_utils.alert_dialog({title:"Error",content:ah});return}})},openPage:function(ag,af){P.PercPathService.getPathItemForPath(ag,function(ah,ai){if(ah==P.PercServiceUtils.STATUS_SUCCESS){ai.PathItem.path=ag;S(ai.PathItem,af)}else{P.perc_utils.alert_dialog({title:"Error",content:ai});return}})},openAsset:function(af){P.PercPathService.getPathItemById(af.id,function(ag,ah){if(ag==P.PercServiceUtils.STATUS_SUCCESS){ah.PathItem.path=af.path;Z(ah.PathItem,false)}else{P.perc_utils.alert_dialog({title:"Error",content:ah});return}})},openFolderDialog:function(af){P.PercPathService.getPathItemForPath(af,function(ag,ah){if(ag==P.PercServiceUtils.STATUS_SUCCESS){ah.PathItem.path=af;L(ah.PathItem)}else{P.perc_utils.alert_dialog({title:"Error",content:ah});return}})},loadSiteProperties:function(af,ag){P.PercSiteService.getSiteProperties(af,function(ai,ah){if(ai==P.PercServiceUtils.STATUS_SUCCESS){H=ah.SiteProperties;if(typeof(ag)=="function"){ag(ah.SiteProperties)}}})},getSiteProperties:function(){return H},setTemplateModel:function(af){F=af},getTemplateModel:function(af){return F}};P.extend(P.PercNavigationManager,f);P.extend(P.PercNavigationManager,W);aa()})(jQuery);(function(b){b.PercFolderHelper=function(){var f={getAccessLevelByPath:e,getAccessLevelById:h};var k={PERMISSION_READ:"READ",PERMISSION_WRITE:"WRITE",PERMISSION_ADMIN:"ADMIN",PERMISSION_SUCCESS:"SUCCESS",PERMISSION_ERROR:"ERROR"};var j={};b.extend(j,f);b.extend(j,k);return j;function e(t,n,x){var q=b.perc_finder().getPathItemByPath(t);if(!n||!q){b.PercPathService.getPathItemForPath(t,function(z,y){if(z==b.PercServiceUtils.STATUS_ERROR){x(k.PERMISSION_ERROR,y);return}x(k.PERMISSION_SUCCESS,y.PathItem.accessLevel)})}else{x(k.PERMISSION_SUCCESS,q.accessLevel)}}function h(n,q,x){var t=b.perc_finder().getPathItemById(n);if(!q||!t){b.PercPathService.getPathItemById(n,function(z,y,A){if(z==b.PercServiceUtils.STATUS_ERROR){x(k.PERMISSION_ERROR,y,A);return}x(k.PERMISSION_SUCCESS,y.PathItem.accessLevel)})}else{x(k.PERMISSION_SUCCESS,t.accessLevel)}}}})(jQuery);(function(b){b.PercFolderPropertiesDialog=function(){var j;var f="";var h="";var k="";function e(t,C){b.PercPathService.getFolderProperties(t.id,E);var n=30;var B;var A;var x=undefined;function E(H,O){var M=this;if(H==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Folder not found: "+t.path});C("",false);return}var J=t.path.split("/");if(!f){f=t.folderPath;h=t.folderPaths;k=t.type}var K=(J!=undefined&&J.length==4&&J[1]=="Assets");var N=b.PercFolderHelper().PERMISSION_ADMIN;var I=O.data.FolderProperties;var L=[];if(I.permission){N=I.permission.accessLevel;if(I.permission.writePrincipals){L=I.permission.writePrincipals;L=b.isArray(L)?L:[L]}}var G=[];G[0]=N==b.PercFolderHelper().PERMISSION_READ?" selected='true' ":"";G[1]=N==b.PercFolderHelper().PERMISSION_WRITE?" selected='true' ":"";G[2]=N==b.PercFolderHelper().PERMISSION_ADMIN?" selected='true' ":"";A=b("<div><p class='perc-field-error' id='perc-save-error'></p><div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-folder-general-properties-container'><div><label for='perc-folder-name'class='perc-required-field'>"+I18N.message("perc.ui.folderPropsDialog.label@Name")+":</label> <br/> <input type='text' class='required' tabindex='"+n+"' id='perc-folder-name' name='folder_name' maxlength='50' value=\""+I.name+"\"/> <br/><label id='perc_folder_duplicate_error' style='display: none;' class='perc_field_error'></label><br/></div></div></div><div class='fieldGroup'><div id='perc-user-permissions-container'><label for='perc-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/><select name='perc-folder-permission' id='perc-folder-permission'>     <option id='perc-folder-permission-option-read'  "+G[0]+" value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' "+G[1]+" value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option>     <option id='perc-folder-permission-option-admin' "+G[2]+" value='"+b.PercFolderHelper().PERMISSION_ADMIN+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Admin")+"</option></select><input type='hidden' id='perc-folder-id' value='"+I.id+"'></input><input type='hidden' id='perc-folder-oldname' value=\""+I.name+"\"></input><div id='perc-folder-permission-users'/></div></div><div class='fieldGroup' id='perc-asset-folder-security' style='display:none;'><div id='perc-asset-folder-sites-container'><label>Assets in this folder are available to:<br/></label></div></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.folderPropsDialog.title@Folder Properties"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var P=new Array();if(M.listEdit.isEnabled()){var Q=M.listEdit.getListItems();for(u=0;u<Q.length;u++){P[u]={name:Q[u],type:"USER"}}}y(P)},id:"perc-folder-props-save"},Cancel:{click:function(){D()},id:"perc-folder-props-cancel"}},id:"perc-folder-props-dialog",width:"500px"});var F=[];for(u=0;u<L.length;u++){F[u]=L[u].name}b.PercUserService.getUsers(function(P,Q){if(P==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",Q);return}M.listEdit=b.PercListEditorWidget({container:"perc-folder-permission-users",items:F,results:b.perc_utils.convertCXFArray(Q.UserList.users),toggler:b("#perc-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")});q();if(K){b.PercServiceUtils.makeJsonRequest(b.perc_paths.SITES_ALL+"/",b.PercServiceUtils.TYPE_GET,false,function(S,aa){if(S==b.PercServiceUtils.STATUS_SUCCESS){b("#perc-asset-folder-security").show();var Y=A.find("#perc-asset-folder-sites-container");var V=b("<select name='allowed-sites' id='allowed-sites' multiple='multiple'></select>");Y.append(V);var U=[];if(I.allowedSites!=undefined){if(typeof(I.allowedSites)=="number"){U.push(I.allowedSites.toString())}else{U=I.allowedSites.split(",")}}j=U.sort().join(",");var X=aa.data.SiteSummary;for(var Z=0;Z<X.length;Z++){var R=(b.inArray(X[Z].siteId.toString(),U)>=0);var T=b("<option/>").attr("value",X[Z].siteId).attr("title",X[Z].name).text(X[Z].name);if(R){T.attr("selected","selected")}V.append(T)}x=b("#allowed-sites").multiselect({height:175,minWidth:225,checkAllText:"Select all",uncheckAllText:"Deselect all",noneSelectedText:"All sites allowed",selectedText:function(ac,ad,ab){if(ac==0){return"All sites allowed"}else{return"Some sites allowed"}}});b("input[name=multiselect_allowed-sites]").unbind("click");b("input[name=multiselect_allowed-sites]").bind("click",function(ab){b("#allowed-sites").multiselect("update")});b("a.ui-multiselect-all").unbind("click.multiselect");b("a.ui-multiselect-all").bind("click.multiselect",function(ab){b("#allowed-sites").multiselect("checkAll")});b("a.ui-multiselect-none").unbind("click.multiselect");b("a.ui-multiselect-none").bind("click.multiselect",function(ab){b("#allowed-sites").multiselect("uncheckAll")})}else{var W=b.PercServiceUtils.extractDefaultErrorMessage(aa.request);b.perc_utils.alert_dialog({title:"Error",content:W})}})}else{b("#perc-asset-folder-security").hide()}})}function D(){A.remove()}function y(J){if(b.trim(b("#perc-folder-name").val()).length<1){b("#perc-folder-name").val("");b("#perc_folder_duplicate_error").text("This field is required.");b("#perc_folder_duplicate_error").show();return}var I=b.trim(b("#perc-folder-name").val());I=b.perc_textFilters.WINDOWS_FILE_NAME(I);var H={FolderProperties:{name:I,id:b("#perc-folder-id").val(),permission:{accessLevel:b("#perc-folder-permission").val(),writePrincipals:J}}};if(x!=undefined){var G=[];b.each(x.multiselect("getChecked"),function(K){G.push(b(this).val())});if(G.length>0){H.FolderProperties.allowedSites=G.sort().join(",")}else{H.FolderProperties.allowedSites=""}}if(j!=undefined&&H.FolderProperties.allowedSites!=j){var F={id:"perc-folder-properties-changed-allowed-sites-warning",title:"Warning",content:"Please note that content already queued for incremental publish will not be affected by this security change.",okCallBack:function(){b.PercPathService.saveFolderProperties(H,z)}};b.perc_utils.alert_dialog(F)}else{b.PercPathService.saveFolderProperties(H,z)}}function z(H,F){if(H==b.PercServiceUtils.STATUS_SUCCESS){var G=b.trim(b("#perc-folder-name").val());A.remove();if(f.match("^/Sites/")||f.match("^//Sites/")){b.PercRedirectHandler.createRedirect(f,h+"/"+G,"folder").fail(function(L){b.perc_utils.alert_dialog({title:"Redirect creation error",content:L,okCallBack:function(){C(G)}})}).done(function(){C(G)})}else{C(G)}}else{var K=b.PercServiceUtils.extractDefaultErrorMessage(F.request);var I=b.PercServiceUtils.extractFieldErrorCode(F.request);if(I=="`FolderProperties#name"){var J="Cannot rename folder '"+b("#perc-folder-oldname").val()+"' to '"+b.trim(b("#perc-folder-name").val())+"' because an object with the same name already exists.";b("#perc_folder_duplicate_error").text(J);b("#perc_folder_duplicate_error").show()}else{if(I=="saveFolderProperties#reservedName"){b("#perc_folder_duplicate_error").text(K);b("#perc_folder_duplicate_error").show()}else{b.perc_utils.alert_dialog({title:"Error",content:K})}}}}function q(){var G=b("#perc-folder-props-dialog");var F=[{groupName:"perc-folder-general-properties-container",groupLabel:"General"},{groupName:"perc-user-permissions-container",groupLabel:"Permissions"},{groupName:"perc-asset-folder-sites-container",groupLabel:"Security"}];b.each(F,function(I){var J=(I==0)?"perc-section-items-minimizer":"perc-section-items-maximizer";var H="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span class='perc-min-max "+J+"' ></span>"+this.groupLabel+"</div></div>";G.find("#"+this.groupName).before(H);I!=0&&G.find("#"+this.groupName).hide()});G.find(".perc-section-label").unbind().click(function(){var H=b(this);H.find(".perc-min-max").toggleClass("perc-section-items-minimizer").toggleClass("perc-section-items-maximizer");G.find("#"+H.attr("groupName")).toggle()})}b.perc_filterField(b("#perc-folder-name"),b.perc_textFilters.URL)}return{open:e}}})(jQuery);(function(f){var b=13;var e=5;f.PercFinderTreeConstants={ROOT_PATH_ALL:"All",ROOT_PATH_SITES:"Sites",ROOT_PATH_ASSETS:"Assets",FOLDERS_ONLY:"Folders",SECTIONS_ONLY:"Sections",MAX_RESULTS:200,FOLDER_ID:null,convertFolderPathToPath:function(h){var j=null;if(!h){return j}if(h.indexOf("//Sites")!=-1){j=h.replace("//Sites",f.perc_paths.SITES_ROOT)}else{if(h.indexOf("//Folders/$System$/Assets")!=-1){j=h.replace("//Folders/$System$/Assets",f.perc_paths.ASSETS_ROOT)}}return j}};f.widget("ui.PercFinderTree",{settings:{rootPath:f.PercFinderTreeConstants.ROOT_PATH_ALL,showFoldersOnly:false,filter:null,height:"200px",width:"290px",onClick:function(h){},onRenderComplete:function(h,j){},classNames:{},initialPath:null,getInitialPathItem:function(h){},onQueryActivate:function(){return true},onQuerySelect:function(){return true},clickFolderMode:3,acceptableTypes:"",acceptableCategories:""},_init:function(){var h=this;f.extend(this.settings,this.options);var j=this.settings.rootPath;if(!(j==f.PercFinderTreeConstants.ROOT_PATH_ALL||j==f.PercFinderTreeConstants.ROOT_PATH_SITES||j==f.PercFinderTreeConstants.ROOT_PATH_ASSETS)){this.settings.rootPath=f.PercFinderTreeConstants.ROOT_PATH_ALL}f(this.element).css("width",this.settings.width);f(this.element).css("height",this.settings.height);f(this.element).css("overflow","auto");f(this.element).append(f("<div id='perc-finder-tree'></div>"));this.intialPathExpanded=true;this.initialRenderCompleted=false;this.intialPathKey=null;if(this.settings.initialPath&&this.settings.initialPath!=null&&f.trim(this.settings.initialPath).length>0){this.intialPathExpanded=false;this.intialPathKey=this._generateKey(this.settings.initialPath)}f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_FOLDER+"/",f.PercServiceUtils.GET,false,function(n,k){if(n==f.PercServiceUtils.STATUS_ERROR){var q=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:q});dtnode.setLazyNodeStatus(DTNodeStatus_Error)}else{h._initTree(k.data)}},null)},_initTree:function(n){var j=this;var q=[];var h=j._normalizedPath(j.settings.initialPath);f.each(n.PathItem,function(){var t=j.settings.rootPath==f.PercFinderTreeConstants.ROOT_PATH_ALL||j.settings.rootPath==this.name;if(this.name=="Design"||this.name=="Search"){t=false}if(t){var y=j._makeDtNode(this);f.extend(y,{unselectable:true});var x=j._normalizedPath(this.path);if(h==x){f.extend(y,{activate:true});j.intialPathExpanded=true}q.push(y)}});var k=f(this.element).find("#perc-finder-tree").dynatree({selectMode:1,rootVisible:false,autoFocus:false,imagePath:" ",children:q,clickFolderMode:j.settings.clickFolderMode,onQuerySelect:j.settings.onQuerySelect,onQueryActivate:j.settings.onQueryActivate,classNames:j.settings.classNames,onRender:function(y){if(y.data.type!=="SHOW_MORE"){var t=f(y.span);var x=t.parents("ul").length-1;t.css("padding-left",x*b+e)}else{var t=f(y.span);var x=t.parents("ul").length-3;t.css("padding-left",x*b+e)}},onLazyRead:function(t){j._loadChildren(t)},onClick:function(t){if(t.data.type==="SHOW_MORE"&&!t.data.isShowing){t.data.isShowing=true;t.data.icon="/cm/css/dynatree/skin/loading.gif";t.render();j._loadMoreChildren(t);return}j._onClick(t);j.getFolderID(t)},onExpand:function(t,x){if(x.type==="SHOW_MORE"){return}j._onExpand(t,x)}});k.dynatree("getRoot").visit(function(t){t.expand(true)})},_loadChildren:function(q){var j=this,k,h=q.data,n;if(j.settings.showFoldersOnly){k=f.perc_paths.PATH_FOLDER+h.pathItem.path}else{k=f.perc_paths.PATH_PAGINATED_FOLDER+h.pathItem.path+"?startIndex=1&maxResults="+f.PercFinderTreeConstants.MAX_RESULTS;if(j.settings.acceptableTypes){k+="&type="+j.settings.acceptableTypes}if(j.settings.acceptableCategories){k+="&category="+j.settings.acceptableCategories}}f.PercServiceUtils.makeJsonRequest(k,f.PercServiceUtils.GET,false,function(x,t){if(x==f.PercServiceUtils.STATUS_ERROR){var y=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:y});q.setLazyNodeStatus(DTNodeStatus_Error)}else{j._addChildren(q,t.data)}},null)},_addChildren:function(t,q){var n=null,j=this;var h=j.settings.showFoldersOnly?q.PathItem:q.PagedItemList.childrenInPage;if(!h){t.setLazyNodeStatus(DTNodeStatus_Ok);return}if(!f.isArray(h)){h=[h]}f.each(h,function(){var z=j.settings.showFoldersOnly&&this.leaf;if(typeof this.category!="undefined"&&j.settings.filter!=null){z=z||(j.settings.filter==f.PercFinderTreeConstants.FOLDERS_ONLY&&this.category!="FOLDER"&&this.category!="SYSTEM");z=z||(j.settings.filter==f.PercFinderTreeConstants.SECTIONS_ONLY&&this.category!="SECTION_FOLDER")}if(!z){var B=j._makeDtNode(this);var y=t.addChild(B);if(!j.intialPathExpanded){var A=j._normalizedPath(this.path);var x=j._normalizedPath(j.settings.initialPath);if(x==A){y.activate();j.settings.getInitialPathItem(y.data.pathItem);j.intialPathExpanded=true}else{if(x.indexOf(A)!=-1){n=y}}}}});if(!j.settings.showFoldersOnly&&q.PagedItemList.startIndex+f.PercFinderTreeConstants.MAX_RESULTS-1<q.PagedItemList.childrenCount){var k=j._makeMoreResultsDtNode(q.PagedItemList.startIndex+f.PercFinderTreeConstants.MAX_RESULTS,t);t.addChild(k)}j._adjustScrollWidths();t.setLazyNodeStatus(DTNodeStatus_Ok);if(n){n.expand(true)}else{if(!j.initialRenderCompleted){j.settings.onRenderComplete(t.data.pathItem,t);j.initialRenderCompleted=true}}},_loadMoreChildren:function(n){var j=this,k,h=n.data;k=f.perc_paths.PATH_PAGINATED_FOLDER+h.parentNode.data.pathItem.path+"?startIndex="+h.startIndex+"&maxResults="+f.PercFinderTreeConstants.MAX_RESULTS;f.PercServiceUtils.makeJsonRequest(k,f.PercServiceUtils.GET,false,function(t,q){if(t==f.PercServiceUtils.STATUS_ERROR){var x=f.PercServiceUtils.extractDefaultErrorMessage(request);f.perc_utils.alert_dialog({title:"Error",content:x});n.setLazyNodeStatus(DTNodeStatus_Error)}else{j._addChildren(h.parentNode,q.data);n.remove()}},null)},_onExpand:function(h,j){this._adjustScrollWidths()},_adjustScrollWidths:function(h){},_onClick:function(h){this.settings.onClick(h.data.pathItem)},getSelectedItems:function(){var j=[];var h=f("#perc-finder-tree").dynatree("getSelectedNodes");f.each(h,function(){j.push(this.data.pathItem)});return j},getFolderID:function(n){var j=n.data.pathItem.id;if(typeof j!="undefined"){var k=j.split("-");var h=k[2];f.PercFinderTreeConstants.FOLDER_ID=h}return h},getDynaTree:function(){return f("#perc-finder-tree").dynatree("getTree")},_makeDtNode:function(t){var h=this;var k=f.perc_utils.extract_path(t.path);var n=f.perc_utils.choose_icon(t.type,t.icon,k);var j=this._generateKey(t.path);var q={title:t.name,isFolder:!t.leaf,isLazy:true,icon:n,tooltip:t.name,pathItem:t,key:j};if(t.leaf){f.extend(q,{addClass:"perc-hide-node-expander"})}return q},_makeMoreResultsDtNode:function(q,h){var j=this;var k="-- Show More --";var n={title:k,isLazy:true,tooltip:k,addClass:"perc-hide-node-expander",startIndex:q,type:"SHOW_MORE",isShowing:false,parentNode:h};return n},_generateKey:function(h){if(!h){return null}if(h&&h.length>1&&h.substring(h.length-1)=="/"){h=h.slice(0,h.length-1)}return h.replace(/[^a-zA-Z0-9/]/g,"_").replace(/\//g,"-")},_normalizedPath:function(h){if(!h||h.length<1){return h}if(h.substring(h.length-1,h.length)!="/"){return h+"/"}return h}})})(jQuery);(function(e){e.PercPathSelectionDialog={open:b};function b(A){var n={okCallback:function(){},cancelCallback:function(){},dialogTitle:"Select path",rootPath:e.PercFinderTreeConstants.ROOT_PATH_SITES,emptySelectionMessage:"Please select a page.",initialPath:null,createNew:{},showFoldersOnly:false,selectedItemValidator:e.noop,acceptableTypes:"",acceptableCategories:""};var j=null;var k=e.extend(n,A);if(!k.initialPath){k.initialPath=null}var h=null;var q=null;var f=z(k);var t={};var x={click:function(){if(k.selectedItemValidator&&e.isFunction(k.selectedItemValidator)){var B=k.selectedItemValidator(h);if(B!=null){f.find("label[for='perc-path-location']").text(B).show();return}}q.remove();k.okCallback(h)},id:"perc-path-selection-dialog-save"};var y={click:function(){q.remove();k.cancelCallback()},id:"perc-path-selection-dialog-cancel"};t.Ok=x;t.Cancel=y;q=e(f).perc_dialog({resizable:false,title:k.dialogTitle,modal:true,closeOnEscape:true,percButtons:t,id:"perc-path-selection-dialog",width:400});function z(){var E=k.initialPath?k.initialPath:"";var C=e('<div class="perc-path-selector-container"><div class="perc-label" style="height:10px;"><span style="float:left;font-weight:bold">Select from path:</span><span class="perc-create-new-button" style="float:right;margin-right:55px;display:none"></span></div></div>');if(k.createNew&&k.createNew.label&&k.createNew.onclick){var B=function(F){q.remove();k.okCallback(F)};var D=function(){};C.find(".perc-create-new-button").show().click(function(){k.createNew.onclick(B,D)}).append('<a class="perc-font perc-font-button" href="#"><i class="'+k.createNew.iconclass+'"></i> '+k.createNew.label+"</a>")}j=e("<div class='perc-path-selection-tree' style='margin-top:20px;'>").PercFinderTree({rootPath:k.rootPath,initialPath:k.initialPath,showFoldersOnly:k.showFoldersOnly,acceptableTypes:k.acceptableTypes,acceptableCategories:k.acceptableCategories,height:"230px",width:"600px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},getInitialPathItem:function(F){h=F},onClick:function(F){h=F;e("#perc_selected_path").html(F.path);if(e.inArray(F.category,k.selectableTypes)!=-1){f.find("label[for='perc-select-blog-location-tree']").hide()}}});C.append(j);C.append('<div style="margin-top:10px;"><span style="color:gray; font-weight:bold">Selected item path:</span> <span id="perc_selected_path">'+E+"</span></div>");C.append('<label for="perc-path-location" class="perc_field_error" style="display: none;"></label>');return C}}})(jQuery);(function(h){h.PercCreateNewAssetDialog=function(q,n,x){h.PercCreateNewAssetDialogData={};h.PercCreateNewAssetDialogData.successCallback=n;h.PercCreateNewAssetDialogData.cancelCallback=x;h.PercAssetService.getAssetEditor(q,function(z,y){if(z==h.PercServiceUtils.STATUS_ERROR){h.perc_utils.alert_dialog({title:"Error creating new asset",content:y})}if(h.PercFinderTreeConstants.FOLDER_ID!=null){y.AssetEditor.legacyFolderId=h.PercFinderTreeConstants.FOLDER_ID}h.PercCreateNewAssetDialogData.assetEditor=y.AssetEditor;t()});function t(){var A=h.PercCreateNewAssetDialogData.assetEditor;var z=A.url+"&sys_folderid="+A.legacyFolderId+"&sys_workflowid="+A.workflowId;var y="<div id='create-new-asset-content-dlg'><iframe name='create-new-asset-content-frame' id='create-new-asset-content-frame'height='100%' FRAMEBORDER='0' width='100%' src='"+z+"'></iframe></div>";dialog=h(y).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:815,width:965,percButtons:{Save:{click:function(){e(n)},id:"perc-create-new-asset-save-button"},Cancel:{click:function(){dialog.remove();h.PercCreateNewAssetDialogData.cancelCallback()},id:"perc-create-new-asset-cancel-button"}},id:"perc-create-new-asset-dialog"})}};function e(n){h.PercBlockUI();var q=h.PercCreateNewAssetDialogData.assetEditor;k("#perc-content-edit-sys_workflowid").val(q.workflowId);var x=q.url;x=x.split("?")[0];var y=q.legacyFolderId;x=x+"?sys_folderid="+y+"&sys_asset_folderid="+y;k("#perc-content-form").attr("action",x);var t=true;h.each(h.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){t=false}});if(!t){h.unblockUI();return}h.PercContentPreSubmitHandlers.clearHandlers();h("#create-new-asset-content-frame").contents().find("#perc-content-form").submit();h("#create-new-asset-content-frame").unbind("load",b).load(b)}function f(t,q,n){return true}function b(){if(h("#create-new-asset-content-frame").contents().find("#perc-content-edit-errors").length>0){h.unblockUI();return}var n="-1-101-"+h("#create-new-asset-content-frame").contents().find("[name=sys_contentid]").val();h("#create-new-asset-content-frame").remove();h("#create-new-asset-content-dlg").remove();h.PercPathService.getPathItemById(n,function(t,q){h.unblockUI();if(t==h.PercServiceUtils.STATUS_ERROR){h.perc_utils.alert_dialog({title:"Error Selecting Asset",content:"The asset has been saved, but failed to select it."});h.PercCreateNewAssetDialogData.cancelCallback();return}h.PercCreateNewAssetDialogData.successCallback(q.PathItem)})}function k(n){var q=j();return h(n,q)}function j(){var n=null;for(i=0;i<frames.length;i++){if(frames[i].name=="create-new-asset-content-frame"){n=frames[i].document;break}}return n}})(jQuery);(function(b){b.fn.extend({autocomplete:function(e,f){var h=typeof e=="string";f=b.extend({},b.Autocompleter.defaults,{url:h?e:null,data:h?null:e,delay:h?b.Autocompleter.defaults.delay:10,max:f&&!f.scroll?10:150},f);f.highlight=f.highlight||function(j){return j};f.formatMatch=f.formatMatch||f.formatItem;return this.each(function(){new b.Autocompleter(this,f)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(z,n){var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var e=b(z).attr("autocomplete","off").addClass(n.inputClass);var x;var D="";var A=b.Autocompleter.Cache(n);var j=0;var I;var L={mouseDownOnSelect:false};var F=b.Autocompleter.Select(n,z,h,L);var K;b.browser.opera&&b(z.form).bind("submit.autocomplete",function(){if(K){K=false;return false}});e.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(M){I=M.keyCode;switch(M.keyCode){case f.UP:M.preventDefault();if(F.visible()){F.prev()}else{H(0,true)}break;case f.DOWN:M.preventDefault();if(F.visible()){F.next()}else{H(0,true)}break;case f.PAGEUP:M.preventDefault();if(F.visible()){F.pageUp()}else{H(0,true)}break;case f.PAGEDOWN:M.preventDefault();if(F.visible()){F.pageDown()}else{H(0,true)}break;case n.multiple&&b.trim(n.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(h()){M.preventDefault();K=true;return false}break;case f.ESC:F.hide();break;default:clearTimeout(x);x=setTimeout(H,n.delay);break}}).focus(function(){j++}).blur(function(){j=0;if(!L.mouseDownOnSelect){G()}}).click(function(){if(j++>1&&!F.visible()){H(0,true)}}).bind("search",function(){var M=(arguments.length>1)?arguments[1]:null;function N(R,Q){var O;if(Q&&Q.length){for(var P=0;P<Q.length;P++){if(Q[P].result.toLowerCase()==R.toLowerCase()){O=Q[P];break}}}if(typeof M=="function"){M(O)}else{e.trigger("result",O&&[O.data,O.value])}}b.each(q(e.val()),function(O,P){k(P,N,N)})}).bind("flushCache",function(){A.flush()}).bind("setOptions",function(){b.extend(n,arguments[1]);if("data" in arguments[1]){A.populate()}}).bind("unautocomplete",function(){F.unbind();e.unbind();b(z.form).unbind(".autocomplete")});function h(){var N=F.selected();if(!N){return false}var M=N.result;D=M;if(n.multiple){var O=q(e.val());if(O.length>1){M=O.slice(0,O.length-1).join(n.multipleSeparator)+n.multipleSeparator+M}M+=n.multipleSeparator}e.val(M);J();e.trigger("result",[N.data,N.value]);return true}function H(O,N){if(I==f.DEL){F.hide();return}var M=e.val();if(!N&&M==D){return}D=M;M=t(M);if(M.length>=n.minChars){e.addClass(n.loadingClass);if(!n.matchCase){M=M.toLowerCase()}k(M,y,J)}else{B();F.hide()}}function q(N){if(!N){return[""]}var O=N.split(n.multipleSeparator);var M=[];b.each(O,function(P,Q){if(b.trim(Q)){M[P]=b.trim(Q)}});return M}function t(M){if(!n.multiple){return M}var N=q(M);return N[N.length-1]}function E(M,N){if(n.autoFill&&(t(e.val()).toLowerCase()==M.toLowerCase())&&I!=f.BACKSPACE){e.val(e.val()+N.substring(t(D).length));b.Autocompleter.Selection(z,D.length,D.length+N.length)}}function G(){clearTimeout(x);x=setTimeout(J,200)}function J(){var M=F.visible();F.hide();clearTimeout(x);B();if(n.mustMatch){e.search(function(N){if(!N){if(n.multiple){var O=q(e.val()).slice(0,-1);e.val(O.join(n.multipleSeparator)+(O.length?n.multipleSeparator:""))}else{e.val("")}}})}if(M){b.Autocompleter.Selection(z,z.value.length,z.value.length)}}function y(N,M){if(M&&M.length&&j){B();F.display(M,N);E(N,M[0].value);F.show()}else{J()}}function k(N,P,M){if(!n.matchCase){N=N.toLowerCase()}var O=A.load(N);if(O&&O.length){P(N,O)}else{if((typeof n.url=="string")&&(n.url.length>0)){var Q={timestamp:+new Date()};b.each(n.extraParams,function(R,S){Q[R]=typeof S=="function"?S():S});b.ajax({mode:"abort",port:"autocomplete"+z.name,dataType:n.dataType,url:n.url,data:b.extend({q:t(N),limit:n.max},Q),success:function(S){var R=n.parse&&n.parse(S)||C(S);A.add(N,R);P(N,R)}})}else{F.emptyList();M(N)}}}function C(P){var M=[];var O=P.split("\n");for(var N=0;N<O.length;N++){var Q=b.trim(O[N]);if(Q){Q=Q.split("|");M[M.length]={data:Q,value:Q[0],result:n.formatResult&&n.formatResult(Q,Q[0])||Q[0]}}}return M}function B(){e.removeClass(n.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(e){return e[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(f,e){return f.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};b.Autocompleter.Cache=function(f){var k={};var h=0;function q(y,x){if(!f.matchCase){y=y.toLowerCase()}var t=y.indexOf(x);if(f.matchContains=="word"){t=y.toLowerCase().search("\\b"+x.toLowerCase())}if(t==-1){return false}return t==0||f.matchContains}function n(x,t){if(h>f.cacheLength){e()}if(!k[x]){h++}k[x]=t}function j(){if(!f.data){return false}var x={},t=0;if(!f.url){f.cacheLength=1}x[""]=[];for(var z=0,y=f.data.length;z<y;z++){var C=f.data[z];C=(typeof C=="string")?[C]:C;var B=f.formatMatch(C,z+1,f.data.length);if(B===false){continue}var A=B.charAt(0).toLowerCase();if(!x[A]){x[A]=[]}var D={value:B,data:C,result:f.formatResult&&f.formatResult(C)||B};x[A].push(D);if(t++<f.max){x[""].push(D)}}b.each(x,function(E,F){f.cacheLength++;n(E,F)})}setTimeout(j,25);function e(){k={};h=0}return{flush:e,add:n,populate:j,load:function(z){if(!f.cacheLength||!h){return null}if(!f.url&&f.matchContains){var y=[];for(var t in k){if(t.length>0){var A=k[t];b.each(A,function(C,B){if(q(B.value,z)){y.push(B)}})}}return y}else{if(k[z]){return k[z]}else{if(f.matchSubset){for(var x=z.length-1;x>=f.minChars;x--){var A=k[z.substr(0,x)];if(A){var y=[];b.each(A,function(C,B){if(q(B.value,z)){y[y.length]=B}});return y}}}}}return null}}};b.Autocompleter.Select=function(j,x,z,D){var t={ACTIVE:"ac_over"};var y,k=-1,F,A="",G=true,f,C;function B(){if(!G){return}f=b("<div/>").hide().addClass(j.resultsClass).css("position","absolute").appendTo(document.body);C=b("<ul/>").appendTo(f).mouseover(function(H){if(E(H).nodeName&&E(H).nodeName.toUpperCase()=="LI"){k=b("li",C).removeClass(t.ACTIVE).index(E(H));b(E(H)).addClass(t.ACTIVE)}}).click(function(H){b(E(H)).addClass(t.ACTIVE);z();x.focus();return false}).mousedown(function(){D.mouseDownOnSelect=true}).mouseup(function(){D.mouseDownOnSelect=false});if(j.width>0){f.css("width",j.width)}G=false}function E(I){var H=I.target;while(H&&H.tagName!="LI"){H=H.parentNode}if(!H){return[]}return H}function q(H){y.slice(k,k+1).removeClass(t.ACTIVE);n(H);var J=y.slice(k,k+1).addClass(t.ACTIVE);if(j.scroll){var I=0;y.slice(0,k).each(function(){I+=this.offsetHeight});if((I+J[0].offsetHeight-C.scrollTop())>C[0].clientHeight){C.scrollTop(I+J[0].offsetHeight-C.innerHeight())}else{if(I<C.scrollTop()){C.scrollTop(I)}}}}function n(H){k+=H;if(k<0){k=y.size()-1}else{if(k>=y.size()){k=0}}}function e(H){return j.max&&j.max<H?j.max:H}function h(){C.empty();var I=e(F.length);for(var J=0;J<I;J++){if(!F[J]){continue}var K=j.formatItem(F[J].data,J+1,I,F[J].value,A);if(K===false){continue}var H=b("<li/>").html(j.highlight(K,A)).addClass(J%2==0?"ac_even":"ac_odd").appendTo(C)[0];b.data(H,"ac_data",F[J])}y=C.find("li");if(j.selectFirst){y.slice(0,1).addClass(t.ACTIVE);k=0}if(b.fn.bgiframe){C.bgiframe()}}return{display:function(I,H){B();F=I;A=H;h()},next:function(){q(1)},prev:function(){q(-1)},pageUp:function(){if(k!=0&&k-8<0){q(-k)}else{q(-8)}},pageDown:function(){if(k!=y.size()-1&&k+8>y.size()){q(y.size()-1-k)}else{q(8)}},hide:function(){f&&f.hide();y&&y.removeClass(t.ACTIVE);k=-1},visible:function(){return f&&f.is(":visible")},current:function(){return this.visible()&&(y.filter("."+t.ACTIVE)[0]||j.selectFirst&&y[0])},show:function(){var J=b(x).offset();f.css({width:typeof j.width=="string"||j.width>0?j.width:b(x).width(),top:J.top+x.offsetHeight,left:J.left}).show();if(j.scroll){C.scrollTop(0);C.css({maxHeight:j.scrollHeight,overflow:"auto"});if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var H=0;y.each(function(){H+=this.offsetHeight});var I=H>j.scrollHeight;C.css("height",I?j.scrollHeight:H);if(!I){y.width(C.width()-parseInt(y.css("padding-left"))-parseInt(y.css("padding-right")))}}}},selected:function(){var H=y&&y.filter("."+t.ACTIVE).removeClass(t.ACTIVE);return H&&H.length&&b.data(H[0],"ac_data")},emptyList:function(){C&&C.empty()},unbind:function(){f&&f.remove()}}};b.Autocompleter.Selection=function(h,j,f){if(h.createTextRange){var e=h.createTextRange();e.collapse(true);e.moveStart("character",j);e.moveEnd("character",f);e.select()}else{if(h.setSelectionRange){h.setSelectionRange(j,f)}else{if(h.selectionStart){h.selectionStart=j;h.selectionEnd=f}}}h.focus()}})(jQuery);(function(b){b.PercListEditorWidget=function(q){var H={isEnabled:W,setListItems:x,getListItems:Q,removeListItems:P,addListItem:M,removeListItem:F,enable:E,disable:j,highlightListItem:O,scrollToListItem:V};var C='<div id="perc-ui-listedit-header">        <div id="perc-ui-listedit-title">            <div id="perc-ui-permission-users-title">                '+q.title1+'            </div>            <div id="perc-ui-permission-users-write">                '+q.title2+'            </div>        </div>        <div id="perc-ui-permission-addstartbutton"/>    </div>    <div id="perc-ui-listedit-listitemfield">        <input id="perc-ui-permission-usernamefield" name="perc-ui-permission-usernamefield"/>        <div id="perc-ui-permission-plusbutton" title="Add user"/>    </div>    <div id="perc-ui-permission-user-list-scroll-pane">        <ul id="perc-ui-permission-user-list">            <li>                <span>Username</span>                <div class="perc-ui-permission-deletebutton" id="Username"/>            </li>        </ul>    </div>';var D='            <li>                <span>_username_</span>                <div class="perc-ui-permission-deletebutton" id="_username_" title="Remove user"/>            </li>';var J=b("#"+q.container);J.empty();J.html(C);var U=J.find("#perc-ui-permission-user-list");var e=J.find("#perc-ui-permission-addstartbutton");var h=J.find("#perc-ui-listedit-listitemfield");var y=J.find("#perc-ui-permission-usernamefield");var N=J.find("#perc-ui-permission-plusbutton");var k=J.find("#perc-ui-permission-user-list-scroll-pane");var X=J.find("#perc-ui-listedit-title");var t;var A="";if(q.help!=undefined&&q.help!=null){A=q.help}else{A=I18N.message("perc.ui.folderPropsDialog.inputField@Enter a username")}var I=[];var z=true;var f=null;q.toggler.change(function(){n()});e.unbind().click(function(){h.toggle()});N.click(function(){var Y=y.val();M(Y)});y.keypress(function(aa){var Z=(aa.keyCode?aa.keyCode:aa.which);var Y=y.val();if(Z==13){if(B(Y)){M(Y)}}}).click(function(){y.focus();R();S("clear");U.find("li").removeClass("perc-ui-listedit-itemselected")}).keyup(function(){R()}).change(function(){R()}).blur(function(){S("help")}).focus(function(){S("clear")});if(q.results!=undefined&&q.results!=null){f=q.results;y.autocomplete(f,{minChars:0,max:f.length,width:(b.browser.msie)?336:334,scrollHeight:101}).result(function(){R()})}if(b.browser.msie){N.css("margin-right","18px")}x(q.items);n();e.hide();K();S("help");return H;function S(Z){var Y=y.val();if(Z=="help"&&Y==""){y.css("font-style","italic");y.css("color","gray");y.val(A)}else{if(Z=="clear"){if(Y==A){y.val("")}y.css("font-style","normal");y.css("color","black")}}}function R(){var Y=y.val();var Z=B(Y);if(Z){G()}else{K()}}function B(Y){for(r=0;r<f.length;r++){if(Y.toLowerCase()==f[r].toLowerCase()){return true}}return false}function x(Y){I=[];if(Y!=undefined&&Y!=null&&Y.length>0){for(u=0;u<Y.length;u++){I.splice(0,0,Y[u]);L(Y[u])}}T()}function Q(){return I}function W(){return z}function P(){I=[];T()}function L(Y){if(f!=null){f=b.grep(f,function(Z){return Z!=Y});y.setOptions({data:f})}}function M(ac){if(ac==null||ac==undefined||ac==""){return}for(li=0;li<I.length;li++){if(ac.toLowerCase()==I[li].toLowerCase()){return}}I.splice(0,0,ac);y.val("");L(ac);T();var Z=-1;for(li=0;li<I.length;li++){if(ac==I[li]){Z=li;break}}var ab=Z+1;var aa=U.find("li:nth-child("+ab+")");var Y=U.find("li").height();if(Z!=-1){k.scrollTop(Z*Y)}aa.addClass("perc-ui-listedit-itemselected");R()}function T(){b.perc_utils.sortCaseInsensitive(I);U.empty();for(u=0;u<I.length;u++){var Y=D.replace(/_username_/g,I[u]);U.append(Y)}t=b(".perc-ui-permission-deletebutton");t.click(function(){var Z=b(this).attr("id");F(Z)})}function F(Z){var Y=-1;for(li=0;li<I.length;li++){if(Z==I[li]){Y=li;break}}if(Y!=-1){I.splice(Y,1);if(f!=null){f[f.length]=Z;b.perc_utils.sortCaseInsensitive(f);y.setOptions({data:f})}T()}}function E(){z=true;y.removeAttr("disabled");var Y=y.val();if(Y!=A){y.css("color","black")}if(Y==""){S("help")}k.removeClass("disabled").css("color","black");X.css("color","black");t.show();R();e.unbind().removeClass("disabled").click(function(){h.toggle()})}function j(){z=false;y.attr("disabled","disabled").css("color","gray");k.addClass("disabled").css("color","gray");X.css("color","gray");t.hide();K();e.addClass("disabled").unbind();U.find("li").removeClass("perc-ui-listedit-itemselected")}function K(){N.addClass("disabled").unbind()}function G(){N.removeClass("disabled").click(function(){var Y=y.val();M(Y)})}function n(){var Y=q.toggler.val();if(b.inArray(Y,q.toggleroff)!=-1){j()}else{E()}}function O(Y){}function V(Y){}}})(jQuery);(function(e){e.fn.superfish=function(x){var k=e.fn.superfish,t=k.c,j=e(['<span class="',t.arrowClass,'"> &#187;</span>'].join("")),q=function(){var y=e(this),z=f(y);clearTimeout(z.sfTimer);y.showSuperfishUl().siblings().hideSuperfishUl()},h=function(){var y=e(this),A=f(y),z=k.op;clearTimeout(A.sfTimer);A.sfTimer=setTimeout(function(){z.retainPath=(e.inArray(y[0],z.$path)>-1);y.hideSuperfishUl();if(z.$path.length&&y.parents(["li.",z.hoverClass].join("")).length<1){q.call(z.$path)}},z.delay)},f=function(y){var z=y.parents(["ul.",t.menuClass,":first"].join(""))[0];k.op=k.o[z.serial];return z},n=function(y){y.addClass(t.anchorClass).append(j.clone())};return this.each(function(){var y=this.serial=k.o.length;var A=e.extend({},k.defaults,x);A.$path=e("li."+A.pathClass,this).slice(0,A.pathLevels).each(function(){e(this).addClass([A.hoverClass,t.bcClass].join(" ")).filter("li:has(ul)").removeClass(A.pathClass)});k.o[y]=k.op=A;e("li:has(ul)",this)[(e.fn.hoverIntent&&!A.disableHI)?"hoverIntent":"hover"](q,h).each(function(){if(A.autoArrows){n(e(">a:first-child",this))}}).not("."+t.bcClass).hideSuperfishUl();var z=e("a",this);z.each(function(B){var C=z.eq(B).parents("li");z.eq(B).focus(function(){q.call(C)}).blur(function(){h.call(C)})});A.onInit.call(this)}).each(function(){var y=[t.menuClass];if(k.op.dropShadows&&!(e.browser.msie&&e.browser.version<7)){y.push(t.shadowClass)}e(this).addClass(y.join(" "))})};var b=e.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var f=b.op;if(e.browser.msie&&e.browser.version>6&&f.dropShadows&&f.animation.opacity!=undefined){this.toggleClass(b.c.shadowClass+"-off")}};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};e.fn.extend({hideSuperfishUl:function(){var j=b.op,h=(j.retainPath===true)?j.$path:"";j.retainPath=false;var f=e(["li.",j.hoverClass].join(""),this).add(this).not(h).removeClass(j.hoverClass).find(">ul").hide().css("visibility","hidden");j.onHide.call(f);return this},showSuperfishUl:function(){var j=b.op,h=b.c.shadowClass+"-off",f=this.addClass(j.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(f);j.onBeforeShow.call(f);f.animate(j.animation,j.speed,function(){b.IE7fix.call(f);j.onShow.call(f)});return this}})})(jQuery);(function(h){var b={percDropdownRootClass:"perc-view",percDropdownOptionLabels:["Title","Option1","Option2"],percDropdownOptionElements:null,percDropdownCallbacks:[function(q){alert(q)},function(q){alert(q)},function(q){alert(q)}],percDropdownCallbackData:["Title","Option1","Option2"],percDropdownDisabledFlag:[true,true,true,true,true],percDropdownItemImage:null,percDropdownTitleImage:null,percDropdownTitleImageOver:null,percDropdownShowExpandIcon:true,percDropdownResizeToElement:null,percDropdownDisabledItemImage:null,delay:50,dropShadows:true};var j="<ul class='sf-menu perc-dropdown'><li class='current'><a class='perc-dropdown-title'>_TITLE_</a><ul class='perc-dropdown-option-list'><li class='perc-dropdown-option-item-template '><a href='#' class='perc-dropdown-option'>_OPTION_</a></li></ul></li></ul>";var n;var k=4;h.fn.PercDropdown=function(y){y=h.extend({},b,y);n=h(j);n.addClass(y.percDropdownRootClass).data("config",y);if(y.percDropdownResizeToElement){y.onBeforeShow=f}var F=y.percDropdownCallbacks;var q=y.percDropdownCallbackData;var D=y.percDropdownOptionLabels;var A=y.percDropdownDisabledFlag;var K=y.percDropdownItemImage;var J=y.percDropdownDisabledItemImage;var H=n.find(".perc-dropdown-title");if(y.percDropdownTitleImage==null){H.css("cursor","default").html(D[0])}else{var E=y.percDropdownRootClass?y.percDropdownRootClass+"-split-button-arrow":"perc-split-button-arrow";H.html("&nbsp;").css("background","url("+y.percDropdownTitleImage+") no-repeat").css("cursor","pointer").addClass(E).hover(function(){h(this).css("background","url("+y.percDropdownTitleImageOver+") no-repeat").css("overflow","visible")},function(){h(this).css("background","url("+y.percDropdownTitleImage+") no-repeat").css("overflow","visible")});var x=n.find(".perc-dropdown-option-list");x.css("margin","4px 0 0 0")}H.addClass("perc-dropdown-title-"+D[0]).data("callback",F[0]).data("callbackData",q[0]).click(e);var C=n.find(".perc-dropdown-option-list");var B=n.find(".perc-dropdown-option-item-template");var z=0;for(l=1;l<D.length;l++){z=l;var G=D[l];var I=B.clone();I.removeClass("perc-dropdown-option-item-template");var t;if(y.percDropdownOptionElements!=null){I.find("a").replaceWith(y.percDropdownOptionElements[l]);t=y.percDropdownOptionElements[l].addClass("perc-dropdown-option-"+h.perc_textFilters.IDNAMECDATA(G))}else{t=I.find("a").html(G).addClass("perc-dropdown-option-"+h.perc_textFilters.IDNAMECDATA(G))}if(K!=null){t.css("background-image","url("+K[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}if(!(A[l])){z=0;t.addClass("perc-drop-disabled").css("color","#9FA3AA");if(J!=null){t.css("background-image","url("+J[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}}C.append(I);I.data("callback",F[z]).data("callbackData",q[z]).click(e)}B.remove();n.superfish(y);if(y.percDropdownShowExpandIcon===false){H.find(".sf-sub-indicator").hide()}else{}this.append(n)};function e(t){var x=h(this).data("callback");var q=h(this).data("callbackData");x(q)}function f(){var y=h(this);var z=h(y.parents(".perc-dropdown")[0]);var q=z.data("config");if(typeof(q)!="undefined"){var x=h(q.percDropdownResizeToElement);var t=x.width();y.width(t-k)}}})(jQuery);(function(e,f){var b=0;e.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:false,multiple:true,position:{}},_create:function(){var n=this.element.hide(),t=this.options;this.speed=e.fx.speeds._default;this._isOpen=false;var k=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(t.classes).attr({title:n.attr("title"),"aria-haspopup":true,tabIndex:n.attr("tabIndex")}).insertAfter(n),h=(this.buttonlabel=e("<span />")).html(t.noneSelectedText).appendTo(k),q=(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(t.classes).appendTo(document.body),y=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(q),j=(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){if(t.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+t.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+t.uncheckAllText+"</span></a></li>"}else{if(typeof t.header==="string"){return"<li>"+t.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(y),x=(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(q);this._bindEvents();this.refresh(true);if(!t.multiple){q.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(t){var k=this.element,q=this.options,n=this.menu,y=this.checkboxContainer,h=[],j=[],x=k.attr("id")||b++;k.find("option").each(function(B){var C=e(this),G=this.parentNode,E=this.innerHTML,I=this.title,F=this.value,A=this.id||"ui-multiselect-"+x+"-option-"+B,J=this.disabled,z=this.selected,D=["ui-corner-all"],H;if(G.tagName.toLowerCase()==="optgroup"){H=G.getAttribute("label");if(e.inArray(H,h)===-1){j.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+H+"</a></li>");h.push(H)}}if(J){D.push("ui-state-disabled")}if(z&&!q.multiple){D.push("ui-state-active")}j.push('<li class="'+(J?"ui-multiselect-disabled":"")+'">');j.push('<label for="'+A+'" title="'+I+'" class="'+D.join(" ")+'">');j.push('<input id="'+A+'" name="multiselect_'+x+'" type="'+(q.multiple?"checkbox":"radio")+'" value="'+F+'" title="'+E+'"');if(z){j.push(' checked="checked"');j.push(' aria-selected="true"')}if(J){j.push(' disabled="disabled"');j.push(' aria-disabled="true"')}j.push(" /><span>"+E+"</span></label></li>")});y.html(j.join(""));this.labels=n.find("label");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!t){this._trigger("refresh")}},update:function(){var q=this.options,j=this.labels.find("input"),h=j.filter(":checked"),k=h.length,n;if(k===0){n=q.noneSelectedText}else{if(e.isFunction(q.selectedText)){n=q.selectedText.call(this,k,j.length,h.get())}else{if(/\d/.test(q.selectedList)&&q.selectedList>0&&k<=q.selectedList){n=h.map(function(){return e(this).next().text()}).get().join(", ")}else{n=q.selectedText.replace("#",k).replace("#",j.length)}}}this.buttonlabel.html(n);return n},_bindEvents:function(){var h=this,j=this.button;function k(){h[h._isOpen?"close":"open"]();return false}j.find("span").bind("click.multiselect",k);j.bind({click:k,keypress:function(n){switch(n.which){case 27:case 38:case 37:h.close();break;case 39:case 40:h.open();break}},mouseenter:function(){if(!j.hasClass("ui-state-disabled")){e(this).addClass("ui-state-hover")}},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){if(!j.hasClass("ui-state-disabled")){e(this).addClass("ui-state-focus")}},blur:function(){e(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(n){if(e(this).hasClass("ui-multiselect-close")){h.close()}else{h[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}n.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(y){y.preventDefault();var x=e(this),t=x.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),n=t.get(),q=x.parent().text();if(h._trigger("beforeoptgrouptoggle",y,{inputs:n,label:q})===false){return}h._toggleChecked(t.filter("[checked]").length!==t.length,t);h._trigger("optgrouptoggle",y,{inputs:n,label:q,checked:n[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!e(this).hasClass("ui-state-disabled")){h.labels.removeClass("ui-state-hover");e(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(n){n.preventDefault();switch(n.which){case 9:case 27:h.close();break;case 38:case 40:case 37:case 39:h._traverse(n.which,this);break;case 13:e(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(x){var t=e(this),y=this.value,q=this.checked,n=h.element.find("option");if(this.disabled||h._trigger("click",x,{value:y,text:this.title,checked:q})===false){x.preventDefault();return}t.focus();t.attr("aria-selected",q);n.each(function(){if(this.value===y){this.selected=q}else{if(!h.options.multiple){this.selected=false}}});if(!h.options.multiple){h.labels.removeClass("ui-state-active");t.closest("label").toggleClass("ui-state-active",q);h.close()}h.element.trigger("change");setTimeout(e.proxy(h.update,h),10)});e(document).bind("mousedown.multiselect",function(n){if(h._isOpen&&!e.contains(h.menu[0],n.target)&&!e.contains(h.button[0],n.target)&&n.target!==h.button[0]){e("html").click(function(){h.close()})}});e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(h.refresh,h),10)})},_setButtonWidth:function(){var h=this.element.outerWidth(),j=this.options;if(/\d/.test(j.minWidth)&&h<j.minWidth){h=j.minWidth}this.button.width(h)},_setMenuWidth:function(){var h=this.menu,j=this.button.outerWidth()-parseInt(h.css("padding-left"),10)-parseInt(h.css("padding-right"),10)-parseInt(h.css("border-right-width"),10)-parseInt(h.css("border-left-width"),10);h.width(j||this.button.outerWidth())},_traverse:function(q,t){var k=e(t),j=q===38||q===37,h=k.parent()[j?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[j?"last":"first"]();if(!h.length){var n=this.menu.find("ul").last();this.menu.find("label")[j?"last":"first"]().trigger("mouseover");n.scrollTop(j?n.height():0)}else{h.find("label").trigger("mouseover")}},_toggleState:function(j,h){return function(){if(!this.disabled){this[j]=h}if(h){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(h,q){var n=(q&&q.length)?q:this.labels.find("input"),k=this;n.each(this._toggleState("checked",h));n.eq(0).focus();this.update();var j=n.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&e.inArray(this.value,j)>-1){k._toggleState("selected",h).call(this)}});if(n.length){this.element.trigger("change")}},_toggleDisabled:function(h){this.button.attr({disabled:h,"aria-disabled":h})[h?"addClass":"removeClass"]("ui-state-disabled");this.menu.find("input").attr({disabled:h,"aria-disabled":h}).parent()[h?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:h,"aria-disabled":h})},open:function(q){var y=this,n=this.button,h=this.menu,k=this.speed,j=this.options;if(this._trigger("beforeopen")===false||n.hasClass("ui-state-disabled")||this._isOpen){return}var x=h.find("ul").last(),z=j.show,t=n.offset();if(e.isArray(j.show)){z=j.show[0];k=j.show[1]||y.speed}x.scrollTop(0).height(j.height);if(e.ui.position&&!e.isEmptyObject(j.position)){j.position.of=j.position.of||n;h.show().position(j.position).hide().show(z,k)}else{h.css({top:t.top+n.outerHeight(),left:t.left}).show(z,k)}this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");n.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var k=this.options,h=k.hide,j=this.speed;if(e.isArray(k.hide)){h=k.hide[0];j=k.hide[1]||this.speed}this.menu.hide(h,j);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(h){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){e.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(h,j){var k=this.menu;switch(h){case"header":k.find("div.ui-multiselect-header")[j?"show":"hide"]();break;case"checkAllText":k.find("a.ui-multiselect-all span").eq(-1).text(j);break;case"uncheckAllText":k.find("a.ui-multiselect-none span").eq(-1).text(j);break;case"height":k.find("ul").last().height(parseInt(j,10));break;case"minWidth":this.options[h]=parseInt(j,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[h]=j;this.update();break;case"classes":k.add(this.button).removeClass(this.options.classes).addClass(j);break}e.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*
 * jQuery UI Timepicker 0.2.1
 *
 * Copyright (c) 2009 Martin Milesich (http://milesich.com/)
 *
 * Some parts are
 *   Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 *
 * $Id: timepicker.js 28 2009-08-11 20:31:23Z majlo $
 *
 * Depends:
 *  ui.core.js
 *  ui.datepicker.js
 *  ui.slider.js
 */
(function(e){e.extend(e.datepicker._defaults,{stepMinutes:1,stepHours:1,time24h:false,showTime:false,altTimeField:""});e.datepicker._setDateFromFieldOverride=e.datepicker._setDateFromField;e.datepicker._setDateFromField=function(j,h){var f=j.input.val().split(" ");if(f.length>0){j.input.val(f[0]);e.datepicker._setDateFromFieldOverride(j,h);j.input.val(f.join(" "))}};e.datepicker._connectDatepickerOverride=e.datepicker._connectDatepicker;e.datepicker._connectDatepicker=function(j,h){e.datepicker._connectDatepickerOverride(j,h);if(this._get(h,"showTime")){h.settings.showButtonPanel=true}var f=this._get(h,"showOn");if(f=="button"||f=="both"){h.trigger.unbind("click");h.trigger.click(function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput==j){e.datepicker._hideDatepicker(null)}else{e.datepicker._showDatepicker(j)}return false})}};e.datepicker._showDatepickerOverride=e.datepicker._showDatepicker;e.datepicker._showDatepicker=function(h){e.datepicker._showDatepickerOverride(h);h=h.target||h;if(h.nodeName.toLowerCase()!="input"){h=e("input",h.parentNode)[0]}if(e.datepicker._isDisabledDatepicker(h)){return}var j=e.datepicker._getInst(h);var f=e.datepicker._get(j,"showTime");if(f){e.timepicker.show(h)}};e.datepicker._checkExternalClickOverride=e.datepicker._checkExternalClick;e.datepicker._checkExternalClick=function(h){if(!e.datepicker._curInst){return}var f=e(h.target);if((f.parents("#"+e.timepicker._mainDivId).length==0)){inst=e.datepicker._getInst(f[0]);if(((f[0].id!=e.datepicker._mainDivId&&f.parents("#"+e.datepicker._mainDivId).length==0&&!f.hasClass(e.datepicker.markerClassName)&&!f.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)))||(f.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!=inst)){e("html").click(function(){e.datepicker._hideDatepicker()})}}return};e.datepicker._hideDatepickerOverride=e.datepicker._hideDatepicker;e.datepicker._hideDatepicker=function(h,k){var j=this._curInst;if(!j||(h&&j!=e.data(h,PROP_NAME))){return}var f=this._get(j,"showTime");if(h===undefined&&f){if(j.input){j.input.val(this._formatDate(j));j.input.trigger("change")}this._updateAlternate(j);if(f){e.timepicker.update(this._formatDate(j))}}e.datepicker._hideDatepickerOverride(h,k);if(f){e.timepicker.hide()}};e.datepicker._selectDate=function(q,h){var n=e(q);var k=this._getInst(n[0]);var f=this._get(k,"showTime");h=(h!=null?h:this._formatDate(k));if(!f){if(k.input){k.input.val(h)}this._updateAlternate(k)}var j=this._get(k,"onSelect");if(j){j.apply((k.input?k.input[0]:null),[h,k])}else{if(k.input&&!f){k.input.trigger("change")}}if(k.inline){this._updateDatepicker(k)}else{if(!k.stayOpen){if(f){this._updateDatepicker(k)}else{this._hideDatepicker(null,this._get(k,"duration"));this._lastInput=k.input[0];if(typeof(k.input[0])!="object"){k.input[0].focus()}this._lastInput=null}}}};e.datepicker._updateDatepickerOverride=e.datepicker._updateDatepicker;e.datepicker._updateDatepicker=function(f){e.datepicker._updateDatepickerOverride(f);e.timepicker.resize()};function b(){}b.prototype={init:function(){this._mainDivId="ui-timepicker-div";this._inputId=null;this._orgValue=null;this._orgHour=null;this._orgMinute=null;this._colonPos=-1;this._visible=false;this.tpDiv=e('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style=" display: none; position: absolute;"></div>');this._generateHtml()},show:function(x){var k=e.datepicker._getInst(x);this._time24h=e.datepicker._get(k,"time24h");this._altTimeField=e.datepicker._get(k,"altTimeField");var f=parseInt(e.datepicker._get(k,"stepMinutes"),10)||1;var t=parseInt(e.datepicker._get(k,"stepHours"),10)||1;if(60%f!=0){f=1}if(24%t!=0){t=1}e("#hourSlider").slider("option","max",24-t);e("#hourSlider").slider("option","step",t);e("#minuteSlider").slider("option","max",60-f);e("#minuteSlider").slider("option","step",f);this._inputId=x.id;if(!this._visible){this._parseTime();this._orgValue=e("#"+this._inputId).val()}this.resize();e("#"+this._mainDivId).show();this._visible=true;var h=e("#"+e.datepicker._mainDivId);var q=h.position();var n=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+e(document).scrollLeft();var y=this.tpDiv.offset().left+this.tpDiv.outerWidth();if(y>n){h.css("left",q.left-(y-n)-5);this.tpDiv.css("left",h.offset().left+h.outerWidth()+"px")}var j=e("#"+this._inputId).offset();h.css("top",j.top+25);this.tpDiv.css("top",j.top+25)},update:function(h){var j=e("#"+this._mainDivId+" span.fragHours").text()+":"+e("#"+this._mainDivId+" span.fragMinutes").text();if(!this._time24h){j+=" "+e("#"+this._mainDivId+" span.fragAmpm").text()}var f=e("#"+this._inputId).val();e("#"+this._inputId).val(h+" "+j);if(this._altTimeField){e(this._altTimeField).each(function(){e(this).val(j)})}},hide:function(){this._visible=false;e("#"+this._mainDivId).hide()},resize:function(){var h=e("#"+e.datepicker._mainDivId);var j=h.position();var f=e("#"+e.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();e("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",f);this.tpDiv.css({height:h.height(),top:j.top,left:j.left+h.outerWidth()+"px"});e("#hourSlider").css("height",this.tpDiv.height()-(3.5*f));e("#minuteSlider").css("height",this.tpDiv.height()-(3.5*f))},_generateHtml:function(){var h="";h+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">';h+='<div class="ui-datepicker-title" style="margin:0">';h+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div><table>';h+="<tr><th>Hour</th><th>Minute</th></tr>";h+='<tr><td align="center"><div id="hourSlider" class="slider"></div></td><td align="center"><div id="minuteSlider" class="slider"></div></td></tr>';h+="</table>";this.tpDiv.empty().append(h);e("body").append(this.tpDiv);var f=this;e("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(j,k){f._writeTime("hour",k.value)},stop:function(j,k){e("#"+f._inputId).focus()}});e("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:59,step:1,slide:function(j,k){f._writeTime("minute",k.value)},stop:function(j,k){e("#"+f._inputId).focus()}});e("#hourSlider > a").css("padding",0);e("#minuteSlider > a").css("padding",0)},_writeTime:function(f,h){if(f=="hour"){if(!this._time24h){if(h<12){e("#"+this._mainDivId+" span.fragAmpm").text("am")}else{e("#"+this._mainDivId+" span.fragAmpm").text("pm");h-=12}if(h==0){h=12}}else{e("#"+this._mainDivId+" span.fragAmpm").text("")}if(h<10){h="0"+h}e("#"+this._mainDivId+" span.fragHours").text(h)}if(f=="minute"){if(h<10){h="0"+h}e("#"+this._mainDivId+" span.fragMinutes").text(h)}},_parseTime:function(){var n=e("#"+this._inputId).val();this._colonPos=n.search(":");var f=0,k=0,j="";if(this._colonPos!=-1){k=parseInt(n.substr(this._colonPos-2,2),10);f=parseInt(n.substr(this._colonPos+1,2),10);j=jQuery.trim(n.substr(this._colonPos+3,3))}j=j.toLowerCase();if(j!="am"&&j!="pm"){j=""}if(k<0){k=0}if(f<0){f=0}if(k>23){k=23}if(f>59){f=59}if(j=="pm"&&k<12){k+=12}if(j=="am"&&k==12){k=0}this._setTime("hour",k);this._setTime("minute",f);this._orgHour=k;this._orgMinute=f},_setTime:function(f,h){if(isNaN(h)){h=0}if(h<0){h=0}if(h>23&&f=="hour"){h=23}if(h>59&&f=="minute"){h=59}if(f=="hour"){e("#hourSlider").slider("value",h)}if(f=="minute"){e("#minuteSlider").slider("value",h)}this._writeTime(f,h)}};e.timepicker=new b();e("document").ready(function(){e.timepicker.init()})})(jQuery);(function(f){f.PercRecentListService={getRecentList:b,setRecent:e,RECENT_TYPE_ITEM:"item",RECENT_TYPE_TEMPLATE:"template",RECENT_TYPE_SITE_FOLDER:"site-folder",RECENT_TYPE_ASSET_FOLDER:"asset-folder",RECENT_TYPES:[this.RECENT_TYPE_ITEM,this.RECENT_TYPE_TEMPLATE,this.RECENT_TYPE_SITE_FOLDER,this.RECENT_TYPE_ASSET_FOLDER]};function b(n,k){var h=f.Deferred();if(!f.inArray(n,f.PercRecentListService.RECENT_TYPES)){h.reject("Invalid type passed in for getting recent items.")}else{var j=f.perc_paths.RECENT_ROOT+n;if(n==f.PercRecentListService.RECENT_TYPE_TEMPLATE||n==f.PercRecentListService.RECENT_TYPE_SITE_FOLDER){j+="/"+k}var q=function(x,t){if(x==f.PercServiceUtils.STATUS_SUCCESS){h.resolve(t)}else{var y=f.PercServiceUtils.extractDefaultErrorMessage(t.request);f.perc_utils.info("Error accessing cm1 page optimizer service: "+y);h.reject(y)}};f.PercServiceUtils.makeJsonRequest(j,f.PercServiceUtils.TYPE_GET,true,q)}return h.promise()}function e(q,t,k){var h=f.Deferred();if(!f.inArray(q,f.PercRecentListService.RECENT_TYPES)){h.reject("Invalid type passed in for getting recent items.")}else{var j=f.perc_paths.RECENT_ROOT+q;if(q==f.PercRecentListService.RECENT_TYPE_TEMPLATE||q==f.PercRecentListService.RECENT_TYPE_SITE_FOLDER){j+="/"+k}var n={value:t};f.ajax({url:j,type:"POST",data:n,contentType:"application/x-www-form-urlencoded",dataType:"json"}).done(function(){h.resolve()}).fail(function(x,y){h.reject("Failed to add item to recent list")})}return h.promise()}})(jQuery);(function(j){j.PercRedirectHandler={createRedirect:q};function q(B,A,y){var x=j.Deferred();if(B==A){x.resolve("Both from and to are same no need for a redirect")}else{if(!gIsSaaSEnvironment){x.resolve("This is a non SaaS environment, skipping redirect creation.")}else{var z={data:{fromPath:B,toPath:A,type:y}};t(z).done(function(C){k(B,A,C).done(function(D){x.resolve(D)}).fail(function(D){x.reject(D)})}).fail(function(C){x.reject(C)})}}return x.promise()}function t(z){var x=j.Deferred();var y=j.perc_paths.REDIRECT_ROOT+"validate";j.PercServiceUtils.makeJsonRequest(y,j.PercServiceUtils.TYPE_POST,false,function(B,A){if(B==j.PercServiceUtils.STATUS_SUCCESS){x.resolve(A.data)}else{var C=j.PercServiceUtils.extractDefaultErrorMessage(A.request);x.reject(C)}},z,function(A){x.reject("Redirect service request timed out.")});return x.promise()}function k(A,z,y){var x=j.Deferred();if(y.response.status=="Error"){x.reject(y.response.errorMessage)}if(y.response.status=="NotApplicable"){x.resolve("Redirects are not applicable for this scenario.")}else{if(y.response.status=="Published"){f(A,z,y).done(function(B){x.resolve(B)}).fail(function(B){x.reject(B)})}else{x.resolve("Redirect is not required for this case.")}}return x.promise()}function e(D,C,B){D=h(D);C=h(C);var z=j.Deferred();var x=B.response.redirectLicense;var y={category:"AUTOGEN",condition:D,enabled:true,key:x.key,permanent:true,redirectTo:C,site:B.response.bucketName,type:"CM1"};var A={id:x.key,type:x.name,token:x.handshake};j.ajax({type:"POST",beforeSend:function(E){E.setRequestHeader("Authorization",JSON.stringify(A))},url:x.apiProvider+"/rest/redirect/entries?replace=true",data:JSON.stringify(y),contentType:"application/json",}).done(function(G,E,F){z.resolve("Created redirect successfully")}).fail(function(H,E,G){var F="A redirect rule cannot be created at this time, Please note the time and date and submit this problem to Percussion support.";if(H&&H.responseText){F=JSON.parse(H.responseText).message}z.reject(F)});return z.promise()}function f(B,A,z){var x=j.Deferred();var y;j.unblockUI();y=j(b(B,A)).perc_dialog({title:"Manage Redirects",modal:true,percButtons:{Yes:{click:function(){if(!A){A=y.find("#perc-redirect-to-path").val()}if(!A){y.find("div.perc_field_error[for=perc-redirect-to-path]").show();return}else{y.find("div.perc_field_error[for=perc-redirect-to-path]").hide()}j.PercBlockUI(j.PercBlockUIMode.CURSORONLY);e(B,A,z).fail(function(C){x.reject(C)}).always(function(){j.unblockUI();y.remove();x.resolve("Redirect created successfully.")})},id:"perc-redirect-yes"},No:{click:function(){y.remove();x.resolve("User doesn't want to create redirect.")},id:"perc-redirect-no"}},id:"perc-redirect-dialog",width:700});n(y);return x.promise()}function b(z,x){var y=j("<div/>",{id:"perc-redirect-container"});y.append('<div><label>This change could cause a visitor to your website to see a "page not found" error. Would you like to redirect those users?</label><br/><br/></div>');y.append("<div><label>From path:</label><br/></div>");y.append('<div class="readonlyinput">'+h(z)+"</div><br/>");y.append("<div><label>To path:</label><br/></div>");if(x){y.append('<div class="readonlyinput">'+h(x)+"</div>")}else{y.append("<div><input type='text' class='required' readonly='true' name='perc-redirect-to-path' id='perc-redirect-to-path'/><img id='perc-redirect-to-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div>");y.append("<div for='perc-redirect-to-path' class='perc_field_error' style='display:none'>To path is required to create redirect.</div>")}return y}function n(x){x.find("#perc-redirect-to-path-button").click(function(){var B="Select redirect to path";var C="To path";var A=function(E){var D=E.path;if(D.substring(0,1)==="/"&&!(D.substring(0,2)==="//")){D="/"+D}if(!D){D=E.folderPaths.split("$System$")[1]}D=h(D);x.find("#perc-redirect-to-path").val(D).attr("title",D)};var y=function(E){var D=null;if(!E){D="Please select a folder or page."}else{if(E.path=="/Sites/"){D="Your current selection is sites root, please select a folder or page."}else{if(E.type=="site"){D="Your current selection is a site, please select a folder or page."}}}return D};var z={okCallback:A,dialogTitle:B,rootPath:"Sites",initialPath:x.find("#perc-convert-folder-path").val(),selectedItemValidator:y,showFoldersOnly:false};j.PercPathSelectionDialog.open(z)})}function h(x){x=x.replace("//Sites/","");x=x.replace("/Sites/","");x=x.substring(x.indexOf("/"));if(x.charAt(x.length-1)=="/"){x=x.substr(0,x.length-1)}return x}})(jQuery);(function(f){f.fn.PercSimpleMenu=function(z){var C=z.title;var y=z.items;var B=f("<div class='perc-simplemenu'>");var x=f("<div class='perc-simplemenu-title perc-simplemenu-title-deselected'>").append(C);B.append(x);var A=f("<div class='perc-simplemenu-menuitems'>");B.append(A);B.data("config",z);f.each(y,function(E,G){var F="perc-menu-item";if(E==y.length-1){F="perc-menu-last-item"}var D=G.label;var J=G.callback;var H=G.data;var I=f("<div class='perc-simplemenu-menuitem perc-index-"+E+"'>").append(D).addClass(F).data("callback",J).click(function(K){q(K);var M=f(this).data("callback");var L=B.data("data");K.data=L;M(K)}).hover(function(){f(this).css("color","#000")},function(){f(this).css("color","#fff")});if(H){I.data("data",H)}A.append(I)});f(this).append(B);x.click(t);B.hover(k,b);return f(B)};function t(y){var x=f(y.currentTarget);if(x.hasClass("perc-simplemenu-title-deselected")){x.addClass("perc-simplemenu-title-selected").removeClass("perc-simplemenu-title-deselected");n(y)}else{x.removeClass("perc-simplemenu-title-selected").addClass("perc-simplemenu-title-deselected");j(y)}}var h=true;var e=null;function k(x){if(e==x.currentTarget){h=false}}function b(x){h=true;e=x.currentTarget;setTimeout(function(){if(h){j(x)}},500)}function n(L){var B=f(L.currentTarget);var P=B.next();var F=P.width();var y=B.parents(".perc-simplemenu");var O=y.data("config");var G=B.offset().top+B.height();var D=B.offset().left;if(O.menuItemsAlign=="left"){D=D-F+B.width()}if(O.stayInsideOf){var H=y.parents(O.stayInsideOf);var E=H.offset().top;var I=H.height();var N=E+I;var x=P.height();var A=G+x;var M;if(A>N){M=G-x-B.height()}if(M>E){G=M}if(O.menuItemsAlign!="left"){var z=H.offset().left;var C=H.width();var J=z+C;var K=D+F;if(K>J){D=D-F+B.width()}}}P.css("position","absolute").css("top",G+"px").css("left",D+"px");P.show()}function j(z){var A=f(z.currentTarget);var B=A;if(!A.hasClass("perc-simplemenu")){B=A.parents(".perc-simplemenu")}var x=B.find(".perc-simplemenu-title");x.removeClass("perc-simplemenu-title-selected").addClass("perc-simplemenu-title-deselected");var y=B.find(".perc-simplemenu-menuitems");y.hide()}function q(x){j(x)}})(jQuery);(function(b){b.fn.PercPageDataTable=function(e,k){var j=e.percData;b.each(j,function(n,q){if(typeof(q.rowContent[0][0].callback)==="undefined"){q.rowContent[0][0].callback=b.PercPreviewPage}});if(typeof(e.percRowDblclickCallback)==="undefined"){e.percRowDblclickCallback=function(n){var q=window.parent.jQuery;q.PercNavigationManager.openPage(n.data.pagePath)}}if(!e.percMenus){e.percMenus=b.PercPageActions}var f=function(){b(h).find(".perc-index-0 > .perc-index-0 > span").each(function(){b(this).PercTooltip()})};if(typeof(e.percTableRedrawCallback)!=="object"){if(typeof(e.percTableRedrawCallback)==="function"){e.percTableRedrawCallback=[e.percTableRedrawCallback]}else{e.percTableRedrawCallback=[]}}e.percTableRedrawCallback.push(f);if(k){var h=b(this).PercDataTable(e)}else{var h=b(this).PercActionDataTable(e)}f();return h}})(jQuery);(function(f){var e=41;f.fn.PercActionDataTable=function(j){var n=j.percData;j.percHeaders.push("Actions");var q="";f.each(n,function(t,z){var y=f.isArray(j.percMenus)?j.percMenus[t]:j.percMenus;var x=b(y,j.percData[t].rowData);z.rowContent.push([{content:x}])});if(j.percVisibleColumns){j.percVisibleColumns.push(j.percHeaders.length-1)}if(typeof(j.percTableRedrawCallback)!=="object"){if(typeof(j.percTableRedrawCallback)==="function"){j.percTableRedrawCallback=[j.percTableRedrawCallback]}else{j.percTableRedrawCallback=[]}}j.percTableRedrawCallback.push(h);if(!j.aoColumns){j.aoColumns=[]}j.aoColumns[j.percHeaders.length-1]={bSortable:false};var k=f(this).PercDataTable(j);k.find("th.perc-last").width(e);h(k);return k};function b(n,k){if(n==undefined){n=f.PercPageActions}var j=f("<div />").PercSimpleMenu(n);j.find("a").each(function(){f(this).attr("href",percJQuery.perc_paths.ASSET_FORMS_EXPORT+"/"+k.formSummary.name+".csv");f(this).attr("target","_blank");f(this).addClass("perc-datatable-form-tracker-export-action")});if(k){j.data("data",k)}return j}f.PercOpenPage=function(j){var k=j.data;if(k){var n=window.parent.jQuery;n.PercNavigationManager.openPage(k.pagePath)}else{}};f.PercOpenAsset=function(j){var k=j.data;if(k){var q={};q.id=k.assetId;q.path=k.assetPath;var n=window.parent.jQuery;n.PercNavigationManager.openAsset(q)}};f.PercPreviewAsset=function(j){var k=j.data;if(!k){k=f(j.currentTarget).parents(".perc-datatable-row").data("percRowData")}if(k){var n=window.parent.jQuery;n.perc_finder().launchAssetPreview(k.assetId)}};f.PercPreviewPage=function(j){var k=j.data;if(!k){k=f(j.currentTarget).parents(".perc-datatable-row").data("percRowData")}if(k){var n=window.parent.jQuery;n.perc_finder().launchPagePreviewByPath(k.pagePath,k.pageId)}else{}};f.PercPageActions={title:"",menuItemsAlign:"left",stayInsideOf:".dataTables_wrapper",items:[{label:"Open Page",callback:f.PercOpenPage},{label:"Preview Page",callback:f.PercPreviewPage}]};function h(j){j.find("td:last-child").attr("align","right").attr("text-align",null).dblclick(function(k){k.stopPropagation()});j.find("td.perc-actions div").css("overflow","visible")}})(jQuery);(function(h){var z;var x;var q=-1,f=0,B=1,y=2,t=3;var H=q;var G=20;var k;var D;var A;var e;h.fn.percAutoScroll=function(I){var J={directions:"n, s, e, w",offsetX:0,offsetY:0,width:30,backgroundColor:"blue",opacity:0.5,speed:10,debug:false,callback:function(){}};z=h.extend(J,I);x=h(this);k=x[0].tagName;if(k==="IFRAME"){D=x[0].contentWindow;A=x[0].contentWindow.document;e=h(D)}C()};h.fn.percAutoScroll.remove=function(){h(".autoscroll").remove();clearInterval(E)};function C(){h(".autoscroll").remove();z.offsetY=x.position().top;var M=x.position();var I=0;var K=M.left;var L=x.width();var P=x.height();if(z.directions.indexOf("n")!=-1){var J=n(f,K,z.offsetY+I,L-G,z.width);h("body").append(J)}if(z.directions.indexOf("s")!=-1){var O=n(B,K,z.offsetY+I+P-G-z.width,L-G,z.width+G);h("body").append(O)}if(z.directions.indexOf("w")!=-1){var Q=n(y,K,z.offsetY+I+z.width,z.width,P-G-z.width*2);h("body").append(Q)}if(z.directions.indexOf("e")!=-1){var N=n(t,K+L-G-z.width,z.offsetY+I+z.width,z.width,P-G-z.width*2);h("body").append(N)}}var E;function n(L,J,N,K,I){var M=h("<div class='autoscroll' style='z-index:500;'>").width(K).height(I).css("opacity",z.opacity).css("position","absolute").css("top",N).css("left",J).droppable({addClasses:false,tolerance:"pointer",over:function(){H=L;E=setInterval(function(){b()},15)},out:function(){H=q;clearInterval(E)},drop:function(){H=q;clearInterval(E)}});if(z.debug){M.css("background-color",z.backgroundColor)}return M}function b(){var P=0;var O=0;var N=x;var M=j();var J=M.top;var L=M.left;switch(H){case f:O=J-z.speed;break;case B:O=J+z.speed;break;case y:P=L-z.speed;break;case t:P=L+z.speed;break;default:clearInterval(E)}F(P,O);var K=j();var I=K.top;var Q=K.left;h(this).percAutoScroll.postScrollView(Q-L,I-J)}h.fn.percAutoScroll.postScrollView=function(){};function j(){var I;var J;if(k=="IFRAME"){I=e.scrollTop();J=e.scrollLeft()}else{I=x.scrollTop();J=x.scrollLeft()}return{top:I,left:J}}function F(I,J){if(k=="IFRAME"){e[0].scrollTo(I,J)}else{x.scrollTop(J);x.scrollLeft(I)}}})(jQuery);(function(h){h.PercPathService={getPathItemById:J,getFolderPathItem:y,getPathItemForPath:x,getItemPropertiesByWorkflowState:f,deleteFolder:t,deleteSection:E,deleteFSFolder:k,moveItem:B,renameFolder:H,createNewFolder:z,getLastExistingPath:F,validatePath:A,getDisplayFormat:G,getContentForPath:K,getFolderProperties:b,saveFolderProperties:n,deleteFolderSkipValidation:C,getInlineRenderLink:e};function G(N){var M=h.perc_utils.getDisplayFormat(h.PercNavigationManager.getPath());if(h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_SEARCH_RESULTS||h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_RESULT){M=h.perc_utils.getDisplayFormat("/")}var L=h.perc_paths.DISPLAY_FORMAT+M;h.PercServiceUtils.makeJsonRequest(L,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function K(L,O,P){var M=h.perc_utils.encodeURL(O.path)+"/?startIndex="+O.startIndex+"&maxResults="+O.maxResults+"&displayFormatId="+L.id+"&sortColumn="+O.sortColumn+"&sortOrder="+O.sortOrder;var N=h.perc_paths.PATH_PAGINATED_FOLDER+M;h.PercServiceUtils.makeJsonRequest(N,h.PercServiceUtils.TYPE_GET,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(h.PercServiceUtils.STATUS_ERROR,S)}})}function x(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM+M,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function J(N,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_BY_ID+"/"+N,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(O.request);var Q=h.PercServiceUtils.extractGlobalErrorCode(O.request);M(h.PercServiceUtils.STATUS_ERROR,R,Q)}})}function f(N,P,L,O){if(L==null){L=""}var M={ItemByWfStateRequest:{path:N,workflow:P,state:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},M)}function B(O,L,N){var M={MoveFolderItem:{itemPath:O,targetFolderPath:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_MOVE,h.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);N(h.PercServiceUtils.STATUS_ERROR,R)}},M)}function z(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ADD_NEW_FOLDER+M,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function y(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_FOLDER+h.perc_utils.encodeURL(M),h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function H(N,L,O){var M={RenameFolderItem:{path:N,name:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_RENAME_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);var P=h.PercServiceUtils.extractFieldErrorCode(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S,P)}},M)}function t(N,L,M,O){h.ajax({url:h.perc_paths.PATH_VALIDATE_DELETE_FOLDER+N,dataType:"text",type:"GET",success:function(P){q(P,N,L,M,O)},error:j})}function E(N,M,P){h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);var L={DeleteFolderCriteria:{path:N,skipItems:"NO"}};var O=3600000;h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(L),timeout:O,success:P,error:I});h.unblockUI()}function k(M,L,N){t(M,L,"fsfolder",N)}function F(M,N,L){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_LAST_EXISTING+M,h.PercServiceUtils.TYPE_GET,(L!=null&&L)?true:false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function A(L,M){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_VALIDATE_EXIST+L,h.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},null,null,null,true)}function q(N,O,L,M,R){var Q;if(M=="section"){Q=I18N.message("perc.ui.finder.section.delete@Title")}else{Q=I18N.message("perc.ui.finder.folder.delete@Title")}var P=3600000;h.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:Q,question:D(N,L,M),success:function(){var T="EMPTY";if(h("#perc_delete_folder_force").length>0){T=h("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var S={DeleteFolderCriteria:{path:O,skipItems:T}};h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(S),timeout:P,success:R,error:I});h.unblockUI()},width:500})}function C(O,L,M,P){var N="";q(N,O,L,M,P)}function j(L){var M=h.PercServiceUtils.extractDefaultErrorMessage(errors);var N="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(M!="")?M:N})}function I(N){var L=h.PercServiceUtils.extractDefaultErrorMessage(N);var M="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(L!="")?L:M})}function D(P,M,R){var L;var Q;var T="";var S="";if(R=="Assets"){L="perc.ui.finder.folder.delete@ConfirmAssets";Q="perc.ui.finder.folder.delete@WarningAssets";var O=P.indexOf("AssetsNotAuthorized");if(P.indexOf("AssetsNotAuthorized")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(P.indexOf("AssetsInUseTemplates")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(P.indexOf("AssetsInUsePages")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";S="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(R=="fsfolder"){L="perc.ui.finder.fsfolder.delete@Confirm";Q="perc.ui.finder.fsfolder.delete@Warning"}else{if(R=="Sites"){L="perc.ui.finder.folder.delete@ConfirmPages";Q="perc.ui.finder.folder.delete@WarningPages"}else{L="perc.ui.finder.section.delete@Confirm";Q="perc.ui.finder.section.delete@Warning"}if(P.indexOf("PagesNotAuthorized")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(P.indexOf("PagesInUseTemplates")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(P.indexOf("PagesInUsePages")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";S="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var N;if(P=="Success"){N=I18N.message(L,[M])}else{N=I18N.message(Q,[M])+"<br/><br/>"}return N+T+S}function b(M,L){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+M,h.PercServiceUtils.TYPE_GET,true,function(O,N){L(O,N)})}function n(L,M){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,h.PercServiceUtils.TYPE_POST,true,function(O,N){M(O,N)},L)}function e(N,M,O){var L=h.perc_paths.RENDER_LINK_PREVIEW+"/"+N;if(M=="image"){L+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{L+="/default"}h.PercServiceUtils.makeJsonRequest(L,h.PercServiceUtils.TYPE_GET,true,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(true,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(false,R)}})}})(jQuery);(function(h){h.PercAssetService={getAssetEditorForAssetId:y,getAssetViewForAssetId:e,getAssetEditorLibrary:A,getAssetEditor:k,getAssetEditorForWidgetAndFolder:x,putAssetInFolder:n,clear_asset:D,clear_orphan_assets:z,set_relationship:f,update_relationship:G,asset_from_local_content:C,deleteAsset:b,forceDeleteAsset:E,validateDeleteAsset:j,updateAsset:t,getUnusedAssets:B,promoteAsset:H,getAssetTypes:F};function y(I,J){h.ajax({url:h.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+I,success:function(M,L){var K={data:M,textstatus:L};J(h.PercServiceUtils.STATUS_SUCCESS,M)},error:function(N,L,M){var K={request:N,textstatus:L,error:M};var O=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,O)}})}function e(I,J){h.ajax({url:h.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+I,success:function(M,L){var K={data:M,textstatus:L};J(h.PercServiceUtils.STATUS_SUCCESS,M)},error:function(N,L,M){var K={request:N,textstatus:L,error:M};var O=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,O)}})}function A(I,J){q(I,"",J)}function q(K,J,L){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR_LIBRARY+K+"?filterDisabledWidgets=yes&widgetId="+J,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function k(J,K){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR+"/"+J,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}})}function x(I,J,K){q(I,J,K)}function n(I,J){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_ADD_TO_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},I)}function b(K,J,I){h.ajax({url:h.perc_paths.ASSET_DELETE+"/"+K,type:"DELETE",success:function(){J()},error:I})}function E(K,J,I){h.ajax({url:h.perc_paths.ASSET_FORCE_DELETE+"/"+K,type:"GET",success:J,error:I})}function j(K,J,I){h.ajax({url:h.perc_paths.ASSET_VALIDATE_DELETE+"/"+K,type:"GET",success:J,error:I})}function f(S,Q,J,L,I,K,O,N){var R=I?"shared":"local";var M=(typeof(Q.relationshipId)!="undefinded")?Q.relationshipId:-1;var P={AssetWidgetRelationship:{ownerId:J,widgetId:Q.widgetid,widgetName:Q.widgetdefid,widgetInstanceName:Q.widgetName,replacedRelationshipId:M,assetId:S,assetOrder:"0",resourceType:R}};if(K){P.AssetWidgetRelationship.folderPath=K}h.ajax({url:h.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(P),success:O,error:N})}function C(L,P,I,K,M,O){var J=h.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+K+M;var N={AssetWidgetRelationship:{ownerId:I,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,assetId:L,assetOrder:"0",resourceType:"local"}};h.PercServiceUtils.makeRequest(J,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},N,"application/json","text")}function G(N,L,P,J,K,M){var I=(typeof(P.relationshipId)!="undefinded")?P.relationshipId:-1;var O={AssetWidgetRelationship:{ownerId:J,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,replacedRelationshipId:I,assetId:N,assetOrder:"0",resourceType:"local",relationshipId:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",h.PercServiceUtils.TYPE_POST,true,function(Q,R){if(Q==h.PercServiceUtils.STATUS_SUCCESS){var S=R.data;if(S=="-1"){var U="The asset has been removed from the system.";M(false,U)}else{K(true,R.data)}}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);M(false,T)}},O)}function D(I,K,J,L,N){N=N||function(){};var M={AssetWidgetRelationship:{ownerId:I,widgetId:K,widgetName:J,assetId:L,assetOrder:"0"}};h.ajax({url:h.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(M),success:N,error:function(Q,O,P){alert("error")}})}function z(P,N,I,J,Q){Q=Q||function(){};var K=[];for(var M=0;M<J.length;M++){var L="";L='{"assetId":"'+J[M]+'","assetOrder":0,"ownerId":"'+P+'","widgetId":'+N[M]+',"widgetName":"'+I[M]+'"}';K.push(L)}var R='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+K+"]}}";var O=h.parseJSON(R);h.ajax({url:h.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(O),success:Q,error:function(U,S,T){alert("error")}})}function t(J,K,M){var I=h.perc_paths.ASSET_UPDATE+"/"+J+"/"+K;var L=function(N,O){if(N==h.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,O.data)}};h.PercServiceUtils.makeRequest(I,h.PercServiceUtils.TYPE_POST,true,L)}function H(L,P,M,J,K,O){var I=K?"shared":"local";var N={AssetWidgetRelationship:{ownerId:M,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,assetId:L,assetOrder:J,resourceType:I}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_PROMOTE,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},N)}function B(I,J){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_UNUSED+"/"+I,h.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(K.data.UnusedAssetSummary))}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}})}function F(J,K){var I=h.perc_paths.ASSET_TYPES;if(J&&J=="yes"){I+=I.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}h.PercServiceUtils.makeJsonRequest(I,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(L.data.WidgetContentType))}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}})}})(jQuery);(function(q){q.PercItemPublisherService={publishItem:j,takeDownItem:f,publishToStaging:k,removeFromStaging:t,getPublishActions:b,setScheduleDates:x,getScheduleDates:e,isDefaultServerModified:n,PUBLISHER_JOB_STATUS_FORBIDDEN:"FORBIDDEN",PUBLISHER_JOB_STATUS_BADCONFIG:"BADCONFIG",PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS:"NOSTAGING_SERVERS",PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES:"BADCONFIGMULTIPLESITES"};function j(A,z,B){var y=z=="Page"?q.perc_paths.PAGE_PUBLISH:q.perc_paths.RESOURCE_PUBLISH;y+="/"+A;h(y,B)}function f(A,z,B){var y=z=="Page"?q.perc_paths.PAGE_TAKEDOWN:q.perc_paths.RESOURCE_TAKEDOWN;y+="/"+A;h(y,B)}function h(y,A){var z=function(B,C){if(B==q.PercServiceUtils.STATUS_ERROR){A(false,[C.request,C.textstatus,C.error])}else{A(true,[C.data,C.textstatus])}};q.PercServiceUtils.makeRequest(y,q.PercServiceUtils.TYPE_GET,true,z)}function b(z,B){var y=q.perc_paths.SITE_ITEM_PUBLISH_ACTIONS+"/"+z;var A=function(C,D){if(C==q.PercServiceUtils.STATUS_ERROR){B(false,[D.request,D.textstatus,D.error])}else{B(true,D.data)}};q.PercServiceUtils.makeRequest(y,q.PercServiceUtils.TYPE_GET,true,A)}function e(z,B){var y=q.perc_paths.ITEM_GETDATES+"/"+z;var A=function(C,D){if(C==q.PercServiceUtils.STATUS_ERROR){B(false,[D.request,D.textstatus,D.error])}else{B(true,D.data)}};q.PercServiceUtils.makeRequest(y,q.PercServiceUtils.TYPE_GET,true,A)}function x(z,C){var y=q.perc_paths.ITEM_SETDATES;var A=z;var B=function(D,E){if(D==q.PercServiceUtils.STATUS_ERROR){var F=q.PercServiceUtils.extractDefaultErrorMessage(E.request);C(false,F)}else{C(true,E.data)}};q.PercServiceUtils.makeJsonRequest(y,q.PercServiceUtils.TYPE_POST,true,B,A)}function n(y,A){serviceUrl=q.perc_paths.DEFAULT_SERVER_MODIFIED+y;var z=function(B,C){if(B==q.PercServiceUtils.STATUS_ERROR){var D=q.PercServiceUtils.extractDefaultErrorMessage(C.request);A(false,D)}else{A(true,C.data=="true")}};q.PercServiceUtils.makeRequest(serviceUrl,q.PercServiceUtils.TYPE_GET,false,z)}function k(A,z,B){var y=z=="Page"?q.perc_paths.PAGE_PUBLISH:q.perc_paths.RESOURCE_PUBLISH;y+="/staging/"+A;h(y,B)}function t(A,z,B){var y=z=="Page"?q.perc_paths.PAGE_TAKEDOWN:q.perc_paths.RESOURCE_TAKEDOWN;y+="/staging/"+A;h(y,B)}})(jQuery);(function(t){t.PercWorkflowService=function(){return{checkIn:C,checkOut:n,forceCheckOut:q,transition:I,getTransitions:E,isCheckedOutToCurrentUser:J,isApproveAvailableToCurrentUser:x,getWorkflowObject:y,createNewWorkflowStep:h,deleteWorkflowStep:b,updateWorkflowStep:k,getStatusByWorkflow:j,getWorkflowList:H,getWorkflows:F,createWorkflow:e,updateWorkflow:A,deleteWorkflow:D,bulkApproveItems:z,getBulkApproveStatus:f,getDefaultWorkflow:B}};function j(M,L){var K="/Rhythmyx/services/workflowmanagement/workflows/"+t.perc_utils.encodeURL(M)+"/states/choices";L=L==null?function(){}:L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,L)}function n(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKOUT+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function C(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKIN+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function E(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_TRANSITIONS+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function I(M,L,O,N){if(t.perc_utils.isBlankString(M)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}N=N==null?function(){}:N;var K=t.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+M+"/"+L+"?comment="+O;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,N)}function q(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function J(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function x(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function y(K,N){var M=t.perc_paths.WORKFLOW_STEPPED+K;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_GET,false,L)}function k(K,P,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+P;var M=function(Q,R){if(Q==t.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_PUT,false,M,L)}function h(K,P,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+G(P);if((P.indexOf("/")!=-1)||(P.indexOf("\\")!=-1)||(P.indexOf(";")!=-1)||(P.indexOf('"')!=-1)){L.Workflow.workflowSteps[0].stepName=P.replace(/[\\\/\;"]/g,"#")}var M=function(Q,R){if(Q==t.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_POST,false,M,L)}function b(K,O,N){var M=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+O;var L=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_DELETE,false,L)}function H(M){var L=t.perc_paths.WORKFLOW_STEPPED;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{O.data.EnumVals.entries=t.perc_utils.convertCXFArray(O.data.EnumVals.entries);M(true,[O.data,O.textstatus])}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function B(M){var L=t.perc_paths.DEFAULT_WORKFLOW_META;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{O.data.EnumVals.entries=t.perc_utils.convertCXFArray(O.data.EnumVals.entries);M(true,O.data)}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function F(M){var L=t.perc_paths.WORKFLOW_META;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,[O.data,O.textstatus])}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function e(K,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+G(K);if((K.indexOf("/")!=-1)||(K.indexOf("\\")!=-1)||(K.indexOf(";")!=-1)||(K.indexOf('"')!=-1)){L.Workflow.workflowName=K.replace(/[\\\/\;"]/g,"#")}var M=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_POST,false,M,L)}function A(O,K,N){var M=t.perc_paths.WORKFLOW_STEPPED+O;var L=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_PUT,false,L,K)}function G(K){var L=K.toString();L=L.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(L))}function D(K,N){var M=t.perc_paths.WORKFLOW_STEPPED+K;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_DELETE,false,L)}function z(K,N){var M=t.perc_paths.WORKFLOW_BULK_APPROVE;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_POST,false,L,K)}function f(K,L,O){var N=t.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(L){N+="/full/"+K}else{N+="/processed/"+K}var M=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_GET,false,M)}})(jQuery);(function(f){f.PercRevisionService={getRevisionDetails:h,restoreRevision:b,getLastComment:e};function h(k,n){var j=f.perc_paths.ITEM_REVISIONS+"/"+k;f.PercServiceUtils.makeJsonRequest(j,f.PercServiceUtils.TYPE_GET,true,n)}function b(q,n,t){var j=q.split("-");j[0]=n;q=j.join("-");var k=f.perc_paths.ITEM_PROMOTE_REVISION+"/"+q;f.PercServiceUtils.makeJsonRequest(k,f.PercServiceUtils.TYPE_GET,true,t)}function e(k,n){var j=f.perc_paths.ITEM_LAST_COMMENT+"/"+k;f.PercServiceUtils.makeRequest(j,f.PercServiceUtils.TYPE_GET,true,n)}})(jQuery);(function(n){n.PercFolderService={getFoldersWithWorkflow:j,assignFoldersWithWorkflow:h,startAssociatedFoldersJob:k,getAssociatedFoldersJobStatus:b,getFolderPagesById:f,cancelAssociatedFoldersJob:q,isWorkflowAssignmentInProgress:e};function j(z,x,A,t){var y=n.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW+"/"+encodeURI(x)+"/"+z;if(t){y=y+"?includeFoldersWithDifferentWorkflow=true"}n.PercServiceUtils.makeJsonRequest(y,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}})}function k(z,x,A,t){var y=n.perc_paths.FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB+encodeURI(x)+"/"+z;if(t){y=y+"?includeFoldersWithDifferentWorkflow=true"}n.PercServiceUtils.makeJsonRequest(y,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}})}function b(t,y){var x=n.perc_paths.FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS+t;n.PercServiceUtils.makeJsonRequest(x,n.PercServiceUtils.TYPE_GET,false,function(A,z){if(A==n.PercServiceUtils.STATUS_SUCCESS){y(n.PercServiceUtils.STATUS_SUCCESS,z.data)}else{var B=n.PercServiceUtils.extractDefaultErrorMessage(z.request);y(n.PercServiceUtils.STATUS_ERROR,B)}})}function h(t,y,x){n.PercServiceUtils.makeJsonRequest(n.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN,n.PercServiceUtils.TYPE_POST,false,function(A,z){if(A==n.PercServiceUtils.STATUS_SUCCESS){y(n.PercServiceUtils.STATUS_SUCCESS,z.data)}else{var B=n.PercServiceUtils.extractDefaultErrorMessage(z.request);y(n.PercServiceUtils.STATUS_ERROR,B)}},t,x,5000)}function f(t,x){n.PercServiceUtils.makeJsonRequest(n.perc_paths.FOLDERMGT_FOLDER_PAGES+t,n.PercServiceUtils.TYPE_GET,false,function(z,y){if(z==n.PercServiceUtils.STATUS_SUCCESS){x(true,y.data)}else{var A=n.PercServiceUtils.extractDefaultErrorMessage(y.request);x(false,A)}})}function q(t,y,z){var x=n.perc_paths.FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB+t;n.PercServiceUtils.makeJsonRequest(x,n.PercServiceUtils.TYPE_GET,y,function(B,A){if(B==n.PercServiceUtils.STATUS_SUCCESS){z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}else{var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}})}function e(x){var t=n.perc_paths.FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS;n.PercServiceUtils.makeRequest(t,n.PercServiceUtils.TYPE_GET,false,function(z,y){if(z==n.PercServiceUtils.STATUS_SUCCESS){x(y.data)}else{var A=n.PercServiceUtils.extractDefaultErrorMessage(y.request);n.perc_utils.info(A);x(false)}})}})(jQuery);(function(e){e.PercSiteImpactService={getSiteImpactDetails:b};function b(h,j){var f=e.perc_paths.ASSET_SITE_IMPACT+"/"+h;e.PercServiceUtils.makeJsonRequest(f,e.PercServiceUtils.TYPE_GET,true,j)}})(jQuery);(function(h){h.PercUtilService={getPrivateKeys:j,encryptString:n,encryptStrings:e,decryptString:b,logToServer:f};function j(x,t){var q=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.UTIL_GET_PRIVATE_KEYS,h.PercServiceUtils.TYPE_GET,!t,function(z,y){if(z==h.PercServiceUtils.STATUS_SUCCESS){x(h.PercServiceUtils.STATUS_SUCCESS,y)}else{var A=h.PercServiceUtils.extractDefaultErrorMessage(y.request);x(h.PercServiceUtils.STATUS_ERROR,A)}})}function n(y,z,x){var q=this;var t={psmap:{entries:{entry:{key:"string",value:y}}}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.UTIL_ENCRYPT_STRING,h.PercServiceUtils.TYPE_POST,!x,function(B,A){if(B==h.PercServiceUtils.STATUS_SUCCESS){z(h.PercServiceUtils.STATUS_SUCCESS,A.data.psmap.entries.entry.value)}else{var C=h.PercServiceUtils.extractDefaultErrorMessage(A.request);z(h.PercServiceUtils.STATUS_ERROR,C)}},t)}function e(t,z,y){var q=this;var x={pslist:{list:[]}};x.pslist.list=t;h.PercServiceUtils.makeJsonRequest(h.perc_paths.UTIL_ENCRYPT_STRINGS,h.PercServiceUtils.TYPE_POST,!y,function(B,A){if(B==h.PercServiceUtils.STATUS_SUCCESS){z(h.PercServiceUtils.STATUS_SUCCESS,k(A.data.psmap.entries))}else{var C=h.PercServiceUtils.extractDefaultErrorMessage(A.request);z(h.PercServiceUtils.STATUS_ERROR,C)}},x)}function k(t){var x=[];if(!h.isArray(t.entry)){x.push(t.entry)}else{x=t.entry}var q=[];h(x).each(function(){q[this.key]=this.value});return q}function b(y,z,x){var q=this;var t={psmap:{entries:{entry:{key:"string",value:y}}}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.UTIL_DECRYPT_STRING,h.PercServiceUtils.TYPE_POST,!x,function(B,A){if(B==h.PercServiceUtils.STATUS_SUCCESS){z(h.PercServiceUtils.STATUS_SUCCESS,A.data.psmap.entries.entry.value)}else{var C=h.PercServiceUtils.extractDefaultErrorMessage(A.request);z(h.PercServiceUtils.STATUS_ERROR,C)}},t)}function f(t,y,x){if(!x){return}var q={LogData:{type:t,category:y,message:x}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.UTIL_LOG_DATA,h.PercServiceUtils.TYPE_POST,false,h.noop,q,h.noop)}})(jQuery);(function(k){k.PercLicenseService={activate:h,getStatus:q,getNetSuiteMethod:f,getAllModuleLicenses:e,getModuleLicense:n,saveModuleLicense:j};function f(y,t){var x=k.perc_paths.LICENSE_GET_NETSUITE_METHOD+"/"+t;k.PercServiceUtils.makeJsonRequest(x,k.PercServiceUtils.TYPE_GET,false,function(A,z){if(A==k.PercServiceUtils.STATUS_SUCCESS){y(k.PercServiceUtils.STATUS_SUCCESS,z.data)}else{var B=k.PercServiceUtils.extractDefaultErrorMessage(z.request);y(A,B)}})}function h(y,x){var t=k.perc_paths.LICENSE_ACTIVATE+"/"+x;k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_POST,false,function(A,z){if(A==k.PercServiceUtils.STATUS_SUCCESS){y(k.PercServiceUtils.STATUS_SUCCESS,z.data)}else{var B=k.PercServiceUtils.extractDefaultErrorMessage(z.request);y(A,B)}},undefined,function(z){y(z)})}function q(y,x){var t=k.perc_paths.LICENSE_GET_INFORMATION;if(x!==undefined&&x===true){x="true"}else{x="false"}t+="/"+x;k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_GET,false,function(A,z){if(A==k.PercServiceUtils.STATUS_SUCCESS){y(k.PercServiceUtils.STATUS_SUCCESS,z.data.licenseStatus)}else{var B=k.PercServiceUtils.extractDefaultErrorMessage(z.request);y(A,B)}},undefined,function(z){y(z)})}function e(t){b("all",t)}function n(t,x){b(t,x)}function b(x,y){var t=k.perc_paths.LICENSE_GET_MODULE+x;k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_GET,false,function(A,z){if(A==k.PercServiceUtils.STATUS_SUCCESS){y(true,z.data)}else{var B=k.PercServiceUtils.extractDefaultErrorMessage(z.request);y(false,B)}},undefined,function(z){y(false,"Licensing service request timed out.")})}function j(x,y){var t=k.perc_paths.LICENSE_SAVE_MODULE;k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_POST,false,function(A,z){if(A==k.PercServiceUtils.STATUS_SUCCESS){y(true,z.data)}else{var B=k.PercServiceUtils.extractDefaultErrorMessage(z.request);y(false,B)}},x,function(z){y(false,"Request timed out, module license save failed.")})}})(jQuery);(function(j){j.PercReusableSearchService={getSites:f,getWorkflows:e,getStates:b,getUsers:h};function h(n,q){var k=j.perc_paths.USER_USERS_NAMES+"/"+n;j.PercServiceUtils.makeJsonRequest(k,j.PercServiceUtils.TYPE_GET,false,function(x,t){var y=j.perc_utils.convertCXFArray(t.data.UserList.users);if(x==j.PercServiceUtils.STATUS_SUCCESS){q(j.PercServiceUtils.STATUS_SUCCESS,y)}else{var z=j.PercServiceUtils.extractDefaultErrorMessage(t.request);q(x,z)}})}function f(n){var k=j.perc_paths.SITES_ALL_CHOICES;j.PercServiceUtils.makeJsonRequest(k,j.PercServiceUtils.TYPE_GET,false,function(t,q){var x=j.perc_utils.convertCXFArray(q.data.EnumVals.entries);if(t==j.PercServiceUtils.STATUS_SUCCESS){n(j.PercServiceUtils.STATUS_SUCCESS,x)}else{var y=j.PercServiceUtils.extractDefaultErrorMessage(q.request);n(t,y)}})}function e(n){var k=j.perc_paths.WORKFLOW_STEPPED;j.PercServiceUtils.makeJsonRequest(k,j.PercServiceUtils.TYPE_GET,false,function(t,q){var x=j.perc_utils.convertCXFArray(q.data.EnumVals.entries);if(t==j.PercServiceUtils.STATUS_SUCCESS){n(j.PercServiceUtils.STATUS_SUCCESS,x)}else{var y=j.PercServiceUtils.extractDefaultErrorMessage(q.request);n(t,y)}})}function b(q,n){var k=j.perc_paths.WORKFLOW_STEPPED+q+"/states/choices";j.PercServiceUtils.makeJsonRequest(k,j.PercServiceUtils.TYPE_GET,false,function(x,t){var y=j.perc_utils.convertCXFArray(t.data.EnumVals.entries);if(x==j.PercServiceUtils.STATUS_SUCCESS){n(j.PercServiceUtils.STATUS_SUCCESS,y)}else{var z=j.PercServiceUtils.extractDefaultErrorMessage(t.request);n(x,z)}})}})(jQuery);(function(e,b){b.cssController=function(j,E,B){var n=e.PercDirtyController;var z={getCurrentView:D,getThemeList:C,getThemeCSS:J,setTemplateTheme:G,getTemplateTheme:y,setOverrideCSS:f,getOverrideCSS:t,showGalleryView:q,showThemeView:x,showCSSOverrideView:I,save:H,updateTemplateObject:h,model:j,refreshCssViews:k};return z;var A=this;var E=e("#frame");var K=null;function h(){f()}function H(L){e.PercBlockUI();j.save(function(M){j.renderAll(E,function(){F()});L(true,M);e.unblockUI();n.setDirty(false)})}function q(){K=0;b.cssGalleryView(this)}function x(){K=1;b.cssThemeView(this)}function I(){K=2;b.cssOverrideView(this)}function D(){return K}function C(L){j.getThemeList(function(M,N){L(M,N)})}function J(L){j.getThemeCSS(function(M,N){L(N.text())})}function G(L,N){var M=j.getCSSObj();M.themeName=L;j.setCSSObj(M);N(true)}function y(M){var L=j.getCSSObj();M(L.themeName)}function f(){if(e("#perc-css-override-editor-area").val()==undefined){return}var L=e("#perc-css-override-editor-area").val();e.perc_utils.debug("set override CSS: "+L);var M=j.getCSSObj();M.cssOverride=L;j.setCSSObj(M)}function t(M){var L=j.getCSSObj();M(L.cssOverride)}function F(){B.afterRender()}function k(){b.cssGalleryView(this);b.cssOverrideView(this)}}})(jQuery,jQuery.Percussion);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(e,q){var y=b.perc_utils;var k;b.PercNewAssetDialog.open=function(){var B=30;var I;var F;var G={};F=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:G,percButtons:{Next:{click:function(){var M=b.PercNavigationManager.getMemento().lastOpenedItem;if(!y.isBlankString(M)){b.PercWorkflowController().checkIn(M,function(N){C()})}else{C()}},id:"perc-page-save"},Cancel:{click:function(){J();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var M=b.PercNavigationManager.getBookmark();var N=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(M)!=N){window.location.href=N}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var D=b("#perc-select-template_perc_is");var H="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";D.attr("style",H);function J(){F.remove()}function C(){F.find("form").submit()}I=F.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(N){var M=b("#perc-editor-url").val();var O=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(k,function(Q,P){F.remove();path=P.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(S){var R=S.id;var T=R.substring(R.lastIndexOf("-")+1);M+="&sys_folderid="+T+"&sys_asset_folderid="+T+"&sys_workflowid="+O;b.PercIFrameView.renderAssetEditor(e,O,M,path,P,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(j(),function(O){var N=F.find("div.perc-scrollable div.perc-items");for(a in O){var M=O[a];N.append(h(M));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var P=b(this).find(".item-editor-url").text();var Q=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(P);b("#perc-workflow-id").val(Q);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var L=b("#perc-page-name");var A=b("#perc-page-title");var z=b("#perc-page-url");function E(M){return M.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function K(M){return M.replace(/\\/g,"")}b.perc_textAutoFill(L,A,K);b.perc_textAutoFill(L,z,E);b.perc_textAutoFill(L,"#perc-page-linktitle",K);b.perc_filterField(L,K);b.perc_filterField(A,K);b.perc_filterField(z,E);b.perc_filterField("#perc-page-linktitle",K)};b.PercNewAssetDialog.openViewer=function(z,A){b.PercAssetService.getAssetEditorForWidgetAndFolder(z,A,function(C,B){if(C==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var E=B.AssetEditor.pop();var D=E.url;var F=E.workflowId;path=z.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(z,function(H){var G=H.id;var I=G.substring(G.lastIndexOf("-")+1);D+="&sys_folderid="+I+"&sys_asset_folderid="+I+"&sys_workflowid="+F;b.PercIFrameView.renderAssetEditor(e,F,D,path,z.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function f(){b.PercFolderHelper().getAccessLevelByPath(k.join("/"),false,function(A,z){if(A==b.PercFolderHelper().PERMISSION_ERROR||z==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var C=e.getCurrentItem();var B="";if(C!=null){B=C.folderPaths;if(C.type=="Folder"){B=C.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(E,D){if(E==b.PercServiceUtils.STATUS_ERROR||D==b.PercUserService.ACCESS_READ||D==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{q.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},B)}})}function h(A){var z="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return z.replace(/@IMG_SRC@/,A.icon).replace(/@ITEM_ID@/g,A.title).replace(/@ITEM_URL@/,A.url).replace(/@ITEM_WORKFLOW_ID@/,A.workflowId).replace(/@ITEM_LABEL@/,A.title)}function j(){return b.deparam.querystring().path}var x=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function n(z){k=z;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){t(false)}else{if(z[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){x.show();t(true);if(z.length<3){t(false)}else{b.PercFolderHelper().getAccessLevelByPath(z.join("/"),true,function(B,A){if(B==b.PercFolderHelper().PERMISSION_ERROR||A==b.PercFolderHelper().PERMISSION_READ){t(false)}})}}else{if(z[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||z[1]==b.perc_paths.SITES_ROOT_NO_SLASH){x.hide()}}}}function t(z){if(z){x.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(f)}else{x.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}e.addPathChangedListener(n);return x}})(jQuery);(function(e,b){b.CSSPreviewView=function(t,x){var E={};var h=e.PercDirtyController;var z=[{name:"configure",img:function(I){var H="/cm/images/images/buttonConfigStandalone";if(!E[I.attr("widgetdefid")].hasCssPrefs){H="/cm/images/images/buttonConfigStandaloneInactive"}return H},callback:function(H){if(E[H.attr("widgetdefid")].hasCssPrefs){A(H)}},tooltip:"Configure"}];var q=b.decorationController(D,"perc-widget-puff","perc-region-selected",z);n();B();k();e.perc_finder().addActionListener(function(J,I){if(J==e.perc_finder().ACTIONS.DELETE&&(I.type=="asset"||I.type=="page")){if(typeof(I.isOpen)!="undefined"&&I.isOpen){return}var K=e.PercNavigationManager.getView();if(K==e.PercNavigationManager.VIEW_DESIGN){var H=e("#tabs").tabs("option","selected");if(H==3){h.setDirty(true,"template",y);k()}}else{if(K==e.PercNavigationManager.VIEW_EDITOR){var H=e("#perc-pageEditor-tabs").tabs("option","selected");if(H==2){h.setDirty(true,"page",y);k()}}}}});function y(J){var I=e.PercNavigationManager.getView();var H=b.cssController(x,e("#frame"),b.CSSPreviewView(e("#frame"),x));if(I==e.PercNavigationManager.VIEW_EDITOR){H.save(J)}else{if(I==e.PercNavigationManager.VIEW_EDIT_TEMPLATE){callbackFunc=J||function(){};H.setOverrideCSS();H.save(function(K,L){if(K==true){h.setDirty(false,"template");callbackFunc()}})}}}e("#perc-style-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var J=this;var I=function(){var M=I18N.message("perc.ui.menu@JavaScript Off");var L=I18N.message("perc.ui.menu@JavaScript On");if(e(J).text()==M){e(J).text(L);e(J).attr("title","Turns on JavaScript");x.setJavaScriptOff(true);k()}else{e(J).text(M);e(J).attr("title","Turns off JavaScript");x.setJavaScriptOff(false);k()}h.setDirty(false,"style")};if(h.isDirty()){var K=x.isTemplate?"This template":"This page";K+=" contains unsaved changes. If you toggle JavaScript, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";var H={question:K};h.confirmIfDirty(function(){I()},function(){},H)}else{I()}});return{afterRender:F,initRender:k};function B(){e.ajax({url:e.perc_paths.WIDGETS_ALL,type:"GET",dataType:"json",success:function(H,I){e.each(H.WidgetSummary,function(){E[this.id]=this})},error:function(I,K,H){var J=e.PercServiceUtils.extractDefaultErrorMessage(I);e.perc_utils.alert_dialog({title:"Error",content:J})}})}function A(L){var K=L.attr("widgetid"),J=L.attr("widgetdefid");var I=function(M,N){x.editWidget(K,function(){this.cssProperties[M]=N});h.setDirty(true,"style",y)};var H;x.editWidget(K,function(){H=this.cssProperties});b.widgetPropertiesDialog(I,H,J,G,"CssPref",x.getWidgetByName)}function G(){}function k(){x.renderAll(t,function(){F();e("#frame").attr("perc-view-type","style");var I=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(I!=null){I.handleComponentProgress("perc-ui-component-editor-frame","complete")}var H=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(H!=null){H.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function C(){e.perc_utils.handleLinks(t);e.perc_utils.handleObjects(t)}function F(){t.contents().find("div").unbind();q.refresh();C();t.contents().find("body").css("z-index","-1000").unbind().click(function(){q.unselectAll()})}function n(){}function j(H){}function f(H){}function D(){var H=x.getSpecialWidgets("Layout");if(H){t.contents().find(".perc-widget").each(function(){var I=e(this).attr("widgetid");if(I in H.LockedWidgets){e(this).addClass("perc-locked")}if(I in H.TransperantWidgets){e(this).addClass("perc-widget-transperant")}})}return t.contents().find(".perc-widget")}}})(jQuery,jQuery.Percussion);(function(b){b.PercChangeTemplateDialog=function(){var y={openDialog:q};var h=null;var f=null;var j=null;var x=null;var A=null;var z=null;var k=null;var t=function(){};function q(E,F,B,C){h=E;f=F;j=B;t=C;var D=b.perc_paths.TEMPLATES_BY_SITE+"/"+j;b.getJSON(D,function(G){k=G.TemplateSummary;if(k.length<=1&&f!=""){e()}else{n()}})}function e(){b.perc_utils.alert_dialog({title:"Warning",content:"Unable to process request, only one template exists.",id:"perc-no-template-message"})}function n(){var E=30;var I="<div><form action='' method='GET'> <a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a><div style = 'display:block' id = 'perc-template-label'><span class='perc-label-left'></span><span class = 'perc-label-right'></span></div></form></div>";var H=800;var G=b(I).perc_dialog({title:"Change Template",buttons:{},percButtons:{Save:{click:function(){C()},id:"perc-page-save"},Cancel:{click:function(){F()},id:"perc-page-cancel"}},id:"perc-change-template-dialog",width:H,modal:true});B();function D(K){var L=b.PercServiceUtils.extractDefaultErrorMessage(K);var J=b.PercServiceUtils.extractFieldErrorCode(K);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:L})}function F(){G.remove()}function C(){if(G.find("#perc-select-template").val()==A){G.remove();return}var K=[h];var J={MigrateContentRestData:{siteName:j,templateId:G.find("#perc-select-template").val(),refPageId:"",pageIds:K,sourceType:z}};b.PercTemplateService().assignTemplateAndMigrateContent(J,function(M,L){if(M==b.PercServiceUtils.STATUS_SUCCESS){G.remove();t()}else{D(L)}})}function B(){var L=G.find("div.perc-scrollable div.perc-items");var M="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",M);b.each(k,function(){L.append(J(this,f));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var O=b(this).find(".item-id").text();var N=b(this).find(".perc-text-overflow").text();b("#perc-select-template").val(O);b(".perc-label-right").html("Selected Template:&nbsp;"+N);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});if(this.id==f){x=this.name;A=this.id}});var K=null;if(!x){x="Unassigned";K="None";z="UNASSIGNED"}else{K=x;z="TEMPLATE"}b(".perc-label-left").html("Current Template:&nbsp;"+x);b(".perc-label-right").html("Selected Template:&nbsp;"+K);b("#perc-select-template").val(x);b.PercTextOverflow(b("div.perc-text-overflow"),122);function J(Q,P){var O='<div class="item">';if(Q.id==P){O='<div class="item perc-selected-item">'}var N=O+"<div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return N.replace(/@IMG_SRC@/,Q.imageThumbPath).replace(/@ITEM_ID@/,Q.id).replace(/@ITEM_LABEL@/,Q.name).replace(/@ITEM_TT@/g,Q.name)}}}return y}})(jQuery);(function(e){e.PercSiteImpactView={renderSiteImpact:b,ITEM_TYPE_ASSET:"asset",ITEM_TYPE_PAGE:"page"};function b(n,j,f){var k;var h=f;e.PercSiteImpactService.getSiteImpactDetails(n,y);function y(A,z){var B=this;if(A==e.PercServiceUtils.STATUS_ERROR){var C=e.PercServiceUtils.extractDefaultErrorMessage(z.request);e.perc_utils.alert_dialog({title:"Error",content:C});return}x(z.data);e("#perc-site-impact-pages-wrapper .perc-site-impact-item").click(function(){var D=e(this).attr("id");e.perc_finder().launchPagePreview(D)})}function x(G){var z="";var C=[];var E=[];e.each(G.pages,function(){var H=this.name;var I=this.status;var K=this.path.replace("/Sites/","");var M=K.substring(0,K.indexOf("/"));var L={rowContent:[[{content:H,title:this.path}],M,I],rowData:{pagePath:this.path,pageId:this.id,templateName:this.type,pageName:this.name}};var J={title:"",menuItemsAlign:"left",stayInsideOf:".perc-datatable",items:[{label:"Open in Finder",callback:t},{label:"Preview Page",callback:q}]};C.push(L);E.push(J)});var B={percColumnWidths:["260","150","75"],percVisibleColumns:null,percData:C,percRowDblclickCallback:function(){},percRowClickCallback:function(){},fnDrawCallback:function(H){f.find("table").removeAttr("style")},bPaginate:false,percHeaders:["Page Name","Site","Status"],aoColumns:[{sType:"string"},{sType:"string"},{sType:"string"}],percMenus:E};f.find(".perc-site-impact-pages").PercActionDataTable(B);var D="";var A=[];e.each(G.templates,function(){var H=this.template.name;var J=this.site;var I={rowContent:[H,J]};A.push(I)});var F={percColumnWidths:["*","300"],percVisibleColumns:null,bPaginate:false,fnDrawCallback:function(H){f.find("table").removeAttr("style")},percData:A,percHeaders:["Template Name","Site"],aoColumns:[{sType:"string"},{sType:"string"}],oLanguage:{sZeroRecords:"No Templates Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};f.find(".perc-site-impact-templates").PercDataTable(F)}function t(z){var A=z.data;e.PercPathService.validatePath(A.pagePath,function(C,B){if(C==e.PercServiceUtils.STATUS_SUCCESS){e.perc_finder().open(B.split("/"),function(){})}})}function q(z){var A=z.data;if(A){var B=window.parent.jQuery;B.perc_finder().launchPagePreviewByPath(A.pagePath,A.pageId)}else{alert("Unable to load the preview of page")}}}})(jQuery);(function(n){var k=null;var j;var b;var h;var q=null;var f=null;var e=null;n.PercEditRegionPropertiesDialog=function(){var C={initEditRegionPropertiesDialog:x,editRegionProperties:F};function x(L,J,K){k=J;f=L;q=K;if(!n("#perc-region-edit").data("dialog")){n.perc_filterField(n("#perc-region-name"),n.perc_textFilters.NOSPACES);n.perc_filterField(n("#perc-region-name"),n.perc_textFilters.ID);n("#perc-region-edit").perc_dialog({modal:true,zIndex:100000,autoOpen:false,width:500,resizable:false,buttons:{},percButtons:{Ok:{click:function(){n("#perc-region-edit").dialog("close")},id:"perc-region-properties-ok"},Cancel:{click:function(){n("#perc-region-edit").dialog("close")},id:"perc-region-edit-cancel"}}});E()}H()}function H(){if(!n("#perc-region-edit-rename-confirm-dialog").data("dialog")){n("#perc-region-edit-rename-confirm-dialog").perc_dialog({modal:true,zIndex:100000,autoOpen:false,width:500,resizable:false,buttons:{},percButtons:{Ok:{click:function(){I()},id:"perc-rename-region-confirm-ok"},Cancel:{click:function(){B(true)},id:"perc-rename-region-confirm-cancel"}}})}}function F(Q){var N="";var K="";var P="";var O="";n("#perc-css-overrides-disable").removeAttr("checked");k.editRegion(Q.attr("id"),function(){var S=this.cssClass?this.cssClass:"";e=this.regionId;n("#perc-region-name").val(this.regionId);n("#perc-region-cssClass").val(S);N=this.width;K=this.height;P=this.padding;O=this.margin;this.noAutoResize=this.noAutoResize==undefined?false:this.noAutoResize;n("#perc-region-auto-resize").attr("checked",this.noAutoResize);z(this.noAutoResize)});n.PercRegionCSSHandler.init(f,k,q,Q);var J=[];if(N==""){N="Enter width"}if(K==""){K="Enter height"}if(P==""){P="Enter padding"}if(O==""){O="Enter margin"}if(!k.isResponsiveBaseTemplate()){J.push({rowContent:["Width",N]});J.push({rowContent:["Height",K]})}J.push({rowContent:["Padding",P]});J.push({rowContent:["Margin",O]});var R=[];if(!k.isResponsiveBaseTemplate()){R.push(["","Enter width"]);R.push(["","Enter height"])}R.push(["","Enter padding"]);R.push(["","Enter margin"]);var M={percColumnWidths:["300","300"],percNoTableHeaders:true,percHeaders:["",""],percPlaceHolderValues:R,percEditableCols:[false,true],percData:J,percShowValuesPlaceholders:true,percDeleteRow:false,percAddRowElementId:null,aoColumns:[{sType:"string"},{sType:"string"}],bDestroy:true};j=n.PercInlineEditDataTable.init(n("#perc-css-overrides-table"),M);n("#perc-css-overrides-disable").click(function(){L(this.checked)});function L(S){n.PercInlineEditDataTable.enableTable(n("#perc-css-overrides-table"),!S)}n("#perc-region-edit").parent().find(".perc-ok").unbind().click(function(){D(Q)})}function z(J){if(J){n("#perc-region-width").attr("readonly",true).addClass("perc-field-disabled");n("#perc-region-height").attr("readonly",true).addClass("perc-field-disabled");n("#perc-region-padding").attr("readonly",true).addClass("perc-field-disabled");n("#perc-region-margin").attr("readonly",true).addClass("perc-field-disabled")}else{n("#perc-region-width").attr("readonly",false).removeClass("perc-field-disabled");n("#perc-region-height").attr("readonly",false).removeClass("perc-field-disabled");n("#perc-region-padding").attr("readonly",false).removeClass("perc-field-disabled");n("#perc-region-margin").attr("readonly",false).removeClass("perc-field-disabled")}}function E(){var K=n("#perc-region-edit");if(K.find(".perc-section-header").length>0){return}var J=[{groupName:"perc-region-edit-properties-container",groupLabel:"Region based CSS"},{groupName:"perc-region-edit-css-container'",groupLabel:"Use additional CSS classes"},{groupName:"perc-region-edit-cssoverrides-container",groupLabel:"CSS overrides"}];n.each(J,function(M){var N=(M==0)?"perc-items-minimizer":"perc-items-maximizer";var L="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span  class='perc-min-max "+N+"' ></span>"+this.groupLabel+"</div></div>";K.find("#"+this.groupName).before(L);M!=0&&K.find("#"+this.groupName).hide()});K.find(".perc-section-label").unbind().click(function(){var L=n(this);L.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");K.find("#"+L.attr("groupName")).toggle();if(!(("placeholder" in n("<input>")[0]||"placeHolder" in n("<input>")[0]))){K.find("#perc-region-cssClass").placeHolder({hideOnFocus:false})}})}function B(J){n("#perc-region-edit-rename-confirm-dialog").dialog("close");if(!J){f.setLayoutDirty(true);f.refreshRender()}}function I(){var K="replaceedits";var J=n("#perc-region-edit-rename-confirm-dialog").find("input[type='radio']:checked");if(J.length>0){selectedValue=J.val()}if(selectedValue=="replaceedits"){n.PercRegionCSSHandler.saveRegionCSS(h);G(b,h)}else{G(b,h)}t(true);B(false)}function t(J){n("#perc-region-edit").dialog("close");if(!J){f.setLayoutDirty(true);f.refreshRender()}}function G(K,J){k.isResponsiveBaseTemplate()?A(K,J):y(K,J)}function y(Q,U){var S=j.fnGetData();var L=n.trim(n(S[0][1]).text());var K=n.trim(n(S[1][1]).text());var P=n.trim(n(S[2][1]).text());var O=n.trim(n(S[3][1]).text());if(L=="Enter width"){L=""}if(K=="Enter height"){K=""}if(P=="Enter padding"){P=""}if(O=="Enter margin"){O=""}if(j.find("td").hasClass("perc-disabled")){L="";K="";P="";O=""}var V=n("#perc-region-cssClass").val();var J=L;var T=K;var R=P;var M=O;var N=n("#perc-region-auto-resize").is(":checked");N=N==undefined||N==""?false:N;k.editRegion(Q.attr("id"),function(){var W=this.cssClass;n("#"+Q.attr("id")).removeClass(W);n("#"+Q.attr("id")).addClass(V);this.regionId=U;this.width=J;this.cssClass=V;this.height=T;this.padding=R;this.margin=M;this.fixed=J.toLowerCase()!="auto";this.noAutoResize=N})}function A(N,Q){var P=j.fnGetData();var M=n.trim(n(P[0][1]).text());var L=n.trim(n(P[1][1]).text());if(M=="Enter padding"){M=""}if(L=="Enter margin"){L=""}if(j.find("td").hasClass("perc-disabled")){M="";L=""}var R=n("#perc-region-cssClass").val();var O=M;var J=L;var K=n("#perc-region-auto-resize").is(":checked");K=K==undefined||K==""?false:K;k.editRegion(N.attr("id"),function(){var S=this.cssClass;n("#"+N.attr("id")).removeClass(S);n("#"+N.attr("id")).addClass(R);this.regionId=Q;this.cssClass=R;this.padding=O;this.margin=J;this.noAutoResize=K})}function D(K){var M=n("#perc-region-name").val();if(M==""){var J="Region Name can not be blank.";n.perc_utils.alert_dialog({title:"Region Name Error",content:J,width:"595px"});return}if(e!=M&&k.containsRegionId(M)){var J="Region Name '"+M+"' is already in use.\nPlease use another name.";n.perc_utils.alert_dialog({title:"Region Name Already Exists",content:J,width:"595px"});return}if(e!=M){n.PercRegionCSSHandler.getRegionCSS(M,L)}else{n.PercRegionCSSHandler.saveRegionCSS(M);G(K,M);t(false)}function L(N,O,P){if(N==n.PercServiceUtils.STATUS_SUCCESS){if(O.RegionCSS.properties!=null){b=K;h=P;n("#perc-region-edit-rename-confirm-dialog-id-label").text(P);n("#perc-region-edit-rename-confirm-dialog").dialog("open");return}else{n.PercRegionCSSHandler.saveRegionCSS(P);G(K,P);t(false)}}else{n.PercRegionCSSHandler.saveRegionCSS(P);G(K,P);t(false)}}}return C}})(jQuery);
/*
 * jQuery xmlDOM Plugin v1.0
 * http://outwestmedia.com/jquery-plugins/xmldom/
 *
 * Released: 2009-04-06
 * Version: 1.0
 *
 * Copyright (c) 2009 Jonathan Sharp, Out West Media LLC.
 * Dual licensed under the MIT and GPL licenses.
 * http://docs.jquery.com/License
 */
(function(b){if(window.DOMParser==undefined&&window.ActiveXObject){DOMParser=function(){};DOMParser.prototype.parseFromString=function(f){var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(f);return e}}b.xmlDOM=function(f,q){try{var j=(new DOMParser()).parseFromString(f,"text/xml");if(b.isXMLDoc(j)){var h=b("parsererror",j);if(h.length==1){throw ("Error: "+b(j).text())}}else{throw ("Unable to parse XML")}}catch(k){var n=(k.name==undefined?k:k.name+": "+k.message);if(b.isFunction(q)){q(n)}else{b(document).trigger("xmlParseError",[n])}return b([])}return b(j)}})(jQuery);(function(h){h.perc_schemata=h.perc_schemata||{};var e="<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Page><name>Page Name</name><templateId>2000</templateId><folderPath>//folderpath</folderPath><author>authorName</author><id>1000</id><category>PAGE</category><regionBranches><regionWidgetAssociations><regionWidget><regionId>rid</regionId><widgetItems><widgetItem><definitionId>STUFF</definitionId><properties><property><name>AAA</name><value>BBB</value></property></properties></widgetItem></widgetItems></regionWidget></regionWidgetAssociations><regions><region><regionId>templateRegion</regionId><children><region><regionId>rid</regionId><children><code><templateCode>#region('' '' '' '' '')</templateCode></code></children></region></children></region></regions></regionBranches></Page>";var j,f,b;f={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return f}alert("Unhandled case");return"$"}],endTag:"$"};b={Page:{id:"$",category:"$",folderPaths:"$",name:"$",type:"$",folderPath:"$",author:"$",linkTitle:"$",templateId:"$",title:"$",footer:"$",header:"$",keywords:["$"],description:"$",tags:["$"],additionalHeadContent:"$",afterBodyStartContent:"$",beforeBodyCloseContent:"$",regionBranches:{regions:[j],regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};h.extend(h.perc_schemata,{page:b,page_test_data:e})})(jQuery);(function(b){b.perc_asset_edit_dialog=function(D,q,F,e,I,n){n=n||"page";var x=b.perc_utils;var J;var t;var H=F;var j=false;var h={AssetEditUrlRequest:{type:n,assetId:F,widgetId:e.widgetid,parentId:I,widgetDefinition:e.widgetdefid}};b.ajax({url:b.perc_paths.CONTENT_EDIT_CRITERIA+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(h),success:function(L){t=L.ContentEditCriteria;f()},error:function(N,L,M){x.alert_dialog({id:"perc-content_edit_error",title:"Error opening editor for content",content:b.PercServiceUtils.extractDefaultErrorMessage(N),width:400})}});function f(){var N=t.url+"&sys_folderid="+t.legacyFolderId+"&percpageid="+I+"&sys_workflowid="+t.workflowId;var M="<div id='edit-widget-content'><iframe name='edit-widget-content-frame' id='edit-widget-content-frame' height='100%' FRAMEBORDER='0' width='100%' src='"+N+"'></iframe></div>";J=b(M).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:t.preferredEditorHeight,width:t.preferredEditorWidth,percButtons:{Save:{click:function(){k(t.contentName,null);b.PercDirtyController.setDirty(false)},id:"perc-content-edit-save-button"},Cancel:{click:function(){J.remove();b.PercDirtyController.setDirty(false);q(F)},id:"perc-content-edit-cancel-button"}},id:"perc-asset-edit-dialog"});if(t.producesResource===false&&t.assetType!=="shared"&&t.createSharedAsset===true){var L='<div class="perc-content-edit-share">';L+='<form action="">';L+='<input type="checkbox" id="perc-content-edit-share-checkbox" name="perc-content-edit-share-checkbox" />';L+='<label for="perc-content-edit-share-checkbox">'+I18N.message("perc.ui.saveasdialog.label@Shared Asset")+"</label>";L+="</form>";L+="</div>";J.parent().find(".ui-dialog-buttonpane").append(L)}b.PercContentPreSubmitHandlers.clearHandlers();b("#edit-widget-content-frame").load(function(){if(j==false){j=true;K()}else{y()}});var O=b("#edit-widget-content").get(0);b.data(O,"pageid",I);b.data(O,"assetid",F);b.data(O,"widgetData",e)}function K(){if(t.assetType=="shared"){var N="This is a shared Asset.  Your edits will take effect on all pages that use this Asset.";var L=B("#perc-content-edit-content-top-placeholder");L.addClass("perc_shared_asset_edit_warning perc-asset-edit-info-line");L.html(N);L.show();if(H!=undefined&&H!=""){var M='<label for="perc-content-edit-meta-data-item_folder_path" >Folder path:</label> <br/><div id="perc-content-edit-meta-data-item_folder_path" class="datadisplay">'+t.folderPath+"</div> <br/>";B("#perc-content-edit-meta-data-top-placeholder").html(M);B("#perc-content-edit-metadata-panel").show();B("#perc-site-impact-panel").show();b.PercSiteImpactView.renderSiteImpact(H,b.PercSiteImpactView.ITEM_TYPE_ASSET,B("#perc-site-impact-panel"))}}}function E(){var L=b("#edit-widget-content").get(0);if(b.data(L,"assetid")){k(null,null)}else{if(t.producesResource){b.perc_browser({on_save:z,initial_val:""})}else{k(t.contentName,null)}}}function z(O,M,L,N){b.perc_pathmanager.open_containing_folder(O,function(Q){var P=b.grep(Q.PathItem,function(R){return R.name==M});if(P.length){N(I18N.message("perc.ui.saveasdialog.error@Duplicate asset"))}else{b.perc_pathmanager.open_path(x.acop(O),false,function(R){k(M,R.PathItem["folderPath"]);L()},N)}},N)}function k(M,L){b.PercBlockUI();var P=t.url;b.data(b("#edit-widget-content").get(0),"folderPath",L);P=P.split("?")[0];if(M&&M!=""){B("#perc-content-edit-sys_title").val(M)}var N=b("#edit-widget-content").get(0);if(!(b.data(N,"assetid"))&&t.workflowId){B("#perc-content-edit-sys_workflowid").val(t.workflowId)}b.perc_utils.debug("Doing a save asset:");b.perc_utils.debug(t);if(t.producesResource){var Q=t.legacyFolderId;P=P+"?sys_folderid="+Q+"&sys_asset_folderid="+Q}B("#perc-content-form").attr("action",P);var O=true;b.each(b.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){O=false}});if(!O){b.unblockUI();return}b.PercContentPreSubmitHandlers.clearHandlers();b("#edit-widget-content-frame").contents().find("#perc-content-form").submit()}function A(N,M,L){return true}function y(){if(b("#edit-widget-content-frame").contents().find("#perc-content-edit-errors").length>0){b.unblockUI();return}var N=b("#edit-widget-content").get(0);var O=b.data(N,"assetid");var P=b.data(N,"widgetData");var M=b.data(N,"folderPath");var L=t.producesResource;if(!O||O==""){O="-1-101-"+b("#edit-widget-content-frame").contents().find("[name=sys_contentid]").val();b.PercAssetService.set_relationship(O,P,I,"1",L,M,function(){D(O,L);b.unblockUI()},function(Q){b.unblockUI();var R=b.PercServiceUtils.extractDefaultErrorMessage(Q);b.perc_utils.alert_dialog({title:"Error",content:R})})}else{b.PercAssetService.updateAsset(I,O,function(){D(O,L);b.unblockUI()})}setTimeout(G,500)}function G(){var L=J.parent().find("#perc-content-edit-share-checkbox:checked");var M=L.length>0;b("#edit-widget-content-frame").remove();b("#edit-widget-content").remove();if(M){b.perc_save_as_shared_asset_dialog.createDialog({widgetData:e,assetId:H,parentId:I,onSave:function(N){D(N,false)}})}}function B(L){var M=C();return b(L,M)}function C(){var L=null;for(i=0;i<frames.length;i++){if(frames[i].name=="edit-widget-content-frame"){L=frames[i].document;break}}return L}}})(jQuery);(function(b){b.perc_page_edit_dialog=function(A,E,h){var e="";var F="";var z=0;var q=0;var x="";b.PercContentPreSubmitHandlers.clearHandlers();if(b.PercNavigationManager.getMode()==b.PercNavigationManager.MODE_EDIT){e="Edit Meta-data";F={Save:{click:function(){f()},id:"perc-content-edit-save-button"},Cancel:{click:function(){b.PercDirtyController.setDirty(false,"page");y.remove();return true},id:"perc-content-edit-cancel-button"}};z=600;q=800}else{e="Meta-data";F={Ok:{click:function(){b.PercDirtyController.setDirty(false,"page");y.remove();return true},id:"perc-content-edit-ok-button"}};z=610;q=800}var C=true;var j="<div id='edit-page-metadata'></div>";var y=b(j).perc_dialog({title:e,modal:true,width:q,height:z,close:function(G,H){b.PercDirtyController.setDirty(false,"page");y.remove()},open:function(){B(h)},percButtons:F,id:"perc-page-edit-dialog"});function B(G){var H="";if(b.PercNavigationManager.getMode()==b.PercNavigationManager.MODE_EDIT){H=b.perc_paths.PAGE_EDITURL+"/"+G}else{H=b.perc_paths.PAGE_VIEWURL+"/"+G}b.ajax({url:H,dataType:"text",contentType:"application/json",type:"GET",success:function(K,J){var I=K+"&nocache=v1";b("#edit-page-metadata").append("<iframe name='edit-page-metadata-frame' id='edit-page-metadata-frame' height='100%' FRAMEBORDER='0' width='100%' src='"+I+"' ></iframe>");b("#edit-page-metadata-frame").load(function(){t()})},error:function(K,I,J){alert("Unable to set page content for page "+G)}})}function t(){var H=b("#edit-page-metadata-frame").contents();b.perc_filterField(b("#edit-page-metadata-frame").contents().find("[name=sys_title]"),b.perc_textFilters.URL);b("#edit-page-metadata-frame").contents().find("#perc-content-edit-metadata-link").hide();b("#edit-page-metadata-frame").contents().find("#perc-content-edit-metadata-panel .perc-content-edit-data").show();if(b("#edit-page-metadata-frame").contents().find("#perc-content-edit-errors").length>0){b("#edit-page-metadata-frame").contents().find("#perc-content-edit-errors label").html("Error saving the page meta-data.")}var I=b("#edit-page-metadata-frame").contents().find("#perc-content-edit-auto_generate_summary");var G=I.closest("tr");I.click(n);if(!x){x=b("#edit-page-metadata-frame").contents().find("#perc-content-edit-sys_title").val()}k()}function k(){var G=b("#edit-page-metadata-frame").contents();G.find("input[id='perc-content-edit-auto_generate_summary']").closest('div["type"]').attr("groupName","perc-pageSum-container");G.find("input[id='perc-content-edit-page_noindex']").closest('div["type"]').attr("groupName","perc-seo-container").hide();G.find("label[for='sys_contentpostdate']").before('<div id = "perc-date-override">Override Post Date</div><span class = "perc-date-override-msg">This page will appear to have been published on the Post Date that you enter below.<br /></span>');var H=[{groupName:"perc-pageSum-container",groupLabel:"Page Summary",fieldNames:["resource_link_title","sys_title","page_summary","sys_contentpostdate"]},{groupName:"perc-seo-container",groupLabel:"Search Engine Optimization (SEO)",fieldNames:["page_title","page_description","page_noindex"]},{groupName:"perc-tagCat-container",groupLabel:"Tags and Categories",fieldNames:["page_tags","page_categories_tree"]},{groupName:"perc-calendar-container",groupLabel:"Calendar",fieldNames:["page_calendar"]},{groupName:"perc-headCode-container",groupLabel:"Additional Code",fieldNames:["additional_head_content","code_insert_after_body_start","code_insert_before_body_close"]}];b.each(H,function(L){var N=L==0?"perc-items-minimizer":"perc-items-maximizer";var K="<div id = '"+this.groupName+"' ><div class = 'perc-section-label' group='"+this.groupName+"'><span  class='perc-min-max "+N+"' ></span>"+this.groupLabel+"</div></div>";var P=G.find("[for='"+this.fieldNames[0]+"']").closest('div["type"]').before(K);var J=this.fieldNames;var Q=this.groupName;for(var M=0;M<J.length;M++){var O=G.find("[for='"+J[M]+"']").closest('div["type"]').attr("groupName",Q);if(L!=0){O.hide()}}});var I=G.find("label[for='sys_title']").closest('div["type"]');G.find("#perc-pageSum-container").after(I);G.find(".perc-section-label").unbind().click(function(){b(this).find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");var J=b(this).attr("group");G.find("div[groupName='"+J+"']").toggle()});b.each(G.find('div[type="sys_error"]'),function(){var J=b(this).attr("groupName");if(J!="perc-pageSum-container"){G.find("div[group='"+J+"']").click()}});setTimeout(n,600)}function n(){var I=b("#edit-page-metadata-frame").contents().find("#perc-content-edit-auto_generate_summary");var G=b("#edit-page-metadata-frame").contents().find(".mce-tinymce").parent();var H=b("#edit-page-metadata-frame").contents().find(".mce-tinymce");if(I.attr("checked")){content=b("#edit-page-metadata-frame").contents().find(".tinymce").val();G.append(b("<div/>").attr("id","perc_page_autogen_page_summary").css("width",(H.outerWidth()-1)+"px").css("height",(H.outerHeight()-7)+"px").css("position","relative").css("top","5px").css("margin","0px").css("padding","0px").addClass("datadisplay perc-tinymce-readonly").html(content));H.hide()}else{G.find("#perc_page_autogen_page_summary").remove();H.show()}}function D(){if(b("#edit-page-metadata-frame").contents().find("#perc-content-edit-errors").length>0){b.unblockUI();return}else{if(b("#edit-page-metadata-frame").contents().find("PSXLogErrorSet").length>0){b.unblockUI();var G=I18N.message("perc.ui.common.error@Content Deleted");b.perc_utils.alert_dialog({title:"Error",content:G,okCallBack:function(){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR)}});y.remove()}else{b.PercPageService.savePageMetadata(h,function(){b.PercPathService.getPathItemById(b.PercNavigationManager.getId(),function(I,H,M){if(I==b.PercServiceUtils.STATUS_SUCCESS){b.PercNavigationManager.setName(H.PathItem.name);var J=H.PathItem.folderPaths+"/"+H.PathItem.name;J=J.substring(1);b.PercNavigationManager.setPath(J);b.PercDirtyController.setDirty(false,"page");var L=b.PercNavigationManager.getBookmark();b(window).removeData();b("#edit-page-metadata-frame").removeData();var O=H.PathItem.folderPaths+"/"+x;var K="/"+J;b.unblockUI();b.PercRedirectHandler.createRedirect(O,K,"page").fail(function(P){b.perc_utils.alert_dialog({title:"Redirect creation error",content:P,okCallBack:function(){window.location.href=L}})}).done(function(){window.location.href=L})}else{b.unblockUI();var N="";if(M=="cannot.find.item"){N=I18N.message("perc.ui.common.error@Content Deleted")}else{N=H}b.perc_utils.alert_dialog({title:"Error",content:N})}})})}}}function f(){var G=b.perc_textFilters.WINDOWS_FILE_NAME(b.trim(b("#edit-page-metadata-frame").contents().find("#perc-content-edit-sys_title").val()));b("#edit-page-metadata-frame").contents().find("#perc-content-edit-sys_title").val(G);b.PercBlockUI();var H=true;b.each(b.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){H=false}});if(!H){b.unblockUI();return}b.PercContentPreSubmitHandlers.clearHandlers();b("#edit-page-metadata-frame").contents().find("#perc-content-form").submit();b("#edit-page-metadata-frame").load(function(){D()})}}})(jQuery);(function(h){var f=h.perc_utils;var e=20;h.perc_browser=function(t){var M={customRootSite:"",new_asset_option:true,initial_val:"",on_save:function(){},selectable_object:"folder",new_folder_opt:true,displayed_containers:"Assets",selection_types:function(){return true},asset_name:I18N.message("perc.ui.saveasdialog.label@Save as"),location:I18N.message("perc.ui.saveasdialog.label@Location:"),title:I18N.message("perc.ui.saveasdialog.title@Save As"),no_name_error:I18N.message("perc.ui.saveasdialog.error@Name required"),save_class:"perc-save"};h.extend(M,t);var C=M.selection_types;if(!h.isFunction(C)){C=function(O){return f.elem(O,M.selection_types)}}var x={All:[""],Sites:["",h.perc_paths.SITES_ROOT_NO_SLASH],Assets:["",h.perc_paths.ASSETS_ROOT_NO_SLASH],CustomSite:["",h.perc_paths.SITES_ROOT_NO_SLASH,"<sitename>"]};var k=x[M.displayed_containers];if(typeof(k[2])!="undefined"){k[2]=k[2].replace("<sitename>",M.customRootSite)}var n=M.selectable_object=="leaf"||M.selectable_object=="all";var J=M.selectable_object=="folder"||M.selectable_object=="all";var I=window.parent.parent.jQuery("<div><p id='perc-saveas-dialog-error' class='perc-field-error' />"+f.input(M.asset_name,"asset-name","perc-saveas-dialog-assetname",e)+f.select(M.location,"location","perc-saveas-dialog-location",e)+"<div id='perc-saveas-dialog-direc'></div></div>");var y=I.find("#perc-saveas-dialog-direc");var D=I.find("#perc-saveas-dialog-location").change(function(){var O=this.value.split("/");G(O)});var B=I.find("#perc-saveas-dialog-assetname");var K=null;var H=null;var E=null;B.val(M.initial_val);if(!M.new_asset_option){B.attr("readonly","readonly")}I.perc_dialog({modal:true,title:M.title,resizable:false,width:320,zIndex:400000000,buttons:{},percButtons:{Save:{click:function(){F()},id:"perc-save-as-save"},Cancel:{click:function(){I.remove()},id:"perc-save-as-cancel"}},id:"perc-save-as-dialog"});if(M.new_folder_opt){I.parent().find("#perc-saveas-dialog-new-folder").click(function(){E()})}else{I.parent().find("#perc-saveas-dialog-new-folder").remove()}G(k);function N(O){I.remove();alert(O)}function G(O){E=q(f.acop(O));if(!M.new_asset_option){B.val("")}L(f.acop(O));j(f.acop(O))}function j(P){y.empty();h.perc_pathmanager.open_path(P,true,O,z);function O(Q){h.each(Q.PathItem,function(){if(C(this["type"])&&this["path"]!=h.perc_paths.SEARCH_ROOT+"/"&&this["path"]!=h.perc_paths.DESIGN_ROOT+"/"){b(y,A(this))}})}}function L(P){var R=I.find("#perc-saveas-dialog-location");R.attr("size","2");D.empty();var O="";K=[];for(var Q=0;Q<k.length-1;Q++){K.push(P.shift())}while(P.length){K.push(P.shift());O+="&nbsp;&nbsp;";D.append(h("<option  style = 'color:#000' value='"+K.join("/")+"'></option>").append(O+K[K.length-1]))}D.val(K.join("/"));R.attr("size","1")}function q(O){return function(){f.prompt_dialog({title:I18N.message("perc.ui.saveasdialog.title@New Folder"),question:I18N.message("perc.ui.saveasdialog.text@New folder prompt"),yes:I18N.message("perc.ui.common.label@Save"),no:I18N.message("perc.ui.common.label@Cancel"),success:function(P){h.perc_pathmanager.add_folder(f.acat(O,[P]),function(){G(f.acop(O))},z)}})}}function z(O){h("#perc-saveas-dialog-error").text(O).effect("pulsate",{times:1})}function F(){var O=B.val();if(!O||O==""){z(M.no_name_error);return}if(!M.new_asset_option){M.on_save(H,function(){I.remove()},z)}else{M.on_save(f.acop(K),O,function(){I.remove()},z)}}function A(P){var U=f.extract_path_end(P.path);var O=(P.type=="Folder")?"a":"z";var S=f.extract_path(P.path);var T=f.choose_icon(P.type,P.icon,S);var Q=h("<a href='#'/>").addClass("mcol-listing").attr("id","perc-saveas-dialog-listing"+f.path_id(S)).append(h("<img src='"+T+"' style='float:left'></img>")).append(P.name).data("name",U).data("tag",O+(P.name+"").toLowerCase());var R="perc-saveas-dialog-selected";function V(){Q.siblings("."+R).removeClass(R);Q.addClass(R);if(P.leaf){B.val(P.name);H=P}else{K=f.acop(S)}}if(P.leaf){if(n){Q.click(V);Q.dblclick(function(){Q.click();h("#perc-saveas-dialog-save-button").click()})}}else{if(J){Q.click(V)}Q.dblclick(function(){G(S)})}return Q}};function b(k,n){var j=null;k.prepend(n);k.children().each(function(){if(h.data(this,"tag")>h.data(n.get(0),"tag")){j=this;return false}return true});if(j){h(j).before(n)}else{k.append(n)}}})(jQuery);(function(k){k.perc_save_as_shared_asset_dialog={createDialog:f};var h;function f(t){var x={Save:{id:"perc-saveas-shared-asset-dialog-save",click:function(){b(t)}},Cancel:{id:"perc-saveas-shared-asset-dialog-cancel",click:function(){k(this).remove()}}};var q='<div id="perc-saveas-shared-asset">';q+='<div class="perc-saveas-shared-asset-label-denotes-required"><label>* - denotes required field</label></div>';q+='<form action="">';q+="<div>";q+='<label for="perc-saveas-shared-asset-dialog-name" class="perc-required-field">'+I18N.message("perc.ui.saveassharedassetdialog.label@Name:")+"</label>";q+='<input type="text" name="perc-saveas-shared-asset-dialog-name" id="perc-saveas-shared-asset-dialog-name" maxlength="255" /><br/>';q+='<label id="perc-saveas-shared-asset-dialog-name-error" class="perc-saveas-shared-asset-dialog-error perc_field_error"></label>';q+="</div>";q+="<div>";q+='<label id="perc-saveas-shared-asset-dialog-path-label" for="perc-saveas-shared-asset-dialog-path" class="perc-required-field">'+I18N.message("perc.ui.saveassharedassetdialog.label@Where:")+"</label><br/>";q+='<input type="hidden" name="perc-saveas-shared-asset-dialog-path" id="perc-saveas-shared-asset-dialog-path" />';q+='<div id="perc-saveas-shared-asset-dialog-path-tree"></div><br/>';q+='<label id="perc-saveas-shared-asset-dialog-where-error" class="perc-saveas-shared-asset-dialog-error perc_field_error"></label>';q+="</div>";q+="</form>";q+="</div>";h=k(q).perc_dialog({title:I18N.message("perc.ui.saveassharedassetdialog.title@Save As Shared Asset"),id:"perc-saveas-shared-asset-dialog",width:686,resizable:false,modal:true,percButtons:x});h.find("#perc-saveas-shared-asset-dialog-path-tree").PercFinderTree({rootPath:k.PercFinderTreeConstants.ROOT_PATH_ASSETS,width:"628px",classNames:{container:"perc-path-selector-container",selected:"perc-path-selected-item"},onClick:function(y){n(y)}});h.find("form").submit(function(){return false});k.perc_filterField(h.find("#perc-saveas-shared-asset-dialog-name"),k.perc_textFilters.URL)}function n(t){var q="";if(t.category=="ASSET"){q=t.folderPaths}else{q=t.folderPath}q=k.PercFinderTreeConstants.convertFolderPathToPath(q);k("#perc-saveas-shared-asset-dialog-path").val(q);k("#perc-saveas-shared-asset-dialog-path-label").html(I18N.message("perc.ui.saveassharedassetdialog.label@Where:")+" "+q)}function e(x,q){var t=h.find(x);t.html(q).show();k.unblockUI()}function j(){var q=h.find(".perc-saveas-shared-asset-dialog-error");q.hide()}function b(x){var D=k.trim(h.find("#perc-saveas-shared-asset-dialog-name").val());var z=k.trim(h.find("#perc-saveas-shared-asset-dialog-path").val());var q={name:"#perc-saveas-shared-asset-dialog-name-error",where:"#perc-saveas-shared-asset-dialog-where-error"};function A(G){var E=D===null||D==="";var F=z===null||z==="";if(E){e(q.name,I18N.message("perc.ui.saveassharedassetdialog.errormessage@Asset Name is required."))}if(F){e(q.where,I18N.message("perc.ui.saveassharedassetdialog.errormessage@Selected Path is required."))}if(!E&&!F){G()}}function y(E){if(z==k.perc_paths.ASSETS_ROOT){e(q.where,I18N.message("perc.ui.saveassharedassetdialog.errormessage@You do not have permission to create an asset here."));return}k.PercFolderHelper().getAccessLevelByPath(z,true,function(G,F){var H=G==k.PercFolderHelper().PERMISSION_ERROR,I=F==k.PercFolderHelper().PERMISSION_READ;if(H||I){e(q.where,I18N.message("perc.ui.saveassharedassetdialog.errormessage@You do not have permission to create an asset here."))}else{E()}})}function B(E){k.PercUserService.getAccessLevel(null,-1,function(G,F){var I=G==k.PercServiceUtils.STATUS_ERROR,J=F==k.PercUserService.ACCESS_READ,H=F==k.PercUserService.ACCESS_NONE;if(I||J||H){e(q.where,I18N.message("perc.ui.saveassharedassetdialog.errormessage@You are not authorized to create a new asset."))}else{E()}},z)}function t(E){k.PercPathService.getLastExistingPath(z+"/"+D,function(G,F){if(F==z.replace(k.perc_paths.ASSETS_ROOT+"/","")+"/"+D){e(q.name,I18N.message("perc.ui.saveassharedassetdialog.errormessage@An asset with the same name already exists."))}else{E()}},true)}function C(E){if(x.assetId===null||x.assetId===""){x.assetId=k("#frame").contents().find("div.perc-widget[widgetid="+x.widgetData.widgetid+"]").attr("assetid")}k.PercAssetService.asset_from_local_content(x.assetId,x.widgetData,x.parentId,D,z,function(G,F){if(G!=k.PercServiceUtils.STATUS_SUCCESS){e(F)}else{E(F)}})}j();k.PercBlockUI();A(function(){t(function(){y(function(){B(function(){C(function(E){x.onSave(E);k.unblockUI();h.remove()})})})})})}})(jQuery);(function(b){b.widget("ui.perc_imageselect",{_idPostfix:"_perc_is",_class:"perc_imageselect",_pseudoCtl:null,_init:function(){var e=this;options=this.options;if(this.element[0].nodeName.toLowerCase()!="select"){window.alert("Error! the perc_imageselect widget can only be used on a 'SELECT' html element.")}e._addPseudoControl();e._bindEvents(false)},_addPseudoControl:function(){var e=this;var j="";var h=this.element[0].id;if(h=="undefined"||h==null||h==""){window.alert("Error! An id attribute is required on the select element.")}j+="<div id='";j+=(h+this._idPostfix);j+="' class='";j+=this._class;j+="'>";var f=this.element.children("option");f.each(function(){j+=e._getItemHtml(this.value,this.text)});j+="</div>";this.element.hide();this.element.after(j);this._pseudoCtl=b("#"+this.element[0].id+this._idPostfix);this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"))},_getItemHtml:function(f,e){var h="";h+="<div class='perc_imageselect_item'>";h+="<span class='perc_imageselect_value'>"+f+"</span>";h+="<img src='";h+=e;h+="'/><span>";h+=b.PercTruncateText(f.split(".")[2],22);h+="</span></div>";return h},_addChildIndexes:function(f){var e=0;f.each(function(){b(this).remove(".perc_imageselect_index")});f.each(function(){b(this).append("<span class='perc_imageselect_index'>"+(e++)+"</span>")})},destroy:function(){b.widget.prototype.apply(this,arguments);this._unbindEvents(false)},_bindEvents:function(f){var e=this;if(!f){this._pseudoCtl.bind("keydown",function(h){e._handleKeyDown(h)});this._pseudoCtl.bind("click",function(h){b(this).focus()})}this._pseudoCtl.children(".perc_imageselect_item").bind("click",function(j){var h=b(this).children(".perc_imageselect_index").text();e.selectIndex(h)});this._pseudoCtl.children(".perc_imageselect_item").bind("dblclick",function(h){if(e.options.hardSelect){e._onSelect()}})},_unbindEvents:function(e){if(!e){this._pseudoCtl.unbind("keydown").unbind("click")}this._pseudoCtl.children(".perc_imageselect_item").unbind("click").unbind("dblclick")},_handleKeyDown:function(e){if(!this.options.vertical&&(e.keyCode==37||e.keyCode==39)){this._moveSelection(e.keyCode==39?true:false);return e.preventDefault()}if(this.options.vertical&&(e.keyCode==38||e.keyCode==40)){this._moveSelection(e.keyCode==40?true:false);return e.preventDefault()}if(this.options.hardSelect&&e.keyCode==13){this._onSelect();return e.preventDefault()}return true},_moveSelection:function(e){var h=this.getSelectedIndex();var f=this._pseudoCtl.children(".perc_imageselect_item").length;if(h!=-1){if(e&&(f-1)>h){this.selectIndex(h+1)}else{if(!e&&h>0){this.selectIndex(h-1)}}}},_onSelect:function(){if(this.options.onSelect!=null){var e=this._pseudoCtl.children(".perc_imageselect_selected");var h=e.children(".perc_imageselect_value").text();var f=e.children("img").attr("src");this.options.onSelect(h,f)}},setItems:function(e){if(e==null||e=="undefined"){alert("items cannot be null or undefined")}else{this.clearSelection();this._unbindEvents(true);this._pseudoCtl.children(".perc_imageselect_item").remove();for(var f in e){var h=e[f];this._pseudoCtl.append(this._getItemHtml(h[0],h[1]))}this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"));this._bindEvents(true)}},loadFromUrl:function(f){var e=this;if(f!=null&&f!="undefined"){b.getJSON(f,function(h){e.setItems(h.items)})}},clearSelection:function(){var e=this.element[0].id+this._idPostfix;b("#"+e+" .perc_imageselect_selected").removeClass("perc_imageselect_selected")},selectIndex:function(e){this.clearSelection();var f=this.element[0].id+this._idPostfix;b("#"+f+" .perc_imageselect_item:eq("+e+")").addClass("perc_imageselect_selected");var k=this._pseudoCtl.children(".perc_imageselect_selected").offset().top-50;var j=this._pseudoCtl.offset().top;var h=this._pseudoCtl.scrollTop();if(!this.options.hardSelect){this._onSelect()}this._pseudoCtl.animate({scrollTop:h+k-j},500);this._pseudoCtl.focus()},getSelectedIndex:function(){var e=this._pseudoCtl.children(".perc_imageselect_selected");if(e.length>0){return parseInt(e.children(".perc_imageselect_index").text())}return -1}});b.extend(b.ui.perc_imageselect,{version:"1.0.0",defaults:{vertical:true,onSelect:null,hardSelect:true}})})(jQuery);(function(b){b.widget("ui.perc_wizard",{steps:null,currentStep:0,isCancelled:false,_init:function(){var e=this,f=this.options;this.element.load(f.templateUrl,function(){e.element.perc_dialog({autoOpen:false,title:f.title,modal:f.modal,width:f.width,height:f.height,show:f.show,hide:f.hide,open:f.open,resizable:f.resizable});e.steps=b(".perc_wizard_step");e._addButtons()})},open:function(){this._showStep(0);this.element.dialog("open")},_addButtons:function(){var e=this;var f="<div class='ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'><div href='#' id='perc_wizard_finish' class='perc-save' name='perc_wizard_finish' style='float:right;' /><div href='#' id='perc_wizard_next' class='perc-save'  name='perc_wizard_next' style='float:right;' /><div href='#' id='perc_wizard_cancel' class='perc-save' name='perc_wizard_cancel' style='float:right;' /><div id='perc_wizard_back' href='#' class='perc-save'  name='perc_wizard_back' style='float:right;' /></div>";b(e.element).closest(".ui-dialog").append(f);b("#perc_wizard_back").click(function(){e._onBack()});b("#perc_wizard_cancel").click(function(){e._onCancel()}).val(this.options.cancelButtonLabel);b("#perc_wizard_next").click(function(){e._onNext()});b("#perc_wizard_finish").click(function(){e._onOk()})},_showStep:function(f){if(this.steps==null||f>this.steps.length){alert("Error: Step does not exist.");return}this.currentStep=f;for(i=0;i<this.steps.length;i++){if(i==f){b(this.steps[i]).show()}else{b(this.steps[i]).hide()}}if(f==0&&this.steps.length>1){b("#perc_wizard_back").hide();b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{if(f<this.steps.length-1){b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").hide();b("#perc_wizard_finish").show().val(this.options.finishButtonLabel)}}var e=this.element},_onOk:function(h){var f=this;if(this.options.onValidate()){this.options.onOk()}},_onNext:function(f){if(this.options.onValidate()){if(this.options.onNext!==undefined&&this.options.onNext()===false){return}this._showStep(this.currentStep+1)}},_onBack:function(){if(this.currentStep>0){this._showStep(this.currentStep-1)}},_onCancel:function(){this.isCancelled=true;this.element.dialog("close")}});b.extend(b.ui.perc_wizard,{version:"1.0.0",defaults:{backButtonLabel:typeof I18N=="undefined"?"Back":I18N.message("perc.ui.common.label@Back"),cancelButtonLabel:typeof I18N=="undefined"?"Cancel":I18N.message("perc.ui.common.label@Cancel"),nextButtonLabel:typeof I18N=="undefined"?"Next":I18N.message("perc.ui.common.label@Next"),finishButtonLabel:typeof I18N=="undefined"?"Finish":I18N.message("perc.ui.common.label@Finish"),width:"800px",height:"700px",modal:true,title:typeof I18N=="undefined"?"Wizard":I18N.message("perc.ui.common.label@Wizard"),onOk:function(){alert("No onOk callback was set.")},onValidate:function(){return true}}})})(jQuery);(function(t){t.PercSiteService={getSiteProperties:B,updateSiteProperties:C,copySite:z,copySiteInfo:q,getTemplates:n,getBaseTemplates:k,getSites:f,validateCopySiteFolders:y,createSiteFromUrl:b,createSiteFromUrlAsync:e,createSiteFromUrlStatus:A,createSiteFromUrlResult:h,isSiteBeingImported:j,getSaaSSiteNames:x};function C(D,F){var E=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_UPDATE_PROPERTIES,t.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}},D)}function B(E,F){var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_GET_PROPERTIES+"/"+E,t.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}})}function z(E,F){var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_COPY,t.PercServiceUtils.TYPE_POST,false,function(I,H){if(I==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=t.PercServiceUtils.extractDefaultErrorMessage(H.request);var G=t.PercServiceUtils.extractGlobalErrorCode(H.request);F(t.PercServiceUtils.STATUS_ERROR,J,G)}},E)}function y(E,F){var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_COPY_VALIDATE_FOLDERS,t.PercServiceUtils.TYPE_POST,false,function(I,H){if(I==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=t.PercServiceUtils.extractDefaultErrorMessage(H.request);var G=t.PercServiceUtils.extractGlobalErrorCode(H.request);F(t.PercServiceUtils.STATUS_ERROR,J,G)}},E)}function q(E){var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_COPY_INFO,t.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==t.PercServiceUtils.STATUS_SUCCESS){E(t.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=t.PercServiceUtils.extractDefaultErrorMessage(F.request);E(t.PercServiceUtils.STATUS_ERROR,H)}})}function n(G,H,F){var E=this;var D="";if(F!=null){D=t.perc_paths.TEMPLATES_BY_SITE+"/"+G+"/"+F}else{D=t.perc_paths.TEMPLATES_BY_SITE+"/"+G+""}t.PercServiceUtils.makeJsonRequest(D,t.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==t.PercServiceUtils.STATUS_SUCCESS){H(t.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=t.PercServiceUtils.extractDefaultErrorMessage(I.request);H(t.PercServiceUtils.STATUS_ERROR,K)}})}function k(D,F){var E=t.perc_paths.TEMPLATES_READONLY+"?type="+D;t.PercServiceUtils.makeJsonRequest(E,t.PercServiceUtils.TYPE_GET,true,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){F(true,G.data)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(false,I)}})}function f(E){var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITES_ALL+"/",t.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==t.PercServiceUtils.STATUS_SUCCESS){E(t.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=t.PercServiceUtils.extractDefaultErrorMessage(F.request);E(t.PercServiceUtils.STATUS_ERROR,H)}})}function b(E,F){t.ajaxSetup({timeout:600000});var D={Site:E};t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_CREATE_FROM_URL,t.PercServiceUtils.TYPE_POST,false,function(H,G){t.ajaxSetup({timeout:60000});if(H==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}},D)}function e(E,F){var D={Site:E};t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_CREATE_FROM_URL_ASYNC,t.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}else{defaultMsg="There was an unexpected error during the import process.";F(t.PercServiceUtils.STATUS_ERROR,defaultMsg)}},D)}function A(D,F){t.PercServiceUtils.makeJsonRequest(t.perc_paths.JOB_STATUS+"/"+D,t.PercServiceUtils.TYPE_GET,false,function E(H,G){var J,I=t.PercServiceUtils.STATUS_SUCCESS;if(H==t.PercServiceUtils.STATUS_SUCCESS){J=G.data.asyncJobStatus}else{I=t.PercServiceUtils.STATUS_ERROR;J="There was an unexpected error during the import process."}F(I,J)})}function h(D,F){t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+D,t.PercServiceUtils.TYPE_GET,false,function E(H,G){var J,I=t.PercServiceUtils.STATUS_SUCCESS;if(H==t.PercServiceUtils.STATUS_SUCCESS){J=G.data}else{I=t.PercServiceUtils.STATUS_ERROR;J="There was an unexpected error during the import process."}F(I,J)})}function j(D,E){t.PercServiceUtils.makeJsonRequest(t.perc_paths.SITE_IS_BEING_IMPORTED+"/"+D,t.PercServiceUtils.TYPE_GET,false,function(G,F){var I,H=t.PercServiceUtils.STATUS_SUCCESS;if(G==t.PercServiceUtils.STATUS_SUCCESS){I=F.data}else{H=t.PercServiceUtils.STATUS_ERROR;I="There was an unexpected error during the import process."}E(H,I)})}function x(F){var E=t.Deferred();var D=this;t.PercServiceUtils.makeJsonRequest(t.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+F,t.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){E.resolve(G.data)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);E.reject(I)}});return E.promise()}})(jQuery);(function(h){h.PercAssetService={getAssetEditorForAssetId:y,getAssetViewForAssetId:e,getAssetEditorLibrary:A,getAssetEditor:k,getAssetEditorForWidgetAndFolder:x,putAssetInFolder:n,clear_asset:D,clear_orphan_assets:z,set_relationship:f,update_relationship:G,asset_from_local_content:C,deleteAsset:b,forceDeleteAsset:E,validateDeleteAsset:j,updateAsset:t,getUnusedAssets:B,promoteAsset:H,getAssetTypes:F};function y(I,J){h.ajax({url:h.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+I,success:function(M,L){var K={data:M,textstatus:L};J(h.PercServiceUtils.STATUS_SUCCESS,M)},error:function(N,L,M){var K={request:N,textstatus:L,error:M};var O=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,O)}})}function e(I,J){h.ajax({url:h.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+I,success:function(M,L){var K={data:M,textstatus:L};J(h.PercServiceUtils.STATUS_SUCCESS,M)},error:function(N,L,M){var K={request:N,textstatus:L,error:M};var O=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,O)}})}function A(I,J){q(I,"",J)}function q(K,J,L){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR_LIBRARY+K+"?filterDisabledWidgets=yes&widgetId="+J,h.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==h.PercServiceUtils.STATUS_SUCCESS){L(h.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=h.PercServiceUtils.extractDefaultErrorMessage(M.request);L(h.PercServiceUtils.STATUS_ERROR,O)}})}function k(J,K){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_EDITOR+"/"+J,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}})}function x(I,J,K){q(I,J,K)}function n(I,J){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_ADD_TO_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},I)}function b(K,J,I){h.ajax({url:h.perc_paths.ASSET_DELETE+"/"+K,type:"DELETE",success:function(){J()},error:I})}function E(K,J,I){h.ajax({url:h.perc_paths.ASSET_FORCE_DELETE+"/"+K,type:"GET",success:J,error:I})}function j(K,J,I){h.ajax({url:h.perc_paths.ASSET_VALIDATE_DELETE+"/"+K,type:"GET",success:J,error:I})}function f(S,Q,J,L,I,K,O,N){var R=I?"shared":"local";var M=(typeof(Q.relationshipId)!="undefinded")?Q.relationshipId:-1;var P={AssetWidgetRelationship:{ownerId:J,widgetId:Q.widgetid,widgetName:Q.widgetdefid,widgetInstanceName:Q.widgetName,replacedRelationshipId:M,assetId:S,assetOrder:"0",resourceType:R}};if(K){P.AssetWidgetRelationship.folderPath=K}h.ajax({url:h.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(P),success:O,error:N})}function C(L,P,I,K,M,O){var J=h.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+K+M;var N={AssetWidgetRelationship:{ownerId:I,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,assetId:L,assetOrder:"0",resourceType:"local"}};h.PercServiceUtils.makeRequest(J,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},N,"application/json","text")}function G(N,L,P,J,K,M){var I=(typeof(P.relationshipId)!="undefinded")?P.relationshipId:-1;var O={AssetWidgetRelationship:{ownerId:J,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,replacedRelationshipId:I,assetId:N,assetOrder:"0",resourceType:"local",relationshipId:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",h.PercServiceUtils.TYPE_POST,true,function(Q,R){if(Q==h.PercServiceUtils.STATUS_SUCCESS){var S=R.data;if(S=="-1"){var U="The asset has been removed from the system.";M(false,U)}else{K(true,R.data)}}else{var T=h.PercServiceUtils.extractDefaultErrorMessage(R.request);M(false,T)}},O)}function D(I,K,J,L,N){N=N||function(){};var M={AssetWidgetRelationship:{ownerId:I,widgetId:K,widgetName:J,assetId:L,assetOrder:"0"}};h.ajax({url:h.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(M),success:N,error:function(Q,O,P){alert("error")}})}function z(P,N,I,J,Q){Q=Q||function(){};var K=[];for(var M=0;M<J.length;M++){var L="";L='{"assetId":"'+J[M]+'","assetOrder":0,"ownerId":"'+P+'","widgetId":'+N[M]+',"widgetName":"'+I[M]+'"}';K.push(L)}var R='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+K+"]}}";var O=h.parseJSON(R);h.ajax({url:h.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(O),success:Q,error:function(U,S,T){alert("error")}})}function t(J,K,M){var I=h.perc_paths.ASSET_UPDATE+"/"+J+"/"+K;var L=function(N,O){if(N==h.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,O.data)}};h.PercServiceUtils.makeRequest(I,h.PercServiceUtils.TYPE_POST,true,L)}function H(L,P,M,J,K,O){var I=K?"shared":"local";var N={AssetWidgetRelationship:{ownerId:M,widgetId:P.widgetid,widgetName:P.widgetdefid,widgetInstanceName:P.widgetName,assetId:L,assetOrder:J,resourceType:I}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_PROMOTE,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},N)}function B(I,J){h.PercServiceUtils.makeJsonRequest(h.perc_paths.ASSET_UNUSED+"/"+I,h.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(K.data.UnusedAssetSummary))}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}})}function F(J,K){var I=h.perc_paths.ASSET_TYPES;if(J&&J=="yes"){I+=I.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}h.PercServiceUtils.makeJsonRequest(I,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,h.perc_utils.convertCXFArray(L.data.WidgetContentType))}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}})}})(jQuery);(function(e){e.PercSearchService={getSearchResult:h,getAsyncSearchResult:f,getAsyncSearchExtendedResult:b};function h(k,q){var j=e.perc_paths.FINDER_SEARCH;var n=function(t,x){if(t==e.PercServiceUtils.STATUS_ERROR){var y=e.PercServiceUtils.extractDefaultErrorMessage(x.request);q(false,y)}else{q(true,x.data)}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,true,n,k)}function f(k,q){var j=e.perc_paths.FINDER_SEARCH;var n=function(t,x){if(t==e.PercServiceUtils.STATUS_ERROR){var y=e.PercServiceUtils.extractDefaultErrorMessage(x.request);q(false,y)}else{if(t==e.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,x.data)}}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,false,n,k,n)}function b(k,q){var j=e.perc_paths.FINDER_SEARCH+"/extendedresults";var n=function(t,x){if(t==e.PercServiceUtils.STATUS_ERROR){var y=e.PercServiceUtils.extractDefaultErrorMessage(x.request);q(false,y)}else{if(t==e.PercServiceUtils.STATUS_ABORT){q(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{q(true,x.data)}}};e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.TYPE_POST,false,n,k,n)}})(jQuery);(function(t){var y=t.PercServiceUtils;t.PercPageService={forceDeletePage:b,validateDeletePage:C,getNonSEOPages:e,savePageMetadata:q,copyPage:k,getPagesWithTemplate:B,getUnassignedPagesBySite:n,checkForEmptyMigrationWidgets:z,clearFlagShowMigrationEmptyMessage:h,addToMyPages:A,removeFromMyPages:f,isMyPage:x,getMyContent:j};function z(G,E){var D=t.perc_paths.MIGRATION_EMPTY_FLAG+"/"+G;function F(H,I){if(H===y.STATUS_SUCCESS){if(I.data===true){E()}}}y.makeJsonRequest(D,y.TYPE_GET,true,F)}function h(F){var D=t.perc_paths.CLEAR_MIGRATION_EMPTY_FLAG+"/"+F;function E(G,H){}y.makeJsonRequest(D,y.TYPE_POST,true,E)}function b(F,E,D){t.ajax({url:t.perc_paths.PAGE_FORCE_DELETE+"/"+F,type:"GET",success:E,error:D});E()}function C(F,E,D){t.ajax({url:t.perc_paths.PAGE_VALIDATE_DELETE+"/"+F,type:"GET",success:E,error:D})}function e(H,J,F,E,D,I){if(F==null){F=""}if(D==null){D=""}var G={NonSEOPagesRequest:{keyword:D,path:H,workflow:J,state:F,severity:E}};t.PercServiceUtils.makeJsonRequest(t.perc_paths.PAGE_NONSEO,t.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==t.PercServiceUtils.STATUS_SUCCESS){I(t.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=t.PercServiceUtils.extractDefaultErrorMessage(K.request);I(t.PercServiceUtils.STATUS_ERROR,M)}},G)}function q(E,G){var D=t.perc_paths.SAVE_PAGE_METADATA+"/"+E;var F=function(H,I){if(H==t.PercServiceUtils.STATUS_ERROR){G(false,[I.request,I.textstatus,I.error])}else{G(true,I.data)}};t.PercServiceUtils.makeRequest(D,t.PercServiceUtils.TYPE_POST,true,F)}function k(D,F){var E=t.perc_paths.PAGE_COPY+"/"+D+"?addToRecent=true";t.PercServiceUtils.makeRequest(E,t.PercServiceUtils.TYPE_POST,true,function(H,G){if(H==t.PercServiceUtils.STATUS_SUCCESS){F(t.PercServiceUtils.STATUS_SUCCESS,G)}else{var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}},null,null,null,true)}function B(G,D,I,E){var F={startIndex:1,maxResults:5,sortColumn:"name",sortOrder:"asc",pageId:null};t.extend(F,D);var H=t.perc_paths.PAGES_WITH_TEMPLATE+"/"+G;H+="?startIndex="+F.startIndex;H+="&maxResults="+F.maxResults;H+="&sortColumn="+F.sortColumn;H+="&sortOrder="+F.sortOrder;if(F.pageId!=null){H+="&pageId="+F.pageId}t.PercServiceUtils.makeJsonRequest(H,t.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==t.PercServiceUtils.STATUS_ERROR){var L=t.PercServiceUtils.extractDefaultErrorMessage(J.request);I(t.PercServiceUtils.STATUS_ERROR,L)}else{I(t.PercServiceUtils.STATUS_SUCCESS,J.data.PagedItemList)}})}function n(G,F,D,H){var E=t.perc_paths.UNASSIGNED_PAGES_BY_SITE+"/"+G+"?startIndex="+F+"&maxResults="+D;t.PercServiceUtils.makeJsonRequest(E,t.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==t.PercServiceUtils.STATUS_ERROR){var K=t.PercServiceUtils.extractDefaultErrorMessage(I.request);H(t.PercServiceUtils.STATUS_ERROR,K)}else{H(t.PercServiceUtils.STATUS_SUCCESS,I.data)}})}function A(D,F){var E=t.perc_paths.ADD_TO_MYPAGES+"/"+D;t.PercServiceUtils.makeJsonRequest(E,t.PercServiceUtils.TYPE_PUT,false,function(H,G){if(H==t.PercServiceUtils.STATUS_ERROR){var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}else{F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}})}function f(D,F){var E=t.perc_paths.REMOVE_FROM_MYPAGES+"/"+D;t.PercServiceUtils.makeJsonRequest(E,t.PercServiceUtils.TYPE_DELETE,false,function(H,G){if(H==t.PercServiceUtils.STATUS_ERROR){var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}else{F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}})}function x(D,F){var E=t.perc_paths.IS_MY_PAGE+"/"+D;t.PercServiceUtils.makeJsonRequest(E,t.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==t.PercServiceUtils.STATUS_ERROR){var I=t.PercServiceUtils.extractDefaultErrorMessage(G.request);F(t.PercServiceUtils.STATUS_ERROR,I)}else{F(t.PercServiceUtils.STATUS_SUCCESS,G.data)}})}function j(E){var D=t.perc_paths.MY_CONTENT;t.PercServiceUtils.makeJsonRequest(D,t.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==t.PercServiceUtils.STATUS_ERROR){var H=t.PercServiceUtils.extractDefaultErrorMessage(F.request);E(t.PercServiceUtils.STATUS_ERROR,H)}else{E(t.PercServiceUtils.STATUS_SUCCESS,F.data)}})}})(jQuery);(function(h){h.PercPathService={getPathItemById:J,getFolderPathItem:y,getPathItemForPath:x,getItemPropertiesByWorkflowState:f,deleteFolder:t,deleteSection:E,deleteFSFolder:k,moveItem:B,renameFolder:H,createNewFolder:z,getLastExistingPath:F,validatePath:A,getDisplayFormat:G,getContentForPath:K,getFolderProperties:b,saveFolderProperties:n,deleteFolderSkipValidation:C,getInlineRenderLink:e};function G(N){var M=h.perc_utils.getDisplayFormat(h.PercNavigationManager.getPath());if(h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_SEARCH_RESULTS||h.Percussion.getCurrentFinderView()==h.Percussion.PERC_FINDER_RESULT){M=h.perc_utils.getDisplayFormat("/")}var L=h.perc_paths.DISPLAY_FORMAT+M;h.PercServiceUtils.makeJsonRequest(L,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function K(L,O,P){var M=h.perc_utils.encodeURL(O.path)+"/?startIndex="+O.startIndex+"&maxResults="+O.maxResults+"&displayFormatId="+L.id+"&sortColumn="+O.sortColumn+"&sortOrder="+O.sortOrder;var N=h.perc_paths.PATH_PAGINATED_FOLDER+M;h.PercServiceUtils.makeJsonRequest(N,h.PercServiceUtils.TYPE_GET,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){P(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(h.PercServiceUtils.STATUS_ERROR,S)}})}function x(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM+M,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function J(N,M){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_BY_ID+"/"+N,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(O.request);var Q=h.PercServiceUtils.extractGlobalErrorCode(O.request);M(h.PercServiceUtils.STATUS_ERROR,R,Q)}})}function f(N,P,L,O){if(L==null){L=""}var M={ItemByWfStateRequest:{path:N,workflow:P,state:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S)}},M)}function B(O,L,N){var M={MoveFolderItem:{itemPath:O,targetFolderPath:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ITEM_MOVE,h.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);N(h.PercServiceUtils.STATUS_ERROR,R)}},M)}function z(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_ADD_NEW_FOLDER+M,h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function y(M,N){var L=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_FOLDER+h.perc_utils.encodeURL(M),h.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function H(N,L,O){var M={RenameFolderItem:{path:N,name:L}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_RENAME_FOLDER,h.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==h.PercServiceUtils.STATUS_SUCCESS){O(h.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=h.PercServiceUtils.extractDefaultErrorMessage(Q.request);var P=h.PercServiceUtils.extractFieldErrorCode(Q.request);O(h.PercServiceUtils.STATUS_ERROR,S,P)}},M)}function t(N,L,M,O){h.ajax({url:h.perc_paths.PATH_VALIDATE_DELETE_FOLDER+N,dataType:"text",type:"GET",success:function(P){q(P,N,L,M,O)},error:j})}function E(N,M,P){h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);var L={DeleteFolderCriteria:{path:N,skipItems:"NO"}};var O=3600000;h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(L),timeout:O,success:P,error:I});h.unblockUI()}function k(M,L,N){t(M,L,"fsfolder",N)}function F(M,N,L){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_LAST_EXISTING+M,h.PercServiceUtils.TYPE_GET,(L!=null&&L)?true:false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}})}function A(L,M){h.PercServiceUtils.makeRequest(h.perc_paths.PATH_VALIDATE_EXIST+L,h.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==h.PercServiceUtils.STATUS_SUCCESS){M(h.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=h.PercServiceUtils.extractDefaultErrorMessage(N.request);M(h.PercServiceUtils.STATUS_ERROR,P)}},null,null,null,true)}function q(N,O,L,M,R){var Q;if(M=="section"){Q=I18N.message("perc.ui.finder.section.delete@Title")}else{Q=I18N.message("perc.ui.finder.folder.delete@Title")}var P=3600000;h.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:Q,question:D(N,L,M),success:function(){var T="EMPTY";if(h("#perc_delete_folder_force").length>0){T=h("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var S={DeleteFolderCriteria:{path:O,skipItems:T}};h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);h.ajax({url:h.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(S),timeout:P,success:R,error:I});h.unblockUI()},width:500})}function C(O,L,M,P){var N="";q(N,O,L,M,P)}function j(L){var M=h.PercServiceUtils.extractDefaultErrorMessage(errors);var N="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(M!="")?M:N})}function I(N){var L=h.PercServiceUtils.extractDefaultErrorMessage(N);var M="Failed to delete the folder.";h.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(L!="")?L:M})}function D(P,M,R){var L;var Q;var T="";var S="";if(R=="Assets"){L="perc.ui.finder.folder.delete@ConfirmAssets";Q="perc.ui.finder.folder.delete@WarningAssets";var O=P.indexOf("AssetsNotAuthorized");if(P.indexOf("AssetsNotAuthorized")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(P.indexOf("AssetsInUseTemplates")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(P.indexOf("AssetsInUsePages")>-1){T+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";S="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(R=="fsfolder"){L="perc.ui.finder.fsfolder.delete@Confirm";Q="perc.ui.finder.fsfolder.delete@Warning"}else{if(R=="Sites"){L="perc.ui.finder.folder.delete@ConfirmPages";Q="perc.ui.finder.folder.delete@WarningPages"}else{L="perc.ui.finder.section.delete@Confirm";Q="perc.ui.finder.section.delete@Warning"}if(P.indexOf("PagesNotAuthorized")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(P.indexOf("PagesInUseTemplates")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(P.indexOf("PagesInUsePages")>-1){T+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";S="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var N;if(P=="Success"){N=I18N.message(L,[M])}else{N=I18N.message(Q,[M])+"<br/><br/>"}return N+T+S}function b(M,L){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+M,h.PercServiceUtils.TYPE_GET,true,function(O,N){L(O,N)})}function n(L,M){h.PercServiceUtils.makeJsonRequest(h.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,h.PercServiceUtils.TYPE_POST,true,function(O,N){M(O,N)},L)}function e(N,M,O){var L=h.perc_paths.RENDER_LINK_PREVIEW+"/"+N;if(M=="image"){L+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{L+="/default"}h.PercServiceUtils.makeJsonRequest(L,h.PercServiceUtils.TYPE_GET,true,function(Q,P){if(Q==h.PercServiceUtils.STATUS_SUCCESS){O(true,P.data)}else{var R=h.PercServiceUtils.extractDefaultErrorMessage(P.request);O(false,R)}})}})(jQuery);(function(j){var C="NONE";var t="READER";var F="ASSIGNEE";var x="ADMIN";j.PercUserService={ACCESS_NONE:C,ACCESS_READ:t,ACCESS_WRITE:F,ACCESS_ADMIN:x,getUsers:J,findUser:z,findDirectoryUsers:A,importDirectoryUsers:B,getDirectoryStatus:e,getRoles:K,createUser:n,deleteUser:E,updateUser:h,findRole:y,deleteRole:D,updateRole:f,createRole:q,getAvailableUsers:b,getAccessLevel:I,validateDeleteRole:H,validateDeleteUsers:k};function J(M){var L=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_USERS,j.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==j.PercServiceUtils.STATUS_SUCCESS){N.data.UserList.users=G(N.data.UserList.users);M(j.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=j.PercServiceUtils.extractDefaultErrorMessage(N.request);M(j.PercServiceUtils.STATUS_ERROR,P)}})}function z(N,M){var L=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_FIND+"/"+N,j.PercServiceUtils.TYPE_GET,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){O.data.User.name=O.data.User.name.toString();M(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);M(j.PercServiceUtils.STATUS_ERROR,Q)}})}function A(N,O){if(N==null){O(j.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}N=N.replace(/%+$/,"");var M=j.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(N)+"%25";var L=this;j.PercServiceUtils.makeJsonRequest(M,j.PercServiceUtils.TYPE_GET,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{try{var S=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,S)}catch(R){O(j.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function B(M,N){if(M==null||M==undefined||M.ImportUsers.externalUsers.length==0){N(j.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var L=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_EXTERNAL_IMPORT,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},M)}function e(M){var L=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_EXTERNAL_STATUS,j.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==j.PercServiceUtils.STATUS_SUCCESS){M(j.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=j.PercServiceUtils.extractDefaultErrorMessage(N.request);M(j.PercServiceUtils.STATUS_ERROR,P)}})}function K(M){var L=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_ROLES,j.PercServiceUtils.TYPE_GET,false,function(O,N){if(O==j.PercServiceUtils.STATUS_SUCCESS){N.data.RoleList.roles=G(N.data.RoleList.roles);M(j.PercServiceUtils.STATUS_SUCCESS,N.data)}else{var P=j.PercServiceUtils.extractDefaultErrorMessage(N.request);M(j.PercServiceUtils.STATUS_ERROR,P)}})}function n(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_CREATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function E(N,M){var L=this;j.PercServiceUtils.makeDeleteRequest(j.perc_paths.USER_DELETE+"/"+N,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){M(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);M(j.PercServiceUtils.STATUS_ERROR,Q)}})}function h(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_UPDATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function y(N,O){var L=this;var M={psstring:{value:N}};j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_FIND,j.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==j.PercServiceUtils.STATUS_SUCCESS){P.data.Role.name=P.data.Role.name.toString();O(j.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R=j.PercServiceUtils.extractDefaultErrorMessage(P.request);O(j.PercServiceUtils.STATUS_ERROR,R)}},M)}function D(M,N){var L={psstring:{value:M}};j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_DELETE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function q(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_CREATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function f(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_UPDATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function b(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_AVAILABLE_USERS,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){O.data.UserList.users=G(O.data.UserList.users);N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function I(O,Q,R,M,P){var L=this;var N;if(O!=null){N={AccessLevelRequest:{type:O,itemId:Q,parentFolderPath:M}}}else{N={AccessLevelRequest:{itemId:Q,parentFolderPath:M}}}j.PercServiceUtils.makeJsonRequest(j.perc_paths.USER_ACCESS_LEVEL,j.PercServiceUtils.TYPE_POST,(typeof(P)!="undefined"&&P!=null&&P)?true:false,function(T,S){if(T==j.PercServiceUtils.STATUS_SUCCESS){R(j.PercServiceUtils.STATUS_SUCCESS,S.data.AccessLevel.accessLevel)}else{var U=j.PercServiceUtils.extractDefaultErrorMessage(S.request);R(j.PercServiceUtils.STATUS_ERROR,U)}},N)}function H(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_DELETE_VALIDATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function k(L,N){var M=this;j.PercServiceUtils.makeJsonRequest(j.perc_paths.ROLE_REMOVE_USERS_VALIDATE,j.PercServiceUtils.TYPE_POST,false,function(P,O){if(P==j.PercServiceUtils.STATUS_SUCCESS){N(j.PercServiceUtils.STATUS_SUCCESS,O.data)}else{var Q=j.PercServiceUtils.extractDefaultErrorMessage(O.request);N(j.PercServiceUtils.STATUS_ERROR,Q)}},L)}function G(L){L=j.perc_utils.convertCXFArray(L);j.each(L,function(N,M){L[N]=M.toString()});return L}})(jQuery);(function(f){f.PercWebResourcesService={deleteFile:b,validateFileUpload:e};function k(t,x,n,q,z){var y;if(q=="section"){y=I18N.message("perc.ui.finder.section.delete@Title")}else{y=I18N.message("perc.ui.finder.folder.delete@Title")}f.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:y,question:h(t,n,q),success:function(){var B="EMPTY";if(f("#perc_delete_folder_force").length>0){B=f("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var A={DeleteFolderCriteria:{path:x,skipItems:B}};f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(A),success:z,error:cbDfErrors});f.unblockUI()},width:500})}function j(t){var n=f.PercServiceUtils.extractDefaultErrorMessage(t);var q="Could not delete the file.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete File Error",content:(n!="")?n:q})}function h(t){var q;var n="";n="perc.ui.finder.fsfile.delete@Filename";q="perc.ui.finder.fsfile.delete@Confirm";var x;x=I18N.message(n,[t]);x=x+"<br /><br />"+I18N.message(q,[t]);return x}function b(q,n,x){var t=I18N.message("perc.ui.finder.fsfile.delete@Title");f.perc_utils.confirm_dialog({id:"perc-finder-delete-fsfile",title:t,question:h(n),success:function(){f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.PercServiceUtils.makeDeleteRequest(f.perc_paths.WEBRESOURCESMGT+q,false,function(z,y){if(z==f.PercServiceUtils.STATUS_SUCCESS){x(f.PercServiceUtils.STATUS_SUCCESS,y.data)}else{j(y.request)}});f.unblockUI()},width:500})}function e(n,t,q){n="/"+n.slice(3).join("/")+"/"+t;f.PercServiceUtils.makeRequest(f.perc_paths.WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD+n,f.PercServiceUtils.TYPE_GET,false,function(y,x){q(y,x)})}})(jQuery);(function(t){t.PercWorkflowService=function(){return{checkIn:C,checkOut:n,forceCheckOut:q,transition:I,getTransitions:E,isCheckedOutToCurrentUser:J,isApproveAvailableToCurrentUser:x,getWorkflowObject:y,createNewWorkflowStep:h,deleteWorkflowStep:b,updateWorkflowStep:k,getStatusByWorkflow:j,getWorkflowList:H,getWorkflows:F,createWorkflow:e,updateWorkflow:A,deleteWorkflow:D,bulkApproveItems:z,getBulkApproveStatus:f,getDefaultWorkflow:B}};function j(M,L){var K="/Rhythmyx/services/workflowmanagement/workflows/"+t.perc_utils.encodeURL(M)+"/states/choices";L=L==null?function(){}:L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,L)}function n(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKOUT+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function C(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKIN+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function E(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_TRANSITIONS+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function I(M,L,O,N){if(t.perc_utils.isBlankString(M)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}N=N==null?function(){}:N;var K=t.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+M+"/"+L+"?comment="+O;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,N)}function q(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function J(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function x(L,M){if(t.perc_utils.isBlankString(L)){t.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}M=M==null?function(){}:M;var K=t.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+L;t.PercServiceUtils.makeJsonRequest(K,t.PercServiceUtils.TYPE_GET,true,M)}function y(K,N){var M=t.perc_paths.WORKFLOW_STEPPED+K;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_GET,false,L)}function k(K,P,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+P;var M=function(Q,R){if(Q==t.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_PUT,false,M,L)}function h(K,P,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+G(P);if((P.indexOf("/")!=-1)||(P.indexOf("\\")!=-1)||(P.indexOf(";")!=-1)||(P.indexOf('"')!=-1)){L.Workflow.workflowSteps[0].stepName=P.replace(/[\\\/\;"]/g,"#")}var M=function(Q,R){if(Q==t.PercServiceUtils.STATUS_ERROR){O(false,[R.request,R.textstatus,R.error])}else{O(true,[R.data,R.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_POST,false,M,L)}function b(K,O,N){var M=t.perc_paths.WORKFLOW_STEPPED+K+"/steps/"+O;var L=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_DELETE,false,L)}function H(M){var L=t.perc_paths.WORKFLOW_STEPPED;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{O.data.EnumVals.entries=t.perc_utils.convertCXFArray(O.data.EnumVals.entries);M(true,[O.data,O.textstatus])}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function B(M){var L=t.perc_paths.DEFAULT_WORKFLOW_META;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{O.data.EnumVals.entries=t.perc_utils.convertCXFArray(O.data.EnumVals.entries);M(true,O.data)}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function F(M){var L=t.perc_paths.WORKFLOW_META;var K=function(N,O){if(N==t.PercServiceUtils.STATUS_ERROR){M(false,[O.request,O.textstatus,O.error])}else{M(true,[O.data,O.textstatus])}};t.PercServiceUtils.makeJsonRequest(L,t.PercServiceUtils.TYPE_GET,false,K)}function e(K,L,O){var N=t.perc_paths.WORKFLOW_STEPPED+G(K);if((K.indexOf("/")!=-1)||(K.indexOf("\\")!=-1)||(K.indexOf(";")!=-1)||(K.indexOf('"')!=-1)){L.Workflow.workflowName=K.replace(/[\\\/\;"]/g,"#")}var M=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_POST,false,M,L)}function A(O,K,N){var M=t.perc_paths.WORKFLOW_STEPPED+O;var L=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){N(false,[Q.request,Q.textstatus,Q.error])}else{N(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_PUT,false,L,K)}function G(K){var L=K.toString();L=L.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(L))}function D(K,N){var M=t.perc_paths.WORKFLOW_STEPPED+K;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_DELETE,false,L)}function z(K,N){var M=t.perc_paths.WORKFLOW_BULK_APPROVE;var L=function(O,P){if(O==t.PercServiceUtils.STATUS_ERROR){N(false,[P.request,P.textstatus,P.error])}else{N(true,[P.data,P.textstatus])}};t.PercServiceUtils.makeJsonRequest(M,t.PercServiceUtils.TYPE_POST,false,L,K)}function f(K,L,O){var N=t.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(L){N+="/full/"+K}else{N+="/processed/"+K}var M=function(P,Q){if(P==t.PercServiceUtils.STATUS_ERROR){O(false,[Q.request,Q.textstatus,Q.error])}else{O(true,[Q.data,Q.textstatus])}};t.PercServiceUtils.makeJsonRequest(N,t.PercServiceUtils.TYPE_GET,false,M)}})(jQuery);(function(e){e.PercImportProgressDialog=function b(H){var j={IDS:{MAIN_DIALOG:"perc_import_progress_dialog",MAIN_DIALOG_CLOSE_BUTTON:"perc_import_progress_dialog_close",MAIN_DIALOG_CLOSE_DISABLED_BUTTON:"perc_import_progress_dialog_close_disabled",MAIN_DIALOG_DONE_BUTTON:"perc_import_progress_dialog_done",MAIN_DIALOG_DONE_DISABLED_BUTTON:"perc_import_progress_dialog_done_disabled"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.ImportProgressDialog.title@Import"),IMPORT_ERROR_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import failed message"),IMPORT_SUCCESS_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import succeded message")},OTHER:{EVENTS_ENABLE_DONE_BUTTON:"enableDoneButton",POLLING_PERIOD_DURATION:100,IMPORT_LOG_URL:e.perc_paths.VIEW_IMPORT_LOG+"?templateId="}};var t={Done:{id:j.IDS.MAIN_DIALOG_DONE_BUTTON,click:function(L){H.onSuccessCallback(J)}},"Done Disabled":{id:j.IDS.MAIN_DIALOG_DONE_DISABLED_BUTTON},"Close Normal":{id:j.IDS.MAIN_DIALOG_CLOSE_BUTTON,click:function(){D=true;if(H.backgroundRefreshCallback!==undefined&&q===true){H.backgroundRefreshCallback()}C.remove()}}};var G={id:j.IDS.MAIN_DIALOG,title:j.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:true,width:686,height:"auto",percButtons:t};var z=e("<div/>");var C;var A;var J;var q=false;var y=-1;var F;var D=false;function E(L){F='<div class="progress">';F+='<p class="progress-message">&nbsp;</p>';F+='<div class="progress-bar-container">';F+='<div class="progress-bar"></div>';F+="</div>";F+='<div class="error-message">';F+=j.TEXT.IMPORT_ERROR_MESSAGE;F+="</div>";F+='<div class="success-message">';F+=j.TEXT.IMPORT_SUCCESS_MESSAGE;F+="</div>";F+="</div>";F=e(F);z.append(e("<div>").append(F));if(L.showVideo===true){z.append(e('<div align="center" style="margin-top:24px;height: 315px; overflow:hidden">').append(e('<iframe id="perc_import_video" src="//help.percussion.com/in-product/single2" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="560px" height="0px" style="display: block; overflow: hidden">')).append(e('<img id="perc_import_image" src="../images/images/ImportVideoNotFound.png" width="560px" height="0px">')))}z.append(e("<div>").append('<p class="hint">Ask questions. Get answers. Visit the <a target="_blank" href="http://cm1community.percussion.com/percussion" title="Percussion Community">Percussion Community</a> to access Video Tutorials, Forums, and more.</p>'));if(L.showVideo===true){z.append(e('<img height="0px" width="0px" src="http://help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(N).load(M))}function N(){e("#"+j.IDS.MAIN_DIALOG).find("#perc_import_image").attr("height","315px")}function M(){e("#"+j.IDS.MAIN_DIALOG).find("#perc_import_video").attr("height","315px")}C=e(z).perc_dialog(G);f();B()}function f(){var L=e("#"+t["Done Disabled"].id);var M=e("#"+t.Done.id);M.hide();e("#"+j.IDS.MAIN_DIALOG).bind(j.OTHER.EVENTS_ENABLE_DONE_BUTTON,function(O,N){K(N)})}function K(L){var N=e("#"+t.Done.id),M=e("#"+t["Done Disabled"].id);if(L===true){N.show();M.hide()}else{N.hide();M.show()}}function B(){H.startProgressCallback(function(M,L){if(M!=e.PercServiceUtils.STATUS_SUCCESS){k()}else{A=L;n()}})}function n(){if(q===true){return}H.pollingProgressCallback(A,function(M,O){if(M!=e.PercServiceUtils.STATUS_SUCCESS||O.status<0){k()}else{var L=F.find(".progress-message");var N=F.find(".progress-bar");if(O.status>y){if(O.message!==undefined&&O.message.length>0){O.message=O.message.charAt(0).toUpperCase()+O.message.slice(1)+"...";L.html(O.message)}N.css("width",O.status+"%");y=O.status}if(O.status==100){q=true;if(H.backgroundRefreshCallback!==undefined&&D===true){H.backgroundRefreshCallback();return}x();return}setTimeout(n,j.OTHER.POLLING_PERIOD_DURATION)}})}function h(){F.find(".progress-message").css("visibility","hidden");F.find(".progress-bar-container").css("visibility","hidden")}function k(){h();F.find(".error-message").show()}function x(){H.importResultCallback(A,function(L,M){J=M;I(J);h();F.find(".success-message").show();K(true)})}function I(){function L(N){var M=F.find('a[title="Download the import log here"]');M.attr("href",j.OTHER.IMPORT_LOG_URL+N)}if(J.id!==undefined){L(J.id)}else{e.PercSiteService.getTemplates(J.Site.name,function(M,N){L(N.TemplateSummary[0].id)})}}E(H)}})(jQuery);var $perc_newSiteDialogLayout;(function(e){var h;e.perc_createNewSiteDialog=function(A){var z=null;h=e("<div></div>").perc_wizard({steps:2,modal:true,resizable:false,templateUrl:"../jsp/dialogs/perc_newSiteDialog.jsp",title:I18N.message("perc.ui.newsitedialog.title@Create Site"),height:"auto",width:690,open:function(){var C=e("#sitename"),E=e("#templatename"),F=e("#url"),B=e("input#type_url");if(!$perc_newSiteDialogLayout){$perc_newSiteDialogLayout=true;e.perc_filterField(C,e.perc_textFilters.HOSTNAME);e.perc_filterField(E,e.perc_textFilters.URL);e("input[type=radio]").change(function(G){var H=e(this);if(H.attr("id")!=="type_url"){F.attr("readonly","readonly").attr("disabled","true");n(F)}else{F.removeAttr("readonly").removeAttr("disabled")}});var D=e("#perc_templateList").perc_imageselect({hardSelect:false,onSelect:function(H,G){e("#perc_selectedTemplate img").remove();e("#perc_selectedTemplate").html("<img src='"+G+"'/><br/><span>"+H.split(".")[2]+"</span>");e("#selectedtemplate").val(H)}});t();e("#perc-select-template-type").change(function(){if(e(this).val()=="base"){e("#perc-base-template-lib").show();e("#perc-resp-template-lib").hide()}else{e("#perc-base-template-lib").hide();e("#perc-resp-template-lib").show()}});z=e("#perc_newSiteDialogForm").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:f(),messages:b(),showErrors:function(G,H){if(this.pendingRequest<1){this.defaultShowErrors();var I=e("#perc_newSiteDialogForm");I.find(".perc_dialog_field.perc_field_success").prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");I.find(".perc_dialog_field.perc_field_error").prevAll(".perc_dialog_label").addClass("perc_dialog_label_error");e(this.currentElements).removeClass(this.settings.errorClass)}}})}else{k()}F.removeAttr("readonly").removeAttr("disabled");n(C);n(F);B.attr("checked",true)},onOk:function(){x(A)},onNext:j,onValidate:function(){return z.form()}});return h};function j(F){var K=h.find("select[name=sitename-select]");if(K.length>0){h.find("input[name=sitename]").val(K.val())}var I=e("#sitename"),E=e("#url"),z={templateName:undefined,templateId:undefined,pageId:undefined},B,G=true;function H(L){e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:L})}function C(L,M){if(L!=e.PercServiceUtils.STATUS_SUCCESS){H(M);return}z.templateName=M.Site.templateName;z.tabId="perc-tab-layout";B=e.perc_paths.SITES_ROOT+"/"+M.Site.name;e.PercSiteService.getTemplates(M.Site.name,J)}function J(L,M){if(L!=e.PercServiceUtils.STATUS_SUCCESS){H(M);return}z.templateId=M.TemplateSummary[0].id;e.PercPathService.getFolderPathItem(B,A)}function A(M,P){if(M!=e.PercServiceUtils.STATUS_SUCCESS){H(P);return}var O;for(var N=0;N<P.PathItem.length;N++){if(P.PathItem[N].category=="LANDING_PAGE"){O=P.PathItem[N];N=P.PathItem.length}}z.pageId=O.id;var L=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_DESIGN,D.name,null,null,null,O.path,null,z)}if(h.find("input[type=radio]").filter(":checked").attr("id")==="type_url"){var D={name:e.trim(I.val()),baseUrl:e.trim(E.val())};if(!(/^(https?):\/\//i).test(D.baseUrl)){D.baseUrl="http://"+D.baseUrl}G=false;e(".ui-dialog-titlebar .ui-icon-closethick").click();e.PercImportProgressDialog({showVideo:true,backgroundRefreshCallback:function(){e.perc_finderInstance.refresh()},onSuccessCallback:function(L){C("success",L)},startProgressCallback:function(L){e.PercSiteService.createSiteFromUrlAsync(D,function(N,M){L(N,M)})},pollingProgressCallback:e.PercSiteService.createSiteFromUrlStatus,importResultCallback:e.PercSiteService.createSiteFromUrlResult})}return G}function x(A){var z=y();z.selectedtemplate=e("#perc-select-template-type").val()=="base"?z.perc_selected_basetemplate:z.perc_selected_resptemplate;if(z.selectedtemplate.length==0){e.perc_utils.alert_dialog({title:"Error",content:"Please select a template for your homepage."});return}if(z.templatename==null||e.trim(z.templatename)==""){e.perc_utils.alert_dialog({title:"Error",content:"Template name cannot be blank."});return}var B={Site:{name:z.sitename,label:z.sitename,description:z.description,homePageTitle:"Home",navigationTitle:"Home",baseTemplateName:z.selectedtemplate,templateName:e.trim(z.templatename)}};e.PercBlockUI();e(".ui-dialog-titlebar .ui-icon-closethick").click();e.ajax({url:e.perc_paths.SITE_CREATE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(B),success:function(D,C){A(z.sitename);e.unblockUI()},error:function(E,C,D){var F=e.PercServiceUtils.extractDefaultErrorMessage(E);e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:F})}})}function k(){e("#perc_newSiteDialog .perc_dialog_field").each(function(){e(this).val("")});e("#perc_selectedTemplate").html("");e(".perc_imageselect_selected").removeClass("perc_imageselect_selected")}function y(){var z=new Object();e("#perc_newSiteDialog .perc_dialog_field").each(function(){z[this.id]=e(this).val()});return z}function t(){var A=e("#perc-base-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"base",hiddenFieldId:"perc_selected_basetemplate"});var z=e("#perc-resp-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"resp",hiddenFieldId:"perc_selected_resptemplate"})}function q(B,A,C,z){for(i=0;i<z.SiteSummary.length;i++){if((z.SiteSummary[i].name+"").toLowerCase()==C.toLowerCase()){return false}}return true}function f(){var z={sitename:{required:true,perc_remote:{url:e.perc_paths.SITES_ALL,contentType:"application/json",type:"GET",dataType:"json",handler:q}},url:{required:"input[type=radio]#type_url:checked",maxlength:2000,noBinary:"noBinary"},description:{maxlength:255},selectedtemplate:{required:true}};return z}function b(){var z={sitename:{required:"Site name is a required field.",perc_remote:"The site name must be unique."},url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."},templatename:{required:"Template name is a required field.",perc_remote:"The template name must be unique."},selectedtemplate:{required:"Selected template is required."}};return z}function n(A){A.prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");var z=A.next();if(z.find(".perc_field_error").length>0){A.removeClass("perc_field_error");z.remove()}}})(jQuery);(function(b){b.perc_iframe_fix=function(e){b.perc_iframe_scope="perc-iframe-scope";var x=false;var k=b('<div class="perc-iframe-overlay-dnd-container"/>');b("body").append(k);k.height(e.height()).width(e.width()).addClass("ui-layout-ignore").css({overflow:"hidden",position:"absolute",left:"-10000px",top:"0px",zIndex:1000});q();function f(){k.css({left:e.position().left,top:e.position().top});k.height(e.height());k.width(e.width())}function y(){k.css({left:"-10000px",top:"0px"})}function h(){var z=e.contents().find(":data(droppable)");z.each(function(){var H=b(this);var J=b.data(this,"droppable");var F=b("<div/>").addClass("allDroppablesHelpers").addClass("perc-iframe-dnd-overlay-droppable").attr("for",H.attr("id")).width(H.outerWidth()).height(H.outerHeight());k.append(F);var E,C;var D=e;if(b.browser.msie){var B=D[0].contentWindow;var I=B.document.documentElement;E=I.scrollLeft;C=I.scrollTop}else{E=e[0].contentWindow.scrollX;C=e[0].contentWindow.scrollY}var A=b(this).offset().left-E;var G=b(this).offset().top-C;if(b.browser.mozilla||b.browser.safari){A-=window.scrollX;G-=window.scrollY}F.css({position:"absolute",left:A+"px",top:G+"px"});F.droppable({greedy:J.options.greedy,tolerance:J.options.tolerance,accept:J.options.accept,over:function(K){J._over.call(J,K)},activate:function(K){J._activate.call(J,K)},deactivate:function(K){J._deactivate.call(J,K)},out:function(K){J._out.call(J,K)},drop:function(K){J._drop.call(J,K)}})})}function t(){k.empty()}function n(){if(!x){x=true;f();h()}}function j(){y();t();x=false}function q(){var z=b("<div/>").addClass("ui-layout-ignore").droppable({addClasses:false,activate:function(A,B){n(B.draggable)},deactivate:function(){setTimeout(j,100)}});b("body").append(z)}}})(jQuery);(function(j){function k(B,C,z,A){if(!j.perc_fakes.page_service.create_page){j.perc_pathmanager.get_folder_path(B,function(D){e(D,C,z,A)},A)}else{if(false){A("Could not create new page: random failure")}else{z("16777215-101-733")}}}function e(A,E,z,C){var D={};j.each(E,function(){D[this.name]=this.value});var G=null;var F=null;var B=D.addToRecent?true:false;if(D.landingpage){G=j.perc_paths.SECTION_CREATE;pass_in={CreateSiteSection:{pageName:D.page_name,pageTitle:D.page_title,templateId:D.template,pageUrlIdentifier:D.page_name,pageLinkTitle:D.page_linktext,folderPath:A,addToRecent:true}}}else{G=j.perc_paths.PAGE_CREATE;pass_in={Page:{name:D.page_name,title:D.page_title,templateId:D.template,linkTitle:D.page_linktext,folderPath:A,addToRecent:true}}}j.ajax({dataType:"json",data:JSON.stringify(pass_in),contentType:"application/json",type:"POST",url:G,success:z,error:C})}function q(B,z,A){j.ajax({url:j.perc_paths.PAGE_EDIT+"/"+B,type:"GET",success:z,error:A,dataType:"text"})}function b(B,A,z){j.ajax({url:j.perc_paths.PAGE_DELETE+"/"+B,type:"DELETE",success:function(){A()},error:z})}function x(B,A,z){j.ajax({url:j.perc_paths.SITE_DELETE+"/"+B,type:"DELETE",success:A,error:z})}function n(A,B,C,z){if(!j.perc_fakes.page_service.new_asset){z("New asset not yet implemented!")}else{C("54321")}}function f(A,z,E,B){if(!j.perc_fakes.page_service.get_widget_ctypes){function D(F){var G={};j.each(F.AssetDropCriteria,function(){G[this.widgetId]=this.supportedCtypes});E(G)}j.ajax({url:j.perc_paths.ASSET_WIDGET_DROP_CRITERIA+A+"/"+z,type:"GET",dataType:"json",success:D,error:B})}else{var C={"12345":["percPage","article"],"4567":[]};E(C)}}function y(z,A,B){j.ajax({url:j.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:A,dataType:"xml",processData:false,success:B,error:function(E,C,D){j.unblockUI();j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(E)})}})}function h(z,A){j.ajax({url:j.perc_paths.PAGE_CREATE+"/"+z,type:"GET",dataType:"text",success:A,error:function(D,B,C){j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(D)})}})}function t(B,z,A){j.ajax({url:j.perc_paths.PAGE_PREVIEW+B,type:"POST",contentType:"text/xml",dataType:"xml",data:z,processData:false,success:A,error:function(E,C,D){j.perc_utils.alert_dialog({title:"Error",content:j.PercServiceUtils.extractDefaultErrorMessage(E)})}})}j.perc_pagemanager={save_page:y,render_region:t,load_page:h,create_new_page:k,render_page:q,new_asset:n,delete_page:b,delete_site:x,get_widget_ctypes:f,createPage:e}})(jQuery);(function(k){var h=k.perc_utils;function n(C,B,y,A){q(C,function(D){B(D.PathItem)},z(y),A);function z(D){return function(E){var F=k.map(E.PathItem,function(G){var H=G.path.split("/");if(H[H.length-1]==""){H.pop()}G.path=k.map(H,function(I){return I});G.path_component=H[H.length-1];return G});F=k.grep(F,function(G){return G.type!="percNavTree"&&G.name!=".system"});D(F)}}}function q(D,C,y,A){if(D.length<=2){e(D,true,y,A)}else{var z=k.map(D,function(F){return F});var B=z.pop();function E(G){var F=k.grep(G.PathItem,function(J){var H=J.path.split("/");var I=H.pop();if(I==""){I=H.pop()}return I==B});if(F.length==0){A("Item not found")}else{if(F[0].leaf==true){e(D,false,C,A)}else{e(D,true,y,A)}}}e(z,true,E,A)}}function t(A,y,z){y(A[1])}function f(A,y,z){e(A,false,function(B){y(B.PathItem["folderPath"])},z)}function j(B,z,A){var y=k.map(B,function(C){return C});q(B,function(){y.pop();e(y,true,function(C){z(C,y)},A)},function(C){z(C,y)},A)}function x(D,z,C){var A=D.join("/")+"/";var B=k.perc_utils.acop(D);var y=B.pop();e(B,true,function(F){var E=k.grep(F.PathItem,function(G){return G.name==y});if(E.length>0){C(I18N.message("perc.ui.saveasdialog.error@Duplicate folder"))}else{A=k.perc_utils.encodeURL(A);k.ajax({type:"GET",success:z,error:C,url:k.perc_paths.PATH_ADD_FOLDER+A,dataType:"json"})}},C)}function e(E,C,F,B,z){var A;var D;if(z){A=E;D=k.perc_paths.PATH_PAGINATED_FOLDER+A}else{A=k.perc_utils.encodeURL(E.join("/")+"/");D=k.perc_paths.PATH_FOLDER+A}if(!k.perc_fakes.path_service){if(C){k.ajax({type:"GET",success:F,error:function(I,G,H){if(I.status!=0){B("Error finding path "+A)}},url:D,dataType:"json",cache:false})}else{k.ajax({type:"GET",success:F,error:function(I,G,H){if(I.status!=0){B("Error finding path "+A)}},url:k.perc_paths.PATH_ITEM+A,dataType:"json",cache:false})}}else{var y={"/":{PathItem:[{name:"Sites",leaf:"false",path:"/Sites/"}]},"/Sites/":{PathItem:[{name:"Test",leaf:"false",path:"/Sites/Test/"},{name:"TestTwo",leaf:"false",path:"/Sites/TestTwo/"}]},"/Sites/Test/":{PathItem:[{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}]},"/Sites/Test/Test/":{PathItem:{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}},"/Sites/TestTwo/":{PathItem:[{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}]},"/Sites/TestTwo/TestTwo/":{PathItem:{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}}};F(y[A])}}function b(B,C){var y=function(D){C(true,D.ItemProperties)};var z=function(F,D,E){C(false,k.PercServiceUtils.extractDefaultErrorMessage(F))};var A=k.perc_utils.encodeURL(B);k.ajax({type:"GET",success:y,error:z,url:k.perc_paths.PATH_ITEM_PROPERTIES+A,dataType:"json",cache:false})}k.perc_pathmanager={is_leaf:n,open_path:e,get_folder_path:f,get_site_id:t,open_containing_folder:j,add_folder:x,getItemProperties:b}})(jQuery);(function(b){b.perc_build_new_folder_button=function(e,k){var j=b.perc_utils;var q=["",b.perc_paths.SITES_ROOT_NO_SLASH];var h={};var y=null;var f=b("<a id='perc-finder-new-folder' class='perc-font-icon ui-disabled' href='#' title='Click to create new folder'><span class='icon-plus'></span><span class='icon-folder-close'></span></a>").perc_button().click(function(){t()});function t(){b.PercFolderHelper().getAccessLevelByPath(q.join("/"),false,function(A,z){if(A==b.PercFolderHelper().PERMISSION_ERROR||z==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create a folder here."});return}else{b.PercBlockUI(b.PercBlockUIMode.CURSORONLY);b.PercPathService.createNewFolder(q.join("/"),function(C,B){if(C==b.PercServiceUtils.STATUS_SUCCESS){h=B;e.refresh(function(){var D=b(".perc-finder").css("visibility")=="visible";if(D){j.makeFolderEditable(h.PathItem)}});b.unblockUI()}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:B})}})}})}function n(z){q=z;x(true);if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){x(false)}else{if(z[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&z.length<4){x(false)}else{if(z.length==2&&z[1]==b.perc_paths.SITES_ROOT_NO_SLASH){x(false)}else{b.PercFolderHelper().getAccessLevelByPath(z.join("/"),true,function(B,A){if(B==b.PercFolderHelper().PERMISSION_ERROR||A==b.PercFolderHelper().PERMISSION_READ){x(false)}})}}}}function x(z){if(z){b(".perc-finder-menu #perc-finder-new-folder").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(t)}else{b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}e.addPathChangedListener(n);return f}})(jQuery);(function(b){b.perc_build_new_page_button=function(q,f){var n;var j=b('<a id="mcol-new-page" class="perc-font-icon" href="#" title="Click to create new page" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file"></span></a>').perc_button();function e(t){n=t;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){h(false)}else{if(t[1]==b.perc_paths.SITES_ROOT_NO_SLASH){j.show();h(true);if(t.length<3){h(false)}else{b.PercFolderHelper().getAccessLevelByPath(t.join("/"),true,function(y,x){if(y==b.PercFolderHelper().PERMISSION_ERROR||x==b.PercFolderHelper().PERMISSION_READ){h(false)}})}}else{if(t[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||t[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){j.hide()}}}}function h(t){if(t){j.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(k)}else{j.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function k(){var x=q.getCurrentItem();var t="";if(x!=null){t=x.folderPaths;if(x.type=="Folder"){t=x.folderPath}}b.PercUserService.getAccessLevel("percPage",-1,function(z,y){if(z==b.PercServiceUtils.STATUS_ERROR||y==b.PercUserService.ACCESS_READ||y==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Page",content:"You are not authorized to create a new page."});return}else{if(f){f.confirm_if_dirty(function(){b.PercNewPageDialog().openDialog(n.join("/"))})}else{open_new_page_dialog(b.PercNewPageDialog().openDialog(n.join("/")),null)}}},t)}q.addPathChangedListener(e);return j}})(jQuery);(function(e){var b;e.perc_build_copy_page_button=function(k,t){var f=e("<a id='perc-finder-copy-page' href='#' title='Click to copy selected page'>Copy</a>").click(function(z){x()});function x(){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);var C=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE");var B=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE");var z=e("#perc-finder-listview .perc-datatable-row-highlighted");if(C[0]==undefined&&B[0]==undefined&&z.size()==0){return}b=C.text();if(!b||b==""){b=B.text()}var E;if(z.size()>0){listSelectedRowData=z.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"){E=listSelectedRowData.id;b=listSelectedRowData.name}}else{if(C[0]!=undefined){E=C.attr("id")}else{E=B.attr("id")}}var A=k.getCurrentItem();var D="";if(A!=null){D=A.id}e.PercUserService.getAccessLevel("percPage",D,function(G,F){if(G==e.PercServiceUtils.STATUS_ERROR||F==e.PercUserService.ACCESS_READ||F==e.PercUserService.ACCESS_NONE){e.perc_utils.alert_dialog({title:"Copy Page",content:"You are not authorized to copy the page '"+b+".'"});e.unblockUI();return}else{E=E.replace("perc-finder-listing-","");h(E)}})}function h(z){var A=k.getCurrentPath();var B=k.getPathItemById(z);e.PercPageService.copyPage(z,function(D,C){if(D=="error"){y(C);k.refresh()}else{k.refresh(function(){var F=C.data.split("/");var E=F[F.length-1];A[A.length-1]=E;k.open(A)})}e.unblockUI()})}function y(z){z=z.replace("PAGE_NAME",b);e.perc_utils.alert_dialog({id:"perc-finder-copy-page-error",title:"Error",content:z})}function q(E){var B=E[E.length-1];if(E[1]==e.perc_paths.SITES_ROOT_NO_SLASH){if(E.length<4){n(false)}else{var D=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE.perc_last_selected");var C=e(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE.perc_last_selected");var z=e(".mcol-listing.perc-listing-type-Folder.perc-listing-category-FOLDER.ui-draggable.perc_last_selected.ui-droppable[title='"+B+"']").eq(0).attr("id");var F=e(".mcol-listing.perc-listing-type-Folder.perc-listing-category-SECTION_FOLDER.perc_last_selected.ui-droppable[title='"+B+"']").eq(0).attr("id");var A=e("#perc-finder-listview .perc-datatable-row-highlighted");if(A.size()>0){listSelectedRowData=A.data("percRowData");j(E,function(G){if(G&&(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE")){n(true)}else{n(false)}});return}else{if(D[0]!=undefined||C[0]!=undefined){j(E,function(G){if(!G||z!=undefined||F!=undefined){n(false)}else{n(true)}})}else{n(false)}}}}else{n(false)}}function j(A,B){var z=A.slice(0,A.length-1).join("/");e.PercFolderHelper().getAccessLevelByPath(z,false,function(D,C){if(D==e.PercFolderHelper().PERMISSION_ERROR){e.perc_utils.alert_dialog({title:"Error",content:C});return}else{B(!(C==e.PercFolderHelper().PERMISSION_READ));return}})}function n(z){if(z){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(x)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}k.addPathChangedListener(q);return f}})(jQuery);(function(b){b.perc_build_download_button=function(k,h){var f=b('<a id="perc-finder-download" href="#" title="Click to download the selected file">Download File</a>');function e(t){if(t[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&t.length>4){x=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(x==undefined){var x=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened.perc_last_selected").data("spec")}if(x!=undefined&&x.type=="FSFile"&&x.leaf){n(true);j(true);return}}n(false);j(false)}function j(t){if(t){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(q)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function q(){}function n(t){var x;if(t){x=b.perc_paths.WEBRESOURCESMGT+"/"+k.getCurrentPath().slice(3).join("/")}else{x="#"}f.attr("href",x)}k.addPathChangedListener(e);return f}})(jQuery);(function(b){b.perc_build_upload_button=function(k,h){var f=b('<a id="perc-finder-upload" href="#" title="Click to upload a file">Upload File...</a>').click(e);function n(q){if(q.length>3&&b.perc_paths.DESIGN_THEMES==q[0]+"/"+q[1]+"/"+q[2]+"/"+q[3]){j(true);return}j(false)}function j(q){if(q){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function e(){b.perc_upload_theme_file_dialog.open(k)}k.addPathChangedListener(n);return f}})(jQuery);(function(b){b.perc_build_folderproperties_button=function(e,j){var f=b('<a id="perc-finder-folderproperties" href="#" title="Folder properties">Folder properties</a>');var h=undefined;var t=undefined;function x(C){if(C.length>1&&C[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){q(false);t=undefined;return}h=b("#perc-finder-listview .perc-datatable-row-highlighted");if(h.length>0){t=h.data("percRowData");if(t.type!="Folder"&&t.type!="FSFolder"){h=undefined}}else{var D;D=".mcol-listing.perc-listing-type-FSFolder.mcol-opened";D+=", .mcol-listing.perc-listing-type-Folder.mcol-opened";var z=b(D);var B;for(B=0;B<z.length;B++){var A=b(z[B]);var y=A.data("spec").path;if(y==C.join("/")+"/"){h=A;t=A.data("spec")}}}if(h!=undefined&&h.length>0){q(true)}else{q(false);t=undefined}}function q(y){if(y){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}f.trigger("actions-change-enabled-state")}function n(){if(t.category=="SYSTEM"){b.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  Its properties cannot be modified."});return}else{if(t.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){var y=pathItem.category=="SECTION_FOLDER"?"section":"folder";b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this "+y+"."});return}else{if(t.category=="SECTION_FOLDER"){b.perc_utils.alert_dialog({title:"Warning",content:"Use the navigation editor to change section properties."});return}}}b.PercFolderPropertiesDialog().open(t,function(A,z){if(z===undefined){if(A!==""&&A!==t.name){var B=t.folderPaths+"/"+A;B=B.substring(1);B=B.replace("/Folders/$System$","");b.perc_finder().open(B.split("/"))}else{b.perc_finder().refresh()}}})}function k(y){var z;if(y){z=b.perc_paths.WEBRESOURCESMGT+"/"+e.getCurrentPath().slice(3).join("/")}else{z="#"}f.attr("href",z)}e.addPathChangedListener(x);return f}})(jQuery);(function(b){b.perc_build_actions_button=function(D,h){var j=b.perc_build_copy_page_button(D,h);var k=b.perc_build_folderproperties_button(D,h);var F=b.perc_build_download_button(D,h);var B=b.perc_build_upload_button(D,h);var f=[j,k,F,B];var e=E(f).hover(q,x);var G='<div id="perc-finder-actions" ><a id="perc-finder-actions-button" class="perc-font-icon" title="Select an action" href="#"><span class="icon-cog"></span><span class="icon-caret-down"></span></a></div>';var n=b(G).append(e).hover(q,x);var C=false;function x(){C=false;setTimeout(function(){if(!C){y(false)}},500)}function q(H){var I=b(H.target);if(I.attr("id")==n.attr("id")){C=true;return}if(I.is("#perc-finder-actions *")){C=true;return}}function t(){if(b("#perc-finder-actions-button").hasClass("ui-disabled")){return false}else{if(e.css("display")=="none"){y(true)}else{y(false)}return false}}function y(J){if(J){var I=n.position().left+n.outerWidth()-e.outerWidth()-1;var H=n.position().top+n.outerHeight()+9;e.css("top",H).css("left",I).css("display","block")}else{e.hide()}}function A(H){var I=b("#perc-finder-actions-button");if(H){I.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(t)}else{I.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function E(I){var J=b('<ul class="perc-actions-menu box_shadow_with_padding">');var H=b('<li class="perc-actions-menu-item">');for(l=0;l<I.length;l++){H.clone().append(I[l]).appendTo(J)}return J}function z(){var H=f.length;var J=0;function I(){var K=b(this).hasClass("ui-enabled");if(H==1&&J==f.length-1){A(K);H=f.length;J=0}else{if(H==1&&J<f.length-1){A(true);H=f.length;J=0}else{if(!K){J++}H--}}}for(m=0;m<f.length;m++){f[m].bind("actions-change-enabled-state",I)}}z();return n}})(jQuery);(function(b){b.perc_build_delete_page_button=function(z,t){var h=b.perc_utils;var e=b.perc_finder();var n=["","site"];var q="<span id='perc-delete-warn-msg'>";var k="</span>";var f=b('<a id="perc-finder-delete" class="perc-font-icon icon-remove" title="Click to delete selected item" href="#" ></a>').unbind().perc_button().click(y);function y(){var B=n;if(b.perc_utils.isPathUnderDesign(B)){B=b.perc_utils.encodePathArray(n)}b.PercFolderHelper().getAccessLevelByPath(B.join("/"),false,function(D,C){if(D==b.PercFolderHelper().PERMISSION_ERROR){b.perc_utils.alert_dialog({title:"Error",content:C});z.refresh();return}else{if(C==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to delete this."});return}else{x()}}})}function x(){b.perc_pathmanager.open_path(h.acop(n),false,function(M){function L(O,R,P){var Q=I18N.message("perc.ui.deleteassetdialog.title@Delete Asset");G(O,"asset",Q,function(){var S=M.PathItem["id"];b.PercAssetService.forceDeleteAsset(S,C(S,"asset"),L)})}function J(O,R,P){var Q=I18N.message("perc.ui.deletepagedialog.title@Delete Page");G(O,"page",Q,function(){var S=M.PathItem["id"];b.PercPageService.forceDeletePage(S,C(S,"page"),J)})}function G(Q,P,S,R){var O=b.PercDeleteItemHelper.extractDeleteErrorMessage(Q,M.PathItem["name"],P);if(O.canForceDelete){E(O.dialogid,S,O.content,O.chkBoxId,R)}else{h.alert_dialog({id:O.dialogid,title:S,content:q+O.content+k})}}function E(T,R,O,S,Q){var P=b("<div/>").append(q+O+k).perc_dialog({id:T,title:R,success:function(){if(b("#"+S).length>0){if(b("#"+S).get(0).checked){Q()}}},width:500,resizable:false,percButtons:{Ok:{id:"perc-finder-delete-approved-ok",cls:"ui-state-disabled",click:function(){}},Cancel:{id:"perc-finder-delete-approved-cancel",cls:"perc-cancel",click:function(){P.remove()}}},open:function(){b("#"+S).click(function(){if(b(this).get(0).checked){b("#perc-finder-delete-approved-ok").click(function(){if(b("#"+S).length>0){if(b("#"+S).get(0).checked){Q();P.remove()}}});b("#perc-finder-delete-approved-ok").removeClass("ui-state-disabled")}else{b("#perc-finder-delete-approved-ok").addClass("ui-state-disabled")}})}})}function I(){b.PercBlockUI();b.perc_pagemanager.delete_site(M.PathItem["name"],function(){dialog.remove();var O={type:"site",name:M.PathItem["name"]};e.fireActionEvent(e.ACTIONS.DELETE,O);setTimeout(function(){b.PercDirtyController.setDirty(false);b.PercNavigationManager.goToLocation(b.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(O){b.unblockUI();site_delete_handle_error(O)})}function H(){var O=M.PathItem["id"];b.PercAssetService.deleteAsset(O,function(){C(O,"asset")},L)}function D(){var O=M.PathItem["id"];b.PercRedirectHandler.createRedirect(M.PathItem.path,"","page").fail(function(P){b.perc_utils.alert_dialog({title:"Redirect creation error",content:P,okCallBack:function(){b.perc_pagemanager.delete_page(O,function(){C(O,"page")},J)}})}).done(function(){b.perc_pagemanager.delete_page(O,function(){C(O,"page")},J)})}function C(T,R){setTimeout(function(){z.refresh()},200);var Q=false;if(T==b.PercNavigationManager.getId()){Q=true;t.clear()}var S={type:R,id:T,isOpen:Q};e.fireActionEvent(e.ACTIONS.DELETE,S);b("form.perc-template-pages-controls").submit();var O=jQuery.Event("click");O.deletedPageId=T;b(".resetPaging").trigger(O);var P=b.PercNavigationManager.getView();if(R=="page"&&P!=b.PercNavigationManager.VIEW_EDITOR){K(P)}}function K(P){var Q={templateId:memento.templateId,pageId:null};var O=$j.deparam.querystring();$j.PercNavigationManager.goToLocation(P,O.site,null,null,null,O.path,null,Q)}if(M.PathItem["type"]=="percPage"){if(M.PathItem["category"]=="LANDING_PAGE"){return}else{b.PercPageService.validateDeletePage(M.PathItem["id"],function(){var P=b.PercDirtyController.dirtyObjectType;var O={id:"perc-finder-delete-confirm",title:"Delete Page",question:q+"Page: "+M.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletepagedialog.warning@Confirm")+k,success:function(){b.PercViewReadyManager.setProcessingFlag();var Q=b.PercDirtyController.isDirty();t.confirm_if_dirty(function(){if(Q){t.save(P,D)}else{D()}},function(){},{title:I18N.message("perc.ui.deletepagedialog.title@Delete Page"),question:"Page: "+M.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["page",P]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};h.confirm_dialog(O)},J)}}else{if(M.PathItem["type"]=="Folder"){if(M.PathItem["category"]=="FOLDER"){function F(){if(b.PercNavigationManager.isAdmin()){b.PercPathService.deleteFolderSkipValidation(n.join("/"),n[n.length-1],n[1],function(O){A(O)})}else{b.PercPathService.deleteFolder(n.join("/"),n[n.length-1],n[1],A)}}if(M.PathItem.path.match("^/Sites/")||M.PathItem.path.match("^//Sites/")){b.PercRedirectHandler.createRedirect(M.PathItem.path,"","folder").fail(function(O){b.perc_utils.alert_dialog({title:"Redirect creation error",content:O,okCallBack:function(){F()}})}).done(function(){F()})}else{F()}}else{return}}else{if(M.PathItem["type"]=="FSFolder"){var B=b.perc_utils.encodePathArray(n);b.PercPathService.deleteFSFolder(B.join("/"),n[n.length-1],A)}else{if(M.PathItem["type"]=="FSFile"){var B="";var N=M.PathItem["path"].split("/");N=N.slice(3,N.length-1);b.each(N,function(O,P){B=B+"/"+P});B=b.perc_utils.encodeURL(B);b.PercWebResourcesService.deleteFile(B,n[n.length-1],A)}else{b.PercAssetService.validateDeleteAsset(M.PathItem["id"],function(){var P=b.PercDirtyController.dirtyObjectType;var O={id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:q+I18N.message("perc.ui.deleteassetdialog.tag@Asset")+": "+M.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deleteassetdialog.warning@Confirm")+"<br/><br/>"+I18N.message("perc.ui.common.question@Continue")+k,success:function(){var Q=b.PercDirtyController.isDirty();t.confirm_if_dirty(function(){if(Q){t.save(P,H)}else{H()}},function(){},{title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:"Asset: "+M.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["asset",P]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};h.confirm_dialog(O)},L)}}}}},h.show_error)}function A(C){setTimeout(function(){z.refresh()},200);var B={type:"folder"};e.fireActionEvent(e.ACTIONS.DELETE,B)}function j(B){n=B;b.perc_pathmanager.open_path(h.acop(B),false,function(D){var F=D.PathItem.type;var C=D.PathItem.category;var E=(typeof(C)!="undefined")&&(C=="LANDING_PAGE"||C=="SECTION_FOLDER"||C=="SYSTEM");if(F=="Folder"&&D.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){E=true}else{if((C=="ASSET"||C=="PAGE")&&D.PathItem.accessLevel==b.PercFolderHelper().PERMISSION_READ){E=true}}if((F=="FSFolder"||F=="FSFile")&&n.length>=5&&D.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){E=false}if(!E&&n.length>2){if(F=="site"){b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-disabled").addClass("ui-enabled").unbind().click(y)}}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}},function(C){var D=b.PercServiceUtils.extractDefaultErrorMessage(C);b.perc_utils.alert_dialog({title:"Error",content:D})})}z.addPathChangedListener(j);return f}})(jQuery);(function(b){b.perc_build_preview_button=function(j,h){var e=b("<a id='perc-finder-preview' class='perc-font-icon icon-eye-open' href='#' title='Launch Preview'></a>").perc_button().click(function(q){n()});function n(){if(b("#perc-finder-listview .perc-datatable-row-highlighted").size()>0){var t=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(t.category=="LANDING_PAGE"||t.category=="PAGE"){j.launchPagePreview(t.id)}else{if(t.category=="ASSET"){j.launchAssetPreview(t.id)}}}else{var x=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");if(x.size()>0){j.launchPagePreview(x.data("spec").id)}else{if(q.size()>0){j.launchAssetPreview(q.data("spec").id)}}}}function k(z){var t=b(".mcol-opened.perc-listing-type-percPage");var q=b(".mcol-opened.perc-listing-category-ASSET");var x=b("#perc-finder-listview .perc-datatable-row-highlighted");if(z[1]=="Sites"&&z.length<4){f(false)}else{if(x.size()>0){listSelectedRowData=x.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"||listSelectedRowData.category=="ASSET"){f(true)}else{f(false)}}else{if(t.size()>0){var y=t.data("spec").path.split("/");if(y.length==z.length&&b(y).last()[0]==b(z).last()[0]){f(true)}else{f(false)}}else{if(q.size()>0){var y=q.data("spec").path.split("/");if(y.length==z.length&&b(y).last()[0]==b(z).last()[0]){f(true)}else{f(false)}}else{f(false)}}}}}function f(q){if(q){b("#perc-finder-preview").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{b("#perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}j.addPathChangedListener(k);return e}})(jQuery);(function(b){var f={height:200,minWidth:952,minHeight:100,get_max_height:function h(){return b(window).innerHeight()-150}};b.perc_finder=function(){if(b.perc_finderInstance==null){b.perc_finderInstance=e()}return b.perc_finderInstance};function e(){b("body").append('<div id="perc-wide_scroll_div_one" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div id="wide_scroll_div_two" style="height:100px;width:100%"></div></div>');var Z=b("#perc-wide_scroll_div_one").width()-b("#wide_scroll_div_two").innerWidth();b("#perc-wide_scroll_div_one").remove();var ad="perc-finder-listing-";var al=100;var Q=true,y=false,ai="perc-finder-expand-state",G=G(),au=E(G),Y=b.perc_utils,aD=[],D=null;actionListeners=[],openListeners=[],_finderPathIdArray={},path_changed=function(aP){aD=aP},finderOpenInProgress=false,lastClickPath=null,dragDelay=(b.PercNavigationManager.isAutoTest()?0:250),actions={DELETE:"delete",FINDER_OPEN_START:"open_start",FINDER_OPEN_END:"open_end"},isLibMode=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";b.perc_utils.preLoadImages("/cm/images/images/loading.gif");function ax(aR){aR.preventDefault();var aS,aQ,aP,aT;aP=b(this).parents(".perc-finder-goto-or-search");aT=aP.find("input.perc-finder-goto-or-search:first");aS=aT.val();aQ=/^\//.test(aS);if(aS){if(aQ){b("#perc-finder-go-action").trigger("click")}else{b("#perc-finder-item-search").val(aS);b("#perc-finder-search-submit").trigger("click")}}return false}b("body").on("click",".perc-action-goto-or-search",ax);b.perc_filterField(b("#mcol-path-summary"),b.perc_textFilters.PATH);b("#mcol-path-summary").bind("keyup",function(aP){if(aP.keyCode==13){b("#mcol-path-summary").blur();ax.apply(this,[aP]);b("#mcol-path-summary").focus();aP.preventDefault();aP.stopPropagation()}if(aP.keyCode==27||aP.keyCode==9){b("#mcol-path-summary").val(L().join("/")).blur();b("#perc-finder-item-search").blur();aP.preventDefault();aP.stopPropagation()}aq(false)});b(document).mousedown(function(aP){if(aP.target.id!="perc-finder-go-action"&&aP.target.id!="mcol-path-summary"){b("#mcol-path-summary").blur();if(aP.target.id!="perc-finder-search-submit"&&aP.target.id!="perc-finder-listing-Search"&&b(aP.target).parents(".perc-datatable-row").length>0){b("#mcol-path-summary").val(L().join("/"))}}if(aP.target.id!="perc-finder-item-search"){b("#perc-finder-item-search").blur()}aq(false)});b("#perc-finder-go-action").click(function(){var aP=true;am(aP)});b(".perc-finder-outer").hover(function x(){b(this).removeClass("ui-disabled")},function af(){b(this).addClass("ui-disabled")});function aM(aQ){var aP=aQ.split("/");for(i=0;i<aP.length;i++){if(aP[i]==".."){if(i-1>=0){aP.splice(i-1,2);i=i-2}else{aP.splice(i,1);i--}}if(aP[1]=="."){aP.splice(i,1);i--}}return aP.join("/")}function am(aR){b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");b("#perc-finder-item-name").removeClass("mcol-opened");var aQ=b.trim(b("#mcol-path-summary").val());var aP=L().join("/");aQ=aQ.replace(/\/(\/)+/g,"/");aQ=aM(aQ);aQ=(aQ.charAt(0)!="/")?"/"+aQ:aQ;aQ=(aQ=="/"||aQ=="")?"/"+L()[1]:aQ;if(aQ==aP&&aR==true&&(b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_SEARCH_RESULTS&&b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_RESULT)){return}else{b.PercPathService.validatePath(aQ,function(aT,aS){if(aT==b.PercServiceUtils.STATUS_SUCCESS){b("#mcol-path-summary").val(aS);if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var aV=$j.PercComponentWrapper("perc-action-finder-go-clicked",["perc-ui-component-finder"]);var aU=$j.PercViewReadyManager.setWrapper(aV);if(!aU){if(!aU){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aa(aS.split("/"),function(){})}else{aq(true,aS)}})}}function aK(aP,aR,aS){var aQ=aR;if(b.perc_utils.isPathUnderDesign(aR)){aQ=b.perc_utils.encodePathArray(aR)}b.PercPathService.validatePath(aQ.join("/"),function(aU,aT){if(aU==b.PercServiceUtils.STATUS_SUCCESS){aS(aP)}else{b.perc_utils.alert_dialog({title:"Error",content:"Path not found: "+aR.join("/")});aC()}})}function aq(aP,aR){var aQ=b(".perc-finder-message");if(aP){aQ.empty().append('<i class="icon-bell"></i>');b('<label class="perc-finder-error"></label>').text(aR).appendTo(aQ);aQ.fadeIn()}else{aQ.fadeOut(function(){b(this).empty()})}fixIframeHeight();fixHeight()}function H(){return/collapsed/.test(b.cookie(ai))}function U(){return(""+b.cookie(ai)).replace(/[^0-9.]/g,"")}function aI(aP){if(!isLibMode&&U()!==aP){var aQ=H()?"collapsed":"expanded";b.cookie(ai,aQ+aP)}}function ap(aR){if(!isLibMode){var aP,aQ;aP=U();aQ=aR?"expanded":"collapsed";b.cookie(ai,aQ+aP)}}function aB(){fixBottomHeight();fixIframeHeight();fixHeight();if(b("#perc_site_map").length>0){b("#perc_site_map").perc_site_map("layoutAll")}}function ao(aS){var aT,aR,aP=b(".perc-finder-body");if(b(".perc-finder-body").is(":visible")===aS){return}aT=b("#perc-finder-expander");aR=aT.parents(".perc-finder-outer");ap(aS);if(aS){aR.removeAttr("collapsed");aP.slideDown(aB);aT.removeClass("icon-plus-sign").addClass("icon-minus-sign")}else{aR.attr("collapsed",true);aP.slideUp(aB);aT.removeClass("icon-minus-sign").addClass("icon-plus-sign")}var aU=b("#frame");var aV=b(".perc-main");var aQ=b("#bottom")}function ar(){ao(!b(".perc-finder-body").is(":visible"))}b("#perc-finder-expander").click(ar);function k(aQ,aP){aQ=parseInt(aQ,10);return isNaN(aQ)?aP:aQ}var aO=(function(){var aQ,aW,aX;function aT(){b(".perc-finder").addClass("ui-resizable-resizing");aQ=b(".perc-finder .ui-resizable");aW=k(b(".perc-pagingbar-finder").outerHeight(),0)}function aY(){aU()}function aP(aZ){aB();b(this).css("width","auto");if(aZ){aI(aX)}b(".perc-finder").removeClass("ui-resizable-resizing")}function aS(aZ){return aZ&&aZ.scrollWidth>aZ.clientWidth?Z:0}function aU(){var aZ=b(".perc-finder")[0];aX=b(".perc-finder-body").height();aQ.css("height",aX-aS(aZ)-aW)}function aR(aZ){if(isLibMode){aZ=f.get_max_height()-100}aZ=k(aZ,b(".perc-finder-body").height());if(aZ!==aX){aX=Math.max(aZ,f.minHeight);aX=Math.min(aZ,f.get_max_height());b(".perc-finder-body").css("height",aX);aI(aX);b(".perc-finder").trigger("resize")}aT();aU();aP()}b(".perc-finder-body").resizable({handles:"s",minHeight:f.minHeight,maxHeight:f.get_max_height(),start:aT,resize:aY,stop:aP});b(window).resize(function aV(){b(".perc-finder-body").resizable("option","maxHeight",f.get_max_height())});aR(k(U(),f.height));return aR});var aj=b("[view=PERC_SITE]").length||!H();if(isLibMode){aj=true}ao(aj);return{on:function(){b(".perc-finder-body").on.apply(b(".perc-finder-body"),arguments)},ACTIONS:actions,elem:au,open:aa,search:M,addPathChangedListener:S,executePathChangedListeners:az,finderOpenInProgress:finderOpenInProgress,update_finder_height:aO,goToNewPath:am,refresh:aC,idFromItem:aE,addActionListener:I,removeActionListener:t,fireActionEvent:q,addOpenListener:R,removeOpenListener:C,getCurrentPath:L,getPathItemByPath:aN,getPathItemById:W,getParentPathItemByPath:av,launchPagePreview:ah,launchPagePreviewByPath:aF,launchAssetPreview:A,insertAfter:aA,maxResults:al,flagChangeView:Q,onDragStart:B,onDragStop:T,scrollIntoView:aL,setStateButtonsDesignNode:J,getCurrentItem:aG,setCurrentItem:an};function aG(){return D}function an(aP){return D=aP}function ay(aP,aQ){_finderPathIdArray[aP]=aQ}function aE(aP){var aQ=typeof(aP.id)=="undefined"?aP.path.split("/")[1]:aP.id;return ad+aQ}function aC(aP){b(".mcol-opened").each(function(){b(this).removeClass("mcol-opened")});var aR=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR&&(aR==null||aR.wrapperName!="perc-action-finder-refresh")){var aS=[];aS.push("perc-ui-component-finder");var aT=$j.PercComponentWrapper("perc-action-finder-refresh",aS);var aQ=$j.PercViewReadyManager.setWrapper(aT);if(!aQ){if(!aQ){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aa(aD,aP)}function L(){return aD.slice(0)}function M(aQ){ab(G);aJ(G).filter(".mcol-opened").removeClass(".mcol-opened");var aP=aA(G);b.each(aQ,function(){N(aP,O(this,j(aP)))})}function j(aP){return function(aR,aS){var aQ=Y.acop(aS);aQ.pop();F(aR,aP,[aR.data("name")],aQ,function(){})}}function at(aP){finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);aD=["","Sites"];aC(function(){})}function aa(aR,aP){if(finderOpenInProgress){return}finderOpenInProgress=true;q(actions.FINDER_OPEN_START,null);var aQ=P([""]);ae(G,aQ,aR.slice(1),[""],aP)}function ae(aS,aP,aU,aQ,aR){if(aU[aU.length-1]===""){aU.pop()}if(aU.length>0){aS.data("child",aU[0])}if(aQ.length>1&&aQ[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){J(true)}else{J(false)}b(".perc-finder-panel-loading").remove();X(aS).append('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>');aP(aT,aS);function aT(aV,aY){if(aY){aS.find(".mcol-direc-wrapper").empty().addClass("mcol-direc-wrapper-last").append(aY)}else{ag(aS,aV)}if(aU.length==0){$j("#mcol-path-summary").val(aQ.join("/"));finderOpenInProgress=false;q(actions.FINDER_OPEN_END,null);path_changed(aQ);ab(aS);aJ(aS).filter(".mcol-opened").removeClass("mcol-opened");var aX=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aX!=null){aX.handleComponentProgress("perc-ui-component-finder","complete")}if(aR){aR()}}else{var aW=aJ(aS).filter(function(){if(typeof(b(this).data("name"))!="undefined"&&typeof(aU[0])!="undefined"){return b(this).data("name")==aU[0]}return false});b.PercQueuePostAJAX(function(){setTimeout(function(){F(aW,aS,aU,aQ,aR)},150)})}aO();var aX=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aX!=null){aX.handleComponentProgress("perc-ui-component-finder","processing")}}}function z(){var aP=b(this).parents("td");var aQ=aP.data("startIndex")-al;aP.data("startIndex",aQ);K(aP,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function aw(){var aP=b(this).parents("td");var aQ=aP.data("startIndex")+al;aP.data("startIndex",aQ);K(aP,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function K(aQ,aR){var aS=aQ.data("path");var aT=aQ.data("startIndex");var aP=b.perc_utils.encodeURL(aS.join("/"))+"/?startIndex="+aT+"&maxResults="+al;b.perc_pathmanager.open_path(aP,true,aU,at,true);function aU(aW){var aV={};b.each(b.perc_utils.convertCXFArray(aW.PagedItemList["childrenInPage"]),function(){aV[Y.extract_path_end(this.path)+"_item"]=this});aQ.data("totalResult",aW.PagedItemList["childrenCount"]);aQ.data("startIndex",aW.PagedItemList["startIndex"]);ag(aQ,aV);if(aR){aQ.find(".mcol-direc-wrapper").attr({scrollTop:aQ.find(".mcol-direc-wrapper").attr("scrollHeight")})}}}function V(aQ,aP){var aU=aQ.data("startIndex");var aR=aQ.data("totalResult");var aS="";if(al>=aR){var aW=aR-(aU-1);aS=aW+" item"+(aW!=1?"s":"")}else{var aT=((aU-1+al>aR)?aR:(aU-1+al));aS=aU+" - "+aT+" of "+aR}var aV=b('<div class="perc-paging-finder"/>').data("name",aP).append(b('<span class="perc-paging-text" />').text(aS)).append(b('<div class="perc-paging-finder-navigator" />').append(b('<a class="perc-paging-finder-previous" />').text("<<").click(z)).append(b('<a class="perc-paging-finder-next"/>').text(">>").click(aw))).addClass(aP);aV=b("<div/>").append(aV).append("<div style='clear:both'/>");if((aR-(aU-1+al))>0){aV.find(".perc-paging-finder-next").removeClass("perc-hide-navigator")}else{aV.find(".perc-paging-finder-next").addClass("perc-hide-navigator")}if(aU>al){aV.find(".perc-paging-finder-previous").removeClass("perc-hide-navigator")}else{aV.find(".perc-paging-finder-previous").addClass("perc-hide-navigator")}return aV}function ag(aQ,aR){aQ.find(".mcol-direc-wrapper").removeClass("mcol-direc-wrapper-last");var aS={};b.each(aJ(aQ),function(){aS[b(this).data("name")+"_item"]=b(this)});var aP=Y.odiff(aR,aS);b.each(Y.odiff(aS,aR),function(){if(this.is(".mcol-opened")){ab(aQ)}if(!y&&!this.hasClass("ui-resizable-e")&&!this.parent().hasClass("perc-view-column-fixed")){this.remove()}});if(aQ.data("path").join("/")!=""&&aQ.find(".perc-paging-finder-top").size()==0){X(aQ).prepend(V(aQ,"perc-paging-finder-top"))}b.each(aP,function(){if(!isLibMode||this.path!="/Search/"){N(aQ,O(this,j(aQ)))}})}function F(aU,aS,aV,aQ,aR){if(aU.length==0){path_changed(aQ);finderOpenInProgress=false;$j("#mcol-path-summary").val(aQ.join("/"));var aT=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aT!=null){aT.handleComponentProgress("perc-ui-component-finder","complete")}}else{if(aU.is(".mcol-opened")){aQ.push(aV.shift());aL(aU);if(typeof(aU.data("spec"))!="undefined"){D=aU.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aU.addClass("perc_last_selected")}ae(aS.next(),aU.data("loader"),aV,aQ,aR)}else{ab(aS);aJ(aS).filter(".mcol-opened").removeClass("mcol-opened");aU.addClass("mcol-opened");aL(aU);if(typeof(aU.data("spec"))!="undefined"){D=aU.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aU.addClass("perc_last_selected")}var aP=aA(aS);aQ.push(aV.shift());ae(aP,aU.data("loader"),aV,aQ,aR)}}aO()}function O(a4,aV){var aW=10;var a5=(a4.type=="Folder")?"a":"z";var aZ=Y.extract_path(a4.path);var a2=Y.choose_icon(a4.type,a4.icon,aZ);var a1=b("<a />").addClass("mcol-listing").attr("alt",a4.name).attr("id",aE(a4)).append(b("<img src='"+a2+"' style='float:left'></img>")).append(b("<div unselectable='on' class='perc-finder-item-name' style='cursor: default; text-overflow : ellipsis;overflow : hidden'>"+a4.name+"</div>")).attr("title",a4.name).data("tag",a5+(a4.name+"").toLowerCase()).data("name",aZ[aZ.length-1]).data("spec",a4);ay(a4.path,a4.id);if(a4.type){a1.addClass("perc-listing-type-"+a4.type)}if(a4.category){a1.addClass("perc-listing-category-"+a4.category)}if(a4.leaf){a1.data("loader",function(a6){aH(a4,function(a7){a6(null,a7)})})}else{a1.data("loader",P(Y.acop(aZ)))}a1.singleclick(a0);a1.dblclick(function(a6){aK(a6,aZ,function(){if(a4.type=="Folder"){a0(a6)}else{ak(a4)}})});if(aT(a4)){a1.draggable({helper:function(){return b(this).clone().css(("overflow","visible"),("width",this.offsetWidth)[0])},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:B,stop:T,delay:dragDelay})}if(aS(a4)){a1.droppable({tolerance:"pointer",accept:aR,over:aU,out:aQ,drop:aP})}var a3=1,aX=500;function aU(a8,ba){var a7=a3;var a6=ba.draggable.data("spec").path;var bb=a4.path;var a9=a4.type;if(!aY(a6,bb,ba.draggable.data("spec").type,a9)){return}if(a4.accessLevel!=b.PercFolderHelper().PERMISSION_READ&&ba.draggable.data("spec").accessLevel!=b.PercFolderHelper().PERMISSION_READ){b(this).addClass("perc-finder-item-over")}if(b(this).hasClass("perc-listing-type-site")){return}setTimeout(function(){if(a3==a7){a0()}},aX)}function aQ(a6,a7){b(this).removeClass("perc-finder-item-over");a3++}function aP(a7,a9){var a6=a9.draggable.data("spec").path;var ba=a9.draggable.data("spec").type;var bb=a4.path;var a8=a4.type;b(this).removeClass("perc-finder-item-over");aQ();if(a4.accessLevel==b.PercFolderHelper().PERMISSION_READ||a9.draggable.data("spec").accessLevel==b.PercFolderHelper().PERMISSION_READ){return false}if(!aY(a6,bb,ba,a8)){return false}b.PercPathService.moveItem(a6,bb,function(bc,bg){if(bc==b.PercServiceUtils.STATUS_SUCCESS){var be=null;if(ba=="percPage"){be="page"}else{if(ba=="Folder"&&bb.indexOf("/Sites")==0){be="folder"}}if(be){b.PercRedirectHandler.createRedirect(a6,bb+a9.draggable.data("spec").name,be).fail(function(bh){b.perc_utils.alert_dialog({title:"Redirect creation error",content:bh,okCallBack:function(){aC()}})}).done(function(){aC()})}else{aC()}}else{var bf=bg;if(bg.indexOf("item with the same name already exists in the folder")!=-1){var bd="asset";if(ba=="percPage"){bd="page"}else{if(ba=="Folder"){bd="folder"}}bf=I18N.message("perc.ui.finder.move.error@Duplicate",[bd,a9.draggable.data("spec").name,bb])}b.perc_utils.alert_dialog({title:"Error",content:bf})}})}function aY(a8,bd,a7,bb){if(bb&&(bb!="Folder"&&bb!="site")){return false}var bc=(bd.match("/$")=="/")?bd.substr(0,bd.length-1):bd;if(bc==(a8.substring(0,a8.lastIndexOf("/")))){return false}if(a7=="Folder"){var a9=a8.substr(1).split("/");if(a9[a9.length-1]==""){a9.pop()}var bc=bd.substr(1).split("/");if(bc[bc.length-1]==""){bc.pop()}var a6=true;for(var ba=0;ba<a9.length;ba++){if(a9[ba]!=bc[ba]){a6=false;break}}if(a6){return false}}return true}function aT(a8){var a7=a8.type;var a6=a8.category;if(!a7){return false}if(a7=="site"){return false}if(a7=="percPage"&&a6=="LANDING_PAGE"){return false}if(a7=="Folder"&&a6=="SECTION_FOLDER"){return false}if(a7=="Folder"&&a8.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){return false}if(a7=="FSFile"){return false}if(a7=="FSFolder"){return false}return true}function aS(a8){var a7=a8.type;var a6=a8.category;if(!a7&&a8.path==b.perc_paths.ASSETS_ROOT+"/"){return true}if(!a7){return false}if(a7=="percPage"){return false}return true}function aR(a9){var a6=a9&&a9.data("spec")&&a9.data("spec").path;if(!a6){return false}var a8=a4.path;if(a4.type&&a4.type=="site"){var bb=a6.substr(1).split("/")[1];var ba=a8.substr(1).split("/")[1];if(bb!=ba){return false}}if(a9.data("spec").category&&a9.data("spec").category=="ASSET"){if(!a4.type||a4.type!="Folder"){return false}}if(a8.length>=a6.length&&b.grep(a6,function(be,bd){return be==a8[bd]}).length==0){return false}var bc=Y.extract_path(a6)[1];var a7=Y.extract_path(a8)[1];if(bc!=a7){return false}return true}return a1;function a0(a9){if(a9.currentTarget.id=="perc-finder-listing-Search"){b.Percussion.setView("search");b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon_on.png");return}b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon.png");b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");var bb=b(this);var a8=bb.children(".perc-finder-item-name");var a7=a8.find("#perc_finder_inline_field_edit");var a6=a7.length;if(a6==0){var bd=b("#perc_finder_inline_field_edit");if(bd.length>0){lastClickPath=aZ;bd.blur()}bb.focus();if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var bc=$j.PercComponentWrapper("perc-action-finder-item-clicked",["perc-ui-component-finder"]);var ba=$j.PercViewReadyManager.setWrapper(bc);if(!ba){if(!ba){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aV(a1,Y.acop(aZ))}}}function B(){var aQ=b(".perc-finder-table");var aP={};aP.left=aQ.offset().left;aP.top=aQ.offset().top;aP.width=aQ.width();aP.height=aQ.height();y=true;b("body").css("overflow","visible").bind("mousemove.finderDrag",aP,function(aR){var aT=aR.data.left+aR.data.width;var aS=aR.data.top+aR.data.height;var aV=(aR.pageX>=aR.data.left)&&(aR.pageX<=aT);var aU=(aR.pageY>=aR.data.top)&&(aR.pageY<=aS);n(aU&&aV)})}function T(){y=false;b("body").css("overflow","hidden").unbind("mousemove.finderDrag");n(true)}function aH(aP,aR){var aQ=" ";b.perc_pathmanager.getItemProperties(aP.path,function(aV,aT){if(aV){var aX=null;var a1=null;var aW=null;var a2=aP.category=="ASSET"||aP.category=="RESOURCE";if(a2){aX="Asset";a1="Type";aW="<a href='#' class='perc-finder-preview-link' id='perc-asset-preview-link' title='Click for preview'>"}else{aX="Page Link";a1="Template";aW="<a href='#' class='perc-finder-preview-link' id='perc-page-preview-link' title='Click for preview'>"}var a0=aT.lastPublishedDate;if(a0==undefined||a0==null||a0==""){a0=""}else{var aY=b.perc_utils.splitDateTime(a0);a0='<div style="padding:9px 0 0 10px;">Last Published: <span></span></div><div style="padding:3px 0 0 10px;"><span "perc_finder_details_lpdate">'+aY.date+" "+aY.time+"</span></div>"}var aZ=b.perc_utils.splitDateTime(aT.lastModifiedDate);if(aP.path.split("/")[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){var aU=b.perc_utils.formatFileSize(aT.size);aQ='<div style="padding:10px 0 0 10px;">Properties: <span id="perc_finder_details_name">'+aT.name+'</span></div><div style="padding:10px 0 0 10px;">Size: <span id="perc_finder_details_size">'+aU+'</span></div><div style="padding:10px 0 0 10px;">Last Modified: <span></span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aZ.date+" "+aZ.time+"</span></div>"}else{aQ='<div style="padding:9px 0 0 10px;">'+aX+': <span id="perc_finder_details_name">'+aW+aT.name+'</a></span></div><div style="padding:9px 0 0 10px;">'+a1+': <span id="perc_finder_details_type">'+aT.type+'</span></div><div style="padding:9px 0 0 10px; width:170px;">Status: <div id="perc_finder_details_status" status="'+aT.status+'" workflow="'+aT.workflow+'" class="perc-ellipsis" title="'+aT.status+" ("+aT.workflow+')">'+aT.status+" ("+aT.workflow+')</div></div><div style="padding:9px 0 0 10px;">Last Modified: <span id="perc_finder_details_lmuser">'+aT.lastModifier+'</span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aZ.date+" "+aZ.time+"</span></div>"+a0}var aS=b(aQ);if(a2){aS.find("#perc-asset-preview-link").each(function(){b(this).unbind().bind("click",function(){A(aP.id)})})}else{aS.find("#perc-page-preview-link").each(function(){b(this).unbind().bind("click",function(){ah(aP.id)})})}aR(aS)}else{b.perc_utils.alert_dialog({title:"Error",content:aT});aC()}var a3=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(a3!=null){a3.handleComponentProgress("perc-ui-component-finder","complete")}})}function A(aR,aQ){if(aQ){var aP=aR.split("-");aP[0]=aQ;aR=aP.join("-")}b.PercAssetService.getAssetViewForAssetId(aR,function(aT,aS){if(aT==b.PercServiceUtils.STATUS_SUCCESS){var aU=window.open(aS,"percAssetPreviewWindow"+aR.replace(/\-/g,""));b(aU.document).ready(function(){if(aQ){window.setTimeout(function(){aU.document.title=aU.document.title+" (Revision "+aQ+")"},1000)}aU.focus()})}else{b.perc_utils.alert_dialog({title:"Error",content:aS})}})}function ah(aQ,aP){b.PercPathService.getPathItemById(aQ,function(aS,aR,aV){if(aS==b.PercServiceUtils.STATUS_SUCCESS){var aU=aR.PathItem.folderPaths.slice(1)+"/"+aR.PathItem.name;if(aP){aU+="?sys_revision="+aP+"&percmobilepreview=true"}else{aU+="?percmobilepreview=true"}var aT=window.open(aU,"percPagePreviewWindow"+aQ.replace(/\-/g,""));b(aT.document).ready(function(){if(aP){window.setTimeout(function(){aT.document.title=aT.document.title+" (Revision "+aP+")"},1000)}aT.focus()})}else{b.unblockUI();var aW="";if(aV=="cannot.find.item"){aW=I18N.message("perc.ui.common.error@Preview Content Deleted")}else{aW=aR}b.perc_utils.alert_dialog({title:"Error",content:aW})}})}function aF(aP,aR,aQ){b.PercPathService.getPathItemForPath(aP,function(aT,aS){if(aT==b.PercServiceUtils.STATUS_SUCCESS){var aV=aS.PathItem.folderPaths.slice(1)+"/"+aS.PathItem.name;if(aQ){aV+="?sys_revision="+aQ+"&percmobilepreview=true"}else{aV+="?percmobilepreview=true"}var aU=window.open(aV,"percPagePreviewWindow"+aR.replace(/\-/g,""));b(aU.document).ready(function(){if(aQ){window.setTimeout(function(){aU.document.title=aU.document.title+" (Revision "+aQ+")"},1000)}aU.focus()})}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:aS})}})}function P(aP){return function(aR,aS){var aQ=b.perc_utils.encodeURL(aP.join("/"))+"/?startIndex=1&maxResults="+al;if(typeof(aS.data("child"))!="undefined"&&aS.data("child")!=""){aQ+="&child="+b.perc_utils.encodeURL(aS.data("child"));aS.data("child","")}b.perc_pathmanager.open_path(aQ,true,aT,at,true);function aT(aV){var aU={};b.each(b.perc_utils.convertCXFArray(aV.PagedItemList["childrenInPage"]),function(){aU[Y.extract_path_end(this.path)+"_item"]=this});aS.data("path",aP);aS.data("startIndex",aV.PagedItemList["startIndex"]);aS.data("totalResult",aV.PagedItemList["childrenCount"]);aR(aU)}}}function N(aP,aQ){X(aP).append(aQ)}function aL(aS){var aQ=aS.closest(".mcol-direc-wrapper");var aR=aS.position().top+aS.outerHeight();var aP=aQ.closest("td").height();if(aR<0||aR>aP){aQ.animate({scrollTop:aR-aP},200)}}function J(aP){if(aP){b.percFinderButtons().disableAllButtonsButSite()}}function aA(aQ){var aP=ac();b("#perc-finder-table-top").append(aP);return aP}function ab(aP){if(y){aP.nextAll().hide()}else{aP.nextAll().remove()}}function ac(aQ){aQ=aQ!==false;var aV=b('<td tabindex="-1" class="mcol-direc" />');var aP=b('<div class="perc-resize ui-resizable" />');var aS=b('<div class="perc-resize-width mcol-direc-wrapper" />');function aU(aW,aX){aS.css("width",aP.width()-aS.siblings().outerWidth())}function aT(aW,aX){b(".perc-finder").addClass("ui-resizable-resizing")}function aR(aW,aX){b(".perc-finder").removeClass("ui-resizable-resizing")}if(aQ){aP.resizable({handles:"e",resize:aU,start:aT,stop:aR})}return aV.append(aP.append(aS))}function G(){var aP=false,aQ;aQ=ac(aP);aQ.find(".mcol-direc-wrapper").addClass("perc-view-column-fixed");aQ.find(".ui-resizable").append('<div class="ui-resizable-handle ui-resizable-e perc-resize-disabled" />');return aQ}function E(aP){var aQ=b("<div class='perc-finder-table'><table><tr id='perc-finder-table-top'></tr></table></div>");aQ.find("tr").append(aP);return aQ}function aJ(aP){return X(aP).children()}function X(aP){return aP.find(".mcol-direc-wrapper")}function n(aP){b(".mcol-listing").each(function(){b(this).droppable("option","disabled",!aP)});b("#perc-finder-listview table").droppable("option","disabled",!aP)}function aN(aS){if(!aS||typeof(aS)!="string"||aS.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}var aR=null;var aQ=null;b.each(_finderPathIdArray,function(aT,aU){if(aT==aS){aQ=aU}});if(!aQ){var aP="";if(aS[aS.length-1]!="/"){aP=aS+"/"}else{aP=aS.substring(0,aS.length-1)}b.each(_finderPathIdArray,function(aT,aU){if(aT==aP){aQ=aU}})}if(aQ){aR=W(aQ.toString())}return aR}function W(aP){if(!aP||typeof(aP)!="string"||aP.length<1){b.perc_utils.alert_dialog({title:"Error",content:"objectId must be a valid string"});return}var aQ=b("#"+ad+aP).data("spec");return aQ}function av(aP){if(!aP||typeof(aP)!="string"||aP.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}if(aP.charAt(aP.length-1)=="/"){aP=aP.substring(0,aP.length-1)}aP=aP.substring(0,aP.lastIndexOf("/"));return aN(aP)}function S(aP){(function(aQ){path_changed=function(aR){aQ(aR);aP(aR)}})(path_changed)}function az(aP){path_changed(aP)}function R(aP){if(b.inArray(aP,openListeners)==-1){openListeners.push(aP)}}function C(aR){if(b.inArray(aR,openListeners)>-1){var aP=openListeners.length;for(var aQ=0;aQ<aP;aQ++){if(openListeners[aQ]===aR){openListeners.splice(aQ,1);return}}}}function ak(aR){var aP=openListeners.length;for(var aQ=0;aQ<aP;aQ++){openListeners[aQ](aR)}}function I(aP){if(b.inArray(aP,actionListeners)==-1){actionListeners.push(aP)}}function t(aR){if(b.inArray(aR,actionListeners)>-1){var aP=actionListeners.length;for(var aQ=0;aQ<aP;aQ++){if(actionListeners[aQ]===aR){actionListeners.splice(aQ,1);return}}}}function q(aS,aR){var aP=actionListeners.length;for(var aQ=0;aQ<aP;aQ++){actionListeners[aQ](aS,typeof(aR)=="object"?aR:null)}}}b.perc_finderInstance=null})(jQuery);(function(b){b.percFinderButtons=function(){var f=b.PercDirtyController;var h={createButtons:k,disableAllButtonsButSite:n};return h;function n(){b(".perc-finder-menu #perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-actions-button").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-page").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-asset").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}function k(q,z){var y=b.perc_build_delete_page_button(q,z);var H=b('<div class="perc-finder-buttonbar"/>');H.append(y);var A=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";if(!A){var F=b.perc_build_new_page_button(q,z);H.append(F);var B=b.PercNewAssetDialog.init(q,z);H.append(B)}var x=b.perc_build_new_folder_button(q,z);H.append(x);if(!A){var D='<a id="perc-finder-new-site" class="perc-form ui-state-default perc-font-icon icon-sitemap" href="#" title="Click to create new Site"></a>';H.append(D)}var C=b.perc_build_preview_button(q,z);H.append(C);var G=b.perc_build_actions_button(q,z);H.append(G);b(".perc-finder-menu ").append(H);function t(I){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_DESIGN,I,null,null,null,b.perc_paths.SITES_ROOT+"/"+I,null,null)}$newSiteDialog=b.perc_createNewSiteDialog(t);b("#perc-finder-new-site").unbind("click").click(e);q.addPathChangedListener(j);var E={"delete":y,newPage:F,newFolder:x,newAsset:B,newSite:D,launchPreview:C,launchAction:G};return E}function e(){f.confirmIfDirty(function(){$newSiteDialog.perc_wizard("open");b(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.perc-dialog.perc-dialog-corner-all.ui-draggable").find("div").css("z-index","")})}function j(){if(!b.PercNavigationManager.isAdmin()){b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}}}})(jQuery);(function(b){b.perc_upload_theme_file_dialog={open:e};function e(f){var C=n();var t=window.location.protocol+"//"+window.location.host+"/cm";var y={};buttonSave={id:"perc-addItem-dialog-save"};buttonCancel={id:"perc-addItem-dialog-cancel",click:function(){x.remove()}};y.Save=buttonSave;y.Cancel=buttonCancel;var x=D();function D(){var E=b.perc_paths.WEBRESOURCESMGT_FILE_UPLOAD;var F='<div id=\'perc-design-file-upload\'><form id="perc-theme-file-upload-form" name="perc-theme-file-upload-form" enctype="multipart/form-data" method="post" action="'+E+'"><label for="upload-theme-file-attachment">File name:</label><br><input type="hidden" name="upload-theme-file-path" /><input type="file" size="50" name="upload-theme-file-attachment" /></form><div id="perc-theme-file-upload-response" style="display:none"></div></div>';var G=b(F).perc_dialog({title:I18N.message("perc.ui.uploadtheme.dialog.title@Upload File"),id:"perc-upload-theme-file-dialog",width:686,resizable:false,modal:true,closeOnEscape:true,percButtons:y,open:function(){q();b("#perc-theme-file-upload-form").ajaxForm({target:"#perc-theme-file-upload-response",success:k,error:h,iframe:true})}});return b(G)}function q(){var G=window.location.protocol+"//"+window.location.host+"/cm";var F=b("#perc-addItem-dialog-save");var H="url("+G+"/images/images/buttonSave.png)";var E="url("+G+"/images/images/buttonSaveOver.png)";F.css("background-image",H).hover(function(){b(this).css("background-image",E)},function(){b(this).css("background-image",H)}).unbind("click").click(j)}function j(){if(B()==false){return false}z();return false}function B(){var E=x.find("input:file");var F=x.find("label.perc_field_error");if(E.val()==""){if(F.length==0){E.after('<label class="perc_field_error" for="upload-theme-file-attachment" style="display: block;">'+I18N.message("perc.ui.uploadtheme.form.text@Please select a file.")+"</label>")}return false}else{F.remove();return true}}function z(){var F=x.find("input:file").val().replace(/.+[\\\/]/,"");F=b.perc_utils.encodeURL(F);var E=b.perc_utils.encodePathArray(C);b.PercWebResourcesService.validateFileUpload(E,F,function(H,G){if(H==b.PercServiceUtils.STATUS_SUCCESS){if(G.data==b.PercServiceUtils.STATUS_SUCCESS){A()}else{var I={id:"perc-design-file-upload-file-exist-warning",title:I18N.message("perc.ui.uploadtheme.dialog.title@Warning"),question:G.data,yes:"OK",success:A};b.perc_utils.confirm_dialog(I)}}else{var I={id:"perc-design-file-upload-file-exist-error",title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:b.PercServiceUtils.extractDefaultErrorMessage(G.request)};b.perc_utils.alert_dialog(I)}})}function A(){b.PercBlockUI();var F=x.find("input:file").val().replace(/.+[\\\/]/,"");F=b.perc_utils.encodeURL(F);var E=b.perc_utils.encodePathArray(C);x.find('input[name="upload-theme-file-path"]').val("/"+E.slice(3).join("/")+"/"+F);x.find("#perc-theme-file-upload-form").submit()}function k(){var E=b("#perc-theme-file-upload-response").text();if(E==""){b.unblockUI();x.remove();f.refresh(function(){})}else{var F={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:E};b.perc_utils.alert_dialog(F);b.unblockUI()}}function h(G,I,H){var E="There was an unknown error";if(I=="timeout"){E="The operation is talking too much time"}var F={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:E};b.perc_utils.alert_dialog(F);b.unblockUI()}function n(){var F=f.getCurrentPath();E=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(E==undefined){var E=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened").data("spec")}if(E!=undefined&&E.type=="FSFile"&&E.leaf){F.pop()}return F}}})(jQuery);(function(e){e.PercDeleteItemHelper={extractDeleteErrorMessage:b};function b(t,h,A){var j,z,q=false,n=e.PercServiceUtils.extractDefaultErrorMessage(t),B="perc.ui.delete"+A+"dialog.warning",f="perc_delete_"+A+"_force",k=t.responseText,x=k.match(/User: (.*) is editing the item. Failed to delete item./);if(x){j="perc-finder-delete-error-open";var D=A.charAt(0).toUpperCase();var E=A.substr(1);var C=D+E+": ";var y=x[1].split(" ");z=C+h+"<br/><br/>"+I18N.message(B+"@Open",[y[0]])}else{if(k.indexOf(A+".deleteNotAuthorized")>0){j="perc-finder-delete-auth";z=I18N.message(B+"@Not Authorized",[h])}else{if(k.indexOf(A+".deleteTemplates")>0){j="perc-finder-delete-templates";z=I18N.message(B+"@Templates",[h])}else{if(k.indexOf(A+".deleteApprovedPages")>0){j="perc-finder-delete-approved";z=I18N.message(B+"@Approved Pages",[h])+"<br/><br/><input type='checkbox' id='"+f+"' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message(B+"@Approved Pages Checkbox")+"</label>";q=true}else{if(n!=""){j="perc-finder-delete-error-open";z=n}else{j="perc-finder-delete-error-open";z=I18N.message(B+"@GenericText")}}}}}var F={dialogid:j,content:z,canForceDelete:q,chkBoxId:f};return F}})(jQuery);(function(b){fixIframeHeight=function(){b("#perc-widget-library").width(b("#tabs-3").width()-45);var j=b("#frame");if(j.length==0){return}var n=b(".perc-main");var f=b("#bottom");var k=f.position().top;n.height(k);var e,h;if(window.innerHeight){e=window.innerHeight;h=window.innerWidth}else{if(document.documentElement.clientHeight){e=document.documentElement.clientHeight-4;h=document.documentElement.clientWidth}}j.height(e-k);j.width(h)};fixTemplateHeight=function(){fixBottomHeight()};fixBottomHeight=function(){var k=b.PercNavigationManager.getView();var e;var h;if(k==b.PercNavigationManager.VIEW_DESIGN){e=b(".perc-templates-layout");h=e.position().top+47}else{if(k==b.PercNavigationManager.VIEW_WORKFLOW){e=b(".perc-whitebg");h=b("#tabs").position().top+90;b(".perc-finder-fix").css("padding-bottom",0)}else{if(k==b.PercNavigationManager.VIEW_PUBLISH){e=b(".perc-whitebg");if(b("#tabs").length){h=b("#tabs").position().top+90}else{if(b("#perc-pub-inline-help").length){h=b("#perc-pub-inline-help").position().top+90}}}else{if(k==b.PercNavigationManager.VIEW_DASHBOARD){e=b(".perc-body-background");h=b(".perc-body-background").position().top}else{return}}}}if(e.css("display")!="none"){var f,j;if(window.innerHeight){f=window.innerHeight;j=window.innerWidth}else{if(document.documentElement.clientHeight){f=document.documentElement.clientHeight-4;j=document.documentElement.clientWidth}}e.height(f-h)}};fixHeight=function(){var h=b.PercNavigationManager.getView();if(h==b.PercNavigationManager.VIEW_SITE_ARCH){var f=b(".perc-main");if(f.length>0){var e=f.height();b("#perc_sa_container").css("margin-top",e+3)}}b(".perc-finder").width("auto")}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(k){var e=16;var z=5;var q;var x;k.fn.PercDataTable=function(D){if(D.percVisibleColumns&&D.aoColumns){var K=[];k.each(D.percVisibleColumns,function(O,P){K.push(D.aoColumns[P])});D.aoColumns=K}for(var I=0;I<D.aoColumns.length;I++){var C=D.aoColumns[I];C.sSortDataType="perc-type-"+C.sType}D=k.extend(true,{},j,D);x=D;q=h(D);k(this).append(q);q.dataTable(D).data("config",D);if(D.percExpandParentFrameVertically){var L=q.parents(".dataTables_wrapper").outerHeight()+e;var B=q.parents(".dataTables_wrapper").outerWidth()+e;var M=f();var G=L;var J=D.additionalIframeHeight?D.additionalIframeHeight:0;if(D.iDisplayLength){var F=q.find("thead").height();var A=k(q.find("tbody tr")[0]).height();var H=k(".dataTables_paginate").height();var N=F+A*D.iDisplayLength+H+J;G=N}if(D.percStayBelow){var E=k(D.percStayBelow);G+=E.offset().top+E.outerHeight()+e}k(M).height(G+z)}return q};function y(){var B=k(this);var A=B.data("config");if(A&&A.percTableRedrawCallback){if(typeof(A.percTableRedrawCallback)==="object"){k.each(A.percTableRedrawCallback,function(C,D){this(B)})}else{if(typeof(A.percTableRedrawCallback)==="function"){A.percTableRedrawCallback(B)}}}setTimeout(function(){var D=B.parent().children(".dataTables_paginate.paging_full_numbers");D.find(".perc-datatable-paginator-pages-label").removeClass("paginate_button");var C=D.find("span span.paginate_button, span span.paginate_active");k.each(C,function(E,F){k(F).attr("perc-page",E+1)});if(!C||C.length<2){D.hide()}else{D.show()}D.css("position","absolute")},1)}function f(){var B=parent.document.getElementsByTagName("IFRAME");for(var A=0;A<B.length;A++){if(B[A].contentWindow==window){return B[A]}}}function t(J,D,C,M,I){if(x.bPaginate){var G=x;var E=G.iDisplayLength;var H=I.length;var F=Math.ceil(H/E);var B=Math.ceil(M/E);var A=B+" of "+F+(F==1?" Page":" Pages");if(F==0){A=""}var L=k(".perc-datatables-info");if(L.length>0){L.html(A)}else{k("<div class='datatables_info perc-datatables-info'>"+A+"</div>").appendTo("body")}var K=k(".perc-footer-bar");if(K.length==0){k("<div class='perc-footer-bar'>&nbsp;</div>").appendTo("body")}}}var j={percExpandParentFrameVertically:true,additionalIframeHeight:0,percColumnWidths:["*","123"],percRowDblclickCallback:k.PercOpenPage,showPreviewBtnOnHover:false,iDisplayLength:5,bFilter:false,bAutoWidth:false,bPaginate:true,bSort:true,sPaginationType:"full_numbers",bLengthChange:false,bInfo:true,fnDrawCallback:y,fnFooterCallback:t,oLanguage:{sZeroRecords:"No Pages Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};function h(B){var C=B.percData;var A=B.percHeaders;var G=k("<table class='perc-datatable' style='table-layout : fixed' cellpadding='0' cellspacing='0'>");var D=k("<tbody>");var F=B.aoColumns;k.each(C,function(O,J){var N=J;var L="";if(O==0){L="perc-first"}else{if(O==C.length-1){L="perc-last"}}var K=k("<tr class='perc-datatable-row perc-index-"+O+" "+L+"'>");if(N.rowData){K.data("percRowData",N.rowData)}if(B.percRowClickCallback){if(N.rowData){K.click(N.rowData,B.percRowClickCallback)}else{K.click(B.percRowClickCallback)}}if(B.showPreviewBtnOnHover){K.mouseover(function(){k(this).css("background-color","#CAF589");k(this).find(".perc-preview-col").show()}).mouseout(function(){k(this).css("background-color","white");k(this).find(".perc-preview-col").hide()})}if(B.percRowDblclickCallback){if(N.rowData){K.dblclick(N.rowData,B.percRowDblclickCallback)}else{K.dblclick(B.percRowDblclickCallback)}}var M=0;k.each(N.rowContent,function(aa,W){if(B.percVisibleColumns){if(k.inArray(aa,B.percVisibleColumns)==-1){return true}}var S=F[M++];var P=S.sType;var R="perc-type-"+P;var U=W;var Y="";if(aa==0){Y="perc-first"}else{if(aa==N.rowContent.length-1){Y="perc-last"}else{Y="perc-middle"}}var Q="";if(B.percHeaderClasses&&B.percHeaderClasses[aa]){Q="perc-"+B.percHeaderClasses[aa].replace(/ /g,"-").toLowerCase()}else{Q="perc-"+B.percHeaders[aa].replace(/ /g,"-").toLowerCase()}var T=k("<td class='"+R+" "+Q+" perc-datatable-column perc-ellipsis perc-index-"+aa+" perc-cell-"+aa+"-"+O+" "+Y+"' valign='top'>");if(typeof U=="object"){var X="";var Z="";var V;if(k.isArray(U)){k.each(U,function(ad,ab){if(!ab){ab="&nbsp;"}var ac=ab;var ae="";if(ad==0){ae="perc-first"}else{if(ad==U.length-1){ae="perc-last"}else{ae="perc-middle"}}if(typeof ac=="string"){X=ac}else{ac=k.extend({content:"",title:""},ac);X=ac.content;Z=ac.title}if(Z=="&nbsp;"){Z=""}V=k("<div style='width:100%' class='perc-datatable-columnrow perc-ellipsis perc-index-"+ad+" "+ae+"'>");if(ac.callback){var af=k("<span>").attr("title",Z).append(X);af.css("cursor","pointer").addClass("perc-callback");V.append(af);if(N.rowData){af.click(N.rowData,ac.callback)}else{af.click(ac.callback)}}else{V.attr("title",Z).append(X)}T.append(V)})}else{var Z=W.title;var X=W.content;var V=k("<div title='"+Z+"' class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(X);T.append(V)}}else{var V=k("<div class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(W);T.append(V)}K.append(T)});D.append(K)});G.append(D);if(A){var E=k("<thead>");var I=k("<tr class='perc-datatable-head-row'>");var H=0;k.each(A,function(R,P){if(B.percVisibleColumns){if(k.inArray(R,B.percVisibleColumns)==-1){return true}}var N=F[H++];var J=N.sType;var M="perc-type-"+J;var L="";if(B.percColumnWidths){if(R<B.percColumnWidths.length-1){L=B.percColumnWidths[R];if(L=="*"){L=""}}else{L=B.percColumnWidths[B.percColumnWidths.length-1]}}if(k.browser.msie||k.browser.webkit){L=parseInt(L)+20}L+="px";var K="";if(B.percHeaderClasses&&B.percHeaderClasses[R]){K="perc-"+B.percHeaderClasses[R].replace(/ /g,"-").toLowerCase()}else{K="perc-"+B.percHeaders[R].replace(/ /g,"-").toLowerCase()}var S="";if(R==0){S="perc-first"}else{if(R==A.length-1){S="perc-last"}else{S="perc-middle"}}var T=k("<th class='"+M+" "+K+" perc-datatable-head-column perc-index-"+R+" "+S+"'>").css("width",L);var Q=k("<span class='perc-sort' style='padding: 0px 10px 0px 0px; border-bottom:none'>&nbsp;</span>");if(typeof(B.sortFunction)!="undefined"&&!B.bSort){var U=B.percColNames[R];var O={};O.colName=U;O.sortFunction=B.sortFunction;T.click(O,n);if(k.browser.mozilla){T.css("MozUserSelect","none")}else{if(k.browser.msie){T.bind("selectstart",function(){return false})}}if(U==B.sortColumn){T.addClass("sorting_"+B.sortOrder)}}T.append(P);T.append(Q);I.append(T)});E.append(I);G.append(E)}if(B.bSort){b()}return G}function n(D){var C=k(this);var B=D.data.colName;var E=D.data.sortFunction;C.siblings().removeClass("sorting_asc").removeClass("sorting_desc");var A="asc";if(C.is(".sorting_asc")){C.removeClass("sorting_asc").addClass("sorting_desc");A="desc"}else{if(C.is(".sorting_desc")){C.removeClass("sorting_desc").addClass("sorting_asc")}else{C.addClass("sorting_asc")}}E(B,A)}function b(){k.fn.dataTableExt.afnSortData["perc-type-string"]=function(D,B){var A=[];var C;k("td:eq("+B+")",D.oApi._fnGetTrNodes(D)).each(function(){C=k(this).text();A.push(C)});return A};k.fn.dataTableExt.afnSortData["perc-type-numeric"]=k.fn.dataTableExt.afnSortData["perc-type-string"];k.fn.dataTableExt.afnSortData["perc-type-date"]=function(C,B){var A=[];k("td:eq("+B+")",C.oApi._fnGetTrNodes(C)).each(function(){var G=Array("","");var E=k(this).find("div");G[0]=k(E[0]).text();G[1]=k(E[1]).text();var F=G.join(" ");var D=new Date(F);A.push(D)});return A}}})(jQuery);(function(n){var j;var h;var f;var b=null;var k;var e;n.fn.PercFixedTableHeader=function(q){n(".perc-fixedtableheader").remove();e=q;k=n(this);var x=k.css("z-index");if(x=="auto"){x="1000"}if(n.browser.msie||n.browser.chrome||n.browser.safari){var t="-3px"}else{var t="1px"}b=n(this).clone(true);b.find("tbody").remove();b.css("position","relative").css("margin-bottom","-30px").css("top",t).css("left","1px").css("z-index",x+1).css("background","white").attr("cellpadding","0").addClass("perc-fixedtableheader");e.container.prepend(b);remove=q.remove;if(remove){remove.bind("click",function(){b.remove()})}j=q.resizable;if(j){j.bind("resize",function(){y()})}n(window).resize(function(){y()});function y(){b.css("width",k.css("width"))}y()}})(jQuery);(function(j){var f={};var b=function(){};j.fn.PercFinderListView=function(z,F){var L=j(this);var K;if(j.isFunction(z.folderDblClickCallback)){b=z.folderDblClickCallback}if(F.PagedItemList!=undefined){K=j.perc_utils.convertCXFArray(F.PagedItemList["childrenInPage"]);L.data("totalResult",F.PagedItemList["childrenCount"]);L.data("startIndex",F.PagedItemList["startIndex"])}else{K=j.perc_utils.convertCXFArray(F.PathItem)}var E=t(z.displayFormat,K);var G=E.percData;var H=E.percTypes;if(G.length>0){var y=[];for(s=0;s<H.length;s++){y.push("&nbsp;")}G.push({rowContent:y})}var D=E.percHeaders;var A=E.percColNames;var B=E.percWidths;var C=B;var J={percRowClickCallback:q,percRowDblclickCallback:k,percColumnWidths:C,percData:G,percHeaders:D,aoColumns:H};J.oLanguage={sZeroRecords:"No Files Found"};J.bPaginate=false;J.bInfo=false;J.bSort=false;J.oLanguage.sZeroRecords="No Items Found";J.sortFunction=z.sortFunction;J.sortColumn=z.sortColumn;J.sortOrder=z.sortOrder;J.percColNames=A;L.empty();L.PercDataTable(J);var I=j(L.find("table"));var x=j(I.parents(".mcol-direc"));I.PercFixedTableHeader({resizable:j(".perc-finder-body.ui-resizable"),remove:j("#perc-finder-choose-columnview"),container:x});if(typeof(z.callback)!="undefined"){z.callback(L)}h(I);j(".perc-datatable-row:last").unbind()};function h(y){var x=y.find(".perc-datatable-row");j.map(x,function(A,z){if(j(A).data("percRowData")!=undefined&&j(A).data("percRowData").category=="ASSET"){j(A).css("cursor","default");j(A).draggable({helper:function(){return j("<div />").html(j(this).find(".perc-datatable-columnrow").html()).addClass("dataTables_wrapper").css("color","white")},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:j.perc_finder().onDragStart,stop:j.perc_finder().onDragStop,delay:j.perc_finder().dragDelay})}});j(y).droppable({tolerance:"pointer",accept:false,over:function(){},out:function(){},drop:function(){}})}function q(y){j(".perc-datatable-row").removeClass("perc-datatable-row-highlighted");j(this).addClass("perc-datatable-row-highlighted");var x=j.merge([""],n(y));j("#mcol-path-summary").val(x.join("/"));if(typeof(y.data.id)!="undefined"){j.perc_finder().setCurrentItem(y.data)}j.perc_finder().flagChangeView=false;j.perc_finder().executePathChangedListeners(x);j.perc_finder().flagChangeView=true}function n(y){if(!y.data){return""}var x=y.data.folderPaths;if(y.data.type=="site"){x=y.data.folderPaths}else{x=y.data.folderPaths+"/"+y.data.name}return x.replace("Folders/$System$/","").substring(2,x.length).split("/")}function k(x){if(x.data.type=="Folder"||x.data.type=="FSFolder"){b("/"+n(x).join("/"))}else{j.PercNavigationManager.openPathItem("/"+n(x).join("/"))}}function t(W,E){var B=[];var P=[];var N=[];var M=[];var Q=[];var y=W.SimpleDisplayFormat.columns;var U,G;for(G=0;G<E.length;G++){var F=j.perc_utils.convertCXFArray(E[G].columnData.column);var J=e(F,"@name","$");var S=[];var T=j.perc_utils.choose_icon(E[G].type,E[G].icon,n({data:E[G]}));var O='<img style="float:left;" src="'+T+'" />';for(U=0;U<y.length;U++){var z=y[U];var H=z.name;var I=z.label;var X=J[H];if(z.type.toLowerCase()=="date"&&X!=null&&X!=""){var R=j.perc_utils.splitDateTime(X);var K=R.date+", "+R.time;X="<div title='"+K+"'>"+R.date+"</div>"}if(z.type.toLowerCase()=="number"&&X!=null&&X!=""){X='<div title = "'+X+' Bytes" style="text-align:right;">'+j.perc_utils.formatFileSize(X)+"</div>"}if(z.type.toLowerCase()=="text"&&X!=null&&X!=""&&U!=0){X='<span title = "'+X+'" style="font-weight: normal;">'+X+"</span>"}if(X==null||X==""){X="&nbsp;"}if(U==0&&O!=""){var D="",L,x=E[G];if(j.isArray(x.folderPaths)){L=x.folderPaths[0]}else{L=x.folderPaths}if(E[G].type=="site"){D=L.replace("/"+j.perc_paths.SITES_ROOT,"")}else{D=L.replace("/"+j.perc_paths.SITES_ROOT,"").replace("/"+j.perc_paths.DESIGN_ROOT,"").replace("//Folders/$System$"+j.perc_paths.ASSETS_ROOT,"")+"/"+E[G].name}X=O+'<span title = "'+D+'" style="padding-left:4px;">'+X+"</span>"}S.push(X)}var C={rowContent:S,rowData:E[G]};B.push(C)}for(U=0;U<y.length;U++){var z=y[U];N.push(z.name);M.push(z.label);Q.push((z.width==-1?"*":(j.browser.msie?z.width-20:z.width)));var A=z.type.toLowerCase();if(A=="text"){A="string"}if(U==0){A="html"}P.push({sType:A})}var V={percData:B,percColNames:N,percHeaders:M,percTypes:P,percWidths:Q};return V}function e(y,z,A){var E;var D={};for(E=0;E<y.length;E++){var C=y[E];var x=C[z];var B=C[A];D[x]=B}return D}})(jQuery);(function(e){e.fn.PercScrollingTemplateBrowser=function(f){var t=e("<div class='perc-scrollable'>");var q=e("<div class='perc-items'>");t.append(q);var h=e("<a style = 'margin:50px 0px' class='prevPage browse left' ></a>");var k=e("<a style = 'margin:50px 0px' class='nextPage browse right'></a>");var x=e("<div style='clear:both'>");e(this).append(h).append(t).append(k).append(x);if(f.width){t.width(f.width)}var j=null;if(f.widgetDefId){j=f.widgetDefId}var n=f.siteName;var z=f.hiddenFieldId?f.hiddenFieldId:"perc-select-template";var y=function(A,C){if(C.TemplateSummary.length==0){var B=e("<div class='perc-empty'>No Templates Found</div>").css("margin-top","70px");t.css("text-align","center").css("background","white").append(B)}else{e.each(C.TemplateSummary,function(D,E){q.append(b(this,f));q.find(".item .item-id").hide();q.find(".item").bind("click",function(){var F=e(this).find(".item-id").text();e("#"+f.hiddenFieldId).val(F);q.find(".item").removeClass("perc-selected-item");e(this).addClass("perc-selected-item")});$firstItem=q.find(".item:first");e("#"+f.hiddenFieldId).val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});t.scrollable({items:q,size:4,keyboard:true})}};if(!f.isBase){e.PercSiteService.getTemplates(n,y,j)}else{e.PercSiteService.getBaseTemplates(f.baseType,y)}return e(this)};function b(k,h){var f="<div for=\"@ITEM_ID@\" class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";var n=k.name;var j=k.id;if(h.isBase){n=n.replace("perc."+h.baseType+".","");j=k.name}return f.replace(/@IMG_SRC@/,k.imageThumbPath).replace(/@ITEM_ID@/g,j).replace(/@ITEM_LABEL@/,n).replace(/@ITEM_TT@/g,n)}})(jQuery);(function($,P){P.PercFinderView=function(){var percFinderListviewContainerInitialHeight;var percFinderListviewContainer;var PERC_FINDER_VIEW_COLUMN="column";var PERC_FINDER_VIEW_LIST="list";var PERC_FINDER_SEARCH_RESULTS="search";var PERC_FINDER_SEARCH_TYPE_MYPAGES="MyPages";var PERC_FINDER_RESULT="result";var MAX_RESULTS;var utils=$.perc_utils;var currentContentPath;var currentContentId;var finderButtons;var dirty=false;var finder=$.perc_finder();var contentId=null;var pageView=P.pageView();var dialogFlag=true;this.setView=setView;var chooseColumnView=$("#perc-finder-choose-columnview").click(setViewColumn);var chooseListView=$("#perc-finder-choose-listview").click(setViewList);var chooseSearchView=$("#perc-finder-search-submit").click(setViewSearch);var chooseMyPagesView=$("#perc-finder-choose-mypagesview").click(setMyPagesView);setColumnViewButtonOn();var dirtyController=$.PercDirtyController;var percFinderViewAPI={reload:function(){},getContentId:function(){return currentContentId},clear:function(){$("#frame").each(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},confirm_if_dirty:confirm_if_dirty,save:save};this.disableSearchBar=function disableSearchBar(disable){if(disable){$("#perc-finder-item-search").attr("disabled",true);$("#perc-finder-item-search").val("");chooseSearchView.unbind("click")}else{$("#perc-finder-item-search").removeAttr("disabled");chooseSearchView.click(setViewSearch)}};this.disableListViewButton=function disableListViewButton(disable){if(disable){chooseListView.unbind("click")}else{chooseListView.click(setViewList)}};var currentFinderView=PERC_FINDER_VIEW_COLUMN;this.getCurrentFinderView=function(){return currentFinderView};this.PERC_FINDER_VIEW_COLUMN=PERC_FINDER_VIEW_COLUMN;this.PERC_FINDER_VIEW_LIST=PERC_FINDER_VIEW_LIST;this.PERC_FINDER_SEARCH_RESULTS=PERC_FINDER_SEARCH_RESULTS;this.PERC_FINDER_RESULT=PERC_FINDER_RESULT;var pagingBar="";$("#perc-finder-item-search").focus(function(){$(this).css("color","#FFFFFF").css("background-color","#5a5d69")}).bind("keyup",function(evt){if(evt.keyCode==13){$("#perc-finder-item-search").blur();performSearch();$("#perc-finder-item-search").focus();evt.preventDefault();evt.stopPropagation()}if(evt.keyCode==27||evt.keyCode==9){$("#perc-finder-item-search").css("color","#CCCCCC").css("background-color","#41434F").blur();evt.preventDefault();evt.stopPropagation()}$(".perc-finder-message").fadeOut(function(){$(this).empty()})});function pagePrevious(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")-MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function pageNext(newStartIndex){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")+MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function refreshView(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");$(".perc-fixedtableheader").remove();percFinderListviewContainer.empty();percFinderListviewContainer.css("text-align","left");percFinderListviewContainer.append($('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>'));var column=percFinderListviewContainer.data("sortColumn");var order=percFinderListviewContainer.data("sortOrder");var startIndex=percFinderListviewContainer.data("startIndex");var callbackFunction=percFinderListviewContainer.data("callback");var config={startIndex:startIndex,maxResults:MAX_RESULTS,callback:callbackFunction,sortFunction:sortView,sortColumn:column,sortOrder:order};percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height();if(currentFinderView===PERC_FINDER_VIEW_LIST){config.path=percFinderListviewContainer.data("path");fillListView(config,function(){expandTableBorders(true)})}else{if(currentFinderView===PERC_FINDER_SEARCH_RESULTS||currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES){var searchQuery=$("#perc-finder-listview").data("searchQuery");var searchType=percFinderListviewContainer.data("searchType");config.searchCriteria={SearchCriteria:{query:searchQuery,searchType:searchType,startIndex:startIndex,maxResults:MAX_RESULTS,sortColumn:column,sortOrder:order}};fillResultView(config,function(){expandTableBorders(true)})}}}function expandTableBorders(expand){if(percFinderListviewContainer){var finder=$(".perc-finder");var lastRow=percFinderListviewContainer.find("tr:last");lastRowHeight=lastRow.height();var containerElement=$("#perc-finder-listview table:first");var containerHeight=containerElement.height();var fixedColumnHeight=$(".perc-view-column-fixed").height();var differenceValue=fixedColumnHeight-containerHeight;if(expand){if(lastRowHeight>0){lastRow.height(lastRowHeight+differenceValue)}}else{lastRow.height(20)}}}function fillPagingBar(dir){var startIndex=dir.data("startIndex");var totalResult=dir.data("totalResult");var endIndex=((startIndex-1+MAX_RESULTS>totalResult)?totalResult:(startIndex-1+MAX_RESULTS));var itemText="0 Items";if(totalResult!=0){itemText=startIndex+" - "+endIndex+" of "+totalResult+" Total"}pagingBar.find(".perc-pagingbar-items").text(itemText);if((totalResult-(startIndex-1+MAX_RESULTS))>0){pagingBar.find(".perc-pagingbar-next").removeClass("perc-disabled-navigator").unbind("click").click(pageNext)}else{pagingBar.find(".perc-pagingbar-next").addClass("perc-disabled-navigator").unbind("click")}if(startIndex>MAX_RESULTS){pagingBar.find(".perc-pagingbar-previous").removeClass("perc-disabled-navigator").unbind("click").click(pagePrevious)}else{pagingBar.find(".perc-pagingbar-previous").addClass("perc-disabled-navigator").unbind("click")}}function showPagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){var finderDiv=$(".perc-finder");pagingBar=$('<div class="perc-pagingbar-finder"/>').append($('<div class="perc-pagingbar-navigator" />').append($('<a class="perc-pagingbar-previous" />').attr("title","Previous")).append($('<a class="perc-pagingbar-next"/>').attr("title","Next"))).append($('<span class="perc-pagingbar-items" />'));fillPagingBar(dir);var newHeight=finderDiv.height();finderDiv.append(pagingBar);fixIframeHeight();fixHeight()}var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}finder.update_finder_height()}function updatePagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){fillPagingBar(dir)}}function addListViewContainer(){var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");$(allColumns[0]).siblings().hide();var newColumn=$.perc_finderInstance.insertAfter(lastColumn);newColumn.css("width","100%");var newColumnContent=newColumn.find(".mcol-direc-wrapper");newColumnContent.find(".ui-resizable-handle").remove();percFinderListviewContainer=$("<div id='perc-finder-listview'>");newColumnContent.css("width","100%");newColumnContent.append(percFinderListviewContainer);return percFinderListviewContainer}function fillListView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercPathService.getContentForPath(displayFormat.SimpleDisplayFormat,config,function(status,content){if(status){percFinderListviewContainer.PercFinderListView(config,content);var newPath=$.trim($("#mcol-path-summary").val());$.PercPathService.getPathItemForPath(newPath,function(status,content){if(content.PathItem.type=="Folder"||content.PathItem.type=="FSFolder"){$(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");if(callback){callback()}return}var index=newPath.lastIndexOf("/");newPath=newPath.substring(index+1);$("#perc-finder-listview td.perc-first").each(function(){var self=$(this);var selectedText=self.find("span").text();if(newPath==selectedText){self.parent().click();finder.scrollIntoView(self)}});if(callback){callback()}})}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height()})})}function fillResultView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.searchCriteria.SearchCriteria.formatId=displayFormat.SimpleDisplayFormat.id;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercSearchService.getSearchResult(config.searchCriteria,function(status,result){if(status){$("#perc-finder-listview").PercFinderListView(config,result);if(callback){callback()}}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}})})}function performSearch(){if(currentFinderView===PERC_FINDER_SEARCH_RESULTS){var encodedSearchText=encodeURIComponent($.trim($("#perc-finder-item-search").val()));var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("searchQuery",encodedSearchText);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}else{setView(PERC_FINDER_SEARCH_RESULTS)}setSearchViewButtonsStates();$("#mcol-path-summary").val("")}function sortView(column,order){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn",column);percFinderListviewContainer.data("sortOrder",order);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function setViewColumn(){setView(PERC_FINDER_VIEW_COLUMN)}function setViewList(){setView(PERC_FINDER_VIEW_LIST)}function setViewSearch(){performSearch()}function setMyPagesView(){setView(PERC_FINDER_SEARCH_TYPE_MYPAGES,true)}function set_view_options_button_state(view){$(".perc-finder-view-options a").removeClass("ui-active");switch(view){case PERC_FINDER_VIEW_COLUMN:chooseColumnView.addClass("ui-active");break;case PERC_FINDER_VIEW_LIST:case PERC_FINDER_SEARCH_RESULTS:chooseListView.addClass("ui-active");break;case PERC_FINDER_SEARCH_TYPE_MYPAGES:chooseMyPagesView.addClass("ui-active");break;default:chooseColumnView.addClass("ui-active")}}function setView(view,forceSet){var force=forceSet?true:false;MAX_RESULTS=$.perc_finderInstance.maxResults;set_view_options_button_state(view);if(view===currentFinderView&&!force){return}if((currentFinderView===PERC_FINDER_SEARCH_RESULTS&&view===PERC_FINDER_VIEW_LIST)||(currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES&&view===PERC_FINDER_VIEW_LIST)){return}currentFinderView=view;var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");allColumns.find("#perc-finder-listview").parents("td").remove();var finderDiv=$(".perc-finder");if(pagingBar){pagingBar.remove();fixIframeHeight();fixHeight();pagingBar=null;var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}}$(".perc-finder-body").attr("perc-view",view);if(view===PERC_FINDER_VIEW_COLUMN){allColumns.show();finder.open(finder.getCurrentPath());setColumnViewButtonOn()}else{if(view===PERC_FINDER_VIEW_LIST){percFinderListviewContainer=addListViewContainer();var contentPath=lastColumn.data("path");if(typeof(contentPath)=="undefined"){lastColumn=lastColumn.prev();contentPath=lastColumn.data("path").join("/")}else{contentPath=contentPath.join("/")}_updateListViewContainerData(contentPath,lastColumn.data("startIndex"),showPagingBar);setListViewButtonOn()}else{if(view===PERC_FINDER_SEARCH_RESULTS||view===PERC_FINDER_SEARCH_TYPE_MYPAGES){$(".perc-view-column-fixed a").removeClass("mcol-opened");$("#perc-finder-listing-Search").addClass("mcol-opened");var percFinderListviewContainer=addListViewContainer();var searchQuery=encodeURIComponent($.trim($("#perc-finder-item-search").val()));if(searchQuery==null){searchQuery==""}percFinderListviewContainer.data("searchQuery",searchQuery);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",showPagingBar);if(view===PERC_FINDER_SEARCH_TYPE_MYPAGES){percFinderListviewContainer.data("searchType",PERC_FINDER_SEARCH_TYPE_MYPAGES)}refreshView();setListViewButtonOn(view);setSearchViewButtonsStates();finder.setStateButtonsDesignNode(false);$("#mcol-path-summary").val(searchQuery)}}}}function _updateListViewContainerData(contentPath,startIndex,pagingBarCallback){percFinderListviewContainer.data("path",contentPath);percFinderListviewContainer.data("startIndex",startIndex);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",pagingBarCallback);refreshView()}function setListViewButtonOn(view){$("#perc-finder-choose-view #perc-finder-choose-columnview").removeClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").addClass("ui-enabled")}function setColumnViewButtonOn(){$("#perc-finder-choose-view #perc-finder-choose-columnview").addClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setViewButtonsOff(){$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setSearchViewButtonsStates(){$.percFinderButtons().disableAllButtonsButSite()}function confirm_if_dirty(callback,errorCallback,options){dirtyController.confirmIfDirty(callback,errorCallback,options)}function openAsset(assetId,isEditMode){$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,assetId).done(function(){$.perc_utils.info("Added asset with id "+assetId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)});var aName=$.PercNavigationManager.getName();var handler=isEditMode?$.PercAssetController.getAssetEditorForAssetId:$.PercAssetController.getAssetViewForAssetId;handler(assetId,function(status,assetEditorUrl){if(status==$.PercServiceUtils.STATUS_SUCCESS){$.PercIFrameView.renderAssetEditor(finder,null,assetEditorUrl,null,null,false);addTransitionButtons("percAsset");$("#perc-revisions-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){var isEditMode=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT;_openRevisions(assetId,aName,isEditMode)});$("#perc-pubhistory-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){_openPublishingHistory(assetId,aName)});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(assetId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{assetId:assetId,aName:aName,trName:"Publish"},{assetId:assetId,aName:aName},{assetId:assetId,aName:aName,trName:"Take Down"},{assetId:assetId,aName:aName,trName:"Stage"},{assetId:assetId,aName:aName,trName:"Remove from Staging"},assetId],percDropdownDisabledFlag:disableAction})}}})}}else{var dlgTitle="Error";var dlgContent=assetEditorUrl;if(assetEditorUrl.indexOf("must be checked out by the current user")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Overridden",[contentName])}else{if(assetEditorUrl.indexOf("Item not found")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Deleted",[contentName])}}$.perc_utils.alert_dialog({title:dlgTitle,content:dlgContent,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}})}function _openRevisions(assetId,assetName,isEditMode){var mode=isEditMode?$.PercRevisionDialog.ITEM_MODE_VIEW:$.PercRevisionDialog.ITEM_MODE_EDIT;$.PercRevisionDialog.open(assetId,assetName,$.PercRevisionDialog.ITEM_TYPE_ASSET,mode)}function _openPublishingHistory(assetId,assetName){$.PercPublishingHistoryDialog.open(assetId,assetName,$.PercPublishingHistoryDialog.ITEM_TYPE_ASSET)}function checkOutCheckInPage(newId,notificationId,notifyComplete,pathType){if(newId!=null){var type="percPage";if(pathType==$.PercNavigationManager.PATH_TYPE_ASSET){type="percAsset"}$.PercWorkflowController().checkOut(type,newId,function(status){if(status){if(contentId&&(newId!=contentId)){$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}else{notifyComplete(notificationId,true)}}else{notifyComplete(notificationId,false)}})}else{$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}function save(type,callback){if(type=="asset"){var newAsset=true;if($.PercNavigationManager.getId()){newAsset=false}$.PercIFrameView.saveContent(newAsset);callback()}else{if(type=="page"||type=="template"){if(layoutModel!=undefined&&layoutModel!=null){$.PercBlockUI();layoutModel.save(function(){$.unblockUI();callback()})}}}}function addTransitionButtons(itemType){function addSaveAndCloseButtons(){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&view==$.PercNavigationManager.VIEW_EDIT_ASSET){var saveButton='<a style="float: right;" name="perc_wizard_save" title="Save" class="perc-save" id="perc-save-content">  </a>';$("#perc-content-menu").append($(saveButton));$("#perc-save-content").click(function(){var newAsset=!contentId||contentId==null;if(!newAsset){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){$.PercIFrameView.saveContent(newAsset)},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})}else{$.PercIFrameView.saveContent(newAsset)}})}if($.PercNavigationManager.getMode()!=$.PercNavigationManager.MODE_EDIT){var editButton='<a style="float: right;" name="perc_page_edit" title="Edit" class="perc-edit-button" id="perc-page-edit">  </a>';$("#perc-content-menu").append($(editButton));currentContentPath=$.PercNavigationManager.getPath();$.PercPathService.getPathItemForPath(currentContentPath,function(message,item){var currentItem=item.PathItem;$("#perc-page-edit").data("currentItem",currentItem).click(function(){var item=$(this).data("currentItem");if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.PercNavigationManager.handleOpenPage(item,true)}else{if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDIT_ASSET){$.PercNavigationManager.handleOpenAsset(item,true)}else{var eMsg="Cannot open unknown view.";$.perc_utils.alert_dialog({title:"Error",content:eMsg})}}})})}var closeButton="<a style='float: right;' class='perc-close' title='Close' id='perc-page-close'></a>";$("#perc-content-menu").append($(closeButton));$("#perc-page-close").click(function(){if(contentId){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){confirm_if_dirty(function(){$.PercBlockUI($.PercBlockUIMode.CURSORONLY);if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkIn(contentId,function(status){contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()})}else{contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}})}function addCommentsIcon(){$.PercRevisionService.getLastComment(contentId,function(status,result){if(status==$.PercServiceUtils.STATUS_SUCCESS){if(result.data&&result.data.length>0){var commentIcon=$("<a style='float: right;' tooltip='"+result.data+"' class='perc-last-comment-menubar'><span class='perc-font-icon icon-comment'/></a>");commentIcon.tooltip({delay:500,left:-150,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+result.data+"</p>"}});$("#tooltip").css("margin-right","20px");$("#perc-content-menu").append(commentIcon)}else{$.perc_utils.info("No comment for this page in its last transaction.")}}else{$.perc_utils.info("Failed to get the last comment information from server for page id: "+contentId+". See server log for more details.")}})}if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&contentId){$.PercWorkflowController().getTransitions(contentId,function(status,results){if(status){var dropdownLabels=[];var dropdownParams=[];var dropdownActions=[];var dropdownButtonImage="";var dropdownButtonImageOver="";results.unshift(results[0]);$.each(results,function(index){var trName=results[index].name;var trClass=results[index].cssClass;var trAlt=results[index].alt;trClass+=" perc-wf-button";var trNameNormal=trName.toLowerCase().replace(/[^a-zA-Z0-9\/]/g,"_");var trId="perc_item_transition_"+trNameNormal;var baseImageName="/cm/images/images/splitButtonWf"+trNameNormal;var imageExt=".gif";var regImageFilename=baseImageName+imageExt;var overImageFilename=baseImageName+"Over"+imageExt;if(index==0){defaultButtonImage=regImageFilename;defaultButtonImageOver=overImageFilename;dropdownButtonImage="/cm/images/images/splitButtonArrow.gif";dropdownButtonImageOver="/cm/images/images/splitButtonArrowOn.gif";name}var param={name:trName,contentId:contentId,itemType:itemType};dropdownParams.push(param);dropdownLabels.push(trName);dropdownActions.push(handlePageWorkflowDropdownAction)});var pageWorkflowDropdown=$("#perc-dropdown-page-workflow");pageWorkflowDropdown.append($("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-workflow-split-button-"+$.perc_textFilters.IDNAMECDATA(dropdownLabels[0]))).append($("<div />").addClass("perc-workflow").css("display","inline-block"));pageWorkflowDropdown.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-workflow",percDropdownOptionLabels:dropdownLabels,percDropdownCallbacks:dropdownActions,percDropdownCallbackData:dropdownParams,percDropdownTitleImage:dropdownButtonImage,percDropdownTitleImageOver:dropdownButtonImageOver,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-page-workflow"});pageWorkflowDropdown.find(".perc-dropdown-title").unbind("click");pageWorkflowDropdown.children("a").click(function(){dropdownActions[0](dropdownParams[0])});addSaveAndCloseButtons()}})}else{addSaveAndCloseButtons();addCommentsIcon()}}finder.addPathChangedListener(function(p){if(currentFinderView===PERC_FINDER_VIEW_COLUMN){return}if(finder.flagChangeView){setView(PERC_FINDER_VIEW_COLUMN)}});$.PercNavigationManager.registerFinder(finder);$.PercNavigationManager.addLocationChangeListener(function(url,id,notifyComplete,params){var newId=params.id;var modeSwitch=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY&&params.mode==$.PercNavigationManager.MODE_EDIT;if(!modeSwitch&&!$.PercNavigationManager.isReopenAllowed()&&contentId&&contentId==newId){var options={title:"Open "+type,content:"The "+type+" '"+$.PercNavigationManager.getName()+"' is already open."};$.perc_utils.alert_dialog(options);notifyComplete(id,false);return}var ok=false;dirty=dirtyController.isDirty();if(dirty){confirm_if_dirty(function(){if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}return})}else{if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}}});$(".perc-finder").append(finder.elem);finder.on("resize",function(event,ui){if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}});finder.update_finder_height();finderButtons=$.percFinderButtons().createButtons(finder,percFinderViewAPI);var contentId=$.PercNavigationManager.getId();var pageMode=$.PercNavigationManager.getMode();var contentName=$.PercNavigationManager.getName();var type=$.PercNavigationManager.getPathType();var view=$.PercNavigationManager.getView();function checkForMigrationWarnings(contentId){function onPageHasEmptyMigrationWidgets(){$.perc_utils.alert_dialog({title:I18N.message("Warning"),content:I18N.message("Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray."),okCallBack:function(){$.PercPageService.clearFlagShowMigrationEmptyMessage(contentId)}})}$.PercPageService.checkForEmptyMigrationWidgets(contentId,onPageHasEmptyMigrationWidgets)}if(type==$.PercNavigationManager.PATH_TYPE_PAGE&&contentId&&contentName){if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percPage",contentId,function(status){if(!status){contentId=null;contentName=null;var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}return}else{checkForMigrationWarnings(contentId);pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}})}else{pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&contentId){var assetId=contentId;var path=$.PercNavigationManager.getPath();$("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name' title = "+contentName+"> "+contentName+"</span>");if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){openAsset(assetId,true)}})}else{openAsset(assetId,false)}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&!contentId){var memento=$j.PercNavigationManager.getMemento();if(memento.widgetId){$.PercNewAssetDialog.openViewer(memento.folderPath,memento.widgetId)}else{$.PercNewAssetDialog.open()}}else{if(!contentId){var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}}}}}if(contentName!=null){$("#perc-editor-inline-help").hide()}function handlePageWorkflowDropdownAction(params){var contentId=params.contentId;var itemType=params.itemType;var trName=params.name;confirm_if_dirty(function(){var type=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"asset":"page";doIfItemExists(params.contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){var buttons={};buttons[trName]={click:function(){userComment=$("#perc-workflow-comment").val();commentDialog.remove();$.PercBlockUI();$.PercWorkflowController().transition(contentId,itemType,trName,encodeURIComponent(userComment),function(status){if(status){contentId=null;$.unblockUI();if(type=="page"&&trName=="Archive"){$.PercRedirectHandler.createRedirect($.PercNavigationManager.getPath(),"","page").fail(function(errMsg){$.perc_utils.alert_dialog({title:"Redirect creation error",content:errMsg,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}).done(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}else{$.unblockUI()}})},id:"perc-workflow-comment-ok"};buttons.Cancel={click:function(){commentDialog.remove()},id:"perc-workflow-comment-cancel"};var userComment="";var commentDialog=$("<div><div class='perc-workflow-comment-label' data='"+trName+'\'>Enter comments (limit to 255 characters)</div><textarea id="perc-workflow-comment" name="perc-workflow-comment" maxlength="255"></textarea></div>').perc_dialog({dialogClass:"perc-workflow-comment-dialog",title:"Enter Comments",modal:true,resizable:false,percButtons:buttons,width:400,id:"perc-workflow-comment-dialog"})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _openSchedule(callbackData){var itemId=callbackData.assetId;var assetName=callbackData.aName;if(dialogFlag){$.PercScheduleDialog.open(itemId,assetName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,assetName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,assetName)}}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Continue to publish now?",success:function(){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}}function _publishItem(callbackData){var itemId=callbackData.assetId;var trName=callbackData.trName;var view=$.PercNavigationManager.getView();var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){$.unblockUI();if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var SitePublishResponse=JSON.parse(results[0]).SitePublishResponse;if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES){$.perc_utils.alert_dialog({title:"Warning",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration multiple sites",[SitePublishResponse.warningMessage])})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{if(typeof(SitePublishResponse.warningMessage)!="undefined"&&SitePublishResponse.warningMessage!=""){$.perc_utils.alert_dialog({title:"Warning",content:SitePublishResponse.warningMessage,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}}}}}}})(jQuery,jQuery.Percussion);(function(t){t.PercIFrameView={renderAssetEditor:f,saveContent:z};var e=t.PercDirtyController;var n=false;var B=null;var y,x,j,h;function f(D,G,E,L,F,H){j=t("#frame");j.contents().remove();j.unbind(".reload");B=L;y=H;x=G;j[0].src=E;var I=/sys_folderid=([0-9]+)/;I=I.exec(E);h=I&&I.length>0?I[1]:null;t.PercContentPreSubmitHandlers.clearHandlers();j.load(function(){if(n==false){n=true;A()}else{q()}});fixIframeHeight();if(y){var J=t("#perc-layout-menu").length>0?"#perc-layout-menu":"#perc-content-menu";t(J).html("");t('<a style="float: right;" name="perc_wizard_save" class="perc-save" id="perc-save-content">  </a>').appendTo(J);t('<a style="float: right;" class="perc-close" id="perc-cancel-content">  </a>').appendTo(J);t("#perc-save-content").unbind("click").click(function(){z(true)});t("#perc-cancel-content").unbind("click").click(function(){K()});function K(){t.PercNavigationManager.goToDashboard()}}}function q(){if(j.contents().find("#perc-content-edit-errors").length==0){if(y){C(j);t.unblockUI()}else{t.PercPathService.getPathItemById(t.PercNavigationManager.getId(),function(E,D){if(E==t.PercServiceUtils.STATUS_SUCCESS){var F=D.PathItem.name;t.PercNavigationManager.setReopenAllowed(true);t.PercNavigationManager.goToLocation(t.PercNavigationManager.VIEW_EDIT_ASSET,t.PercNavigationManager.getSiteName(),t.PercNavigationManager.getMode(),t.PercNavigationManager.getId(),F,t.PercNavigationManager.getPath(),t.PercNavigationManager.PATH_TYPE_ASSET);t.unblockUI()}else{t.unblockUI();t.perc_utils.alert_dialog({title:"Error",content:D})}})}}else{b(j.contents().find("#perc-content-form"));t.unblockUI()}}function A(){if(y&&x){j.contents().find("[name=sys_workflowid]").val(x)}var D=j.contents().find("#perc-content-form");b(D);if(!y){j.contents().find("#perc-site-impact-panel").show();t.PercSiteImpactView.renderSiteImpact(t.PercNavigationManager.getId(),t.PercSiteImpactView.ITEM_TYPE_ASSET,j.contents().find("#perc-site-impact-panel"))}}function z(D){e.setDirty(false,"asset");t.PercBlockUI();var E=true;t.each(t.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){E=false}});if(!E){t.unblockUI();return}t.PercContentPreSubmitHandlers.clearHandlers();t(window).removeData();j.removeData();j.contents().find("#perc-content-form").submit()}function k(D,F,E){t.PercNavigationManager.goToLocation(t.PercNavigationManager.VIEW_EDIT_ASSET,t.PercNavigationManager.getSiteName(),t.PercNavigationManager.getMode(),E,F,D+"/"+F,t.PercNavigationManager.PATH_TYPE_ASSET)}function b(E){if(h){var F=E.attr("action");F=F+"?sys_folderid="+h+"&sys_asset_folderid="+h;E.attr("action",F)}var D=E.find("[name=sys_title]");var D=E.find("[name=sys_title]");if(D.length>0){t.perc_filterField(D,t.perc_textFilters.URL)}E.find("[type=text]").keypress(function(G){if(G.keyCode==13){return false}})}function C(E){var D=E.contents().find("[name=sys_contentid]").val();if(D==""){t.perc_utils.alert_dialog({title:"Error",content:"Unable to create asset"});return}var D="-1-101-"+D;path="//Folders/$System$/Assets"+B;t.PercAssetController.putAssetInFolder(D,path,function(F,G){k(t.perc_paths.ASSETS_ROOT+B,E.contents().find("[name=sys_title]").val(),G.AssetFolderRelationship.assetId)})}})(jQuery);(function(b){b.PercNewPageDialog=function(){var f={openDialog:e};function e(q,k){var C="";if(q){q=q.split("/");if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){C=q[2]}}var h=30;var D="<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> ";if(!k){D=D+"<label for='perc-select-template'>Select a template: </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a>"}else{D=D+"<input type='hidden' id='perc-select-template' name='template' value='"+k+"'/>"}D=D+"<div style='float:left;><fieldset><label for='perc-page-linktext' class='perc-required-field'>"+(!k?I18N.message("perc.ui.newpagedialog.label@Page link text"):I18N.message("perc.ui.newblogpostdialog.label@Post title"))+":</label> <br/> <input type='text' tabindex='"+h+"' class='required' id='perc-page-linktext' name='page_linktext' maxlength='512'/> <br/> ";if(!k){D=D+"<input type='text' style = 'display:none' tabindex='"+h+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> "}else{D=D+"<label for='perc-page-title' class='perc-required-field' style='display: none;'>"+I18N.message("perc.ui.newblogpostdialog.label@Hidden Post title")+":</label> <br style='display: none;'/> <input type='hidden' tabindex='"+h+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> <br style='display: none;'/>"}D=D+"<label for='perc-page-name' class='perc-required-field'>"+(!k?I18N.message("perc.ui.newpagedialog.label@Page name"):I18N.message("perc.ui.newblogpostdialog.label@Post name"))+":</label> <br/> <input type='text' tabindex='"+h+"' class='required' id='perc-page-name' name='page_name' maxlength='255'/><br/> </fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>";var x=!k?800:420;var E=b(D).perc_dialog({title:(!k?I18N.message("perc.ui.newpagedialog.title@New Page"):I18N.message("perc.ui.newblogpostdialog.title@New Post")),buttons:{},percButtons:{Save:{click:function(){j(C)},id:"perc-page-save"},Cancel:{click:function(){G()},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:x,resizable:false,modal:true});if(!k){A()}function B(J){var K=b.PercServiceUtils.extractDefaultErrorMessage(J);var I=b.PercServiceUtils.extractFieldErrorCode(J);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:K,okCallBack:function(){if(I=="page.alreadyExists"){b("#perc-page-name").focus()}}})}function G(){E.remove()}function j(I){b.PercSiteService.getSiteProperties(I,function(K,J){if(K==b.PercServiceUtils.STATUS_SUCCESS){var M=b(E.find("#perc-page-name")[0]).val();var L=J.SiteProperties.defaultFileExtention;if(L&&M.lastIndexOf(".")<0){if(M.length+L.length<255){M+="."+L}else{M=M.substring(0,254-L.length)+"."+L}b(E.find("#perc-page-name")[0]).val(M)}}else{b.perc_utils.alert_dialog({title:"Error",content:J})}E.find("form").submit()})}var n=E.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,messages:t(),debug:true,submitHandler:function(J){var I=b(J).find("[name=page_name]").val();I=b.trim(I);I=b.perc_textFilters.WINDOWS_FILE_NAME(I);b(J).find("[name=page_name]").val(I);b.perc_pathmanager.open_containing_folder(q,function(L,K){b.perc_pagemanager.create_new_page(K,b(J).serializeArray(),function(M){E.remove();F(K.join("/"),I,M.Page.id)},B)})}});function A(){var K=E.find("div.perc-scrollable div.perc-items");var L="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",L);var J;if(q[1]==b.perc_paths.SITES_ROOT_NO_SLASH){J=b.perc_paths.TEMPLATES_BY_SITE+"/"+q[2]}else{J=b.perc_paths.TEMPLATES_USER}b.getJSON(J,function(M){b.each(M.TemplateSummary,function(){K.append(I(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var N=b(this).find(".item-id").text();b("#perc-select-template").val(N);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});function I(N){var M="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return M.replace(/@IMG_SRC@/,N.imageThumbPath).replace(/@ITEM_ID@/,N.id).replace(/@ITEM_LABEL@/,N.name).replace(/@ITEM_TT@/g,N.name)}}var z=b("#perc-page-linktext");var y=b("#perc-page-title");var H=b("#perc-page-name");b.perc_textAutoFill(z,y);b.perc_textAutoFill(z,H,b.perc_autoFillTextFilters.URL,null,255);b.perc_filterField(H,b.perc_textFilters.URL);function t(){var I={page_linktext:{required:(!k?"Page link text":"Post Title")+"  is a required field."},page_title:{required:(!k?"Page":"Hidden Post")+" title is a required field."},page_name:{required:(!k?"Page":"Post")+" name is a required field."}};return I}function F(K,I,J){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR,b.PercNavigationManager.getSiteName(),b.PercNavigationManager.MODE_EDIT,J,I,K+"/"+I,b.PercNavigationManager.PATH_TYPE_PAGE)}}return f}})(jQuery);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(e,q){var y=b.perc_utils;var k;b.PercNewAssetDialog.open=function(){var B=30;var I;var F;var G={};F=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:G,percButtons:{Next:{click:function(){var M=b.PercNavigationManager.getMemento().lastOpenedItem;if(!y.isBlankString(M)){b.PercWorkflowController().checkIn(M,function(N){C()})}else{C()}},id:"perc-page-save"},Cancel:{click:function(){J();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var M=b.PercNavigationManager.getBookmark();var N=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(M)!=N){window.location.href=N}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var D=b("#perc-select-template_perc_is");var H="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";D.attr("style",H);function J(){F.remove()}function C(){F.find("form").submit()}I=F.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(N){var M=b("#perc-editor-url").val();var O=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(k,function(Q,P){F.remove();path=P.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(S){var R=S.id;var T=R.substring(R.lastIndexOf("-")+1);M+="&sys_folderid="+T+"&sys_asset_folderid="+T+"&sys_workflowid="+O;b.PercIFrameView.renderAssetEditor(e,O,M,path,P,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(j(),function(O){var N=F.find("div.perc-scrollable div.perc-items");for(a in O){var M=O[a];N.append(h(M));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var P=b(this).find(".item-editor-url").text();var Q=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(P);b("#perc-workflow-id").val(Q);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var L=b("#perc-page-name");var A=b("#perc-page-title");var z=b("#perc-page-url");function E(M){return M.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function K(M){return M.replace(/\\/g,"")}b.perc_textAutoFill(L,A,K);b.perc_textAutoFill(L,z,E);b.perc_textAutoFill(L,"#perc-page-linktitle",K);b.perc_filterField(L,K);b.perc_filterField(A,K);b.perc_filterField(z,E);b.perc_filterField("#perc-page-linktitle",K)};b.PercNewAssetDialog.openViewer=function(z,A){b.PercAssetService.getAssetEditorForWidgetAndFolder(z,A,function(C,B){if(C==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var E=B.AssetEditor.pop();var D=E.url;var F=E.workflowId;path=z.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(z,function(H){var G=H.id;var I=G.substring(G.lastIndexOf("-")+1);D+="&sys_folderid="+I+"&sys_asset_folderid="+I+"&sys_workflowid="+F;b.PercIFrameView.renderAssetEditor(e,F,D,path,z.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function f(){b.PercFolderHelper().getAccessLevelByPath(k.join("/"),false,function(A,z){if(A==b.PercFolderHelper().PERMISSION_ERROR||z==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var C=e.getCurrentItem();var B="";if(C!=null){B=C.folderPaths;if(C.type=="Folder"){B=C.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(E,D){if(E==b.PercServiceUtils.STATUS_ERROR||D==b.PercUserService.ACCESS_READ||D==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{q.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},B)}})}function h(A){var z="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return z.replace(/@IMG_SRC@/,A.icon).replace(/@ITEM_ID@/g,A.title).replace(/@ITEM_URL@/,A.url).replace(/@ITEM_WORKFLOW_ID@/,A.workflowId).replace(/@ITEM_LABEL@/,A.title)}function j(){return b.deparam.querystring().path}var x=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function n(z){k=z;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){t(false)}else{if(z[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){x.show();t(true);if(z.length<3){t(false)}else{b.PercFolderHelper().getAccessLevelByPath(z.join("/"),true,function(B,A){if(B==b.PercFolderHelper().PERMISSION_ERROR||A==b.PercFolderHelper().PERMISSION_READ){t(false)}})}}else{if(z[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||z[1]==b.perc_paths.SITES_ROOT_NO_SLASH){x.hide()}}}}function t(z){if(z){x.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(f)}else{x.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}e.addPathChangedListener(n);return x}})(jQuery);(function($,P){var CONTENT_TAB=0;var LAYOUT_TAB=1;var STYLES_TAB=2;var view=$.PercNavigationManager.getView();var dialogFlag=true;var querystring=$.deparam.querystring();var pageMode=$.PercNavigationManager.getMode();var isAdmin=$.PercNavigationManager.isAdmin();var isDesigner=$.PercNavigationManager.isDesigner();P.pageView=function(){$(".perc-page-status").hide();$(".perc-page-name").hide();var dirtyController=$.PercDirtyController;if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.perc_iframe_fix($("#frame"))}var utils=$.perc_utils;var pageModel;var currentPageId;var unassigned="UNASSIGNED";var dirty=false;var pageViewAPI={resetPageName:resetPageName,reload:function(){loadTab($("#perc-pageEditor-tabs").tabs("selected"))},getPageId:function(){return currentPageId},clear:function(){$("#frame").each(function(){this.open();this.close()})},confirm_if_dirty:confirm_if_dirty,openPage:openPage,isDirty:isDirty};$("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu, #perc-error-alert").css("visibility","hidden");function openPage(pageId,pageName){try{$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,pageId).done(function(){$.perc_utils.info("Added page with id "+pageId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)})}catch(err){$.perc_utils.error("Error adding page with id "+pageId+" to recent item list.")}currentPageId=pageId;$(".perc-page-status").show();$(".perc-page-name").show();getPageStatus(currentPageId);var pglabel=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"Editing Page:":"Viewing Page:";var pgType=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"page-editing":"page-viewing";if(pageName){var titleValue=$.PercNavigationManager.getPath();$(".perc-page-name-name").html('<span class = "perc-title-value"><span class = "perc-page-name-text">'+pageName+"</span></span>");$(".perc-title-value").attr("title",titleValue);$(".perc-title-value").prepend('<span class = "perc-page-name-label">'+pglabel+"</span>");$(".perc-page-details").attr("type",pgType);$("#perc-pageEditor-menu-name").html(pageName);_addMyPagesAction(pageId);$(".perc-page-details").show()}var $tabs=$("#perc-pageEditor-tabs");var currentTabIndex=$tabs.tabs().tabs("option","selected");var defaultTabIndex=0;if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,function(){$tabs.data("disabled.tabs",[]).tabs("select",defaultTabIndex);$("#perc-pageEditor-tabs").find("li").each(function(i){if(pageModel.getTemplateModel().getTemplateType()!==unassigned){$(this).removeClass("ui-state-disabled")}});var enableMenu=pageModel.getTemplateModel().getTemplateType()!==unassigned;if(isAdmin||isDesigner){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Edit Template","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,enableMenu,true]})}else{actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Change Template"],percDropdownDisabledFlag:[false,true,true]})}addMoreMenus()})}$("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)});var actionsDropdown=$("#perc-dropdown-actions");var viewDropdown=$("#perc-dropdown-view");if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","View Meta-data"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)}],percDropdownCallbackData:["Action","View Meta-data"],percDropdownDisabledFlag:[false,true]});viewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History"],percDropdownCallbacks:[function(){},_openRevisions,_openComments,_previewPage,_openPublishingHistory],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"View"],percDropdownDisabledFlag:[false,true,true,true,true]});addMoreMenus()}function _addMyPagesAction(pageId){$.PercPageService.isMyPage(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$(".perc-my-pages-action").addClass("perc-my-pages-error").attr("title","Error occurred retreving the status.")}else{if(result){$(".perc-my-pages-action").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").click(function(){_removeFromMyPages(pageId)})}else{$(".perc-my-pages-action").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").click(function(){_addToMyPages(pageId)})}}})}function _addToMyPages(pageId){$.PercPageService.addToMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-add-to-my-pages").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").unbind().click(function(){_removeFromMyPages(pageId)})}})}function _removeFromMyPages(pageId){$.PercPageService.removeFromMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-remove-from-my-pages").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").unbind().click(function(){_addToMyPages(pageId)})}})}function addMoreMenus(){if(isAdmin||isDesigner){var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]})}else{var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-layout-actions",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]})}var layoutViewDropdown=$("#perc-dropdown-view-layout");layoutViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","View","View"],percDropdownDisabledFlag:[false,true,true]});var styleViewDropdown=$("#perc-dropdown-view-style");styleViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(currentPageId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Take Down"},{pageId:currentPageId,pageName:pageName,trName:"Stage"},{pageId:currentPageId,pageName:pageName,trName:"Remove from Staging"},currentPageId],percDropdownDisabledFlag:disableAction})}}});$.PercAssetService.getUnusedAssets(currentPageId,populateOrphanAssets);var viewDropDownData={percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History","Disable JavaScript"],percDropdownCallbacks:[$.noop,_openRevisions,_openComments,_previewPage,_openPublishingHistory,$.noop],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"Disable JavaScript"],percDropdownDisabledFlag:[false,true,true,true,true,true]};viewDropdown.PercDropdown(viewDropDownData)}if(currentTabIndex==defaultTabIndex){loadTab(defaultTabIndex)}initOrphanAssetsMenu()}}function handleIn(){var self=$(this);self.attr("src",self.data("overIconSrc"))}function handleOut(){var self=$(this);self.attr("src",self.data("iconSrc"))}function populateOrphanAssets(status,unusedAssets){$("#perc_orphan_assets_expander").show();if(status==$.PercServiceUtils.STATUS_ERROR){$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled");$.perc_utils.alert_dialog({title:"Error",content:unusedAssets});return}if(unusedAssets.length>0){var orphanAssetsContainer=$(".perc-orphan-assets-list");orphanAssetsContainer.empty();var htmlAssets="";for(var i=0;i<unusedAssets.length;i++){var asset=unusedAssets[i];var hoverText="Local";var folderPaths="";if(typeof(asset.folderPaths)!="undefined"){hoverText=asset.folderPaths.replace("//Folders/$System$","")+"/"+asset.name;folderPaths=asset.folderPaths}orphanAssetsContainer.append($("<a />").attr("alt",hoverText).attr("title",hoverText).addClass("perc-orphan-asset").data("spec",{type:asset.type,id:asset.id,relationshipId:asset.relationshipId}).append($("<div />").css("position","relative").addClass("perc-widget-tool").append($("<img />").attr("src",asset.icon).data("iconSrc",asset.icon).data("overIconSrc",asset.overIcon).hover(handleIn,handleOut)).append($("<div />").css("overflow","hidden").addClass("perc-asset-label").append($("<nobr />").html(asset.title)))).css("cursor","pointer").data("assetId",asset.id).data("assetType",asset.type).data("assetFolderPaths",folderPaths).data("widgetId",asset.widgetId).unbind().click(selectOrphanAsset))}$("#perc_orphan_assets_expander").unbind().click(function(){clearSelection();$.fn.percOrphanAssetsMaximizer(P)});orphanAssetsContainer.find(".perc-orphan-asset").draggable({helper:function(){var helper=$(this).clone();helper.find(".perc-asset-label").css("padding","0px 0px 5px 5px");return helper},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:function(){$("body").css("overflow","hidden")},stop:function(){$("body").css("overflow","auto")},delay:25});$("#perc_orphan_assets_maximizer").removeClass("perc-disabled");$("#perc_orphan_assets_expander").removeClass("perc-disabled")}else{$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled")}}$(window).resize(function(){fixIframeHeight()});function initOrphanAssetsMenu(){$("#perc_asset_library").disableSelection();$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}function deleteOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanIds=[];var orphanTypes=[];var orphanIsShared=[];var orphanWidgetsIds=[];for(var i=0;i<unused.length;i++){orphanIds.push($(unused[i]).data("assetId"));orphanTypes.push($(unused[i]).data("assetType"));orphanWidgetsIds.push($(unused[i]).data("widgetId"));var folderPaths=$(unused).data("assetFolderPaths");if(typeof(folderPaths)!="undefined"){orphanIsShared.push(true)}else{orphanIsShared.push(false)}}var title="Remove Unused Asset";var assetmsg=(i<2)?"asset":"assets";var msg="Are you sure you want to remove the unused "+assetmsg+"?";var options={id:"perc-orphan-asset-delete-dialog",title:title,question:msg,type:"YES_PREFERRED_NO",cancel:function(){},success:function(){pageModel.clearOrphanAssets(orphanWidgetsIds,orphanTypes,orphanIds,orphanAssetDeleted)}};$.perc_utils.confirm_dialog(options)}function orphanAssetDeleted(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");$(unused).remove();clearSelection();var remainingAssets=$("#perc_asset_library").find(".perc-orphan-assets-list").find("a");if(remainingAssets.length==0){$.fn.percOrphanAssetsMaximizer(P);$("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();$("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function editOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanId=$(unused).data("assetId");var orphanType=$(unused).data("assetType");var orphanWidgetId=$(unused).data("widgetId");var orphanIsShared=false;var widgetData={widgetid:orphanWidgetId,widgetdefid:orphanType};pageModel.configureAsset(widgetData,orphanId,orphanIsShared,orphanAssetEdited)}function orphanAssetEdited(){}function selectOrphanAsset(e){if(e.shiftKey){$(this).toggleClass("perc-orphan-assets-selected")}else{if($(this).is(".perc-orphan-assets-selected")){clearSelection()}else{clearSelection();$(this).toggleClass("perc-orphan-assets-selected")}}var parent=$(this).parent();var selected=$(parent).find(".perc-orphan-assets-selected");if(selected.length>0){$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/delete.png").unbind().click(deleteOrphanAsset);$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/edit.png").unbind().click(editOrphanAsset)}else{$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}if(selected.length>=2){$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}}function clearSelection(){$(".perc-orphan-assets-list").find("a").removeClass("perc-orphan-assets-selected");$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}$("#perc-pageEditor-tabs").tabs({disabled:[1,2],select:function(event,ui){if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);$("#perc-pageEditor-tabs").tabs("select",ui.index);resetJavaScriptMenu()});return false}else{resetJavaScriptMenu()}loadTab(ui.index,true)}});if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR&&$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$("#perc-wid-lib-expander").click(function(){$.fn.percWidLibMaximizer(P)})}function loadTab(index,addWrapper){if(addWrapper){var viewWrapper=$j.PercComponentWrapper("perc-action-page-tab-selected",["perc-ui-component-editor-toolbar","perc-ui-component-editor-frame"]);var isWrapperSet=$j.PercViewReadyManager.setWrapper(viewWrapper);if(!isWrapperSet){$j.PercViewReadyManager.showRenderingProgressWarning();return}}if(index==CONTENT_TAB){loadContent(currentPageId)}else{if(index==LAYOUT_TAB){loadLayout(currentPageId)}else{if(index==STYLES_TAB){loadCss(currentPageId)}}}}function _changeTemplate(){var successCallBack=function(){window.location.reload()};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);openChangeTemplateDialog()});return false}else{openChangeTemplateDialog()}function openChangeTemplateDialog(){$.PercChangeTemplateDialog().openDialog(currentPageId,pageModel.getTemplateModel().getId(),$.PercNavigationManager.getSiteName(),successCallBack)}}function _loadTemplate(){var memento={templateId:pageModel.getTemplateModel().getId(),pageId:currentPageId,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,$.PercNavigationManager.getSiteName(),null,null,null,$.PercNavigationManager.getPath(),null,memento)}function resetJavaScriptMenu(){$(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}function resetPageName(){$.ajax({url:$.perc_paths.PAGE_CREATE+"/"+currentPageId,success:function(data){$("#perc-pageEditor-menu-name").html(data.Page.name)},type:"GET",dataType:"json"})}function confirm_if_dirty(callback,errorCallback,options){options=options||{};errorCallback=errorCallback||function(){};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(callback,errorCallback,options)}else{callback()}}function loadContent(pageId){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupContent);$.PercAssetService.getUnusedAssets(pageId,populateOrphanAssets);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}else{var previewPath=$.perc_paths.PAGE_PREVIEW+currentPageId;$("#frame").contents().remove();$("#frame").attr("src",previewPath);$("#frame").unbind().load(function(){fixIframeHeight();window.setTimeout(function(){$.perc_utils.handleLinks($("#frame"))},500);var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}}function loadLayout(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupLayout);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function loadCss(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setUpCss);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function setupContent(){fixIframeHeight();P.contentView($("#frame"),pageModel)}function setupLayout(){fixIframeHeight();var layoutController=P.layoutController(pageModel);var sizeController=P.sizeController(pageModel);P.layoutView($("#frame"),pageModel,layoutController,sizeController,function(isDirty){setDirty(isDirty)});$("#region-tool").draggable({helper:"clone"})}function setDirty(isDirty){dirtyController.setDirty(isDirty,"page");dirty=isDirty}function isDirty(){return dirty}function setUpCss(){fixIframeHeight();var cssController=P.cssController(pageModel,$("#frame"),P.CSSPreviewView($("#frame"),pageModel));$("#perc-css-editor-save").click(function(){cssController.save(function(){})});$("#perc-css-editor-cancel").click(function(){pageModel.load();dirtyController.setDirty(false,"template")})}function _openSchedule(callbackData){var itemId=callbackData.pageId;var pageName=callbackData.pageName;if(dialogFlag){$.PercScheduleDialog.open(itemId,pageName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,pageName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,pageName)}}function getPageStatus(pageId){var pagePath=$.PercNavigationManager.getPath();$.perc_pathmanager.getItemProperties(pagePath,function(status,itemProps){var pageStatus=itemProps.status;$(".perc-page-status-status").html(pageStatus);$.PercItemPublisherService.getScheduleDates(pageId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;if(scheduleDates.startDate&&pageStatus=="Pending"){$(".perc-page-status-status").html("Approved for "+scheduleDates.startDate)}})})}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Clear the schedule and continue to publish now?",success:function(){_immediateItemPublish(itemId,itemType)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{_immediateItemPublish(itemId,itemType)}}function _immediateItemPublish(itemId,itemType){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}function _publishItem(callbackData){var itemId=callbackData.pageId;var trName=callbackData.trName;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var siteName=$.PercNavigationManager.getSiteName();if(siteName===undefined&&itemType=="Page"){var currentItemPath=$.perc_finder().getPathItemById(itemId).folderPath;siteName=currentItemPath.replace("/"+$.perc_paths.SITES_ROOT,"").split("/")[1]}confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){doIfDefaultServerNotModified(siteName,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.unblockUI();$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var publishStatus=JSON.parse(results[0]).SitePublishResponse.status;if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}}}}}function _openRevisions(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercRevisionDialog.open(pageId,pageName,$.PercRevisionDialog.ITEM_TYPE_PAGE,$.PercRevisionDialog.ITEM_MODE_VIEW)}function _openComments(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercCommentsDialog.open(pageId,pageName,$.PercCommentsDialog.ITEM_TYPE_PAGE)}function _openPublishingHistory(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercPublishingHistoryDialog.open(pageId,pageName,$.PercPublishingHistoryDialog.ITEM_TYPE_PAGE)}function _openOptimizer(callbackData){$.PercPageOptimizerDialog.open(callbackData.pageId,callbackData.pageName)}function _previewPage(currentPageId){confirm_if_dirty(function(){jQuery.perc_finder().launchPagePreview(currentPageId)})}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfDefaultServerNotModified(siteName,callback){$.PercNavigationManager.loadSiteProperties(siteName,function(siteProperties){$.PercItemPublisherService.isDefaultServerModified(siteProperties.id,function(status,result){if(status){if(result){$.perc_utils.alert_dialog({content:"Cannot publish or remove this item until the CM1 server is restarted.",title:"Warning"})}else{callback()}}})})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}return pageViewAPI}})(jQuery,jQuery.Percussion);(function(j){j.PercAssetController={getAssetEditorLibrary:f,getAssetEditorForAssetId:b,getAssetViewForAssetId:e,getPathItemForPath:h,putAssetInFolder:k};function f(q,n){function t(B,z){var A=[];var y=z.AssetEditor;for(i in y){var E=y[i].icon;var F=y[i].title;var x=y[i].url;var C=y[i].workflowId;var D=new j.PercAssetEditorModel(E,F,x,C);A.push(D)}n(A)}j.PercAssetService.getAssetEditorLibrary(q,t)}function b(n,q){j.PercAssetService.getAssetEditorForAssetId(n,function(t,x){q(t,x)})}function e(n,q){j.PercAssetService.getAssetViewForAssetId(n,function(t,x){q(t,x)})}function h(q,n){function t(x,y){var z=new j.PercPathItemModel(y.PathItem.id,y.PathItem.folderPaths,y.PathItem.icon,y.PathItem.name,y.PathItem.type,y.PathItem.folderPath,y.PathItem.leaf,y.PathItem.path);n(z)}j.PercPathService.getPathItemForPath(q,t)}function k(x,t,n){var q={AssetFolderRelationship:{assetId:x,folderPath:t}};j.PercAssetService.putAssetInFolder(q,n)}})(jQuery);(function(h){h.PercWorkflowController=function(){return{checkIn:f,checkOut:k,transition:q,getTransitions:t,isCheckedOutToCurrentUser:j,doesItemExist:x}};var n=h.PercWorkflowService();function f(B,C){C=C==null?function(){}:C;var A=function(D,E){if(D==h.PercServiceUtils.STATUS_ERROR){var F=h.PercServiceUtils.extractDefaultErrorMessage(E.request);h.perc_utils.debug("Error : "+F);C(false)}else{C(true)}};n.checkIn(B,A)}function k(B,A,C){C=C==null?function(){}:C;n.checkOut(A,function(E,G){if(E==h.PercServiceUtils.STATUS_SUCCESS){var D=G.data.ItemUserInfo;if(D.checkOutUser!=D.currentUser){if(D.assignmentType=="Admin"){var F={title:e[B],question:b(0,D,B),cancel:function(){C(false)},success:function(){y(A,C)},type:"OVERRIDE_OK"};h.perc_utils.confirm_dialog(F)}else{if(D.assignmentType=="Assignee"){var F={title:e[B],content:b(1,D,B)};h.perc_utils.alert_dialog(F);C(false);return}else{var F={title:e[B],content:b(2,D,B)};h.perc_utils.alert_dialog(F);C(false);return}}}else{C(true)}}else{var H=h.PercServiceUtils.extractDefaultErrorMessage(G.request);if(H.indexOf("Not a valid content id")!=-1){var F={title:e[B],content:b(3,D,B)};h.perc_utils.alert_dialog(F);C(false);return}h.perc_utils.alert_dialog({title:"Error",content:H});C(false)}})}function y(A,B){B=B==null?function(){}:B;n.forceCheckOut(A,function(C,D){if(C==h.PercServiceUtils.STATUS_SUCCESS){B(true)}else{var E=h.PercServiceUtils.extractDefaultErrorMessage(D.request);h.perc_utils.alert_dialog({title:"Error",content:E});B(false)}})}function q(D,C,B,F,E){E=E==null?function(){}:E;var A=function(H,J){if(H==h.PercServiceUtils.STATUS_ERROR){var N=h.PercServiceUtils.extractDefaultErrorMessage(J.request);h.perc_utils.alert_dialog({title:"Error",content:N});E(false)}else{var G=J.data;var L=G.ItemTransitionResults.failedAssets;if(L){var K=(C=="percAsset")?"asset":"page";var M="Could not publish the "+K+" because the following related asset(s) could not be published.<br/><br/>";if(h.isArray(L)){h.each(L,function(){var O=this.folderPaths;O=O.substring(O.indexOf("/Assets"))+"/"+this.name;M+="<b>"+O+"</b><br/>"})}else{var I=L.folderPaths;I=I.substring(I.indexOf("/Assets"))+"/"+L.name;M+="<b>"+I+"</b><br/>"}M+="<br/>Either remove the related asset(s) or publish them first and then publish this "+K+".";h.perc_utils.alert_dialog({title:"Error",content:M});E(false)}else{E(true)}}};n.transition(D,B,F,A)}function t(A,B){B=B==null?function(){}:B;n.getTransitions(A,function(C,E){if(C==h.PercServiceUtils.STATUS_SUCCESS){var D=[];var F=E.data.ItemStateTransition.transitionTriggers;if(h.isArray(F)){h.each(F,function(H){if(z[F[H]]){D.push(z[F[H]])}})}else{if(z[F]){D.push(z[F])}}B(true,D)}else{var G=h.PercServiceUtils.extractDefaultErrorMessage(E.request);h.perc_utils.alert_dialog({title:"Error",content:G});B(false,[])}})}function j(B,C){C=C==null?function(){}:C;var A=function(D,E){if(D==h.PercServiceUtils.STATUS_SUCCESS){C(E.data==true,E.data)}else{C(false,h.PercServiceUtils.extractDefaultErrorMessage(E.request))}};n.isCheckedOutToCurrentUser(B,A)}function x(A,B){B=B==null?function(){}:B;j(A,function(C,D){if(typeof D=="string"){B(C||D.indexOf("does not exist")==-1)}else{B(C)}})}function b(B,A,E){var D="";var C="page";if(E=="percAsset"){C="asset"}if(B==0){D="The "+C+" '"+A.itemName+"' is currently being edited by '"+A.checkOutUser+"'.<br/>Select 'Override' to edit this "+C+" anyway. <br/>Unsaved changes to '"+A.itemName+"' may be lost."}else{if(B==1){D="The "+C+" '"+A.itemName+"' is currently being edited by '"+A.checkOutUser+"'."}else{if(B==2){D="You are not authorized to edit the "+C+" '"+A.itemName+"'."}else{if(B==3){D="The "+C+" has been deleted in another session."}}}}return D}var e=[];e.percPage="Open Page";e.percAsset="Open Asset";var z=[];z.Reject={name:"Reject",cssClass:"perc-wf-reject",alt:"Reject"};z.Submit={name:"Submit",cssClass:"perc-wf-submit",alt:"Submit"};z.Approve={name:"Approve",cssClass:"perc-wf-approve",alt:"Approve"};z.Resubmit={name:"Resubmit",cssClass:"perc-wf-resubmit",alt:"Resubmit"};z["Quick Edit"]={name:"Quick Edit",cssClass:"perc-wf-edit",alt:"Edit"};z.Archive={name:"Archive",cssClass:"perc-wf-archive",alt:"Archive"}})(jQuery);(function(b){b.PercPathItemModel=function(t,f,n,j,k,h,e,q){this.id=t;this.folderPaths=f;this.icon=n;this.name=j;this.type=k;this.folderPath=h;this.leaf=e;this.path=q}})(jQuery);(function(b){b.PercWidgetModel=function(){this.id=null;this.locked=false;this.html=null;this.ccs=null;this.definitionId=null;this.name=null;this.properties=null;this.assetIds=null;this.relationshipId=-1;this.setId=function(e){this.id=e};this.getId=function(){return this.id};this.setHtml=function(e){this.html=e};this.getHtml=function(){return this.html};this.setCss=function(e){this.css=e};this.getCss=function(){return this.css};this.setDefinitionId=function(e){this.definitionId=e};this.getDefinitionId=function(){return this.definitionId};this.setProperties=function(e){this.properties=e};this.getProperties=function(){return this.properties};this.setName=function(e){this.name=e};this.getName=function(){return this.name};this.setAssetIds=function(e){this.assetIds=e};this.getAssetIds=function(){return this.assetIds};this.setRelationshipId=function(e){this.relationshipId=e};this.getRelationshipId=function(){return this.relationshipId}};b.PercAssetDropCriteriaModel=function(k,q,f,j,e,t,n,h){this.widgetId=k;this.appendSupport=q;this.locked=f;this.multiItemSupport=j;this.ownerId=e;this.supportedContentTypes=t;this.assetShared=n;this.relationshipId=h;this.log=function(){console.log("widgetId              = "+this.widgetId);console.log("appendSupport         = "+this.appendSupport);console.log("locked                = "+this.locked);console.log("multiItemSupport      = "+this.multiItemSupport);console.log("ownerId               = "+this.ownerId);console.log("supportedContentTypes = "+this.supportedContentTypes)}};b.PercAssetEditorModel=function(f,j,e,h){this.icon=f;this.title=j;this.url=e;this.workflowId=h;this.log=function(){console.log("icon       = "+this.icon);console.log("title      = "+this.title);console.log("url        = "+this.url);console.log("workFlowId = "+this.workflowId)}}})(jQuery);(function(b){b.perc_create_widget_library=function(h){h.unbind();h.removeClass("ui-state-disabled").perc_button();function f(){b("#perc-pageEditor-toolbar-content").empty();h.removeClass("perc-widget-library-opened")}function j(n){var q;q=b("<div/>").css({position:"relative",width:"200px"}).addClass("perc-widget").append(b("<span/>").append(n.label).addClass("perc-widget-label")).append(b('<img src="'+n.icon+'" alt=""></img>')).attr("id","widget-"+n.id+"-"+b(".perc-widget").size()).draggable({appendTo:"body",helper:"clone",start:function(){b.perc_iframe_drag.start(q)},stop:b.perc_iframe_drag.stop});q.data("widget",n);return q}function e(n){return b.map(n.WidgetSummary,function(q){var t=b("<div/>").append(j(q)).css({"float":"left"});return t})}function k(){b.getJSON(b.perc_paths.WIDGETS_ALL,function(n){region_tool='<div id="region-tool"><img src="../images/templates/perc-new-region-tool.gif"></div>';b("#perc-pageEditor-toolbar-content").append(b(region_tool));b.each(e(n),function(){b("#perc-pageEditor-toolbar-content").append(this)})});h.addClass("perc-widget-library-opened")}h.click(function(){if(h.is(".perc-widget-library-opened")){f()}else{k()}});return{open:k,close:f}}})(jQuery);(function(j){j.fn.perc_decorate=function(x,t,q){this.each(function(){if(j(this).is(".perc-widget")){n(j(this),x,t,q,k,f)}else{if(j(this).is(".perc-region")){n(j(this),x,t,q,b,h)}}});return this};function n(t,z,y,q,x,A){A(t);t.unbind(".decorate");if(z){x(t,y,q)}else{t.bind("mouseenter.decorate",function(){x(t,y,q)});t.bind("mouseleave.decorate",function(){A(t)})}}function k(t,x,q){t.addClass("perc-widget-visible-grid perc-widget-puff");t.append(e(t,x,q))}function f(q){q.removeClass("perc-widget-visible-grid perc-widget-puff");q.find(".perc-widget-menubar").remove()}function b(t,x,q){t.addClass("perc-region-visible-grid")}function h(q){q.removeClass("perc-region-visible-grid")}function e(y,z,q){var x=j('<div class="perc-widget-menubar"><ul/></div>');var t=x.find("ul");j.each(z,function(){var A=this.icon(),B=this.action;t.append(j("<li/>").append(A));A.bind("click.decorate",function(){B(y.attr("assetid"),y.attr("widgetid"),y.attr("widgetdefid"),q)})});return x}})(jQuery);(function(e){var b=e.perc_utils;e.perc_load_template=function(h,t){j();function n(){function x(y){q().each(function(){var z=e(this).attr("widgetid");e(this).attr("id",z);var B=y[z];function A(E){var D=E.data("spec")&&E.data("spec").type;return D&&B&&(D==B||e.grep(B,function(F){return F==D}).length)}e(this).droppable("option","accept",A);var C={widgetid:z,widgetdefid:e(this).attr("widgetdefid"),widgetName:e(this).attr("widgetName")};e(this).droppable("option","drop",function(D,F){var E=F.draggable.data("spec").id;if(E){e.PercAssetService.set_relationship(E,C,h,"1",true,null,j,b.show_error)}})})}e.perc_pagemanager.get_widget_ctypes(h,false,x,b.show_error)}function j(){e.perc_templatemanager.load_template(h,function(y){var x=e.xmlDOM(y).find("rootRegion>children>region>regionId").text();e.perc_templatemanager.render_region(x,y,function(z){t.html(e(z).find("result").text());e.xmlDOM(y).find("widgetItem").each(function(){t.find("#"+e(this).find("id").text()).data("widget",{widgetid:e(this).find("id").text(),widgetdefid:e(this).find("definitionId").text()})});f()})})}function f(){var x=[{icon:function(){return e("<a class='perc-widget-delete' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(A,y,z,B){k(A,y,z,B)}},{icon:function(){return e("<a class='perc-widget-edit' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/edit.png'></img></div>")},action:function(A,y,z,B){e.perc_asset_edit_dialog(j,function(){},A,y,z,B,"template")}}];q().perc_decorate(true,x,h).droppable({accept:"#nothing",scope:e.perc_iframe_scope,activeClass:"perc-widget-active",hoverClass:"perc-widget-hover"});n()}function k(z,x,y,B){var A={AssetWidgetRelationship:{ownerId:B,widgetId:x,widgetName:y,assetId:z,assetOrder:"0"}};e.ajax({url:e.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(A),success:function(D,C){j()},error:function(E,C,D){var F=e.PercServiceUtils.extractDefaultErrorMessage(E);e.perc_utils.alert_dialog({title:"Error",content:D})}})}function q(){return t.find(".perc-widget")}};e.perc_content_viewer=function(J){var V={};var T=false;var Z=null;var N=null;var t=null;var B=true;var P=[];var A=null;var f=b.id;var C=null;var j={CONTENT:"CONTENT",LAYOUT:"LAYOUT"};var M={};e.extend(V,M,J);var R={isPageDirty:x,setPageDirty:ab,reload:Y,openPage:W,resetPageName:k,savePage:X,getPageId:D,previewPage:S,switchToContent:ac,switchToLayout:H,addWidgetAssociation:aa,confirm_if_dirty:q,clear:O};return R;function q(ad,ag,af){af=af||{};ag=ag||function(){};var ae={id:"perc-editor-page-dirty",title:"Unsaved Changes",question:"This page contains unsaved changes. If you continue, all changes will be lost. Click OK to proceed and discard changes, Cancel to return to the page you were editing.",success:ad,cancel:ag,yes:"Continue anyway"};e.extend(ae,af);if(T){b.confirm_dialog(ae)}else{ad()}}function D(){return Z}function k(){e.ajax({url:e.perc_paths.PAGE_CREATE+"/"+D(),success:function(ad){e("#perc-pageEditor-menu-name").html(ad.Page.name)},type:"GET",dataType:"json"})}function x(){return T}function ab(ad){T=ad}function S(){var ad=D();if(!ad){alert("No page is open for the preview.");return}if(x()){alert("This page has been changed. You must save the page to preview it.");e.fn.jmodal({data:{innerText:"Yes!"},title:"Information",content:"No Preview Available!",buttonText:{button1:"Yes",button2:"No",button3:""},fixed:true,button1Event:function(ag,af){alert(ag.innerText);af.complete()},button2Event:function(ag,af){alert(ag.innerText);af.complete()},button3Event:function(ag,af){alert(ag.innerText);af.complete()}});return}var ae=e.perc_paths.PAGE_PREVIEW+ad;window.open(ae,ad.replace(/-/g,"_"),"",true)}function F(){e.perc_page_edit_dialog(J.mcol,R,D())}function W(ae,ad){q(function(){E(ae,ad)})}function E(ag,ad){Z=ag;N=ad;e("#perc-pageEditor-menu-name").html(ad);e("#perc-pageEditor-show-hide").unbind().perc_button().removeClass("ui-state-disabled").html(I18N.message("perc.ui.webmgt.pageeditor.menu@Hide")).click(function(){B=!B;var ah=B?I18N.message("perc.ui.webmgt.pageeditor.menu@Hide"):I18N.message("perc.ui.webmgt.pageeditor.menu@Show");e(this).html(ah);y()});e("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").click(function(){F()});e("#perc-preview-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").click(function(){S()});var ae=e("#perc-pageEditor-tabs");ae.tabs("enable");ae.tabs("select",0);var af=false;ae.tabs("option","select",function(ah,ai){if(af){af=false;return true}if(ai.index==0){q(function(){ac();af=true;ae.tabs("select",0)});return false}else{q(function(){H();af=true;ae.tabs("select",1)});return false}});ac()}function O(){Z=null;N=null;e("#perc-pageEditor-menu-name").html("");e("#perc-pageEditor-show-hide").unbind().addClass("ui-state-disabled");e("#perc-metadata-button").unbind().addClass("ui-meta-pre-disabled");e("#perc-preview-button").unbind().addClass("ui-meta-pre-disabled");var ad=e("#perc-pageEditor-tabs");ad.tabs("disable");if(e.perc_use_iframe){e("#perc-pageEditor-content").contents().find("body").empty()}else{e("#perc-pageEditor-content").empty()}}function ac(){if(A){A.close()}K(j.CONTENT);f=Q;e("#perc-content").append(e("#perc-pageEditor-content"));Y()}function Q(){e("#perc-widget-library-button").unbind().addClass("ui-state-disabled");P=[{icon:function(){return e("<a class='perc-widget-delete' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(ag,ae,af,ad){z(ag,ae,af,ad)}},{icon:function(){return e("<a class='perc-widget-edit' href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/edit.png'></img></div>")},action:function(ag,ae,af,ad){e.perc_asset_edit_dialog(Y,function(){},ag,ae,af,ad)}}]}function K(ad){if(ad==j.CONTENT){e("#perc-widget-library-button").hide();e("#perc-metadata-button").show()}else{if(ad==j.LAYOUT){e("#perc-widget-library-button").show();e("#perc-metadata-button").hide()}}}function z(ag,ae,af,ad){var ah={AssetWidgetRelationship:{ownerId:ad,widgetId:ae,widgetName:af,assetId:ag,assetOrder:"0"}};e.ajax({url:e.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(ah),success:function(aj,ai){Y()},error:function(ak,ai,aj){alert(aj)}})}function H(){K(j.LAYOUT);f=h;e("#perc-layout").append(e("#perc-pageEditor-content"));Y()}function h(){A=e.perc_create_widget_library($j("#perc-widget-library-button"));P=[{icon:function(){return e("<a href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/delete.png'></img></div>")},action:function(ae,ad){alert("Delete not yet supported")}},{icon:function(){return e("<a href='#'><img src='"+e.perc_paths.IMAGE_ROOT+"/icons/editor/configure.png'></img></a>")},action:function(ae,ad){alert("Configuration is not yet defined")}}]}function Y(){var ah=e.perc_paths.PAGE_EDIT+"/"+Z;if(e.perc_use_iframe){var af="<style>.perc-region{ min-height: 50px; } .perc-region-visible-grid{ border: 1px dotted #000000; }  .perc-widget{ height: 100px; width: 100%; position: relative; }  .perc-widget-visible-grid{ border: 1px dashed blue; }  div.perc-region-hover { border: thick dotted green; }  .perc-region-active { border: thick dashed green; }  div.perc-widget-hover { background-color: blue; }  .perc-widget-active { background-color: yellow; }  .perc-widget-menubar{ position: absolute; right: 0; top: 0; }  .perc-widget-menubar ul{ }  .perc-widget-menubar li{ font-family: Arial; font-size: 10px; display: inline; padding: 1px; }  .perc-widget-menubar li a{ cursor: pointer; }.perc-show-feedback { background-color: grey; border: 2px solid green; }</style>";if(e.browser.mozilla){var ad=e("#perc-pageEditor-content");ad.unbind(".reload");ad.bind("load.reload",function(){ad.contents().find("body").append(e(af));y();n()});ad[0].src=ah}else{function ae(aj){var ai=e("#perc-pageEditor-content");ai.contents().remove();var ak=ai.contents()[0];ak.open();ak.write(aj);ak.close();ai.contents().find("body").append(e(af))}e.perc_pagemanager.render_page(D(),function(ai){ae(ai);y();n()})}}else{function ag(ai){e("#perc-pageEditor-content").empty().append(e(ai))}e.perc_pagemanager.render_page(D(),function(ai){ag(ai);y();n()})}}function y(){f();U().perc_decorate(B,P,Z).droppable({accept:"#nothing",scope:e.perc_iframe_scope,activeClass:"perc-widget-active",hoverClass:"perc-widget-hover"});L().perc_decorate(B,P,Z).droppable({accept:".perc-widget",scope:e.perc_iframe_scope,activeClass:"perc-region-active",hoverClass:"perc-region-hover",drop:function(ad,af){if(af.draggable.data("widget")){var ae=af.draggable.data("widget").id;aa(ae,e(this))}}})}function U(){if(e.perc_use_iframe){return e("#perc-pageEditor-content").contents().find(".perc-widget")}return e("#perc-pageEditor-content").find(".perc-widget")}function L(){if(e.perc_use_iframe){return e("#perc-pageEditor-content").contents().find(".perc-region")}return e("#perc-pageEditor-content").find(".perc-region")}function n(){function ad(ae){U().each(function(){var af=e(this).attr("widgetid");var ai=ae[af];function ah(ak){var aj=ak.data("spec")&&ak.data("spec").type;return aj&&ai&&(aj==ai||e.grep(ai,function(al){return al==aj}).length)}e(this).droppable("option","accept",ah);var ag=e(this).attr("widgetdefid");e(this).droppable("option","drop",function(aj,al){var ak=al.draggable.data("spec").id;if(ak){e.PercAssetService.set_relationship(ak,af,ag,Z,"1",function(){R.reload()},b.show_error)}})})}e.perc_pagemanager.get_widget_ctypes(Z,true,ad,b.show_error)}function aa(ae,ad){var af=ad.attr("id");e.ajax({url:e.perc_paths.PAGE_CREATE+"/"+D(),success:function(ag){t=b.unxml(e.perc_schemata.page,e(ag));G(ae,af,function(){Y()})},type:"GET",dataType:"xml"})}function G(ag,ah,ae){var af=t.Page.regionBranches.regionWidgetAssociations;var ad=e.grep(af,function(ai){return ai.regionId==ah});if(ad.length>0){ad=ad[0]}else{ad={regionId:ah,widgetItems:[],_tagName:"regionWidget"};af.push(ad)}ad.widgetItems.push({definitionId:ag,_tagName:"widgetItem"});e.ajax({url:e.perc_paths.PAGE_CREATE+"/",dataType:"json",contentType:"application/xml",type:"POST",data:b.rexml(e.perc_schemata.page,t),success:ae,error:function(ak,ai,aj){alert("Unable to add widget "+ag+" to region "+ah+".")}})}function X(){}function I(){}}})(jQuery);(function(b){b.extend(b.fn,{hideJmodal:function(){b("#jmodal-overlay").animate({opacity:0},function(){b(this).css("display","none")});b("#jquery-jmodal").animate({opacity:0},function(){b(this).css("display","none")});b("select").show()},jmodal:function(n){var x=b.fn.extend({data:{},marginTop:100,buttonText:{button1:"",button2:"",button3:""},button1Event:function(y){},button2Event:function(y){},button3Event:function(y){},initWidth:400,fixed:true,imageType:"Information",title:"JModal Dialog",content:"This is a jquery plugin!",skinId:"jmodal-main"},n);var h=b("select").hide();x.docWidth=b(document).width();x.docHeight=b(document).height();var f=b("#jquery-jmodal");var j=b("#jmodal-overlay");if(f.length==0){var t="";var k="";if(x.buttonText.button1!==undefined&&x.buttonText.button1!=""){t+='<input id="perc_msg_dialogue_button1" type="button" value="'+x.buttonText.button1+'" />'}else{t+='<input id="perc_msg_dialogue_button1" type="button" style="display:none; visibility:hidden;" value="" />';x.buttonText.button1=""}if(x.buttonText.button2!==undefined&&x.buttonText.button2!=""){t+='<input id="perc_msg_dialogue_button2" type="button" value="'+x.buttonText.button2+'" />'}else{t+='<input id="perc_msg_dialogue_button2" type="button" style="display:none; visibility:hidden;" value="" />';x.buttonText.button2=""}if(x.buttonText.button3!==undefined&&x.buttonText.button3!=""){t+='<input id="perc_msg_dialogue_button3" type="button" value="'+x.buttonText.button3+'" />'}else{t+='<input id="perc_msg_dialogue_button3" type="button" style="display:none; visibility:hidden;" value="" />';x.buttonText.button3=""}if(x.imageType==="Warning"){k="<img src='images/warning.gif' title='Warning'/>"+x.title}else{if(x.imageType==="Error"){k="<img src='images/error.gif' title='Error'/>"+x.title}else{k="<img src='images/information.gif' title='Information'/>"+x.title}}b('<div id="jmodal-overlay" class="jmodal-overlay"/><div class="jmodal-main" id="jquery-jmodal" ><div class="jmodal-top"><div class="jmodal-top-left jmodal-png-fiexed">&nbsp;</div><div class="jmodal-border-top jmodal-png-fiexed">&nbsp;</div><div class="jmodal-top-right jmodal-png-fiexed">&nbsp;</div></div><div class="jmodal-middle"><div class="jmodal-border-left jmodal-png-fiexed">&nbsp;</div><div class="jmodal-middle-content"><div class="jmodal-title" /><div class="jmodal-content" id="jmodal-container-content" /><div style="text-align:right;">'+t+'</div></div><div class="jmodal-border-right jmodal-png-fiexed">&nbsp;</div></div><div class="jmodal-bottom"><div class="jmodal-bottom-left jmodal-png-fiexed">&nbsp;</div><div class="jmodal-border-bottom jmodal-png-fiexed">&nbsp;</div><div class="jmodal-bottom-right jmodal-png-fiexed">&nbsp;</div></div></div>').appendTo(b(document.body));f=b("#jquery-jmodal");j=b("#jmodal-overlay")}else{j.css({opacity:0,display:"block"});f.css({opacity:0,display:"block"})}f.attr("class",x.skinId);j.css({height:x.docHeight,opacity:0}).animate({opacity:0.5});f.css({position:(x.fixed?"fixed":"absolute"),width:x.initWidth,left:(x.docWidth-x.initWidth)/2,top:(x.marginTop+document.documentElement.scrollTop)}).animate({opacity:1},function(){b(this).css("opacity","")});f.find(".jmodal-title").html(x.title).next().next().children("input:first-child").attr("value",x.buttonText.button1).unbind("click").one("click",function(z){var y={complete:b.fn.hideJmodal};h.show();x.button1Event(x.data,y)}).next().attr("value",x.buttonText.button2).unbind("click").one("click",function(z){var y={complete:b.fn.hideJmodal};x.button2Event(x.data,y)}).next().attr("value",x.buttonText.button3).unbind("click").one("click",function(z){var y={complete:b.fn.hideJmodal};x.button3Event(x.data,y)});b("#jmodal-container-content").select();b(".jmodal-title").html(k);if(typeof x.content=="string"){b("#jmodal-container-content").html(x.content)}if(typeof x.content=="function"){var q=b("#jmodal-container-content");q.holder=f;x.content(q)}}})})(jQuery);var regionWidgetAssociationXmlString="";(function(b){b.Perc_Page_class=function(){this.id=null;this.name=null;this.templateId=null;this.templateRootRegion=null;this.templateObjectXml;this.pageXml;this.pageRegions=new Array();this.pageWidgets=new Array();this.load=function(f,h){var e=this;b.ajax({url:b.perc_paths.PAGE_CREATE+"/"+f,success:function(j){e.pageXml=j;$pageObject=b(e.pageXml);e.id=$pageObject.find("Page id:first").text();e.templateId=$pageObject.find("Page templateId:first").text();e.name=$pageObject.find("Page name:first").text();e.getPageRegionHtmlsFromRest();h(e.templateId)},type:"GET",dataType:"xml"})};this.helper=null;this.setHelper=function(e){this.helper=e};this.mergePageXmlIntoTemplateXml=function(k){this.findOverridableAndLockedTemplateRegions(k);var n=b(this.pageXml);var h=this;var q=new Object();n.find("region").each(function(){pageRegionId=b(this).children("regionId").text();q[pageRegionId]=b(this)});for(overridableTemplateRegionId in this.overridableTemplateRegions){var j=q[overridableTemplateRegionId];if(j){var f=this.overridableTemplateRegions[overridableTemplateRegionId];f.parent()[0].replaceChild(j[0],f[0]);h.overrideTemplateRegion(overridableTemplateRegionId)}}var e=b(k).find("Template regionTree regionWidgetAssociations");n.find("Page regionBranches regionWidgetAssociations regionWidget").each(function(){e.append(b(this));var t=b(this).children("regionId").text();h.overrideTemplateWidget(t)})};this.pageRegionHtml=Object();this.getPageRegionHtmlsFromRest=function(){var e=this;var f=b(this.pageXml);$pageRegionWidgets=f.find("Page regionBranches regionWidgetAssociations regionWidget");$pageRegionWidgets.children("regionId").each(function(){var h=b(this).text();b.ajax({url:b.perc_paths.PAGE_PREVIEW+h,type:"POST",contentType:"text/xml",dataType:"xml",data:e.pageXml,processData:false,async:false,success:function(j){e.pageRegionHtml[h]=b(j).find("result").text()},error:function(n,j,k){alert("Unable to retrieve HTML from REST service: "+k)}})})};this.overridableTemplateRegions=new Object();this.lockedTemplateRegions=new Array();this.findOverridableAndLockedTemplateRegions=function(f){var e=b(f).find("Template regionTree rootRegion children region:first");this.recursivelyFindTemplateLeafRegions(e);this.removeTemplateRegionsWithWidgets(f)};this.recursivelyFindTemplateLeafRegions=function(h){var f=this;var j=h.children("regionId").text();var e=h.children("children");if(e.children("region").length==0){this.overridableTemplateRegions[j]=h}else{f.lockedTemplateRegions.push(j)}e.children("region").each(function(){f.recursivelyFindTemplateLeafRegions(b(this))})};this.removeTemplateRegionsWithWidgets=function(j){var f=b(j);var h=f.find("Template regionTree regionWidgetAssociations");var e=this;h.find("regionWidget").each(function(){var k=b(this).find("regionId").text();delete e.overridableTemplateRegions[k];e.lockedTemplateRegions.push(k)})};this.overriddenTemplateRegionIds=new Array();this.overrideTemplateRegion=function(e){if(-1==b.inArray(e,this.overriddenTemplateRegionIds)){this.overriddenTemplateRegionIds.push(e)}};this.overriddenTemplateWidgetIds=new Array();this.overrideTemplateWidget=function(e){if(-1==b.inArray(e,this.overriddenTemplateWidgetIds)){this.overriddenTemplateWidgetIds.push(e)}};this.setOriginalTemplate=function(f,e){this.templateObjectXml=f;this.templateRootRegion=e};this.clear=function(f){var e=this;b(e.pageXml).find("Page regionBranches regions").empty();b(e.pageXml).find("Page regionBranches regionWidgetAssociations").empty();b.ajax({url:b.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:e.pageXml,dataType:"xml",processData:false,success:function(h){alert("Your page has been cleared and saved successfully.");f()},error:function(h){alert("There was an error clearing your page.")}})};this.save=function(f){var e=this;b(e.pageXml).find("Page regionBranches regionWidgetAssociations regionWidget widgetItems widgetItem id").each(function(){var j=b(this).text();var h=parseInt(j);if(isNaN(h)||h==0){this.parentNode.removeChild(this)}});b.ajax({url:b.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:e.pageXml,dataType:"xml",processData:false,success:function(h){alert("Your page has been saved successfully.");f()},error:function(h){alert("There was an error saving your page.")}})};this.extractPageXmlFromTemplateXml=function(q){var t=b(q);var x=b(this.pageXml);var D=this;var f=new Object();t.find("region").each(function(){templateRegionId=b(this).children("regionId").text();f[templateRegionId]=b(this)});var B=new Object();x.find("region").each(function(){pageRegionId=b(this).children("regionId").text();B[pageRegionId]=b(this)});for(C in this.overridableTemplateRegions){var y=f[C];if(y&&y.find("region").length>0){var e=B[C];if(e){e.parent()[0].replaceChild(y[0],e[0])}else{x.find("Page regionBranches regions").append(f[C])}}}var h=new Object();t.find("regionWidget").each(function(){C=b(this).children("regionId").text();h[C]=b(this)});var j=new Object();x.find("regionWidget").each(function(){C=b(this).children("regionId").text();j[C]=b(this)});var k=new Array();for(C in h){var y=f[C];if(D.isRegionIdOverridable(C)){k[C]=h[C]}y.parents("region").each(function(){var E=b(this).children("regionId").text();if(D.isRegionIdOverridable(E)){k[C]=h[C]}})}var A=x.find("Page regionBranches regionWidgetAssociations");for(var C in k){var z=k[C];var n=j[C];if(z){if(n){n.parent()[0].replaceChild(z[0],n[0])}else{A.append(z)}}}};this.isRegionIdOverridable=function(f){for(var e in this.overridableTemplateRegions){if(e==f){return true}}return false};this.isAncestor=function(e,f){if(e==f){return true}return false};this.htmlToRegionTree=function(e,f){return b.ajax({url:b.perc_paths.TEMPLATE_HTML_PARSE+"/",dataType:"xml",async:false,type:"POST",contentType:"text/xml",data:e,processData:false})};this.getPageObjectXml=function(){return this.pageXml};this.getPageId=function(){return this.pageId};this.getTemplateId=function(){return this.templateId};this.getPageName=function(){return this.pageName};this.findRegionByIdHelper=function(h,e,f){findId=e[0];if(h.getId()==findId){f.push(h)}};this.findRegionById=function(e){foundRegions=new Array();this.traverseRegion(this.templateRootRegion,this.findRegionByIdHelper,[e],foundRegions);return foundRegions[0]};this.traverseRegion=function(k,h,e,f){h(k,e,f);if(!k.hasSubRegions()){return}else{var j=k.getSubRegions();if(j!=null){for(r in j){this.traverseRegion(j[r],h,e,f)}}}}}})(jQuery);var regionWidgetAssociationXmlString="";(function(b){b.Perc_Template_class=function(){this.loadTemplate=function(f,h,j){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/"+f,dataType:"xml",type:"GET",success:function(n,k){e.parseTemplateObject(n);j("")},error:function(){alert("unable to load template "+f)}})};this.parseTemplateObject=function(k){this.rootRegion=null;var n=b(k);this.templateObject=k;var f=n.find("Template regionTree");var e=f.find("rootRegion children region:first");var h=f.find("regionWidgetAssociations");var j=n.find("Template cssMarkup");this.parseRegions(e,null);this.parseRegionWidgetAssociations(h)};this.parseRegions=function(e,j){var x=this;var f=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var h=e.children("regionId").text();if(f==h.substr(0,f.length)){var n=parseInt(h.substr(f.length));this.regionIdInc=Math.max(this.regionIdInc,n)}var q=new b.Perc_Region_class(h);if(j!=null){j.addSubRegion(q,true)}else{this.rootRegion=q}var k=e.children("children");var t=b(k.find("code templateCode:first").text());q.setVertical(!t.hasClass("perc-horizontal"));k.children("region").each(function(){x.parseRegions(b(this),q)})};this.parseRegionWidgetAssociations=function(f){append=true;var e=this;f.find("regionWidget").each(function(){regionId=b(this).find("regionId").text();widgetItems=b(this).find("widgetItems");widgetItems.find("widgetItem").each(function(){definitionId=b(this).find("definitionId").text();var h=e.createNewWidget(definitionId);h.setFromXml(b(this));e.addWidget(h,regionId,true)})})};this.save=function(y,e){var A=this;var n=this.htmlToRegionTree(this.rootRegion.generateHtml(false));var j=b(n.responseXML);var x=j.find("Region children region:first");var h=b(A.templateObject).find("Template regionTree");var q=h.find("rootRegion children region:first");q.replaceWith(x);var t=this.rootRegion.generateWidgetAssociationsXml(true);var z=b.xmlDOM(t);var k=z.context.documentElement;var f=h.find("regionWidgetAssociations");f.replaceWith(k);b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/",type:"POST",contentType:"text/xml",data:A.templateObject,dataType:"xml",processData:false,success:function(C,B){e("success",C)},error:function(D,B,C){e("error",C)}})}};b.Perc_Region_class=function(e){this.lorem="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eleifend velit quis risus adipiscing ullamcorper. ";this.regionid=e;this.css=new Object();this.vertical=true;this.subRegions=null;this.widgets=null;this.regionparent=null;this.dirty=false;this.locked=false;this.overridable=false;this.overriden=false;this.pageRegion=false;this.widgetHtml="";this.getId=function(){return this.regionid};this.getParent=function(){return this.regionparent};this.nextSibling=function(){if(this.regionparent==null){return null}var f=this.regionparent.getSubRegions().length;if(f<2){return null}for(var h=0;h<this.regionparent.getSubRegions().length;h++){if(this.regionparent.getSubRegions()[h].regionid==this.regionid){if(h<(f-2)){return this.regionparent.getSubRegions()[h+1]}return null}}};this.previousSibling=function(){if(this.regionparent==null){return null}var f=this.regionparent.getSubRegions().length;if(f<2){return null}for(var h=0;h<this.regionparent.getSubRegions().length;h++){if(this.regionparent.getSubRegions()[h].regionid==this.regionid){if(h>0){return this.regionparent.getSubRegions()[h-1]}return null}}};this.setOverridable=function(f){this.overridable=f};this.isOverridable=function(){return this.overridable};this.setOverridden=function(f){this.overridden=f};this.isOverridden=function(){return this.overridden};this.setPageRegion=function(f){this.pageRegion=f};this.isPageRegion=function(){return this.pageRegion};this.isLeaf=function(){return(!this.hasWidgets()&&!this.hasSubRegions())};this.setParent=function(f){this.regionparent=f};this.isDirty=function(){return this.dirty};this.setDirty=function(f){this.dirty=f};this.isVertical=function(){return this.vertical};this.getSubRegions=function(){return this.subRegions};this.getWidgets=function(){return this.widgets};this.hasSubRegions=function(){return(this.subRegions!=null&&this.subRegions.length>0)};this.hasWidgets=function(){return(this.widgets!=null&&this.widgets.length>0)};this.addSubRegion=function(h,f){if(this.hasWidgets()){alert("Cannot add a region if widgets exist.");return}if(this.subRegions==null){this.subRegions=new Array()}if(f){this.subRegions.push(h)}else{this.subRegions.unshift(h)}h.setParent(this)};this.insertSubRegion=function(h,f){if(this.hasWidgets()){alert("Cannot insert a region if widgets exist.");return}if(this.subRegions==null){this.subRegions=new Array()}if(this.subRegions.length==0||this.subRegions.length<f){this.subRegions.push(h)}else{this.subRegions.splice(f,0,h)}h.setParent(this)};this.addWidget=function(h,f){if(this.hasSubRegions()){alert("Cannot add a widget if sub-regions exist.");return}if(this.widgets==null){this.widgets=new Array()}if(f){this.widgets.push(h)}else{this.widgets.unshift(h)}};this.insertWidget=function(h,f){if(this.hasSubRegions()){alert("Cannot insert a region if widgets exist.");return}if(this.widgets==null){this.widgets=new Array()}if(this.widgets.length==0||this.widgets.length<f){this.widgets.push(h)}else{this.widgets.splice(f,0,h)}};this.getSubRegion=function(j){if(this.subRegions==null){return null}for(var f=0;f<this.subRegions.length;f++){var h=this.subRegions[f];if(h.regionid==j){return h}}return null};this.getIndex=function(){if(this.regionparent!=null){var h=this.regionparent.getSubRegions();for(var f=0;f<h.length;f++){var j=h[f];if(j.regionid==this.regionid){return f}}}return -1};this.getWidget=function(h){if(this.widgets==null){return null}for(var f=0;f<this.widgets.length;f++){var j=this.widgets[f];if(j.widgetid==h){return j}}return null};this.removeSubRegion=function(j){if(this.subRegions==null){return}for(var f=0;f<this.subRegions.length;f++){var h=this.subRegions[f];if(h.regionid==j){this.subRegions.splice(f,1);h.setParent(null);return h}}};this.removeWidget=function(h){if(this.widgets==null){return}for(var f=0;f<this.widgets.length;f++){var j=this.widgets[f];if(j.widgetid==h){this.widgets.splice(f,1);return j}}};this.setVertical=function(f){this.vertical=f};this.getCss=function(){return this.css};this.setCss=function(f){if(f==null){return}this.css=f};this.setCssAttribute=function(f,h){this.css[f]=h};this.clearCss=function(){this.css=new Object()};this.generateInnerVelocity=function(){var h="";h+='<div class="';h+=this.vertical?"perc-vertical":"perc-horizontal";h+='">';if(this.hasSubRegions()){for(var f in this.subRegions){h+=this.subRegions[f].generateInnerVelocity()}if(!this.vertical){h+='<div class="clear-float"></div>'}}else{h+="#region('"+this.regionid+"' '' '' '' '')"}h+="</div>";return h};this.generateWidgetAssociationsXml=function(f){regionWidgetAssociationXmlString="";if(f){regionWidgetAssociationXmlString="<regionWidgetAssociations>\n"}if(this.hasWidgets()){regionWidgetAssociationXmlString+=this.getRegionWidgetXmlString();if(f){regionWidgetAssociationXmlString+="</regionWidgetAssociations>\n"}return regionWidgetAssociationXmlString}for(r in this.subRegions){this.getRegionWidgetsXmlString(this.subRegions[r])}if(f){regionWidgetAssociationXmlString+="</regionWidgetAssociations>\n"}return regionWidgetAssociationXmlString};this.getRegionWidgetsXmlString=function(f){regionWidgetAssociationXmlString+=f.getRegionWidgetXmlString();for(r in f.subRegions){this.getRegionWidgetsXmlString(f.subRegions[r])}};this.getRegionWidgetXmlString=function(){if(!this.hasWidgets()){return""}var f="";f="	<regionWidget>\n";f+="		<regionId>"+this.regionid+"</regionId>\n";f+="		<widgetItems>\n";for(w in this.widgets){f+="			<widgetItem>\n";f+="				<definitionId>"+this.widgets[w].getWidgetDefinitionId()+"</definitionId>\n";f+="				<id>"+this.widgets[w].getId()+"</id>\n";f+="				<name>"+this.widgets[w].getId()+"</name>\n";f+="				<properties>\n";for(property in this.widgets[w].properties){f+="					<property>\n";f+="						<name>"+property+"</name>\n";f+="						<value>"+this.widgets[w].properties[property]+"</value>\n";f+="					</property>\n"}f+="				</properties>\n";f+="			</widgetItem>\n"}f+="		</widgetItems>\n";f+="	</regionWidget>\n";return f};this.innerHtml="";this.setInnerHtml=function(f){this.innerHtml=f};this.render=function(f){alert(["#"+this.regionid,f]);b("#"+this.regionid).replaceWith(f)};this.generateHtml=function(n){var k="";var f="perc-region";if(!this.hasSubRegions()){f+=" perc-region-leaf"}k+='<div class="';k+=f;k+='" ';k+=('id="'+this.regionid+'" title="'+this.regionid+'">');k+='<div class="';k+=this.vertical?"perc-vertical":"perc-horizontal";k+='">';if(this.hasSubRegions()){for(var h in this.subRegions){k+=this.subRegions[h].generateHtml(n)}if(!this.vertical){k+='<div class="clear-float"></div>'}}else{if(this.hasWidgets()){if(n){k+="#region('"+this.regionid+"' '' '' '' '')"}else{for(var j in this.widgets){widgetId=this.widgets[j].getId();k+=this.widgets[j].render()}}}}k+="</div></div>";return k};this.setWidgetHtml=function(f){this.widgetHtml=f};this.getWidgetHtml=function(){return this.widgetHtml}};b.Perc_Widget_class=function(h,f,e){this.parentRegion=e;this.widgetid=h;this.widgetname=null;this.widgetDefinitionId=f;this.html=null;this.assetIds=new Array();this.properties=new Object();this.widgetItemXml=null;this.getParentRegion=function(){return this.parentRegion};this.setFromXml=function(k){var j=this;this.widgetItemXml=k;this.widgetDefinitionId=k.find("definitionId").text();this.widgetid=k.find("id").text();k.find("properties property").each(function(){var q=b(this).find("name").text();var n=JSON.parse(b(this).find("value").text());if(q!=null&&q!=""){j.properties[q]=n}})};this.setProperty=function(k,j){this.properties[k]=j};this.alert=function(){var j="";for(p in this.properties){j+=""+p+" = "+this.properties[p]+"\n"}alert("Widget Properties: \n"+j)};this.setHtml=function(j){this.html=j};this.render=function(){var j="<div title='"+this.widgetid+"' id='"+this.widgetid+"' class='perc-widget'>";if(this.html!=null){j+=this.html}else{j+="&nbsp;"}j+="</div>";return j};this.getHtml=function(j){var k='<div class="perc-widget" ';k+=('id="'+this.widgetid+'">');if(this.html!=null){k+=this.html}else{k+="<b>Empty ";k+=this.widgetDefinitionId;k+=" widget</b>"}k+="</div>";return k};this.getProperties=function(){return this.properties};this.getId=function(){return this.widgetid};this.getName=function(){return this.widgetname};this.setName=function(j){this.widgetname=j};this.getWidgetDefinitionId=function(){return this.widgetDefinitionId};this.setWidgetDefinitionId=function(j){this.widgetDefinitionId=j};this.getAssetIds=function(){return this.assetIds}}})(jQuery);(function(b){b.perc_template_layout_helper=new function(){this.lorem="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eleifend velit quis risus adipiscing ullamcorper. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed laoreet molestie congue. In tincidunt enim at sem faucibus eu iaculis sem viverra. ";this.rootRegion=null;this.regionTempPrefix="temp-region-";this.regionPagePrefix="page-region-";this.pseudoWidgetPrefix="pseudo-widget-id-";this.regionIdInc=0;this.widgetIdInc=0;this.templateObjectXml=null;this.objectId=null;this.objectType=null;this.utils=b.perc_utils;this.page=null;this.Layout={NORTH:"north",SOUTH:"south",EAST:"east",WEST:"west",CENTER:"center"};this.Type={PAGE:"page",TEMPLATE:"template"};this.load=function(e,h,j){var f=this;this.objectId=e;this.objectType=h;if(h==this.Type.TEMPLATE){f.loadTemplate(e,this.Type.TEMPLATE,j)}else{if(h==this.Type.PAGE){f=this;this.page=new b.Perc_Page_class();this.page.setHelper(this);this.page.load(e,function(k){f.loadTemplate(k,h,j)})}}};this.loadTemplate=function(f,h,j){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/"+f,dataType:"xml",type:"GET",success:function(n,k){if(h==e.Type.PAGE){e.page.mergePageXmlIntoTemplateXml(n)}e.parseTemplateObjectXml(n,j);if(h==e.Type.PAGE){e.page.setOriginalTemplate(e.templateObjectXml,e.rootRegion)}},error:function(){alert("Unable to load template "+f)}})};this.updateAllWidgetHtmlFromRest=function(){$page=b(this.page.pageXml);alert(this.page.pageXml.textContent);$pageRegionWidgets=b(this.page.pageXml).find("Page regionBranches regionWidgetAssociations regionWidget regionId");$pageRegionWidgets.children("regionId").each(function(){alert(b(this).text())})};this.updateWidgetsHtmlFromRest=function(e,k,j){var h=null;$pageOrTemplateXml=b(e);if($pageOrTemplateXml.find("Template").length>0){h=$pageOrTemplateXml.find("Template regionTree regionWidgetAssociations")}else{h=$pageOrTemplateXml.find("Page regionBranches regionWidgetAssociations")}var f=null;h.find("regionWidget").each(function(){id=b(this).find("regionId").text();if(id==k){f=b(this)}})};this.parseTemplateObjectXml=function(h,q){this.rootRegion=null;this.templateObjectXml=h;var f=b(this.templateObjectXml);var e=f.find("Template regionTree rootRegion children region:first");var j=f.find("Template regionTree regionWidgetAssociations");var k=f.find("Template cssMarkup");var n=f.find("Template cssRegion");this.parseRegions(e,null);this.parseRegionWidgetAssociations(j,q)};this.parseRegions=function(e,j){var x=this;var f=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var h=e.children("regionId").text();if(f==h.substr(0,f.length)){var n=parseInt(h.substr(f.length));this.regionIdInc=Math.max(this.regionIdInc,n)}var q=new b.Perc_Region_class(h);if(j!=null){j.addSubRegion(q,true)}else{this.rootRegion=q}var k=e.children("children");var t=b(k.find("code templateCode:first").text());q.setVertical(!t.hasClass("perc-horizontal"));k.children("region").each(function(){x.parseRegions(b(this),q)})};this.parseRegionWidgetAssociations=function(f,h){append=true;var e=this;f.find("regionWidget").each(function(){regionId=b(this).find("regionId").text();parentRegion=e.getRegion(regionId,e.rootRegion);var k=null;var j=new Object();widgetItems=b(this).find("widgetItems");widgetItems.find("widgetItem").each(function(){definitionId=b(this).find("definitionId").text();k=e.createNewWidget(definitionId,parentRegion);k.setFromXml(b(this));e.addWidget(k,regionId,true);j[k.getId()]=k})});h()};this.markTemplateRegionOverride=function(e){this.page.overrideTemplateRegion(e)};this.markTemplateWidgetOverride=function(e){this.page.overrideTemplateWidget(e)};this.clearPage=function(e){this.page.clear(e)};this.save=function(f,h){var e=this;if(f==this.Type.PAGE){this.templateModelToTemplateXml(true);this.page.extractPageXmlFromTemplateXml(this.templateObjectXml);this.page.save(h)}else{if(f==this.Type.TEMPLATE){e.templateModelToTemplateXml(true);b(e.templateObjectXml).find("Template regionTree regionWidgetAssociations regionWidget widgetItems widgetItem id").each(function(){var k=b(this).text();var j=parseInt(k);if(isNaN(j)||j==0){this.parentNode.removeChild(this)}});b.ajax({url:b.perc_paths.TEMPLATE_LOAD_SAVE+"/",type:"POST",contentType:"text/xml",data:e.templateObjectXml,dataType:"xml",processData:false,success:function(k,j){h("success",k)},error:function(n,j,k){h("error",k)}})}else{alert("Unable to save Page or Template")}}};this.templateModelToTemplateXml=function(t){var z=this;var A=this.rootRegion.generateHtml(t);var k=this.htmlToRegionTree(A);var h=b(k.responseXML);var x=h.find("Region children region:first");var f=b(z.templateObjectXml).find("Template regionTree");var n=f.find("rootRegion children region:first");n.parent()[0].replaceChild(x[0],n[0]);var q=this.rootRegion.generateWidgetAssociationsXml(true);var y=b.xmlDOM(q);var j=y.context.documentElement;var e=f.find("regionWidgetAssociations");e.parent()[0].replaceChild(j,e[0])};this.getTemplateHtmlFromRest=function(e){rootRegionId=this.rootRegion.getId();this.getRegionHtmlFromRest(this.templateObjectXml,rootRegionId,e)};this.getRegionHtmlFromRest=function(f,j,h){var e=this;b.ajax({url:b.perc_paths.TEMPLATE_RENDER+"/"+j,type:"POST",contentType:"text/xml",dataType:"xml",data:f,processData:false,async:false,success:function(k){regionHtml=b(k).find("result").text();h(regionHtml)},error:function(q,k,n){alert("Unable to retrieve HTML from REST service: "+n)}})};this.addRegion=function(f,e){var h=this.getRegion(f,this.rootRegion);if(h==null){return null}h.setOverridden(true);switch(e){case this.Layout.NORTH:this._insertNewRegion(h,true,false);break;case this.Layout.SOUTH:this._insertNewRegion(h,true,true);break;case this.Layout.EAST:this._insertNewRegion(h,false,true);break;case this.Layout.WEST:this._insertNewRegion(h,false,false);break;case this.Layout.CENTER:break}return h};this.createNewWidget=function(e,f){return new b.Perc_Widget_class(this._createPseudoWidgetId(),e,f)};this.addWidget=function(h,j,e){var f=this.getRegion(j,this.rootRegion);if(f==null){alert("Region does not exist.");return null}if(f.hasSubRegions()){alert("Cannot add widget to region with sub regions.");return null}f.setOverridden(true);f.addWidget(h,e);return h};this.getRegion=function(k,j){if(j==null){j=this.rootRegion}if(j.getId()==k){return j}if(j.hasSubRegions()){var f=j.getSubRegions();for(var h in f){var e=this.getRegion(k,f[h]);if(e!=null){return e}}}return null};this.getWidgetRegion=function(j,k){if(k==null){return null}if(k.getWidget(j)!=null){return k}if(k.hasSubRegions()){var f=k.getSubRegions();for(var h in f){var e=this.getWidgetRegion(j,f[h]);if(e!=null){return e}}}return null};this.removeRegion=function(j){var h=this.getRegion(j,this.rootRegion);if(h==null){return null}var f=h.getParent();if(f==null){this.rootRegion=null;return h}else{if(f.getSubRegions().length>2){return f.removeSubRegion(h.regionid)}else{f.removeSubRegion(h.getId());var e=f.getSubRegions()[0];f.removeSubRegion(e.regionid);f.setVertical(true);if(e.hasSubRegions()){this._moveSubRegions(e,f)}else{if(e.hasWidgets()){this._moveWidgets(e,f)}}f.setCss(e.getCss());return h}}};this.removeWidget=function(f){var e=this.getWidgetRegion(f,this.rootRegion);if(e!=null){return e.removeWidget(f)}return null};this.moveRegion=function(n,f,j){var k=this.getRegion(f,this.rootRegion);if(k==null){throw ("target region does not exist.")}var e=k.getIndex();var h=j?e:e+1;this.orderSubRegion(n,h)};this.orderSubRegion=function(j,e){var h=this.getRegion(j,this.rootRegion);var f=h.getParent();if(h!=null&&f!=null){f.insertSubRegion(f.removeSubRegion(j),e)}};this.orderWidget=function(j,f,k,n){if(j==null){alert("Cannot order widget "+j);return}var e=this.getRegion(f,this.rootRegion);var h=this.getRegion(k,this.rootRegion);if(e!=null&&h!=null){h.insertWidget(e.removeWidget(j),n)}else{alert("Unable to reorder widget "+j+" from region "+f+" to region "+k+" at position "+n+".\nOne of the regions does not exist.")}};this._createNewRegionId=function(){var e=this.objectType=this.Type.TEMPLATE?this.regionTempPrefix:this.regionPagePrefix;var f=e+(++this.regionIdInc);return f};this._createPseudoWidgetId=function(){return this.pseudoWidgetPrefix+(this.widgetIdInc++)};this._insertNewRegion=function(k,f,e){var n=new b.Perc_Region_class(this._createNewRegionId(),null);n.setPageRegion(true);var j=f?!k.isVertical():k.isVertical();if(k.hasSubRegions()){if(j){var q=this._wrapSubRegions(k);k.setVertical(f);k.addSubRegion(q,true)}k.addSubRegion(n,e)}else{var h=new b.Perc_Region_class(this._createNewRegionId(),null);h.setVertical(k.isVertical());k.setVertical(f);if(k.hasWidgets()){this._moveWidgets(k,h)}k.addSubRegion(n,true);k.addSubRegion(h,!e);h.setPageRegion(true)}};this._wrapSubRegions=function(e){var f=new b.Perc_Region_class(this._createNewRegionId(),null);f.setVertical(e.isVertical());this._moveSubRegions(e,f);return f};this._moveWidgets=function(h,j){var f=h.getWidgets();if(f==null||f.length==0){return}for(var e=f.length-1;e>-1;e--){j.addWidget(h.removeWidget(f[e].widgetid),false)}};this._moveSubRegions=function(h,j){var f=h.getSubRegions();if(f==null||f.length==0){return}for(var e=f.length-1;e>-1;e--){j.addSubRegion(h.removeSubRegion(f[e].regionid),false)}};this.isWidgetAllowed=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())&&!e.hasSubRegions()};this.isRegionAllowed=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())};this.isRegionResizable=function(f){var e=this.getRegion(f,this.rootRegion);return(e.isOverridable()||e.isPageRegion())};this.htmlToRegionTree=function(e,f){return b.ajax({url:b.perc_paths.TEMPLATE_HTML_PARSE+"/",dataType:"xml",async:false,type:"POST",contentType:"text/xml",data:e,processData:false})}}})(jQuery);var gSelectTemp=null;(function($){$.widget("ui.template_layout",{helper:null,showBorders:true,pageId:null,type:null,controller:null,dropPosition:null,hoveringRegion:null,POSITION_NORTH:0,POSITION_WEST:3,selectedRegion:null,selectedWidget:null,dropAction:null,DROP_ACTION_ADD_REGION:0,DROP_ACTION_SORT_REGION:1,DROP_ACTION_ADD_WIDGET:2,borderWidth:1,padding:10,w1start:null,w1now:null,w2start:null,w2now:null,next:null,repositioning:false,originalRegionId:null,_init:function(){var self=this;this.helper=$.perc_template_layout_helper;this.controller=$.perc_layout_controller;this.controller.setHelper(this.helper);this.controller.getWidgetLibrary(function(widgetLibrary){self.renderWidgetLibrary(widgetLibrary)});$("#perc-save").click(function(){self._save()});$("#perc-layout-tab").click(function(){self.initialize()});$("#perc-clear-page").click(function(){self.helper.clearPage(function(){self.render()})});$("#perc-region-edit").perc_dialog({modal:true,zIndex:100000,width:"600px",autoOpen:false,open:function(){self.originalRegionId=self.selectedRegion.attr("id");$("#perc-region-name").val(self.selectedRegion.attr("id"));$("#perc-region-width").val(self.selectedRegion.css("width"));$("#perc-region-height").val(self.selectedRegion.css("height"));$("#perc-region-padding").val(self.selectedRegion.css("padding"));$("#perc-region-margin").val(self.selectedRegion.css("margin"))},percButtons:{Ok:{click:function(){self.selectedRegion.attr({id:$("#perc-region-name").val()});self.selectedRegion.css("width",$("#perc-region-width").val());self.selectedRegion.css("height",$("#perc-region-height").val());self.selectedRegion.css("padding",$("#perc-region-padding").val());self.selectedRegion.css("margin",$("#perc-region-margin").val());if(self.helper.regionCSS[$("perc-region-name").val()]!=self.originalRegionId){eval("delete self.helper.regionCSS."+self.originalRegionId+";")}$("#perc-menu").css("display","none");$("#perc-region-edit").dialog("close")},id:"perc-region-editor-dialog-save"},Cancel:{click:function(){$("#perc-menu").css("display","none");$(this).dialog("close")},id:"perc-region-editor-dialog-cancel"}}});$("#perc-widget-edit").perc_dialog({modal:true,zIndex:100000,autoOpen:false,open:function(){var html=self.controller.getCurrentWidgetDefinition().render();$("#perc-widget-property-form").html(html)},percButtons:{Cancel:{click:function(){$("#perc-menu").css("display","none");$("#perc-widget-edit").dialog("close")},id:"perc-widget-editor-dialog-cancel"},Ok:{click:function(){$("#perc-menu").css("display","none");self.controller.editWidgetOk(function(){self.render()});$("#perc-widget-edit").dialog("close")},id:"perc-widget-editor-dialog-save"}}})},renderWidgetLibrary:function(widgetLibrary){$("#perc-widget-library").html(widgetLibrary.html());this._addWidgetSupport();$("#perc-widget-library-toggle").click(function(){$("#perc-widget-library").toggle()})},_addWidgetSupport:function(){var self=this;$(".perc-toolbar-item").draggable({opacity:0.7,helper:function(){return $(this).clone().appendTo("body").css("zIndex",5).show()},start:function(evt,ui){self.dropAction=self.DROP_ACTION_ADD_WIDGET}})},_save:function(){var self=this;this.helper.save(this.type,function(){self.render()})},setPageId:function(pageId){this.pageId=pageId},initialize:function(){if(this.pageId==null&&gSelectTemp==null){return}var self=this;if(this.pageId){this.type=this.helper.Type.PAGE;this.helper.load(this.pageId,this.helper.Type.PAGE,function(html){self._load(html);self.renderCSS(false)})}else{if(gSelectTemp){this.type=this.helper.Type.TEMPLATE;this.helper.load(gSelectTemp,this.helper.Type.TEMPLATE,function(html){self._load(html);self.renderCSS(false)})}else{alert("Unable to determine Page or Template ID")}}},_load:function(html){this.render();this.renderCSS();var self=this;$("#showBorders").click(function(){self.showBorders=!self.showBorders;if(self.showBorders){$(".perc-region").addClass("perc-region-puff")}else{$(".perc-region").removeClass("perc-region-puff")}});$("#region-tool").draggable({opacity:0.7,helper:function(){return $(this).clone().appendTo("body").css("zIndex",5).show()},start:function(evt,ui){self.dropAction=self.DROP_ACTION_ADD_REGION},stop:function(evt,ui){self.hoveringRegion=null}});$("#perc-close").click(function(){if(self.selectedRegion){var regionId=self.selectedRegion.attr("id");self.helper.removeRegion(regionId);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(regionId)}}else{if(self.selectedWidget){var regionId=self.selectedWidget.parent().parent().attr("id");var widgetId=self.selectedWidget.attr("id");self.helper.removeWidget(self.selectedWidget.attr("id"));if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(regionId)}}}self.render()});$("#perc-edit").click(function(){if(self.selectedRegion){$("#perc-region-edit").dialog("open")}else{if(self.selectedWidget){var widgetId=self.selectedWidget.attr("id");var widgetParentRegionId=self.selectedWidget.parent().parent().attr("id");var widgetParentRegion=self.helper.getRegion(widgetParentRegionId);var widget=widgetParentRegion.getWidget(widgetId);self.controller.editWidgetStart(widget,null)}}});this._regionize()},_autoSizeHorizontal:function(){var self=this;$(".perc-horizontal").each(function(){horizParent=$(this);var depth=horizParent.parents(".perc-region").length;var childNumber=horizParent.children().length-1;var parentWidth=horizParent.width();var parentInnerWidth=parentWidth-(2*self.padding+2*self.borderWidth)*depth;parentInnerWidth=parentWidth;w=Math.floor((parentInnerWidth-(childNumber*2*(self.padding+self.borderWidth)))/childNumber);if(isNaN(w)||w<0){return}horizParent.children().each(function(){$(this).width(w)});var maxHeight=-1;horizParent.children().each(function(){if($(this).height()>maxHeight){maxHeight=$(this).height()}});horizParent.children().each(function(){if($(this).attr("class")!="clear-float"){$(this).css("min-height",maxHeight)}})})},_regionize:function(){var self=this;$(".perc-region-leaf").css("background-color","#DDFFDD");$(".perc-region").addClass("perc-region-puff");$(".perc-widget").addClass("perc-widget-puff");$(".clear-float").remove();$(".perc-horizontal").append('<div class="clear-float"></div>');$("#perc-menu").css("display","none");var moveWidgetFromRegion=null;var moveWidgetToRegion=null;var moveWidget=null;$(".perc-horizontal").addClass("perc-sortable");$(".perc-vertical").addClass("perc-sortable");$(".perc-region .perc-sortable").sortable({connectWith:".perc-region .perc-sortable",dropOnEmpty:true,start:function(event,ui){$("#perc-menu").css("display","none");moveWidget=ui.item.attr("id");moveWidgetFromRegion=ui.item.parent().parent().attr("id")},stop:function(event,ui){pos=0;ui.item.parent().children().each(function(){if($(this).attr("id")!=ui.item.attr("id")){pos++}else{return false}});moveWidgetToRegion=ui.item.parent().parent().attr("id");self.helper.orderWidget(moveWidget,moveWidgetFromRegion,moveWidgetToRegion,pos);self._autoSizeHorizontal()}});$(".perc-widget").click(function(event){event.stopPropagation();$(".perc-region").each(function(){$(this).removeClass("perc-selected")});$(".perc-widget").each(function(){$(this).removeClass("perc-selected")});$(this).addClass("perc-selected");self.selectedRegion=null;self.selectedWidget=$(this);$("#perc-menu").css("position","absolute").css("left",$(this).width()+$(this).offset().left-45).css("top",$(this).offset().top).css("zIndex","10").css("display","block")});$(".perc-region").click(function(event){event.stopPropagation();$(".perc-region").each(function(){$(this).removeClass("perc-selected")});$(".perc-widget").each(function(){$(this).removeClass("perc-selected")});$(this).addClass("perc-selected");self.selectedRegion=$(this);$("#perc-menu").css("position","absolute").css("left",$(this).width()+$(this).offset().left-25).css("top",$(this).offset().top).css("zIndex","10").css("display","block")});$(".perc-horizontal > .perc-region").resizable({handles:"e",start:function(event,ui){$("#perc-menu").css("display","none");self.next=$(this).next();self.w1start=$(this).width();self.w2start=self.next.width()},resize:function(event,ui){self.w1now=$(this).width();self.w2now=self.w2start-(self.w1now-self.w1start);self.next.width(self.w2now);$(this).css("position","relative").css("top","0px").css("left","0px");self.next.css("position","relative").css("top","0px").css("left","0px");$(this).height("")},stop:function(event,ui){if(self.type==self.helper.Type.PAGE&&!self.helper.isRegionResizable($(this).attr("id"))){$(this).width(self.w1start);self.next.width(self.w2start)}$(this).height("")}});$(".perc-vertical > .perc-region").resizable({handles:"s",start:function(event,ui){$("#perc-menu").css("display","none");self.next=$(this).next();self.w1start=$(this).height();self.w2start=self.next.height()},resize:function(event,ui){self.w1now=$(this).height();self.w2now=self.w2start-(self.w1now-self.w1start);self.next.height(self.w2now);$(this).css("position","relative").css("top","0px").css("left","0px");self.next.css("position","relative").css("top","0px").css("left","0px");self.next.height($(this).height())},stop:function(event,ui){}});$(".perc-vertical > .perc-region").draggable({distance:20,containment:"parent",axis:"y",start:function(){self.repositioning=true;$("#perc-menu").css("display","none")},helper:function(){var height=$(this).height()+2*self.padding+2*self.borderWidth;var width=$(this).width()+2*self.padding;return"<div style='width:"+width+"px;height:"+height+"px;background-color:grey;zIndex:5;opacity:0.4'></div>"},stop:function(){self.repositioning=false;$(".perc-region").removeClass("east").removeClass("").removeClass("north").removeClass("south").removeClass("hovering");if(self.dropPosition==self.POSITION_NORTH){self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),true)}else{self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),false)}self.render()}});$(".perc-horizontal > .perc-region").draggable({distance:20,containment:"parent",axis:"x",start:function(){$("#perc-menu").css("display","none");self.repositioning=true},helper:function(){var height=$(this).height()+2*self.padding+2*self.borderWidth;var width=$(this).width()+2*self.padding+2*self.borderWidth;return"<div style='top:"+$(this).position().top+"px;width:"+width+"px;height:"+height+"px;background-color:grey;zIndex:5;opacity:0.4'></div>"},stop:function(){self.repositioning=false;$(".perc-region").removeClass("east").removeClass("").removeClass("north").removeClass("south").removeClass("hovering");if(self.dropPosition==self.POSITION_){self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),true)}else{self.helper.moveRegion($(this).attr("id"),self.hoveringRegion.attr("id"),false)}self.render()}});$(".perc-region").each(function(){var self=$(this);self.children("perc-region-feedback").remove();var region_id=self.attr("id");var dirs=$.map(["north","south","east","west"],function(dir){return make_feedback_droppable(region_id,dir)});var topwidth=(self.innerWidth()-20)+"px";dirs[0].css({top:"0",left:"10px",width:topwidth,height:"10px"});dirs[1].css({bottom:"0",left:"10px",width:topwidth,height:"10px"});dirs[2].css({top:"0",right:"0",height:"100%",width:"10px"});dirs[3].css({top:"0",left:"0",height:"100%",width:"10px"});$.each(dirs,function(){self.append(this)})});function make_feedback_droppable(region_id,direction){return $("<div/>").addClass("perc-region-feedback").css({position:"absolute"}).droppable({accept:"#region-tool",tolerance:"pointer",greedy:true,hoverClass:"perc-show-feedback",drop:function(){if(self.type==self.helper.Type.PAGE&&$.inArray(region_id,self.helper.page.lockedTemplateRegions)!=-1){alert("This region is locked.");return}self.helper.addRegion(region_id,direction);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateRegionOverride(region_id)}self.render()}})}$(".perc-region").droppable({accept:".perc-region, #region-tool, .perc-toolbar-item",greedy:true,tolerance:"pointer",over:function(event,ui){$(this).addClass("hovering");self.hoveringRegion=$(this)},out:function(event,ui){$(".perc-region").removeClass("hovering")},drop:function(event,ui){var regionId=self.hoveringRegion.attr("id");if(self.type==self.helper.Type.PAGE&&$.inArray(regionId,self.helper.page.lockedTemplateRegions)!=-1){alert("This region is locked.");return}if(self.dropAction==self.DROP_ACTION_ADD_WIDGET){widgetDefinitionId=ui.draggable.attr("id");self.dropAction=null;newWidget=self.helper.createNewWidget(widgetDefinitionId,self.helper.getRegion(regionId));widget=self.helper.addWidget(newWidget,regionId,true);if(self.type==self.helper.Type.PAGE){self.helper.markTemplateWidgetOverride(regionId)}self.render()}}});this._autoSizeHorizontal()},renderCSS:function(){for(selector in this.helper.regionCSS){for(property in this.helper.regionCSS[selector]){if(property=="width"||property=="height"){$("#"+selector).css(property,this.helper.regionCSS[selector][property])}else{$("#"+selector).css(property,this.helper.regionCSS[selector][property])}$("#"+selector).css(property,this.helper.regionCSS[selector][property])}}},render:function(){html=this.helper.rootRegion.generateHtml(false);this.element.html(html);this._regionize();this.renderCSS()},destroy:function(){$.widget.prototype.apply(this,arguments)}});$.extend($.ui.template_layout,{getter:"value length initialize setPageId",defaults:{option1:"defaultValue"}})})(jQuery);(function(b){b.perc_layout_controller=new function(){this.widget=null;this.widgetDefinitions=new Array();this.currentWidgetDefinition=null;this.templateXml=null;this.pageXml=null;this.helper=null;this.setHelper=function(e){this.helper=e};this.getCurrentWidgetDefinition=function(){return this.currentWidgetDefinition};this.editWidgetStart=function(f,h){this.widget=f;this.currentWidgetDefinition=this.widgetDefinitions[f.getWidgetDefinitionId()];var e=this;if(this.currentWidgetDefinition==null){b.perc_widget_definition_client.restGetWidgetDefinition(f.getWidgetDefinitionId(),function(j){if(j.getUserPrefDef()==null){alert("This widget does not have properties");return}e.widgetDefinitions[f.getWidgetDefinitionId()]=j;e.currentWidgetDefinition=j;e.currentWidgetDefinition.setValuesFromWidgetProperties(f.properties);b("#perc-widget-edit").dialog("open")})}else{e.currentWidgetDefinition.setValuesFromWidgetProperties(f.properties);b("#perc-widget-edit").dialog("open")}};this.editWidgetClientValidate=function(){return true};this.editWidgetOk=function(n){var h=this;var j=this.currentWidgetDefinition.getUserPrefDef();for(d in j){var e='.perc-widget-property[name="'+d+'"]';var k=b(e).val();if(j[d].datatype=="bool"){k=b(e).is(":checked")}if(j[d].datatype=="list"){values=k.replace(/^\s+|\s+$/g,"").split("\n");k=new Array();for(v in values){k.push(values[v])}k=JSON.stringify(k)}this.widget.setProperty(d,k)}this.helper.templateModelToTemplateXml();var f=this.widget.getParentRegion();this.helper.getRegionHtmlFromRest(f.getId(),function(q){b(q).find(".perc-widget").each(function(){var t=b(this).attr("widgetId");var x=b(this).attr("id");widget=f.getWidget(x);widget.setHtml(b(this).html())});n()})};this.editWidgetCommit=function(){alert("editWidgetCommit")};this.getWidgetLibrary=function(e){b.perc_widget_library_client.restGetWidgetLibrary(e)};this.init=function(){}}})(jQuery);(function(b){b.perc_widget_library_client=new function(){this.restGetWidgetLibrary=function(f){var e="/Rhythmyx/services/pagemanagement/widget";b.ajax({url:e,dataType:"xml",type:"GET",success:function(j,h){var k=new b.perc_widget_library_model(j);k.init();f(k)},error:function(){alert("Unable to retrieve widget library")}})}};b.perc_widget_definition_client=new function(){this.restGetWidgetDefinition=function(e,f){b.ajax({url:b.perc_paths.WIDGET_FULL+"/"+e,dataType:"xml",type:"GET",success:function(k,h){var j=new b.perc_widget_definition_model(k);j.init(k);f(j)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+e)}})}}})(jQuery);(function(b){b.perc_widget_library_model=function(e){this.widgetLibraryXml=e;this.widgetSummaries=new Array();this.init=function(){var h=this;var f=b(this.widgetLibraryXml);var j=f.find("WidgetSummarys WidgetSummary");j.each(function(){var k=new b.perc_widget_summary_model(b(this));k.init();h.widgetSummaries.push(k)})};this.getWidgetSummaries=function(){return this.widgetSummaries};this.html=function(){var f='<div class="perc-header" style="float:none;">  Drag and drop widgets onto page </div>\n';for(s in this.widgetSummaries){f+=this.widgetSummaries[s].html()}return f}},b.perc_widget_summary_model=function(e){this.$widgetSummaryXml=e;this.icon=null;this.id=null;this.label=null;this.name=null;this.init=function(){this.icon=this.$widgetSummaryXml.children("icon").text();this.id=this.$widgetSummaryXml.children("id").text();this.label=this.$widgetSummaryXml.children("label").text();this.name=this.$widgetSummaryXml.children("name").text()};this.alert=function(){alert([this.icon,this.id,this.label,this.name,this.widgetSummaryXml])};this.html=function(){var f="";f+="<div class='perc-toolbar-item' id='"+this.id+"' name='"+this.name+"'>\n";f+="   <img src='../../Rhythmyx"+this.icon+"' ";f+="       onMouseOver='this.style.cursor=\"pointer\";' >\n";f+="       <div>"+this.label+"</div>\n";f+="</div>\n";return f}};b.perc_widget_definition_model=function(){this.widgetDefinitionXml=null;this.userPrefDef=null;this.setValuesFromWidgetProperties=function(f){for(p in this.userPrefDef){var e=this.userPrefDef[p].name;this.userPrefDef[p].realValue=f[e]}};this.getUserPrefDef=function(){return this.userPrefDef};this.init=function(j){var h=this;this.widgetDefinitionXml=j;var f=b(this.widgetDefinitionXml);var e=f.find("Widget UserPref");if(e.length>0){this.userPrefDef=new Object();e.each(function(){var t=b(this).attr("datatype");var k=b(this).attr("default_value");var q=b(this).attr("display_name");var n=b(this).attr("name");var x=null;if(t==""||t==null){t="string"}else{if(t=="enum"){x=new Object();b(this).find("EnumValue").each(function(){var z=b(this).attr("display_value");var y=b(this).attr("value");x[y]=z})}}h.userPrefDef[n]=(new b.perc_user_pref(t,k,q,n,x))})}};this.render=function(){var e="<table>\n";for(u in this.userPrefDef){e+="\t"+this.userPrefDef[u].render()}e+="</table>\n";return e}}})(jQuery);(function($){$.perc_user_pref=function(datatype,default_value,display_name,name,enumValues){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.enumValues=enumValues;this.realValue=null;this.render=function(){var buff="<tr>\n";var datatype=this.datatype;var value=(this.realValue==null||this.realValue=="")?this.default_value:this.realValue;if(datatype=="string"||datatype=="number"){buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'"></td>\n'}else{if(datatype=="bool"){var checked=(value=="true"||value=="on")?"CHECKED":"";buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="checkbox" '+checked+"></td>\n"}else{if(datatype=="enum"){buff+="   <td>"+this.display_name+": </td>\n";buff+="   <td>\n";buff+='   <select class="perc-widget-property" name="'+this.name+'" value="'+value+'">\n';for(v in enumValues){var selected=(v==value)?"SELECTED":"";buff+='       <option value="'+v+'" '+selected+"> "+enumValues[v]+"   </option>\n"}buff+="   </select>\n";buff+="</td>\n"}else{if(datatype=="list"){var values=eval(value);buff+="   <td>"+this.display_name+": </td>\n";buff+='   <td><textarea class="perc-widget-property" name="'+this.name+'">\n';for(v in values){buff+=values[v]+"\n"}buff+="</textarea>\n"}}}}buff+="</tr>\n";return buff}}})(jQuery);var _canLog=true;function _log(n,k){if(!_canLog){return}var f=Array.prototype.slice.apply(arguments,[1]);var h=new Date();var b=h.getHours()+":"+h.getMinutes()+":"+h.getSeconds()+"."+h.getMilliseconds();f[0]=b+" - "+f[0];try{switch(n){case"info":window.console.info.apply(window.console,f);break;case"warn":window.console.warn.apply(window.console,f);break;default:window.console.log.apply(window.console,f);break}}catch(j){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){var iMax=5;while(el&&iMax--){if(el.dtnode){return el.dtnode}el=el.parentNode}return null}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this.isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="";if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){res+="<img src='"+opts.imagePath+data.icon+"' alt='' />"}else{if(data.icon===false){noop()}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?" title='"+data.tooltip+"'":"";if(opts.noLink||data.noLink){nodeTitle="<span style='display: inline-block;' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</span>"}else{nodeTitle="<a href='#' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling();if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if((this.bExpanded||includeInvisible===true)&&this.childList){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){return a.data.title===b.data.title?0:a.data.title>b.data.title};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li)}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null;var info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this.isLoading=false;this.render();if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this.isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this.isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"";var cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn.indexOf("dynatree-custom-checkbox")!=-1){return"dynatree-custom-checkbox"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(){this._activate(true,true)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand();this.focus()}if(activate){this.activate()}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_fixSelectionState:function(){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);node._select(true,false,false)});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode){allChildsSelected=false;break}}if(allChildsSelected){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this.isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this.isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand();this.focus()}else{if(targetType==="checkbox"){this.toggleSelect();this.focus()}else{if(targetType!="dynatree-custom-checkbox"){this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){if(!$.browser.msie){aTag[0].focus()}}else{return true}}}}return false},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}return !handled},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}return this.parent.removeChild(this)},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}return this.removeChildren()}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){this.ul.removeChild(tn.li)}}this.childList=null}if(!isRecursiveCall){this.isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logInfo("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree;var opts=tree.options;var pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey==dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey==dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success;var orgError=ajaxOptions.error;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self)}self.tree.logInfo("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(XMLHttpRequest,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",XMLHttpRequest,"\n",errorThrown);if(orgError){orgError.call(options,self,XMLHttpRequest,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}this.parent.ul.removeChild(this.li);this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this];if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}}targetParent.ul.appendChild(this.li);if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}if(!prevParent.isDescendantOf(targetParent)){prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){this._log("DynaTreeStatus: initialize");if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read");this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){this._log("DynaTreeStatus: write");$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){this._log("addExpand(%o)",key);if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){this._log("clearExpand(%o)",key);var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){this._log("addSelect(%o)",key);if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){this._log("clearSelect(%o)",key);var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.1.0$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){_log("warn","Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){_log("warn","Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}if(!opts.imagePath){$("script").each(function(){var _rexDtLibName=/.*dynatree[^\/]*\.js$/i;if(this.src.search(_rexDtLibName)>=0){if(this.src.indexOf("/")>=0){opts.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/"}else{opts.imagePath="skin/"}logMsg("Guessing imagePath from '%s': '%s'",this.src,opts.imagePath);return false}})}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}else{if(this.divRoot){$(this.divRoot).remove()}}this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot;var isReloading=(opts.persist&&this.persistence.isReloading());var isLazy=false;var prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{var $ul=this.$tree.find(">ul:first").hide();this._createFromTag(root,$ul);$ul.remove()}}}this._checkConsistency();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy&&opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(opts.onPostInit){if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored when onPostInit was specified.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored when onPostInit was specified.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,false);if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,true);if(callback){callback.call(dtnode.tree,"error")}}}this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this);var $liSpan=$li.find(">span:first");var title;if($liSpan.length){title=$liSpan.html()}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}var data={title:title,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null;var $target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var pos=$target.position();switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");pos.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");pos.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");pos.left+=8}this.$dndMarker.css({left:(pos.left)+"px",top:(pos.top)+"px"}).show()}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options;var dnd=this.options.dnd;var res=null;var nodeTag=$(node.span);var hitMode;switch(eventName){case"helper":var helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());helper.data("dtSourceNode",node);res=helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;res={over:(res!==false)&&((res===true)||(res==="over")||$.inArray("over",res)>=0),before:(res!==false)&&((res===true)||(res==="before")||$.inArray("before",res)>=0),after:(res!==false)&&((res===true)||(res==="after")||$.inArray("after",res)>=0)};ui.helper.data("enterResponse",res);break;case"over":var enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){break}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode)}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false);break;case"drop":hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.");return this._create()}_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",DynaTree.version,this.options.debugLevel);var opts=this.options;this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=getDtNodeFromElement(event.target);if(!dtnode){return true}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":return(o.onClick&&o.onClick.call(tree,dtnode,event)===false)?false:dtnode._onClick(event);case"dblclick":return(o.onDblClick&&o.onDblClick.call(tree,dtnode,event)===false)?false:dtnode._onDblClick(event);case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){if(typeof event=="undefined"&&window.event==null){return false}event=$.event.fix(event||window.event);var dtnode=getDtNodeFromElement(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,icon:null,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,connectToDynatree:true,helper:function(event){var sourceNode=getDtNodeFromElement(event.target);return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var prevTargetNode=ui.helper.data("dtTargetNode")||null;var targetNode=getDtNodeFromElement(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){noop()}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var targetNode=ui.helper.data("dtTargetNode")||null;var mouseDownEvent=draggable._mouseDownEvent;var eventType=event.type;var dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}})(jQuery);jQuery.fn.toXML=function(){var e="";if(this.length>0){if(typeof XMLSerializer=="function"||typeof XMLSerializer=="object"){var b=new XMLSerializer();this.each(function(){e+=b.serializeToString(this)})}else{if(this[0].xml!==undefined){this.each(function(){e+=this.xml})}else{}}}return e};(function(h){function b(C,A,E){var B;var D;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+C,dataType:"xml",type:"GET",success:function(G,F){$templateObject=h(G);B=$templateObject.find("Template cssOverride");A(B.text())},error:function(H,F,G){E(G)}})}else{}}function j(D,H,C,F,B,E){var G;var A;if(!h.perc_fakes.template_service.set_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+D,dataType:"xml",type:"GET",success:function(J,I){G=h(J);A=G.find("Template theme");if(A.length==0){G.append("<theme>"+newCSS+"</theme>")}else{A.text(H)}B(G.toXML());if(!E){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:G.toXML(),processData:false,success:function(L,K){C(H)},error:function(L,K){F(K)}})}},error:function(K,I,J){alert("error grabbing template record to save! ")}})}}function q(A,B){var C;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.THEME_SUMMARY_ALL,dataType:"xml",type:"GET",success:function(E,D){$templateObject=h(E);$themeSummaryObjects=$templateObject.find("ThemeSummarys ThemeSummary");A($themeSummaryObjects)},error:function(F,D,E){B(E)}})}else{}}function f(D,A,C){var B;if(!h.perc_fakes.template_service.get_template_css){h.ajax({url:h.perc_paths.THEME_CSS+"/"+D,dataType:"xml",type:"GET",success:function(F,E){B=h(F);$themeCSS=B.find("ThemeCSS CSS");A($themeCSS)},error:function(G,E,F){C(F)}})}else{}}function y(D,H,B,F,A,E){var G;var C;if(!h.perc_fakes.template_service.set_template_css){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+D,dataType:"xml",type:"GET",success:function(J,I){G=h(J);C=G.find("Template cssOverride");if(C.length==0){G.append("<cssOverride>"+H+"</cssOverride>")}else{C.text(H)}A(G.toXML());if(!E){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:G.toXML(),processData:false,success:function(L,K){B(L)},error:function(L,K){F(L)}})}},error:function(K,I,J){alert("error grabbing template record to save! ")}})}}function t(C,B,E){var D;var F;var A;h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+C,dataType:"xml",type:"GET",success:function(H,G){F=h(H);A=F.find("Template theme");B(A)},error:function(I,G,H){E(H)}})}function z(C,F,B,E,A,D){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+C,dataType:"xml",type:"GET",success:function(H,G){$templateObject=h(H);$cssTheme=$templateObject.find("Template theme");if($cssTheme.length==0){$templateObject.append("<theme>"+F+"</theme>")}else{$cssTheme.text(F)}A($templateObject.toXML());if(!D){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/",contentType:"text/xml",type:"POST",data:$templateObject.toXML(),processData:false,success:function(J,I){B(F)},error:function(J,I){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(J)})}})}},error:function(I,G,H){alert("error grabbing template record to save! ")}})}function n(B,A){}function x(A,B){h.ajax({url:h.perc_paths.TEMPLATE_LOAD_SAVE+"/"+A,dataType:"text",type:"GET",success:B,error:function(E,C,D){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(E)})}})}function e(A,D,C,E){if(D){var B=h.perc_paths.TEMPLATE_LOAD_SAVE+"/page/"+memento.pageId}else{B=h.perc_paths.TEMPLATE_LOAD_SAVE+"/"}h.ajax({url:B,type:"POST",data:C,contentType:"text/xml",success:E,error:function(H,F,G){h.unblockUI();h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(H)})}})}function k(C,B,A,E){var D=h.perc_paths.TEMPLATE_RENDER+"/"+C;if(A){D=h.perc_paths.TEMPLATE_RENDER+"/"+A+"/"+C}h.ajax({url:D,type:"POST",contentType:"text/xml",dataType:"xml",data:B,processData:false,success:E,error:function(H,F,G){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(H)})}})}h.perc_templatemanager={load_template:x,save_template:e,render_region:k,preview_template:n,get_template_css:b,set_template_css:y,get_theme_list:q,set_theme_for_template:z,get_theme_for_template:t,get_theme_css_data:f}})(jQuery);(function(h){h.perc_schemata=h.perc_schemata||{};var e="<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><Page><name>Page Name</name><templateId>2000</templateId><folderPath>//folderpath</folderPath><author>authorName</author><id>1000</id><category>PAGE</category><regionBranches><regionWidgetAssociations><regionWidget><regionId>rid</regionId><widgetItems><widgetItem><definitionId>STUFF</definitionId><properties><property><name>AAA</name><value>BBB</value></property></properties></widgetItem></widgetItems></regionWidget></regionWidgetAssociations><regions><region><regionId>templateRegion</regionId><children><region><regionId>rid</regionId><children><code><templateCode>#region('' '' '' '' '')</templateCode></code></children></region></children></region></regions></regionBranches></Page>";var j,f,b;f={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return f}alert("Unhandled case");return"$"}],endTag:"$"};b={Page:{id:"$",category:"$",folderPaths:"$",name:"$",type:"$",folderPath:"$",author:"$",linkTitle:"$",templateId:"$",title:"$",footer:"$",header:"$",keywords:["$"],description:"$",tags:["$"],additionalHeadContent:"$",afterBodyStartContent:"$",beforeBodyCloseContent:"$",regionBranches:{regions:[j],regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};h.extend(h.perc_schemata,{page:b,page_test_data:e})})(jQuery);(function(h){var j,e,f;e={templateCode:"$"};j={regionId:"$",startTag:"$",children:[function(k){if(k=="region"){return j}if(k=="code"){return e}alert("Unhandled case");return"$"}],endTag:"$",cssClass:"$"};f={Template:{id:"$",description:"$",imageThumbPath:"$",label:"$",name:"$",readOnly:"$",sourceTemplateName:"$",bodyMarkup:"$",cssOverride:"$",cssRegion:"$",type:"$",theme:"$",htmlHeader:"$",regionTree:{rootRegion:j,regionWidgetAssociations:[{regionId:"$",widgetItems:[{id:"$",definitionId:"$",name:"$",description:"$",properties:[{name:"$",value:"$"}],cssProperties:[{name:"$",value:"$"}]}]}]}}};var b='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Template><id>16777215-101-710</id><description></description><imageThumbPath></imageThumbPath><label>Plain</label><name>Test3 Templ</name><readOnly>false</readOnly><sourceTemplateName>perc.base.plain</sourceTemplateName><bodyMarkup>#perc_templateHeader()&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;&lt;div class=&quot;perc-horizontal&quot;&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;#perc_templateFooter()</bodyMarkup><cssOverride></cssOverride><cssRegion></cssRegion><htmlHeader></htmlHeader><regionTree><regionWidgetAssociations/><rootRegion><regionId>percRoot</regionId><children><code><templateCode>#perc_templateHeader()</templateCode></code><region><regionId>container</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;container&quot; title=&quot;container&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-20</regionId><startTag>&lt;div class=&quot;perc-region&quot; id=&quot;temp-region-20&quot; title=&quot;temp-region-20&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-horizontal&quot;&gt;</templateCode></code><region><regionId>temp-region-22</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-22&quot; title=&quot;temp-region-22&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-23</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-23&quot; title=&quot;temp-region-23&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><region><regionId>temp-region-21</regionId><startTag>&lt;div class=&quot;perc-region perc-region-leaf&quot; id=&quot;temp-region-21&quot; title=&quot;temp-region-21&quot;&gt;</startTag><children><code><templateCode>&lt;div class=&quot;perc-vertical&quot;&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>&lt;div class=&quot;clear-float&quot;&gt;&lt;/div&gt;&lt;/div&gt;</templateCode></code></children><endTag>&lt;/div&gt;</endTag></region><code><templateCode>#perc_templateFooter()</templateCode></code></children></rootRegion></regionTree><theme></theme></Template>';h.perc_schemata=h.perc_schemata||{};h.extend(h.perc_schemata,{template:f,template_test_data:b})})(jQuery);(function($,P){var modelObject;P.templateModel=function(templateManager,templateId,callback){var utils=$.perc_utils;var templObj;var root;var cssObj={themeName:null,cssOverride:null};var regionIds={};var regcount=1;var javaScriptOff=false;var assetDropCriteria={};var pageAssetDropCriteria={};var templateService=$.PercTemplateService();var widgetContentTypes={};var widgetPrefs={};load();modelObject={save:save,load:load,editWidget:editWidget,editRegion:editRegion,editRegionParent:editRegionParent,eachRegion:eachRegion,getRegionPosition:getRegionPosition,newRegion:newRegion,newResponsiveRegion:newResponsiveRegion,getRoot:getRoot,render:render,renderAll:renderAll,getTemplateRegionIds:getTemplateRegionIds,canOverride:canOverride,getName:getName,getAssetDropCriteria:getAssetDropCriteria,getPageAssetDropCriteria:getPageAssetDropCriteria,loadAssetDropCriteria:loadAssetDropCriteria,getWidgetContentTypes:getWidgetContentTypes,getWidgetPrefs:getWidgetPrefs,clearAsset:clearAsset,configureAsset:configureAsset,promoteAsset:promoteAsset,setAssetRelationship:setAssetRelationship,getSpecialWidgets:getSpecialWidgets,getType:getType,getTemplateType:getTemplateType,isPage:isPage,isTemplate:isTemplate,isTemplateLeaf:isTemplateLeaf,containsRegionId:containsRegionId,getWidgetByName:getWidgetByName,getId:getId,getCSSObj:getCSSObj,setCSSObj:setCSSObj,getThemeList:getThemeList,getThemeCSS:getThemeCSS,isJavaScriptOff:isJavaScriptOff,setJavaScriptOff:setJavaScriptOff,findWidgetParentRegion:findWidgetParentRegion,getTemplateObj:getTemplateObj,renderByObject:renderByObject,isResponsiveBaseTemplate:isResponsiveBaseTemplate};return modelObject;function isResponsiveBaseTemplate(){var srcTpl=templObj.Template.sourceTemplateName;return srcTpl.indexOf("perc.resp.")==0}function getId(){return templateId}function getTemplateObj(){return templObj}function isJavaScriptOff(){return javaScriptOff}function setJavaScriptOff(so){javaScriptOff=so}function containsRegionId(regionId){var contains=false;eachRegion(function(){if(this.regionId==regionId){contains=true;return false}});return contains}function load(){templateManager.load_template(templateId,function(xml){templObj=utils.unxml($.perc_schemata.template,$.xmlDOM(xml));root=P.regionsFromTree(templObj.Template.regionTree.rootRegion,templObj.Template.regionTree.regionWidgetAssociations,"template");eachRegion(function(){regionIds[this.regionId]=true});loadWidgetPrefs();cssObj.themeName=templObj.Template.theme;cssObj.cssOverride=templObj.Template.cssOverride;loadPageAssetDropCriteria(function(){});loadAssetDropCriteria(function(adc){for(widgetId in assetDropCriteria){widgetContentTypes[widgetId]=assetDropCriteria[widgetId].supportedContentTypes}callback()});$.PercNavigationManager.setTemplateModel(modelObject)})}function getName(){return templObj.Template.name}function isTemplateLeaf(){}function getType(){return"template"}function getTemplateType(){return templObj.Template.type}function isPage(){return false}function isTemplate(){return true}function canOverride(region){return false}function getCSSObj(){return cssObj}function setCSSObj(newcssObj){cssObj=newcssObj}function getThemeList(callback){templateService.getThemeList(function(status,data){if(status==true){callback(true,data)}else{callback(false,data)}})}function getThemeCSS(callback){themeName=getCSSObj().themeName;if(themeName!=null&&themeName!=""){templateService.getThemeCSS(themeName,function(status,data){if(status==true){callback(true,data)}else{callback(false,data)}})}else{data={};data.text=function(){return"No Theme has been selected."};callback(false,data)}}function setAssetRelationship(widgetData,assetid,isResource,callback){$.PercAssetService.set_relationship(assetid,widgetData,templateId,"1",isResource,null,callback,utils.show_error)}function getAssetDropCriteria(){return assetDropCriteria}function getPageAssetDropCriteria(){return pageAssetDropCriteria}function loadWidgetPrefs(){eachRegion(function(){$.each(this.widgets,function(){var defid=this.definitionId;if(!widgetPrefs[defid]){$.perc_widget_definition_client.restGetWidgetPrefs(defid,function(wPrefs){widgetPrefs[defid]=wPrefs})}})})}function loadAssetDropCriteria(callback){templateService.getAssetDropCriteria(templateId,false,function(adc){assetDropCriteria=adc;callback(adc)},function(request){var defaultMsg=$.PercServiceUtils.extractDefaultErrorMessage(request);$.perc_utils.alert_dialog({title:"Error",content:defaultMsg})})}function loadPageAssetDropCriteria(callback){if(typeof(gPageId)!="undefined"&&gPageId){templateService.getAssetDropCriteria(gPageId,true,function(adc){pageAssetDropCriteria=adc;callback()},function(request){$.unblockUI();var memento={templateId:gSelectTemp,pageId:null};var querystring=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,querystring.site,null,null,null,querystring.path,null,memento)})}else{callback()}}function getWidgetContentTypes(widgetid){return widgetContentTypes[widgetid]}function getWidgetPrefs(widgetDefId){return widgetPrefs[widgetDefId]}function clearAsset(widgetId,widgetDefinitionId,assetId,callback){if(assetId){$.PercAssetService.clear_asset(templateId,widgetId,widgetDefinitionId,assetId,callback)}}function configureAsset(widgetData,assetId,isSharedAsset,callback){var wfCallBack=function(aId,producesResource){$.PercWorkflowController().checkIn(aId,function(status){callback()})};var cancelCallback=function(aId){if(aId){$.PercWorkflowController().checkIn(aId,function(status){})}};if(assetId){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){$.perc_asset_edit_dialog(wfCallBack,cancelCallback,assetId,widgetData,templateId,"template")}else{callback()}})}else{$.perc_asset_edit_dialog(wfCallBack,cancelCallback,assetId,widgetData,templateId,"template")}}function promoteAsset(assetId,widgetData,isResource,callback){$.PercAssetService.promoteAsset(assetId,widgetData,templateId,"1",isResource,function(status,message){if(status==$.PercServiceUtils.STATUS_SUCCESS){callback()}else{$.perc_utils.alert_dialog({title:"Error",content:message})}})}function getSpecialWidgets(viewType){var specialWidgets={LockedWidgets:{},TransperantWidgets:{},ContentWidgets:{}};var lockedWidgets={};var transparentWidgets={};var contentWidgets={};$.each(pageAssetDropCriteria,function(){var twadc=assetDropCriteria[this.widgetId];if(!twadc){lockedWidgets[this.widgetId]=this.widgetId;transparentWidgets[this.widgetId]=this.widgetId}else{if(!twadc.locked&&this.locked){transparentWidgets[this.widgetId]=this.widgetId}}});$.each(assetDropCriteria,function(){if(this&&this.locked){contentWidgets[this.widgetId]=this.widgetId}});specialWidgets.LockedWidgets=lockedWidgets;specialWidgets.TransperantWidgets=transparentWidgets;specialWidgets.ContentWidgets=contentWidgets;return specialWidgets}function getWidgetByName(widgetName){var widget=null;eachRegion(function(){$.each(this.widgets,function(){if(typeof(this.name)=="string"&&this.name.toUpperCase()==widgetName.toUpperCase()){widget=this}})});return widget}function editWidget(widgetId,callback){var found=false;eachRegion(function(){$.each(this.widgets,function(){if(this.id==widgetId){callback.call(this);found=true}});return !found});return found}function getRoot(){return root}function newRegion(){var regionId="temp-region-"+regcount;while(regionIds[regionId]){regcount++;regionId="temp-region-"+regcount}regionIds[regionId]=true;return{children:[],widgets:[],vertical:true,regionId:regionId,fixed:false,width:"",height:"",owner:"template"}}function newResponsiveRegion(isRow,cols){var regionId="temp-region-"+regcount;while(regionIds[regionId]){regcount++;regionId="temp-region-"+regcount}regionIds[regionId]=true;var large=isRow?"":cols?"large-"+cols:"large-1";return{children:[],widgets:[],regionId:regionId,row:isRow,columns:!isRow,large:large,owner:"template"}}function getTemplateRegionIds(){return regionIds}function editRegion(regionId,callback){var found=false;eachRegion(function(){if(this.regionId==regionId){callback.call(this);found=true;return false}else{return true}});return found}function editRegionParent(regionId,callback){var found=false;eachRegion(function(){var r=[];if(this.children){r=$.grep(this.children,function(c){return c.regionId==regionId})}if(r.length>0){callback.call(this);found=true;return false}return true});return found}function getRegionPosition(regionId){var position=-1;var parentReg=null;editRegionParent(regionId,function(){parentReg=this;var found=false;$.each(parentReg.children,function(){position++;if(this.regionId===regionId){found=true;return false}})});return position}function eachRegion(callback){_eachRegion(root,callback)}function _eachRegion(tree,callback){if(false===callback.call(tree)){return}if(typeof(tree)=="undefined"||typeof(tree.children)=="undefined"||typeof(tree.children.length)=="undefined"){return}$.each(tree.children,function(){_eachRegion(this,callback)})}function findWidgetParentRegion(widgetId,callback){var found=false;eachRegion(function(){var parentRegionId=this.regionId;$.each(this.widgets,function(){if(this.id==widgetId){callback(parentRegionId);found=true}});return !found});return found}function save(postCallback,newWidgetObj,requireMigration){updateTemplObj();var saveAssetsCallback=function(){$.PercTemplateService().updateInspectedElements(newWidgetObj,function(status,result){if(status){postCallback()}else{}})};if(newWidgetObj){callback=saveAssetsCallback}else{callback=postCallback}templateManager.save_template(templateId,requireMigration,utils.rexml($.perc_schemata.template,templObj),callback)}function renderAll(frame,callback){function finish(){callback()}var rootPath=javaScriptOff?$.perc_paths.TEMPLATE_RENDER_SCRIPTSOFF:$.perc_paths.TEMPLATE_RENDER;var renderPath=rootPath+"/"+templateId+"?timestamp="+new Date().getTime();if(typeof(gPageId)!="undefined"&&gPageId){rootPath=javaScriptOff?$.perc_paths.PAGE_EDIT_SCRIPTSOFF:$.perc_paths.PAGE_EDIT;renderPath=rootPath+"/"+gPageId+"?editType=TEMPLATE&timestamp="+new Date().getTime()}$.PercBlockUI($.PercBlockUIMode.CURSORONLY);frame.contents().remove();frame.attr("src",renderPath);frame.unbind().load(function(){loadAssetDropCriteria(function(){loadPageAssetDropCriteria(function(){$.unblockUI();callback()})})})}function render(callback){updateTemplObj();templateManager.render_region(root.children[0].regionId,utils.rexml($.perc_schemata.template,templObj),gPageId,function(data){callback($(data).find("result").text())})}function renderByObject(tObj,callback){templObj=tObj;root=P.regionsFromTree(templObj.Template.regionTree.rootRegion,templObj.Template.regionTree.regionWidgetAssociations,"template");templateManager.render_region(root.children[0].regionId,utils.rexml($.perc_schemata.template,templObj),gPageId,function(data){callback($(data).find("result").text())})}function updateTemplObj(){templObj.Template.regionTree.rootRegion=P.treeFromRegions(root,true);templObj.Template.regionTree.regionWidgetAssociations=createRegionWidgetAssociations(root);var cssObj=getCSSObj();templObj.Template.cssOverride=cssObj.cssOverride;templObj.Template.theme=cssObj.themeName}function createRegionWidgetAssociations(root){if(root.widgets.length>0){return[{_tagName:"regionWidget",regionId:root.regionId,widgetItems:$.map(root.widgets,function(w){return P.widgetItemFromWidget(w)})}]}else{return $.map(root.children,function(c){return createRegionWidgetAssociations(c)})}}};P.regionsFromTree=function(tree,regionWidgetAssociations,owner){return modelObject.isResponsiveBaseTemplate()?P.respRegionsFromTree(tree,regionWidgetAssociations,owner):P.baseRegionsFromTree(tree,regionWidgetAssociations,owner)};P.baseRegionsFromTree=function(tree,regionWidgetAssociations,owner){var regId=tree.regionId;var widgets=$.grep(regionWidgetAssociations,function(a){return a.regionId==regId});if(widgets[0]){widgets=$.map(widgets[0].widgetItems,function(w){return P.widgetFromWidgetItem(w)})}else{widgets=[]}var openTag=tree.startTag||"perc-vertical perc-fixed";var fixed=!!openTag.match(/perc-fixed/);var vertical=!!openTag.match(/perc-vertical/);var height=openTag.match(/height[^:]*:([^;]*);/);height=height?$.trim(height[1]):"";var width=openTag.match(/width[^:]*:([^;]*);/);width=width?$.trim(width[1]):"";var padding=openTag.match(/padding[^:]*:([^;]*);/);padding=padding?$.trim(padding[1]):"";var margin=openTag.match(/margin[^:]*:([^;]*);/);margin=margin?$.trim(margin[1]):"";var noAutoResize=$(openTag).attr("noAutoResize");var tempNoAutoResize=noAutoResize==""||noAutoResize==undefined?false:eval(noAutoResize);if(noAutoResize!=undefined){$(openTag).removeAttr("noAutoResize");$(openTag).attr("data-noautoresize",tempNoAutoResize);noAutoResize=tempNoAutoResize}else{noAutoResize=$(openTag).attr("data-noautoresize");noAutoResize=noAutoResize==""||noAutoResize==undefined?false:eval(noAutoResize)}var vspan=openTag.match(/vspan_[0-9]*/);vspan=vspan?$.trim(vspan[0]):"";var hspan=openTag.match(/hspan_[0-9]*/);hspan=hspan?$.trim(hspan[0]):"";var subTrees=$.grep(tree.children,function(c){return c._tagName=="region"});var subRegions=$.map(subTrees,function(r){return P.baseRegionsFromTree(r,regionWidgetAssociations,owner)});subRegions=subRegions?subRegions:[];var region={regionId:regId,noAutoResize:noAutoResize,vertical:vertical,children:subRegions,widgets:widgets,fixed:fixed,width:width,height:height,owner:owner,margin:margin,padding:padding,vspan:vspan,hspan:hspan,cssClass:tree.cssClass};return region};P.respRegionsFromTree=function(tree,regionWidgetAssociations,owner){var regId=tree.regionId;var widgets=$.grep(regionWidgetAssociations,function(a){return a.regionId==regId});if(widgets[0]){widgets=$.map(widgets[0].widgetItems,function(w){return P.widgetFromWidgetItem(w)})}else{widgets=[]}var openTag=tree.startTag||"row";var row=!!openTag.match(/row/);var columns=!!openTag.match(/columns/);var large=openTag.match(/large-[0-9]*/);large=large?$.trim(large[0]):"";var padding=openTag.match(/padding[^:]*:([^;]*);/);padding=padding?$.trim(padding[1]):"";var margin=openTag.match(/margin[^:]*:([^;]*);/);margin=margin?$.trim(margin[1]):"";var subTrees=$.grep(tree.children,function(c){return c._tagName=="region"});var subRegions=$.map(subTrees,function(r){return P.respRegionsFromTree(r,regionWidgetAssociations,owner)});subRegions=subRegions?subRegions:[];var region={regionId:regId,row:row,children:subRegions,widgets:widgets,columns:columns,large:large,owner:owner,margin:margin,padding:padding,cssClass:tree.cssClass};return region};P.widgetFromWidgetItem=function(widgetItem){var properties=[];$.each(widgetItem.properties,function(){properties[this.name]=JSON.parse(this.value||"")});var cssProperties=[];if(widgetItem.cssProperties){$.each(widgetItem.cssProperties,function(){cssProperties[this.name]=JSON.parse(this.value||"")})}return{id:widgetItem.id,definitionId:widgetItem.definitionId,name:widgetItem.name,description:widgetItem.description,properties:properties,cssProperties:cssProperties}};P.treeFromRegions=function(region,isTop){return modelObject.isResponsiveBaseTemplate()?P.respTreeFromRegions(region,isTop):P.baseTreeFromRegions(region,isTop)};P.baseTreeFromRegions=function(region,isTop){var leaf=region.children.length==0?" perc-region-leaf":"";var fixed=region.fixed?" perc-fixed ":"";var direction=region.vertical?" perc-vertical ":" perc-horizontal ui-helper-clearfix ";var padding=region.padding?"padding: "+region.padding+";":"";var margin=region.margin?"margin: "+region.margin+";":"";var hspan=region.hspan?" "+region.hspan+" ":" ";var vspan=region.vspan?" "+region.vspan+" ":" ";var cssClass=region.cssClass?" "+region.cssClass+" ":" ";var noAutoResize=region.noAutoResize?" perc-noAutoResize ":" ";var startTag="<div ";if(region.height||region.width||region.padding||region.margin){startTag+='style="';if(region.height){if(!isNaN(region.height)){region.height+="px"}startTag+="height:"+region.height+";"}if(region.width){if(!isNaN(region.width)){region.width+="px"}startTag+="width:"+region.width+";"}startTag+=padding+margin+'"'}startTag+=" class="+('"perc-region'+leaf+noAutoResize+fixed+direction+hspan+vspan+cssClass).replace(/\s\s+/g," ")+'"  data-noautoresize="'+region.noAutoResize+'" id="'+region.regionId+'"> <div class="'+direction+'">';var endTag="</div></div>";var children;if(leaf){children=[{_tagName:"code",templateCode:'#region("'+region.regionId+'","","","","")'}]}else{children=$.map(region.children,function(c){return P.baseTreeFromRegions(c)});if(isTop){var startChild={_tagName:"code",templateCode:"#perc_templateHeader()"};var endChild={_tagName:"code",templateCode:"#perc_templateFooter()"};children.unshift(startChild);children.push(endChild)}}if(isTop){return{children:children,regionId:region.regionId}}else{return{_tagName:"region",noAutoResize:region.noAutoResize,regionId:region.regionId,startTag:startTag,endTag:endTag,children:children,cssClass:region.cssClass}}};P.respTreeFromRegions=function(region,isTop){var leaf=region.children.length==0?" perc-region-leaf":"";var row=region.row?" row ":"";var columns=region.columns?" columns ":"";var large=region.large?" "+region.large+" ":"";var padding=region.padding?"padding: "+region.padding+";":"";var margin=region.margin?"margin: "+region.margin+";":"";var cssClass=region.cssClass?" "+region.cssClass+" ":" ";var startTag="<div ";if(region.padding||region.margin){startTag+='style="';startTag+=padding+margin+'"'}startTag+=' class="perc-region'+leaf+row+columns+large+cssClass+'" id="'+region.regionId+'">';var endTag=" </div> ";var children;if(leaf){children=[{_tagName:"code",templateCode:'#region("'+region.regionId+'","","","","")'}]}else{children=$.map(region.children,function(c){return P.respTreeFromRegions(c)});if(isTop){var startChild={_tagName:"code",templateCode:"#perc_templateHeader()"};var endChild={_tagName:"code",templateCode:"#perc_templateFooter()"};children.unshift(startChild);children.push(endChild)}}if(isTop){return{children:children,regionId:region.regionId}}else{return{_tagName:"region",regionId:region.regionId,startTag:startTag,endTag:endTag,children:children,cssClass:region.cssClass}}};P.widgetItemFromWidget=function(widget){var properties=[];delete widget.properties.sys_perc_name;delete widget.properties.sys_perc_description;if(widget.properties){for(prop in widget.properties){properties.push({_tagName:"property",name:prop,value:JSON.stringify(widget.properties[prop])})}}var cssProperties=[];if(widget.cssProperties){for(prop in widget.cssProperties){cssProperties.push({_tagName:"property",name:prop,value:JSON.stringify(widget.cssProperties[prop])})}}return{_tagName:"widgetItem",id:widget.id,definitionId:widget.definitionId,name:widget.name,description:widget.description,properties:properties,cssProperties:cssProperties}};$.PercTemplateMetadataModel=function(id,additionalHeadContent,beforeBodyCloseContent,afterBodyStartContent,protectedRegion,protectedRegionText){this.id=id;this.additionalHeadContent=additionalHeadContent;this.beforeBodyCloseContent=beforeBodyCloseContent;this.afterBodyStartContent=afterBodyStartContent;this.protectedRegion=protectedRegion;this.protectedRegionText=protectedRegionText}})(jQuery,jQuery.Percussion);(function(e,b){b.pageModel=function(ae,aq,au,ag){var aw=e.perc_utils;var F;var aj;var I;var f;var L;var J={};var R=1;var z=false;var G={};var M={};an();return{save:H,load:an,editWidget:n,editRegion:S,editRegionParent:t,eachRegion:af,newRegion:P,getRoot:ay,render:X,renderAll:W,clearAsset:O,promoteAsset:Z,clearOrphanAssets:T,configureAsset:av,getAssetDropCriteria:ap,getWidgetContentTypes:am,setAssetRelationship:ab,updateAssetRelationship:at,canOverride:V,getType:Q,isPage:ac,isLandingPage:E,isTemplate:K,isTemplateLeaf:Y,getTemplateModel:D,getSpecialWidgets:h,getModel:ax,isJavaScriptOff:ar,setJavaScriptOff:ah,findWidgetParentRegion:A,isResponsiveBaseTemplate:B};function B(){return D().isResponsiveBaseTemplate()}function an(){ae.load_page(au,function(aB){F=aw.unxml(e.perc_schemata.page,e.xmlDOM(aB));var aC=F.Page.templateId;I=b.templateModel(aq,aC,az);var aA=this;function az(){var aD=ad(F.Page.regionBranches.regions,F.Page.regionBranches.regionWidgetAssociations);aj=I.getRoot();q();ao(aj,aD);ai(aj);j(function(aE){for(widgetId in M){G[widgetId]=M[widgetId].supportedContentTypes}ag()})}})}function Q(){return"page"}function ac(){return true}function E(){return(F.Page.category=="LANDING_PAGE")}function ar(){return z}function ah(az){z=az}function K(){return false}function ad(aA,az){return aw.o_a(e.map(aA,function(aB){var aC=b.regionsFromTree(aB,az,"page");return{k:aC.regionId,v:aC}}))}function ao(az,aA){af(function(){if(Y(this)){if(this.regionId in aA&&this.children.length==0){C(this,aA[this.regionId])}}})}function C(az,aA){az.children=aA.children;az.fixed=aA.fixed;az.vertical=aA.vertical;az.widgets=aA.widgets;az.height=aA.height;az.width=aA.width;az.owner="page"}function ai(az){J[az.regionId]=true;e.each(az.children,function(){ai(this)})}function ax(){return F}function q(){L={};f={};var az=I.getAssetDropCriteria();I.eachRegion(function(){e.each(this.widgets,function(){L[this.id]=this.id;if(az&&az[this.id].locked){f[this.id]=this.id}})})}function h(az){var aA={LockedWidgets:{},TransperantWidgets:{}};if(az=="Content"){aA.LockedWidgets=f}else{if(az=="Layout"){aA.LockedWidgets=L}}return aA}function D(){return I}function ay(){return aj}function ab(aC,aA,az,aB){e.PercAssetService.set_relationship(aA,aC,au,"1",az,null,aB,aw.show_error)}function at(aD,aB,aA,aC,az){e.PercAssetService.update_relationship(aB,aA,aD,au,aC,az)}function j(az){e.PercTemplateService().getAssetDropCriteria(au,true,function(aA){M=aA;az(aA)},function(aA){var aB=e.PercServiceUtils.extractDefaultErrorMessage(aA);e.perc_utils.alert_dialog({title:"Error",content:aB})})}function ap(){return M}function am(az){return G[az]}function O(aA,az,aB,aC){if(aB){e.PercAssetService.clear_asset(au,aA,az,aB,aC)}}function Z(aA,aC,az,aB){e.perc_utils.alert_dialog({title:"Error",content:"Promote action has not been implmented for page."})}function T(aA,az,aB,aC){if(aB){e.PercAssetService.clear_orphan_assets(au,aA,az,aB,aC)}}function av(aC,aA,az,aB){if(az){e.PercFolderHelper().getAccessLevelById(aA,false,function(aE,aD,aF){if(aE==e.PercFolderHelper().PERMISSION_ERROR){var aG="";if(aF=="cannot.find.item"){aG=I18N.message("perc.ui.common.error@Content Deleted");e("#frame").attr("src",e("#frame").attr("src"))}else{aG=aD}e.perc_utils.alert_dialog({title:"Error",content:aG});return}else{if(aD==e.PercFolderHelper().PERMISSION_READ){e.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit this asset as it is from a read only folder."})}else{aa(aC,aA,az,aB)}}})}else{aa(aC,aA,az,aB)}}function aa(aE,aC,aA,aD){var aB=function(aG,aF){if(aF||aA){e.PercWorkflowController().checkIn(aG,function(aH){aD()})}else{aD()}};var az=function(aF){if(aF&&aA){e.PercWorkflowController().checkIn(aF,function(aG){})}};e.PercWorkflowController().isCheckedOutToCurrentUser(au,function(aF){if(aF){if(aC){e.PercWorkflowController().checkOut("percAsset",aC,function(aH){if(aH){e.perc_asset_edit_dialog(aB,az,aC,aE,au,"page")}else{aD()}})}else{e.perc_asset_edit_dialog(aB,az,aC,aE,au,"page")}}else{var aG={title:"Edit Page Error",question:"The page you opened has been modified in a different session. <br/><br/>Do you want to reload the page?",cancel:function(){},success:function(){e.PercNavigationManager.goTo(e.PercNavigationManager.VIEW_EDITOR,false)}};e.perc_utils.confirm_dialog(aG)}})}function n(az,aB){var aA=false;af(function(){e.each(this.widgets,function(){if(this.id==az){aB.call(this);aA=true}});return !aA});return aA}function P(az){var aA="temp-region-"+R;while(J[aA]){R++;aA="temp-region-"+R}if(az){aA=az+aA}J[aA]=true;return{children:[],widgets:[],vertical:true,regionId:aA,fixed:false,width:200,height:"auto",owner:"page"}}function S(aB,aA){var az=false;af(function(){if(this.regionId==aB){var aC=V(this);if(!aC){az=true;return false}aA.call(this);az=true;return false}else{return true}});return az}function t(aB,aA){var az=false;af(function(){var aC=e.grep(this.children,function(aD){return aD.regionId==aB});if(aC.length>0){aA.call(this);az=true;return false}return true});return az}function af(az){y(aj,az)}function y(az,aA){aA.call(az);e.each(az.children,function(){y(this,aA)})}function A(az,aB){var aA=false;af(function(){var aC=this.regionId;e.each(this.widgets,function(){if(this.id==az){aB(aC);aA=true}});return !aA});return aA}function V(az){return az.owner==="page"||(az.owner==="template"&&az.children.length==0&&az.widgets.length==0)}function Y(az){if(az.templateLeaf||(az.owner==="template"&&az.children.length==0&&az.widgets.length==0)){az.templateLeaf=true}else{az.templateLeaf=false}return az.templateLeaf}function H(az){ak();e.PercWorkflowController().isCheckedOutToCurrentUser(au,function(aA){if(aA){ae.save_page(au,aw.rexml(e.perc_schemata.page,F),az)}else{e.unblockUI();e.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Saved",["page"])})}})}var N="<link rel='stylesheet' type='text/css' href='/cm/css/perc_decoration.css'></link>";var x="<script type='text/javascript' src='/cm/jslib/jquery.js'><\/script>";x+="<script type='text/javascript' src='/cm/jslib/jquery-ui.js'><\/script>";var al="<link rel='stylesheet' type='text/css' href='/cm/themes/smoothness/jquery-ui-1.8.9.custom.css'></link>";function W(aB,aC){var az=z?e.perc_paths.PAGE_EDIT_SCRIPTSOFF:e.perc_paths.PAGE_EDIT;var aA=az+"/"+au+"?timestamp="+new Date().getTime();aB.contents().remove();aB.attr("src",aA);aB.unbind().load(function(){j(function(){});aC()})}function X(az){ak();ae.render_region(aj.children[0].regionId,aw.rexml(e.perc_schemata.page,F),function(aA){az(e(aA).find("result").text())})}function ak(){F.Page.regionBranches.regions=k(aj);F.Page.regionBranches.regionWidgetAssociations=U()}function k(az){if(az.owner=="page"){var aA=b.treeFromRegions(az,false);delete aA.startTag;delete aA.endTag;return aA}else{return e.map(az.children,function(aB){return k(aB)})}}function U(){var az=[];af(function(){if(this.widgets&&this.widgets.length>0){var aA=e.map(this.widgets,b.widgetItemFromWidget);az.push({_tagName:"regionWidget",regionId:this.regionId,widgetItems:aA})}});return az}}})(jQuery,jQuery.Percussion);(function(k){k.PercTemplateService=function(){return{getThemeList:G,getThemeCSS:L,getRegionCSS:f,deleteTemplate:h,deleteRegionCSS:E,saveTemplates:J,saveRegionCSS:C,regionCSSPrepareForEdit:D,regionCSSClearCache:A,regionCSSMerge:b,getAssetDropCriteria:y,loadTemplateMetadata:j,saveTemplateMetadata:t,exportTemplate:K,getSiteProperties:B,updateInspectedElements:x,checkImportLogExists:H,createTemplateFromUrl:q,createTemplateFromUrlAsync:z,createTemplateFromUrlStatus:M,createTemplateFromUrlResult:I,createTemplateFromPage:F,assignTemplateAndMigrateContent:e,applyTemplate:n}};function G(N){k.ajax({url:k.perc_paths.THEME_SUMMARY_ALL,dataType:"json",type:"GET",success:function(P,O){N(true,P)},error:function(Q,O,P){N(false,[O,P])}});return}function L(N,O){k.ajax({url:k.perc_paths.THEME_CSS+"/"+N,dataType:"xml",type:"GET",success:function(Q,P){$cssObject=k(Q);$cssData=$cssObject.find("ThemeCSS CSS");O(true,$cssData)},error:function(R,P,Q){O(false,[textStatus,Q])}});return}function f(Q,N,P,R,S){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+Q+"/"+N+"/"+P+"/"+R,k.PercServiceUtils.TYPE_GET,false,function(U,T){if(U==k.PercServiceUtils.STATUS_SUCCESS){S(k.PercServiceUtils.STATUS_SUCCESS,T.data)}else{var V=k.PercServiceUtils.extractDefaultErrorMessage(T.request);S(k.PercServiceUtils.STATUS_ERROR,V)}})}function D(P,N,Q){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_PREPARE_FOR_EDIT+"/"+P+"/"+N,k.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=k.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(k.PercServiceUtils.STATUS_ERROR,T)}})}function A(P,N,Q){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_CLEAR_CACHE+"/"+P+"/"+N,k.PercServiceUtils.TYPE_DELETE,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data)}else{var T=k.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(k.PercServiceUtils.STATUS_ERROR,T)}})}function b(Q,O,N,R){var P=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS_MERGE+"/"+Q+"/"+O,k.PercServiceUtils.TYPE_POST,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=k.PercServiceUtils.extractDefaultErrorMessage(S.request);R(k.PercServiceUtils.STATUS_ERROR,U)}},N)}function C(Q,N,P,R){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+Q+"/"+N,k.PercServiceUtils.TYPE_POST,false,function(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data)}else{var U=k.PercServiceUtils.extractDefaultErrorMessage(S.request);R(k.PercServiceUtils.STATUS_ERROR,U)}},P)}function E(Q,N,P,R,S){var O=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.REGION_CSS+"/"+Q+"/"+N+"/"+P+"/"+R,k.PercServiceUtils.TYPE_DELETE,false,function(U,T){if(U==k.PercServiceUtils.STATUS_SUCCESS){S(k.PercServiceUtils.STATUS_SUCCESS,T.data)}else{var V=k.PercServiceUtils.extractDefaultErrorMessage(T.request);S(k.PercServiceUtils.STATUS_ERROR,V)}})}function h(N,O){k.ajax({url:k.perc_paths.TEMPLATE_LOAD_SAVE+"/"+N,type:"DELETE",success:function(Q,R){var P=[Q,R];O(true,P)},error:function(R,S,P){var Q=[R,S,P];O(false,Q)}});return}function J(N,O){k.ajax({url:k.perc_paths.TEMPLATES_SAVE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(N),success:function(Q,R){var P=[Q,R];O(true,P)},error:function(R,S,P){var Q=[R,S,P];O(false,Q)}})}function y(N,Q,R,O){function P(S){var T={};k.each(S.AssetDropCriteria,function(){T[this.widgetId]=new k.PercAssetDropCriteriaModel(this.widgetId,this.appendSupport,this.existingAsset,this.multiItemSupport,this.ownerId,this.supportedCtypes,this.assetShared,this.relationshipId)});R(T)}k.ajax({url:k.perc_paths.ASSET_WIDGET_DROP_CRITERIA+N+"/"+Q,type:"GET",dataType:"json",success:P,error:O})}function j(P,Q,N){function O(R){Q(true,R)}k.ajax({url:k.perc_paths.TEMPLATE_LOAD_METADATA+"/"+P,type:"GET",dataType:"json",success:O,error:N})}function t(N,O){k.ajax({url:k.perc_paths.TEMPLATE_SAVE_METADATA+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(N),success:function(Q,R){var P=[Q,R];O(true,P)},error:function(R,S,P){var Q=[R,S,P];O(false,Q)}})}function K(P,N,R){var O=k.perc_paths.TEMPLATE_EXPORT+"/"+P+"/"+N+".xml";var Q=function(S,T){if(S==k.PercServiceUtils.STATUS_ERROR){R(false,[T.request,T.textstatus,T.error])}else{R(true,T.data)}};k.PercServiceUtils.makeRequest(O,k.PercServiceUtils.TYPE_GET,true,Q)}function B(O,P){var N=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.SITE_GET_PROPERTIES+"/"+O,k.PercServiceUtils.TYPE_GET,false,function(R,Q){if(R==k.PercServiceUtils.STATUS_SUCCESS){P(k.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S=k.PercServiceUtils.extractDefaultErrorMessage(Q.request);P(k.PercServiceUtils.STATUS_ERROR,S)}})}function x(O,Q){var N=k.perc_paths.UPDATE_INSPECTED_ELEMENT;var P=function(R,S){if(R==k.PercServiceUtils.STATUS_ERROR){Q(false,[S.request,S.textstatus,S.error])}else{Q(true,S.data)}};k.PercServiceUtils.makeJsonRequest(N,k.PercServiceUtils.TYPE_POST,true,P,O)}function H(O,Q){var N=k.perc_paths.VIEW_IMPORT_LOG+"?templateId="+O+"&exists=true";var P=function(R,S){Q(R,S)};k.PercServiceUtils.makeJsonRequest(N,k.PercServiceUtils.TYPE_GET,true,P)}function q(P,O,Q){var N={SiteTemplates:{importTemplate:[{url:P,siteIds:[O]}]}};k.ajaxSetup({timeout:600000});k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL,k.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data.TemplateSummary)}else{var T=k.PercServiceUtils.extractDefaultErrorMessage(R.request);Q(k.PercServiceUtils.STATUS_ERROR,T)}},N)}function z(P,O,R){var N={SiteTemplates:{importTemplate:[{url:P,siteIds:[O]}]}};k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL_ASYNC,k.PercServiceUtils.TYPE_POST,false,function Q(T,S){if(T==k.PercServiceUtils.STATUS_SUCCESS){R(k.PercServiceUtils.STATUS_SUCCESS,S.data)}else{defaultMsg="There was an unexpected error during the import process.";R(k.PercServiceUtils.STATUS_ERROR,defaultMsg)}},N)}function M(N,P){k.PercServiceUtils.makeJsonRequest(k.perc_paths.JOB_STATUS+"/"+N,k.PercServiceUtils.TYPE_GET,false,function O(R,Q){var T,S=k.PercServiceUtils.STATUS_SUCCESS;if(R==k.PercServiceUtils.STATUS_SUCCESS){T=Q.data.asyncJobStatus}else{S=k.PercServiceUtils.STATUS_ERROR;T="There was an unexpected error during the import process."}P(S,T)})}function I(N,P){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_URL_RESULT+"/"+N,k.PercServiceUtils.TYPE_GET,false,function O(R,Q){var T,S=k.PercServiceUtils.STATUS_SUCCESS;if(R==k.PercServiceUtils.STATUS_SUCCESS){T=Q.data.TemplateSummary}else{S=k.PercServiceUtils.STATUS_ERROR;T="There was an unexpected error during the import process."}P(S,T)})}function F(O,P,Q){var N={PageToTemplatePair:{pageId:O,siteId:P}};k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_CREATE_FROM_PAGE,k.PercServiceUtils.TYPE_POST,false,function(S,R){if(S==k.PercServiceUtils.STATUS_SUCCESS){Q(k.PercServiceUtils.STATUS_SUCCESS,R.data.Template)}else{var T="There was an error creating a template from the selected page";Q(k.PercServiceUtils.STATUS_ERROR,T)}},N)}function e(N,O){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_MIGRATE_CONTENT,k.PercServiceUtils.TYPE_POST,false,function(Q,P){if(Q==k.PercServiceUtils.STATUS_SUCCESS){O(k.PercServiceUtils.STATUS_SUCCESS,P.data)}else{var R="There was an error migrating content.";O(k.PercServiceUtils.STATUS_ERROR,R)}},N)}function n(N,O,P){k.PercServiceUtils.makeJsonRequest(k.perc_paths.TEMPLATE_MIGRATE_CONTENT+"/"+N+"/"+O,k.PercServiceUtils.TYPE_POST,false,function(R,Q){if(R==k.PercServiceUtils.STATUS_SUCCESS){P(k.PercServiceUtils.STATUS_SUCCESS,Q.data)}else{var S="Error";P(k.PercServiceUtils.STATUS_ERROR,S)}})}})(jQuery);(function(e,b){b.layoutController=function(t){var z=e("#frame");return{addRegion:K,moveRegion:R,removeRegion:h,removeWidgetParentRegion:M,addWidget:x,moveWidget:f,removeWidget:k,convertHTMLWidget:y};function y(T,X){var W=J();var U={_tagName:"widgetItem",definitionId:"percRichText",name:T.name,id:W,properties:[]};H(T.regionId,U,T.id);if(typeof(T.assetId)!="undefined"&&T.assetId){var S=t.getAssetDropCriteria()[T.id];var V={PSCreateAssetRequest:{originalAssetId:T.assetId,ownerId:T.ownerId,widgetId:W,widgetName:T.name,targetAssetType:"percRichTextAsset",sharedAsset:S.assetShared}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.CONVERT_WIDGET,e.PercServiceUtils.TYPE_POST,false,function(Z,Y){if(Z==e.PercServiceUtils.STATUS_SUCCESS){k(T.regionId,T.id);X(e.PercServiceUtils.STATUS_SUCCESS,Y.data)}else{k(T.regionId,W);var aa=e.PercServiceUtils.extractDefaultErrorMessage(Y.request);X(e.PercServiceUtils.STATUS_ERROR,aa)}},V)}else{k(T.regionId,T.id);X(e.PercServiceUtils.STATUS_SUCCESS,"")}}function K(U,S,T){t.isResponsiveBaseTemplate()?I(U,S,T):F(U,S,T)}function I(X,T,W){var S=null;t.editRegion(X,function(){S=this});var U=null;if(!C(S)){e.perc_utils.alert_dialog({title:"Region creation warning",content:"Reached maximum allowed columns(12) for the region."});W(null);return}var V=null;if(T=="after"||T=="before"||T=="above"||T=="below"){V=S;t.editRegionParent(X,function(){S=this})}if(S.children&&S.children.length==0){U=G(S)}else{U=S.row?N(S,T,V):E(S,T,V)}W(U)}function E(W,Z,U){var S=null;switch(Z){case"north":var aa=t.newResponsiveRegion(true);W.children.unshift(aa);S=aa;break;case"south":var aa=t.newResponsiveRegion(true);W.children.push(aa);S=aa;break;case"below":var aa=t.newResponsiveRegion(true);var Y=q(W,U.regionId);W.children.splice(Y,0,aa);S=aa;break;case"east":case"west":var X=t.newResponsiveRegion(false,11);X.children=W.children;var V=t.newResponsiveRegion(true);V.children=[X];W.children=[V];var T=t.newResponsiveRegion(false);Z=="east"?V.children.push(T):V.children.unshift(T);S=T;break}return S}function N(W,Z,U){var S=null;switch(Z){case"east":var T=t.newResponsiveRegion(false,1);W.children.push(T);O(W,T);S=T;break;case"west":var T=t.newResponsiveRegion(false,1);W.children.unshift(T);O(W,T);S=T;break;case"after":var T=t.newResponsiveRegion(false,1);var Y=q(W,U.regionId);W.children.splice(Y,0,T);O(W,T);S=T;break;case"north":case"south":var V=t.newResponsiveRegion(true);V.children=W.children;var X=t.newResponsiveRegion(false,12);X.children=[V];W.children=[X];var aa=t.newResponsiveRegion(true);Z=="north"?X.children.unshift(aa):X.children.push(aa);S=aa;break}return S}function O(S,Y){var Z=q(S,Y.regionId);var V=S.children;var U=false;for(var T=Z+1;T<V.length;T++){var W=V[T].large;if(W&&W.length>0){var X=W.split("-")[1];X=parseInt(X,10);if(X>1){V[T].large="large-"+(X-1);U=true;break}}}if(!U){for(var T=Z-1;T>=0;T--){var W=V[T].large;if(W&&W.length>0){var X=W.split("-")[1];X=parseInt(X,10);if(X>1){V[T].large="large-"+(X-1);U=true;break}}}}}function C(S){return !(S.row&&S.children&&S.children.length==12)}function G(S){var V;if(S.row){var U=t.newResponsiveRegion(false,12);U.widgets=S.widgets;S.widgets=[];S.children=[U];V=U}else{var T=t.newResponsiveRegion(true);S.children=[T];T.widgets=S.widgets;S.widgets=[];V=T}return V}function L(T,S){t.editRegion(T,function(){var V=this;var U=this.widgets;t.editRegionParent(T,function(){var Y=this;if(Y.regionId===t.getRoot().regionId&&Y.children.length===1){return}var ad=Y.children.length===1;var ab=q(Y,V.regionId);ab=ab==Y.children.length-1?ab-1:ab;var X=D(Y,T);if(V.columns&&!ad){var Z=Y.children;var aa=Z[ab].large;if(aa&&aa.length>0){var W=V.large.split("-")[1];W=parseInt(W,10);var ac=aa.split("-")[1];ac=parseInt(ac,10);Z[ab].large="large-"+(ac+W)}}})})}function q(T,S){var V=0;var U=false;e.each(T.children,function(){if(this.regionId===S){U=true;return false}V++});if(!U){throw"Failed to find the position of a region with id "+S+"as it does not exist under supplied parent region."}return V}function F(W,U,V){var T=W;if(U==="after"||U==="below"){var S=z.contents().find("#"+W).parent().parent(".perc-region");W=S.attr("id")}t.editRegion(W,function(){var af=this;if(t.isPage()){af.owner="page"}if(U==="center"){var aj=t.newRegion();e.perc_utils.copyRegionObject(af,aj);aj.width=j(af);aj.height=Q(af);af.widgets=[];af.children=[aj];if(V&&typeof(V)==="function"){V(aj)}return}var ac=(U==="north"||U==="south"||U==="below");var Y=!ac;var aa=(U==="south"||U==="east");var ah=((ac!=af.vertical&&af.children.length>1)||af.children.length===0);if(ah){var ag=t.newRegion();e.perc_utils.copyRegionObject(af,ag);af.widgets=[];var aj=t.newRegion();af.children=aa?[ag,aj]:[aj,ag];if(Y){aj.width=Math.floor(j(af)/2);aj.height=Q(af);if(ag.children.length===0||ag.width===""){ag.width=aj.width}ag.height=aj.height}else{ag.width="";ag.height="";aj.width="";aj.height=""}af.vertical=ac;if(V&&typeof(V)==="function"){V(aj)}}else{af.vertical=ac;var aj=t.newRegion();if(ac){aj.width="";aj.height="";if(U==="below"){var X=0;e.each(af.children,function(){X++;if(this.regionId===T){return false}});af.children.splice(X,0,aj)}}else{if(U==="after"){var ae=j(T);var ak=Math.floor(ae/2);var ad=Q(T);aj.width=ak;aj.height=ad;var X=0;e.each(af.children,function(){X++;if(this.regionId===T){if(!this.noAutoResize){this.width=Math.floor(ae/2)}aj.height=ad;return false}});af.children.splice(X,0,aj)}else{var ai;if(aa){ai=af.children[af.children.length-1]}else{ai=af.children[0]}var ab=j(ai);var Z=Q(ai);aj.width=Math.floor(ab/2);aj.height=Z;if(!ai.noAutoResize){if(ai.children.length===0){ai.width=aj.width}ai.height=aj.height}}}if(U==="after"||U==="below"){}else{if(aa){af.children.push(aj)}else{af.children.unshift(aj)}}if(V&&typeof(V)==="function"){V(aj)}}})}function h(T,S){t.isResponsiveBaseTemplate()?L(T,S):n(T,S)}function n(T,S){t.editRegion(T,function(){var V=this;var U=this.widgets;t.editRegionParent(T,function(){var X=this;if(X.regionId===t.getRoot().regionId&&X.children.length===1){return}var aa=false;if(X.children.length===1){X.vertical=X.children[0].vertical;aa=true}var W=D(X,T);X.owner="template";if(!S&&W.children.length>0){var Z=W.children;var Y=W.index;for(c=0;c<Z.length;c++){var ab=Z[c];X.children.splice(Y,0,ab);Y++}}if(!S&&typeof(U)!="undefined"&&U.length>0){X.widgets=new Array();for(c=0;c<U.length;c++){X.widgets.push(U[c])}}})})}function M(T,U){var S=null;t.findWidgetParentRegion(T,function(V){S=V});if(S){h(S,U)}}function J(){var S="";while(t.editWidget(S)||S==""){S=Math.floor(Math.random()*1000000000)}return S+""}function x(W,T,S,V){var U={_tagName:"widgetItem",definitionId:T,id:J(),properties:[]};H(W,U,S);if(V){V(U.id)}}function H(U,T,S){if(U===t.getRoot().regionId){e.perc_utils.debug("Add widget: widget can not be added to root region");return}t.editRegion(U,function(){if(this&&!(this.children&&this.children.length>0)){if(!this.widgets||this.widgets.length===0||!S){var V=this;if(t.isResponsiveBaseTemplate()&&this.row){if(t.isPage()){e.perc_utils.alert_dialog({title:"Add widget warning",content:"Widgets cannot be added to this region due to a template configuration issue.  Please contact your administrator to update the template."});return}else{K(U,"center",function(W){V=W})}}if(!V.widgets){V.widgets=new Array()}V.widgets.push(T)}else{for(widgetIndex in this.widgets){if(S===this.widgets[widgetIndex].id){this.widgets.splice(widgetIndex,0,T);break}}}}this.owner="page"})}function k(T,S){t.editRegion(T,function(){this.widgets=e.grep(this.widgets,function(U){return U.id!=S});if(this.widgets.length===0){this.owner="template"}})}function f(U,V,T,S){t.editRegion(U,function(){var W=this;var X=null;t.editRegion(T,function(){X=this;if(S<0||S>X.widgets.length){return}var Y=e.grep(W.widgets,function(Z){return Z.id===V});k(U,V);X.widgets.splice(S,0,Y[0]);X.owner="page"});if(W.widgets.length===0){W.owner="template"}})}function R(U,T,S){t.editRegion(U,function(){var V=this;if(S<0||S>=V.children.length){return}var X;e.each(V.children,function(Y){if(this.regionId===T){X=Y}});var W=V.children[X];if(X>S){for(p=X;p>S;p--){V.children[p]=V.children[p-1]}}else{for(p=X;p<S;p++){V.children[p]=V.children[p+1]}}V.children[S]=W})}function P(S,U,T){e.each(S.children,function(V){if(this.regionId===U){S.children.splice(V,1,T);return false}})}function D(T,X){var S;var U;var W;var V;e.each(T.children,function(Y){if(this.regionId===X){U=this;W=this.children;V=Y;T.children.splice(Y,1);return false}});S={index:V,region:U,children:W};return S}function j(U){var T=U.width;var V=U.regionId;if(!B(U)){T="";V=U}if(T===""){var V="#"+V;var S=A(V);var T=S.width();return T}else{if(T==="auto"){return T}else{if(!isNaN(T)){return T}else{if(isNaN(T)){T=T.replace("px","");return T}}}}return T}function Q(U){var T=U.height;var V=U.regionId;if(!B(U)){T="";V=U}if(T===""||T==="auto"){var V="#"+V;var S=A(V);T=S.height();return T}else{if(!isNaN(T)){return T}else{if(isNaN(T)&&typeof T==="string"){T=T.replace("px","");return T}}}return T}function B(S){return(S&&"object"===typeof S)}function A(S){return z[0].contentWindow.jQuery(S)}}})(jQuery,jQuery.Percussion);(function(e,b){b.sizeController=function(q){var y=10;var k=1;var n=(y+k)*2;var t=(y+k)*2;var j=e("#frame");return{puff:h};function h(){var A={};f(".perc-region").each(function(){var F=f(this);var H=F.attr("id");var G=F.parents(".perc-region");A[H]=G.length});var C=[];z(A,C);function z(F,G){for(id in F){G.push({regionId:id,regionDepth:F[id]})}G.sort(function(I,H){return H.regionDepth-I.regionDepth})}for(i in C){var E=C[i].regionId;var D=f("#"+E);B(D)}function B(L){var I=L.parent().parent(".perc-region");var H=f(I.children().children(".perc-region"));if(H.length==0){return}var K=I.hasClass("perc-vertical")?"vertical":"horizontal";if(K=="vertical"){var G=-1;var F=0;H.each(function(){var N=f(this);if(N.width()+n>G){G=N.width()+n}var M=f(N).outerHeight(true);F+=M});if(G>I.width()){I.css("width",G)}if(F>I.height()){I.css("height",F)}}else{var J=0;H.each(function(){var M=f(this).outerWidth(true);J+=M});if(J>I.width()){I.css("width",J)}I.css("height","auto")}}}function x(A){var B=A.attr("id");var z=false;q.editRegion(B,function(){if((this.width||this.height)&&this.children.length==0){z=true}});return z}function f(z){return j[0].contentWindow.jQuery(z)}}})(jQuery,jQuery.Percussion);(function(e,b){b.decorationController=function(n,k,C,I){var z=false,E=null;var A;e.each(I,function(){var K=this.name;if(K=="edit"||K=="configure"||this.tooltip=="Configure region"){A=this;return}});var G=null;h(true);return{visible:h,refresh:j,unselectAll:D,setOtherDecorator:y,removeDecorations:J,addClicks:B};function y(K){G=K}function j(){E=null;if(z){x()}else{J()}}function h(K){if(typeof K=="boolean"){if(K!=z){z=K}}return z}function B(){n().unbind("click.decorate").bind("click.decorate",function(K){if(G!=null){G.unselectAll()}K.stopPropagation();if(E){if(!z){E.removeClass(k)}E.removeClass(C);f(E)}E=e(this);if(!z){E.addClass(k)}H(E);E.addClass(C)});e.each(n(),function(){var K=e(this).hasClass("perc-locked");if(!K){e(this).unbind("dblclick.decorate").bind("dblclick.decorate",function(L){L.stopPropagation();if(A){A.callback(e(this))}})}})}function D(){if(E){E.removeClass(C);f(E)}}function F(){n().unbind(".decorate")}function x(){B();if(z){n().addClass(k)}}function J(){F();if(!z){n().removeClass(k)}}function H(L){var M=q(L);if(L.hasClass("perc-locked")){var K={name:"locked",img:"/cm/images/icons/editor/locked",callback:function(N){},tooltip:"Locked"};t(L,M,K)}else{e.each(I,function(){if(typeof(this.widgetType)=="undefined"||this.widgetType==L.attr("widgetdefid")){t(L,M,this)}})}}function q(K){var L=e("<div class='perc-ui-menu'/>");K.append(L);return L}function t(L,K,Q){var S=e.isFunction(Q.img)?Q.img(L):Q.img;if(S==null){return}var N=S.indexOf("Inactive",S.length-"Inactive".length)!==-1;var R=e.isFunction(Q.tooltip)?Q.tooltip(L):Q.tooltip;var P=S+".png";var M=S+"Over.png";var O=e("<img src='"+P+"'/>").addClass("perc-ui-menu-icon").attr("alt",R).attr("title",R);if(N){O.css("cursor","default")}O.click(function(){Q.callback(L)});O.bind("mouseenter",function(){e(this).attr("src",M)}).bind("mouseleave",function(){e(this).attr("src",P)});K.append(O)}function f(K){K.children(".perc-ui-menu").remove()}}})(jQuery,jQuery.Percussion);var layoutModel;(function(f,k){var b=0,e=1,n=2,x=3,t=4,j=5,q=6;var z=10;var h;var y=false;k.layoutView=function(aW,W,Z,ac,ay){f.perc_utils.debug("Calling layoutView()");h=aW.contents();layoutModel=W;var ap=k.sizeController(W);var N=true;var aJ={};var aa=null;var aU="";aU+="<div id='_REGION_ID_' class='perc-region-library-tool' name='_REGION_ID_' style='overflow: hidden;white-space: nowrap;text-overflow: ellipsis;'>";aU+="<div id='_REGION_ID_-2'>";aU+="_REGION_LABEL_";aU+="</div>";aU+="</div>";var aC=null;var F=0;var ax=f.PercDirtyController;var aO={};aW.contents().find("body").append("<div id='placeholder-region'></div>");var aE=[{name:"delete",img:"/cm/images/icons/editor/delete",callback:function(bb){var bc=bb.closest(".perc-region").attr("id");Z.removeWidget(bc,bb.attr("widgetid"));G(true);aG()},tooltip:"Delete widget"},{name:"configure",img:function(bc){if(aO[bc.attr("widgetdefid")].id=="percRawHtml"){var bb="/cm/images/icons/editor/buttonConfigure2Gray"}else{var bb="/cm/images/icons/editor/configureInactive"}if(layoutModel.isTemplate()||aO[bc.attr("widgetdefid")].hasUserPrefs){if(aO[bc.attr("widgetdefid")].id=="percRawHtml"){var bb="/cm/images/icons/editor/buttonConfigure2"}else{var bb="/cm/images/icons/editor/configure"}}return bb},callback:function(bb){if(layoutModel.isTemplate()||aO[bb.attr("widgetdefid")].hasUserPrefs){aY(bb)}},tooltip:"Configure"},{widgetType:"percRawHtml",name:"convert",img:"/cm/images/icons/editor/buttonConvert",callback:function(bc){var bb={id:bc.attr("widgetid"),name:bc.attr("widgetname"),assetId:bc.attr("assetid"),regionId:bc.closest(".perc-region").attr("id"),ownerId:bc.attr("ownerId")};f.perc_utils.confirm_dialog({id:"convertHTMLWidget",title:"Convert HTML widget",question:"You are about to convert an HTML widget to a Rich Text widget. You will not be able to convert back. Do you want to convert?",showAgainCheck:true,width:500,cancel:function(){},success:function(){Z.convertHTMLWidget(bb,function(bd,be){if(bd==f.PercServiceUtils.STATUS_SUCCESS){aG();G(true)}else{f.perc_utils.alert_dialog({title:"Conversion Error",content:be})}})}})},tooltip:"Convert to Rich Text Widget"}];var aX=[{img:function(bb){if(f(bb).parent()[0].nodeName!="DIV"){return null}else{return"/cm/images/icons/editor/delete"}},callback:function(bb){a2(bb)},tooltip:"Delete region"},{img:function(bb){if(f(bb).parent()[0].nodeName!="DIV"){return"/cm/images/images/buttonConfigStandalone"}else{return"/cm/images/icons/editor/configure"}},callback:function(bb){f.PercEditRegionPropertiesDialog().editRegionProperties(bb)},tooltip:"Configure region"}];var aP=k.decorationController(aj,"perc-widget-puff","perc-widget-selected",aE);var ao=layoutModel.isTemplate()?k.decorationController(aH,"perc-region-puff","perc-region-selected",aX):k.decorationController(aH,"perc-region-puff","perc-region-selected",[]);aP.setOtherDecorator(ao);ao.setOtherDecorator(aP);f("#perc-region-auto-resize").click(function(){var bb=f(this).is(":checked");updateSizeFields(bb)});f("#perc-region-library-expander").unbind().click(function(){f.fn.percRegionLibraryMaximizer(k);J()});f("#perc-orphan-assets-expander").unbind().click(function(){f.fn.percOrphanAssetsMaximizer(k);ae()});function a9(bc){callback=function(){if(bb&&layoutModel.isTemplate()){layoutModel.loadAssetDropCriteria(function(){aG(bc)})}else{if(bc){bc()}}};var bb=Q();f.PercBlockUI();layoutModel.save(function(){if(layoutModel.isTemplate()){f.PercRegionCSSHandler.mergeRegionCSS()}f.unblockUI();callback()},bb,y);G(false)}function Q(){var bb=null;var bc=[];aW.contents().find(".perc-widget[widgetdefid='percRawHtml'][assetid='']").each(function(){var bg=f(this);if(bg.hasClass("perc-widget-transperant")&&bg.find(".html-sample-content").length<1){y=true}if(bg.find(".html-sample-content").length<1){var bf={};bf.widgetId=bg.attr("widgetid");var be="";try{be=f(bg.html()).wrapAll("<div></div>").parent()}catch(bd){f.perc_utils.info("Failed to fill the widget content for widget id: "+bf.widgetId+"  and the error is "+bd);be=f("").wrapAll("<div></div>").parent()}be.find("a[tempURL]").each(function(){var bh=f(this).attr("tempURL");f(this).attr("href",bh);f(this).removeAttr("tempURL")});bf.content=be.html();bf.ownerId=bg.attr("ownerid");bc.push(bf)}});if(bc.length>0){bb={InspectedElementsData:{}};bb.InspectedElementsData.newAssets=bc}return bb}f(".perc-dropdown-option-HideGuides").unbind().click(function(){ao.visible(!ao.visible());aP.visible(!aP.visible());N=!N;aG()});f("#perc-save").unbind().click(function(){if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.clearItoolMarkup()}a9();if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.saveCallback()}});f("#perc-layout-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var bd=this;var bc=function(){var bg=I18N.message("perc.ui.menu@JavaScript Off");var bf=I18N.message("perc.ui.menu@JavaScript On");if(f(bd).text()==bg){f(bd).text(bf);f(bd).attr("title","Turns on JavaScript");layoutModel.setJavaScriptOff(true);layoutModel.load();aR()}else{f(bd).text(bg);f(bd).attr("title","Turns off JavaScript");layoutModel.setJavaScriptOff(false);layoutModel.load();aR()}G(false)};if(ax.isDirty()){var be=layoutModel.isTemplate?"This template":"This page";be+=" contains unsaved changes. If you toggle JavaScript, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";var bb={question:be};ax.confirmIfDirty(function(){bc()},function(){},bb)}else{bc()}});f("#perc-layout-cancel").unbind().click(function(){a5();if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.cancelCallback()}});function a5(bb){layoutModel.load();aR();G(false);if(bb){bb()}if(layoutModel.isTemplate()){f.PercRegionCSSHandler.prepareForEditRegionCSS()}}aL();ba();f(".perc-widget-type").unbind().change(ba);f(".perc-widget-category").unbind().change(az);aR();f.perc_finder().addActionListener(function(bd,bc){if(bd==f.perc_finder().ACTIONS.DELETE&&(bc.type=="asset"||bc.type=="page")){if(typeof(bc.isOpen)!="undefined"&&bc.isOpen){return}var be=f.PercNavigationManager.getView();if(be==f.PercNavigationManager.VIEW_DESIGN){var bb=f("#tabs").tabs("option","selected");if(bb==2){aR()}}else{if(be==f.PercNavigationManager.VIEW_EDITOR){var bb=f("#perc-pageEditor-tabs").tabs("option","selected");if(bb==1){aR()}}}}});function aR(){layoutModel.renderAll(aW,function(){aV();f("#frame").attr("perc-view-type","layout");var bc=f.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(bc!=null){bc.handleComponentProgress("perc-ui-component-editor-frame","complete")}var bb=f.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(bb!=null){bb.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function aG(bb){layoutModel.render(function(bc){window.frames[aW.attr("id")].jQuery("body").empty().append(bc).ready(function(){aV(bb)})})}function aV(be){aW.contents().find("div").unbind();aP.refresh();ao.refresh();if(N){if(!layoutModel.isResponsiveBaseTemplate()){a3()}f(".perc-dropdown-option-HideGuides").html("Hide Guides")}else{f(".perc-dropdown-option-HideGuides").html("Show Guides")}aW.contents().find(".perc-region").each(function(){var bf=f(this);bf.attr("title",bf.attr("id"));O(bf);var bg=bf.find(".perc-region");if(bg.length==0){bf.addClass("perc-region-leaf")}});ak();aq();aW.contents().find("body").css("z-index","-1000").css("position","static").unbind().click(function(bf){aP.unselectAll();ao.unselectAll();J()}).append("<div id='perc-widget-drop-feedback'></div>");aw=aW.contents().find("#perc-widget-drop-feedback");F=0;aw.hide();if(aC){var bd=aW.contents().find("#"+aC);bd.click();aC=null}J();aW.contents().find(".perc-region").click(function(){var bf="perc-re-"+f(this).attr("id");f(".perc-region-library-tool").removeClass("perc-region-selected");f(".perc-region-library-tool[name="+bf+"]").addClass("perc-region-selected")});aW.contents().find(".sf-menu").superfish({pathClass:"current",autoArrows:false,delay:400,pathLevels:0});var bc=f.PercNavigationManager.getView()==f.PercNavigationManager.VIEW_EDIT_TEMPLATE;var bb=(T()&&bc)?"visible":"hidden";f("#perc-error-alert").css("visibility",bb);f.PercInspectionToolHandler.afterRenderCallback();if(be){be()}}var aw;function aq(){f.perc_utils.handleLinks(aW);f.perc_utils.handleObjects(aW)}function ak(){layoutModel.eachRegion(function(){if(layoutModel.canOverride(this)||layoutModel.isTemplate()){var bc=this.regionId;if(bc!="percRoot"){var bb=f(aW.contents().find("#"+bc)[0]);if(layoutModel.isTemplate()){ab(bb);a0(bb)}if(bb.find(".perc-region").length==0){P(bb)}U(bb)}}})}function P(be){var bf=be.attr("id");var bc=be.find(".perc-widget");var bb=be.find(".perc-widget:last");var bd=bb.attr("widgetid");be.droppable({accept:".perc-widget-tool",tolerance:"pointer",greedy:true,scope:f.perc_iframe_scope,drop:function(bg,bh){E(bh,be)},over:function(bg,bh){aT(be)},out:function(bg,bh){ai(be)}});bc.droppable({accept:".perc-widget-tool",tolerance:"pointer",greedy:true,scope:f.perc_iframe_scope,drop:function(bg,bh){a6(bh,f(this),be)},over:function(bg,bh){aD(f(this),be)},out:function(bg,bh){a4(f(this),be)}})}function a1(bb){var bc;if(!bb||aO[bb].responsive){return}bc=f("#nonResponsiveWidgetWarning").length;if(bc){return}f.perc_utils.confirm_dialog({id:"nonResponsiveWidgetWarning",title:"Responsive Design",question:"The widget you have selected is not responsive. As a result, it may not display well on smaller devices.",type:"OK",cancel:function(){},success:function(){},showAgainCheck:true,dontShowAgainAction:null})}function a7(bj){var bf=aW.contents().find("#"+bj);var bd=bf.offset().top+bf.height();var bg=bf.find(".perc-widget");aa=bj;if(bg.length==0){bf.css("background-color","#CAF589")}else{if(F==0){var bc=bf.find(".perc-widget:last");var bh=bc.attr("widgetid");var be=bc.offset();var bb=be.top+bc.height();var bi=5;if(bb>bd){return}aw.show();aw.height(bi).width(bc.width()).css("background-color","#CAF589").css("left",be.left).css("top",bb).css("z-index","2000").css("position","absolute")}}}function ah(bc){var bb=aW.contents().find("#"+bc);bb.css("background-color","")}function ab(bg){bg.children("perc-region-feedback").remove();var bh=bg.attr("id");var bf=f.map(["north","south","east","west","after","below","center"],function(bi){return af(bh,bi)});bf[b].css({top:"2px",left:"10px",width:"100%",height:"10px"}).addClass("north");bf[e].css({bottom:"2px",left:"10px",width:"100%",height:"10px"}).addClass("south");bf[n].css({top:"10px",right:"2px",height:"100%",width:"10px"}).addClass("east");bf[x].css({top:"10px",left:"2px",height:"100%",width:"10px"}).addClass("west");bf[t].css({top:"0px",right:"-4px",height:"100%",width:"6px"}).addClass("after");bf[j].css({bottom:"-4px",left:"0px",width:"100%",height:"6px"}).addClass("below");bf[q].css({top:"12px",left:"12px",width:"100%",height:"100%"}).addClass("center");var bd=bg.parent().parent(".perc-region");var bc=bg.next(".perc-region");var bb=bd.hasClass("perc-horizontal");var be=bg.find(".perc-region").length>0;f.each(bf,function(bj){if(bj==t&&(!bb||bc.length==0)){return true}if(bj==j&&(bb||bc.length==0)){return true}if(bj==q&&be){return true}bg.append(this);if(bj===b||bj===e){var bk=bf[bj].width()-20;bf[bj].css("width",bk)}else{if(bj===n||bj===x){var bi=bf[bj].height()-20;bf[bj].css("height",bi)}else{if(bj===q){var bi=bf[bj].height()-24;var bk=bf[bj].width()-24;bf[bj].css("height",bi).css("width",bk)}}}})}function af(bc,bb){return f("<div/>").addClass("perc-region-feedback").css({position:"absolute"}).droppable({scope:f.perc_iframe_scope,accept:"#region-tool",tolerance:"pointer",greedy:true,hoverClass:"perc-show-feedback",over:function(bd,be){aW.contents().find(".perc-region").removeClass("perc-hover-region-feedback");f(this).parent().addClass("perc-hover-region-feedback")},out:function(){var be=f(this).parent().parent()[0];var bd=be.tagName;if(bd=="BODY"){h.find(".perc-region").removeClass("perc-hover-region-feedback")}},drop:function(be,bf){aW.contents().find(".perc-region").removeClass("perc-hover-region-feedback");var bd=f("#tabs-3");if(bd.offset().top+bd.height()>be.clientY){return false}Z.addRegion(bc,bb,function(bg){if(bg!=null){aC=bg.regionId;G(true);aG()}})}})}function U(bb){if(bb.is(".perc-region-leaf")){M(bb)}else{S(bb)}}var K;function S(bc){if(bc.hasClass("perc-horizontal")){D(bc).sortable({delay:500,containment:"parent",tolerance:"pointer",items:"> .perc-horizontal > .perc-region",axis:"x",start:function(bf,bg){K=new Object();var bd=f(this).find(".perc-horizontal > .perc-region");var be=0;bd.each(function(){var bj=f(this);var bi=bj.attr("id");var bh=bj.height();if(bh>be){be=bh}K[bi]=bh});bd.height(be);bg.placeholder.width(bg.item.width()).css("visibility","visible").css("background-color","#CAF589")},stop:function(bf,bg){var be=f(this).children(".perc-horizontal > .perc-region");be.each(function(){var bj=f(this);var bh=bj.attr("id");var bi=K[bh];bj.height(bi)});var bd=bg.item.prevAll(".perc-region").length;aC=bg.item.attr("id");Z.moveRegion(bc.attr("id"),bg.item.attr("id"),bd);G(true);aG()}})}else{var bb=D(bc);if(typeof(bb.sortable)=="function"){D(bc).sortable({delay:500,containment:"parent",tolerance:"pointer",items:"> .perc-vertical > .perc-region",placeholder:"placeholder-region",axis:"y",forcePlaceholderSize:true,stop:function(bd,be){var bf=be.item.prevAll(".perc-region").length;aC=be.item.attr("id");Z.moveRegion(bc.attr("id"),be.item.attr("id"),bf);G(true);aG()}})}}}function M(bb){D(bb).sortable({connectWith:".perc-region-leaf",dropOnEmpty:true,placeholder:"placeholder-widget",items:"div.perc-widget:not('.perc-locked')",tolerance:"pointer",start:function(bc,bd){f(this).css("overflow","visible")},stop:function(bf,bg){var be=bg.item.prevAll(".perc-widget").length;var bd=bg.item.attr("widgetid");var bc=bb.attr("id");var bh=bc;if(bb.children().children("[widgetid="+bd+"]").length>0){Z.moveWidget(bc,bd,bh,be);G(true);aG()}},receive:function(bf,bg){var be=bg.item.prevAll(".perc-widget").length;var bd=bg.item.attr("widgetid");var bc=bg.sender.attr("id");var bh=bb.attr("id");Z.moveWidget(bc,bd,bh,be);G(true);aG()}})}function a0(bb){layoutModel.isResponsiveBaseTemplate()?a8(bb):ar(bb)}function a8(be){var bk=be.attr("id");var bg=null;var bf=null;layoutModel.editRegion(bk,function(){bg=this});if(be.next().length>0){layoutModel.editRegion(be.next().attr("id"),function(){bf=this})}if(bg.row||(bg.columns&&bg.large=="large-12")){be.css("border","1px solid #33C9ED");return}var bd=null;layoutModel.editRegionParent(bk,function(){bd=this});var bl=Math.floor((f(aW.contents().find("#"+bd.regionId)[0]).width())/12);var bh=layoutModel.getRegionPosition(bk);if(bh==bd.children.length-1||(bf!=null&&(bg.large=="large-1"&&bf.large=="large-1"))){return}var bc=be.outerWidth();var bb=be.next().outerWidth();var bj=bb-be.next().innerWidth();var bi=bc+bb;D(be).resizable({handles:"e",grid:bl,start:function(bm,bn){f.each(bd.children,function(){f(aW.contents().find("#"+this.regionId)[0]).css("min-width",bl+"px")});be.resizable("option","maxWidth",bi-bl);console.log("regionResizing.width()"+be.width());console.log("minw"+bl);console.log("regionResizing.next().width()"+be.next().width());console.log("parentWidth",f(aW.contents().find("#"+bd.regionId)[0]).width())},resize:function(bm,bn){be.next().width(bi-be.outerWidth()-bj)},stop:function(bn,bp){G(true);f.each(bd.children,function(){f(aW.contents().find("#"+this.regionId)[0]).css("min-width","")});regL=Math.round(be.outerWidth()/bl);regR=Math.round(be.next().outerWidth()/bl);regL=regL==0?1:regL;regR=regR==0?1:regR;var bm=parseInt(bg.large.split("-")[1],10);var bo=parseInt(bf.large.split("-")[1],10);if((bm+bo)>(regL+regR)){regL<regR?regL++:regR++}else{if((bm+bo)<(regL+regR)){regL>regR?regL--:regR--}}bg.large="large-"+regL;bf.large="large-"+regR;aC=be.attr("id");aG()}})}function O(bc){var bb=bc.attr("noautoresize");if(bb!=undefined){bc.removeAttr("noautoresize");bc.attr("data-noautoresize",bb)}else{return"false"}return bb}function ar(bf){var be=O(bf);if(be=="true"){bf.css("border","1px solid #33C9ED");return}var bc;var bb;var bd;D(bf).resizable({handles:"e, s",start:function(bg,bh){if(bf.parent().hasClass("perc-vertical")){return}bc=bf.next();if(O(bc)=="true"){return}bb=bf.width()+bc.width();bf.resizable("option","maxWidth",bb)},resize:function(bg,bh){if(bf.parent().hasClass("perc-vertical")){return}bc=bf.next();if(O(bc)=="true"){return}bd=bh.size.width/bb;bc.width(bb-bf.width())},stop:function(bg,bh){G(true);layoutModel.editRegion(bf.attr("id"),function(){this.width=bh.size.width;this.height=bh.size.height});if(bf.parent().hasClass("perc-horizontal")){if(O(bc)=="true"){return}if(bh.originalSize.width!=bh.size.width){layoutModel.editRegion(bc.attr("id"),function(){this.width=bb-bh.size.width})}}aC=bf.attr("id");aG()}})}function a3(){ap.puff()}function D(bb){return aW[0].contentWindow.jQuery(bb[0])}function aL(){if(!f("#perc-delete-region-dialog").data("dialog")){f("#perc-delete-region-dialog").perc_dialog({modal:true,zIndex:100000,autoOpen:false,width:500,resizable:false,buttons:{},percButtons:{Ok:{click:function(){f("#perc-delete-region-dialog").dialog("close")},id:"perc-delete-region-ok"},Cancel:{click:function(){f("#perc-delete-region-dialog").dialog("close")},id:"perc-delete-region-cancel"}}})}}function a2(be){var bg=be.attr("id");var bd=f("#perc-region-id-label");var bc=f("#perc-delete-region-dialog");var bb=f("#perc-delete-content-choice");bd.html(bg);bc.dialog("open");bb.attr("checked","checked");var bf=layoutModel.isResponsiveBaseTemplate()?am(be):V(be);if(bf){bb.removeAttr("disabled")}else{bb.attr("disabled","disabled")}bc.parent().find(".perc-ok").unbind().click(function(){var bh=f("#perc-delete-content-choice:checked").length!=0;Z.removeRegion(bg,bh);bc.dialog("close");G(true);aG()})}function V(bf){var bb=bf.parent();var bn=bf.hasClass("perc-vertical");var bj=bb.hasClass("perc-vertical");var bc=f(bf).children().children(".perc-region").length;var bh=f(bf).children().children(".perc-widget").length;var bd=f(bb).children(".perc-region").length;var bi=bc==1;var be=bc==0;var bm=bd==1;var bg=bh>0;var bl=bd>1;var bk=bn==bj;return(be&&bg&&!bl)||bi||(!be&&bl&&bk)}function am(bb){return false}function aY(bf){var be=bf.attr("widgetid"),bd=bf.attr("widgetdefid");var bc=function(bg,bh){layoutModel.editWidget(be,function(){if(bg=="sys_perc_name"){this.name=bh}else{if(bg=="sys_perc_description"){this.description=bh}else{this.properties[bg]=bh}}});G(true)};var bb;layoutModel.editWidget(be,function(){bb=this.properties;if(layoutModel.isTemplate()){bb.sys_perc_name=(typeof(this.name)!="undefined")?this.name:"";bb.sys_perc_description=(typeof(this.description)!="undefined")?this.description:""}});k.widgetPropertiesDialog(bc,bb,bd,aG,"UserPref",layoutModel.getWidgetByName)}function aH(){return aW.contents().find(".perc-region")}function aj(){var bb=layoutModel.getSpecialWidgets("Layout");if(bb){aW.contents().find(".perc-widget").each(function(){var bc=f(this);var be=bc.attr("widgetid");var bd=bc.hasClass("perc-widget-transperant");var bf=bc.attr("assetid");if(be in bb.LockedWidgets){bc.addClass("perc-locked")}if(be in bb.TransperantWidgets){bc.addClass("perc-widget-transperant")}else{if(layoutModel.isTemplate()&&bf!=""&&!(be in bb.ContentWidgets)){bc.addClass("perc-widget-transperant")}}})}return aW.contents().find(".perc-widget")}function ba(){f(".perc-widget-list").empty();f.getJSON(f.perc_paths.WIDGETS_ALL+"/type/"+f(".perc-widget-type").val()+"?filterDisabledWidgets=yes",function(bb){f.each(bb.WidgetSummary,function(){aO[this.id]=this;f(".perc-widget-list").append(L(this))});ag();aZ(aO);f(".perc-widget-list").width("auto");fixIframeHeight()})}function aZ(bf){var bc=function(bh,bi){if(bh==f.PercServiceUtils.STATUS_ERROR){var bj=f.PercServiceUtils.extractDefaultErrorMessage(bi.request);f.perc_utils.debug("Error : "+bj);return}f(bi.data.WidgetPackageInfoResult.packageInfoList).each(function(){var bk=this;var bm=bf[bk.widgetName];var bl=f("div.perc-widget-tool[id=widget-"+bk.widgetName+"-0]").closest("a");bl.tooltip({delay:800,bodyHandler:function(){var bn="<p> Name: "+bm.label+"</p><p> Description: "+bm.description+'</p><p class="perc-widget-is-responsive-label" status="'+(bm.responsive?"Yes":"No")+'"> Is Responsive: '+(bm.responsive?"Yes":"No")+"</p><p> Provider URL: "+bk.providerUrl+"</p><p> Version: "+bk.version+"</p>";return bn}})})};var be=f.perc_paths.WIDGET_INFO;var bb=[];for(var bg in bf){bb.push(bg)}var bd={WidgetPackageInfoRequest:{widgetNames:bb}};f.PercServiceUtils.makeJsonRequest(be,f.PercServiceUtils.TYPE_POST,false,bc,bd)}function ag(){var bd=f(".perc-widget-type").val();var bc=[];f(".perc-widget-category-predefined").text(function(bf,bg){bc[bf]=bg.toLowerCase()});var be=[];f.each(f(".perc-widget-list .perc-widget-tool"),function(bf,bi){if(typeof(f(bi).data("widget").type)!="undefined"){var bg=f(bi).data("widget").type;if(bg.toLowerCase()=="custom"){var bh=f(bi).data("widget").category;if(typeof(bh)!="undefined"){f.each(bh.split(","),function(bj,bk){if(bk!=""&&f.inArray(bk,be)==-1){be.push(bk)}})}}}});var bb=f(".perc-widget-category");bb.val("all");f(".perc-widget-category-custom").remove();if(bd=="all"){f(".perc-widget-category-predefined").show();if(be.length>0){bb.append(f("<option />").addClass("perc-widget-category-custom").val("other").text("Other"))}}if(bd=="percussion"||bd=="community"){f(".perc-widget-category-predefined").show()}if(bd=="custom"){f(".perc-widget-category-predefined").hide();f.each(be,function(bf,bg){bb.append(f("<option />").addClass("perc-widget-category-custom").val(bg).text(bg.charAt(0).toUpperCase()+bg.slice(1)))})}}function az(){f.each(f(".perc-widget-list .perc-widget-tool"),function(){if(at(this)){f(this).parent("a").show()}else{f(this).parent("a").hide()}});f(".perc-widget-list").width("auto");fixIframeHeight()}function at(bf){var be=f(".perc-widget-category").val();if(be=="all"){return true}if(be=="other"){var bc=f(bf).data("widget").type;return(bc.toLowerCase()=="custom")}if(typeof(f(bf).data("widget").category)=="undefined"){return false}var bd=f(bf).data("widget").category.split(",");var bb=[];f(".perc-widget-category-predefined").text(function(bg,bh){bb[bg]=bh.toLowerCase()});return(f.inArray(be,bd)!=-1)}var A=new Object();function aI(){var bb=aW[0].contentWindow.$(".perc-region");A=new Object();bb.each(function(){var be=f(this).attr("id");var bc=aW[0].contentWindow.$(this);var bd=bc.css("overflow");A[be]=bd;f(this).css("overflow","hidden")})}function I(){var bb=aW[0].contentWindow.$(".perc-region");bb.each(function(){var bd=f(this).attr("id");var bc=A[bd];f(this).css("overflow",bc)})}function L(bb){var bc;bc=f("<a/>").addClass("perc-tooltip-custom").css("overflow","hidden").append(f("<div/>").css({position:"relative"}).addClass("perc-widget-tool").append(f('<img src="/Rhythmyx'+bb.icon+'" alt=""></img>')).append(f("<div/>").append(f("<nobr/>").append(bb.label)).addClass("perc-widget-label").css("overflow","hidden")).attr("id","widget-"+bb.id+"-"+f(".perc-widget").size()).draggable({appendTo:"body",refreshPositions:true,helper:"clone",revert:false,start:function(){f.perc_utils.addAutoScroll();aa=null;aI();f.percHideBodyScrollbars()},stop:function(){f.perc_utils.removeAutoScroll();I();f.percShowBodyScrollbars()}}).data("widget",bb));bc.attr("alt",bc.find("nobr").html());bc.attr("title",bc.find("nobr").html());return bc}function G(bc){dirty=bc;var bb=layoutModel.isTemplate()?"template":"page";ax.setDirty(bc,bb,a9)}function ae(){var bb=f("#perc-orphan-assets");bb.html('<a class="mcol-listing perc-listing-type-percRichTextAsset perc-listing-category-ASSET ui-draggable ui-droppable mcol-opened" alt="RichText1" id="perc-finder-listing-16777215-101-721" title="RichText1"><img style="float: left;" src="/Rhythmyx/rx_resources/images/ContentTypeIcons/filetypeIconsRichText.png"><div style="cursor: default; text-overflow: ellipsis; overflow: hidden;" class="perc-finder-item-name" unselectable="on">RichText1</div></a>')}function J(){var be=f("#perc-region-library");var bf=aW.contents().find(".perc-region");be.empty();var bb="";var bc=[];bf.each(function(){var bg=f(this).attr("id");bc.push(bg)});bc.sort();for(r=0;r<bc.length;r++){bb+=aU.replace(/_REGION_ID_/g,"perc-re-"+bc[r]).replace(/_REGION_LABEL_/g,bc[r])}be.html(bb);var bd="perc-re-"+aW.contents().find(".perc-region-selected").attr("id");f(".perc-region-library-tool[name="+bd+"]").addClass("perc-region-selected");f(".perc-region-library-tool").click(function(){var bh=f(this);f(".perc-region-library-tool").removeClass("perc-region-selected");bh.addClass("perc-region-selected");var bi=String(bh.attr("name")).replace(/^perc-re-/,"");var bg=aW.contents().find("#"+bi);bg.click()});f.PercTextOverflow(f(".perc-region-library-tool div"),122);fixIframeHeight()}var H=[];var B={};function aT(bb){var bc=bb.attr("id");H.push(bc);if(!B[bc]){B[bc]=[]}al()}function ai(bb){var bc=bb.attr("id");H.shift();if(B[bc]){delete B[bc]}al()}function E(bb,bd){var bc=bb.draggable.data("widget").id;aA(bc,bd);H=[];B={};al()}function aD(bc,bd){var be=bd.attr("id");var bb=bc.attr("widgetid");if(B[be]){B[be].push(bb)}al()}function a4(bc,bd){var be=bd.attr("id");var bb=bc.attr("widgetid");if(B[be]){Y(B[be],bb)}al()}function a6(bc,bb,be){var bd=bc.draggable.data("widget").id;aA(bd,be,bb);H=[];B={};al()}function al(){h=aW.contents();aw.hide();var bc=H[0];var bb=null;if(B[bc]){bb=B[bc][0]}if(bb&&bc){var bd=h.find(".perc-widget[widgetid='"+bb+"']");aM(bd)}else{if(bc){var be=h.find("#"+bc);aB(be)}else{}}}function aB(bd){var bc=bd.find(".perc-widget");if(bc.length==0){R(bd)}else{var bb=f(bc[bc.length-1]);an(bb)}}function R(bf){var bd=bf.offset();var bc=bd.top+z;var bb=bd.left+z;var be=bf.width();aN(bb,bc,be)}function an(bg){var bd=bg.offset();var bb=bd.left;var bf=bg.css("width");var bc=bd.top;var be=bg.height();var bh=bc+be;aN(bb,bh,bf)}function aM(bf){var bd=bf.offset();var bc=bd.top;var bb=bd.left;var be=bf.css("width");aN(bb,bc,be)}function aN(bd,bc,bb){aw.css("background-color","#CAF589").css("left",bd).css("top",bc).css("z-index","50000").css("position","absolute").css("height","5px").css("width",bb).show()}function aA(bh,bg,be){var bc=H[0];var bf=h.find("#"+bc);var bb=null;var bd=null;if(B[bc]){bb=B[bc][0];bd=h.find(".perc-widget[widgetid="+bb+"]")}if(bb&&bc){Z.addWidget(bc,bh,bb);G(true);aG()}else{if(bc){Z.addWidget(bc,bh);G(true);aG()}}if(layoutModel.isResponsiveBaseTemplate()){a1(bh)}}function Y(bb,bc){for(i=0;i<bb.length;i++){if(bb[i]===bc){bb.splice(i,1)}}}function ad(){console.log([JSON.stringify(H),JSON.stringify(B)])}function av(bb){layoutModel.eachRegion(function(){if(layoutModel.canOverride(this)||layoutModel.isTemplate()){var bd=this.regionId;if(bd!="percRoot"){var bc=f(aW.contents().find("#"+bd)[0]);if(layoutModel.isTemplate()){C(bc,bb)}aS(bc,bb)}}})}function aS(bc,bb){if(bc.is(".perc-region-leaf")){aK(bc,bb)}else{aQ(bc,bb)}}function aQ(bc,bb){D(bc).sortable({disabled:bb,enable:!bb})}function aK(bc,bb){D(bc).sortable({disabled:bb,enable:!bb})}function C(bc,bb){D(bc).resizable({disabled:bb,enable:!bb})}f("#perc-error-alert").unbind().click(function(){f.PercLayoutErrorDialog().openLayoutErrorDialog()});function T(){var bc=document.getElementById("frame").contentWindow.percGlobalErrors;if(bc.length>0){return true}var bg=document.getElementById("frame").contentWindow.document;var be=bg.styleSheets;for(var bd=0;bd<be.length;bd++){try{var bb=be[bd].cssRules?be[bd].cssRules:be[bd].rules;var bh=bb.length;if(bh==0){return true}}catch(bf){return true}}return false}function au(){if(f("#perc-wid-lib-expander").hasClass("perc-whitebg")){f.fn.percWidLibMaximizer(k)}if(f("#perc-region-library-expander").hasClass("perc-whitebg")){f.fn.percRegionLibraryMaximizer(k)}f("#perc-layout-menu #perc-lib-expander-div, #perc-layout-menu #perc-dropdown-actions-layout, #perc-layout-menu #perc-dropdown-help-layout, #perc-layout-menu #perc-dropdown-view-layout, #perc-region-library-maximizer, #perc-wid-lib-maximizer").addClass("perc-disable-menu-item");f(".perc-overlay-div, #region-tool-disabled").show();f("#region-tool").hide()}function aF(){f("#perc-layout-menu #perc-lib-expander-div, #perc-layout-menu #perc-dropdown-actions-layout, #perc-layout-menu #perc-dropdown-help-layout, #perc-layout-menu #perc-dropdown-view-layout, #perc-region-library-maximizer, #perc-wid-lib-maximizer").removeClass("perc-disable-menu-item");f(".perc-overlay-div, #region-tool-disabled").hide();f("#region-tool").show();f("#perc-undo-tool, #perc-undo-tool-disabled").hide()}var X={removeDropsSortingResizing:av,afterRender:aV,setLayoutDirty:G,enableToolbarMenu:aF,disableToolbarMenu:au,dirtyController:ax,widgetDecorator:aP,regionDecorator:ao,layoutController:Z,cancel:a5,refreshRender:aG};if(!layoutModel.isResponsiveBaseTemplate()){f.PercInspectionToolHandler.init(X,W,aW)}f.PercEditRegionPropertiesDialog().initEditRegionPropertiesDialog(X,layoutModel,aW)}})(jQuery,jQuery.Percussion);(function(M,t){var K=[];var z=[];var X=[];if(!window.Node){window.Node=new Object();Node.ELEMENT_NODE=1;Node.ATTRIBUTE_NODE=2;Node.TEXT_NODE=3;Node.CDATA_SECTION_NODE=4;Node.ENTITY_REFERENCE_NODE=5;Node.ENTITY_NODE=6;Node.PROCESSING_INSTRUCTION_NODE=7;Node.COMMENT_NODE=8;Node.DOCUMENT_NODE=9;Node.DOCUMENT_TYPE_NODE=10;Node.DOCUMENT_FRAGMENT_NODE=11;Node.NOTATION_NODE=12}var F=null;var ag=null;var N=null;var k=null;var I=null;M.PercInspectionToolHandler={init:Z,saveCallback:h,cancelCallback:ad,afterRenderCallback:y,clearItoolMarkup:S};function Z(ak,P,aj){N=ak;k=P;I=aj;ac(false);M("#perc-region-tool-inspector").unbind().click(function(al){n();al.stopPropagation()});M("#perc-undo-tool").unbind().click(function(){j()});M("#perc-region-tool-menu").on("mouseover",".perc-dropdown-option-Stacked",function(){x("perc-row")});M("#perc-region-tool-menu").on("mouseout",".perc-dropdown-option-Stacked",function(){A("perc-row")});M("#perc-region-tool-menu").on("mouseover",".perc-dropdown-option-SidebySide",function(){x("perc-col")});M("#perc-region-tool-menu").on("mouseout",".perc-dropdown-option-SidebySide",function(){A("perc-col")});M("#perc-region-tool-inspector").hover(function(am){var al=M(am.relatedTarget);if(M.browser.msie&&al.is("ul")){al=al.find("a:first")}var an=M("#perc-region-tool-menu").find("li.current");if(!al.is("a.perc-dropdown-option")&&!al.is("span.sf-sub-indicator")){an.showSuperfishUl().siblings().hideSuperfishUl()}else{clearTimeout(an.parents(["ul.","sf-js-enabled",":first"].join(""))[0].sfTimer)}if(!M(this).is(".buttonPressed")){M(this).css("background-position","0px -34px")}},function(am){var al=M(am.relatedTarget);if(M.browser.msie&&al.is("ul")){al=al.find("a:first")}if(!al.is("a.perc-dropdown-option")&&!al.is("span.sf-sub-indicator")){M("#perc-region-tool-menu").find("li.current").hideSuperfishUl()}if(!M(this).is(".buttonPressed")){M(this).css("background-position","0px 0px")}})}function h(){U();ae();if(!(M("#perc-region-tool-inspector").hasClass("buttonPressed"))){M("#perc-undo-tool").hide();M("#perc-undo-tool-disabled").hide()}}function ad(){C();U();N.enableToolbarMenu()}function y(){if(F){F()}}function ae(){if(z.length>0){M("#perc-undo-tool").show();M("#perc-undo-tool-disabled").hide()}else{M("#perc-undo-tool").hide();M("#perc-undo-tool-disabled").show()}}function j(){var P=z.pop();k.renderByObject(P,function(aj){window.frames[I.attr("id")].jQuery("body").empty().append(aj).ready(function(){N.afterRender(function(){if(K.length>0){e();K.pop();ae();N.removeDropsSortingResizing(true)}if(F){F()}})})})}function E(){ah();Q()}function ah(){var P=window.frames[0].jQuery;P(".perc-region.perc-region-leaf").filter(function(){var aj=P(this).find(".perc-widget");return aj.size()!=1||aj.eq(0).attr("widgetdefid")!="percRawHtml"||aj.eq(0).hasClass(".perc-locked")||aj.eq(0).children().size()==0||aj.eq(0).find(".html-sample-content").size()==1||(aj.eq(0).children().size()==1&&!aj.eq(0).children().eq(0).is("div"))||(aj.eq(0).children().size()==1&&aj.eq(0).children().eq(0).is("div")&&aj.eq(0).children().eq(0).children().length==0&&aj.eq(0).children().eq(0).outerHeight(true)==0&&aj.eq(0).children().eq(0).innerHeight()==0)}).addClass("perc-region-itool-unselectable")}function Q(){var P=window.frames[0].jQuery;P(".perc-region.perc-region-leaf:not('.perc-region-itool-unselectable')").find(".perc-widget").each(function(){P(this).contents().filter(function(){return this.nodeType==Node.TEXT_NODE&&M.trim(P(this).text()).length>0}).wrap('<span class="perc-itool-text-node-wrapper"/>');if(P(this).children().size()==1){var aj=P(this);while(aj.children().length==1&&aj.children().eq(0).is("div")){aj.addClass("perc-itool-region-elem");aj=aj.find("> div")}aj.children().addClass("perc-itool-selectable-elem")}else{P(this).children().each(function(){if(P(this).outerHeight(true)==0&&P(this).innerHeight()==0){P(this).addClass("perc-zero-size-elem")}else{P(this).addClass("perc-itool-selectable-elem")}})}})}function H(){var P=I.contents();P.find(".perc-itool-selectable-elem").unbind("mouseenter");P.find(".perc-region-itool-unselectable").unbind("mouseenter");P.find(".perc-region-itool-unselectable").unbind("mouseleave");P.find(".perc-itool-selectable-elem").removeClass("perc-itool-selectable-elem");P.find(".perc-region-itool-unselectable").removeClass("perc-region-itool-unselectable");P.find(".perc-itool-region-elem").removeClass("perc-itool-region-elem")}function O(){return z.length>0}function U(){z.length=0;K.length=0}function B(){var aj={apply:function(am){var al={status:false,message:"We're sorry. Because your page is form based you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page is form based you will not be able to breakdown your template with the inspector tool."};if(!(am.size()==1&&am.eq(0).children().length==1&&am.eq(0).children().eq(0).is("form"))){al.status=true;al.message="";al.consoleMsg=""}return al}};ag.push(aj);var P={apply:function(am){var al={status:false,message:"We're sorry. Because your page is table based you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page is table based you will not be able to breakdown your template with the inspector tool."};if(!(am.size()==1&&am.eq(0).children().length==1&&am.eq(0).children().eq(0).is("table"))){al.status=true;al.message="";al.consoleMsg=""}return al}};ag.push(P);var ak={apply:function(am){var al={status:false,message:"We're sorry. The page does not have any inspectable elements you will not be able to breakdown your template with the inspector tool.",consoleMsg:"Inspection Info: The page does not have any inspectable elements you will not be able to breakdown your template with the inspector tool."};var an=am.filter(function(){var ao=window.frames[0].jQuery(this);var ap=ao.children().length===1&&!ao.children().eq(0).is("div");return !(ap)});if(an.size()>0){al.status=true;al.message="";al.consoleMsg=""}return al}};ag.push(ak)}function aa(){if(!window.console){return}if(ag==null){ag=[];B()}var P=I.contents().find(".perc-widget[widgetdefid='percRawHtml']:not('.perc-locked')").filter(":only-child").filter(function(){var al=window.frames[0].jQuery(this);var ak=al.find(".html-sample-content").length==1;return !(ak)});for(i=0;i<ag.length;i++){var aj=ag[i].apply(P);if(!aj.status){console.log(aj.consoleMsg);break}}}function b(P){k.render(function(aj){window.frames[I.attr("id")].jQuery("body").empty().append(aj).ready(function(){N.afterRender(function(){M.each(P,function(){var ak=this;k.editRegion(ak.regionId,function(){this.width=ak.width;this.height=ak.height})});R()})})})}function R(){k.render(function(P){window.frames[I.attr("id")].jQuery("body").empty().append(P).ready(function(){N.afterRender(function(){if(F){F()}});if(K.length>0){e()}})})}function e(){M.each(K,function(){M.each(this,function(){var P=this;var aj=I.contents().find('div[widgetid ="'+P.widgetId+'"]');try{aj.html(P.content)}catch(ak){M.perc_utils.info("Failed to fill the widget content for widget id: "+P.widgetId+"  and the error is "+ak)}aj.attr("ownerId",P.ownerid);if(P.isTransparent){aj.addClass("perc-widget-transperant")}aj.parents(".perc-region-puff:first").removeAttr("style").addClass("perc-new-splitted-region")})});N.removeDropsSortingResizing(true);N.setLayoutDirty(true);S();Y()}function n(){var ak=M("#perc-region-tool-inspector");var al="This template contains unsaved changes. If you toggle Region Inspect mode, all changes will be lost. Click Don't Save to proceed and discard changes, Save to proceed and keep changes, Cancel to continue editing.";callbackFunction=function(){ae();U();if(ak.hasClass("buttonPressed")){C();N.enableToolbarMenu()}else{M.PercWorkflowController().checkOut("percPage",memento.pageId,function(am){if(am){Y();N.disableToolbarMenu()}})}F=null};var aj={question:al,dontSaveCallback:function(){F=callbackFunction;N.cancel()}};var P=N.dirtyController.isDirty();N.dirtyController.confirmIfDirty(function(){callbackFunction()},function(){},aj)}function q(){N.widgetDecorator.unselectAll();N.regionDecorator.unselectAll();N.regionDecorator.removeDecorations();N.widgetDecorator.removeDecorations()}function Y(){ae();aa();E();q();var ak=M("#perc-region-tool-inspector");ak.addClass("buttonPressed");ak.css("background-position","0px -68px");var P=I.contents();var aj=window.frames[0].jQuery;P.find(".perc-region-puff").addClass("perc-region-puff-gray");P.find(".perc-new-splitted-region").removeClass("perc-region-puff-gray");var al=P.find("#itool-placeholder-highlighter");if(al.length<1){P.find(".perc-region:first").append("<div id='itool-placeholder-highlighter' style='display:none;position:absolute;z-index:60000;opacity:0.8;filter:alpha(opacity=80);'></div>");al=P.find("#itool-placeholder-highlighter")}J(P,aj,al);G(P,aj,al);P.find(".perc-region:first").addClass("perc-itool-custom-cursor").mouseleave(function(){al.hide();P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter")});N.removeDropsSortingResizing(true)}function J(P,aj,ak){P.find(".perc-region-itool-unselectable").mouseenter(function(){if(P.find(".perc-itool-selected-elem").length>0){return}var al=aj(this);al.css("background-color","orange").attr("title","You cannot further sub-divide this region.").css("cursor","default").css("z-index","1000000");P.find(".perc-region-puff").addClass("perc-region-puff-gray");al.closest(".perc-region-puff").removeClass("perc-region-puff-gray");P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter");al.find("div").each(function(){var am=aj(this).attr("title");aj(this).attr("tempTitle",am);aj(this).removeAttr("title")});ak.hide()}).mouseleave(function(){var al=aj(this);al.find("div").each(function(){var am=aj(this).attr("tempTitle");aj(this).attr("title",am);aj(this).removeAttr("tempTitle")});al.css("background-color","transparent").removeAttr("title")})}function G(P,aj,ak){aj("body").on("mouseenter",".perc-itool-selectable-elem, .perc-itool-multi-selectable-highlighter",function(am){var al=aj(this);var an=P.find(".perc-itool-selected-elem").length==0||am.shiftKey&&aj(this).hasClass("perc-itool-multi-selectable-highlighter")||am.shiftKey&&aj(this).hasClass("perc-itool-multi-selectable");if(!an){return}if(al.hasClass("perc-itool-multi-selectable-highlighter")){al.hide()}P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter");ak.show();P.find(".perc-region-puff").addClass("perc-region-puff-gray");al.closest(".perc-region-puff").removeClass("perc-region-puff-gray");ak.offset({top:al.offset().top,left:al.offset().left});ak.height(al.innerHeight()).width(al.innerWidth());al.addClass("perc-itool-highlighter");ak.unbind("click").click(function(ao){ao.preventDefault();f(ao)})});aj("body").on("mouseleave","#itool-placeholder-highlighter",function(){P.find(".perc-itool-multi-selectable-highlighter").show();aj(this).hide()})}function f(){var P=I.contents();var aj=window.frames[0].jQuery;var ak=P.find(".perc-itool-highlighter").removeClass("perc-itool-highlighter").addClass("perc-itool-selected-elem");P.find("#itool-placeholder-highlighter").hide();aj(".perc-text-node-wrapper").contents().unwrap();if(ak.prev()&&!ak.prev().hasClass("perc-itool-selected-elem")){ak.prev().addClass("perc-itool-multi-selectable")}if(ak.next()&&!ak.next().hasClass("perc-itool-selected-elem")){ak.next().addClass("perc-itool-multi-selectable")}T(ak,false);D(ak);if(ak.hasClass("perc-itool-multi-selectable")){ak.removeClass("perc-itool-multi-selectable")}ac(true)}function D(aj){var P=I.contents();M(aj[0]).siblings().filter(":not('.perc-itool-selected-elem')").each(function(ak){currentSibling=M(this);if(currentSibling.hasClass("perc-zero-size-elem")){if(currentSibling.prev().length>0){currentSibling.appendTo(currentSibling.prev());return}else{currentSibling.appendTo(currentSibling.next());return}}P.find(".perc-region:first").append("<div class = 'perc-sib-highlighter-div-"+ak+" perc-sibling-div' style='border:5px solid grey; display:none;position:absolute;z-index:50000;opacity:1;filter:alpha(opacity=100);'></div>");var al=P.find(".perc-sib-highlighter-div-"+ak);if(currentSibling.hasClass("perc-itool-multi-selectable")){al.addClass("perc-itool-multi-selectable-highlighter")}W(al,currentSibling)})}function T(al,P){var aj=I.contents();var ak=M("<div class='perc-itool-selected-green-border' style='border:5px solid #A2C437; display:none;position:absolute;z-index:50000;opacity:1;filter:alpha(opacity=100);'></div>");aj.find(".perc-region:first").append(ak);ak.on("click",function(){if(al.prev().hasClass("perc-itool-selected-elem")&&al.next().hasClass("perc-itool-selected-elem")){return}ab()});if(P){ak.css("border-color","#00afea")}ak.show();ak.offset({top:al.offset().top,left:al.offset().left}).height(al.innerHeight()-10).width(al.innerWidth()-10)}function x(al,am){var ak=window.frames[0].jQuery;var aj=I.contents();var P=ak(".perc-itool-selected-elem");if(P.length==0||(P.length==1&&P.is("div")&&ak(P).hasClass("perc-itools-wrapper"))||(ak(P[0]).parent().hasClass("perc-itools-wrapper"))){return}P.siblings(":not('.perc-itool-selected-elem')").each(function(){if(ak(this).is("div")){ak(this).addClass("perc-itools-wrapper perc-make-me-region").addClass(al)}else{ak(this).wrap("<div class='perc-widget perc-itool-nov-div-wrapper perc-itools-wrapper perc-itool-region-puff'></div>")}});aj.find(".perc-sibling-div").remove();if(P.length==1&&P.is("div")){P.addClass("perc-itool-region-puff-self perc-make-me-region perc-self-wrapper perc-itools-wrapper").addClass(al);D(P)}else{P.wrapAll("<div  class='perc-widget perc-itool-multi-wrapper perc-itool-nov-div-wrapper perc-itool-region-puff-self perc-self-wrapper perc-itools-wrapper "+al+"'></div>");D(ak(P[0]).parent())}aj.find(".perc-sibling-div").css({"border-color":"#00afea"});ak(".perc-itool-selected-green-border").remove();ak(P).each(function(){T(ak(this),false)});if(al=="perc-col"){if(P.length==1){P.parent().addClass("perc-clear")}else{P.parent().parent().addClass("perc-clear")}}if(P.length==1){ak(".perc-itool-selected-green-border").css("border-color","#00afea")}else{T(ak(".perc-itool-multi-wrapper"),true);ak(".perc-itool-selected-green-border").parent(".perc-itool-selected-green-border").css("border-color","#00afea")}if(am){am()}}function A(am,aj){var ak=I.contents();var al=window.frames[0].jQuery;var P=al(".perc-itool-selected-elem");if(P.length==0){return}if(P.length>1){P.unwrap()}al(".perc-itool-nov-div-wrapper").contents().unwrap();if(am=="perc-col"){P.parent().removeClass("perc-clear")}al(".perc-itools-wrapper").removeClass("perc-itools-wrapper perc-make-me-region").removeClass(am);al(".perc-itool-region-puff-self").removeClass("perc-itool-region-puff-self perc-make-me-region perc-self-wrapper").removeClass(am);ak.find(".perc-sibling-div").remove();D(P);al(".perc-itool-selected-green-border").remove();al(P).each(function(){T(al(this),false)})}function W(P,aj){P.show();P.offset({top:aj.offset().top,left:aj.offset().left});P.height(aj.innerHeight()-10).width(aj.innerWidth()-10)}function S(){var ak=I.contents();var al=window.frames[0].jQuery;al(".perc-itool-highlighter").removeClass("perc-itool-highlighter");al(".perc-itool-selected-elem").removeClass("perc-itool-selected-elem");al("#itool-placeholder-highlighter").remove();al(".perc-itool-selected-green-border").remove();al(".perc-itool-selected-elem-off").removeClass("perc-itool-selected-elem-off");al(".perc-text-node-wrapper").contents().unwrap();ak.find("#perc-next-sib-wrapper").remove();ak.find("#perc-pre-sib-wrapper").remove();ak.find(".perc-pre-sib-wrapper").removeClass("perc-pre-sib-wrapper");ak.find(".perc-pre-next-wrapper").removeClass("perc-pre-next-wrapper");ak.find(".perc-sibling-div").remove();al(".perc-itool-multi-selectable").removeClass("perc-itool-multi-selectable");ak.find(".perc-region-puff").removeClass("perc-region-puff-gray");ak.find(".perc-itool-selectable-elem").removeClass("perc-itool-selectable-elem");var aj=al(".perc-zero-size-elem").parent().parent();var P=al(".perc-zero-size-elem").detach();P.appendTo(aj);al(".perc-zero-size-elem").removeClass("perc-zero-size-elem");H()}function ab(){var ak=I.contents();var al=window.frames[0].jQuery;al(".perc-itool-selected-elem").removeClass("perc-itool-selected-elem");al("#itool-placeholder-highlighter").remove();al(".perc-itool-selected-elem-off").removeClass("perc-itool-selected-elem-off");al(".perc-text-node-wrapper").contents().unwrap();al(".perc-itool-multi-selectable").removeClass("perc-itool-multi-selectable");var aj=al(".perc-zero-size-elem").parent().parent();var P=al(".perc-zero-size-elem").detach();P.appendTo(aj);ak.find(".perc-itool-selected-green-border").remove();ak.find(".perc-pre-sib-wrapper").removeClass("perc-pre-sib-wrapper");ak.find(".perc-pre-next-wrapper").removeClass("perc-pre-next-wrapper");ak.find(".perc-itool-region-puff").removeClass("perc-itool-region-puff");ak.find(".perc-sibling-div").remove();ac(false);Y()}function C(){U();ae();var P=M("#perc-region-tool-inspector");P.removeClass("buttonPressed");P.css("background-position","0px -34px");I.contents().find(".perc-itool-custom-cursor").removeClass("perc-itool-custom-cursor");N.widgetDecorator.addClicks();N.regionDecorator.addClicks();S();ac(false);N.removeDropsSortingResizing(false)}function ac(P){var aj=M("#perc-region-tool-menu");aj.html("");aj.PercDropdown({percDropdownRootClass:"perc-region-tool-menu",percDropdownOptionLabels:["","Stacked","Side by Side"],percDropdownCallbacks:[function(){},V,L],percDropdownCallbackData:["","Stacked","Side by Side"],percDropdownDisabledFlag:[false,P,P],percDropdownItemImage:["","../images/images/menuIconStacked.png","../images/images/menuIconSide.png"],percDropdownDisabledItemImage:["","../images/images/menuIconStackedGray.png","../images/images/menuIconSideGray.png"]})}function V(){af(true)}function L(){af(false)}function af(P){var aj=window.frames[0].jQuery;if(aj(".perc-itools-wrapper").length==0){if(P){x("perc-row",function(){ai(P)})}else{x("perc-col",function(){ai(P)})}}else{ai(P)}}function ai(ap){ac(false);var ax=jQuery.extend(true,{},k.getTemplateObj());z.push(ax);S();var aq=ap?"south":"left";var am=window.frames[0].jQuery;am(".perc-zero-size-div").removeClass("perc-zero-size-div");var an=am(".perc-itool-region-puff-self");var aj=an.parents(".perc-region-puff:first").attr("id");var al=an.parents(".perc-widget[widgetdefid='percRawHtml']").attr("widgetid");var ao=an.parents(".perc-widget[widgetdefid='percRawHtml']").hasClass("perc-widget-transperant");var av=an.parents(".perc-widget-puff:first").attr("ownerId");am.fn.reverse=[].reverse;var ar=am(".perc-self-wrapper");var au=[];var at=am(".perc-itools-wrapper").parent();while(at.not(".perc-widget[widgetdefid='percRawHtml']").length>0){au.push(at);at=at.parent()}au=am(au).reverse();var aw=ap?am(".perc-itools-wrapper"):am(".perc-itools-wrapper").reverse();var ak=[];var P=aj;au.each(function(az){var aD=M(this);var aC=aD.attr("id");var aA;var aB="";var aE=aD.attr("class");userRegionClasses=aE?aE.split(" "):[];for(i=0;i<userRegionClasses.length;i++){var ay=userRegionClasses[i];if(ay.indexOf("perc-")==-1){aB+=ay+" "}}N.layoutController.addRegion(P,"center",function(aF){aA=aF.regionId;k.editRegion(aF.regionId,function(){if(aC&&aC!=""){this.regionId=aC}this.cssClass=aB;if(!ap){var aG={};aG.regionId=this.regionId;aG.width=aD.width();aG.height=aD.height();ak.push(aG)}})});P=aC&&aC!=""?aC:aA;am(P).addClass("perc-region-puff-gray")});aw.each(function(aA){var ay=M(this);var aE="";var aC="";if(ay.is(".perc-make-me-region")){var aB=M(this);aE=aB.attr("id");var aD=aB.attr("class");userRegionClasses=aD?aD.split(" "):[];for(i=0;i<userRegionClasses.length;i++){var az=userRegionClasses[i];if(az.indexOf("perc-")==-1){aC+=az+" "}}}N.layoutController.addRegion(P,aq,function(aG){k.editRegion(aG.regionId,function(){if(aE&&aE!=""){this.regionId=aE}this.cssClass=aC;if(!ap){var aH={};aH.regionId=this.regionId;aH.width=ay.width();aH.height=ay.height();ak.push(aH)}});var aF=[];N.layoutController.addWidget(aG.regionId,"percRawHtml",null,function(aI){var aH={};aH.widgetId=aI;aH.content=ay.html();aH.isTransparent=ao;aH.ownerid=av;aF.push(aH)});K.push(aF)})});N.layoutController.removeWidgetParentRegion(al,true);b(ak)}})(jQuery,jQuery.Percussion);(function(e,b){b.contentView=function(D,q){var t=[];var I={name:"delete",img:function(M){var L="/cm/images/icons/editor/delete";var K=q.getAssetDropCriteria()[M.attr("widgetid")];var N=K&&K.locked?M.attr("assetid"):"";if(!N){L="/cm/images/icons/editor/deleteInactive"}return L},tooltip:function(L){var O=L.attr("widgetid");var K=q.getAssetDropCriteria()[O];var N=K&&K.locked?L.attr("assetid"):"";var M="";if(N){M="Delete local content"}if(N&&K.assetShared){M="Remove shared asset from widget. This will not delete the asset from the system."}return M},callback:function(M){var Q=M.attr("widgetid");var L=q.getAssetDropCriteria()[Q];var P="Are you sure you want to delete this local content?";var O="Delete Local Content";if(typeof(L)!="undefined"&&L.assetShared){P="Are your sure you want to remove the shared asset from the widget?\nThis will not delete the asset from the system.";O="Remove Shared Asset"}var K={title:O,question:P,type:"YES_NO",cancel:function(){},success:function(){q.clearAsset(M.attr("widgetid"),M.attr("widgetdefid"),M.attr("assetid"),J)}};var N=L&&L.locked?M.attr("assetid"):"";if(N){e.perc_utils.confirm_dialog(K)}}};var G={name:"edit",img:function(M){var O=M.attr("widgetid");var K=q.getAssetDropCriteria()[O];var L="/cm/images/icons/editor/edit";if(typeof(K)!="undefined"&&K.assetShared){L="/cm/images/icons/editor/editAsset"}if(q.getWidgetContentTypes(O)==""){L="/cm/images/icons/editor/editInactive"}else{if(q.isTemplate()||q.isLandingPage()){var N=M.attr("widgetdefid");if((q.isTemplate()&&q.getWidgetPrefs(N).attr("is_editable_on_template")=="false")||(q.isPage()&&q.isLandingPage()&&N=="percTitle")){L="/cm/images/icons/editor/editInactive"}}}if(q.isTemplate()&&K&&!K.locked&&M.attr("assetid")&&q.getWidgetPrefs(N).attr("is_editable_on_template")!="false"){L+="Middle"}return L},tooltip:function(L){var N=L.attr("widgetid");var K=q.getAssetDropCriteria()[N];var M="Edit local content";if(typeof(K)!="undefined"&&K.assetShared){M="Edit shared asset"}return M},callback:function(M){if(q.getWidgetContentTypes(M.attr("widgetid"))!=""){var O=M.attr("widgetdefid");if((q.isTemplate()&&q.getWidgetPrefs(O).attr("is_editable_on_template")=="false")||(q.isPage()&&q.isLandingPage()&&O=="percTitle")){return}var L=q.getAssetDropCriteria()[M.attr("widgetid")];var N=L&&L.locked?M.attr("assetid"):"";var K=L&&L.assetShared;var P={widgetid:M.attr("widgetid"),widgetdefid:M.attr("widgetdefid"),widgetName:M.attr("widgetName")};q.configureAsset(P,N,K,J)}}};var n=null;if(q.isTemplate()){n={name:"promote",img:function(M){var L=null;var K=q.getAssetDropCriteria()[M.attr("widgetid")];var N=K&&!K.locked?M.attr("assetid"):"";var O=M.attr("widgetdefid");if(N&&q.getWidgetPrefs(O).attr("is_editable_on_template")!="false"){L="/cm/images/icons/editor/promote"}return L},tooltip:function(L){var M="";var K=q.getAssetDropCriteria()[L.attr("widgetid")];var N=K&&!K.locked?L.attr("assetid"):"";if(N){M="Promote content to template"}return M},callback:function(L){var K=q.getAssetDropCriteria()[L.attr("widgetid")];var M=K&&!K.locked?L.attr("assetid"):"";if((K&&!K.existingAsset)&&L.attr("assetid")){K=q.getPageAssetDropCriteria()[L.attr("widgetid")]}if(M){var N={widgetid:L.attr("widgetid"),widgetdefid:L.attr("widgetdefid"),widgetName:L.attr("widgetName")};q.promoteAsset(M,N,K.assetShared,J)}}}}t.push(I);t.push(G);if(n){t.push(n)}var E=b.decorationController(H,"perc-widget-puff","perc-widget-selected",t);e("#show-hide-decorations").unbind().click(function(){E.visible(!E.visible())});var x=e("#frame");var y;var j;var B;A();J();e.perc_finder().addActionListener(function(M,L){if(M==e.perc_finder().ACTIONS.DELETE&&(L.type=="asset"||L.type=="page")){if(typeof(L.isOpen)!="undefined"&&L.isOpen){return}var N=e.PercNavigationManager.getView();if(N==e.PercNavigationManager.VIEW_DESIGN){var K=e("#tabs").tabs("option","selected");if(K==1){J()}}else{if(N==e.PercNavigationManager.VIEW_EDITOR){var K=e("#perc-pageEditor-tabs").tabs("option","selected");if(K==0){J()}}}}});function H(){var K=q.getSpecialWidgets("Content");if(K){D.contents().find(".perc-widget").each(function(){var L=e(this).attr("widgetid");if(L in K.LockedWidgets){e(this).addClass("perc-locked")}if(L in K.TransperantWidgets){e(this).addClass("perc-widget-transperant")}})}return D.contents().find(".perc-widget")}function A(){H().each(function(){h(e(this))})}var f=0;function h(N){var L=N.attr("widgetid");var M=q.getWidgetContentTypes(L);function K(Q){var P=Q.data("spec")&&Q.data("spec").type;if(P==undefined||P==""){P=Q.data("percRowData")&&Q.data("percRowData").type}var O=P&&M&&(P==M||e.grep(M,function(R){return R==P}).length);return O}N.droppable({scope:e.perc_iframe_scope,tolerance:"pointer",over:function(O,P){var Q=e(this).parent().parent().attr("id");f++;if(K(P.draggable)){document.body.style.cursor="default";if(Q==y||f==1){B.each(function(){e(this).css("background-color","")});e(this).css("background-color","#CAF589")}}else{document.body.style.cursor="not-allowed"}},out:function(O,P){f--;document.body.style.cursor="default";e(this).css("background-color","")},drop:function(T,Q){f--;document.body.style.cursor="default";e(this).css("background-color","");if(!K(Q.draggable)){return false}if(N.hasClass("perc-locked")){return false}var S="";var P="";var V=Q.draggable.data("spec");if(typeof(V)=="undefined"){V=Q.draggable.data("percRowData")}if(typeof(V)!="undefined"){S=(typeof(V.id)!="undefined")?V.id:Q.draggable.data("percRowData").id;P=(typeof(V.relationshipId)!="undefined")?V.relationshipId:""}if(S){var O=q.getAssetDropCriteria()[N.attr("widgetid")];var U=O&&O.locked?N.attr("assetid"):"";var R={widgetid:L,widgetdefid:N.attr("widgetdefid"),widgetName:N.attr("widgetName"),relationshipId:O.relationshipId};var W={title:"Content replace warning",question:"The asset you are dropping will replace the current content of the widget.<br/>Do you want to continue?",type:"YES_NO",cancel:function(){},success:function(){if(P==""){q.setAssetRelationship(R,S,true,J)}else{q.updateAssetRelationship(R,S,P,function(){C(Q.draggable);J()},function(X,Y){z(Y,Q.draggable)})}}};if(U){e.perc_utils.confirm_dialog(W)}else{if(P==""){q.setAssetRelationship(R,S,true,J)}else{q.updateAssetRelationship(R,S,P,function(){C(Q.draggable);J()},function(X,Y){z(Y,Q.draggable)})}}}}})}function z(M,K){var L={title:"Warning",content:M,okCallBack:function(){C(K)}};e.perc_utils.alert_dialog(L)}function C(L){L.remove();var K=e(".perc-orphan-assets-list");if(K.find(".perc-orphan-asset").size()==0){e.fn.percOrphanAssetsMaximizer(b);e("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();e("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function J(){q.renderAll(D,function(){F();e("#frame").attr("perc-view-type","content");var L=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(L!=null){L.handleComponentProgress("perc-ui-component-editor-frame","complete")}var K=e.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(K!=null){K.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}function k(){e.perc_utils.handleLinks(D);e.perc_utils.handleObjects(D)}function F(){E.refresh();A();k();D.contents().find("body").css("z-index","-1000").css("position","static").unbind().click(function(){E.unselectAll()});f=0;x=e("#frame");j=x.contents().find(".perc-region");B=x.contents().find(".perc-widget");j.mouseover(function(K){y=e(this).attr("id");K.stopPropagation()})}e(document).ready(function(){e("#perc-content-menu a.perc-dropdown-option-DisableJavaScript").unbind().click(function(){var L=I18N.message("perc.ui.menu@JavaScript Off");var K=I18N.message("perc.ui.menu@JavaScript On");if(e(this).text()==L){e(this).text(K);e(this).attr("title","Turns on JavaScript");q.setJavaScriptOff(true);J()}else{e(this).text(L);e(this).attr("title","Turns off JavaScript");q.setJavaScriptOff(false);J()}})})}})(jQuery,jQuery.Percussion);function countProperties(e){var b=0;for(var f in e){if(e.hasOwnProperty(f)){++b}}return b}(function($,P){P.widgetPropertiesDialog=function(setWidgetProperty,widgetProperties,widgetDefinitionId,postCallback,propertyType,getWidgetByName){$.perc_widget_definition_client.restGetWidgetDefinition(widgetDefinitionId,propertyType,function(widgetDef){if(widgetProperties){if(typeof(widgetProperties.sys_perc_name)!="undefined"&&typeof(widgetProperties.sys_perc_description)!="undefined"){widgetDef.userPrefDef.sys_perc_name=(new $.perc_sys_pref("perc_sys_name","","Name","sys_perc_name"));widgetDef.userPrefDef.sys_perc_description=(new $.perc_sys_pref("perc_sys_description","","Description","sys_perc_description"))}widgetDef.setValuesFromWidgetProperties(widgetProperties)}var dialogOptions={modal:true,width:500,title:"Configure Widget Properties",zIndex:100000,percButtons:{Ok:{click:saveProperties,id:"perc-widget-properties-ok"},Cancel:{click:function(){$(this).remove()},id:"perc-widget-properties-cancel"}},id:"perc_edit_widget_properties"};var dialog=$("#perc_edit_widget_properties");var numOfFields=countProperties(widgetDef.userPrefDef);var dlgHeight="auto";if(numOfFields>10){dlgHeight="700"}if($("#perc_edit_widget_properties > #perc-section-system-container").size()==0){dialogOptions.height=dlgHeight}$("<div/>").append(widgetDef.render()).perc_dialog(dialogOptions);_addFieldGroups()});function saveProperties(){var widget=$(this).find("[name=sys_perc_name]");var widgetName=$.trim(widget.val()).toUpperCase();var originalName=$.trim(widget.attr("originalValue")).toUpperCase();if(typeof(widgetName)!="undefined"&&widgetName!=""&&widgetName!=originalName&&getWidgetByName(widgetName)!=null){$.perc_utils.alert_dialog({title:"Error",content:"Widget name '"+widgetName+"' is already in use. Please use another name."});return}$(this).find("input").each(function(){var value=$.trim($(this).val());if($(this).attr("type")=="checkbox"){value=$(this).is(":checked")?"true":"false"}setWidgetProperty($(this).attr("name"),value)});$(this).find("select").each(function(){setWidgetProperty($(this).attr("name"),$(this).val())});$(this).find("textarea").each(function(){setWidgetProperty($(this).attr("name"),$(this).val())});postCallback();$(this).remove()}function _addFieldGroups(){var dialog=$("#perc_edit_widget_properties");if(dialog.find("#perc-section-system-container").size()>0){dialog.find(".ui-dialog-content.ui-widget-content").addClass("group-style")}var fieldGroups=[{groupName:"perc-section-system-container",groupLabel:"Widget Summary"},{groupName:"perc-section-properties-container",groupLabel:"Properties"}];$.each(fieldGroups,function(index){var minmaxClass=(index==0)?"perc-items-minimizer":"perc-items-maximizer";var groupHtml="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span  class='perc-min-max "+minmaxClass+"' ></span>"+this.groupLabel+"</div></div>";dialog.find("#"+this.groupName).before(groupHtml);index!=0&&dialog.find("#"+this.groupName).hide()});dialog.find(".perc-section-label").unbind().click(function(){var self=$(this);self.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");dialog.find("#"+self.attr("groupName")).toggle()})}};$.perc_widget_definition_model=function(){this.widgetDefinitionXml=null;this.userPrefDef=null;this.setValuesFromWidgetProperties=function(widgetProperties){for(p in this.userPrefDef){var propertyName=this.userPrefDef[p].name;this.userPrefDef[p].realValue=widgetProperties[propertyName]}};this.getUserPrefDef=function(){return this.userPrefDef};this.init=function(xml,propertyType){var self=this;this.widgetDefinitionXml=xml;var $widgetDefinitionXml=$(this.widgetDefinitionXml);var $userPreferences=$widgetDefinitionXml.find(propertyType);this.userPrefDef=new Object();if($userPreferences.length==0){return}$userPreferences.each(function(){var datatype=$(this).attr("datatype");var default_value=$(this).attr("default_value");var display_name=$(this).attr("display_name");var name=$(this).attr("name");var enumValues=null;if(datatype==""||datatype==null){datatype="string"}else{if(datatype=="enum"){enumValues=new Object();$(this).find("EnumValue").each(function(){var display_value=$(this).attr("display_value");var value=$(this).attr("value");enumValues[value]=display_value})}}self.userPrefDef[name]=(new $.perc_user_pref(datatype,default_value,display_name,name,enumValues))})};this.render=function(){var html=$("<div/>");var systemContainer=$("<div id='perc-section-system-container' />");var propertiesContainer=$("<div id='perc-section-properties-container' />");var sysProperties="";var properties="";for(u in this.userPrefDef){if((this.userPrefDef[u].name=="sys_perc_name"||this.userPrefDef[u].name=="sys_perc_description")&&(this.userPrefDef[u].datatype=="perc_sys_name"||this.userPrefDef[u].datatype=="perc_sys_description")){sysProperties+="\t"+this.userPrefDef[u].render()}else{properties+="\t"+this.userPrefDef[u].render()}}if(sysProperties!=""&&properties!=""){systemContainer.append($(sysProperties));html.append($("<div class='fieldGroup' />").append(systemContainer));propertiesContainer.append($(properties));html.append($("<div class='fieldGroup' />").append(propertiesContainer))}else{if(properties==""){html.append($(sysProperties))}else{html.append($(properties))}}$.perc_filterField(html.find("[name=sys_perc_name]"),$.perc_textFilters.ID_WITH_SPACE);$.perc_filterField(html.find("[name=sys_perc_description]"),$.perc_textFilters.DESCRIPTION);return html}};$.perc_widget_definition_client=new function(){this.restGetWidgetDefinition=function(widgetDefinitionId,propertyType,callback){$.ajax({url:$.perc_paths.WIDGET_FULL+"/"+widgetDefinitionId,dataType:"xml",type:"GET",success:function(xml,textstatus){var model=new $.perc_widget_definition_model(xml);model.init(xml,propertyType);callback(model)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+widgetDefinitionId)}})};this.restGetWidgetPrefs=function(widgetDefinitionId,callback){$.ajax({url:$.perc_paths.WIDGET_FULL+"/"+widgetDefinitionId,dataType:"xml",type:"GET",success:function(xml,textstatus){var $widgetDefinitionXml=$(xml);var $widgetPrefs=$widgetDefinitionXml.find("WidgetPrefs");callback($widgetPrefs)},error:function(){alert("Unable to retrieve widget definition for widget definition id "+widgetDefinitionId)}})}};$.perc_sys_pref=function(datatype,default_value,display_name,name){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.realValue=null;this.render=function(){var buff="";if(datatype=="perc_sys_name"){var value=(typeof(this.realValue)!="undefined")?this.realValue:this.default_value;buff="<tr>\n";buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'" originalValue="'+value+'" maxlength="30"></td>\n</tr>\n';buff+="</tr>\n";return buff}if(datatype=="perc_sys_description"){var value=(typeof(this.realValue)!="undefined")?this.realValue:this.default_value;buff="<tr>\n";buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><textarea style="resize: none; border: 1px inset #F0F0F0; padding: 2px; height: 40px" class="perc-widget-property" name="'+this.name+'" type="text" maxlength="100">'+value+"</textarea></td>\n</tr>\n";buff+="</tr>\n";return buff}return buff}};$.perc_user_pref=function(datatype,default_value,display_name,name,enumValues){this.datatype=datatype;this.default_value=default_value;this.display_name=display_name;this.name=name;this.enumValues=enumValues;this.realValue=null;this.render=function(){var buff="<tr>\n";var datatype=this.datatype;var value=undefined;if(typeof(this.realValue)!=="boolean"){if(this.realValue===undefined){value=this.default_value}else{value=(this.realValue==="0")?this.default_value:this.realValue}}else{if(this.realValue===undefined){value=this.default_value}else{value=this.realValue}}if(value===undefined){value=""}if(datatype=="string"||datatype=="number"){buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><input class="perc-widget-property" name="'+this.name+'" type="text" value="'+value+'"></td>\n</tr>\n'}else{if(datatype=="bool"){var checked=(value==true||value=="true"||value=="on")?"CHECKED":"";buff+='   <td class = "checkbox-size"><input class="perc-widget-property" name="'+this.name+'" type="checkbox" '+checked+'> <label for="'+this.name+'">'+this.display_name+"</label></td>\n</tr>\n"}else{if(datatype=="enum"){buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+="   <td>\n";buff+='   <select class="perc-widget-property" name="'+this.name+'" value="'+value+'">\n';for(v in enumValues){var selected=(v==value)?"SELECTED":"";buff+='       <option value="'+v+'" '+selected+"> "+enumValues[v]+"   </option>\n"}buff+="   </select>\n";buff+="</td>\n</tr>\n"}else{if(datatype=="list"){var values=eval(value);buff+='   <td><label for="'+this.name+'">'+this.display_name+"</label>: </td>\n</tr>\n";buff+='   <td><textarea class="perc-widget-property" name="'+this.name+'">\n';for(v in values){buff+=values[v]+"\n"}buff+="</textarea>\n"}}}}buff+="</tr>\n";return buff}}})(jQuery,jQuery.Percussion);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercContentPreSubmitHandlers={_handlers:[],addHandler:function(e){if(typeof(e)!="function"){alert("handler must be a function");return}if(b.inArray(e,this._handlers)==-1){this._handlers.push(e)}},removeHandler:function(h){if(typeof(h)!="function"){alert("handler must be a function");return}if(b.inArray(h,this._handlers)>-1){var e=this._handlers.length;for(var f=0;f<e;f++){if(this._handlers[f]===h){this._handlers.splice(f,1);return}}}},getHandlers:function(){return this._handlers},clearHandlers:function(){this._handlers=[]}}})(jQuery);(function(e){e.PercRevisionDialog={open:b,ITEM_TYPE_ASSET:"asset",ITEM_TYPE_PAGE:"page",ITEM_MODE_EDIT:"edit",ITEM_MODE_VIEW:"view"};function b(q,x,k,j){e.fn.dataTableExt.afnSortData["perc-dom-text"]=function(B,A){var z=[];e("td:eq("+A+")",B.oApi._fnGetTrNodes(B)).each(function(){var C=e(this).text();z.push(C)});return z};e.fn.dataTableExt.afnSortData["perc-dom-date"]=function(B,A){var z=[];e("td:eq("+A+")",B.oApi._fnGetTrNodes(B)).each(function(){var C=e(this).data("timedate");z.push(C)});return z};e.PercRevisionService.getRevisionDetails(q,y);var n;function y(A,z){var B=this;if(A==e.PercServiceUtils.STATUS_ERROR){var D=e.PercServiceUtils.extractDefaultErrorMessage(z.request);e.perc_utils.alert_dialog({title:"Error",content:D});callback(false);return}var C=t();n=e(C).perc_dialog({resizable:false,title:I18N.message("perc.ui.revisionDialog.title@Revisions")+": "+x,modal:true,closeOnEscape:false,percButtons:{Close:{click:function(){n.remove()},id:"perc-revisions-dialog-close"}},id:"perc-revisions-dialog",open:function(){f(z.data)},width:700,height:490})}function t(){var z=e("<div class='dataTables_wrapper' style='height: 100%; z-index: 4470;position:relative;' id='perc-revisions-container'><table id='revisionsTable' width='100%''><thead><tr><th align='left' width='10%' id='perc-header-revision'><span class='col-name'>Revision</span></th><th align='left' width='20%' id='perc-header-status'><span class='col-name'>Status</span></th><th align='left' width='35%' id='perc-header-last-modified'><span class='col-name'>Last Modified</span></th><th align='left' width='25%' id='perc-header-last-modifier'><span class='col-name'>Last Modifier</span></th><th align='left' width='10%' id='perc-header-actions'><span class='col-name'>Actions</span></th></tr></thead><tbody></tbody></table></div>");return z}function f(P){var J=P.RevisionsSummary;var N=e.isArray(J.revisions)?J.revisions:[J.revisions];var z=N.length;var L=J.restorable;var E=L?"restore.png":"restoreInactive.png";var I=L?I18N.message("perc.ui.revisionDialog.tooltip@Restorable"):I18N.message("perc.ui.revisionDialog.tooltip@NotRestorable",[k]);var F=e("#revisionsTable").find("tbody");for(var G in N){var O=N[G];var H=new Date(O.lastModifiedDate);var K=e.perc_utils.splitDateTime(O.lastModifiedDate);var B=K.date;var A=K.time;var C="";if(z==O.revId){C="<span title='"+I18N.message("perc.ui.revisionDialog.tooltip@LatestRevision")+"'>"+I18N.message("perc.ui.revisionDialog.label@Latest")+"</span>"}else{C="<img title='"+I18N.message("perc.ui.revisionDialog.tooltip@PreviewRevision")+"' revId='"+O.revId+"' class='perc-revisions-preview-img' style='vertical-align:middle;margin-right:1px;' src='/cm/images/icons/editor/preview.png' /><img title='"+I+"' revId='"+O.revId+"' class='perc-revisions-restore-img' style='vertical-align:middle;' src='/cm/images/icons/editor/"+E+"' />"}var D=e("<tr><td valign='middle'><div class='data-cell perc-ellipsis'>"+O.revId+"</div></td><td valign='middle'><div for='"+O.status+"' class='data-cell perc-ellipsis'>"+O.status+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'>"+B+" "+A+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'>"+O.lastModifier+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'>"+C+"</div></td></tr>");D.find("td:eq(2)").data("timedate",H);F.append(D)}var M=k;e("#revisionsTable").find(".perc-revisions-preview-img").click(function(){var Q=e(this).attr("revId");if(M==e.PercRevisionDialog.ITEM_TYPE_PAGE){e.perc_finder().launchPagePreview(q,Q)}else{if(M==e.PercRevisionDialog.ITEM_TYPE_ASSET){e.perc_finder().launchAssetPreview(q,Q)}else{var R="Cannot preview unknown type.";e.perc_utils.alert_dialog({title:"Error",content:R})}}}).bind("mouseenter",function(){e(this).attr("src","/cm/images/icons/editor/previewOver.png")}).bind("mouseleave",function(){e(this).attr("src","/cm/images/icons/editor/preview.png")});if(L){e("#revisionsTable").find(".perc-revisions-restore-img").click(function(){var Q=e(this).attr("revId");e.PercRevisionService.restoreRevision(q,Q,h)}).bind("mouseenter",function(){e(this).attr("src","/cm/images/icons/editor/restoreOver.png")}).bind("mouseleave",function(){e(this).attr("src","/cm/images/icons/editor/restore.png")})}e("#revisionsTable").dataTable({aaSorting:[[0,"desc"]],bFilter:false,bAutoWidth:false,bPaginate:true,sPaginationType:"full_numbers",iDisplayLength:10,bLengthChange:false,bInfo:true,oLanguage:{sZeroRecords:"No Revisions Found"},aoColumns:[{sType:"numeric",sSortDataType:"perc-dom-text"},null,{sType:"date",sSortDataType:"perc-dom-date"},null,{bSortable:false}],fnFooterCallback:function(T,U,S,R,Q){e(".first").addClass("perc-active").removeClass("perc-disabled");e(".previous").addClass("perc-active").removeClass("perc-disabled");e(".next").addClass("perc-active").removeClass("perc-disabled");e(".last").addClass("perc-active").removeClass("perc-disabled");if(S==0){e(".first").addClass("perc-disabled").removeClass("perc-active");e(".previous").addClass("perc-disabled").removeClass("perc-active")}if(R==z){e(".next").addClass("perc-disabled").removeClass("perc-active");e(".last").addClass("perc-disabled").removeClass("perc-active")}}})}function h(A,z){var B=this;if(A==e.PercServiceUtils.STATUS_ERROR){var E=e.PercServiceUtils.extractDefaultErrorMessage(z.request);e.perc_utils.alert_dialog({title:"Error",content:E});return}n.remove();e.PercNavigationManager.setReopenAllowed(true);var C={id:e.PercNavigationManager.getId(),name:e.PercNavigationManager.getName(),path:e.PercNavigationManager.getPath()};if(e.PercNavigationManager.getView()==e.PercNavigationManager.VIEW_EDITOR){e.PercNavigationManager.handleOpenPage(C,true)}else{if(e.PercNavigationManager.getView()==e.PercNavigationManager.VIEW_EDIT_ASSET){e.PercNavigationManager.handleOpenAsset(C,true)}else{var D="Cannot open unknown view.";e.perc_utils.alert_dialog({title:"Error",content:D})}}}}})(jQuery);(function($){$.PercScheduleDialog={open:openDialog};function openDialog(itemId){var itemId=itemId;$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;createDialog("OK",{publishDate:scheduleDates.startDate,removalDate:scheduleDates.endDate})});var dialog;function createDialog(status,result){var self=this;if(status==$.PercServiceUtils.STATUS_ERROR){var defaultMsg=$.PercServiceUtils.extractDefaultErrorMessage(result.request);$.perc_utils.alert_dialog({title:"Error",content:defaultMsg});callback(false);return}var dialogHTML=createSchedule(result);dialog=$(dialogHTML).perc_dialog({resizable:false,title:"Schedule",modal:true,closeOnEscape:true,percButtons:{Save:{click:function(){var startDate=$("#perc_publish_date").val();var endDate=$("#perc_removal_date").val();var sendDates={ItemDates:{itemId:itemId,startDate:startDate,endDate:endDate}};$.PercItemPublisherService.setScheduleDates(sendDates,function(status,results){if(!status){$.perc_utils.alert_dialog({title:"Error",content:results})}else{dialog.remove()}})},id:"perc-schedule-dialog-save"},Cancel:{click:function(){dialog.remove()},id:"perc-schedule-dialog-cancel"}},id:"perc-schedule-dialog",open:function(){attachFormDatepicker()},width:350,height:312});$("#ui-datepicker-div").css("z-index","100000");$("#ui-timepicker-div").css("z-index","100000");$("#ui-datepicker-div").wrap('<div class="perc-schedule" />');$("#ui-timepicker-div").wrap('<div class="perc-schedule" />')}function createSchedule(result){var labelPublish=$('<div id = "perc-publish-label"/>').append($("<label/>").attr("for","publish_date").text("Publish date:"));var inputPublish=$("<div/>").css("position","relative").append($("<input/>").attr("type","text").css("width","130px").attr("readonly","readonly").addClass("perc-datetime-picker").attr("id","perc_publish_date").attr("name","publish_date").val(result.publishDate));var labelRemoval=$('<div id = "perc-removal-label"/>').append($("<label/>").attr("for","removal_date").text("Removal date:"));var inputRemoval=$("<div/>").css("position","relative").append($("<input/>").attr("type","text").css("width","130px").attr("readonly","readonly").addClass("perc-datetime-picker").attr("id","perc_removal_date").attr("name","removal_date").val(result.removalDate));var $dialogHtml=$("<div/>").addClass("perc-schedule").append(labelPublish).append(inputPublish).append(labelRemoval).append(inputRemoval).append($("<script/>"));return $dialogHtml}function validateFields(){var publishDate=parseDateTime($("#perc_publish_date").val());var removalDate=parseDateTime($("#perc_removal_date").val());var serverTime=new Date();if(publishDate!=""&&removalDate!=""){if(publishDate-0==removalDate-0){$.perc_utils.alert_dialog({content:"The dates can't be the same.",title:"Error"});return false}if(publishDate-0>removalDate-0){$.perc_utils.alert_dialog({content:"Please enter a valid date range.",title:"Error"});return false}}return true}function parseDateTime(strDateTime){if(strDateTime!=""){var date=strDateTime.split(" ")[0].split("/");var time=strDateTime.split(" ")[1].split(":");return new Date(date[2],date[0]-1,date[1],time[0],time[1])}return""}function attachFormDatepicker(){var dates=$(".perc-datetime-picker").each(function(){var options={dlg_width:"350",dlg_height:"300",aarenderer:"MODAL",dummy:0};options.inputName=$(this).attr("name");options.inputId=$(this).attr("id");$(this).datepicker({showOn:"button",buttonImage:"../images/images/buttonCalendar.gif",duration:"",dateFormat:"mm/dd/yy",buttonImageOnly:true,showTime:true,constrainInput:true,stepMinutes:10,stepHours:1,altTimeField:"",time24h:false,minDate:new Date(),changeMonth:true,changeYear:true,buttonText:"",onSelect:function(dateText,inst){if($.topFrameJQuery!=undefined){$.topFrameJQuery.PercDirtyController.setDirty(true,"asset")}}}).bind("paste",function(evt){evt.preventDefault()}).bind("keypress keydown",function(evt){if(evt.keyCode==46||evt.keyCode==8){var field=evt.target;field.value="";evt.preventDefault();return}if(evt.charCode==0||typeof(evt.charCode)=="undefined"){return}evt.preventDefault()})})}}})(jQuery);(function(e){e.PercCommentsDialog={open:b,ITEM_TYPE_ASSET:"asset",ITEM_TYPE_PAGE:"page",ITEM_MODE_EDIT:"edit",ITEM_MODE_VIEW:"view"};function b(q,k,n){e.PercRevisionService.getRevisionDetails(q,f);var h;function f(x,t){var z=this;if(x==e.PercServiceUtils.STATUS_ERROR){var C=e.PercServiceUtils.extractDefaultErrorMessage(t.request);e.perc_utils.alert_dialog({title:"Error",content:C});callback(false);return}var y=t.data.RevisionsSummary;var B=y.comments?e.isArray(y.comments)?y.comments:[y.comments]:[];if(B.length==0){e.perc_utils.alert_dialog({title:"No comments on page",content:"There are no comments yet for this page."});return}var A=j(B);h=e(A).perc_dialog({resizable:false,title:I18N.message("perc.ui.commentsDialog.title@Comments")+": "+k,modal:true,closeOnEscape:false,percButtons:{Close:{click:function(){h.remove()},id:"perc-comments-dialog-close"}},id:"perc-comments-dialog",width:700,height:490})}function j(y){var t=e("<div id='perc-comments-container'/>");var x="";if(y.length==0){x+="<div class='perc-comments-row'>There are no comments yet for the selected page.</div>"}else{e.each(y,function(){var D=this;var z=new Date(D.commentDate);var C=e.perc_utils.splitDateTime(D.commentDate);var A=C.date;var B=C.time;x+="<div class='perc-comments-row'><div class='perc-comments-header'><span class='perc-comment-madeby'>"+D.commenter+" -- </span><span class='perc-comment-date'>"+A+" "+B+"</span><span class='perc-comment-type'> ("+D.commentType+")</span></div><div>"+D.comment+"</div><hr class='perc-comment-sep'/></div>"})}t.append(x);return t}}})(jQuery);(function(e){e.PercPublishingHistoryDialog={open:b,ITEM_TYPE_ASSET:"asset",ITEM_TYPE_PAGE:"page",ITEM_MODE_EDIT:"edit",ITEM_MODE_VIEW:"view"};function b(t,n,q){e.fn.dataTableExt.afnSortData["perc-dom-text"]=function(A,z){var y=[];e("td:eq("+z+")",A.oApi._fnGetTrNodes(A)).each(function(){var B=e(this).text();y.push(B)});return y};e.fn.dataTableExt.afnSortData["perc-dom-date"]=function(A,z){var y=[];e("td:eq("+z+")",A.oApi._fnGetTrNodes(A)).each(function(){var B=e(this).data("timedate");y.push(B)});return y};x(t).done(function(y){if(y.ItemPublishingHistory.length==0){e.perc_utils.alert_dialog({title:"No publishing history for "+q,content:"There is no publishing history for this "+q});return}f(y)}).fail(function(y){e.perc_utils.alert_dialog({title:"Error",content:y});return});var h;function f(B){var y=this;var z=B.ItemPublishingHistory;if(!e.isArray(B.ItemPublishingHistory)){z=[B.ItemPublishingHistory]}var A=j();h=e(A).perc_dialog({resizable:false,title:I18N.message("Publishing History")+": "+n,modal:true,closeOnEscape:true,percButtons:{Close:{click:function(){h.remove()},id:"perc-pubhistory-dialog-close"}},id:"perc-pubhistory-dialog",open:function(){k(z)},width:700,height:490})}function j(){var y=e("<div class='dataTables_wrapper' style='height: 100%; z-index: 4470;position:relative;' id='perc-pubhistory-container'><table id='pubHistoryTable' width='100%''><thead><tr><th align='left' width='30%' id='perc-header-server'><span class='col-name'>Server</span></th><th align='left' width='30%' id='perc-header-date'><span class='col-name'>Date</span></th><th align='left' width='20%' id='perc-header-operation'><span class='col-name'>Operation</span></th><th align='left' width='20%' id='perc-header-status'><span class='col-name'>Status</span></th></tr></thead><tbody></tbody></table></div>");return y}function k(A){var y=A.length;var B=e("#pubHistoryTable").find("tbody");for(var C in A){var I=A[C];var E=new Date(I.publishedDate);var F=e.perc_utils.splitDateTime(E);var H=F.date;var G=F.time;var D="";if(I.status=="FAILURE"){D=' title="'+I.errorMessage+'" '}var z=e("<tr><td valign='middle'><div class='data-cell perc-ellipsis'>"+I.server+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'>"+H+" "+G+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'>"+I.operation+"</div></td><td valign='middle'><div class='data-cell perc-ellipsis'"+D+">"+I.status+"</div></td></tr>");z.find("td:eq(1)").data("timedate",E);B.append(z)}e("#pubHistoryTable").dataTable({aaSorting:[[1,"desc"]],bFilter:false,bDestroy:true,bAutoWidth:false,bPaginate:true,sPaginationType:"full_numbers",iDisplayLength:10,bLengthChange:false,bInfo:true,oLanguage:{sZeroRecords:"No History Found"},aoColumns:[null,{sType:"date",sSortDataType:"perc-dom-date"},null,null],fnFooterCallback:function(M,N,L,K,J){e(".first").addClass("perc-active").removeClass("perc-disabled");e(".previous").addClass("perc-active").removeClass("perc-disabled");e(".next").addClass("perc-active").removeClass("perc-disabled");e(".last").addClass("perc-active").removeClass("perc-disabled");if(L==0){e(".first").addClass("perc-disabled").removeClass("perc-active");e(".previous").addClass("perc-disabled").removeClass("perc-active")}if(K==y){e(".next").addClass("perc-disabled").removeClass("perc-active");e(".last").addClass("perc-disabled").removeClass("perc-active")}}})}function x(A){var y=e.Deferred();var z=e.perc_paths.ITEM_PUB_HISTORY+A;var B=function(D,C){if(D==e.PercServiceUtils.STATUS_SUCCESS){y.resolve(C.data)}else{var E=e.PercServiceUtils.extractDefaultErrorMessage(C.request);e.perc_utils.info("Error fetching the publishing history for the item with id : "+A+E);y.reject(E)}};e.PercServiceUtils.makeJsonRequest(z,e.PercServiceUtils.TYPE_GET,true,B);return y.promise()}}})(jQuery);(function(h){h.PercPageOptimizerService={isPageOptimizerActive:b,getPageOptimizerDetails:f,getPageOptimizerInfo:e};function b(n){var j=h.perc_paths.PAGE_OPT_ACTIVE;var k=function(t,q){if(t==h.PercServiceUtils.STATUS_SUCCESS){var x=q.data&&q.data=="true";if(!x){h.perc_utils.info("Page optimizer is not enabled for this server.")}n(x)}else{var y=h.PercServiceUtils.extractDefaultErrorMessage(q.request);h.perc_utils.info("Error accessing cm1 page optimizer service: "+y);n(false,y)}};h.PercServiceUtils.makeRequest(j,h.PercServiceUtils.TYPE_GET,true,k)}function f(j,q){var k=h.perc_paths.PAGE_OPT_DATA+j;var n=function(x,t){if(x==h.PercServiceUtils.STATUS_SUCCESS){q(true,t.data.PageOptimizerData)}else{var y=h.PercServiceUtils.extractDefaultErrorMessage(t.request);q(false,y)}};h.PercServiceUtils.makeJsonRequest(k,h.PercServiceUtils.TYPE_GET,true,n)}function e(n){var j=h.perc_paths.PAGE_OPT_INFO;var k=function(t,q){if(t==h.PercServiceUtils.STATUS_SUCCESS){n(true,q.data.PageOptimizerInfo)}else{var x=h.PercServiceUtils.extractDefaultErrorMessage(q.request);n(false,x)}};h.PercServiceUtils.makeJsonRequest(j,h.PercServiceUtils.TYPE_GET,true,k)}})(jQuery);(function(e){e.PercPageOptimizerDialog={open:b};function b(j,f){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.PercPageOptimizerService.getPageOptimizerDetails(j,h);var n;function h(x,A){e.unblockUI();var y=this;if(!x){var B=e.PercServiceUtils.extractDefaultErrorMessage(result.request);e.perc_utils.alert_dialog({title:"Error",content:B});return}var z=t(A);n=e(z).perc_dialog({resizable:false,title:"Page Optimizer",modal:true,closeOnEscape:true,percButtons:{Close:{click:function(){n.remove()},id:"perc-page-optimizer-dialog-close"}},open:function(){q(A)},id:"perc-page-optimizer-dialog",width:1024,height:660})}function t(D){var C=e("<div id='perc-po-top-container'/>");var A="";if(D.lastPublished){A=e.perc_utils.splitDateTime(D.lastPublished);A=A.date+" "+A.time}var z="";if(D.lastEdited){var z=e.perc_utils.splitDateTime(D.lastEdited);z=z.date+" "+z.time}var y=D.status+" ("+D.workflow+")";var x='<div class="perc-missing-thumb"><i title="Thumbnail is not yet available for this page." class="perc-missing-thumb-i perc-font-icon icon-camera fa-5x"></i></div>';if(D.thumbUrl){x='<img src="'+D.thumbUrl+'"/>'}var B="<div id='perc-po-page-details-container'><div class='perc-po-page-col perc-po-page-col0'><div style='height:150px;line-height:150px;text-align:center;'>"+x+"</div></div><div class='perc-po-page-col perc-po-page-col1'><div><label>File Name:</label><span title='"+D.pageName+"'>"+D.pageName+"</span></div><div><label>Display Title:</label><span title='"+D.pageTitle+"'>"+D.pageTitle+"</span></div><div><label>Status:</label><span title='"+y+"'>"+y+"</span></div></div><div class='perc-po-page-col perc-po-page-col2'><div><label>Last Published:</label><span>"+A+"</span></div><div><label>Last Edited:</label><span>"+z+"</span></div></div></div><div id='perc-po-details-container' class='top-border'><div class='loading center-text'><div style='position: absolute; top: 40%; margin: auto; width: 100%;'><img src='/cm/images/images/ajaxLoader.gif'></div></div></div>";C.append(B);return C}function q(y){var x=y.pageOptimizerUrl;k(x+"/ping").done(function(){e("#perc-po-details-container .loading").hide();e("#perc-po-details-container").removeClass("top-border");e("<iframe/>",{id:"perc-page-optimizer",src:x+"/start/optimizer",width:"100%",height:355}).appendTo("#perc-po-details-container");e("#perc-page-optimizer").load(function(){var z={CI:y.clientIdentity,page:y.pageHtml};this.contentWindow.postMessage(z,"*");e("#perc-po-details-container").addClass("perc-po-frame-loaded")})}).fail(function(){e("#perc-po-details-container .loading").hide();e('<div class="no-service center-text"><div style="position: relative; top: 40%; margin: auto; width: 100%;">Page optimizer is not available at this time.</div></div>').appendTo("#perc-po-details-container");e.perc_utils.logToServer("error","PageOptimizer","Failed to fetch the UI from page optimizer service.")})}function k(x){return e.ajax({method:"GET",url:x})}}})(jQuery);(function(b){b.PercContributorUiAdaptor=function(){function f(S,T){var R=b.Deferred();if(!S){R.reject("Path must not be empty to open item.")}else{S=E(S);b.PercNavigationManager.openPathItem(S)}return R.promise()}function n(T,U){var R=b.Deferred();var S=P(T);if(!T||!U||S=="unknown"){R.reject("path and id are required to preview item")}else{if(S=="site"){b.perc_finder().launchPagePreviewByPath(T,U)}else{b.perc_finder().launchAssetPreview(U)}}return R.promise()}function t(T,U){var R=b.Deferred();var S=P(T);if(!T||!U||S=="unknown"){R.reject("path and id are required to copy a page.")}else{if(S=="site"){b.PercPageService.copyPage(U,function(W,V){if(W==b.PercServiceUtils.STATUS_SUCCESS){if(V.data==""||typeof V.data!="string"){R.reject("Failed to copy the selected item, you may not have permision to copy the item.")}else{R.resolve("Copied page with id "+U+" and added it to recent item list.")}}else{var X=b.PercServiceUtils.extractDefaultErrorMessage(V.request);R.reject(X)}})}else{R.reject("Asset copy is not supported.")}}return R.promise()}function I(U,V,S){var R=b.Deferred();var T=P(U);if(!U||!V||T=="unknown"){R.reject("path and id are required to delete an item")}else{if(T=="site"){F.isLandingPage(U).done(function(W){if(W){var X={content:"Landing page deletion from this view is not allowed.",canForceDelete:false,};R.reject(X)}else{b.PercRedirectHandler.createRedirect(U,"","page").fail(function(Y){b.perc_utils.alert_dialog({title:"Redirect creation error",content:Y,okCallBack:function(){b.perc_pagemanager.delete_page(V,function(){R.resolve("Deleted selected item.")},function(aa){var Z=b.PercDeleteItemHelper.extractDeleteErrorMessage(aa,S,"page");R.reject(Z)})}})}).done(function(){b.perc_pagemanager.delete_page(V,function(){R.resolve("Deleted selected item.")},function(Z){var Y=b.PercDeleteItemHelper.extractDeleteErrorMessage(Z,S,"page");R.reject(Y)})})}}).fail(function(W){R.reject(W)})}else{b.PercAssetService.deleteAsset(V,function(){R.resolve("Deleted selected item.")},function(X){var W=b.PercDeleteItemHelper.extractDeleteErrorMessage(X,S,"asset");R.reject(W)})}}return R.promise()}function y(U,V,S){var R=b.Deferred();var T=P(U);if(!U||!V||T=="unknown"){R.reject("path and id are required to delete an item")}else{if(T=="site"){b.PercPageService.forceDeletePage(V,function(){R.resolve("Deleted selected item.")},function(X){var W=b.PercDeleteItemHelper.extractDeleteErrorMessage(X,S,"page");R.reject(W.content)})}else{b.PercAssetService.forceDeleteAsset(V,function(){R.resolve("Deleted selected item.")},function(X){var W=b.PercDeleteItemHelper.extractDeleteErrorMessage(X,S,"asset");R.reject(W.content)})}}return R.promise()}function M(S,T){var R=b.Deferred();b.PercPageService.addToMyPages(T,function(V,U){if(V==b.PercServiceUtils.STATUS_SUCCESS){R.resolve(U)}else{R.reject(U)}});return R.promise()}function N(S,R){return b.PercRecentListService.getRecentList(S,R)}function P(T){var S="unknown";if(!T){return S}var R=T.toLowerCase();if(R.match("^//sites/")||R.match("^/sites/")||R.match("^sites/")){S="site"}else{if(R.match("^//assets/")||R.match("^/assets/")||R.match("^assets/")){S="asset"}}return S}function E(T){var S=T,R=T.toLowerCase();if(R.match("^//sites/")||R.match("^//assets/")||R.match("^/sites/")||R.match("^/assets/")||R.match("^sites/")||R.match("^assets/")){if(R.match("^sites/")||R.match("^assets/")){S="/"+S}else{if(R.match("^//sites/")||R.match("^//assets/")){S=S.substring(1)}}}return S}function h(){var R=b.Deferred();b.PercSiteService.getSites(function(S,T){if(S==b.PercServiceUtils.STATUS_SUCCESS){var U=[];b.each(T.SiteSummary,function(){U.push({name:this.name,id:this.siteId})});R.resolve(U)}else{R.reject("Failed to get the sites list.")}});return R.promise()}function D(R,S){return b.PercSiteService.getSiteProperties(R,S)}function j(S){var R=b.Deferred();b.PercBlogService.getBlogsForSite(S,function(U,T){if(U==b.PercServiceUtils.STATUS_SUCCESS){var V=[];b.each(T.SiteBlogProperties,function(){var W=this.path,X=W.substring(0,W.lastIndexOf("/"));var Y={title:this.title,folderPath:X,templateId:this.blogPostTemplateId};V.push(Y)});R.resolve(V)}else{R.reject(T)}});return R.promise()}function G(V,Y,W,U){var S=b.Deferred();var R=[];R.push({name:"page_name",value:V});R.push({name:"page_title",value:Y});R.push({name:"template",value:W});R.push({name:"page_linktext",value:Y});U=E(U);var X="/"+U;var T=X.substring(X.length-1)=="/"?X+V:X+"/"+V;b.PercFolderHelper().getAccessLevelByPath(U,true,function(aa,Z){if(aa==b.PercFolderHelper().PERMISSION_ERROR||Z==b.PercFolderHelper().PERMISSION_READ){S.reject("NotAuthorized")}else{b.PercUserService.getAccessLevel("percPage",-1,function(ac,ab){if(ac==b.PercServiceUtils.STATUS_ERROR||ab==b.PercUserService.ACCESS_READ||ab==b.PercUserService.ACCESS_NONE){S.reject("NotAuthorized")}else{b.perc_pagemanager.createPage(X,R,function(ad){b.PercNavigationManager.openPage(E(T),true)},function(ad){var ae=b.PercServiceUtils.extractDefaultErrorMessage(ad);S.reject(ae)})}},U)}});return S.promise()}function A(S){var R=b.Deferred();b.PercSiteService.getTemplates(S,function(U,T){if(U==b.PercServiceUtils.STATUS_SUCCESS){var V=[];b.each(T.TemplateSummary,function(){var W={id:this.id,name:this.name,thumbPath:this.imageThumbPath};V.push(W)});R.resolve(V)}else{R.reject(T)}});return R.promise()}function H(S,T,R){return b.PercRecentListService.setRecent(S,T,R)}function Q(S){var R=b.Deferred();F.getRecentItems("template",S).done(function(T){var U=[];if(T.data){b.each(T.data.TemplateSummary,function(){var V={id:this.id,name:this.name,thumbPath:this.imageThumbPath};U.push(V)})}R.resolve(U)}).fail(function(T){R.reject(T)});return R.promise()}function B(S){var R=b.Deferred();F.getRecentItems("site-folder",S).done(function(T){var U=[];if(T.data){b.each(T.data.PathItem,function(){var V={id:this.id,name:this.name,category:this.category,path:this.path};U.push(V)})}R.resolve(U)}).fail(function(T){R.reject(T)});return R.promise()}function q(){var R=b.Deferred();F.getRecentItems("asset-folder").done(function(S){var T=[];if(S.data){b.each(S.data.PathItem,function(){var U={id:this.id,name:this.name,category:this.category,path:this.path};T.push(U)})}R.resolve(T)}).fail(function(S){R.reject(S)});return R.promise()}function K(S){var R=b.Deferred();b.PercAssetService.getAssetTypes(S,function(U,T){if(U==b.PercServiceUtils.STATUS_SUCCESS){var V=[];b.each(T,function(){var W={id:this.widgetId,name:this.widgetLabel,contenttypeid:this.contentTypeId,contenttypename:this.contentTypeName,icon:this.icon};V.push(W)});R.resolve(V)}else{R.reject(T)}});return R.promise()}function x(){var R=b.Deferred();F.getRecentItems("asset-type").done(function(S){var T=[];b.each(S.data.WidgetContentType,function(){var U={id:this.widgetId,name:this.widgetLabel,icon:this.icon};T.push(U)});R.resolve(T)}).fail(function(S){R.reject(S)});return R.promise()}function O(S,T){var R=b.Deferred();b.PercFolderHelper().getAccessLevelByPath(S,true,function(V,U){if(V==b.PercFolderHelper().PERMISSION_ERROR||U==b.PercFolderHelper().PERMISSION_READ){R.reject("NotAuthorized")}else{b.PercUserService.getAccessLevel("percAsset",-1,function(X,W){if(X==b.PercServiceUtils.STATUS_ERROR||W==b.PercUserService.ACCESS_READ||W==b.PercUserService.ACCESS_NONE){R.reject("NotAuthorized")}else{b.PercRecentListService.setRecent("asset-type",T);var Y=S.substring(S.length-1)=="/"?S.substring(0,S.length-1):S;b.PercRecentListService.setRecent("asset-folder",Y);b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{widgetId:T,folderPath:S})}},S)}});return R.promise()}function z(){var R=b.Deferred();b.PercPageService.getMyContent(function(T,S){if(T==b.PercServiceUtils.STATUS_SUCCESS){R.resolve(S)}else{R.reject(S)}});return R.promise()}function L(S){var R=b.Deferred();b.PercSearchService.getAsyncSearchExtendedResult(S,function(U,T){if(U){R.resolve(T)}else{R.reject(T)}});return R.promise()}function k(S){var R=b.Deferred();b.PercReusableSearchService.getStates(S,function(U,T){if(U==b.PercServiceUtils.STATUS_SUCCESS){var V=[];b.each(T,function(){var W={name:this.value,id:this.displayValue};V.push(W)});R.resolve(V)}else{R.reject(T)}});return R.promise()}function J(){var R=b.Deferred();b.PercReusableSearchService.getWorkflows(function(T,S){if(T==b.PercServiceUtils.STATUS_SUCCESS){var U=[];b.each(S,function(){var V={name:this.value,id:this.displayValue};U.push(V)});R.resolve(U)}else{R.reject(S)}});return R.promise()}function C(T){T=E(T);var R=b.Deferred(),S=b.perc_paths.PATH_FOLDER+T;b.PercServiceUtils.makeJsonRequest(S,b.PercServiceUtils.GET,false,function(V,U){if(V==b.PercServiceUtils.STATUS_ERROR){var W=b.PercServiceUtils.extractDefaultErrorMessage(request);R.reject(W)}else{R.resolve(U.data)}},null);return R.promise()}function e(S){S=E(S);var R=b.Deferred();b.PercPathService.getPathItemForPath(S,function(U,T){if(U==b.PercServiceUtils.STATUS_ERROR){var V=b.PercServiceUtils.extractDefaultErrorMessage(request);R.reject(V)}else{R.resolve(T.PathItem.category=="LANDING_PAGE")}},null);return R.promise()}var F={openItem:f,previewItem:n,copyItem:t,bookMarkItem:M,getRecentItems:N,getBlogsForSite:j,getSites:h,getSiteProperties:D,createPage:G,getTemplates:A,getRecentTemplates:Q,getRecentSiteFolders:B,getAssetTypes:K,getRecentAssetTypes:x,createAsset:O,setRecent:H,getMyContent:z,getRecentAssetFolders:q,getSearchResults:L,getStates:k,getWorkflows:J,getFolders:C,deleteItem:I,forceDeleteItem:y,isLandingPage:e};return F}})(jQuery);(function(f){f.PercBlogService={getBlogsForSite:b,getPostsForBlog:e};function b(k,n){var j=f.perc_paths.BLOG_LOAD;if(k!="@all"){j+="/"+k}else{j=j.replace("blogs","allBlogs")}f.PercServiceUtils.makeJsonRequest(j,f.PercServiceUtils.TYPE_GET,false,function(t,q){if(t==f.PercServiceUtils.STATUS_SUCCESS){n(f.PercServiceUtils.STATUS_SUCCESS,q.data)}else{var x=f.PercServiceUtils.extractDefaultErrorMessage(q.request);n(f.PercServiceUtils.STATUS_ERROR,x)}})}function e(k,n){var j=f.perc_paths.POST_LOAD;j+="/"+k;f.PercServiceUtils.makeJsonRequest(j,f.PercServiceUtils.TYPE_GET,false,function(t,q){if(t==f.PercServiceUtils.STATUS_SUCCESS){n(f.PercServiceUtils.STATUS_SUCCESS,q.data)}else{var x=f.PercServiceUtils.extractDefaultErrorMessage(q.request);n(f.PercServiceUtils.STATUS_ERROR,x)}})}var h={blogs:[{title:"Short Title",id:"1234-4321",postTemplateId:"2345-5423",author:"me",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Medium Title Medium Title Medium Title",id:"1234-4321",postTemplateId:"2345-5423",author:"myself",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title",id:"1234-4321",postTemplateId:"2345-5423",author:"andi",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 2",id:"1234-4321",postTemplateId:"2345-5423",author:"pluto",description:"Medium Description Medium Description Medium Description Medium Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 3",id:"1234-4321",postTemplateId:"2345-5423",author:"mickey",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 4",id:"1234-4321",postTemplateId:"2345-5423",author:"minnie",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["medium","list","of","tags","medium","list","of","tags","medium","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 5",id:"1234-4321",postTemplateId:"2345-5423",author:"donald",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Short Title 2",id:"1234-4321",postTemplateId:"2345-5423",author:"me",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Medium Title Medium Title Medium Title 3",id:"1234-4321",postTemplateId:"2345-5423",author:"myself",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 6",id:"1234-4321",postTemplateId:"2345-5423",author:"andi",description:"Short Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 7",id:"1234-4321",postTemplateId:"2345-5423",author:"pluto",description:"Medium Description Medium Description Medium Description Medium Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 8",id:"1234-4321",postTemplateId:"2345-5423",author:"mickey",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["short","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 9",id:"1234-4321",postTemplateId:"2345-5423",author:"minnie",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["medium","list","of","tags","medium","list","of","tags","medium","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"},{title:"Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title Long Title 10",id:"1234-4321",postTemplateId:"2345-5423",author:"donald",description:"Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description Long Description",tags:["long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags","long","list","of","tags"],postCount:12,lastPublishedDate:"2/3/2011",lastPublishedTime:"11:23 PM"}]}})(jQuery);
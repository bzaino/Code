/* jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Form Plugin
 * version: 2.60
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(c){c.fn.ajaxSubmit=function(D){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof D=="function"){D={success:D}}var p=this.attr("action");var e=(typeof p==="string")?c.trim(p):"";if(e){e=(e.match(/^([^#]+)/)||[])[1]}e=e||window.location.href||"";D=c.extend(true,{url:e,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},D);var E={};this.trigger("form-pre-serialize",[this,D,E]);if(E.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(D.beforeSerialize&&D.beforeSerialize(this,D)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var h,A,y=this.formToArray(D.semantic);if(D.data){D.extraData=D.data;for(h in D.data){if(D.data[h] instanceof Array){for(var t in D.data[h]){y.push({name:h,value:D.data[h][t]})}}else{A=D.data[h];A=c.isFunction(A)?A():A;y.push({name:h,value:A})}}}if(D.beforeSubmit&&D.beforeSubmit(y,this,D)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[y,this,D,E]);if(E.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var d=c.param(y);if(D.type.toUpperCase()=="GET"){D.url+=(D.url.indexOf("?")>=0?"&":"?")+d;D.data=null}else{D.data=d}var C=this,x=[];if(D.resetForm){x.push(function(){C.resetForm()})}if(D.clearForm){x.push(function(){C.clearForm()})}if(!D.dataType&&D.target){var B=D.success||function(){};x.push(function(n){var k=D.replaceTarget?"replaceWith":"html";c(D.target)[k](n).each(B,arguments)})}else{if(D.success){x.push(D.success)}}D.success=function(F,n,G){var v=D.context||D;for(var q=0,k=x.length;q<k;q++){x[q].apply(v,[F,n,G||C,C])}};var j=c("input:file",this).length>0;var f="multipart/form-data";var w=(C.attr("enctype")==f||C.attr("encoding")==f);if(D.iframe!==false&&(j||D.iframe||w)){if(D.closeKeepAlive){c.get(D.closeKeepAlive,z)}else{z()}}else{c.ajax(D)}this.trigger("form-submit-notify",[this,D]);return this;function z(){var q=C[0];if(c(":input[name=submit],:input[id=submit]",q).length){alert('Error: Form elements must not have name or id of "submit".');return}var J=c.extend(true,{},c.ajaxSettings,D);J.context=J.context||J;var M="jqFormIO"+(new Date().getTime()),H="_"+M;var v=c('<iframe id="'+M+'" name="'+M+'" src="'+J.iframeSrc+'" />');var I=v[0];v.css({position:"absolute",top:"-1000px",left:"-1000px"});var F={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;v.attr("src",J.iframeSrc)}};var R=J.global;if(R&&!c.active++){c.event.trigger("ajaxStart")}if(R){c.event.trigger("ajaxSend",[F,J])}if(J.beforeSend&&J.beforeSend.call(J.context,F,J)===false){if(J.global){c.active--}return}if(F.aborted){return}var N=false;var Q=0;var G=q.clk;if(G){var O=G.name;if(O&&!G.disabled){J.extraData=J.extraData||{};J.extraData[O]=G.value;if(G.type=="image"){J.extraData[O+".x"]=q.clk_x;J.extraData[O+".y"]=q.clk_y}}}function P(){var X=C.attr("target"),V=C.attr("action");q.setAttribute("target",M);if(q.getAttribute("method")!="POST"){q.setAttribute("method","POST")}if(q.getAttribute("action")!=J.url){q.setAttribute("action",J.url)}if(!J.skipEncodingOverride){C.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(J.timeout){setTimeout(function(){Q=true;L()},J.timeout)}var W=[];try{if(J.extraData){for(var Y in J.extraData){W.push(c('<input type="hidden" name="'+Y+'" value="'+J.extraData[Y]+'" />').appendTo(q)[0])}}v.appendTo("body");I.attachEvent?I.attachEvent("onload",L):I.addEventListener("load",L,false);q.submit()}finally{q.setAttribute("action",V);if(X){q.setAttribute("target",X)}else{C.removeAttr("target")}c(W).remove()}}if(J.forceSync){P()}else{setTimeout(P,10)}var T,U,S=50;function L(){U=I.contentWindow?I.contentWindow.document:I.contentDocument?I.contentDocument:I.document;if(!U||U.location.href==J.iframeSrc){return}I.detachEvent?I.detachEvent("onload",L):I.removeEventListener("load",L,false);var W=true;try{if(Q){throw"timeout"}var aa=J.dataType=="xml"||U.XMLDocument||c.isXMLDoc(U);b("isXml="+aa);if(!aa&&window.opera&&(U.body==null||U.body.innerHTML=="")){if(--S){b("requeing onLoad callback, DOM not available");setTimeout(L,250);return}}N=true;F.responseText=U.body?U.body.innerHTML:U.documentElement?U.documentElement.innerHTML:null;F.responseXML=U.XMLDocument?U.XMLDocument:U;F.getResponseHeader=function(ac){var ab={"content-type":J.dataType};return ab[ac]};var Z=/(json|script)/.test(J.dataType);if(Z||J.textarea){var V=U.getElementsByTagName("textarea")[0];if(V){F.responseText=V.value}else{if(Z){var Y=U.getElementsByTagName("pre")[0];var n=U.getElementsByTagName("body")[0];if(Y){F.responseText=Y.textContent}else{if(n){F.responseText=n.innerHTML}}}}}else{if(J.dataType=="xml"&&!F.responseXML&&F.responseText!=null){F.responseXML=K(F.responseText)}}T=k(F,J.dataType,J)}catch(X){b("error caught:",X);W=false;F.error=X;J.error.call(J.context,F,"error",X);R&&c.event.trigger("ajaxError",[F,J,X])}if(F.aborted){b("upload aborted");W=false}if(W){J.success.call(J.context,T,"success",F);R&&c.event.trigger("ajaxSuccess",[F,J])}R&&c.event.trigger("ajaxComplete",[F,J]);if(R&&!--c.active){c.event.trigger("ajaxStop")}J.complete&&J.complete.call(J.context,F,W?"success":"error");setTimeout(function(){v.removeData("form-plugin-onload");v.remove();F.responseXML=null},100)}var K=c.parseXML||function(n,V){if(window.ActiveXObject){V=new ActiveXObject("Microsoft.XMLDOM");V.async="false";V.loadXML(n)}else{V=(new DOMParser()).parseFromString(n,"text/xml")}return(V&&V.documentElement&&V.documentElement.nodeName!="parsererror")?V:null};var k=c.httpData||function(Z,X,W){var V=Z.getResponseHeader("content-type")||"",n=X==="xml"||!X&&V.indexOf("xml")>=0,Y=n?Z.responseXML:Z.responseText;if(n&&Y.documentElement.nodeName==="parsererror"){c.error("parsererror")}if(W&&W.dataFilter){Y=W.dataFilter(Y,X)}if(typeof Y==="string"){if(X==="json"||!X&&V.indexOf("json")>=0){Y=c.parseJSON(Y)}else{if(X==="script"||!X&&V.indexOf("javascript")>=0){c.globalEval(Y)}}}return Y}}};c.fn.ajaxForm=function(d){if(this.length===0){var e={s:this.selector,c:this.context};if(!c.isReady&&e.s){b("DOM not ready, queuing ajaxForm");c(function(){c(e.s,e.c).ajaxForm(d)});return this}b("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();c(this).ajaxSubmit(d)}}).bind("click.form-plugin",function(n){var k=n.target;var h=c(k);if(!(h.is(":submit,input:image"))){var f=h.closest(":submit");if(f.length==0){return}k=f[0]}var j=this;j.clk=k;if(k.type=="image"){if(n.offsetX!=undefined){j.clk_x=n.offsetX;j.clk_y=n.offsetY}else{if(typeof c.fn.offset=="function"){var p=h.offset();j.clk_x=n.pageX-p.left;j.clk_y=n.pageY-p.top}else{j.clk_x=n.pageX-k.offsetLeft;j.clk_y=n.pageY-k.offsetTop}}}setTimeout(function(){j.clk=j.clk_x=j.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(z){var y=[];if(this.length===0){return y}var e=this[0];var k=z?e.getElementsByTagName("*"):e.elements;if(!k){return y}var q,p,h,A,f,w,d;for(q=0,w=k.length;q<w;q++){f=k[q];h=f.name;if(!h){continue}if(z&&e.clk&&f.type=="image"){if(!f.disabled&&e.clk==f){y.push({name:h,value:c(f).val()});y.push({name:h+".x",value:e.clk_x},{name:h+".y",value:e.clk_y})}continue}A=c.fieldValue(f,true);if(A&&A.constructor==Array){for(p=0,d=A.length;p<d;p++){y.push({name:h,value:A[p]})}}else{if(A!==null&&typeof A!="undefined"){y.push({name:h,value:A})}}}if(!z&&e.clk){var t=c(e.clk),x=t[0];h=x.name;if(h&&!x.disabled&&x.type=="image"){y.push({name:h,value:t.val()});y.push({name:h+".x",value:e.clk_x},{name:h+".y",value:e.clk_y})}}return y};c.fn.formSerialize=function(d){return c.param(this.formToArray(d))};c.fn.fieldSerialize=function(e){var d=[];this.each(function(){var k=this.name;if(!k){return}var h=c.fieldValue(this,e);if(h&&h.constructor==Array){for(var j=0,f=h.length;j<f;j++){d.push({name:k,value:h[j]})}}else{if(h!==null&&typeof h!="undefined"){d.push({name:this.name,value:h})}}});return c.param(d)};c.fn.fieldValue=function(k){for(var j=[],f=0,d=this.length;f<d;f++){var h=this[f];var e=c.fieldValue(h,k);if(e===null||typeof e=="undefined"||(e.constructor==Array&&!e.length)){continue}e.constructor==Array?c.merge(j,e):j.push(e)}return j};c.fieldValue=function(d,p){var f=d.name,z=d.type,A=d.tagName.toLowerCase();if(p===undefined){p=true}if(p&&(!f||d.disabled||z=="reset"||z=="button"||(z=="checkbox"||z=="radio")&&!d.checked||(z=="submit"||z=="image")&&d.form&&d.form.clk!=d||A=="select"&&d.selectedIndex==-1)){return null}if(A=="select"){var q=d.selectedIndex;if(q<0){return null}var x=[],e=d.options;var j=(z=="select-one");var w=(j?q+1:e.length);for(var h=(j?q:0);h<w;h++){var k=e[h];if(k.selected){var y=k.value;if(!y){y=(k.attributes&&k.attributes.value&&!(k.attributes.value.specified))?k.text:k.value}if(j){return y}x.push(y)}}return x}return c(d).val()};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var e=this.type,d=this.tagName.toLowerCase();if(e=="text"||e=="password"||d=="textarea"){this.value=""}else{if(e=="checkbox"||e=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}}}})};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};c.fn.enable=function(d){if(d===undefined){d=true}return this.each(function(){this.disabled=!d})};c.fn.selected=function(d){if(d===undefined){d=true}return this.each(function(){var e=this.type;if(e=="checkbox"||e=="radio"){this.checked=d}else{if(this.tagName.toLowerCase()=="option"){var f=c(this).parent("select");if(d&&f[0]&&f[0].type=="select-one"){f.find("option").selected(false)}this.selected=d}}})};function b(){if(c.fn.ajaxSubmit.debug){var d="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(d)}else{if(window.opera&&window.opera.postError){window.opera.postError(d)}}}}})(jQuery);
/*
 * jQuery blockUI plugin
 * Version 2.31 (06-JAN-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(n){if(/1\.(0|1|2)\.(0|1|2)/.test(n.fn.jquery)||/^1.1/.test(n.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+n.fn.jquery);return}n.fn._fadeIn=n.fn.fadeIn;var d=function(){};var p=document.documentMode||0;var f=n.browser.msie&&((n.browser.version<8&&!p)||p<8);var h=n.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!p;n.blockUI=function(y){e(window,y)};n.unblockUI=function(y){k(window,y)};n.growlUI=function(C,A,B,y){var z=n('<div class="growlUI"></div>');if(C){z.append("<h1>"+C+"</h1>")}if(A){z.append("<h2>"+A+"</h2>")}if(B==undefined){B=3000}n.blockUI({message:z,fadeIn:700,fadeOut:1000,centerY:false,timeout:B,showOverlay:false,onUnblock:y,css:n.blockUI.defaults.growlCSS})};n.fn.block=function(y){return this.unblock({fadeOut:0}).each(function(){if(n.css(this,"position")=="static"){this.style.position="relative"}if(n.browser.msie){this.style.zoom=1}e(this,y)})};n.fn.unblock=function(y){return this.each(function(){k(this,y)})};n.blockUI.version=2.31;n.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var c=null;var j=[];function e(B,M){var H=(B==window);var E=M&&M.message!==undefined?M.message:undefined;M=n.extend({},n.blockUI.defaults,M||{});M.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,M.overlayCSS||{});var J=n.extend({},n.blockUI.defaults.css,M.css||{});var U=n.extend({},n.blockUI.defaults.themedCSS,M.themedCSS||{});E=E===undefined?M.message:E;if(H&&c){k(window,{fadeOut:0})}if(E&&typeof E!="string"&&(E.parentNode||E.jquery)){var P=E.jquery?E[0]:E;var W={};n(B).data("blockUI.history",W);W.el=P;W.parent=P.parentNode;W.display=P.style.display;W.position=P.style.position;if(W.parent){W.parent.removeChild(P)}}var I=M.baseZ;var T=(n.browser.msie||M.forceIframe)?n('<iframe class="blockUI" style="z-index:'+(I++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+M.iframeSrc+'"></iframe>'):n('<div class="blockUI" style="display:none"></div>');var S=n('<div class="blockUI blockOverlay" style="z-index:'+(I++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var R;if(M.theme&&H){var N='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+I+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(M.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';R=n(N)}else{R=H?n('<div class="blockUI blockMsg blockPage" style="z-index:'+I+';display:none;position:fixed"></div>'):n('<div class="blockUI blockMsg blockElement" style="z-index:'+I+';display:none;position:absolute"></div>')}if(E){if(M.theme){R.css(U);R.addClass("ui-widget-content")}else{R.css(J)}}if(!M.applyPlatformOpacityRules||!(n.browser.mozilla&&/Linux/.test(navigator.platform))){S.css(M.overlayCSS)}S.css("position",H?"fixed":"absolute");if(n.browser.msie||M.forceIframe){T.css("opacity",0)}var G=[T,S,R],V=H?n("body"):n(B);n.each(G,function(){this.appendTo(V)});if(M.theme&&M.draggable&&n.fn.draggable){R.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var D=f&&(!n.boxModel||n("object,embed",H?null:B).length>0);if(h||D){if(H&&M.allowBodyStretch&&n.boxModel){n("html,body").css("height","100%")}if((h||!n.boxModel)&&!H){var L=v(B,"borderTopWidth"),Q=v(B,"borderLeftWidth");var F=L?"(0 - "+L+")":0;var K=Q?"(0 - "+Q+")":0}n.each([T,S,R],function(z,aa){var X=aa[0].style;X.position="absolute";if(z<2){H?X.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+M.quirksmodeOffsetHack+') + "px"'):X.setExpression("height",'this.parentNode.offsetHeight + "px"');H?X.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):X.setExpression("width",'this.parentNode.offsetWidth + "px"');if(K){X.setExpression("left",K)}if(F){X.setExpression("top",F)}}else{if(M.centerY){if(H){X.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}X.marginTop=0}else{if(!M.centerY&&H){var Y=(M.css&&M.css.top)?parseInt(M.css.top):0;var Z="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+Y+') + "px"';X.setExpression("top",Z)}}}})}if(E){if(M.theme){R.find(".ui-widget-content").append(E)}else{R.append(E)}if(E.jquery||E.nodeType){n(E).show()}}if((n.browser.msie||M.forceIframe)&&M.showOverlay){T.show()}if(M.fadeIn){var O=M.onBlock?M.onBlock:d;var A=(M.showOverlay&&!E)?O:d;var y=E?O:d;if(M.showOverlay){S._fadeIn(M.fadeIn,A)}if(E){R._fadeIn(M.fadeIn,y)}}else{if(M.showOverlay){S.show()}if(E){R.show()}if(M.onBlock){M.onBlock()}}t(1,B,M);if(H){c=R[0];j=n(":input:enabled:visible",c);if(M.focusInput){setTimeout(x,20)}}else{b(R[0],M.centerX,M.centerY)}if(M.timeout){var C=setTimeout(function(){H?n.unblockUI(M):n(B).unblock(M)},M.timeout);n(B).data("blockUI.timeout",C)}}function k(B,C){var A=(B==window);var z=n(B);var D=z.data("blockUI.history");var E=z.data("blockUI.timeout");if(E){clearTimeout(E);z.removeData("blockUI.timeout")}C=n.extend({},n.blockUI.defaults,C||{});t(0,B,C);var y;if(A){y=n("body").children().filter(".blockUI").add("body > .blockUI")}else{y=n(".blockUI",B)}if(A){c=j=null}if(C.fadeOut){y.fadeOut(C.fadeOut);setTimeout(function(){q(y,D,C,B)},C.fadeOut)}else{q(y,D,C,B)}}function q(y,B,A,z){y.each(function(C,D){if(this.parentNode){this.parentNode.removeChild(this)}});if(B&&B.el){B.el.style.display=B.display;B.el.style.position=B.position;if(B.parent){B.parent.appendChild(B.el)}n(z).removeData("blockUI.history")}if(typeof A.onUnblock=="function"){A.onUnblock(z,A)}}function t(y,C,D){var B=C==window,A=n(C);if(!y&&(B&&!c||!B&&!A.data("blockUI.isBlocked"))){return}if(!B){A.data("blockUI.isBlocked",y)}if(!D.bindEvents||(y&&!D.showOverlay)){return}var z="mousedown mouseup keydown keypress";y?n(document).bind(z,D,w):n(document).unbind(z,w)}function w(B){if(B.keyCode&&B.keyCode==9){if(c&&B.data.constrainTabKey){var A=j;var z=!B.shiftKey&&B.target==A[A.length-1];var y=B.shiftKey&&B.target==A[0];if(z||y){setTimeout(function(){x(y)},10);return false}}}if(n(B.target).parents("div.blockMsg").length>0){return true}return n(B.target).parents().children().filter("div.blockUI").length==0}function x(y){if(!j){return}var z=j[y===true?j.length-1:0];if(z){z.focus()}}function b(D,z,F){var E=D.parentNode,C=D.style;var A=((E.offsetWidth-D.offsetWidth)/2)-v(E,"borderLeftWidth");var B=((E.offsetHeight-D.offsetHeight)/2)-v(E,"borderTopWidth");if(z){C.left=A>0?(A+"px"):"0"}if(F){C.top=B>0?(B+"px"):"0"}}function v(y,z){return parseInt(n.css(y,z))||0}})(jQuery);(function(b){b.fn.caret=function(y,q){var d,j,w=this[0];if(typeof y==="object"&&typeof y.start==="number"&&typeof y.end==="number"){d=y.start;j=y.end}else{if(typeof y==="number"&&typeof q==="number"){d=y;j=q}else{if(typeof y==="string"){if((d=w.value.indexOf(y))>-1){j=d+y.length}else{d=null}}else{if(Object.prototype.toString.call(y)==="[object RegExp]"){var v=y.exec(w.value);if(v!=null){d=v.index;j=d+v[0].length}}}}}if(typeof d!="undefined"){if(b.browser.msie){var n=this[0].createTextRange();n.collapse(true);n.moveStart("character",d);n.moveEnd("character",j-d);n.select()}else{this[0].selectionStart=d;this[0].selectionEnd=j}this[0].focus();return this}else{if(b.browser.msie){if(this[0].tagName.toLowerCase()!="textarea"){var f=this.val();var k=document.selection.createRange().duplicate();k.moveEnd("character",f.length);var x=(k.text==""?f.length:f.lastIndexOf(k.text));k=document.selection.createRange().duplicate();k.moveStart("character",-f.length);var p=k.text.length}else{var k=document.selection.createRange();var c=k.duplicate();c.moveToElementText(this[0]);c.setEndPoint("EndToEnd",k);var x=c.text.length-k.text.length;var p=x+k.text.length}}else{var x=w.selectionStart,p=w.selectionEnd}var h=w.value.substring(x,p);return{start:x,end:p,text:h,replace:function(e){return w.value.substring(0,x)+e+w.value.substring(p,w.value.length)}}}return this}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercViewReadyManager={wrappers:[],isInitialized:false,init:function(){this.isInitialized=true},setWrapper:function(c){if(!this.isInitialized){return false}var e=false;var d=this;b(c.components).each(function(f,j){var h=j;if(d.getWrapper(h)!=null){e=true;return}});if(e){return false}b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing");this.wrappers.push(c);c.init();this.logMessage("Added wrapper '"+c.wrapperName+"' to manager");return true},setProcessingFlag:function(){b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing")},getWrapper:function(c){var d=null;b(this.wrappers).each(function(){if(this.isComponentInWrapper(c,true)){d=this;return}});return d},logMessage:function(c){if(window.console&&gDebug){console.log(c)}},handleWrapperComplete:function(c){this.wrappers.splice(b.inArray(c,this.wrappers),1);this.logMessage("Removed wrapper '"+c+"' from manager");if(this.wrappers.length==0){b("#perc-ui-view-indicator").removeClass("perc-ui-view-processing").addClass("perc-ui-view-ready");this.logMessage("The view is ready.")}},showRenderingProgressWarning:function(){b.perc_utils.alert_dialog({content:"Please wait for the page components to finish rendering.",title:"Warning"})}};b.PercComponentWrapper=function(d,e){var c={wrapperName:d,wrapperStatus:"initialized",processedComponents:[],components:e,isWrapperComplete:function(){return this.wrapperStatus=="processed"},isComponentInWrapper:function(f,h){return h?b.inArray(f,this.components)!=-1&&b.inArray(f,this.processedComponents)==-1:b.inArray(f,this.components)!=-1},handleComponentProgress:function(k,j){if(b.inArray(k,this.components)==-1){b.PercViewReadyManager.logMessage("The component '"+k+"' doesn't exist in the wrapper."+this.wrapperName);return}if(j=="complete"){this.processedComponents.push(k);var h=b("#"+k);h.remove();var f=b("[perc-ui-component='"+k+"']");f.addClass("perc-ui-component-ready").removeClass("perc-ui-component-processing");if(this.components.length==this.processedComponents.length){this.wrapperStatus="processed";b.PercViewReadyManager.handleWrapperComplete(this.wrapperName)}}else{b(".perc-ui-component-overlay").each(function(){var q=b(this);var p=b("[perc-ui-component='"+q.attr("id")+"']");var n=p.position();if(n==null){return}q.css("top",n.top).css("left",n.left).css("height",p.height()).css("width",p.width())})}},init:function(){b(this.components).each(function(){var k=this;var j=b("[perc-ui-component='"+k+"']");j.addClass("perc-ui-component-processing").removeClass("perc-ui-component-ready");var f=j.position();var h=b("<div class='perc-ui-component-overlay ui-widget-overlay' style='position:absolute; background-color:silver; opacity:0.3; border-radius: 6px; border: 1px solid silver; z-index:9000'><img src='/cm/images/images/Busy.gif' style='margin: auto;  position: absolute;  top: 0; left: 0; bottom: 0; right: 0;'></div>");h.attr("id",k).css("top",f.top).css("left",f.left).css("height",j.height()).css("width",j.width());j.after(h)})}};return c}})(jQuery);var $j=jQuery.noConflict();$j.perc={};(function(b){b.perc_redirect=function(d,c){var f=window.location.href.indexOf("debug=true")!=-1;var e=d.indexOf("?")!=-1;if(f){if(c==null||c=="undefined"){c=new Object()}c.debug="true"}var h=(c==null||c=="undefined")?"":b.param(c);if(h.length>0){h=(e?"&":"?")+h}var j=d+h;window.location.href=j}})(jQuery);(function(b){b.perc_textAutoFill=function(j,k,e,c,h){var d=false;var f=false;c=typeof(c)!="undefined"?c:false;h=typeof(h)!="undefined"?h:-1;b(j).bind("focus.textAutoFill",function(n){var p=b(k).val();d=(p=="undefined"||p==null||p==""||c==true);f=true});b(j).bind("keyup.textAutoFill",{filter:e},function(p){var n=b(k).attr("disabled");if(!f){var v=b(k).val();d=(v=="undefined"||v==null||v=="");f=true}var q=function(w){return w};if(typeof p.data.filter=="function"){q=p.data.filter}if(d&&!n){if(h>0&&b(j).val().length>h){var t=b(j).val().substring(0,h);b(k).val(q(t))}else{b(k).val(q(b(j).val()))}}})}})(jQuery);(function(b){b.perc_filterField=function(e,c,d){b(e).bind("keypress.filterField",{filter:c},function(y){var h=function(z){return z};var w=y.charCode?y.charCode:y.which;if(w==0||w==8||w==13){return}var t=String.fromCharCode(w);if(typeof y.data.filter=="function"){h=y.data.filter}var v=h(t);if(v.length==0){y.preventDefault()}else{if(t!=v){var x=y.target;var f=b(x).caret().start;var k=b(x).caret().end;var q=x.value.slice(0,f);var p=x.value.slice(k);var j=q+v+p;x.value=j;var n=q.length+1;b(x).caret({start:n,end:n});y.preventDefault()}}});b(e).bind("blur.filterField",{filter:c},function(f){e.val(f.data.filter(e.val()));if(b.isFunction(d)){d(b(e))}})}})(jQuery);(function(b){b.perc_filterFieldText=function(e,c,d){b(e).bind("keypress.filterField",{filter:c},function(A){var h=function(B){return B};var y=A.charCode?A.charCode:A.which;if(y==0||y==8){return}var v=String.fromCharCode(y);if(typeof A.data.filter=="function"){h=A.data.filter}var q=b(A.target).caret().start;var k=e.val();var t=e.attr("maxlength");if(typeof(t)!="undefined"&&k.length==t){return}k=k.substring(0,q)+v+k.substring(q,k.length);var x="";if(typeof(d)!="undefined"&&d.length==1){var w=k.split(d);for(var p=0;p<w.length;p++){w[p]=h(w[p])}x=w.join(d)}else{x=h(k)}if(x.length==0){A.preventDefault()}else{if(k!=x){var z=A.target;var f=b(z).caret().start;var j=x;z.value=b.trim(j);var n=f+1;b(z).caret({start:n,end:n});A.preventDefault()}}});b(e).bind("blur.filterField",{filter:c},function(f){theText=e.val();var h="";if(typeof(d)!="undefined"&&d.length==1){var k=theText.split(d);for(var j=0;j<k.length;j++){k[j]=c(k[j])}h=k.join(d)}else{h=f.data.filter(theText)}e.val(b.trim(h))})}})(jQuery);(function(b){b.perc_textFilters={URL:function(c){return c.replace(/[ ]/g,"-").replace(/[\\\/\:\*\?\"<\>\|\#\;\%\']/g,"")},HOSTNAME:function(c){return c.replace(/[^a-zA-Z0-9\-\.]/g,"")},NOSPACES:function(c){return c.replace(/ /g,"")},NOBACKSLASH:function(c){return c.replace(/[\\]/g,"")},IDNAMECDATA:function(c){return c.replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(c){var d=c.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(d.length>0&&d.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){d=d.substring(1,d.length)}return d},PATH:function(c){return c.replace(/[\\\:\*\?\"<\>\|\#\;\%]/g,"")},ID:function(c){return c.replace(/[^a-zA-Z0-9\-\.\:\_]/g,"")},ID_WITH_SPACE:function(c){return c.replace(/[^a-zA-Z0-9\-\.\:\_ ]/g,"")},ONLY_DIGITS:function(c){return c.replace(/[^0-9]/g,"")},ALPHA_NUMERIC:function(c){return c.replace(/[^a-zA-Z0-9]/g,"")},DIGITS_DOT:function(c){return c.replace(/[^0-9\.]/g,"")},DESCRIPTION:function(c){return c.replace(/[<>&]/g,"")},WINDOWS_FILE_NAME:function(c){return c.replace(/\.*$/g,"")}}})(jQuery);(function(b){b.perc_autoFillTextFilters={URL:function(c){return c.replace(/[ \_]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"").replace(/[-]+/g,"-").toLowerCase()},IDNAMECDATA:function(c){return c.replace(/[:\ \.]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(c){var d=c.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(d.length>0&&d.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){d=d.substring(1,d.length)}return d}}})(jQuery);(function(b){b.PercBlockUI=function(e,d){var c={};if(typeof(e)!="object"||e==null){e=b.PercBlockUIMode.OVERLAY}b.extend(c,e);if(typeof(d)!="undefined"&&d!=null&&d!=""){b.extend(c,{message:d})}b.blockUI(e)};b.PercBlockUIMode={OVERLAY:{message:'<img src="/cm/images/images/Busy.gif"/><br/>Processing. Please wait...',css:{border:"none",backgroundColor:"#fff",opacity:"0.9",color:"#000",fontFamily:"Verdana",fontSize:"11px","-webkit-border-radius":"10px","-moz-border-radius":"10px",padding:"5px",width:"25%"},overlayCSS:{opacity:"0.6"},fadeIn:40,fadeOut:40,baseZ:9999},CURSORONLY:{message:null,overlayCSS:{opacity:0},fadeIn:0,fadeOut:0,baseZ:9999}}})(jQuery);(function(d){var c=false;var b=[];d(document).ready(function(){d("body").ajaxSend(function(){c=true});d("body").ajaxComplete(function(){c=false;e()})});function e(){if(b.length>0&&!c){var f=b.shift();f();e()}}d.PercQueuePostAJAX=function(f){if(typeof(f)=="function"){b.push(f);e()}}})(jQuery);(function(b){b.PercTruncateText=function(e,d){if(e.length<=d){return e}var c=d-3;return e.substr(0,c)+"..."}})(jQuery);(function(b){b.PercTextOverflow=function(c,d){if(b.browser.msie||b.browser.safari){c.css("white-space","nowrap").css("text-overflow","ellipsis").css("width",d).css("overflow","hidden")}else{c.textOverflow("...",false)}}})(jQuery);(function(b){b.fn.binder=b.fn.binder||function(c,d,f){var e=b(this);if((f||false)){e.bind(c,d,f)}else{f=d;e.bind(c,f)}return e};b.fn.singleclick=b.fn.singleclick||function(c,d){return b(this).binder("singleclick",c,d)};b.event.special.singleclick=b.event.special.singleclick||{setup:function(d,c){b(this).bind("click",b.event.special.singleclick.handler)},teardown:function(c){b(this).unbind("click",b.event.special.singleclick.handler)},handler:function(e){var c=function(h){var k=this;var f=b(k);var j=f.data("singleclick-timeout")||false;if(j){clearTimeout(j)}j=false;f.data("singleclick-timeout",j)};var d=function(h){var k=this;c.call(k);var f=b(k);f.data("singleclick-clicks",(f.data("singleclick-clicks")||0)+1);var j=setTimeout(function(){var n=f.data("singleclick-clicks");c.apply(k,[h]);f.data("singleclick-clicks",0);if(n===1){h.type="singleclick";b.event.handle.apply(k,[h])}},500);f.data("singleclick-timeout",j)};d.apply(this,[e])}}})(jQuery);(function(b){b(document).ready(function(){b.editable.addInputType("filteredText",{element:function(e,d){var c=b('<input type="text">');if(e.width!="none"){c.width(e.width)}if(e.height!="none"){c.height(e.height)}c.attr("autocomplete","off");b.perc_filterField(c,b.perc_textFilters.URL);c.attr("id",e.fieldid);b(this).append(c);return(c)}})})})(jQuery);
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(e){var d=document.documentElement.style,f=("textOverflow" in d||"OTextOverflow" in d),h=document.createRange!==undefined,c=function(k){var j=[];e.each(k[0].childNodes,function(){if(this.nodeType===3){j.push(this)}else{e.each(this.childNodes,arguments.callee)}});return e(j)},b=function(p,w,k){var n=document.createRange(),t=0,j=p.length,q=0,v;if(k<=w){return e(p)}if(j===1||!h){return e.map(p,function(x){return x.textContent}).join("").substr(w,k)}for(;t<j;t+=1){v=p[t];if(w>=q&&w<=q+v.length){n.setStart(v,w-q)}if(q<=k&&q+v.length>=k){n.setEnd(v,k-q);break}q+=v.length}return e(n.cloneContents())};e.extend(e.fn,{textOverflow:function(n,j){var k=n||"";if(!f){return this.each(function(){var w=e(this),y=w.clone(),B=w.clone(),v=w.text(),p=w.width(),x=c(B),z=0,A=0,t=v.length,q=function(){if(p!==w.width()){w.replaceWith(B);w=B;B=w.clone();w.textOverflow(n,false);p=w.width()}};w.after(y.hide());if(y.width()>p){while(z<t){A=Math.floor(z+((t-z)/2));y.empty().append(b(x,0,A)).append(k);if(y.width()<p){z=A+1}else{t=A}}if(z<v.length){w.empty().append(b(x,0,z-1)).append(k)}}y.remove();if(j){setInterval(q,200)}})}else{return this}}})})(jQuery);(function(f){var h="/Rhythmyx";var e=h+"/services";var j="/cm";var c={ANALYTICS:e+"/analytics",PAGEMGT:e+"/pagemanagement",SITEMGT:e+"/sitemanage",MIGRATIONMGT:e+"/migrationmanagement",PATHMGT:e+"/pathmanagement",ASSETMGT:e+"/assetmanagement",DELIVERY:e+"/delivery",ITEMMGT:e+"/itemmanagement",USERMGT:e+"/user",UTILS:e+"/utils",METADATAMGT:e+"/metadatamanagement",ACTIVITY:e+"/activitymanagement",FINDER:e+"/searchmanagement",WORKFLOW:e+"/workflowmanagement",ROLEMGT:e+"/rolemanagement",DESIGN:e+"/design",FOLDERMGT:e+"/foldermanagement",LICENSE:e+"/licensemanagement",PUBMGT:e+"/publishmanagement",SHARE:e+"/share",WDGMGT:e+"/widgetmanagement",PAGEOPTMGT:e+"/pageoptimizermanagement",RECMGT:e+"/recentmanagement",REDMGT:e+"/redirectmanagement",CLDSVC:e+"/cloudservicemanagement",CATMGT:e+"/categorymanagement"};var b="Assets";var d="Sites";var n="Search";var k="Design";f.perc_displayformats={"/":"","/Design":"CM1_Design"};f.perc_paths={PATH_ADD_FOLDER:c.PATHMGT+"/path/addFolder",PATH_ADD_NEW_FOLDER:c.PATHMGT+"/path/addNewFolder",PATH_FOLDER:c.PATHMGT+"/path/folder",PATH_CHILD_FOLDERS:c.PATHMGT+"/path/childFolders",PATH_PAGINATED_FOLDER:c.PATHMGT+"/path/paginatedFolder",PATH_ITEM:c.PATHMGT+"/path/item",PATH_ITEM_BY_ID:c.PATHMGT+"/path/item/id",PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE:c.PATHMGT+"/path/item/wfState",PATH_ITEM_MOVE:c.PATHMGT+"/path/moveItem",PATH_ITEM_PROPERTIES:c.PATHMGT+"/path/itemProperties",PATH_VALIDATE_DELETE_FOLDER:c.PATHMGT+"/path/validateFolderDelete",PATH_DELETE_FOLDER:c.PATHMGT+"/path/deleteFolder",PATH_RENAME_FOLDER:c.PATHMGT+"/path/renameFolder",PATH_GET_FOLDER_PROPERTIES:c.PATHMGT+"/path/folderProperties",PATH_SAVE_FOLDER_PROPERTIES:c.PATHMGT+"/path/saveFolderProperties",PATH_LAST_EXISTING:c.PATHMGT+"/path/lastExisting",PATH_VALIDATE_EXIST:c.PATHMGT+"/path/validate",DISPLAY_FORMAT:e+"/ui/uicomps/displayformat/name/",TEMPLATES_ALL:c.PAGEMGT+"/template/summary/all",TEMPLATE_HTML_PARSE:c.PAGEMGT+"/render/parse",TEMPLATE_EXPORT:c.PAGEMGT+"/template/export",TEMPLATE_IMPORT:c.PAGEMGT+"/template/import",TEMPLATES_USER:c.PAGEMGT+"/template/summary/all/user",TEMPLATE_LOAD_SAVE:c.PAGEMGT+"/template",TEMPLATE_LOAD_METADATA:c.PAGEMGT+"/template/loadTemplateMetadata",TEMPLATE_SAVE_METADATA:c.PAGEMGT+"/template/saveTemplateMetadata",TEMPLATE_CREATE_FROM_URL:c.SITEMGT+"/sitetemplates/createFromUrl",TEMPLATE_CREATE_FROM_URL_ASYNC:c.SITEMGT+"/sitetemplates/createFromUrlAsync",TEMPLATE_CREATE_FROM_URL_RESULT:c.SITEMGT+"/sitetemplates/getImportedTemplate",TEMPLATE_CREATE_FROM_PAGE:c.SITEMGT+"/sitetemplates/createFromPage",TEMPLATE_RENDER:c.PAGEMGT+"/render/template",TEMPLATE_RENDER_SCRIPTSOFF:c.PAGEMGT+"/render/template/scriptsoff",TEMPLATES_BY_SITE:c.SITEMGT+"/sitetemplates/templates",TEMPLATES_WITH_NOSITE:c.SITEMGT+"/sitetemplates/nosite",TEMPLATES_READONLY:c.PAGEMGT+"/template/summary/all/readonly",TEMPLATES_SAVE:c.SITEMGT+"/sitetemplates",PAGE_CREATE:c.PAGEMGT+"/page",SAVE_PAGE_METADATA:c.PAGEMGT+"/page/savePageMetadata",PAGES_WITH_TEMPLATE:c.PAGEMGT+"/page/pagesByTemplate",UNASSIGNED_PAGES_BY_SITE:c.PAGEMGT+"/page/unassignedPagesBySite",MIGRATION_EMPTY_FLAG:c.PAGEMGT+"/page/migrationEmptyFlag",CLEAR_MIGRATION_EMPTY_FLAG:c.PAGEMGT+"/page/clearMigrationEmptyFlag",RENDER_LINK_PREVIEW:c.PAGEMGT+"/renderlink/preview",BLOG_LOAD:c.SITEMGT+"/section/blogs",POST_LOAD:c.SITEMGT+"/section/blogPosts",SECTION_CREATE:c.SITEMGT+"section/create",SECTION_CREATE_SECTION_LINK:c.SITEMGT+"/section/createSectionLink",SECTION_DELETE_SECTION_LINK:c.SITEMGT+"/section/deleteSectionLink",SECTION_CREATE_EXTERNAL_LINK:c.SITEMGT+"/section/createExternalLinkSection",SECTION_SECTION_FROM_FOLDER:c.SITEMGT+"/section/createSectionFromFolder",SECTION_CONVERT_TO_FOLDER:c.SITEMGT+"/section/convertToFolder/",SECTION_DELETE:c.SITEMGT+"section",SECTION_LOAD:c.SITEMGT+"section",SECTION_MOVE:c.SITEMGT+"section/move",SECTION_REPLACE_LANDING_PAGE:c.SITEMGT+"section/replaceLandingPage",SECTION_UPDATE:c.SITEMGT+"section/update",SECTION_LINK_UPDATE:c.SITEMGT+"section/updateSectionLink",SECTION_EXTERNAL_LINK_UPDATE:c.SITEMGT+"section/updateExternalLink",SECTION_GET_ROOT:c.SITEMGT+"section/root",SECTION_GET_TREE:c.SITEMGT+"section/tree",SECTION_GET_CHILDREN:c.SITEMGT+"section/childSections",SECTION_GET_PROPERTIES:c.SITEMGT+"section/properties",PAGE_DELETE:c.PAGEMGT+"/page",PAGE_FORCE_DELETE:c.PAGEMGT+"/page/forceDelete",PAGE_VALIDATE_DELETE:c.PAGEMGT+"/page/validateDelete",PAGE_COPY:c.PAGEMGT+"/page/copy",PAGE_CHANGE_TEMPLATE:c.PAGEMGT+"/page/changeTemplate",PAGE_EDIT:c.PAGEMGT+"/render/page/editmode",PAGE_EDIT_SCRIPTSOFF:c.PAGEMGT+"/render/page/editmode/scriptsoff",PAGE_PREVIEW:c.PAGEMGT+"/render/page/",PAGE_EDITURL:c.PAGEMGT+"/page/pageEditUrl",PAGE_VIEWURL:c.PAGEMGT+"/page/pageViewUrl",PAGE_NONSEO:c.PAGEMGT+"/page/nonSEOPages",WIDGETS_ALL:c.PAGEMGT+"/widget",WIDGET_FULL:c.PAGEMGT+"/widget/full",WIDGET_INFO:c.PAGEMGT+"/widget/packageinfo",THEME_CSS:c.PAGEMGT+"/theme/css",REGION_CSS:c.PAGEMGT+"/theme/regioncss",REGION_CSS_MERGE:c.PAGEMGT+"/theme/regioncss/merge",REGION_CSS_PREPARE_FOR_EDIT:c.PAGEMGT+"/theme/regioncss/prepareForEdit",REGION_CSS_CLEAR_CACHE:c.PAGEMGT+"/theme/regioncss/clearCache",THEME_SUMMARY_ALL:c.PAGEMGT+"/theme/summary/all",RICHTEXT_CUSTOM_STYLES:c.PAGEMGT+"/theme/customstyles",ANALYTICS_GET_CONFIG:c.ANALYTICS+"/provider/config",ANALYTICS_STORE_CONFIG:c.ANALYTICS+"/provider/config",ANALYTICS_DELETE_CONFIG:c.ANALYTICS+"/provider/config",ANALYTICS_TEST_CONNECTION:c.ANALYTICS+"/provider/testConnection",ANALYTICS_GET_PROFILES:c.ANALYTICS+"/provider/profiles",CONTENT_EDIT_CRITERIA:c.ASSETMGT+"/asset/contentEditCriteria",ASSET_WIDGET_REL:c.ASSETMGT+"/asset/createAssetWidgetRelationship",ASSET_FROM_LOCALCONTENT:c.ASSETMGT+"/asset/shareLocalContent",ASSET_WIDGET_PROMOTE:c.ASSETMGT+"/asset/promoteAssetWidget",ASSET_WIDGET_REL_UPDATE:c.ASSETMGT+"/asset/updateAssetWidgetRelationship",ASSET_ADD_TO_FOLDER:c.ASSETMGT+"/asset/addAssetToFolder",ASSET_WIDGET_DROP_CRITERIA:c.ASSETMGT+"/asset/assetWidgetDropCriteria/",ASSET_WIDGET_REL_DEL:c.ASSETMGT+"/asset/clearAssetWidgetRelationship",ASSET_ORPHAN_WIDGET_REL_DEL:c.ASSETMGT+"/asset/clearOrphanAssetsWidgetRelationship",ASSET_EDITOR_LIBRARY:c.ASSETMGT+"/asset/assetEditors",ASSET_TYPES:c.ASSETMGT+"/asset/assetTypes",ASSET_EDITOR:c.ASSETMGT+"/asset/assetEditor",ASSET_EDITOR_URL_FOR_ASSET_ID:c.ASSETMGT+"/asset/assetEditUrl",ASSET_VIEW_URL_FOR_ASSET_ID:c.ASSETMGT+"/asset/assetViewUrl",ASSET_DELETE:c.ASSETMGT+"/asset",ASSET_FORCE_DELETE:c.ASSETMGT+"/asset/forceDelete",ASSET_VALIDATE_DELETE:c.ASSETMGT+"/asset/validateDelete",ASSET_REMOVE:c.ASSETMGT+"/asset/remove",ASSET_FORCE_REMOVE:c.ASSETMGT+"/asset/forceRemove",ASSET_UPDATE:c.ASSETMGT+"/asset/updateAsset",ASSET_UNUSED:c.ASSETMGT+"/asset/unusedAssets",ASSET_PROMOTE:c.ASSETMGT+"/asset/promoteAsset",CONVERT_WIDGET:c.ASSETMGT+"/asset/createWidgetAsset",UPDATE_INSPECTED_ELEMENT:c.ASSETMGT+"/asset/updateInspectedElements",SITES_ALL:c.SITEMGT+"/site",SAAS_SITES_NAMES:c.SITEMGT+"/site/sass/sitenames",SITES_ALL_CHOICES:c.SITEMGT+"/site/choices",SITES_BY_TEMPLATE:c.SITEMGT+"/sitetemplates/sites",SITE_CREATE:c.SITEMGT+"/site",SITE_CREATE_FROM_URL:c.SITEMGT+"/site/importFromUrl",SITE_CREATE_FROM_URL_ASYNC:c.SITEMGT+"/site/importFromUrlAsync",SITE_CREATE_FROM_URL_RESULT:c.SITEMGT+"/site/getImportedSite",VIEW_IMPORT_LOG:c.SITEMGT+"/site/importLogViewer",SITE_GET_PROPERTIES:c.SITEMGT+"/site/properties",SITE_IS_BEING_IMPORTED:c.SITEMGT+"/site/isSiteImporting",SITE_PUBLISH:c.SITEMGT+"/publish",SITE_ITEM_PUBLISH_ACTIONS:c.SITEMGT+"/publish/publishingActions",PAGE_PUBLISH:c.SITEMGT+"/publish/page",RESOURCE_PUBLISH:c.SITEMGT+"/publish/resource",PAGE_TAKEDOWN:c.SITEMGT+"/publish/takedown/page",RESOURCE_TAKEDOWN:c.SITEMGT+"/publish/takedown/resource",INCREMENTAL_LIST:c.SITEMGT+"/publish/incremental/content/",INCREMENTAL_PUBLISH:c.SITEMGT+"/publish/incremental/publish/",SITE_UPDATE_PROPERTIES:c.SITEMGT+"/site/updateProperties",SITE_DELETE:c.SITEMGT+"/site",PUBLISH_CURRENT_STATUS:c.SITEMGT+"pubstatus/current",PUBLISH_LOGS:c.SITEMGT+"pubstatus/logs",PUBLISH_PURGE:c.SITEMGT+"pubstatus/purge",PUBLISH_LOGS_DETAILS:c.SITEMGT+"pubstatus/details",SITE_GET_PUBLISH_PROPERTIES:c.SITEMGT+"/site/publishProperties",SITE_UPDATE_PUBLISH_PROPERTIES:c.SITEMGT+"/site/updatePublishProperties",SITE_COPY:c.SITEMGT+"/site/copy",SITE_COPY_VALIDATE_FOLDERS:c.SITEMGT+"/site/copy/validateFolders",SITE_COPY_INFO:c.SITEMGT+"/site/copysiteinfo",SITE_STATS_SUMMARY:c.SITEMGT+"/site/statistics",SITE_ARCHITECTURE:c.SITEMGT+"/siteArchitecture",URL_ADMIN:j+"/jsp/admin.jsp",URL_ARCHITECTURE:j+"/jsp/siteArchitecture.jsp",URL_DASHBOARD:j+"/jsp/dashboard.jsp",URL_WEBMGT:j+"/jsp/webmgt.jsp",IMAGE_ROOT:j+"/images",METADATA_FIND:c.METADATAMGT+"/metadata",METADATA_DELETE_BY_PREFIX:c.METADATAMGT+"/metadata/byprefix",METADATA_FIND_BY_PREFIX:c.METADATAMGT+"/metadata/byprefix",METADATA_DELETE:c.METADATAMGT+"/metadata",METADATA_SAVE:c.METADATAMGT+"/metadata",METADATA_SAVE_GLOBAL_VARIABLES:c.METADATAMGT+"/metadata/globalvariables",PROCESS_STATUS_ALL:c.SITEMGT+"/monitor/all",WORKFLOW_CHECKOUT:c.ITEMMGT+"/workflow/checkOut",WORKFLOW_CHECKIN:c.ITEMMGT+"/workflow/checkIn",WORKFLOW_FORCE_CHECKOUT:c.ITEMMGT+"/workflow/forceCheckOut",WORKFLOW_TRANSITION:c.ITEMMGT+"/workflow/transition",WORKFLOW_TRANSITION_COMMENT:c.ITEMMGT+"/workflow/transitionWithComments",WORKFLOW_TRANSITIONS:c.ITEMMGT+"/workflow/getTransitions",WORKFLOW_CHECKED_OUT_TO_USER:c.ITEMMGT+"/workflow/isCheckedOutToCurrentUser",WORKFLOW_IS_APPROVE_ALLOWED:c.ITEMMGT+"/workflow/isApproveAvailableToCurrentUser",WORKFLOW_BULK_APPROVE:c.ITEMMGT+"/workflow/bulkApprove",WORKFLOW_STEPPED:c.WORKFLOW+"/workflows/",WORKFLOW_META:c.WORKFLOW+"/workflows/metadata",DEFAULT_WORKFLOW_META:c.WORKFLOW+"/workflows/metadata/default",USER_USERS:c.USERMGT+"/user/users",USER_USERS_NAMES:c.USERMGT+"/user/users/names",USER_ROLES:c.USERMGT+"/user/roles",USER_FIND:c.USERMGT+"/user/find",USER_EXTERNAL_FIND:c.USERMGT+"/user/external/find",USER_EXTERNAL_IMPORT:c.USERMGT+"/user/import",USER_EXTERNAL_STATUS:c.USERMGT+"/user/external/status",USER_STATUS:c.USERMGT+"/user/status",USER_DELETE:c.USERMGT+"/user/delete",USER_UPDATE:c.USERMGT+"/user/update",USER_CREATE:c.USERMGT+"/user/create",USER_CURRENT:c.USERMGT+"/user/current",USER_ACCESS_LEVEL:c.USERMGT+"/user/accessLevel",ROLE_FIND:c.ROLEMGT+"/role/find",ROLE_DELETE:c.ROLEMGT+"/role/delete",ROLE_UPDATE:c.ROLEMGT+"/role/update",ROLE_CREATE:c.ROLEMGT+"/role/create",ROLE_AVAILABLE_USERS:c.ROLEMGT+"/role/availableUsers",ROLE_DELETE_VALIDATE:c.ROLEMGT+"/role/validateForDelete",ROLE_REMOVE_USERS_VALIDATE:c.ROLEMGT+"/role/validateDeleteUsers",CAT_ALL:c.CATMGT+"/category/all",CAT_UPDATE:c.CATMGT+"/category/update",CAT_LOCK_INFO:c.CATMGT+"/category/lockinfo",CAT_LOCK_TAB:c.CATMGT+"/category/locktab",CAT_REMOVE_TAB_LOCK:c.CATMGT+"/category/removelocktab",CAT_UPDATE_IN_DTS:c.CATMGT+"/category/updateindts",UTIL_GET_MAXINTERVAL:c.UTILS+"/utility/maxInactiveInterval",UTIL_GET_PRIVATE_KEYS:c.UTILS+"/utility/privatekeys",UTIL_ENCRYPT_STRING:c.UTILS+"/utility/encryptstring",UTIL_ENCRYPT_STRINGS:c.UTILS+"/utility/encryptstrings",UTIL_DECRYPT_STRING:c.UTILS+"/utility/decryptstring",UTIL_LOG_DATA:c.UTILS+"/utility/log",ITEM_REVISIONS:c.ITEMMGT+"/item/revisions",ITEM_PROMOTE_REVISION:c.ITEMMGT+"/item/restoreRevision",ITEM_SETDATES:c.ITEMMGT+"/item/setitemdates",ITEM_GETDATES:c.ITEMMGT+"/item/getitemdates",ITEM_LAST_COMMENT:c.ITEMMGT+"/item/lastComment",ASSET_SITE_IMPACT:c.ITEMMGT+"/item/siteimpact/asset",ADD_TO_MYPAGES:c.ITEMMGT+"/item/addtomypages",REMOVE_FROM_MYPAGES:c.ITEMMGT+"/item/removefrommypages",IS_MY_PAGE:c.ITEMMGT+"/item/ismypage",MY_CONTENT:c.ITEMMGT+"/item/mycontent",ITEM_SETSOPROMETA:c.ITEMMGT+"/item/setsoprometadata",ITEM_GETSOPROMETA:c.ITEMMGT+"/item/getsoprometadata",ASSETS_ROOT_NO_SLASH:b,SITES_ROOT_NO_SLASH:d,DESIGN_ROOT_NO_SLASH:k,SEARCH_ROOT_NO_SLASH:n,ASSETS_ROOT:"/"+b,SITES_ROOT:"/"+d,DESIGN_ROOT:"/"+k,SEARCH_ROOT:"/"+n,FINDER_SEARCH:c.FINDER+"/search/get",DESIGN_THEMES:"/"+k+"/web_resources/themes",ACTIVITY_CONTENT:c.ACTIVITY+"/activity/contentactivity",ACTIVITY_TRAFFIC:c.ACTIVITY+"/activity/contenttraffic",ACTIVITY_TRAFFIC_DETAILS:c.ACTIVITY+"/activity/trafficdetails",ACTIVITY_EFFECTIVENESS:c.ACTIVITY+"/activity/effectiveness",GADGETLIST:j+"/gadgets/listing",ASSET_FORMS:c.ASSETMGT+"/asset/forms",ASSET_FORMS_EXPORT:c.DELIVERY+"/form/submissions",ASSET_FORMS_CLEAR:c.DELIVERY+"/form",COMMENTS_DEFAULT_MODERATION:c.DELIVERY+"/comment/defaultModerationState",COMMENTS_SET_MODERATIONS:c.DELIVERY+"/comment/moderate",COMMENTS_GET_ALL:c.DELIVERY+"/comment/pageswithcomments",COMMENTS_GET_PAGE:c.DELIVERY+"/comment/commentsonpage",COMMENTS_GET_ARTICLE:c.PAGEMGT+"/page/folderpath/Sites",WEBRESOURCESMGT:c.DESIGN+"/webresources",WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD:c.DESIGN+"/webresources/validateFileUpload",WEBRESOURCESMGT_FILE_UPLOAD:c.DESIGN+"/webresources/uploadFile",FOLDERMGT_FOLDERS_WITH_WORKFLOW:c.FOLDERMGT+"/folders",FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB:c.FOLDERMGT+"/folders/GetAssociatedFoldersJob/start/",FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS:c.FOLDERMGT+"/folders/GetAssociatedFoldersJob/status/",FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB:c.FOLDERMGT+"/folders/GetAssociatedFoldersJob/cancel/",FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN:c.FOLDERMGT+"/folders/workflowassignment",FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS:c.FOLDERMGT+"/folders/workflowassignment/isInProgress",FOLDERMGT_FOLDER_PAGES:c.FOLDERMGT+"/folders/folderpages/id/",MEMBERSHIP_GET_ALL:c.DELIVERY+"/membership/admin/users",MEMBERSHIP_ACT_BLK_DEL_ACCOUNT:c.DELIVERY+"/membership/admin/account",MEMBERSHIP_ACT_SAVE_GROUP:c.DELIVERY+"/membership/admin/user/group",LICENSE_ACTIVATE:c.LICENSE+"/license/activate",LICENSE_GET_INFORMATION:c.LICENSE+"/license/status",LICENSE_GET_NETSUITE_METHOD:c.LICENSE+"/license/methodWithCheckUrl",LICENSE_GET_MODULE:c.LICENSE+"/license/module/",LICENSE_SAVE_MODULE:c.LICENSE+"/license/module/save",SERVER_DETAILS:c.PUBMGT+"/servers/",DEFAULT_PUB_PATH:c.PUBMGT+"/servers/defaultFolderLocation/",DEFAULT_SERVER_MODIFIED:c.PUBMGT+"/servers/isDefaultServerModified/",STOP_PUB_SERVER:c.PUBMGT+"/servers/stopPublishing/",JOB_STATUS:c.SHARE+"/jobstatus",TEMPLATE_MIGRATE_CONTENT:c.MIGRATIONMGT+"/contentmigration/migrate",WIDGET_DEFS_SUMMARIES:c.WDGMGT+"/widgetbuilder/summaries",WIDGET_DEF:c.WDGMGT+"/widgetbuilder/definition/",WIDGET_DEF_VALIDATE:c.WDGMGT+"/widgetbuilder/validate/",WIDGET_DEF_DEPLOY:c.WDGMGT+"/widgetbuilder/deploy/",CLDSVC_ACTIVE:c.CLDSVC+"/cloudservice/active/",CLDSVC_ACTIVE_FMT:c.CLDSVC+"/cloudservice/%s/active/",CLDSVC_ACTIVESTATES:c.CLDSVC+"/cloudservice/activestates/",CLDSVC_INFO:c.CLDSVC+"/cloudservice/info/",CLDSVC_INFO_FMT:c.CLDSVC+"/cloudservice/%s/info/",CLDSVC_DATA:c.CLDSVC+"/cloudservice/pagedata/",CLDSVC_DATA_FMT:c.CLDSVC+"/cloudservice/%s/pagedata/",PAGE_OPT_ACTIVE:c.PAGEOPTMGT+"/pageoptimizer/active/",PAGE_OPT_DATA:c.PAGEOPTMGT+"/pageoptimizer/pagedata/",PAGE_OPT_INFO:c.PAGEOPTMGT+"/pageoptimizer/info/",RECENT_ROOT:c.RECMGT+"/recent/",REDIRECT_ROOT:c.REDMGT+"/redirect/",ITEM_PUB_HISTORY:c.ITEMMGT+"/item/pubhistory/"}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(d,t){var q=d.nodeName.toLowerCase();if("area"===q){var p=d.parentNode,n=p.name,k;return !d.href||!n||p.nodeName.toLowerCase()!=="map"?!1:(k=f("img[usemap=#"+n+"]")[0],!!k&&h(k))}return(/input|select|textarea|button|object/.test(q)?!d.disabled:"a"==q?d.href||t:t)&&h(d)}function h(c){return !f(c).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(d,k){return typeof d=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),k&&k.call(b)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?c=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):c=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!c.length?f(document):c},zIndex:function(p){if(p!==e){return this.css("zIndex",p)}if(this.length){var n=f(this[0]),k,b;while(n.length&&n[0]!==document){k=n.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){b=parseInt(n.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}n=n.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(t,q){function b(v,y,x,w){return f.each(p,function(){y-=parseFloat(f.curCSS(v,"padding"+this,!0))||0,x&&(y-=parseFloat(f.curCSS(v,"border"+this+"Width",!0))||0),w&&(y-=parseFloat(f.curCSS(v,"margin"+this,!0))||0)}),y}var p=q==="Width"?["Left","Right"]:["Top","Bottom"],n=q.toLowerCase(),k={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+q]=function(d){return d===e?k["inner"+q].call(this):this.each(function(){f(this).css(n,b(this,d)+"px")})},f.fn["outer"+q]=function(d,v){return typeof d!="number"?k["outer"+q].call(this,d):this.each(function(){f(this).css(n,b(this,d,!0,v)+"px")})}}),f.extend(f.expr[":"],{data:function(k,p,n){return !!f.data(k,n[3])},focusable:function(c){return j(c,!isNaN(f.attr(c,"tabindex")))},tabbable:function(c){var n=f.attr(c,"tabindex"),k=isNaN(n);return(k||n>=0)&&j(c,!k)}}),f(function(){var d=document.body,k=d.appendChild(k=document.createElement("div"));k.offsetHeight,f.extend(k.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=k.offsetHeight===100,f.support.selectstart="onselectstart" in k,d.removeChild(k).style.display="none"}),f.extend(f.ui,{plugin:{add:function(k,t,q){var p=f.ui[k].prototype;for(var n in q){p.plugins[n]=p.plugins[n]||[],p.plugins[n].push([t,q[n]])}},call:function(n,k,t){var q=n.plugins[k];if(!q||!n.element[0].parentNode){return}for(var p=0;p<q.length;p++){n.options[q[p][0]]&&q[p][1].apply(n.element,t)}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(k,q){if(f(k).css("overflow")==="hidden"){return !1}var p=q&&q==="left"?"scrollLeft":"scrollTop",n=!1;return k[p]>0?!0:(k[p]=1,n=k[p]>0,k[p]=0,n)},isOverAxis:function(k,d,n){return k>d&&k<d+n},isOver:function(k,v,t,q,p,n){return f.ui.isOverAxis(k,t,p)&&f.ui.isOverAxis(v,q,n)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(c){for(var p=0,n;(n=c[p])!=null;p++){try{f(n).triggerHandler("remove")}catch(k){}}j(c)}}else{var h=f.fn.remove;f.fn.remove=function(d,k){return this.each(function(){return k||(!d||f.filter(d,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(c){}}),h.call(f(this),d,k)})}}f.widget=function(k,v,t){var q=k.split(".")[0],p;k=k.split(".")[1],p=q+"-"+k,t||(t=v,v=f.Widget),f.expr[":"][p]=function(b){return !!f.data(b,k)},f[q]=f[q]||{},f[q][k]=function(d,c){arguments.length&&this._createWidget(d,c)};var n=new v;n.options=f.extend(!0,{},n.options),f[q][k].prototype=f.extend(!0,n,{namespace:q,widgetName:k,widgetEventPrefix:f[q][k].prototype.widgetEventPrefix||k,widgetBaseClass:p},t),f.widget.bridge(k,f[q][k])},f.widget.bridge=function(k,b){f.fn[k]=function(p){var n=typeof p=="string",d=Array.prototype.slice.call(arguments,1),c=this;return p=!n&&d.length?f.extend.apply(null,[!0,p].concat(d)):p,n&&p.charAt(0)==="_"?c:(n?this.each(function(){var t=f.data(this,k),q=t&&f.isFunction(t[p])?t[p].apply(t,d):t;if(q!==t&&q!==e){return c=q,!1}}):this.each(function(){var q=f.data(this,k);q?q.option(p||{})._init():f.data(this,k,new b(p,this))}),c)}},f.Widget=function(d,c){arguments.length&&this._createWidget(d,c)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(k,p){f.data(p,this.widgetName,this),this.element=f(p),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),k);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,k){var b=n;if(arguments.length===0){return f.extend({},this.options)}if(typeof n=="string"){if(k===e){return this.options[n]}b={},b[n]=k}return this._setOptions(b),this},_setOptions:function(d){var k=this;return f.each(d,function(n,c){k._setOption(n,c)}),this},_setOption:function(d,c){return this.options[d]=c,d==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(k,v,t){var q,p,n=this.options[k];t=t||{},v=f.Event(v),v.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase(),v.target=this.element[0],p=v.originalEvent;if(p){for(q in p){q in v||(v[q]=p[q])}}return this.element.trigger(v,t),!(f.isFunction(n)&&n.call(this.element[0],v,t)===!1||v.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(b){return c._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,c.widgetName+".preventClickEvent")){return e.removeData(b.target,c.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(f){return}this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var k=this,j=c.which==1,h=typeof this.options.cancel=="string"&&c.target.nodeName?e(c.target).closest(this.options.cancel).length:!1;if(!j||h||!this._mouseCapture(c)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=this._mouseStart(c)!==!1;if(!this._mouseStarted){return c.preventDefault(),!0}}return !0===e.data(c.target,this.widgetName+".preventClickEvent")&&e.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return k._mouseMove(b)},this._mouseUpDelegate=function(b){return k._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),f=!0,!0},_mouseMove:function(c){return !e.browser.msie||document.documentMode>=9||!!c.button?this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1,this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),!this._mouseStarted):this._mouseUp(c)},_mouseUp:function(c){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target==this._mouseDownEvent.target&&e.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var w=/left|center|right/,v=/top|center|bottom/,t="center",q={},p=k.fn.position,n=k.fn.offset;k.fn.position=function(d){if(!d||!d.of){return p.apply(this,arguments)}d=k.extend({},d);var z=k(d.of),y=z[0],x=(d.collision||"flip").split(" "),f=d.offset?d.offset.split(" "):[0,0],e,c,A;return y.nodeType===9?(e=z.width(),c=z.height(),A={top:0,left:0}):y.setTimeout?(e=z.width(),c=z.height(),A={top:z.scrollTop(),left:z.scrollLeft()}):y.preventDefault?(d.at="left top",e=c=0,A={top:d.of.pageY,left:d.of.pageX}):(e=z.outerWidth(),c=z.outerHeight(),A=z.offset()),k.each(["my","at"],function(){var b=(d[this]||"").split(" ");b.length===1&&(b=w.test(b[0])?b.concat([t]):v.test(b[0])?[t].concat(b):[t,t]),b[0]=w.test(b[0])?b[0]:t,b[1]=v.test(b[1])?b[1]:t,d[this]=b}),x.length===1&&(x[1]=x[0]),f[0]=parseInt(f[0],10)||0,f.length===1&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,d.at[0]==="right"?A.left+=e:d.at[0]===t&&(A.left+=e/2),d.at[1]==="bottom"?A.top+=c:d.at[1]===t&&(A.top+=c/2),A.left+=f[0],A.top+=f[1],this.each(function(){var I=k(this),H=I.outerWidth(),G=I.outerHeight(),F=parseInt(k.curCSS(this,"marginLeft",!0))||0,E=parseInt(k.curCSS(this,"marginTop",!0))||0,D=H+F+(parseInt(k.curCSS(this,"marginRight",!0))||0),C=G+E+(parseInt(k.curCSS(this,"marginBottom",!0))||0),B=k.extend({},A),b;d.my[0]==="right"?B.left-=H:d.my[0]===t&&(B.left-=H/2),d.my[1]==="bottom"?B.top-=G:d.my[1]===t&&(B.top-=G/2),q.fractions||(B.left=Math.round(B.left),B.top=Math.round(B.top)),b={left:B.left-F,top:B.top-E},k.each(["left","top"],function(J,h){k.ui.position[x[J]]&&k.ui.position[x[J]][h](B,{targetWidth:e,targetHeight:c,elemWidth:H,elemHeight:G,collisionPosition:b,collisionWidth:D,collisionHeight:C,offset:f,my:d.my,at:d.at})}),k.fn.bgiframe&&I.bgiframe(),I.offset(k.extend(B,{using:d.using}))})},k.ui.position={fit:{left:function(f,y){var x=k(window),h=y.collisionPosition.left+y.collisionWidth-x.width()-x.scrollLeft();f.left=h>0?f.left-h:Math.max(f.left-y.collisionPosition.left,f.left)},top:function(f,y){var x=k(window),h=y.collisionPosition.top+y.collisionHeight-x.height()-x.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-y.collisionPosition.top,f.top)}},flip:{left:function(e,C){if(C.at[0]===t){return}var B=k(window),A=C.collisionPosition.left+C.collisionWidth-B.width()-B.scrollLeft(),z=C.my[0]==="left"?-C.elemWidth:C.my[0]==="right"?C.elemWidth:0,y=C.at[0]==="left"?C.targetWidth:-C.targetWidth,x=-2*C.offset[0];e.left+=C.collisionPosition.left<0?z+y+x:A>0?z+y+x:0},top:function(e,C){if(C.at[1]===t){return}var B=k(window),A=C.collisionPosition.top+C.collisionHeight-B.height()-B.scrollTop(),z=C.my[1]==="top"?-C.elemHeight:C.my[1]==="bottom"?C.elemHeight:0,y=C.at[1]==="top"?C.targetHeight:-C.targetHeight,x=-2*C.offset[1];e.top+=C.collisionPosition.top<0?z+y+x:A>0?z+y+x:0}}},k.offset.setOffset||(k.offset.setOffset=function(x,D){/static/.test(k.curCSS(x,"position"))&&(x.style.position="relative");var C=k(x),B=C.offset(),A=parseInt(k.curCSS(x,"top",!0),10)||0,z=parseInt(k.curCSS(x,"left",!0),10)||0,y={top:D.top-B.top+A,left:D.left-B.left+z};"using" in D?D.using.call(x,y):C.css(y)},k.fn.offset=function(d){var e=this[0];return !e||!e.ownerDocument?null:d?k.isFunction(d)?this.each(function(b){k(this).offset(d.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,d)}):n.call(this)}),function(){var f=document.getElementsByTagName("body")[0],D=document.createElement("div"),C,B,A,z,y;C=document.createElement(f?"div":"body"),A={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},f&&k.extend(A,{position:"absolute",left:"-1000px",top:"-1000px"});for(var x in A){C.style[x]=A[x]}C.appendChild(D),B=f||document.documentElement,B.insertBefore(C,B.firstChild),D.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",z=k(D).offset(function(d,c){return c}).offset(),C.innerHTML="",B.removeChild(C),y=z.top+z.left+(f?2000:0),q.fractions=y>21&&y<22}()})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(e){var f=this.options;return this.helper||f.disabled||d(e.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(e),this.handle?(f.iframeFix&&d(f.iframeFix===!0?"iframe":f.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(d(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var f=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),d.ui.ddmanager&&(d.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt),f.containment&&this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),d.ui.ddmanager&&!f.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,h){this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute");if(!h){var f=this._uiHash();if(this._trigger("drag",e,f)===!1){return this._mouseUp({}),!1}this.position=f.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return d.ui.ddmanager&&d.ui.ddmanager.drag(this,e),!1},_mouseStop:function(h){var p=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(p=d.ui.ddmanager.drop(this,h)),this.dropped&&(p=this.dropped,this.dropped=!1);var n=this.element[0],k=!1;while(n&&(n=n.parentNode)){n==document&&(k=!0)}if(!k&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!p||this.options.revert=="valid"&&p||this.options.revert===!0||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,p)){var j=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){j._trigger("stop",h)!==!1&&j._clear()})}else{this._trigger("stop",h)!==!1&&this._clear()}return !1},_mouseUp:function(e){return this.options.iframeFix===!0&&d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,e),d.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var f=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;return d(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(f=!0)}),f},_createHelper:function(e){var h=this.options,f=d.isFunction(h.helper)?d(h.helper.apply(this.element[0],[e])):h.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return f.parents("body").length||f.appendTo(h.appendTo=="parent"?this.element[0].parentNode:h.appendTo),f[0]!=this.element[0]&&!/(fixed|absolute)/.test(f.css("position"))&&f.css("position","absolute"),f},_adjustOffsetFromHelper:function(e){typeof e=="string"&&(e=e.split(" ")),d.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left" in e&&(this.offset.click.left=e.left+this.margins.left),"right" in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top" in e&&(this.offset.click.top=e.top+this.margins.top),"bottom" in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:d(window).scrollLeft())+d(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:d(window).scrollTop())+(d(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){var p=d(h.containment),n=p[0];if(!n){return}var k=p.offset(),j=d(n).css("overflow")!="hidden";this.containment=[(parseInt(d(n).css("borderLeftWidth"),10)||0)+(parseInt(d(n).css("paddingLeft"),10)||0),(parseInt(d(n).css("borderTopWidth"),10)||0)+(parseInt(d(n).css("paddingTop"),10)||0),(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(d(n).css("borderLeftWidth"),10)||0)-(parseInt(d(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(d(n).css("borderTopWidth"),10)||0)-(parseInt(d(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=p}else{h.containment.constructor==Array&&(this.containment=h.containment)}},_convertPositionTo:function(h,q){q||(q=this.position);var p=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:q.top+this.offset.relative.top*p+this.offset.parent.top*p-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*p),left:q.left+this.offset.relative.left*p+this.offset.parent.left*p-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*p)}},_generatePosition:function(A){var z=this.options,y=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,x=/(html|body)/i.test(y[0].tagName),w=A.pageX,v=A.pageY;if(this.originalPosition){var t;if(this.containment){if(this.relative_container){var q=this.relative_container.offset();t=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]}else{t=this.containment}A.pageX-this.offset.click.left<t[0]&&(w=t[0]+this.offset.click.left),A.pageY-this.offset.click.top<t[1]&&(v=t[1]+this.offset.click.top),A.pageX-this.offset.click.left>t[2]&&(w=t[2]+this.offset.click.left),A.pageY-this.offset.click.top>t[3]&&(v=t[3]+this.offset.click.top)}if(z.grid){var p=z.grid[1]?this.originalPageY+Math.round((v-this.originalPageY)/z.grid[1])*z.grid[1]:this.originalPageY;v=t?p-this.offset.click.top<t[1]||p-this.offset.click.top>t[3]?p-this.offset.click.top<t[1]?p+z.grid[1]:p-z.grid[1]:p:p;var n=z.grid[0]?this.originalPageX+Math.round((w-this.originalPageX)/z.grid[0])*z.grid[0]:this.originalPageX;w=t?n-this.offset.click.left<t[0]||n-this.offset.click.left>t[2]?n-this.offset.click.left<t[0]?n+z.grid[0]:n-z.grid[0]:n:n}}return{top:v-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():x?0:y.scrollTop()),left:w-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():x?0:y.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,h,f){return f=f||this._uiHash(),d.ui.plugin.call(this,e,[h,f]),e=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),d.Widget.prototype._trigger.call(this,e,h,f)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),d.extend(d.ui.draggable,{version:"1.8.21"}),d.ui.plugin.add("draggable","connectToSortable",{start:function(h,p){var n=d(this).data("draggable"),k=n.options,j=d.extend({},p,{item:n.element});n.sortables=[],d(k.connectToSortable).each(function(){var b=d.data(this,"sortable");b&&!b.options.disabled&&(n.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",h,j))})},stop:function(f,k){var j=d(this).data("draggable"),h=d.extend({},k,{item:j.element});d.each(j.sortables,function(){this.instance.isOver?(this.instance.isOver=0,j.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(f),this.instance.options.helper=this.instance.options._helper,j.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",f,h))})},drag:function(h,p){var n=d(this).data("draggable"),k=this,j=function(B){var A=this.offset.click.top,z=this.offset.click.left,y=this.positionAbs.top,x=this.positionAbs.left,w=B.height,v=B.width,t=B.top,q=B.left;return d.ui.isOver(y+A,x+z,t,q,w,v)};d.each(n.sortables,function(b){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return p.helper[0]},h.target=this.instance.currentItem[0],this.instance._mouseCapture(h,!0),this.instance._mouseStart(h,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",h),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(h)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",h,this.instance._uiHash(this.instance)),this.instance._mouseStop(h,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",h),n.dropped=!1)})}}),d.ui.plugin.add("draggable","cursor",{start:function(f,k){var j=d("body"),h=d(this).data("draggable").options;j.css("cursor")&&(h._cursor=j.css("cursor")),j.css("cursor",h.cursor)},stop:function(e,h){var f=d(this).data("draggable").options;f._cursor&&d("body").css("cursor",f._cursor)}}),d.ui.plugin.add("draggable","opacity",{start:function(f,k){var j=d(k.helper),h=d(this).data("draggable").options;j.css("opacity")&&(h._opacity=j.css("opacity")),j.css("opacity",h.opacity)},stop:function(e,h){var f=d(this).data("draggable").options;f._opacity&&d(h.helper).css("opacity",f._opacity)}}),d.ui.plugin.add("draggable","scroll",{start:function(e,h){var f=d(this).data("draggable");f.scrollParent[0]!=document&&f.scrollParent[0].tagName!="HTML"&&(f.overflowOffset=f.scrollParent.offset())},drag:function(h,p){var n=d(this).data("draggable"),k=n.options,j=!1;if(n.scrollParent[0]!=document&&n.scrollParent[0].tagName!="HTML"){if(!k.axis||k.axis!="x"){n.overflowOffset.top+n.scrollParent[0].offsetHeight-h.pageY<k.scrollSensitivity?n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop+k.scrollSpeed:h.pageY-n.overflowOffset.top<k.scrollSensitivity&&(n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop-k.scrollSpeed)}if(!k.axis||k.axis!="y"){n.overflowOffset.left+n.scrollParent[0].offsetWidth-h.pageX<k.scrollSensitivity?n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft+k.scrollSpeed:h.pageX-n.overflowOffset.left<k.scrollSensitivity&&(n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft-k.scrollSpeed)}}else{if(!k.axis||k.axis!="x"){h.pageY-d(document).scrollTop()<k.scrollSensitivity?j=d(document).scrollTop(d(document).scrollTop()-k.scrollSpeed):d(window).height()-(h.pageY-d(document).scrollTop())<k.scrollSensitivity&&(j=d(document).scrollTop(d(document).scrollTop()+k.scrollSpeed))}if(!k.axis||k.axis!="y"){h.pageX-d(document).scrollLeft()<k.scrollSensitivity?j=d(document).scrollLeft(d(document).scrollLeft()-k.scrollSpeed):d(window).width()-(h.pageX-d(document).scrollLeft())<k.scrollSensitivity&&(j=d(document).scrollLeft(d(document).scrollLeft()+k.scrollSpeed))}}j!==!1&&d.ui.ddmanager&&!k.dropBehaviour&&d.ui.ddmanager.prepareOffsets(n,h)}}),d.ui.plugin.add("draggable","snap",{start:function(f,k){var j=d(this).data("draggable"),h=j.options;j.snapElements=[],d(h.snap.constructor!=String?h.snap.items||":data(draggable)":h.snap).each(function(){var e=d(this),n=e.offset();this!=j.element[0]&&j.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(N,M){var L=d(this).data("draggable"),K=L.options,J=K.snapTolerance,I=M.offset.left,H=I+L.helperProportions.width,G=M.offset.top,F=G+L.helperProportions.height;for(var E=L.snapElements.length-1;E>=0;E--){var D=L.snapElements[E].left,C=D+L.snapElements[E].width,B=L.snapElements[E].top,A=B+L.snapElements[E].height;if(!(D-J<I&&I<C+J&&B-J<G&&G<A+J||D-J<I&&I<C+J&&B-J<F&&F<A+J||D-J<H&&H<C+J&&B-J<G&&G<A+J||D-J<H&&H<C+J&&B-J<F&&F<A+J)){L.snapElements[E].snapping&&L.options.snap.release&&L.options.snap.release.call(L.element,N,d.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=!1;continue}if(K.snapMode!="inner"){var z=Math.abs(B-F)<=J,y=Math.abs(A-G)<=J,x=Math.abs(D-H)<=J,w=Math.abs(C-I)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B-L.helperProportions.height,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D-L.helperProportions.width}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C}).left-L.margins.left)}var v=z||y||x||w;if(K.snapMode!="outer"){var z=Math.abs(B-G)<=J,y=Math.abs(A-F)<=J,x=Math.abs(D-I)<=J,w=Math.abs(C-H)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A-L.helperProportions.height,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C-L.helperProportions.width}).left-L.margins.left)}!L.snapElements[E].snapping&&(z||y||x||w||v)&&L.options.snap.snap&&L.options.snap.snap.call(L.element,N,d.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=z||y||x||w||v}}}),d.ui.plugin.add("draggable","stack",{start:function(h,p){var n=d(this).data("draggable").options,k=d.makeArray(d(n.stack)).sort(function(e,f){return(parseInt(d(e).css("zIndex"),10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(!k.length){return}var j=parseInt(k[0].style.zIndex)||0;d(k).each(function(b){this.style.zIndex=j+b}),this[0].style.zIndex=j+k.length}}),d.ui.plugin.add("draggable","zIndex",{start:function(f,k){var j=d(k.helper),h=d(this).data("draggable").options;j.css("zIndex")&&(h._zIndex=j.css("zIndex")),j.css("zIndex",h.zIndex)},stop:function(e,h){var f=d(this).data("draggable").options;f._zIndex&&d(h.helper).css("zIndex",f._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,f=e.accept;this.isover=0,this.isout=1,this.accept=d.isFunction(f)?f:function(b){return b.is(f)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},d.ui.ddmanager.droppables[e.scope]=d.ui.ddmanager.droppables[e.scope]||[],d.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var e=d.ui.ddmanager.droppables[this.options.scope];for(var f=0;f<e.length;f++){e[f]==this&&e.splice(f,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(e,f){e=="accept"&&(this.accept=d.isFunction(f)?f:function(b){return b.is(f)}),d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var f=d.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),f&&this._trigger("activate",e,this.ui(f))},_deactivate:function(e){var f=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),f&&this._trigger("deactivate",e,this.ui(f))},_over:function(e){var f=d.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0]){return}this.accept.call(this.element[0],f.currentItem||f.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(f)))},_out:function(e){var f=d.ui.ddmanager.current;if(!f||(f.currentItem||f.element)[0]==this.element[0]){return}this.accept.call(this.element[0],f.currentItem||f.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(f)))},_drop:function(f,k){var j=k||d.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return !1}var h=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=d.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==j.options.scope&&e.accept.call(e.element[0],j.currentItem||j.element)&&d.ui.intersect(j,d.extend(e,{offset:e.element.offset()}),e.options.tolerance)){return h=!0,!1}}),h?!1:this.accept.call(this.element[0],j.currentItem||j.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",f,this.ui(j)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),d.extend(d.ui.droppable,{version:"1.8.21"}),d.ui.intersect=function(F,E,D){if(!E.offset){return !1}var C=(F.positionAbs||F.position.absolute).left,B=C+F.helperProportions.width,A=(F.positionAbs||F.position.absolute).top,z=A+F.helperProportions.height,y=E.offset.left,x=y+E.proportions.width,w=E.offset.top,v=w+E.proportions.height;switch(D){case"fit":return y<=C&&B<=x&&w<=A&&z<=v;case"intersect":return y<C+F.helperProportions.width/2&&B-F.helperProportions.width/2<x&&w<A+F.helperProportions.height/2&&z-F.helperProportions.height/2<v;case"pointer":var t=(F.positionAbs||F.position.absolute).left+(F.clickOffset||F.offset.click).left,q=(F.positionAbs||F.position.absolute).top+(F.clickOffset||F.offset.click).top,p=d.ui.isOver(q,t,w,y,E.proportions.height,E.proportions.width);return p;case"touch":return(A>=w&&A<=v||z>=w&&z<=v||A<w&&z>v)&&(C>=y&&C<=x||B>=y&&B<=x||C<y&&B>x);default:return !1}},d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(j,v){var t=d.ui.ddmanager.droppables[j.options.scope]||[],q=v?v.type:null,p=(j.currentItem||j.element).find(":data(droppable)").andSelf();g:for(var n=0;n<t.length;n++){if(t[n].options.disabled||j&&!t[n].accept.call(t[n].element[0],j.currentItem||j.element)){continue}for(var k=0;k<p.length;k++){if(p[k]==t[n].element[0]){t[n].proportions.height=0;continue g}}t[n].visible=t[n].element.css("display")!="none";if(!t[n].visible){continue}q=="mousedown"&&t[n]._activate.call(t[n],v),t[n].offset=t[n].element.offset(),t[n].proportions={width:t[n].element[0].offsetWidth,height:t[n].element[0].offsetHeight}}},drop:function(e,h){var f=!1;return d.each(d.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&d.ui.intersect(e,this,this.options.tolerance)&&(f=this._drop.call(this,h)||f),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,h))}),f},dragStart:function(e,f){e.element.parents(":not(body,html)").bind("scroll.droppable",function(){e.options.refreshPositions||d.ui.ddmanager.prepareOffsets(e,f)})},drag:function(e,f){e.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(e,f),d.each(d.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var k=d.ui.intersect(e,this,this.options.tolerance),j=!k&&this.isover==1?"isout":k&&this.isover==0?"isover":null;if(!j){return}var h;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(h=d.data(b[0],"droppable"),h.greedyChild=j=="isover"?1:0)}h&&j=="isover"&&(h.isover=0,h.isout=1,h._out.call(h,f)),this[j]=1,this[j=="isout"?"isover":"isout"]=0,this[j=="isover"?"_over":"_out"].call(this,f),h&&j=="isout"&&(h.isout=0,h.isover=1,h._over.call(h,f))})},dragStop:function(e,f){e.element.parents(":not(body,html)").unbind("scroll.droppable"),e.options.refreshPositions||d.ui.ddmanager.prepareOffsets(e,f)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var k=this,w=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=w.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var v=this.handles.split(",");this.handles={};for(var t=0;t<v.length;t++){var q=f.trim(v[t]),p="ui-resizable-"+q,n=f('<div class="ui-resizable-handle '+p+'"></div>');n.css({zIndex:w.zIndex}),"se"==q&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[q]=".ui-resizable-"+q,this.element.append(n)}}this._renderAxis=function(x){x=x||this.element;for(var B in this.handles){this.handles[B].constructor==String&&(this.handles[B]=f(this.handles[B],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var A=f(this.handles[B],this.element),z=0;z=/sw|ne|nw|se|n|s/.test(B)?A.outerHeight():A.outerWidth();var y=["padding",/ne|nw|n/.test(B)?"Top":/se|sw|s/.test(B)?"Bottom":/^e$/.test(B)?"Right":"Left"].join("");x.css(y,z),this._proportionallyResize()}if(!f(this.handles[B]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!k.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}k.axis=b&&b[1]?b[1]:"se"}}),w.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(w.disabled){return}f(this).removeClass("ui-resizable-autohide"),k._handles.show()},function(){if(w.disabled){return}k.resizing||(f(this).addClass("ui-resizable-autohide"),k._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(c){f(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var k=this.element;k.after(this.originalElement.css({position:k.css("position"),width:k.outerWidth(),height:k.outerHeight(),top:k.css("top"),left:k.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),this},_mouseCapture:function(k){var p=!1;for(var n in this.handles){f(this.handles[n])[0]==k.target&&(p=!0)}return !this.options.disabled&&p},_mouseStart:function(c){var v=this.options,t=this.element.position(),q=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(q.is(".ui-draggable")||/absolute/.test(q.css("position")))&&q.css({position:"absolute",top:t.top,left:t.left}),this._renderProxy();var p=j(this.helper.css("left")),n=j(this.helper.css("top"));v.containment&&(p+=f(v.containment).scrollLeft()||0,n+=f(v.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:p,top:n},this.size=this._helper?{width:q.outerWidth(),height:q.outerHeight()}:{width:q.width(),height:q.height()},this.originalSize=this._helper?{width:q.outerWidth(),height:q.outerHeight()}:{width:q.width(),height:q.height()},this.originalPosition={left:p,top:n},this.sizeDiff={width:q.outerWidth()-q.width(),height:q.outerHeight()-q.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio=typeof v.aspectRatio=="number"?v.aspectRatio:this.originalSize.width/this.originalSize.height||1;var k=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",k=="auto"?this.axis+"-resize":k),q.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(E){var D=this.helper,C=this.options,B={},A=this,z=this.originalMousePosition,y=this.axis,x=E.pageX-z.left||0,w=E.pageY-z.top||0,v=this._change[y];if(!v){return !1}var t=v.apply(this,[E,x,w]),q=f.browser.msie&&f.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(E.shiftKey);if(this._aspectRatio||E.shiftKey){t=this._updateRatio(t,E)}return t=this._respectSize(t,E),this._propagate("resize",E),D.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(t),this._trigger("resize",E,this.ui()),!1},_mouseStop:function(A){this.resizing=!1;var z=this.options,y=this;if(this._helper){var x=this._proportionallyResizeElements,w=x.length&&/textarea/i.test(x[0].nodeName),v=w&&f.ui.hasScroll(x[0],"left")?0:y.sizeDiff.height,t=w?0:y.sizeDiff.width,q={width:y.helper.width()-t,height:y.helper.height()-v},p=parseInt(y.element.css("left"),10)+(y.position.left-y.originalPosition.left)||null,n=parseInt(y.element.css("top"),10)+(y.position.top-y.originalPosition.top)||null;z.animate||this.element.css(f.extend(q,{top:n,left:p})),y.helper.height(y.size.height),y.helper.width(y.size.width),this._helper&&!z.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",A),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var d=this.options,v,t,q,p,n;n={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||k){v=n.minHeight*this.aspectRatio,q=n.minWidth/this.aspectRatio,t=n.maxHeight*this.aspectRatio,p=n.maxWidth/this.aspectRatio,v>n.minWidth&&(n.minWidth=v),q>n.minHeight&&(n.minHeight=q),t<n.maxWidth&&(n.maxWidth=t),p<n.maxHeight&&(n.maxHeight=p)}this._vBoundaries=n},_updateCache:function(d){var c=this.options;this.offset=this.helper.offset(),h(d.left)&&(this.position.left=d.left),h(d.top)&&(this.position.top=d.top),h(d.height)&&(this.size.height=d.height),h(d.width)&&(this.size.width=d.width)},_updateRatio:function(k,d){var t=this.options,q=this.position,p=this.size,n=this.axis;return h(k.height)?k.width=k.height*this.aspectRatio:h(k.width)&&(k.height=k.width/this.aspectRatio),n=="sw"&&(k.left=q.left+(p.width-k.width),k.top=null),n=="nw"&&(k.top=q.top+(p.height-k.height),k.left=q.left+(p.width-k.width)),k},_respectSize:function(G,F){var E=this.helper,D=this._vBoundaries,C=this._aspectRatio||F.shiftKey,B=this.axis,A=h(G.width)&&D.maxWidth&&D.maxWidth<G.width,z=h(G.height)&&D.maxHeight&&D.maxHeight<G.height,y=h(G.width)&&D.minWidth&&D.minWidth>G.width,x=h(G.height)&&D.minHeight&&D.minHeight>G.height;y&&(G.width=D.minWidth),x&&(G.height=D.minHeight),A&&(G.width=D.maxWidth),z&&(G.height=D.maxHeight);var w=this.originalPosition.left+this.originalSize.width,v=this.position.top+this.size.height,t=/sw|nw|w/.test(B),q=/nw|ne|n/.test(B);y&&t&&(G.left=w-D.minWidth),A&&t&&(G.left=w-D.maxWidth),x&&q&&(G.top=v-D.minHeight),z&&q&&(G.top=v-D.maxHeight);var d=!G.width&&!G.height;return d&&!G.left&&G.top?G.top=null:d&&!G.top&&G.left&&(G.left=null),G},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var v=this.helper||this.element;for(var t=0;t<this._proportionallyResizeElements.length;t++){var q=this._proportionallyResizeElements[t];if(!this.borderDif){var p=[q.css("borderTopWidth"),q.css("borderRightWidth"),q.css("borderBottomWidth"),q.css("borderLeftWidth")],n=[q.css("paddingTop"),q.css("paddingRight"),q.css("paddingBottom"),q.css("paddingLeft")];this.borderDif=f.map(p,function(x,w){var z=parseInt(x,10)||0,y=parseInt(n[w],10)||0;return z+y})}if(!f.browser.msie||!f(v).is(":hidden")&&!f(v).parents(":hidden").length){q.css({height:v.height()-this.borderDif[0]-this.borderDif[2]||0,width:v.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var k=this.element,t=this.options;this.elementOffset=k.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var q=f.browser.msie&&f.browser.version<7,p=q?1:0,n=q?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-p+"px",top:this.elementOffset.top-p+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(k,d,n){return{width:this.originalSize.width+d}},w:function(n,k,v){var t=this.options,q=this.originalSize,p=this.originalPosition;return{left:p.left+k,width:q.width-k}},n:function(n,k,v){var t=this.options,q=this.originalSize,p=this.originalPosition;return{top:p.top+v,height:q.height-v}},s:function(k,d,n){return{height:this.originalSize.height+n}},se:function(k,p,n){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[k,p,n]))},sw:function(k,p,n){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[k,p,n]))},ne:function(k,p,n){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[k,p,n]))},nw:function(k,p,n){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[k,p,n]))}},_propagate:function(d,k){f.ui.plugin.call(this,d,[k,this.ui()]),d!="resize"&&this._trigger(d,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(k,t){var q=f(this).data("resizable"),p=q.options,n=function(c){f(c).each(function(){var d=f(this);d.data("resizable-alsoresize",{width:parseInt(d.width(),10),height:parseInt(d.height(),10),left:parseInt(d.css("left"),10),top:parseInt(d.css("top"),10)})})};typeof p.alsoResize=="object"&&!p.alsoResize.parentNode?p.alsoResize.length?(p.alsoResize=p.alsoResize[0],n(p.alsoResize)):f.each(p.alsoResize,function(b){n(b)}):n(p.alsoResize)},resize:function(k,x){var w=f(this).data("resizable"),v=w.options,t=w.originalSize,q=w.originalPosition,p={height:w.size.height-t.height||0,width:w.size.width-t.width||0,top:w.position.top-q.top||0,left:w.position.left-q.left||0},n=function(c,y){f(c).each(function(){var d=f(this),B=f(this).data("resizable-alsoresize"),A={},z=y&&y.length?y:d.parents(x.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(z,function(D,C){var E=(B[C]||0)+(p[C]||0);E&&E>=0&&(A[C]=E||null)}),d.css(A)})};typeof v.alsoResize=="object"&&!v.alsoResize.nodeType?f.each(v.alsoResize,function(d,c){n(d,c)}):n(v.alsoResize)},stop:function(d,k){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z._proportionallyResizeElements,w=x.length&&/textarea/i.test(x[0].nodeName),v=w&&f.ui.hasScroll(x[0],"left")?0:z.sizeDiff.height,t=w?0:z.sizeDiff.width,q={width:z.size.width-t,height:z.size.height-v},p=parseInt(z.element.css("left"),10)+(z.position.left-z.originalPosition.left)||null,n=parseInt(z.element.css("top"),10)+(z.position.top-z.originalPosition.top)||null;z.element.animate(f.extend(q,n&&p?{top:n,left:p}:{}),{duration:y.animateDuration,easing:y.animateEasing,step:function(){var b={width:parseInt(z.element.css("width"),10),height:parseInt(z.element.css("height"),10),top:parseInt(z.element.css("top"),10),left:parseInt(z.element.css("left"),10)};x&&x.length&&f(x[0]).css({width:b.width,height:b.height}),z._updateCache(b),z._propagate("resize",B)}})}}),f.ui.plugin.add("resizable","containment",{start:function(F,E){var D=f(this).data("resizable"),C=D.options,B=D.element,A=C.containment,z=A instanceof f?A.get(0):/parent/.test(A)?B.parent().get(0):A;if(!z){return}D.containerElement=f(z);if(/document/.test(A)||A==document){D.containerOffset={left:0,top:0},D.containerPosition={left:0,top:0},D.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var y=f(z),x=[];f(["Top","Right","Left","Bottom"]).each(function(k,d){x[k]=j(y.css("padding"+d))}),D.containerOffset=y.offset(),D.containerPosition=y.position(),D.containerSize={height:y.innerHeight()-x[3],width:y.innerWidth()-x[1]};var w=D.containerOffset,v=D.containerSize.height,t=D.containerSize.width,q=f.ui.hasScroll(z,"left")?z.scrollWidth:t,c=f.ui.hasScroll(z)?z.scrollHeight:v;D.parentData={element:z,left:w.left,top:w.top,width:q,height:c}}},resize:function(H,G){var F=f(this).data("resizable"),E=F.options,D=F.containerSize,C=F.containerOffset,B=F.size,A=F.position,z=F._aspectRatio||H.shiftKey,y={top:0,left:0},x=F.containerElement;x[0]!=document&&/static/.test(x.css("position"))&&(y=C),A.left<(F._helper?C.left:0)&&(F.size.width=F.size.width+(F._helper?F.position.left-C.left:F.position.left-y.left),z&&(F.size.height=F.size.width/F.aspectRatio),F.position.left=E.helper?C.left:0),A.top<(F._helper?C.top:0)&&(F.size.height=F.size.height+(F._helper?F.position.top-C.top:F.position.top),z&&(F.size.width=F.size.height*F.aspectRatio),F.position.top=F._helper?C.top:0),F.offset.left=F.parentData.left+F.position.left,F.offset.top=F.parentData.top+F.position.top;var w=Math.abs((F._helper?F.offset.left-y.left:F.offset.left-y.left)+F.sizeDiff.width),v=Math.abs((F._helper?F.offset.top-y.top:F.offset.top-C.top)+F.sizeDiff.height),t=F.containerElement.get(0)==F.element.parent().get(0),q=/relative|absolute/.test(F.containerElement.css("position"));t&&q&&(w-=F.parentData.left),w+F.size.width>=F.parentData.width&&(F.size.width=F.parentData.width-w,z&&(F.size.height=F.size.width/F.aspectRatio)),v+F.size.height>=F.parentData.height&&(F.size.height=F.parentData.height-v,z&&(F.size.width=F.size.height*F.aspectRatio))},stop:function(C,B){var A=f(this).data("resizable"),z=A.options,y=A.position,x=A.containerOffset,w=A.containerPosition,v=A.containerElement,t=f(A.helper),q=t.offset(),p=t.outerWidth()-A.sizeDiff.width,n=t.outerHeight()-A.sizeDiff.height;A._helper&&!z.animate&&/relative/.test(v.css("position"))&&f(this).css({left:q.left-w.left-x.left,width:p,height:n}),A._helper&&!z.animate&&/static/.test(v.css("position"))&&f(this).css({left:q.left-w.left-x.left,width:p,height:n})}}),f.ui.plugin.add("resizable","ghost",{start:function(k,t){var q=f(this).data("resizable"),p=q.options,n=q.size;q.ghost=q.originalElement.clone(),q.ghost.css({opacity:0.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof p.ghost=="string"?p.ghost:""),q.ghost.appendTo(q.helper)},resize:function(k,q){var p=f(this).data("resizable"),n=p.options;p.ghost&&p.ghost.css({position:"relative",height:p.size.height,width:p.size.width})},stop:function(k,q){var p=f(this).data("resizable"),n=p.options;p.ghost&&p.helper&&p.helper.get(0).removeChild(p.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z.size,w=z.originalSize,v=z.originalPosition,t=z.axis,q=y._aspectRatio||B.shiftKey;y.grid=typeof y.grid=="number"?[y.grid,y.grid]:y.grid;var p=Math.round((x.width-w.width)/(y.grid[0]||1))*(y.grid[0]||1),n=Math.round((x.height-w.height)/(y.grid[1]||1))*(y.grid[1]||1);/^(se|s|e)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n):/^(ne)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n,z.position.top=v.top-n):/^(sw)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n,z.position.left=v.left-p):(z.size.width=w.width+p,z.size.height=w.height+n,z.position.top=v.top-n,z.position.left=v.left-p)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.selectable",d.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var f;this.refresh=function(){f=d(e.options.filter,e.element[0]),f.addClass("ui-selectee"),f.each(function(){var h=d(this),j=h.offset();d.data(this,"selectable-item",{element:this,$element:h,left:j.left,top:j.top,right:j.left+h.outerWidth(),bottom:j.top+h.outerHeight(),startselected:!1,selected:h.hasClass("ui-selected"),selecting:h.hasClass("ui-selecting"),unselecting:h.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=f.addClass("ui-selectee"),this._mouseInit(),this.helper=d("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(e){var h=this;this.opos=[e.pageX,e.pageY];if(this.options.disabled){return}var f=this.options;this.selectees=d(f.filter,this.element[0]),this._trigger("start",e),d(f.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),f.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=d.data(this,"selectable-item");b.startselected=!0,!e.metaKey&&!e.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,h._trigger("unselecting",e,{unselecting:b.element}))}),d(e.target).parents().andSelf().each(function(){var j=d.data(this,"selectable-item");if(j){var b=!e.metaKey&&!e.ctrlKey||!j.$element.hasClass("ui-selected");return j.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),j.unselecting=!b,j.selecting=b,j.selected=b,b?h._trigger("selecting",e,{selecting:j.element}):h._trigger("unselecting",e,{unselecting:j.element}),!1}})},_mouseDrag:function(j){var w=this;this.dragged=!0;if(this.options.disabled){return}var v=this.options,t=this.opos[0],q=this.opos[1],p=j.pageX,n=j.pageY;if(t>p){var k=p;p=t,t=k}if(q>n){var k=n;n=q,q=k}return this.helper.css({left:t,top:q,width:p-t,height:n-q}),this.selectees.each(function(){var e=d.data(this,"selectable-item");if(!e||e.element==w.element[0]){return}var b=!1;v.tolerance=="touch"?b=!(e.left>p||e.right<t||e.top>n||e.bottom<q):v.tolerance=="fit"&&(b=e.left>t&&e.right<p&&e.top>q&&e.bottom<n),b?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,w._trigger("selecting",j,{selecting:e.element}))):(e.selecting&&((j.metaKey||j.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),w._trigger("unselecting",j,{unselecting:e.element}))),e.selected&&!j.metaKey&&!j.ctrlKey&&!e.startselected&&(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,w._trigger("unselecting",j,{unselecting:e.element})))}),!1},_mouseStop:function(e){var h=this;this.dragged=!1;var f=this.options;return d(".ui-unselecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,h._trigger("unselected",e,{unselected:b.element})}),d(".ui-selecting",this.element[0]).each(function(){var b=d.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,h._trigger("selected",e,{selected:b.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),d.extend(d.ui.selectable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--){this.items[e].item.removeData(this.widgetName+"-item")}return this},_setOption:function(e,f){e==="disabled"?(this.options[e]=f,this.widget()[f?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(j,v){var t=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(j);var q=null,p=this,n=d(j.target).parents().each(function(){if(d.data(this,t.widgetName+"-item")==p){return q=d(this),!1}});d.data(j.target,t.widgetName+"-item")==p&&(q=d(j.target));if(!q){return !1}if(this.options.handle&&!v){var k=!1;d(this.options.handle,q).find("*").andSelf().each(function(){this==j.target&&(k=!0)});if(!k){return !1}}return this.currentItem=q,this._removeCurrentsFromItems(),!0},_mouseStart:function(h,q,p){var n=this.options,k=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},d.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!p){for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("activate",h,k._uiHash(this))}}return d.ui.ddmanager&&(d.ui.ddmanager.current=this),d.ui.ddmanager&&!n.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(j){this.position=this._generatePosition(j),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var v=this.options,t=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-j.pageY<v.scrollSensitivity?this.scrollParent[0].scrollTop=t=this.scrollParent[0].scrollTop+v.scrollSpeed:j.pageY-this.overflowOffset.top<v.scrollSensitivity&&(this.scrollParent[0].scrollTop=t=this.scrollParent[0].scrollTop-v.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-j.pageX<v.scrollSensitivity?this.scrollParent[0].scrollLeft=t=this.scrollParent[0].scrollLeft+v.scrollSpeed:j.pageX-this.overflowOffset.left<v.scrollSensitivity&&(this.scrollParent[0].scrollLeft=t=this.scrollParent[0].scrollLeft-v.scrollSpeed)):(j.pageY-d(document).scrollTop()<v.scrollSensitivity?t=d(document).scrollTop(d(document).scrollTop()-v.scrollSpeed):d(window).height()-(j.pageY-d(document).scrollTop())<v.scrollSensitivity&&(t=d(document).scrollTop(d(document).scrollTop()+v.scrollSpeed)),j.pageX-d(document).scrollLeft()<v.scrollSensitivity?t=d(document).scrollLeft(d(document).scrollLeft()-v.scrollSpeed):d(window).width()-(j.pageX-d(document).scrollLeft())<v.scrollSensitivity&&(t=d(document).scrollLeft(d(document).scrollLeft()+v.scrollSpeed))),t!==!1&&d.ui.ddmanager&&!v.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,j)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var q=this.items.length-1;q>=0;q--){var p=this.items[q],n=p.item[0],k=this._intersectsWithPointer(p);if(!k){continue}if(n!=this.currentItem[0]&&this.placeholder[k==1?"next":"prev"]()[0]!=n&&!d.ui.contains(this.placeholder[0],n)&&(this.options.type=="semi-dynamic"?!d.ui.contains(this.element[0],n):!0)){this.direction=k==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(p)){this._rearrange(j,p)}else{break}this._trigger("change",j,this._uiHash());break}}return this._contactContainers(j),d.ui.ddmanager&&d.ui.ddmanager.drag(this,j),this._trigger("sort",j,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(f,k){if(!f){return}d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,f);if(this.options.revert){var j=this,h=j.placeholder.offset();j.reverting=!0,d(this.helper).animate({left:h.left-this.offset.parent.left-j.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-j.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){j._clear(f)})}else{this._clear(f,k)}return !1},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var f=this.containers.length-1;f>=0;f--){this.containers[f]._trigger("deactivate",null,e._uiHash(this)),this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",null,e._uiHash(this)),this.containers[f].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var h=this._getItemsAsjQuery(e&&e.connected),f=[];return e=e||{},d(h).each(function(){var b=(d(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);b&&f.push((e.key||b[1]+"[]")+"="+(e.key&&e.expression?b[1]:b[2]))}),!f.length&&e.key&&f.push(e.key+"="),f.join("&")},toArray:function(e){var h=this._getItemsAsjQuery(e&&e.connected),f=[];return e=e||{},h.each(function(){f.push(d(e.item||this).attr(e.attribute||"id")||"")}),f},_intersectsWith:function(C){var B=this.positionAbs.left,A=B+this.helperProportions.width,z=this.positionAbs.top,y=z+this.helperProportions.height,x=C.left,w=x+C.width,v=C.top,t=v+C.height,q=this.offset.click.top,p=this.offset.click.left,n=z+q>v&&z+q<t&&B+p>x&&B+p<w;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>C[this.floating?"width":"height"]?n:x<B+this.helperProportions.width/2&&A-this.helperProportions.width/2<w&&v<z+this.helperProportions.height/2&&y-this.helperProportions.height/2<t},_intersectsWithPointer:function(h){var q=this.options.axis==="x"||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height),p=this.options.axis==="y"||d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width),n=q&&p,k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return n?this.floating?j&&j=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(h){var p=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),n=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return this.floating&&j?j=="right"&&n||j=="left"&&!n:k&&(k=="down"&&p||k=="up"&&!p)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(y){var x=this,w=[],v=[],t=this._connectWith();if(t&&y){for(var q=t.length-1;q>=0;q--){var p=d(t[q]);for(var n=p.length-1;n>=0;n--){var k=d.data(p[n],this.widgetName);k&&k!=this&&!k.options.disabled&&v.push([d.isFunction(k.options.items)?k.options.items.call(k.element):d(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}v.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var q=v.length-1;q>=0;q--){v[q][0].each(function(){w.push(this)})}return d(w)},_removeCurrentsFromItems:function(){var f=this.currentItem.find(":data("+this.widgetName+"-item)");for(var e=0;e<this.items.length;e++){for(var h=0;h<f.length;h++){f[h]==this.items[e].item[0]&&this.items.splice(e,1)}}},_refreshItems:function(E){this.items=[],this.containers=[this];var D=this.items,C=this,B=[[d.isFunction(this.options.items)?this.options.items.call(this.element[0],E,{item:this.currentItem}):d(this.options.items,this.element),this]],A=this._connectWith();if(A&&this.ready){for(var z=A.length-1;z>=0;z--){var y=d(A[z]);for(var x=y.length-1;x>=0;x--){var w=d.data(y[x],this.widgetName);w&&w!=this&&!w.options.disabled&&(B.push([d.isFunction(w.options.items)?w.options.items.call(w.element[0],E,{item:this.currentItem}):d(w.options.items,w.element),w]),this.containers.push(w))}}}for(var z=B.length-1;z>=0;z--){var v=B[z][1],t=B[z][0];for(var x=0,q=t.length;x<q;x++){var p=d(t[x]);p.data(this.widgetName+"-item",v),D.push({item:p,instance:v,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var p=this.items.length-1;p>=0;p--){var n=this.items[p];if(n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0]){continue}var k=this.options.toleranceElement?d(this.options.toleranceElement,n.item):n.item;h||(n.width=k.outerWidth(),n.height=k.outerHeight());var j=k.offset();n.left=j.left,n.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var p=this.containers.length-1;p>=0;p--){var j=this.containers[p].element.offset();this.containers[p].containerCache.left=j.left,this.containers[p].containerCache.top=j.top,this.containers[p].containerCache.width=this.containers[p].element.outerWidth(),this.containers[p].containerCache.height=this.containers[p].element.outerHeight()}}return this},_createPlaceholder:function(f){var k=f||this,j=k.options;if(!j.placeholder||j.placeholder.constructor==String){var h=j.placeholder;j.placeholder={element:function(){var e=d(document.createElement(k.currentItem[0].nodeName)).addClass(h||k.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return h||(e.style.visibility="hidden"),e},update:function(n,e){if(h&&!j.forcePlaceholderSize){return}e.height()||e.height(k.currentItem.innerHeight()-parseInt(k.currentItem.css("paddingTop")||0,10)-parseInt(k.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(k.currentItem.innerWidth()-parseInt(k.currentItem.css("paddingLeft")||0,10)-parseInt(k.currentItem.css("paddingRight")||0,10))}}}k.placeholder=d(j.placeholder.element.call(k.element,k.currentItem)),k.currentItem.after(k.placeholder),j.placeholder.update(k,k.placeholder)},_contactContainers:function(y){var x=null,w=null;for(var v=this.containers.length-1;v>=0;v--){if(d.ui.contains(this.currentItem[0],this.containers[v].element[0])){continue}if(this._intersectsWith(this.containers[v].containerCache)){if(x&&d.ui.contains(this.containers[v].element[0],x.element[0])){continue}x=this.containers[v],w=v}else{this.containers[v].containerCache.over&&(this.containers[v]._trigger("out",y,this._uiHash(this)),this.containers[v].containerCache.over=0)}}if(!x){return}if(this.containers.length===1){this.containers[w]._trigger("over",y,this._uiHash(this)),this.containers[w].containerCache.over=1}else{if(this.currentContainer!=this.containers[w]){var t=10000,q=null,p=this.positionAbs[this.containers[w].floating?"left":"top"];for(var n=this.items.length-1;n>=0;n--){if(!d.ui.contains(this.containers[w].element[0],this.items[n].item[0])){continue}var k=this.containers[w].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;Math.abs(k-p)<t&&(t=Math.abs(k-p),q=this.items[n],this.direction=k-p>0?"down":"up")}if(!q&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[w],q?this._rearrange(y,q,null,!0):this._rearrange(y,null,this.containers[w].element,!0),this._trigger("change",y,this._uiHash()),this.containers[w]._trigger("change",y,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[w]._trigger("over",y,this._uiHash(this)),this.containers[w].containerCache.over=1}}},_createHelper:function(e){var h=this.options,f=d.isFunction(h.helper)?d(h.helper.apply(this.element[0],[e,this.currentItem])):h.helper=="clone"?this.currentItem.clone():this.currentItem;return f.parents("body").length||d(h.appendTo!="parent"?h.appendTo:this.currentItem[0].parentNode)[0].appendChild(f[0]),f[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(f[0].style.width==""||h.forceHelperSize)&&f.width(this.currentItem.width()),(f[0].style.height==""||h.forceHelperSize)&&f.height(this.currentItem.height()),f},_adjustOffsetFromHelper:function(e){typeof e=="string"&&(e=e.split(" ")),d.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left" in e&&(this.offset.click.left=e.left+this.margins.left),"right" in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top" in e&&(this.offset.click.top=e.top+this.margins.top),"bottom" in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;f.containment=="parent"&&(f.containment=this.helper[0].parentNode);if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(f.containment)){var k=d(f.containment)[0],j=d(f.containment).offset(),h=d(k).css("overflow")!="hidden";this.containment=[j.left+(parseInt(d(k).css("borderLeftWidth"),10)||0)+(parseInt(d(k).css("paddingLeft"),10)||0)-this.margins.left,j.top+(parseInt(d(k).css("borderTopWidth"),10)||0)+(parseInt(d(k).css("paddingTop"),10)||0)-this.margins.top,j.left+(h?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(d(k).css("borderLeftWidth"),10)||0)-(parseInt(d(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,j.top+(h?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(d(k).css("borderTopWidth"),10)||0)-(parseInt(d(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,q){q||(q=this.position);var p=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:q.top+this.offset.relative.top*p+this.offset.parent.top*p-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*p),left:q.left+this.offset.relative.left*p+this.offset.parent.left*p-(d.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*p)}},_generatePosition:function(j){var w=this.options,v=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,t=/(html|body)/i.test(v[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var q=j.pageX,p=j.pageY;if(this.originalPosition){this.containment&&(j.pageX-this.offset.click.left<this.containment[0]&&(q=this.containment[0]+this.offset.click.left),j.pageY-this.offset.click.top<this.containment[1]&&(p=this.containment[1]+this.offset.click.top),j.pageX-this.offset.click.left>this.containment[2]&&(q=this.containment[2]+this.offset.click.left),j.pageY-this.offset.click.top>this.containment[3]&&(p=this.containment[3]+this.offset.click.top));if(w.grid){var n=this.originalPageY+Math.round((p-this.originalPageY)/w.grid[1])*w.grid[1];p=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?n+w.grid[1]:n-w.grid[1]:n:n;var k=this.originalPageX+Math.round((q-this.originalPageX)/w.grid[0])*w.grid[0];q=this.containment?k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2]?k-this.offset.click.left<this.containment[0]?k+w.grid[0]:k-w.grid[0]:k:k}}return{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():t?0:v.scrollTop()),left:q-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():t?0:v.scrollLeft())}},_rearrange:function(j,h,q,p){q?q[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,k=this.counter;window.setTimeout(function(){k==n.counter&&n.refreshPositions(!p)},0)},_clear:function(h,p){this.reverting=!1;var n=[],k=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var j in this._storedCSS){if(this._storedCSS[j]=="auto"||this._storedCSS[j]=="static"){this._storedCSS[j]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!p&&n.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!p&&n.push(function(b){this._trigger("update",b,this._uiHash())});if(!d.ui.contains(this.element[0],this.currentItem[0])){p||n.push(function(b){this._trigger("remove",b,this._uiHash())});for(var j=this.containers.length-1;j>=0;j--){d.ui.contains(this.containers[j].element[0],this.currentItem[0])&&!p&&(n.push(function(b){return function(e){b._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[j])),n.push(function(b){return function(e){b._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[j])))}}for(var j=this.containers.length-1;j>=0;j--){p||n.push(function(b){return function(e){b._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over&&(n.push(function(b){return function(e){b._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over=0)}this._storedCursor&&d("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!p){this._trigger("beforeStop",h,this._uiHash());for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return !1}p||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!p){for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){d.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var f=e||this;return{helper:f.helper,placeholder:f.placeholder||d([]),position:f.position,originalPosition:f.originalPosition,offset:f.positionAbs,item:f.currentItem,sender:e?e.element:null}}}),d.extend(d.ui.sortable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var f=this,k=f.options;f.running=0,f.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),f.headers=f.element.find(k.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(k.disabled){return}d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(k.disabled){return}d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(k.disabled){return}d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(k.disabled){return}d(this).removeClass("ui-state-focus")}),f.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(k.navigation){var j=f.element.find("a").filter(k.navigationFilter).eq(0);if(j.length){var h=j.closest(".ui-accordion-header");h.length?f.active=h:f.active=j.closest(".ui-accordion-content").prev()}}f.active=f._findActive(f.active||k.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),f.active.next().addClass("ui-accordion-content-active"),f._createIcons(),f.resize(),f.element.attr("role","tablist"),f.headers.attr("role","tab").bind("keydown.accordion",function(b){return f._keydown(b)}).next().attr("role","tabpanel"),f.headers.not(f.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),f.active.length?f.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):f.headers.eq(0).attr("tabIndex",0),d.browser.safari||f.headers.find("a").attr("tabIndex",-1),k.event&&f.headers.bind(k.event.split(" ").join(".accordion ")+".accordion",function(b){f._clickHandler.call(f,b,this),b.preventDefault()})},_createIcons:function(){var e=this.options;e.icons&&(d("<span></span>").addClass("ui-icon "+e.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(e.icons.header).toggleClass(e.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var f=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(e.autoHeight||e.fillHeight)&&f.css("height",""),d.Widget.prototype.destroy.call(this)},_setOption:function(e,f){d.Widget.prototype._setOption.apply(this,arguments),e=="active"&&this.activate(f),e=="icons"&&(this._destroyIcons(),f&&this._createIcons()),e=="disabled"&&this.headers.add(this.headers.next())[f?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(this.options.disabled||h.altKey||h.ctrlKey){return}var p=d.ui.keyCode,n=this.headers.length,k=this.headers.index(h.target),j=!1;switch(h.keyCode){case p.RIGHT:case p.DOWN:j=this.headers[(k+1)%n];break;case p.LEFT:case p.UP:j=this.headers[(k-1+n)%n];break;case p.SPACE:case p.ENTER:this._clickHandler({target:h.target},h.target),h.preventDefault()}return j?(d(h.target).attr("tabIndex",-1),d(j).attr("tabIndex",0),j.focus(),!1):!0},resize:function(){var e=this.options,h;if(e.fillSpace){if(d.browser.msie){var f=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}h=this.element.parent().height(),d.browser.msie&&this.element.parent().css("overflow",f),this.headers.each(function(){h-=d(this).outerHeight(!0)}),this.headers.next().each(function(){d(this).height(Math.max(0,h-d(this).innerHeight()+d(this).height()))}).css("overflow","auto")}else{e.autoHeight&&(h=0,this.headers.next().each(function(){h=Math.max(h,d(this).height("").height())}).height(h))}return this},activate:function(f){this.options.active=f;var e=this._findActive(f)[0];return this._clickHandler({target:e},e),this},_findActive:function(e){return e?typeof e=="number"?this.headers.filter(":eq("+e+")"):this.headers.not(this.headers.not(e)):e===!1?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(A,z){var y=this.options;if(y.disabled){return}if(!A.target){if(!y.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(y.icons.headerSelected).addClass(y.icons.header),this.active.next().addClass("ui-accordion-content-active");var x=this.active.next(),w={options:y,newHeader:d([]),oldHeader:y.active,newContent:d([]),oldContent:x},v=this.active=d([]);this._toggle(v,x,w);return}var t=d(A.currentTarget||z),q=t[0]===this.active[0];y.active=y.collapsible&&q?!1:this.headers.index(t);if(this.running||!y.collapsible&&q){return}var p=this.active,v=t.next(),x=this.active.next(),w={options:y,newHeader:q&&y.collapsible?d([]):t,oldHeader:this.active,newContent:q&&y.collapsible?d([]):v,oldContent:x},n=this.headers.index(this.active[0])>this.headers.index(t[0]);this.active=q?d([]):t,this._toggle(v,x,w,q,n),p.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(y.icons.headerSelected).addClass(y.icons.header),q||(t.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(y.icons.header).addClass(y.icons.headerSelected),t.next().addClass("ui-accordion-content-active"));return},_toggle:function(C,B,A,z,y){var x=this,w=x.options;x.toShow=C,x.toHide=B,x.data=A;var v=function(){if(!x){return}return x._completed.apply(x,arguments)};x._trigger("changestart",null,x.data),x.running=B.size()===0?C.size():B.size();if(w.animated){var t={};w.collapsible&&z?t={toShow:d([]),toHide:B,complete:v,down:y,autoHeight:w.autoHeight||w.fillSpace}:t={toShow:C,toHide:B,complete:v,down:y,autoHeight:w.autoHeight||w.fillSpace},w.proxied||(w.proxied=w.animated),w.proxiedDuration||(w.proxiedDuration=w.duration),w.animated=d.isFunction(w.proxied)?w.proxied(t):w.proxied,w.duration=d.isFunction(w.proxiedDuration)?w.proxiedDuration(t):w.proxiedDuration;var q=d.ui.accordion.animations,p=w.duration,n=w.animated;n&&!q[n]&&!d.easing[n]&&(n="slide"),q[n]||(q[n]=function(b){this.slide(b,{easing:n,duration:p||700})}),q[n](t)}else{w.collapsible&&z?C.toggle():(B.hide(),C.show()),v(!0)}B.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),C.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),d.extend(d.ui.accordion,{version:"1.8.21",animations:{slide:function(y,x){y=d.extend({easing:"swing",duration:300},y,x);if(!y.toHide.size()){y.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},y);return}if(!y.toShow.size()){y.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},y);return}var w=y.toShow.css("overflow"),v=0,t={},q={},p=["height","paddingTop","paddingBottom"],n,k=y.toShow;n=k[0].style.width,k.width(k.parent().width()-parseFloat(k.css("paddingLeft"))-parseFloat(k.css("paddingRight"))-(parseFloat(k.css("borderLeftWidth"))||0)-(parseFloat(k.css("borderRightWidth"))||0)),d.each(p,function(h,f){q[f]="hide";var b=(""+d.css(y.toShow[0],f)).match(/^([\d+-.]+)(.*)$/);t[f]={value:b[1],unit:b[2]||"px"}}),y.toShow.css({height:0,overflow:"hidden"}).show(),y.toHide.filter(":hidden").each(y.complete).end().filter(":visible").animate(q,{step:function(b,e){e.prop=="height"&&(v=e.end-e.start===0?0:(e.now-e.start)/(e.end-e.start)),y.toShow[0].style[e.prop]=v*t[e.prop].value+t[e.prop].unit},duration:y.duration,easing:y.easing,complete:function(){y.autoHeight||y.toShow.css("height",""),y.toShow.css({width:n,overflow:w}),y.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var h=this,k=this.element[0].ownerDocument,j;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(h.options.disabled||h.element.propAttr("readOnly")){return}j=!1;var b=e.ui.keyCode;switch(n.keyCode){case b.PAGE_UP:h._move("previousPage",n);break;case b.PAGE_DOWN:h._move("nextPage",n);break;case b.UP:h._keyEvent("previous",n);break;case b.DOWN:h._keyEvent("next",n);break;case b.ENTER:case b.NUMPAD_ENTER:h.menu.active&&(j=!0,n.preventDefault());case b.TAB:if(!h.menu.active){return}h.menu.select(n);break;case b.ESCAPE:h.element.val(h.term),h.close(n);break;default:clearTimeout(h.searching),h.searching=setTimeout(function(){h.term!=h.element.val()&&(h.selectedItem=null,h.search(null,n))},h.options.delay)}}).bind("keypress.autocomplete",function(b){j&&(j=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(h.options.disabled){return}h.selectedItem=null,h.previous=h.element.val()}).bind("blur.autocomplete",function(b){if(h.options.disabled){return}clearTimeout(h.searching),h.closing=setTimeout(function(){h.close(b),h._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",k)[0]).mousedown(function(n){var b=h.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(p){p.target!==h.element[0]&&p.target!==b&&!e.ui.contains(b,p.target)&&h.close()})},1),setTimeout(function(){clearTimeout(h.closing)},13)}).menu({focus:function(b,p){var n=p.item.data("item.autocomplete");!1!==h._trigger("focus",b,{item:n})&&/^key/.test(b.originalEvent.type)&&h.element.val(n.value)},selected:function(b,p){var n=p.item.data("item.autocomplete"),c=h.previous;h.element[0]!==k.activeElement&&(h.element.focus(),h.previous=c,setTimeout(function(){h.previous=c,h.selectedItem=n},1)),!1!==h._trigger("select",b,{item:n})&&h.element.val(n.value),h.term=h.element.val(),h.close(b),h.selectedItem=n},blur:function(b,n){h.menu.element.is(":visible")&&h.element.val()!==h.term&&h.element.val(h.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),h.beforeunloadHandler=function(){h.element.removeAttr("autocomplete")},e(window).bind("beforeunload",h.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(h,j){e.Widget.prototype._setOption.apply(this,arguments),h==="source"&&this._initSource(),h==="appendTo"&&this.menu.element.appendTo(e(j||"body",this.element[0].ownerDocument)[0]),h==="disabled"&&j&&this.xhr&&this.xhr.abort()},_initSource:function(){var h=this,k,j;e.isArray(this.options.source)?(k=this.options.source,this.source=function(c,n){n(e.ui.autocomplete.filter(k,c.term))}):typeof this.options.source=="string"?(j=this.options.source,this.source=function(n,b){h.xhr&&h.xhr.abort(),h.xhr=e.ajax({url:j,data:n,dataType:"json",success:function(p,c){b(p)},error:function(){b([])}})}):this.source=this.options.source},search:function(h,c){h=h!=null?h:this.element.val(),this.term=this.element.val();if(h.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search",c)===!1){return}return this._search(h)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var h=this,c=++f;return function(b){c===f&&h.__response(b),h.pending--,h.pending||h.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(c){return c.length&&c[0].label&&c[0].value?c:e.map(c,function(h){return typeof h=="string"?{label:h,value:h}:e.extend({label:h.label||h.value,value:h.value||h.label},h)})},_suggest:function(h){var j=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(j,h),this.menu.deactivate(),this.menu.refresh(),j.show(),this._resizeMenu(),j.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(h,k){var j=this;e.each(k,function(b,n){j._renderItem(h,n)})},_renderItem:function(h,j){return e("<li></li>").data("item.autocomplete",j).append(e("<a></a>").text(j.label)).appendTo(h)},_move:function(h,c){if(!this.menu.element.is(":visible")){this.search(null,c);return}if(this.menu.first()&&/^previous/.test(h)||this.menu.last()&&/^next/.test(h)){this.element.val(this.term),this.menu.deactivate();return}this.menu[h](c)},widget:function(){return this.menu.element},_keyEvent:function(h,c){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(h,c),c.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(h,k){var j=new RegExp(e.ui.autocomplete.escapeRegex(k),"i");return e.grep(h,function(b){return j.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(d){if(!b(d.target).closest(".ui-menu-item a").length){return}d.preventDefault(),c.select(d)}),this.refresh()},refresh:function(){var d=this,e=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");e.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(f){d.activate(f,b(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var n=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();n<0?this.element.scrollTop(k+n):n>=j&&this.element.scrollTop(k+n-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(".ui-menu-item:first"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-k-j+b(this).height();return c<10&&c>-10});h.length||(h=this.element.children(".ui-menu-item:last")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var c=b(this).offset().top-k+j-b(this).height();return c<10&&c>-10});h.length||(h=this.element.children(".ui-menu-item:first")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){var z,y,x,w,v="ui-button ui-widget ui-state-default ui-corner-all",t="ui-state-hover ui-state-active ",q="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var c=B(this).find(":ui-button");setTimeout(function(){c.button("refresh")},1)},n=function(f){var k=f.name,j=f.form,h=B([]);return k&&(j?h=B(j).find("[name='"+k+"']"):h=B("[name='"+k+"']",f.ownerDocument).filter(function(){return !this.form})),h};B.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",p),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var d=this,j=this.options,f=this.type==="checkbox"||this.type==="radio",e="ui-state-hover"+(f?"":" ui-state-active"),c="ui-state-focus";j.label===null&&(j.label=this.buttonElement.html()),this.buttonElement.addClass(v).attr("role","button").bind("mouseenter.button",function(){if(j.disabled){return}B(this).addClass("ui-state-hover"),this===z&&B(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(j.disabled){return}B(this).removeClass(e)}).bind("click.button",function(b){j.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){d.buttonElement.addClass(c)}).bind("blur.button",function(){d.buttonElement.removeClass(c)}),f&&(this.element.bind("change.button",function(){if(w){return}d.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(j.disabled){return}w=!1,y=b.pageX,x=b.pageY}).bind("mouseup.button",function(b){if(j.disabled){return}if(y!==b.pageX||x!==b.pageY){w=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(j.disabled||w){return !1}B(this).toggleClass("ui-state-active"),d.buttonElement.attr("aria-pressed",d.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(j.disabled||w){return !1}B(this).addClass("ui-state-active"),d.buttonElement.attr("aria-pressed","true");var b=d.element[0];n(b).not(b).map(function(){return B(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(j.disabled){return !1}B(this).addClass("ui-state-active"),z=this,B(document).one("mouseup",function(){z=null})}).bind("mouseup.button",function(){if(j.disabled){return !1}B(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(j.disabled){return !1}(h.keyCode==B.ui.keyCode.SPACE||h.keyCode==B.ui.keyCode.ENTER)&&B(this).addClass("ui-state-active")}).bind("keyup.button",function(){B(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===B.ui.keyCode.SPACE&&B(this).click()})),this._setOption("disabled",j.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),d="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(d),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(d),this.buttonElement.length||(this.buttonElement=e.find(d))),this.element.addClass("ui-helper-hidden-accessible");var f=this.element.is(":checked");f&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",f)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(v+" "+t+" "+q).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),B.Widget.prototype.destroy.call(this)},_setOption:function(d,e){B.Widget.prototype._setOption.apply(this,arguments);if(d==="disabled"){e?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var c=this.element.is(":disabled");c!==this.options.disabled&&this._setOption("disabled",c),this.type==="radio"?n(this.element[0]).each(function(){B(this).is(":checked")?B(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):B(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var h=this.buttonElement.removeClass(q),D=B("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(h.empty()).text(),C=this.options.icons,k=C.primary&&C.secondary,j=[];C.primary||C.secondary?(this.options.text&&j.push("ui-button-text-icon"+(k?"s":C.primary?"-primary":"-secondary")),C.primary&&h.prepend("<span class='ui-button-icon-primary ui-icon "+C.primary+"'></span>"),C.secondary&&h.append("<span class='ui-button-icon-secondary ui-icon "+C.secondary+"'></span>"),this.options.text||(j.push(k?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||h.attr("title",D))):j.push("ui-button-text-only"),h.addClass(j.join(" "))}}),B.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(d,e){d==="disabled"&&this.buttons.button("option",d,e),B.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var c=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return B(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(c?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(c?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return B(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),B.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var q="ui-dialog ui-widget ui-widget-content ui-corner-all ",p={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(d){var e=j(this).css(d).offset().top;e<0&&j(this).css("top",d.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var C=this,B=C.options,A=B.title||"&#160;",z=j.ui.dialog.getTitleId(C.element),y=(C.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(q+B.dialogClass).css({zIndex:B.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){B.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(C.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":z}).mousedown(function(b){C.moveToTop(!1,b)}),x=C.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(y),w=(C.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(y),v=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){v.addClass("ui-state-hover")},function(){v.removeClass("ui-state-hover")}).focus(function(){v.addClass("ui-state-focus")}).blur(function(){v.removeClass("ui-state-focus")}).click(function(b){return C.close(b),!1}).appendTo(w),t=(C.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(B.closeText).appendTo(v),c=j("<span></span>").addClass("ui-dialog-title").attr("id",z).html(A).prependTo(w);j.isFunction(B.beforeclose)&&!j.isFunction(B.beforeClose)&&(B.beforeClose=B.beforeclose),w.find("*").add(w).disableSelection(),B.draggable&&j.fn.draggable&&C._makeDraggable(),B.resizable&&j.fn.resizable&&C._makeResizable(),C._createButtons(B.buttons),C._isOpen=!1,j.fn.bgiframe&&y.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(f){var w=this,v,t;if(!1===w._trigger("beforeClose",f)){return}return w.overlay&&w.overlay.destroy(),w.uiDialog.unbind("keypress.ui-dialog"),w._isOpen=!1,w.options.hide?w.uiDialog.hide(w.options.hide,function(){w._trigger("close",f)}):(w.uiDialog.hide(),w._trigger("close",f)),j.ui.dialog.overlay.resize(),w.options.modal&&(v=0,j(".ui-dialog").each(function(){this!==w.uiDialog[0]&&(t=j(this).css("z-index"),isNaN(t)||(v=Math.max(v,t)))}),j.ui.dialog.maxZ=v),w},isOpen:function(){return this._isOpen},moveToTop:function(t,y){var x=this,w=x.options,v;return w.modal&&!t||!w.stack&&!w.modal?x._trigger("focus",y):(w.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=w.zIndex),x.overlay&&(j.ui.dialog.maxZ+=1,x.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),v={scrollTop:x.element.scrollTop(),scrollLeft:x.element.scrollLeft()},j.ui.dialog.maxZ+=1,x.uiDialog.css("z-index",j.ui.dialog.maxZ),x.element.attr(v),x._trigger("focus",y),x)},open:function(){if(this._isOpen){return}var e=this,t=e.options,f=e.uiDialog;return e.overlay=t.modal?new j.ui.dialog.overlay(e):null,e._size(),e._position(t.position),f.show(t.show),e.moveToTop(!0),t.modal&&f.bind("keydown.ui-dialog",function(v){if(v.keyCode!==j.ui.keyCode.TAB){return}var y=j(":tabbable",this),x=y.filter(":first"),w=y.filter(":last");if(v.target===w[0]&&!v.shiftKey){return x.focus(1),!1}if(v.target===x[0]&&v.shiftKey){return w.focus(1),!1}}),j(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e},_createButtons:function(f){var x=this,w=!1,v=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),t=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(v);x.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof f=="object"&&f!==null&&j.each(f,function(){return !(w=!0)}),w&&(j.each(f,function(c,z){z=j.isFunction(z)?{click:z,text:c}:z;var y=j('<button type="button"></button>').click(function(){z.click.apply(x.element[0],arguments)}).appendTo(t);j.each(z,function(e,d){if(e==="click"){return}e in k?y[e](d):y.attr(e,d)}),j.fn.button&&y.button()}),v.appendTo(x.uiDialog))},_makeDraggable:function(){function v(b){return{position:b.position,offset:b.offset}}var t=this,y=t.options,x=j(document),w;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,b){w=y.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),t._trigger("dragStart",c,v(b))},drag:function(b,d){t._trigger("drag",b,v(d))},stop:function(c,b){y.position=[b.position.left-x.scrollLeft(),b.position.top-x.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(w),t._trigger("dragStop",c,v(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(y){function b(c){return{originalPosition:c.originalPosition,originalSize:c.originalSize,position:c.position,size:c.size}}y=y===h?this.options.resizable:y;var x=this,w=x.options,v=x.uiDialog.css("position"),t=typeof y=="string"?y:"n,e,s,w,se,sw,ne,nw";x.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:x.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:x._minHeight(),handles:t,start:function(d,e){j(this).addClass("ui-dialog-resizing"),x._trigger("resizeStart",d,b(e))},resize:function(d,c){x._trigger("resize",d,b(c))},stop:function(d,e){j(this).removeClass("ui-dialog-resizing"),w.height=j(this).height(),w.width=j(this).width(),x._trigger("resizeStop",d,b(e)),j.ui.dialog.overlay.resize()}}).css("position",v).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var w=[],v=[0,0],t;if(f){if(typeof f=="string"||typeof f=="object"&&"0" in f){w=f.split?f.split(" "):[f[0],f[1]],w.length===1&&(w[1]=w[0]),j.each(["left","top"],function(d,c){+w[d]===w[d]&&(v[d]=w[d],w[d]=c)}),f={my:w.join(" "),at:w.join(" "),offset:v.join(" ")}}f=j.extend({},j.ui.dialog.prototype.options.position,f)}else{f=j.ui.dialog.prototype.options.position}t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},f)),t||this.uiDialog.hide()},_setOptions:function(d){var v=this,t={},e=!1;j.each(d,function(f,c){v._setOption(f,c),f in p&&(e=!0),f in n&&(t[f]=c)}),e&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",t)},_setOption:function(c,y){var x=this,w=x.uiDialog;switch(c){case"beforeclose":c="beforeClose";break;case"buttons":x._createButtons(y);break;case"closeText":x.uiDialogTitlebarCloseText.text(""+y);break;case"dialogClass":w.removeClass(x.options.dialogClass).addClass(q+y);break;case"disabled":y?w.addClass("ui-dialog-disabled"):w.removeClass("ui-dialog-disabled");break;case"draggable":var v=w.is(":data(draggable)");v&&!y&&w.draggable("destroy"),!v&&y&&x._makeDraggable();break;case"position":x._position(y);break;case"resizable":var t=w.is(":data(resizable)");t&&!y&&w.resizable("destroy"),t&&typeof y=="string"&&w.resizable("option","handles",y),!t&&y!==!1&&x._makeResizable(y);break;case"title":j(".ui-dialog-title",x.uiDialogTitlebar).html(""+(y||"&#160;"))}j.Widget.prototype._setOption.apply(x,arguments)},_size:function(){var t=this.options,y,x,w=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),y=this.uiDialog.css({height:"auto",width:t.width}).height(),x=Math.max(0,t.minHeight-y);if(t.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:x,height:"auto"})}else{this.uiDialog.show();var v=this.element.css("height","auto").height();w||this.uiDialog.hide(),this.element.height(Math.max(v,x))}}else{this.element.height(Math.max(t.height-y,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(d){var c=d.attr("id");return c||(this.uuid+=1,c=this.uuid),"ui-dialog-title-"+c},overlay:function(c){this.$el=j.ui.dialog.overlay.create(c)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(d){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(c){if(j(c.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){d.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(d.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var e=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&e.bgiframe(),this.instances.push(e),e},destroy:function(e){var t=j.inArray(e,this.instances);t!=-1&&this.oldInstances.push(this.instances.splice(t,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),e.remove();var f=0;j.each(this.instances,function(){f=Math.max(f,this.css("z-index"))}),this.maxZ=f},height:function(){var d,e;return j.browser.msie&&j.browser.version<7?(d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),e=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),d<e?j(window).height()+"px":d+"px"):j(document).height()+"px"},width:function(){var d,e;return j.browser.msie?(d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),d<e?j(window).width()+"px":d+"px"):j(document).width()+"px"},resize:function(){var c=j([]);j.each(j.ui.dialog.overlay.instances,function(){c=c.add(this)}),c.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,t=this.options,q=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),p="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",n=t.values&&t.values.length||1,k=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(t.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),t.range&&(t.range===!0&&(t.values||(t.values=[this._valueMin(),this._valueMin()]),t.values.length&&t.values.length!==2&&(t.values=[t.values[0],t.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:"")));for(var j=q.length;j<n;j+=1){k.push(p)}this.handles=q.add(e(k.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){t.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){t.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(h){e(this).data("index.ui-slider-handle",h)}),this.handles.keydown(function(z){var y=e(this).data("index.ui-slider-handle"),x,w,v,b;if(c.options.disabled){return}switch(z.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:z.preventDefault();if(!c._keySliding){c._keySliding=!0,e(this).addClass("ui-state-active"),x=c._start(z,y);if(x===!1){return}}}b=c.options.step,c.options.values&&c.options.values.length?w=v=c.values(y):w=v=c.value();switch(z.keyCode){case e.ui.keyCode.HOME:v=c._valueMin();break;case e.ui.keyCode.END:v=c._valueMax();break;case e.ui.keyCode.PAGE_UP:v=c._trimAlignValue(w+(c._valueMax()-c._valueMin())/f);break;case e.ui.keyCode.PAGE_DOWN:v=c._trimAlignValue(w-(c._valueMax()-c._valueMin())/f);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(w===c._valueMax()){return}v=c._trimAlignValue(w+b);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(w===c._valueMin()){return}v=c._trimAlignValue(w-b)}c._slide(z,y,v)}).keyup(function(h){var b=e(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(h,b),c._change(h,b),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(B){var A=this.options,z,y,x,w,v,t,q,p,n;return A.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),z={x:B.pageX,y:B.pageY},y=this._normValueFromMouse(z),x=this._valueMax()-this._valueMin()+1,v=this,this.handles.each(function(h){var j=Math.abs(y-v.values(h));x>j&&(x=j,w=e(this),t=h)}),A.range===!0&&this.values(1)===A.min&&(t+=1,w=e(this.handles[t])),q=this._start(B,t),q===!1?!1:(this._mouseSliding=!0,v._handleIndex=t,w.addClass("ui-state-active").focus(),p=w.offset(),n=!e(B.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:B.pageX-p.left-w.width()/2,top:B.pageY-p.top-w.height()/2-(parseInt(w.css("borderTopWidth"),10)||0)-(parseInt(w.css("borderBottomWidth"),10)||0)+(parseInt(w.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(B,t,y),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(j){var h={x:j.pageX,y:j.pageY},k=this._normValueFromMouse(h);return this._slide(j,this._handleIndex,k),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(j){var h,q,p,n,k;return this.orientation==="horizontal"?(h=this.elementSize.width,q=j.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(h=this.elementSize.height,q=j.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),p=q/h,p>1&&(p=1),p<0&&(p=0),this.orientation==="vertical"&&(p=1-p),n=this._valueMax()-this._valueMin(),k=this._valueMin()+p*n,this._trimAlignValue(k)},_start:function(j,h){var k={handle:this.handles[h],value:this.value()};return this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("start",j,k)},_slide:function(j,h,q){var p,n,k;this.options.values&&this.options.values.length?(p=this.values(h?0:1),this.options.values.length===2&&this.options.range===!0&&(h===0&&q>p||h===1&&q<p)&&(q=p),q!==this.values(h)&&(n=this.values(),n[h]=q,k=this._trigger("slide",j,{handle:this.handles[h],value:q,values:n}),p=this.values(h?0:1),k!==!1&&this.values(h,q,!0))):q!==this.value()&&(k=this._trigger("slide",j,{handle:this.handles[h],value:q}),k!==!1&&this.value(q))},_stop:function(j,h){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("stop",j,k)},_change:function(j,h){if(!this._keySliding&&!this._mouseSliding){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("change",j,k)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(h,p){var n,k,j;if(arguments.length>1){this.options.values[h]=this._trimAlignValue(p),this._refreshValue(),this._change(null,h);return}if(!arguments.length){return this._values()}if(!e.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(h):this.value()}n=this.options.values,k=arguments[0];for(j=0;j<n.length;j+=1){n[j]=this._trimAlignValue(k[j]),this._change(null,j)}this._refreshValue()},_setOption:function(h,n){var k,j=0;e.isArray(this.options.values)&&(j=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(h){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(k=0;k<j;k+=1){this._change(null,k)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(j){var h,n,k;if(arguments.length){return h=this.options.values[j],h=this._trimAlignValue(h),h}n=this.options.values.slice();for(k=0;k<n.length;k+=1){n[k]=this._trimAlignValue(n[k])}return n},_trimAlignValue:function(j){if(j<=this._valueMin()){return this._valueMin()}if(j>=this._valueMax()){return this._valueMax()}var h=this.options.step>0?this.options.step:1,n=(j-this._valueMin())%h,k=j-n;return Math.abs(n)*2>=h&&(k+=n>0?h:-h),parseFloat(k.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var A=this.options.range,z=this.options,y=this,x=this._animateOff?!1:z.animate,w,v={},t,q,p,n;this.options.values&&this.options.values.length?this.handles.each(function(c,h){w=(y.values(c)-y._valueMin())/(y._valueMax()-y._valueMin())*100,v[y.orientation==="horizontal"?"left":"bottom"]=w+"%",e(this).stop(1,1)[x?"animate":"css"](v,z.animate),y.options.range===!0&&(y.orientation==="horizontal"?(c===0&&y.range.stop(1,1)[x?"animate":"css"]({left:w+"%"},z.animate),c===1&&y.range[x?"animate":"css"]({width:w-t+"%"},{queue:!1,duration:z.animate})):(c===0&&y.range.stop(1,1)[x?"animate":"css"]({bottom:w+"%"},z.animate),c===1&&y.range[x?"animate":"css"]({height:w-t+"%"},{queue:!1,duration:z.animate}))),t=w}):(q=this.value(),p=this._valueMin(),n=this._valueMax(),w=n!==p?(q-p)/(n-p)*100:0,v[y.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[x?"animate":"css"](v,z.animate),A==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[x?"animate":"css"]({width:w+"%"},z.animate),A==="max"&&this.orientation==="horizontal"&&this.range[x?"animate":"css"]({width:100-w+"%"},{queue:!1,duration:z.animate}),A==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[x?"animate":"css"]({height:w+"%"},z.animate),A==="max"&&this.orientation==="vertical"&&this.range[x?"animate":"css"]({height:100-w+"%"},{queue:!1,duration:z.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){function n(){return ++q}function k(){return ++p}var q=0,p=0;j.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(d,c){if(d=="selected"){if(this.options.collapsible&&c==this.options.selected){return}this.select(c)}else{this.options[d]=c,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var c=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+k());return j.cookie.apply(null,[c].concat(j.makeArray(arguments)))},_ui:function(d,c){return{tab:d,panel:c,index:this.anchors.index(d)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var c=j(this);c.html(c.data("label.tabs")).removeData("label.tabs")})},_tabify:function(F){function v(d,e){d.css("display",""),!j.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var E=this,D=this.options,C=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=j(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return j("a",this)[0]}),this.panels=j([]),this.anchors.each(function(d,J){var I=j(J).attr("href"),H=I.split("#")[0],G;H&&(H===location.toString().split("#")[0]||(G=j("base")[0])&&H===G.href)&&(I=J.hash,J.href=I);if(C.test(I)){E.panels=E.panels.add(E.element.find(E._sanitizeSelector(I)))}else{if(I&&I!=="#"){j.data(J,"href.tabs",I),j.data(J,"load.tabs",I.replace(/#.*$/,""));var f=E._tabId(J);J.href="#"+f;var e=E.element.find("#"+f);e.length||(e=j(D.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(E.panels[d-1]||E.list),e.data("destroy.tabs",!0)),E.panels=E.panels.add(e)}else{D.disabled.push(d)}}}),F?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),D.selected===h?(location.hash&&this.anchors.each(function(d,c){if(c.hash==location.hash){return D.selected=d,!1}}),typeof D.selected!="number"&&D.cookie&&(D.selected=parseInt(E._cookie(),10)),typeof D.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(D.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),D.selected=D.selected||(this.lis.length?0:-1)):D.selected===null&&(D.selected=-1),D.selected=D.selected>=0&&this.anchors[D.selected]||D.selected<0?D.selected:0,D.disabled=j.unique(D.disabled.concat(j.map(this.lis.filter(".ui-state-disabled"),function(d,c){return E.lis.index(d)}))).sort(),j.inArray(D.selected,D.disabled)!=-1&&D.disabled.splice(j.inArray(D.selected,D.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),D.selected>=0&&this.anchors.length&&(E.element.find(E._sanitizeSelector(E.anchors[D.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(D.selected).addClass("ui-tabs-selected ui-state-active"),E.element.queue("tabs",function(){E._trigger("show",null,E._ui(E.anchors[D.selected],E.element.find(E._sanitizeSelector(E.anchors[D.selected].hash))[0]))}),this.load(D.selected)),j(window).bind("unload",function(){E.lis.add(E.anchors).unbind(".tabs"),E.lis=E.anchors=E.panels=null})):D.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[D.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),D.cookie&&this._cookie(D.selected,D.cookie);for(var B=0,A;A=this.lis[B];B++){j(A)[j.inArray(B,D.disabled)!=-1&&!j(A).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}D.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(D.event!=="mouseover"){var z=function(d,c){c.is(":not(.ui-state-disabled)")&&c.addClass("ui-state-"+d)},y=function(d,c){c.removeClass("ui-state-"+d)};this.lis.bind("mouseover.tabs",function(){z("hover",j(this))}),this.lis.bind("mouseout.tabs",function(){y("hover",j(this))}),this.anchors.bind("focus.tabs",function(){z("focus",j(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){y("focus",j(this).closest("li"))})}var x,w;D.fx&&(j.isArray(D.fx)?(x=D.fx[0],w=D.fx[1]):x=w=D.fx);var t=w?function(d,e){j(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(w,w.duration||"normal",function(){v(e,w),E._trigger("show",null,E._ui(d,e[0]))})}:function(d,e){j(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),E._trigger("show",null,E._ui(d,e[0]))},b=x?function(d,c){c.animate(x,x.duration||"normal",function(){E.lis.removeClass("ui-tabs-selected ui-state-active"),c.addClass("ui-tabs-hide"),v(c,x),E.element.dequeue("tabs")})}:function(e,d,f){E.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),E.element.dequeue("tabs")};this.anchors.bind(D.event+".tabs",function(){var d=this,H=j(d).closest("li"),G=E.panels.filter(":not(.ui-tabs-hide)"),e=E.element.find(E._sanitizeSelector(d.hash));if(H.hasClass("ui-tabs-selected")&&!D.collapsible||H.hasClass("ui-state-disabled")||H.hasClass("ui-state-processing")||E.panels.filter(":animated").length||E._trigger("select",null,E._ui(this,e[0]))===!1){return this.blur(),!1}D.selected=E.anchors.index(this),E.abort();if(D.collapsible){if(H.hasClass("ui-tabs-selected")){return D.selected=-1,D.cookie&&E._cookie(D.selected,D.cookie),E.element.queue("tabs",function(){b(d,G)}).dequeue("tabs"),this.blur(),!1}if(!G.length){return D.cookie&&E._cookie(D.selected,D.cookie),E.element.queue("tabs",function(){t(d,e)}),E.load(E.anchors.index(this)),this.blur(),!1}}D.cookie&&E._cookie(D.selected,D.cookie);if(e.length){G.length&&E.element.queue("tabs",function(){b(d,G)}),E.element.queue("tabs",function(){t(d,e)}),E.load(E.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}j.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var c=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var d=j.data(this,"href.tabs");d&&(this.href=d);var e=j(this).unbind(".tabs");j.each(["href","load","cache"],function(t,f){e.removeData(f+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){j.data(this,"destroy.tabs")?j(this).remove():j(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),c.cookie&&this._cookie(null,c.cookie),this},add:function(A,z,y){y===h&&(y=this.anchors.length);var x=this,w=this.options,v=j(w.tabTemplate.replace(/#\{href\}/g,A).replace(/#\{label\}/g,z)),t=A.indexOf("#")?this._tabId(j("a",v)[0]):A.replace("#","");v.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var b=x.element.find("#"+t);return b.length||(b=j(w.panelTemplate).attr("id",t).data("destroy.tabs",!0)),b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),y>=this.lis.length?(v.appendTo(this.list),b.appendTo(this.list[0].parentNode)):(v.insertBefore(this.lis[y]),b.insertBefore(this.panels[y])),w.disabled=j.map(w.disabled,function(d,c){return d>=y?++d:d}),this._tabify(),this.anchors.length==1&&(w.selected=0,v.addClass("ui-tabs-selected ui-state-active"),b.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){x._trigger("show",null,x._ui(x.anchors[0],x.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[y],this.panels[y])),this},remove:function(f){f=this._getIndex(f);var w=this.options,v=this.lis.eq(f).remove(),t=this.panels.eq(f).remove();return v.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(f+(f+1<this.anchors.length?1:-1)),w.disabled=j.map(j.grep(w.disabled,function(b,d){return b!=f}),function(b,d){return b>=f?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(v.find("a")[0],t[0])),this},enable:function(d){d=this._getIndex(d);var e=this.options;if(j.inArray(d,e.disabled)==-1){return}return this.lis.eq(d).removeClass("ui-state-disabled"),e.disabled=j.grep(e.disabled,function(b,f){return b!=d}),this._trigger("enable",null,this._ui(this.anchors[d],this.panels[d])),this},disable:function(e){e=this._getIndex(e);var d=this,f=this.options;return e!=f.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),f.disabled.push(e),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var z=this,y=this.options,x=this.anchors.eq(t)[0],w=j.data(x,"load.tabs");this.abort();if(!w||this.element.queue("tabs").length!==0&&j.data(x,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(y.spinner){var v=j("span",x);v.data("label.tabs",v.html()).html(y.spinner)}return this.xhr=j.ajax(j.extend({},y.ajaxOptions,{url:w,success:function(d,c){z.element.find(z._sanitizeSelector(x.hash)).html(d),z._cleanup(),y.cache&&j.data(x,"cache.tabs",!0),z._trigger("load",null,z._ui(z.anchors[t],z.panels[t]));try{y.ajaxOptions.success(d,c)}catch(b){}},error:function(b,d,c){z._cleanup(),z._trigger("load",null,z._ui(z.anchors[t],z.panels[t]));try{y.ajaxOptions.error(b,d,t,x)}catch(c){}}})),z.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(d,c){return this.anchors.eq(d).removeData("cache.tabs").data("load.tabs",c),this},length:function(){return this.anchors.length}}),j.extend(j.ui.tabs,{version:"1.8.21"}),j.extend(j.ui.tabs.prototype,{rotation:null,rotate:function(v,t){var z=this,y=this.options,x=z._rotate||(z._rotate=function(c){clearTimeout(z.rotation),z.rotation=setTimeout(function(){var b=y.selected;z.select(++b<z.anchors.length?b:0)},v),c&&c.stopPropagation()}),w=z._unrotate||(z._unrotate=t?function(b){x()}:function(b){b.clientX&&z.rotate(null)});return v?(this.element.bind("tabsshow",x),this.anchors.bind(y.event+".tabs",w),x()):(clearTimeout(z.rotation),this.element.unbind("tabsshow",x),this.anchors.unbind(y.event+".tabs",w),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=d("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),d.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===c?this._value():(this._setOption("value",b),this)},_setOption:function(e,f){e==="value"&&(this.options.value=f,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),d.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var f=this.value(),e=this._percentage();this.oldValue!==f&&(this.oldValue=f,this._trigger("change")),this.valueDiv.toggle(f>this.min).toggleClass("ui-corner-right",f===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",f)}}),d.extend(d.ui.progressbar,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(C,B){function A(d){var e;return d&&d.constructor==Array&&d.length==3?d:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d))?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(d))?[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:(e=/rgba\(0, 0, 0, 0\)/.exec(d))?y.transparent:y[C.trim(d).toLowerCase()]}function z(c,h){var f;do{f=C.curCSS(c,h);if(f!=""&&f!="transparent"||C.nodeName(c,"body")){break}h="backgroundColor"}while(c=c.parentNode);return A(f)}function v(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},D,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){D=h[j],typeof h[D]=="string"&&(k=D.replace(/\-(\w)/g,function(d,c){return c.toUpperCase()}),f[k]=h[D])}}else{for(D in h){typeof h[D]=="string"&&(f[D]=h[D])}}return f}function t(e){var h,f;for(h in e){f=e[h],(f==null||C.isFunction(f)||h in w||/scrollbar/.test(h)||!/color/i.test(h)&&isNaN(parseFloat(f)))&&delete e[h]}return e}function q(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function p(f,k,j,h){typeof f=="object"&&(h=k,j=null,k=f,f=k.effect),C.isFunction(k)&&(h=k,j=null,k={});if(typeof k=="number"||C.fx.speeds[k]){h=j,j=k,k={}}return C.isFunction(j)&&(h=j,j=null),k=k||{},j=j||k.duration,j=C.fx.off?0:typeof j=="number"?j:j in C.fx.speeds?C.fx.speeds[j]:C.fx.speeds._default,h=h||k.complete,[f,k,j,h]}function n(c){return !c||typeof c=="number"||C.fx.speeds[c]?!0:typeof c=="string"&&!C.effects[c]?!0:!1}C.effects={},C.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(c,d){C.fx.step[d]=function(b){b.colorInit||(b.start=z(b.elem,d),b.end=A(b.end),b.colorInit=!0),b.elem.style[d]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var y={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},x=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};C.effects.animateClass=function(f,k,j,h){return C.isFunction(j)&&(h=j,j=null),this.queue(function(){var e=C(this),d=e.attr("style")||" ",c=t(v.call(this)),b,D=e.attr("class")||"";C.each(x,function(E,F){f[F]&&e[F+"Class"](f[F])}),b=t(v.call(this)),e.attr("class",D),e.animate(q(c,b),{queue:!1,duration:k,easing:j,complete:function(){C.each(x,function(E,F){f[F]&&e[F+"Class"](f[F])}),typeof e.attr("style")=="object"?(e.attr("style").cssText="",e.attr("style").cssText=d):e.attr("style",d),h&&h.apply(this,arguments),C.dequeue(this)}})})},C.fn.extend({_addClass:C.fn.addClass,addClass:function(f,k,j,h){return k?C.effects.animateClass.apply(this,[{add:f},k,j,h]):this._addClass(f)},_removeClass:C.fn.removeClass,removeClass:function(f,k,j,h){return k?C.effects.animateClass.apply(this,[{remove:f},k,j,h]):this._removeClass(f)},_toggleClass:C.fn.toggleClass,toggleClass:function(D,k,j,h,b){return typeof k=="boolean"||k===B?j?C.effects.animateClass.apply(this,[k?{add:D}:{remove:D},j,h,b]):this._toggleClass(D,k):C.effects.animateClass.apply(this,[{toggle:D},k,j,h])},switchClass:function(h,E,D,k,j){return C.effects.animateClass.apply(this,[{add:E,remove:h},D,k,j])}}),C.extend(C.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(d,c){return c=="toggle"&&(c=d.is(":hidden")?"show":"hide"),c},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var E={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},D=C("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k=document.activeElement;try{k.id}catch(j){k=document.body}return h.wrap(D),(h[0]===k||C.contains(h[0],k))&&C(k).focus(),D=h.parent(),h.css("position")=="static"?(D.css({position:"relative"}),h.css({position:"relative"})):(C.extend(E,{position:h.css("position"),zIndex:h.css("z-index")}),C.each(["top","left","bottom","right"],function(b,c){E[c]=h.css(c),isNaN(parseInt(E[c],10))&&(E[c]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),D.css(E).show()},removeWrapper:function(e){var h,f=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(h=e.parent().replaceWith(e),(e[0]===f||C.contains(e[0],f))&&C(f).focus(),h):e},setTransition:function(f,k,j,h){return h=h||{},C.each(k,function(b,e){var d=f.cssUnit(e);d[0]>0&&(h[e]=d[0]*j+d[1])}),h}}),C.fn.extend({effect:function(j,I,H,G){var F=p.apply(this,arguments),E={options:F[1],duration:F[2],callback:F[3]},D=E.options.mode,k=C.effects[j];return C.fx.off||!k?D?this[D](E.duration,E.callback):this.each(function(){E.callback&&E.callback.call(this)}):k.call(this,E)},_show:C.fn.show,show:function(d){if(n(d)){return this._show.apply(this,arguments)}var c=p.apply(this,arguments);return c[1].mode="show",this.effect.apply(this,c)},_hide:C.fn.hide,hide:function(d){if(n(d)){return this._hide.apply(this,arguments)}var c=p.apply(this,arguments);return c[1].mode="hide",this.effect.apply(this,c)},__toggle:C.fn.toggle,toggle:function(d){if(n(d)||typeof d=="boolean"||C.isFunction(d)){return this.__toggle.apply(this,arguments)}var e=p.apply(this,arguments);return e[1].mode="toggle",this.effect.apply(this,e)},cssUnit:function(e){var h=this.css(e),f=[];return C.each(["em","px","%","pt"],function(d,c){h.indexOf(c)>0&&(f=[parseFloat(h),c])}),f}}),C.easing.jswing=C.easing.swing,C.extend(C.easing,{def:"easeOutQuad",swing:function(h,E,D,k,j){return C.easing[C.easing.def](h,E,D,k,j)},easeInQuad:function(h,f,D,k,j){return k*(f/=j)*f+D},easeOutQuad:function(h,f,D,k,j){return -k*(f/=j)*(f-2)+D},easeInOutQuad:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f+D:-k/2*(--f*(f-2)-1)+D},easeInCubic:function(h,f,D,k,j){return k*(f/=j)*f*f+D},easeOutCubic:function(h,f,D,k,j){return k*((f=f/j-1)*f*f+1)+D},easeInOutCubic:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f+D:k/2*((f-=2)*f*f+2)+D},easeInQuart:function(h,f,D,k,j){return k*(f/=j)*f*f*f+D},easeOutQuart:function(h,f,D,k,j){return -k*((f=f/j-1)*f*f*f-1)+D},easeInOutQuart:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f*f+D:-k/2*((f-=2)*f*f*f-2)+D},easeInQuint:function(h,f,D,k,j){return k*(f/=j)*f*f*f*f+D},easeOutQuint:function(h,f,D,k,j){return k*((f=f/j-1)*f*f*f*f+1)+D},easeInOutQuint:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+D:k/2*((f-=2)*f*f*f*f+2)+D},easeInSine:function(h,f,D,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+D},easeOutSine:function(h,f,D,k,j){return k*Math.sin(f/j*(Math.PI/2))+D},easeInOutSine:function(h,f,D,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+D},easeInExpo:function(h,f,D,k,j){return f==0?D:k*Math.pow(2,10*(f/j-1))+D},easeOutExpo:function(h,f,D,k,j){return f==j?D+k:k*(-Math.pow(2,-10*f/j)+1)+D},easeInOutExpo:function(h,f,D,k,j){return f==0?D:f==j?D+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+D:k/2*(-Math.pow(2,-10*--f)+2)+D},easeInCirc:function(h,f,D,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+D},easeOutCirc:function(h,f,D,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+D},easeInOutCirc:function(h,f,D,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+D:k/2*(Math.sqrt(1-(f-=2)*f)+1)+D},easeInElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G)==1){return I+H}E||(E=G*0.3);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return -(D*Math.pow(2,10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E))+I},easeOutElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G)==1){return I+H}E||(E=G*0.3);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return D*Math.pow(2,-10*j)*Math.sin((j*G-F)*2*Math.PI/E)+H+I},easeInOutElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G/2)==2){return I+H}E||(E=G*0.3*1.5);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return j<1?-0.5*D*Math.pow(2,10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E)+I:D*Math.pow(2,-10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E)*0.5+H+I},easeInBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),k*(E/=j)*E*((h+1)*E-h)+D},easeOutBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),k*((E=E/j-1)*E*((h+1)*E+h)+1)+D},easeInOutBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),(E/=j/2)<1?k/2*E*E*(((h*=1.525)+1)*E-h)+D:k/2*((E-=2)*E*(((h*=1.525)+1)*E+h)+2)+D},easeInBounce:function(h,E,D,k,j){return k-C.easing.easeOutBounce(h,j-E,0,k,j)+D},easeOutBounce:function(h,f,D,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+D:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+D:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+D:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+D},easeInOutBounce:function(h,E,D,k,j){return E<j/2?C.easing.easeInBounce(h,E*2,0,k,j)*0.5+D:C.easing.easeOutBounce(h,E*2-j,0,k,j)*0.5+k*0.5+D}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.blind=function(e){return this.queue(function(){var w=d(this),v=["position","top","bottom","left","right"],t=d.effects.setMode(w,e.options.mode||"hide"),q=e.options.direction||"vertical";d.effects.save(w,v),w.show();var p=d.effects.createWrapper(w).css({overflow:"hidden"}),n=q=="vertical"?"height":"width",k=q=="vertical"?p.height():p.width();t=="show"&&p.css(n,0);var b={};b[n]=t=="show"?k:0,p.animate(b,e.duration,e.options.easing,function(){t=="hide"&&w.hide(),d.effects.restore(w,v),d.effects.removeWrapper(w),e.callback&&e.callback.apply(w[0],arguments),w.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.bounce=function(e){return this.queue(function(){var E=d(this),D=["position","top","bottom","left","right"],C=d.effects.setMode(E,e.options.mode||"effect"),B=e.options.direction||"up",A=e.options.distance||20,z=e.options.times||5,y=e.duration||250;/show|hide/.test(C)&&D.push("opacity"),d.effects.save(E,D),E.show(),d.effects.createWrapper(E);var x=B=="up"||B=="down"?"top":"left",w=B=="up"||B=="left"?"pos":"neg",A=e.options.distance||(x=="top"?E.outerHeight({margin:!0})/3:E.outerWidth({margin:!0})/3);C=="show"&&E.css("opacity",0).css(x,w=="pos"?-A:A),C=="hide"&&(A=A/(z*2)),C!="hide"&&z--;if(C=="show"){var v={opacity:1};v[x]=(w=="pos"?"+=":"-=")+A,E.animate(v,y/2,e.options.easing),A=A/2,z--}for(var t=0;t<z;t++){var q={},b={};q[x]=(w=="pos"?"-=":"+=")+A,b[x]=(w=="pos"?"+=":"-=")+A,E.animate(q,y/2,e.options.easing).animate(b,y/2,e.options.easing),A=C=="hide"?A*2:A/2}if(C=="hide"){var v={opacity:0};v[x]=(w=="pos"?"-=":"+=")+A,E.animate(v,y/2,e.options.easing,function(){E.hide(),d.effects.restore(E,D),d.effects.removeWrapper(E),e.callback&&e.callback.apply(this,arguments)})}else{var q={},b={};q[x]=(w=="pos"?"-=":"+=")+A,b[x]=(w=="pos"?"+=":"-=")+A,E.animate(q,y/2,e.options.easing).animate(b,y/2,e.options.easing,function(){d.effects.restore(E,D),d.effects.removeWrapper(E),e.callback&&e.callback.apply(this,arguments)})}E.queue("fx",function(){E.dequeue()}),E.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.clip=function(e){return this.queue(function(){var y=d(this),x=["position","top","bottom","left","right","height","width"],w=d.effects.setMode(y,e.options.mode||"hide"),v=e.options.direction||"vertical";d.effects.save(y,x),y.show();var t=d.effects.createWrapper(y).css({overflow:"hidden"}),q=y[0].tagName=="IMG"?t:y,p={size:v=="vertical"?"height":"width",position:v=="vertical"?"top":"left"},n=v=="vertical"?q.height():q.width();w=="show"&&(q.css(p.size,0),q.css(p.position,n/2));var b={};b[p.size]=w=="show"?n:0,b[p.position]=w=="show"?0:n/2,q.animate(b,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){w=="hide"&&y.hide(),d.effects.restore(y,x),d.effects.removeWrapper(y),e.callback&&e.callback.apply(y[0],arguments),y.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.drop=function(e){return this.queue(function(){var w=d(this),v=["position","top","bottom","left","right","opacity"],t=d.effects.setMode(w,e.options.mode||"hide"),q=e.options.direction||"left";d.effects.save(w,v),w.show(),d.effects.createWrapper(w);var p=q=="up"||q=="down"?"top":"left",n=q=="up"||q=="left"?"pos":"neg",k=e.options.distance||(p=="top"?w.outerHeight({margin:!0})/2:w.outerWidth({margin:!0})/2);t=="show"&&w.css("opacity",0).css(p,n=="pos"?-k:k);var b={opacity:t=="show"?1:0};b[p]=(t=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,w.animate(b,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){t=="hide"&&w.hide(),d.effects.restore(w,v),d.effects.removeWrapper(w),e.callback&&e.callback.apply(this,arguments),w.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.explode=function(e){return this.queue(function(){var w=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3,v=e.options.pieces?Math.round(Math.sqrt(e.options.pieces)):3;e.options.mode=e.options.mode=="toggle"?d(this).is(":visible")?"hide":"show":e.options.mode;var t=d(this).show().css("visibility","hidden"),q=t.offset();q.top-=parseInt(t.css("marginTop"),10)||0,q.left-=parseInt(t.css("marginLeft"),10)||0;var p=t.outerWidth(!0),n=t.outerHeight(!0);for(var k=0;k<w;k++){for(var b=0;b<v;b++){t.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(p/v),top:-k*(n/w)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p/v,height:n/w,left:q.left+b*(p/v)+(e.options.mode=="show"?(b-Math.floor(v/2))*(p/v):0),top:q.top+k*(n/w)+(e.options.mode=="show"?(k-Math.floor(w/2))*(n/w):0),opacity:e.options.mode=="show"?0:1}).animate({left:q.left+b*(p/v)+(e.options.mode=="show"?0:(b-Math.floor(v/2))*(p/v)),top:q.top+k*(n/w)+(e.options.mode=="show"?0:(k-Math.floor(w/2))*(n/w)),opacity:e.options.mode=="show"?1:0},e.duration||500)}}setTimeout(function(){e.options.mode=="show"?t.css({visibility:"visible"}):t.css({visibility:"visible"}).hide(),e.callback&&e.callback.apply(t[0]),t.dequeue(),d("div.ui-effects-explode").remove()},e.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fade=function(e){return this.queue(function(){var f=d(this),b=d.effects.setMode(f,e.options.mode||"hide");f.animate({opacity:b},{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){e.callback&&e.callback.apply(this,arguments),f.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.fold=function(e){return this.queue(function(){var E=d(this),D=["position","top","bottom","left","right"],C=d.effects.setMode(E,e.options.mode||"hide"),B=e.options.size||15,A=!!e.options.horizFirst,z=e.duration?e.duration/2:d.fx.speeds._default/2;d.effects.save(E,D),E.show();var y=d.effects.createWrapper(E).css({overflow:"hidden"}),x=C=="show"!=A,w=x?["width","height"]:["height","width"],v=x?[y.width(),y.height()]:[y.height(),y.width()],t=/([0-9]+)%/.exec(B);t&&(B=parseInt(t[1],10)/100*v[C=="hide"?0:1]),C=="show"&&y.css(A?{height:0,width:B}:{height:B,width:0});var q={},b={};q[w[0]]=C=="show"?v[0]:B,b[w[1]]=C=="show"?v[1]:0,y.animate(q,z,e.options.easing).animate(b,z,e.options.easing,function(){C=="hide"&&E.hide(),d.effects.restore(E,D),d.effects.removeWrapper(E),e.callback&&e.callback.apply(E[0],arguments),E.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.highlight=function(e){return this.queue(function(){var k=d(this),j=["backgroundImage","backgroundColor","opacity"],h=d.effects.setMode(k,e.options.mode||"show"),b={backgroundColor:k.css("backgroundColor")};h=="hide"&&(b.opacity=0),d.effects.save(k,j),k.show().css({backgroundImage:"none",backgroundColor:e.options.color||"#ffff99"}).animate(b,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){h=="hide"&&k.hide(),d.effects.restore(k,j),h=="show"&&!d.support.opacity&&this.style.removeAttribute("filter"),e.callback&&e.callback.apply(this,arguments),k.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.pulsate=function(e){return this.queue(function(){var t=d(this),q=d.effects.setMode(t,e.options.mode||"show"),p=(e.options.times||5)*2-1,n=e.duration?e.duration/2:d.fx.speeds._default/2,k=t.is(":visible"),j=0;k||(t.css("opacity",0).show(),j=1),(q=="hide"&&k||q=="show"&&!k)&&p--;for(var b=0;b<p;b++){t.animate({opacity:j},n,e.options.easing),j=(j+1)%2}t.animate({opacity:j},n,e.options.easing,function(){j==0&&t.hide(),e.callback&&e.callback.apply(this,arguments)}),t.queue("fx",function(){t.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.puff=function(e){return this.queue(function(){var n=d(this),k=d.effects.setMode(n,e.options.mode||"hide"),j=parseInt(e.options.percent,10)||150,h=j/100,b={height:n.height(),width:n.width()};d.extend(e.options,{fade:!0,mode:k,percent:k=="hide"?j:100,from:k=="hide"?b:{height:b.height*h,width:b.width*h}}),n.effect("scale",e.options,e.duration,e.callback),n.dequeue()})},d.effects.scale=function(e){return this.queue(function(){var w=d(this),v=d.extend(!0,{},e.options),t=d.effects.setMode(w,e.options.mode||"effect"),q=parseInt(e.options.percent,10)||(parseInt(e.options.percent,10)==0?0:t=="hide"?0:100),p=e.options.direction||"both",n=e.options.origin;t!="effect"&&(v.origin=n||["middle","center"],v.restore=!0);var k={height:w.height(),width:w.width()};w.from=e.options.from||(t=="show"?{height:0,width:0}:k);var b={y:p!="horizontal"?q/100:1,x:p!="vertical"?q/100:1};w.to={height:k.height*b.y,width:k.width*b.x},e.options.fade&&(t=="show"&&(w.from.opacity=0,w.to.opacity=1),t=="hide"&&(w.from.opacity=1,w.to.opacity=0)),v.from=w.from,v.to=w.to,v.mode=t,w.effect("size",v,e.duration,e.callback),w.dequeue()})},d.effects.size=function(e){return this.queue(function(){var G=d(this),F=["position","top","bottom","left","right","width","height","overflow","opacity"],E=["position","top","bottom","left","right","overflow","opacity"],D=["width","height","overflow"],C=["fontSize"],B=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],z=d.effects.setMode(G,e.options.mode||"effect"),y=e.options.restore||!1,x=e.options.scale||"both",w=e.options.origin,v={height:G.height(),width:G.width()};G.from=e.options.from||v,G.to=e.options.to||v;if(w){var t=d.effects.getBaseline(w,v);G.from.top=(v.height-G.from.height)*t.y,G.from.left=(v.width-G.from.width)*t.x,G.to.top=(v.height-G.to.height)*t.y,G.to.left=(v.width-G.to.width)*t.x}var b={from:{y:G.from.height/v.height,x:G.from.width/v.width},to:{y:G.to.height/v.height,x:G.to.width/v.width}};if(x=="box"||x=="both"){b.from.y!=b.to.y&&(F=F.concat(B),G.from=d.effects.setTransition(G,B,b.from.y,G.from),G.to=d.effects.setTransition(G,B,b.to.y,G.to)),b.from.x!=b.to.x&&(F=F.concat(A),G.from=d.effects.setTransition(G,A,b.from.x,G.from),G.to=d.effects.setTransition(G,A,b.to.x,G.to))}(x=="content"||x=="both")&&b.from.y!=b.to.y&&(F=F.concat(C),G.from=d.effects.setTransition(G,C,b.from.y,G.from),G.to=d.effects.setTransition(G,C,b.to.y,G.to)),d.effects.save(G,y?F:E),G.show(),d.effects.createWrapper(G),G.css("overflow","hidden").css(G.from);if(x=="content"||x=="both"){B=B.concat(["marginTop","marginBottom"]).concat(C),A=A.concat(["marginLeft","marginRight"]),D=F.concat(B).concat(A),G.find("*[width]").each(function(){var h=d(this);y&&d.effects.save(h,D);var f={height:h.height(),width:h.width()};h.from={height:f.height*b.from.y,width:f.width*b.from.x},h.to={height:f.height*b.to.y,width:f.width*b.to.x},b.from.y!=b.to.y&&(h.from=d.effects.setTransition(h,B,b.from.y,h.from),h.to=d.effects.setTransition(h,B,b.to.y,h.to)),b.from.x!=b.to.x&&(h.from=d.effects.setTransition(h,A,b.from.x,h.from),h.to=d.effects.setTransition(h,A,b.to.x,h.to)),h.css(h.from),h.animate(h.to,e.duration,e.options.easing,function(){y&&d.effects.restore(h,D)})})}G.animate(G.to,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){G.to.opacity===0&&G.css("opacity",G.from.opacity),z=="hide"&&G.hide(),d.effects.restore(G,y?F:E),d.effects.removeWrapper(G),e.callback&&e.callback.apply(this,arguments),G.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.shake=function(e){return this.queue(function(){var E=d(this),D=["position","top","bottom","left","right"],C=d.effects.setMode(E,e.options.mode||"effect"),B=e.options.direction||"left",A=e.options.distance||20,z=e.options.times||3,y=e.duration||e.options.duration||140;d.effects.save(E,D),E.show(),d.effects.createWrapper(E);var x=B=="up"||B=="down"?"top":"left",w=B=="up"||B=="left"?"pos":"neg",v={},t={},q={};v[x]=(w=="pos"?"-=":"+=")+A,t[x]=(w=="pos"?"+=":"-=")+A*2,q[x]=(w=="pos"?"-=":"+=")+A*2,E.animate(v,y,e.options.easing);for(var b=1;b<z;b++){E.animate(t,y,e.options.easing).animate(q,y,e.options.easing)}E.animate(t,y,e.options.easing).animate(v,y/2,e.options.easing,function(){d.effects.restore(E,D),d.effects.removeWrapper(E),e.callback&&e.callback.apply(this,arguments)}),E.queue("fx",function(){E.dequeue()}),E.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.slide=function(e){return this.queue(function(){var w=d(this),v=["position","top","bottom","left","right"],t=d.effects.setMode(w,e.options.mode||"show"),q=e.options.direction||"left";d.effects.save(w,v),w.show(),d.effects.createWrapper(w).css({overflow:"hidden"});var p=q=="up"||q=="down"?"top":"left",n=q=="up"||q=="left"?"pos":"neg",k=e.options.distance||(p=="top"?w.outerHeight({margin:!0}):w.outerWidth({margin:!0}));t=="show"&&w.css(p,n=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[p]=(t=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,w.animate(b,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){t=="hide"&&w.hide(),d.effects.restore(w,v),d.effects.removeWrapper(w),e.callback&&e.callback.apply(this,arguments),w.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(d,c){d.effects.transfer=function(e){return this.queue(function(){var q=d(this),p=d(e.options.to),n=p.offset(),k={top:n.top,left:n.left,height:p.innerHeight(),width:p.innerWidth()},j=q.offset(),b=d('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.options.className).css({top:j.top,left:j.left,height:q.innerHeight(),width:q.innerWidth(),position:"absolute"}).animate(k,e.duration,e.options.easing,function(){b.remove(),e.callback&&e.callback.apply(q[0],arguments),q.dequeue()})})}})(jQuery);(function(d,c){if(d.ui&&d.ui.dialog){d.ui.dialog.overlay.events=d.map("focus,keydown,keypress".split(","),function(b){return b+".dialog-overlay"}).join(" ")}}(jQuery));(function(d){var c=d.ui.dialog.prototype._createButtons;var b=d.ui.dialog.prototype._setData;d.ui.dialog.prototype._createButtons=function(f){var e=this;c.apply(this,[f]);if(typeof(this.options.percButtons)!="undefined"&&this.options.percButtons!=null){e._createPercButtons(this.options.percButtons)}};d.ui.dialog.prototype._setData=function(f,h){var e=this;if(f=="perc-buttons"){e._createPercButtons(h)}b.apply(this,[f,h])};d.ui.dialog.prototype._createPercButtons=function(h){var f=this;var e=false;var k=window.location.protocol+"//"+window.location.host+"/cm";uiDialogButtonPane=d("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");var j={Ok:{bgimage:"url("+k+"/images/images/buttonOk.png)",bgimageOver:"url("+k+"/images/images/buttonOkOver.png)",width:"78px",height:"29px",cls:"perc-ok",display:"block"},Override:{bgimage:"url("+k+"/images/images/buttonOverride.png)",bgimageOver:"url("+k+"/images/images/buttonOverrideOver.png)",width:"126px",height:"29px",cls:"perc-ok",display:"block"},Move:{bgimage:"url("+k+"/images/images/buttonMove.png)",bgimageOver:"url("+k+"/images/images/buttonMoveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Select:{bgimage:"url("+k+"/images/images/buttonSelect.png)",bgimageOver:"url("+k+"/images/images/buttonSelectOver.png)",width:"100px",height:"29px",cls:"perc-save",display:"block"},Yes:{bgimage:"url("+k+"/images/images/buttonYes.png)",bgimageOver:"url("+k+"/images/images/buttonYesOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Preferred":{bgimage:"url("+k+"/images/images/ButtonYesBlue.png)",bgimageOver:"url("+k+"/images/images/ButtonYesBlueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Silver":{bgimage:"url("+k+"/images/images/buttonYesNoFocus.png)",bgimageOver:"url("+k+"/images/images/buttonYesOverNoFocus.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Continue:{bgimage:"url("+k+"/images/images/buttonContinue.png)",bgimageOver:"url("+k+"/images/images/buttonContinueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Continue Preferred":{bgimage:"url("+k+"/images/images/buttonContinueBlue.png)",bgimageOver:"url("+k+"/images/images/buttonContinueBlueOver.png)",width:"126px",height:"29px",cls:"perc-save",display:"block"},"New Folder":{bgimage:"url("+k+"/images/images/buttonSave.gif)",bgimageOver:"url("+k+"/images/images/buttonSaveOver.gif)",width:"auto",height:"22px",cls:"perc-save",display:"block"},Save:{bgimage:"url("+k+"/images/images/buttonSave.png)",bgimageOver:"url("+k+"/images/images/buttonSaveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Don't Save":{bgimage:"url("+k+"/images/images/buttonDontSave.png)",bgimageOver:"url("+k+"/images/images/buttonDontSaveOver.png)",width:"88px",height:"29px",cls:"perc-dont-save",display:"block"},Cancel:{bgimage:"url("+k+"/images/images/buttonCancel.gif)",bgimageOver:"url("+k+"/images/images/buttonCancelOver.gif)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"Cancel Blue":{bgimage:"url("+k+"/images/images/buttonCancelBlue.png)",bgimageOver:"url("+k+"/images/images/buttonCancelBlueOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},No:{bgimage:"url("+k+"/images/images/buttonNo.png)",bgimageOver:"url("+k+"/images/images/buttonNoOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"No Silver":{bgimage:"url("+k+"/images/images/ButtonNoSilver.png)",bgimageOver:"url("+k+"/images/images/ButtonNoSilverOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},Next:{bgimage:"url("+k+"/images/images/buttonNext.png)",bgimageOver:"url("+k+"/images/images/buttonNextOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Back:{bgimage:"url("+k+"/images/images/buttonBack.gif)",bgimageOver:"url("+k+"/images/images/buttonBack.gif)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Finish:{bgimage:"url("+k+"/images/images/buttonFinish.png)",bgimageOver:"url("+k+"/images/images/buttonFinishOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Close:{bgimage:"url("+k+"/images/images/buttonClose.png)",bgimageOver:"url("+k+"/images/images/buttonCloseOver.png)",width:"78px",height:"29px",cls:"perc-close",display:"block"},"Close Normal":{bgimage:"url("+k+"/images/images/buttonCloseNormal.png)",bgimageOver:"url("+k+"/images/images/buttonCloseNormalOver.png)",width:"78px",height:"29px",cls:"perc-close-normal",display:"block"},Done:{bgimage:"url("+k+"/images/images/buttonDone.png)",bgimageOver:"url("+k+"/images/images/buttonDoneOver.png)",width:"78px",height:"29px",cls:"perc-done",display:"block"},"Done Disabled":{bgimage:"url("+k+"/images/images/buttonDoneDisabled.png)",width:"78px",height:"29px",cls:"perc-done-disabled",display:"block"},Import:{bgimage:"url("+k+"/images/images/buttonImport.png)",bgimageOver:"url("+k+"/images/images/buttonImportOver.png)",width:"78px",height:"29px",cls:"perc-import",display:"block"},Activate:{bgimage:"url("+k+"/images/images/perc-lmg-activate-sprites.png)",bgimageOver:"url("+k+"/images/images/perc-lmg-activate-sprites.png)",width:"78px",height:"29px",cls:"perc-activate",display:"block"},Start:{bgimage:"url("+k+"/images/images/buttonStart.png)",bgimageOver:"url("+k+"/images/images/buttonStartOver.png)",width:"78px",height:"29px",cls:"perc-start",display:"block"},Search:{bgimage:"url("+k+"/images/images/blueButtonSearch.png)",bgimageOver:"url("+k+"/images/images/blueButtonSearchOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Submit:{bgimage:"url("+k+"/images/images/buttonWfsubmit.png)",bgimageOver:"url("+k+"/images/images/buttonWfsubmitOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Approve:{bgimage:"url("+k+"/images/images/buttonWfapprove.png)",bgimageOver:"url("+k+"/images/images/buttonWfapproveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"},Reject:{bgimage:"url("+k+"/images/images/buttonWfreject.png)",bgimageOver:"url("+k+"/images/images/buttonWfrejectOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Resubmit:{bgimage:"url("+k+"/images/images/buttonWfresubmit.png)",bgimageOver:"url("+k+"/images/images/buttonWfresubmitOver.png)",width:"126px",height:"29px",cls:"perc-search",display:"block"},Archive:{bgimage:"url("+k+"/images/images/buttonWfarchive.png)",bgimageOver:"url("+k+"/images/images/buttonWfarchiveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"}};this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof h=="object"&&h!==null&&d.each(h,function(){return !(e=true)}));if(e){d.each(h,function(n,p){d("<div></div>").attr("id",p.id).css("background-image",j[n].bgimage).css("display",j[n].display).css("float","right").css("height",j[n].height).css("width",j[n].width).addClass(j[n].cls).addClass(p.cls).click(function(){p.click.apply(f.element[0],arguments)}).hover(function(){d(this).css("background-image",j[n].bgimageOver)},function(){d(this).css("background-image",j[n].bgimage)}).focus(function(){d(this).addClass("ui-state-focus")}).blur(function(){d(this).removeClass("ui-state-focus")}).appendTo(uiDialogButtonPane)});uiDialogButtonPane.appendTo(this.uiDialog)}}})(jQuery);(function(S){S.globalEventIds={"#perc_head #perc-links":"#perc_head #perc_topnav"};document.onclick=function(){S.each(S.globalEventIds,function(at,ar){if(S(at).hasClass("perc-visible")){S(ar).click()}})};S.ajaxSetup({cache:false});S.Percussion=S.Percussion||{};S.perc_fakes={path_service:false,page_service:{create_page:false,render_page:false,new_asset:false,get_widget_ctypes:false},template_service:{get_template_css:false,set_template_css:false}};S.perc_utils={id:W,acop:an,acat:G,odiff:p,a_o:Q,o_a:j,elem:af,show_error:Y,alert_dialog:t,prompt_dialog:am,confirm_dialog:ag,choose_icon:H,path_id:ao,input:c,handleLinks:f,handleObjects:O,select:ac,extract_path:ap,extract_path_end:ab,click_and_double_click:aj,unxml:M,rexml:U,arem:J,deep_get:C,debug:F,info:ak,error:L,isBlankString:Z,convertCXFArray:ai,encodeURL:ah,preLoadImages:I,replaceURLWithHTMLLinks:q,sortCaseInsensitive:E,formatTimeFromDate:x,copyRegionObject:copyRegionObject,max:D,min:al,addArrays:R,newArray:n,splitDateTime:ad,addAutoScroll:N,removeAutoScroll:z,formatFileSize:V,parseUTCintoDate:aq,getDisplayFormat:b,makeFolderEditable:y,contains:P,encodePathArray:A,isPathUnderDesign:aa,percParseInt:e,logToServer:h};function e(au){var ar=null;if(au){try{ar=parseInt(au,10)}catch(at){}}return ar}function b(au){if(typeof au!=="string"){return""}var ar=au.split("/");var at="";while(ar.length>0){at=S.perc_displayformats[ar.join("/")];if(at!=undefined){return at}ar.pop()}return""}function h(ar,au,at){if(!(S.type(ar)==="string")){return}if(ar==="debug"){F(at)}else{if(ar==="error"){L(at)}else{ak(at)}}S.PercUtilService.logToServer(ar,au,at)}function aq(au){var ar=au.replace(/(\d\d)-(\d\d)-(\d\d)/,"$1/$2/$3").replace(/([+-]\d\d):(\d\d)/,"$1$2").replace(/\.\d\d\d/,"").replace("T"," ");var at=new Date(ar);return at}function ad(at,ar){var av=new Date(at);if(typeof(av)=="undefined"||isNaN(av)){av=aq(at)}if(!ar){ar="M d, yy"}var au=S.datepicker.formatDate(ar,av);var aw=x(av);return{date:au,time:aw}}function ai(ar){if(typeof(ar)=="undefined"){return[]}if(!S.isArray(ar)){return[ar]}return ar}function Z(ar){return !ar||ar==null||typeof ar!="string"||S.trim(ar).length<1}function af(au,at){var ar=S.grep(at,function(av){return av==au});return ar.length>0}function ac(at,ar,au){return"<label for='"+au+"'>"+at+"</label><br/><select name='"+ar+"' id='"+au+"' ></select><br/>"}function c(at,ar,aw,av,au){au=au||"text";return"<label for='"+aw+"'>"+at+"</label><br/><input type='"+au+"' name='"+ar+"' id='"+aw+"' ></input><br/>"}function ap(at){var ar=at.split("/");if(ar.length>1&&ar[ar.length-1]==""){ar.pop()}return ar}function ao(ar){return S.map(ar,function(at){return at}).join("-")}S.fn.perc_dialog=function(at){at.dialogClass="perc-dialog perc-dialog-corner-all";at.zIndex=9500;var au=S(this).dialog(at);var ar=au.closest(".ui-dialog");if(at.id){ar.attr("id",at.id)}S(window).trigger("resize").trigger("resize");return au};function T(ar,at){var au=S("<div/>").addClass("perc-show-again").append(S("<input/>").attr("type","checkBox").attr("id","perc_show_again_check")).append(S("<label/>").attr("for","perc_show_again_check").text("Do not show again"));S(this).parent().find(".ui-dialog-buttonpane").append(au)}function d(au){var at=S.PercNavigationManager.getUserName();var av="dontShowAgain-"+at+"-"+au;var ar=S.cookie(av);return ar=="true"}function v(au,av){var ax=S(this).parent().find("#perc_show_again_check").is(":checked");if(ax){var ar=S.PercNavigationManager.getUserName();var at=S(this).parent().attr("id");var aw="dontShowAgain-"+ar+"-"+at;S.cookie(aw,"true")}}function ag(au){var aw={title:"Please Confirm",question:"Do you really want to do this ?",type:"OK_CANCEL",cancel:function(){},success:function(){},showAgainCheck:false,dontShowAgainAction:null};function at(){aw.success();av.dialog("close");av.remove()}function ay(){aw.cancel();av.dialog("close");av.remove()}S.extend(aw,au);var ax={};if(aw.type=="YES_NO"){ax={Yes:{click:at,id:"perc-confirm-generic-yes"},No:{click:ay,id:"perc-confirm-generic-no"}}}else{if(aw.type=="YES_PREFERRED_NO"){ax={"Yes Preferred":{click:at,id:"perc-confirm-generic-yes"},"No Silver":{click:ay,id:"perc-confirm-generic-no"}}}else{if(aw.type=="YES_NO_PREFERRED"){ax={"Yes Silver":{click:function(){aw.success();av.remove()},id:"perc-confirm-generic-yes"},No:{click:function(){aw.cancel();av.remove()},id:"perc-confirm-generic-no"}}}else{if(aw.type=="OK"){ax={Ok:{click:at,id:"perc-confirm-generic-ok"}}}else{if(aw.type=="OVERRIDE_OK"){ax={Ok:{click:ay,id:"perc-confirm-generic-ok"},Override:{click:at,id:"perc-confirm-generic-override"}}}else{if(aw.type=="SAVE_BEFORE_CONTINUE"){ax={Save:{click:function(){aw.save(at)},id:"perc-confirm-generic-save"},Cancel:{click:ay,id:"perc-confirm-generic-cancel"},"Don't Save":{click:function(){aw.dontSaveCallback();av.dialog("close");av.remove()},id:"perc-confirm-generic-continue"}}}else{if(aw.type=="CANCEL_CONTINUE"){ax={Continue:{click:at,id:"perc-confirm-generic-continue"},"Cancel Blue":{click:ay,id:"perc-confirm-generic-cancel"}}}else{if(aw.type=="CANCEL_START"){ax={Start:{click:at,id:"perc-confirm-generic-start"},Cancel:{click:ay,id:"perc-confirm-generic-cancel"}}}else{ax={Ok:{click:at,id:"perc-confirm-generic-ok"},Cancel:{click:ay,id:"perc-confirm-generic-cancel"}}}}}}}}}}var av;var ar={dialogClass:"perc-confirm-dialog",title:aw.title,modal:true,resizable:false,percButtons:ax,id:aw.id};if(au.height){ar.height=au.height}if(au.width){ar.width=au.width}if(aw.showAgainCheck){if(d(ar.id)){if(typeof(au.dontShowAgainAction)=="function"){au.dontShowAgainAction()}else{au.success()}return""}ar.open=T;ar.beforeclose=v}av=S("<div/>").append(aw.question).perc_dialog(ar)}function t(at){var av={title:"Please Confirm",content:"Something is wrong!",okCallBack:function(){}};S.extend(av,at);var ar=(av.width==undefined||av.width==null)?Math.max(av.title.length*35,400):av.width;var au;au=S("<div/>").append(av.content).perc_dialog({dialogClass:"perc-alert-dialog",title:av.title,modal:true,width:ar,resizable:false,id:av.id,percButtons:{Ok:{click:function(){au.remove();av.okCallBack()},id:"perc-alert-generic-ok"}}})}function am(at){var av={title:"Beg Pardon?",question:"I'm sorry, what was the thing you needed to do?",cancel:function(){},success:function(){}};S.extend(av,at);var ar=S("<input type='text' id='perc-prompt-dialog-question' />");var au=S("<div/>").append(S("<label for='perc-prompt-dialog-question'/>").append(av.question)).append(S("<br/>")).append(ar).dialog({dialogClass:"perc-prompt-dialog",title:av.title,modal:true,resizable:false,percButtons:{Yes:{click:function(){var aw=ar.val();au.remove();av.success(aw)},id:"perc-prompt-generic-yes"},No:{click:function(){au.remove();av.cancel()},id:"perc-prompt-generic-no"}},id:av.id})}function W(ar){return ar}function an(ar){return S.map(ar,W)}function G(at,ar){return an(at).concat(an(ar))}function p(ar,at){var au={};S.each(ar,function(aw,av){if(!at[aw]){au[aw]=av}});return au}function J(ar,at){S.each(ar,function(au){if(ar[au]===at){delete ar[au]}})}function Q(at){var ar=[];S.each(at,function(au){ar.push([au,this])});return ar}function j(ar){var at={};S.each(ar,function(){at[this.k]=this.v});return at}function ab(at){var ar=at.split("/");if(ar[ar.length-1]===""){ar.pop()}return ar[ar.length-1]}function Y(ar){if(ar){alert(ar)}}S.fn.perc_button=function(){this.addClass("ui-state-default ui-corner-all").hover(function(){if(!S(this).hasClass("ui-state-disabled")){S(this).addClass("ui-state-hover")}},function(){S(this).removeClass("ui-state-hover")});return this};function V(au){var at=1024;var av=(1024*1024);var ar=parseFloat(au);if(isNaN(ar)){return""}if(ar<at){return ar+" B"}if(ar>av){return(ar/av).toFixed(0)+" MB"}return(ar/at).toFixed(0)+" KB"}function H(au,at,av){var ar={site:"../images/images/iconWebsite.gif",folder:"../images/images/iconFolder.gif",percPage:"../images/images/iconPage.gif"};if(av==","+S.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/iconLibrary.gif"}if(av==","+S.perc_paths.SITES_ROOT_NO_SLASH){return"../images/images/iconWebsite.gif"}if(av==","+S.perc_paths.DESIGN_ROOT_NO_SLASH){return"../images/images/iconDesign.png"}if(av==",Search"){return"../images/images/searchIcon.png"}if(at){return at}if(au&&ar[au]){return ar[au]}if(au=="percImageAsset"){return"../images/images/genericImage.png"}if(au=="percFileAsset"||au=="percFlashAsset"){return"../images/images/genericFile.png"}if(au&&av[1]==S.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/genericAsset.png"}if(au){return"../images/images/iconPage.gif"}return"../images/images/iconFolder.gif"}S.fn.percWidLibMaximizer=function(au){var ax="#perc-layout-menu";if($j("#tabs-3").length){ax="#tabs-3 #perc-layout-menu"}if($j(ax).parent().find(".perc-template-container").hasClass("perc-visible")){$j(ax).parent().find(".perc-template-container").removeClass("perc-visible").addClass("perc-hidden");$j(ax).parent().find("#perc-wid-lib-expander").removeClass("perc-whitebg");$j(ax).parent().find("#perc-wid-lib-minimizer").replaceWith('<a id="perc-wid-lib-maximizer" style="float: left;" href="#"></a>')}else{var at=$j(ax).parent().find(".perc-region-library-container");if(at.hasClass("perc-visible")){S.fn.percRegionLibraryMaximizer(au)}$j(ax).parent().find(".perc-template-container").removeClass("perc-hidden").addClass("perc-visible");$j(ax).parent().find("#perc-wid-lib-expander").addClass("perc-whitebg");$j(ax).parent().find("#perc-wid-lib-maximizer").replaceWith('<a id="perc-wid-lib-minimizer" style="float: left;" href="#"></a>')}var av=S("#frame");var aw=S(".perc-main");var ar=S("#bottom");fixIframeHeight(aw,ar,av)};S.fn.percRegionLibraryMaximizer=function(ax){var aw="#perc-layout-menu";if($j("#tabs-3").length){aw="#tabs-3 #perc-layout-menu"}var aC=$j(aw).parent();var aB=$j(aC.find(".perc-region-library-container"));var aA=$j(aw).parent().find(".perc-template-container");var az=$j(aC.find("#perc-region-library-expander"));var au=$j(aC.find("#perc-region-library-maximizer"));var ay=$j(aC.find("#perc-region-library-minimizer"));if(aB.hasClass("perc-visible")){aB.removeClass("perc-visible").addClass("perc-hidden");az.removeClass("perc-whitebg");ay.replaceWith('<a id="perc-region-library-maximizer" style="float: left;" href="#"></a>')}else{if(aA.hasClass("perc-visible")){S.fn.percWidLibMaximizer(ax)}aB.removeClass("perc-hidden").addClass("perc-visible");az.addClass("perc-whitebg");au.replaceWith('<a id="perc-region-library-minimizer" style="float: left;" href="#"></a>')}var at=S("#frame");var av=S(".perc-main");var ar=S("#bottom");fixIframeHeight(av,ar,at)};S.fn.percOrphanAssetsMaximizer=function(ay){var ax="#perc-layout-menu";if($j("#tabs-2").length){ax="#tabs-2 #perc-content-menu"}var aB=$j(ax).parent();var az=aB.find("#perc_asset_library");var aA=aB.find("#perc_orphan_assets_expander");if(az.hasClass("perc-visible")){var av=aB.find("#perc_orphan_assets_minimizer");az.removeClass("perc-visible").addClass("perc-hidden");aA.removeClass("perc-whitebg");av.replaceWith('<a id="perc_orphan_assets_maximizer" style="float: left;" href="#"></a>')}else{var au=aB.find("#perc_orphan_assets_maximizer");az.removeClass("perc-hidden").addClass("perc-visible");aA.addClass("perc-whitebg");au.replaceWith('<a id="perc_orphan_assets_minimizer" style="float: left;" href="#"></a>')}var at=S("#frame");var aw=S(".perc-main");var ar=S("#bottom");fixIframeHeight(aw,ar,at)};function aj(av,aw,au){var at=false;var ar=500;av.click(function(){if(at){}else{at=true;setTimeout(function(){at=false},ar);aw()}});av.dblclick(au)}S.fn.perc_toggle=function(ar){if(S(ar).length&&S(ar).hasClass("perc-hidden")){S(ar).removeClass("perc-hidden");S(ar).addClass("perc-visible")}else{S(ar).removeClass("perc-visible");S(ar).addClass("perc-hidden")}return this};S.fn.perc_toggle_padding=function(){var at=S.fn.perc_toggle_padding.arguments;for(var ar=0;ar<at.length;ar++){if(S(at[ar]).length&&S(at[ar]).hasClass("perc-nopadding")){S(at[ar]).removeClass("perc-nopadding")}else{S(at[ar]).addClass("perc-nopadding")}}return this};var k=0;function N(){S("#frame").percAutoScroll({offsetY:10,width:10,speed:10,directions:"n, s"});S("#frame").percAutoScroll.postScrollView=function(ar,at){S("div.ui-droppable").each(function(){if(!S(this).hasClass("ui-layout-ignore")){S(this).css("top",S(this).position().top-at)}})}}function z(){S("#frame").percAutoScroll.remove()}function M(aw,ax){if(S.isFunction(aw)){aw=aw(ax.get(0).tagName)}if(aw.valueOf()==="$"){return ax.text()}if(S.isArray(aw)){var au=[];var at=aw[0];var av=ax.children();if(av.length==0&&at=="$"){var ar=ax.length;for(i=0;i<ar;i++){au.unshift(S(ax[i]).text())}}else{av.each(function(){var ay=M(at,S(this));ay._tagName=S(this)[0].tagName;au.push(ay)})}return au}var au={};S.each(aw,function(az){var ay=[];var aA=ax.children().filter(function(){ay.push(this.tagName);return this.tagName.toLowerCase()==az.toLowerCase()});if(aA.length){au[az]=M(this,aA)}else{F("Expected to find child: "+az+", tags found: "+ay)}});return au}function U(at,ar){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+X(at,ar)}function X(av,at,aw){if(S.isFunction(av)){av=av(at._tagName)}if(av.valueOf()==="$"){if(!at){F("Unexpected null in rexml");return""}else{if(typeof(at)==="string"){return at.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}else{return at}}}else{if(S.isArray(av)){var au="";if(av.length==1&&av[0]=="$"){var ar=at.length;for(i=0;i<ar;i++){au+="<"+aw+">"+at[i]+"</"+aw+">"}}else{if(S.isArray(at)){S.each(at,function(){au+="<"+this._tagName+">"+X(av[0],this,this.tagName)+"</"+this._tagName+">"})}else{F("Expected array, got %o instead",at)}}return au}else{var au="";S.each(av,function(ax){if(ax in at){var ay=S.isArray(av[ax])&&av[ax].length==1&&(av[ax])[0]=="$";if(!ay){au+="<"+ax+">"}au+=X(av[ax],at[ax],ax);if(!ay){au+="</"+ax+">"}}else{F("Can't find "+ax+" in %o",at)}});return au}}}function C(au,av){var ar=av.split(" ");var at;while((at=shift(ar))){if(at in au){au=au[at]}else{return null}}return au}function ah(ar){return encodeURIComponent(ar).replace(/%2F/g,"/")}var B=false;function ae(){return B}function F(ar){if(!ae()){return}var at;if(arguments.length>1){at="DEBUG ["+arguments[0]+"] "+arguments[1]}else{at="[DEBUG] "+arguments[0]}w(at)}function ak(ar){var at;if(arguments.length>1){at="INFO ["+arguments[0]+"] "+arguments[1]}else{at="[INFO] "+arguments[0]}w(at)}function L(ar){var at;if(arguments.length>1){at="ERROR ["+arguments[0]+"] "+arguments[1]}else{at="[ERROR] "+arguments[0]}w(at)}function w(ar){if(window.console&&console&&console.log){if(S.browser.msie){console.log(ar)}else{console.log.apply(console,arguments)}}}var K=[];function I(){var au=arguments.length;for(var at=au;at--;){var ar=document.createElement("img");ar.src=arguments[at];K.push(ar)}}function q(at){var ar=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return at.replace(ar,"<a href='$1'>$1</a>")}function O(at){var ar=0;at.contents().find(".perc-flash").find("object").each(function(){ar++;var az=S(this).attr("width");var av=S(this).attr("height");var au=az;var ax=av;if(az==""){var aw=S(this).children("embed").attr("width");if(aw==""){au="100%"}else{au=aw}}if(av==""){var ay=S(this).children("embed").attr("height");if(ay==""){ax="100%"}else{ax=ay}}if(au.lastIndexOf("%")<0&&au.lastIndexOf("px")<0){au=au+"px"}if(ax.lastIndexOf("%")<0&&ax.lastIndexOf("px")<0){ax=ax+"px"}S(this).replaceWith(S('<div id="perc-object-placeholder-'+ar+'" class="perc-object-placeholder" style="width: '+au+"; height: "+ax+';"></div>'))})}function f(ar){ar.contents().find("a").each(function(){var at=S(this).attr("href");S(this).attr("tempURL",at);S(this).removeAttr("target");S(this).attr("href","javascript:void(0)")});if(S.browser.msie){ar.contents().find("iframe").each(function(){var at=S(this).attr("src");if(at.length>0){var au="wmode=transparent";if(at.indexOf("?")!=-1){S(this).attr("src",at+"&"+au)}else{S(this).attr("src",at+"?"+au)}}})}}function E(ar){if(S.isArray(ar)){ar.sort(function(au,aw){var av=String(au).toUpperCase();var at=String(aw).toUpperCase();if(av>at){return 1}if(av<at){return -1}return 0})}}function x(av,at){var ax;var ar=av.getHours();var aw=av.getMinutes();var ay=av.getSeconds();var au=(ar>=12?" PM":" AM");aw=(aw<10?"0":"")+aw;ar=ar%12;if(ar==0){ar=12}ax=ar+":"+aw;if(at){ax+=":"+(ay<10?"0"+ay:ay)}ax+=au;return ax}function D(at){var ar=-1;for(a=0;a<at.length;a++){if(ar<at[a]){ar=at[a]}}return ar}function al(at){var ar=10000000;for(a=0;a<at.length;a++){if(at[a]<ar){ar=at[a]}}return ar}function R(au,ar){var at=[];for(i=0;i<au.length;i++){at[i]=au[i]+ar[i]}return at}function n(ar){var at=new Array(ar);for(i=0;i<ar;i++){at[i]=0}return at}S.percHideBodyScrollbars=function(){S("body").css("overflow","hidden")};S.percShowBodyScrollbars=function(){S("body").css("position","").css("overflow","")};function y(au){var av=S("#perc-finder-listing-"+au.id);var ar=av.children(".perc-finder-item-name");var at=au.type;ar.editable(function(az,ax){var az=S.trim(az);az=S.perc_textFilters.WINDOWS_FILE_NAME(az);if(at!="FSFolder"){az=az.replace(/ /g,"-")}var ay=S(this);var aw=ay.parent().attr("title");if(az.length==0){return aw}if(az!=aw){S.PercBlockUI(S.PercBlockUIMode.CURSORONLY);S.PercPathService.renameFolder(au.path,az,function(aB,aA,aD){if(aB==S.PercServiceUtils.STATUS_SUCCESS){var aE=S.perc_finder().lastClickPath;if(S.perc_finder().lastClickPath==null){aE=aA.PathItem.path.split("/");aE.push(az)}S.perc_finder().lastClickPath=null;S.perc_finder().open(aE);S.unblockUI()}else{ay.text(aw);S.unblockUI();var aC="";if(aD=="renameFolderItem.reservedName"||aD=="renameFolderItem.longName"||aD=="renameFolderItem.invalidCharInName"){aC=aA.replace("<old_name>",aw).replace("<new_name>",az)}else{aC="Cannot rename folder '"+aw+"' to '"+az+"' because an object with the same name already exists."}S.perc_utils.alert_dialog({id:"perc-finder-rename-folder-error",title:"Error",content:aC})}})}else{S.perc_finder().refresh()}return az},{type:"filteredText",event:"dblclick",height:"14px",width:"125px",select:true,onblur:"submit",fieldid:"perc_finder_inline_field_edit",onedit:function(aw){S("#perc_finder_inline_field_edit").blur()},data:function(ax,aw){return S(this).parent().attr("title")}});S("#perc-finder-listing-"+au.id).children(".perc-finder-item-name").trigger("dblclick")}function P(ar,av){var at=ar.entries;if(!S.isArray(at)){var au=[];au.push(at);at=au}for(i=0;i<at.length;i++){if(at[i].value==av){return true}}return false}function A(ar){if(typeof(ar)=="undefined"){return}var at=[];S(ar).each(function(au,aw){var av=ah(aw);at.push(av)});return at}function aa(ar){if(ar.length==0){return false}if(ar[1]=="Design"){return true}else{return false}}})(jQuery);function copyRegionObject(c,b){b.vertical=c.vertical;b.children=c.children;b.widgets=c.widgets;b.width=c.width;b.height=c.height;b.owner=c.owner}function htmlEntities(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#39;")}(function(b){b.perc_sessionTimeout=function(f){var k={serverCheck:10,sessionStateUrl:"/Rhythmyx/sessioncheck",logoutUrl:"/Rhythmyx/logout",dialogTitle:"Are you still there?",dialogMessageTimeout:"You will be automatically logged out in"};var q=k;if(f){q=b.extend(k,f)}var x={expiry:0,warning:0,counter:0};var z=null;var n;var t;var v=new Date().getTime();var c=(window.opener&&window.opener!==window);function e(D){var E="";if(D){E="extendSession=true";p()}var C=new Date().getTime();b.ajax({url:q.sessionStateUrl,type:"get",cache:false,data:E,contentType:"application/json; charset=utf-8",dataType:"json",success:function(F){x=F;v=C;w()},error:function(F,H,G){console.log("error :"+F.responseText);x.expiry=x.expiry+C-v;v=C;w()}})}function w(){if(x.expiry<=0){A()}else{if(x.expiry<x.warning){if(z===null){y()}}else{if(z!==null){p()}window.clearInterval(t);if(x.warning<x.expiry){t=window.setTimeout(function(){e(false)},x.expiry-x.warning)}}}}function d(){var D=new Date().getTime();var C=(D-v);var E=x.expiry-C;if(E>0){b("#logouttime").html(h(E));if(C>q.serverCheck*1000){e(false)}}else{p();e(false)}}function y(){z=j();window.clearInterval(n);d();n=window.setInterval(function(){d()},1000)}function p(){window.clearInterval(n);if(z!==null){z.remove();z=null}}function h(F){var G=Math.floor((F/1000)%60);var E=Math.floor((F/1000/60)%60);var C=Math.floor((F/(1000*60*60))%24);var D="";if(C>0){D+=C+" hour";if(C>1){D+="s"}D+=" "}return D+E+" min "+G+"s"}function A(){p();if(c){b.get("/Rhythmyx/logout",function(C){window.close()})}else{top.document.location.href="/Rhythmyx/logout"}}function B(){p();e(true)}function j(){z=C();function C(){var D="<div id='perc-session-timeout-content'><p>"+q.dialogMessageTimeout+'</p><p><span id="logouttime"/></p></div>';var E=b(D).perc_dialog({title:q.dialogTitle,id:"perc-session-timeout-dialog",width:400,resizable:false,modal:true,buttons:{"Extend Session":function(){B()},Logout:function(){A()}}});return b(E)}return z}e(false)}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,w){var j,x=w.location,q=Array.prototype.slice,z=decodeURIComponent,b=$.param,d,p,D,c=$.bbq=$.bbq||{},y,C,k,f=$.event.special,e="hashchange",I="querystring",L="fragment",G="elemUrlAttr",n="href",B="src",F=/^.*\?|#.*$/g,E=/^.*\#/,K={};function M(N){return typeof N==="string"}function J(O){var N=q.call(arguments,1);return function(){return O.apply(this,N.concat(q.call(arguments)))}}function t(N){return N.replace(/^[^#]*#?(.*)$/,"$1")}function v(N){return N.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function h(P,U,N,Q,O){var W,T,S,V,R;if(Q!==j){S=N.match(P?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);R=S[3]||"";if(O===2&&M(Q)){T=Q.replace(P?E:F,"")}else{V=p(S[2]);Q=M(Q)?p[P?L:I](Q):Q;T=O===2?Q:O===1?$.extend({},Q,V):$.extend({},V,Q);T=b(T)}W=S[1]+(P?"#":T||!S[1]?"?":"")+T+R}else{W=U(N!==j?N:x[n])}return W}b[I]=J(h,0,v);b[L]=d=J(h,1,t);$.deparam=p=function(Q,N){var P={},O={"true":!0,"false":!1,"null":null};$.each(Q.replace(/\+/g," ").split("&"),function(T,Y){var S=Y.split("="),X=z(S[0]),R,W=P,U=0,Z=X.split("]["),V=Z.length-1;if(/\[/.test(Z[0])&&/\]$/.test(Z[V])){Z[V]=Z[V].replace(/\]$/,"");Z=Z.shift().split("[").concat(Z);V=Z.length-1}else{V=0}if(S.length===2){R=z(S[1]);if(N){R=R&&!isNaN(R)?+R:R==="undefined"?j:O[R]!==j?O[R]:R}if(V){for(;U<=V;U++){X=Z[U]===""?W.length:Z[U];W=W[X]=U<V?W[X]||(Z[U+1]&&isNaN(Z[U+1])?{}:[]):R}}else{if($.isArray(P[X])){P[X].push(R)}else{if(P[X]!==j){P[X]=[P[X],R]}else{P[X]=R}}}}else{if(X){P[X]=N?j:""}}});return P};function H(P,N,O){if(N===j||typeof N==="boolean"){O=N;N=b[P?L:I]()}else{N=M(N)?N.replace(P?E:F,""):N}return p(N,O)}p[I]=J(H,0);p[L]=D=J(H,1);$[G]||($[G]=function(N){return $.extend(K,N)})({a:n,base:n,iframe:B,img:B,input:B,form:"action",link:n,script:B});k=$[G];function A(Q,O,P,N){if(!M(P)&&typeof P!=="object"){N=P;P=O;O=j}return this.each(function(){var T=$(this),R=O||k()[(this.nodeName||"").toLowerCase()]||"",S=R&&T.attr(R)||"";T.attr(R,b[Q](S,P,N))})}$.fn[I]=J(A,I);$.fn[L]=J(A,L);c.pushState=y=function(Q,N){if(M(Q)&&/^#/.test(Q)&&N===j){N=2}var P=Q!==j,O=d(x[n],P?Q:{},P?N:2);x[n]=O+(/#/.test(O)?"":"#")};c.getState=C=function(N,O){return N===j||typeof N==="boolean"?D(N):D(O)[N]};c.removeState=function(N){var O={};if(N!==j){O=C();$.each($.isArray(N)?N:arguments,function(Q,P){delete O[P]})}y(O,2)};f[e]=$.extend(f[e],{add:function(N,P,O){return function(R){var Q=R[L]=d();R.getState=function(S,T){return S===j||typeof S==="boolean"?p(Q,S):p(Q,T)[S]};N.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,j){var h=j.location,k,n=$.event.special,c="hashchange",e=$.browser,f=e.msie&&e.version<8,d="on"+c in j&&!f;function b(p){p=p||h.href;return p.replace(/^[^#]*#?(.*)$/,"$1")}$[c+"Delay"]=100;n[c]=$.extend(n[c],{setup:function(){if(d){return false}k.start()},teardown:function(){if(d){return false}k.stop()}});k=(function(){var p={},x,q,t,w;function v(){t=w=function(y){return y};if(f){q=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;w=function(){return b(q.document.location.href)};t=function(A,y){if(A!==y){var z=q.document;z.open().close();z.location.hash="#"+A}};t(b())}}p.start=function(){if(x){return}var z=b();t||v();(function y(){var B=b(),A=w(z);if(B!==z){t(z=B,A);$(j).trigger(c)}else{if(A!==z){h.href=h.href.replace(/#.*/,"")+"#"+A}}x=setTimeout(y,$[c+"Delay"])})()};p.stop=function(){if(!q){x&&clearTimeout(x);x=0}};return p})()})(jQuery,this);jQuery.cookie=function(c,n,t){if(typeof n!="undefined"){t=t||{};if(n===null){n="";t.expires=-1}var f="";if(t.expires&&(typeof t.expires=="number"||t.expires.toUTCString)){var h;if(typeof t.expires=="number"){h=new Date();h.setTime(h.getTime()+(t.expires*24*60*60*1000))}else{h=t.expires}f="; expires="+h.toUTCString()}var q=t.path?"; path="+(t.path):"";var j=t.domain?"; domain="+(t.domain):"";var b=t.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(n),f,q,j,b].join("")}else{var e=null;if(document.cookie&&document.cookie!=""){var p=document.cookie.split(";");for(var k=0;k<p.length;k++){var d=jQuery.trim(p[k]);if(d.substring(0,c.length+1)==(c+"=")){e=decodeURIComponent(d.substring(c.length+1));break}}}return e}};(function(f){var A="success";var e="error";var w="abort";var B="DELETE";var c="GET";var d="POST";var j="PUT";f.PercServiceUtils={STATUS_ERROR:e,STATUS_SUCCESS:A,STATUS_ABORT:w,TYPE_DELETE:B,TYPE_GET:c,TYPE_POST:d,TYPE_PUT:j,makeJsonRequest:n,makeXmlRequest:z,makeRequest:y,makeXdmJsonRequest:k,makeDeleteRequest:h,extractDefaultErrorMessage:t,extractFieldErrorCode:b,extractGlobalErrorCode:q,makeXdmXmlRequest:x,convertMapToArray:v};f.ajaxSetup({timeout:60000});function n(F,K,M,N,G,H,L){var O=this;var E=f.isFunction(f.getCm1License)?f.getCm1License():"";var I=f.isFunction(f.getCm1Version)?f.getCm1Version():"";var D=f.perc_utils.percParseInt(L);var J={dataType:"json",async:!M,contentType:"application/json",type:K,url:F,headers:{"perc-tid":E,"perc-version":I},success:function(R,Q){var P={data:R,textstatus:Q};N(O.STATUS_SUCCESS,P)},error:function(S,Q,R){if(S.status==204||S.status==1223){var P={data:{},textstatus:S.statusText};N(O.STATUS_SUCCESS,P);return}else{if(S.status>0){var P={request:S,textstatus:Q,error:R};N(O.STATUS_ERROR,P)}else{if(f.isFunction(H)){H(O.STATUS_ABORT)}}}}};if(G){f.extend(J,{data:JSON.stringify(G)})}if(D){f.extend(J,{timeout:D})}return f.ajax(J)}function y(E,K,L,O,F,N,M,I,G){var P=this;var D=f.isFunction(f.getCm1License)?f.getCm1License():"";var H=f.isFunction(f.getCm1Version)?f.getCm1Version():"";var J={dataType:M,async:!L,contentType:N,type:K,url:(I)?E:escape(E),headers:{"perc-tid":D,"perc-version":H},success:function(S,R){var Q={data:S,textstatus:R};O(P.STATUS_SUCCESS,Q)},error:function(T,R,S){if(T.status==204||T.status==1223){var Q={data:{},textstatus:T.statusText};O(P.STATUS_SUCCESS,Q);return}else{if(T.status>0){var Q={request:T,textstatus:R,error:S};O(P.STATUS_ERROR,Q)}else{if(f.isFunction(G)){G(P.STATUS_ABORT)}}}}};if(F){f.extend(J,{data:JSON.stringify(F)})}f.ajax(J)}function x(G,E,K,L,H){var M=this;var F=f.isFunction(f.getCm1License)?f.getCm1License():"";var J=f.isFunction(f.getCm1Version)?f.getCm1Version():"";if(typeof(easyXDM)=="undefined"){M.makeJsonRequest(E,K,false,L,H);return}if(L==null||typeof(L)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(K==M.TYPE_GET||K==M.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(G==null||typeof(G)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){G=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var I=new easyXDM.Rpc({remote:G+"/perc-common-ui/cors/"},{remote:{request:{}}});var D={url:E,headers:{"Content-Type":"application/json",Accept:"application/xml,text/plain","perc-tid":F,"perc-version":J},method:K,timeout:60000};if(H!=null&&H!=""&&typeof(H)!="undefined"){D.data=easyXDM.getJSONObject().stringify(H)}I.request(D,function(N){var O=N.headers["Content-Type"]=="application/json";var P={data:O?JSON.parse(N.data):N.data,status:N.status};L(M.STATUS_SUCCESS,P)},function(N){var O={message:N.message,status:N.status};L(M.STATUS_ERROR,O)})}function k(G,E,K,L,H){var M=this;var F=f.isFunction(f.getCm1License)?f.getCm1License():"";var J=f.isFunction(f.getCm1Version)?f.getCm1Version():"";if(typeof(easyXDM)=="undefined"){M.makeJsonRequest(E,K,false,L,H);return}if(L==null||typeof(L)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(K==M.TYPE_GET||K==M.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(G==null||typeof(G)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){G=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var I=new easyXDM.Rpc({remote:G+"/perc-common-ui/cors/"},{remote:{request:{}}});var D={url:E,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":F,"perc-version":J},method:K,timeout:60000};if(H!=null&&H!=""&&typeof(H)!="undefined"){D.data=easyXDM.getJSONObject().stringify(H)}I.request(D,function(N){var O=N.headers["Content-Type"]=="application/json";var P={data:O?JSON.parse(N.data):N.data,status:N.status};L(M.STATUS_SUCCESS,P)},function(N){var O={message:N.message,status:N.status};L(M.STATUS_ERROR,O)})}function z(D,J,K,L,G,F){var M=this;var E=f.isFunction(f.getCm1License)?f.getCm1License():"";var H=f.isFunction(f.getCm1Version)?f.getCm1Version():"";var I={dataType:"xml",async:!K,contentType:"text/xml",type:J,url:D,headers:{"perc-tid":E,"perc-version":H},success:function(P,O){var N={data:P,textstatus:O};L(M.STATUS_SUCCESS,N)},error:function(Q,O,P){if(Q.status>0){var N={request:Q,textstatus:O,error:P};L(M.STATUS_ERROR,N)}else{if(f.isFunction(F)){F(M.STATUS_ABORT)}}}};if(G){f.extend(I,{data:G})}f.ajax(I)}function h(D,J,K,G,F){var L=this;var E=f.isFunction(f.getCm1License)?f.getCm1License():"";var H=f.isFunction(f.getCm1Version)?f.getCm1Version():"";var I={dataType:"text",async:!J,contentType:"text/xml",type:L.TYPE_DELETE,url:D,headers:{"perc-tid":E,"perc-version":H},success:function(O,N){var M={data:O,textstatus:N};K(L.STATUS_SUCCESS,M)},error:function(P,N,O){if(P.status>0){var M={request:P,textstatus:N,error:O};K(L.STATUS_ERROR,M)}else{if(f.isFunction(F)){F(L.STATUS_ABORT)}}}};if(G){f.extend(I,{data:G})}f.ajax(I)}function t(G){var K="";if(G==null||typeof(G)=="undefined"){return""}if(typeof(G.responseText)=="undefined"&&typeof(G.message)!="undefined"){G.responseText=G.message}if(G.responseText==null||G.responseText.length==0){return""}var F=null;try{F=JSON.parse(G.responseText);if(f.browser.msie&&!F&&typeof(G.responseText)=="string"&&G.responseText.length>0){return G.responseText}}catch(J){}if(F!=null&&F.Errors){var I="";if(typeof(F.defaultMessage)!="undefined"){I=F.defaultMessage}else{if(typeof(F.Errors.globalError.defaultMessage)!="undefined"){I=F.Errors.globalError.defaultMessage}else{if(typeof(F.Errors.localizedMessage)!="undefined"){I=F.Errors.localizedMessage}else{if(typeof(F.Errors.globalError.code)!="undefined"){var H=G.status==500?"Server Error: ":"";I=H+F.Errors.globalError.code}}}}K+=I}else{if(F!=null&&F.ValidationErrors!=undefined){var E=F.ValidationErrors;if(E.fieldErrors!=undefined){K+=p(E.fieldErrors)}else{if(E.globalErrors!=undefined){K+=p(E.globalErrors)}else{if(E.globalError!=undefined){K+=p(E.globalError)}}}}}var D;if(typeof(G.responseText)!="undefined"&&G.responseText.indexOf("<?xml")!=-1){D=f(G.responseText)}else{if(typeof(G)=="string"&&G.indexOf("<?xml")!=-1){D=f(G)}}if(typeof(D)!="undefined"&&D.is("ValidationErrors")){if(D.find("globalErrors").find("defaultMessage").text()!=""){K+=D.find("globalErrors").find("defaultMessage").text()}else{if(D.find("globalError").find("defaultMessage").text()!=""){K+=D.find("globalError").find("defaultMessage").text()!=""}else{if(D.next("defaultMessage")){K+=D.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(K==""){K=G.responseText}return K}function p(D){D=f.makeArray(D);var E="";for(var F=0;F<D.length;F++){var G=D[F];if(G.defaultMessage){E+=C(G.defaultMessage,G.arguments)}else{if(G.code){E+=G.code}}}return E}function C(G,D){D=f.makeArray(D);var F="";for(var E=0;E<D.length;E++){F=new RegExp("\\{"+E+"\\}","g");G=G.replace(F,D[E])}return G}function b(F){var E=JSON.parse(F.responseText);if(E.ValidationErrors==undefined){return""}var D=E.ValidationErrors;if(D.fieldErrors!=undefined){return D.fieldErrors.code}return""}function q(F){var E=JSON.parse(F.responseText);if(E.ValidationErrors==undefined){return""}var D=E.ValidationErrors;if(D.globalError!=undefined){return D.globalError.code}return""}function v(E){var F=[];if(f.isArray(E.entry)){F=E.entry}else{if(E.entry){F.push(E.entry)}}var D=[];f(F).each(function(){D[this.key]=this.value});return D}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:500,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.curCSS($E[0],"display",true)=="none"){hidden=true;visibility=$.curCSS($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.curCSS($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.curCSS($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.curCSS($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.curCSS($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.curCSS($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");input.attr("id",settings.fieldid);$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}textarea.attr("id",settings.fieldid);$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");select.attr("id",settings.fieldid);$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},fieldid:"jeditable_inline_field"}})(jQuery);(function(c){c.tools=c.tools||{};c.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var d;function b(x,v){var A=this,y=c(this),e=!v.vertical,f=x.children(),q=0,n;if(!d){d=A}c.each(v,function(B,C){if(c.isFunction(C)){y.bind(B,C)}});if(f.length>1){f=c(v.items,x)}function t(C){var B=c(C);return v.globalNav?B:x.parent().find(C)}x.data("finder",t);var h=t(v.prev),k=t(v.next),j=t(v.prevPage),w=t(v.nextPage);c.extend(A,{getIndex:function(){return q},getClickIndex:function(){var B=A.getItems();return B.index(B.filter("."+v.activeClass))},getConf:function(){return v},getSize:function(){return A.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/v.size)},getPageIndex:function(){return Math.ceil(q/v.size)},getNaviButtons:function(){return h.add(k).add(j).add(w)},getRoot:function(){return x},getItemWrap:function(){return f},updateItemWrap:function(){f=A.getRoot().children()},getItems:function(){return f.children(v.item)},getVisibleItems:function(){return A.getItems().slice(q,q+v.size)},seekTo:function(B,F,C){if(B<0){B=0}if(q===B){return A}if(c.isFunction(F)){C=F}if(B>A.getSize()-v.size){return v.loop?A.begin():this.end()}var D=A.getItems().eq(B);if(!D.length){return A}var E=c.Event("onBeforeSeek");y.trigger(E,[B]);if(E.isDefaultPrevented()){return A}if(F===undefined||c.isFunction(F)){F=v.speed}function G(){if(C){C.call(A,B)}y.trigger("onSeek",[B])}if(e){f.animate({left:-D.position().left},F,v.easing,G)}else{f.animate({top:-D.position().top},F,v.easing,G)}d=A;q=B;E=c.Event("onStart");y.trigger(E,[B]);if(E.isDefaultPrevented()){return A}h.add(j).toggleClass(v.disabledClass,B===0);k.add(w).toggleClass(v.disabledClass,B>=A.getSize()-v.size);return A},move:function(D,C,B){n=D>0;return this.seekTo(q+D,C,B)},next:function(C,B){return this.move(1,C,B)},prev:function(C,B){return this.move(-1,C,B)},movePage:function(F,E,D){n=F>0;var B=v.size*F;var C=q%v.size;if(C>0){B+=(F>0?-C:v.size-C)}return this.move(B,E,D)},prevPage:function(C,B){return this.movePage(-1,C,B)},nextPage:function(C,B){return this.movePage(1,C,B)},setPage:function(C,D,B){return this.seekTo(C*v.size,D,B)},begin:function(C,B){n=false;return this.seekTo(0,C,B)},end:function(C,B){n=true;var D=this.getSize()-v.size;return D>0?this.seekTo(D,C,B):A},reload:function(){y.trigger("onReload");return A},focus:function(){d=A;return A},click:function(D){var E=A.getItems().eq(D),B=v.activeClass,C=v.size;if(D<0||D>=A.getSize()){return A}if(C==1){if(v.loop){return A.next()}if(D===0||D==A.getSize()-1){n=(n===undefined)?true:!n}return n===false?A.prev():A.next()}if(C==2){if(D==q){D--}A.getItems().removeClass(B);E.addClass(B);return A.seekTo(D,time,fn)}if(!E.hasClass(B)){A.getItems().removeClass(B);E.addClass(B);var G=Math.floor(C/2);var F=D-G;if(F>A.getSize()-C){F=A.getSize()-C}if(F!==D){return A.seekTo(F)}}return A},bind:function(B,C){y.bind(B,C);return A},unbind:function(B){y.unbind(B);return A}});c.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(B,C){A[C]=function(D){return A.bind(C,D)}});h.addClass(v.disabledClass).click(function(){A.prev()});k.click(function(){A.next()});w.click(function(){A.nextPage()});if(A.getSize()<v.size){k.add(w).addClass(v.disabledClass)}j.addClass(v.disabledClass).click(function(){A.prevPage()});var p=v.hoverClass,z="keydown."+Math.random().toString().substring(10);A.onReload(function(){if(p){A.getItems().hover(function(){c(this).addClass(p)},function(){c(this).removeClass(p)})}if(v.clickable){A.getItems().each(function(B){c(this).unbind("click.scrollable").bind("click.scrollable",function(C){if(c(C.target).is("a")){return}return A.click(B)})})}if(v.keyboard){c(document).unbind(z).bind(z,function(B){if(B.altKey||B.ctrlKey){return}if(v.keyboard!="static"&&d!=A){return}var C=v.keyboardSteps;if(e&&(B.keyCode==37||B.keyCode==39)){A.move(B.keyCode==37?-C:C);return B.preventDefault()}if(!e&&(B.keyCode==38||B.keyCode==40)){A.move(B.keyCode==38?-C:C);return B.preventDefault()}return true})}else{c(document).unbind(z)}});A.reload()}c.fn.scrollable=function(e){var f=this.eq(typeof e=="number"?e:0).data("scrollable");if(f){return f}var h=c.extend({},c.tools.scrollable.conf);e=c.extend(h,e);e.keyboardSteps=e.keyboardSteps||e.size;this.each(function(){f=new b(c(this),e);c(this).data("scrollable",f)});return e.api?f:this}})(jQuery);(function(c){c.fn.wheel=function(f){return this[f?"bind":"trigger"]("wheel",f)};c.event.special.wheel={setup:function(){c.event.add(this,e,d,{})},teardown:function(){c.event.remove(this,e,d)}};var e=!c.browser.mozilla?"mousewheel":"DOMMouseScroll"+(c.browser.version<"1.9"?" mousemove":"");function d(f){switch(f.type){case"mousemove":return c.extend(f.data,{clientX:f.clientX,clientY:f.clientY,pageX:f.pageX,pageY:f.pageY});case"DOMMouseScroll":c.extend(f,f.data);f.delta=-f.detail/3;break;case"mousewheel":f.delta=f.wheelDelta/120;break}f.type="wheel";return c.event.handle.call(this,f,f.delta)}var b=c.tools.scrollable;b.plugins=b.plugins||{};b.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};c.fn.mousewheel=function(h){var j=c.extend({},b.plugins.mousewheel.conf),f;if(typeof h=="number"){h={speed:h}}h=c.extend(j,h);this.each(function(){var k=c(this).scrollable();if(k){f=k}k.getRoot().wheel(function(n,p){k.move(p<0?1:-1,h.speed||50);return false})});return h.api?f:this}})(jQuery);
/* jQuery Validation Plugin - v1.10.0 - 9/7/2012
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2012 Jrn Zaefferer; Licensed MIT, GPL */
(function(b){b.extend(b.fn,{validate:function(d){if(!this.length){d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var e=b.data(this[0],"validator");return e?e:(this.attr("novalidate","novalidate"),e=new b.validator(d,this[0]),b.data(this[0],"validator",e),e.settings.onsubmit&&(this.validateDelegate(":submit","click",function(c){e.settings.submitHandler&&(e.submitButton=c.target),b(c.target).hasClass("cancel")&&(e.cancelSubmit=!0)}),this.submit(function(c){function f(){var h;return e.settings.submitHandler?(e.submitButton&&(h=b("<input type='hidden'/>").attr("name",e.submitButton.name).val(e.submitButton.value).appendTo(e.currentForm)),e.settings.submitHandler.call(e,e.currentForm,c),e.submitButton&&h.remove(),!1):!0}return e.settings.debug&&c.preventDefault(),e.cancelSubmit?(e.cancelSubmit=!1,f()):e.form()?e.pendingRequest?(e.formSubmitted=!0,!1):f():(e.focusInvalid(),!1)})),e)},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}var d=!0,e=b(this[0].form).validate();return this.each(function(){d&=e.element(this)}),d},removeAttrs:function(e){var h={},f=this;return b.each(e.split(/\s/),function(d,c){h[c]=f.attr(c),f.removeAttr(c)}),h},rules:function(y,x){var w=this[0];if(y){var v=b.data(w.form,"validator").settings,t=v.rules,q=b.validator.staticRules(w);switch(y){case"add":b.extend(q,b.validator.normalizeRule(x)),t[w.name]=q,x.messages&&(v.messages[w.name]=b.extend(v.messages[w.name],x.messages));break;case"remove":if(!x){return delete t[w.name],q}var p={};return b.each(x.split(/\s/),function(d,c){p[c]=q[c],delete q[c]}),p}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(w),b.validator.classRules(w),b.validator.attributeRules(w),b.validator.staticRules(w)),w);if(n.required){var k=n.required;delete n.required,n=b.extend({required:k},n)}return n}}),b.extend(b.expr[":"],{blank:function(c){return !b.trim(""+c.value)},filled:function(c){return !!b.trim(""+c.value)},unchecked:function(c){return !c.checked}}),b.validator=function(d,e){this.settings=b.extend(!0,{},b.validator.defaults,d),this.currentForm=e,this.init()},b.validator.format=function(d,e){return arguments.length===1?function(){var f=b.makeArray(arguments);return f.unshift(d),b.validator.format.apply(this,f)}:(arguments.length>2&&e.constructor!==Array&&(e=b.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),b.each(e,function(f,h){d=d.replace(new RegExp("\\{"+f+"\\}","g"),h)}),d)},b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(d,c){this.lastActive=d,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,d,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(d)).hide())},onfocusout:function(d,c){!this.checkable(d)&&(d.name in this.submitted||!this.optional(d))&&this.element(d)},onkeyup:function(d,c){if(c.which===9&&this.elementValue(d)===""){return}(d.name in this.submitted||d===this.lastActive)&&this.element(d)},onclick:function(d,c){d.name in this.submitted?this.element(d):d.parentNode.name in this.submitted&&this.element(d.parentNode)},highlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).addClass(h).removeClass(f):b(e).addClass(h).removeClass(f)},unhighlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).removeClass(h).addClass(f):b(e).removeClass(h).addClass(f)}},setDefaults:function(c){b.extend(b.validator.defaults,c)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function f(j){var n=b.data(this[0].form,"validator"),k="on"+j.type.replace(/^validate/,"");n.settings[k]&&n.settings[k].call(n,this[0],j)}this.labelContainer=b(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm),this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};b.each(this.settings.groups,function(k,j){b.each(j.split(/\s/),function(c,n){e[n]=k})});var h=this.settings.rules;b.each(h,function(c,j){h[c]=b.validator.normalizeRule(j)}),b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f),this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),b.extend(this.submitted,this.errorMap),this.invalid=b.extend({},this.errorMap),this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var d=0,c=this.currentElements=this.elements();c[d];d++){this.check(c[d])}return this.valid()},element:function(d){d=this.validationTargetFor(this.clean(d)),this.lastElement=d,this.prepareElement(d),this.currentElements=b(d);var e=this.check(d)!==!1;return e?delete this.invalid[d.name]:this.invalid[d.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(d){if(d){b.extend(this.errorMap,d),this.errorList=[];for(var e in d){this.errorList.push({message:d[e],element:this.findByName(e)[0]})}this.successList=b.grep(this.successList,function(c){return !(c.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var d=0;for(var f in e){d++}return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(c){}}},findLastActive:function(){var c=this.lastActive;return c&&b.grep(this.errorList,function(d){return d.element.name===c.name}).length===1&&c},elements:function(){var d=this,e={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in e||!d.objectLength(b(this).rules())?!1:(e[this.name]=!0,!0)})},clean:function(c){return b(c)[0]},errors:function(){var c=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+c,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=b([]),this.toHide=b([]),this.currentElements=b([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(c){this.reset(),this.toHide=this.errorsFor(c)},elementValue:function(e){var h=b(e).attr("type"),f=b(e).val();return h==="radio"||h==="checkbox"?b('input[name="'+b(e).attr("name")+'"]:checked').val():typeof f=="string"?f.replace(/\r/g,""):f},check:function(j){j=this.validationTargetFor(this.clean(j));var w=b(j).rules(),v=!1,t=this.elementValue(j),q;for(var p in w){var n={method:p,parameters:w[p]};try{q=b.validator.methods[p].call(this,t,j,n.parameters);if(q==="dependency-mismatch"){v=!0;continue}v=!1;if(q==="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!q){return this.formatAndAdd(j,n),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+n.method+"' method",k),k}}if(v){return}return this.objectLength(w)&&this.successList.push(j),!0},customMetaMessage:function(e,h){if(!b.metadata){return}var f=this.settings.meta?b(e).metadata()[this.settings.meta]:b(e).metadata();return f&&f.messages&&f.messages[h]},customDataMessage:function(d,e){return b(d).data("msg-"+e.toLowerCase())||d.attributes&&b(d).attr("data-msg-"+e.toLowerCase())},customMessage:function(e,d){var f=this.settings.messages[e];return f&&(f.constructor===String?f:f[d])},findDefined:function(){for(var c=0;c<arguments.length;c++){if(arguments[c]!==undefined){return arguments[c]}}return undefined},defaultMessage:function(d,e){return this.findDefined(this.customMessage(d.name,e),this.customDataMessage(d,e),this.customMetaMessage(d,e),!this.settings.ignoreTitle&&d.title||undefined,b.validator.messages[e],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(f,k){var j=this.defaultMessage(f,k.method),h=/\$?\{(\d+)\}/g;typeof j=="function"?j=j.call(this,k.parameters,f):h.test(j)&&(j=b.validator.format(j.replace(h,"{$1}"),k.parameters)),this.errorList.push({message:j,element:f}),this.errorMap[f.name]=j,this.submitted[f.name]=j},addWrapper:function(c){return this.settings.wrapper&&(c=c.add(c.parent(this.settings.wrapper))),c},defaultShowErrors:function(){var e,d;for(e=0;this.errorList[e];e++){var f=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,f.element,this.settings.errorClass,this.settings.validClass),this.showLabel(f.element,f.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success){for(e=0;this.successList[e];e++){this.showLabel(this.successList[e])}}if(this.settings.unhighlight){for(e=0,d=this.validElements();d[e];e++){this.settings.unhighlight.call(this,d[e],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(e,h){var f=this.errorsFor(e);f.length?(f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.attr("generated")&&f.html(h)):(f=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(h||""),this.settings.wrapper&&(f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,b(e)):f.insertAfter(e))),!h&&this.settings.success&&(f.text(""),typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f,e)),this.toShow=this.toShow.add(f)},errorsFor:function(d){var e=this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")===e})},idOrName:function(c){return this.groups[c.name]||(this.checkable(c)?c.name:c.id||c.name)},validationTargetFor:function(c){return this.checkable(c)&&(c=this.findByName(c.name).not(this.settings.ignore)[0]),c},checkable:function(c){return/radio|checkbox/i.test(c.type)},findByName:function(c){return b(this.currentForm).find('[name="'+c+'"]')},getLength:function(d,e){switch(e.nodeName.toLowerCase()){case"select":return b("option:selected",e).length;case"input":if(this.checkable(e)){return this.findByName(e.name).filter(":checked").length}}return d.length},depend:function(d,c){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,c):!0},dependTypes:{"boolean":function(d,c){return d},string:function(d,e){return !!b(d,e.form).length},"function":function(d,c){return d(c)}},optional:function(d){var e=this.elementValue(d);return !b.validator.methods.required.call(this,e,d)&&"dependency-mismatch"},startRequest:function(c){this.pending[c.name]||(this.pendingRequest++,this.pending[c.name]=!0)},stopRequest:function(d,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[d.name],e&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!e&&this.pendingRequest===0&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(c){return b.data(c,"previousValue")||b.data(c,"previousValue",{old:null,valid:!0,message:this.defaultMessage(c,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(d,e){d.constructor===String?this.classRuleSettings[d]=e:b.extend(this.classRuleSettings,d)},classRules:function(e){var h={},f=b(e).attr("class");return f&&b.each(f.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(h,b.validator.classRuleSettings[this])}),h},attributeRules:function(h){var p={},n=b(h);for(var k in b.validator.methods){var j;k==="required"?(j=n.get(0).getAttribute(k),j===""&&(j=!0),j=!!j):j=n.attr(k),j?p[k]=j:n[0].getAttribute("type")===k&&(p[k]=!0)}return p.maxlength&&/-1|2147483647|524288/.test(p.maxlength)&&delete p.maxlength,p},metadataRules:function(d){if(!b.metadata){return{}}var e=b.data(d.form,"validator").settings.meta;return e?b(d).metadata()[e]:b(d).metadata()},staticRules:function(e){var h={},f=b.data(e.form,"validator");return f.settings.rules&&(h=b.validator.normalizeRule(f.settings.rules[e.name])||{}),h},normalizeRules:function(d,e){return b.each(d,function(j,h){if(h===!1){delete d[j];return}if(h.param||h.depends){var c=!0;switch(typeof h.depends){case"string":c=!!b(h.depends,e.form).length;break;case"function":c=h.depends.call(e,e)}c?d[j]=h.param!==undefined?h.param:!0:delete d[j]}}),b.each(d,function(f,c){d[f]=b.isFunction(c)?c(e):c}),b.each(["minlength","maxlength","min","max"],function(){d[this]&&(d[this]=Number(d[this]))}),b.each(["rangelength","range"],function(){d[this]&&(d[this]=[Number(d[this][0]),Number(d[this][1])])}),b.validator.autoCreateRanges&&(d.min&&d.max&&(d.range=[d.min,d.max],delete d.min,delete d.max),d.minlength&&d.maxlength&&(d.rangelength=[d.minlength,d.maxlength],delete d.minlength,delete d.maxlength)),d.messages&&delete d.messages,d},normalizeRule:function(d){if(typeof d=="string"){var e={};b.each(d.split(/\s/),function(){e[this]=!0}),d=e}return d},addMethod:function(e,h,f){b.validator.methods[e]=h,b.validator.messages[e]=f!==undefined?f:b.validator.messages[e],h.length<3&&b.validator.addClassRules(e,b.validator.normalizeRule(e))},methods:{required:function(f,k,j){if(!this.depend(j,k)){return"dependency-mismatch"}if(k.nodeName.toLowerCase()==="select"){var h=b(k).val();return h&&h.length>0}return this.checkable(k)?this.getLength(f,k)>0:b.trim(f).length>0},remote:function(h,q,p){if(this.optional(q)){return"dependency-mismatch"}var n=this.previousValue(q);this.settings.messages[q.name]||(this.settings.messages[q.name]={}),n.originalMessage=this.settings.messages[q.name].remote,this.settings.messages[q.name].remote=n.message,p=typeof p=="string"&&{url:p}||p;if(this.pending[q.name]){return"pending"}if(n.old===h){return n.valid}n.old=h;var k=this;this.startRequest(q);var j={};return j[q.name]=h,b.ajax(b.extend(!0,{url:p,mode:"abort",port:"validate"+q.name,dataType:"json",data:j,success:function(v){k.settings.messages[q.name].remote=n.originalMessage;var t=v===!0||v==="true";if(t){var f=k.formSubmitted;k.prepareElement(q),k.formSubmitted=f,k.successList.push(q),delete k.invalid[q.name],k.showErrors()}else{var e={},c=v||k.defaultMessage(q,"remote");e[q.name]=n.message=b.isFunction(c)?c(h):c,k.invalid[q.name]=!0,k.showErrors(e)}n.valid=t,k.stopRequest(q,t)}},p)),"pending"},minlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j},maxlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h<=j},rangelength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j[0]&&h<=j[1]},min:function(e,d,f){return this.optional(d)||e>=f},max:function(e,d,f){return this.optional(d)||e<=f},range:function(e,d,f){return this.optional(d)||e>=f[0]&&e<=f[1]},email:function(d,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(d))},dateISO:function(d,c){return this.optional(c)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(d)},number:function(d,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(d)},digits:function(d,c){return this.optional(c)||/^\d+$/.test(d)},creditcard:function(j,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(j)){return !1}var t=0,q=0,p=!1;j=j.replace(/\D/g,"");for(var n=j.length-1;n>=0;n--){var k=j.charAt(n);q=parseInt(k,10),p&&(q*=2)>9&&(q-=9),t+=q,p=!p}return t%10===0},equalTo:function(f,k,j){var h=b(j);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(k).valid()}),f===h.val()}}}),b.format=b.validator.format})(jQuery),function(e){var d={};if(e.ajaxPrefilter){e.ajaxPrefilter(function(b,k,j){var h=b.port;b.mode==="abort"&&(d[h]&&d[h].abort(),d[h]=j)})}else{var f=e.ajax;e.ajax=function(h){var c=("mode" in h?h:e.ajaxSettings).mode,b=("port" in h?h:e.ajaxSettings).port;return c==="abort"?(d[b]&&d[b].abort(),d[b]=f.apply(this,arguments)):f.apply(this,arguments)}}}(jQuery),function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(e,h){function f(c){return c=b.event.fix(c),c.type=h,b.event.handle.call(this,c)}b.event.special[h]={setup:function(){this.addEventListener(e,f,!0)},teardown:function(){this.removeEventListener(e,f,!0)},handler:function(c){var j=arguments;return j[0]=b.event.fix(c),j[0].type=h,b.event.handle.apply(this,j)}}}),b.extend(b.fn,{validateDelegate:function(e,h,f){return this.bind(h,function(j){var d=b(j.target);if(d.is(e)){return f.apply(d,arguments)}})}})}(jQuery);(function(f){var c={},q,v,x,p=f.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),b=false;f.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){f.tooltip.blocked=!f.tooltip.blocked}};f.fn.extend({tooltip:function(y){y=f.extend({},f.tooltip.defaults,y);k(y);return this.each(function(){f.data(this,"tooltip",y);this.tOpacity=c.parent.css("opacity");this.tooltipText=this.title;f(this).removeAttr("title");this.alt=""}).mouseover(t).mouseout(h).click(h)},fixPNG:p?function(){return this.each(function(){var y=f(this).css("backgroundImage");if(y.match(/^url\(["']?(.*\.png)["']?\)$/i)){y=RegExp.$1;f(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+y+"')"}).each(function(){var z=f(this).css("position");if(z!="absolute"&&z!="relative"){f(this).css("position","relative")}})}})}:function(){return this},unfixPNG:p?function(){return this.each(function(){f(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){f(this)[f(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function k(y){if(c.parent){return}c.parent=f('<div id="'+y.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(f.fn.bgiframe){c.parent.bgiframe()}c.title=f("h3",c.parent);c.body=f("div.body",c.parent);c.url=f("div.url",c.parent)}function d(y){return f.data(y,"tooltip")}function j(y){if(d(this).delay){x=setTimeout(w,d(this).delay)}else{w()}b=!!d(this).track;f(document.body).bind("mousemove",e);e(y)}function t(){if(f.tooltip.blocked||this==q||(!this.tooltipText&&!d(this).bodyHandler)){return}q=this;v=this.tooltipText;if(d(this).bodyHandler){c.title.hide();var B=d(this).bodyHandler.call(this);if(B.nodeType||B.jquery){c.body.empty().append(B)}else{c.body.html(B)}c.body.show()}else{if(d(this).showBody){var A=v.split(d(this).showBody);c.title.html(A.shift()).show();c.body.empty();for(var z=0,y;(y=A[z]);z++){if(z>0){c.body.append("<br/>")}c.body.append(y)}c.body.hideWhenEmpty()}else{c.title.html(v).show();c.body.hide()}}if(d(this).showURL&&f(this).url()){c.url.html(f(this).url().replace("http://","")).show()}else{c.url.hide()}c.parent.addClass(d(this).extraClass);if(d(this).fixPNG){c.parent.fixPNG()}j.apply(this,arguments)}function w(){x=null;if((!p||!f.fn.bgiframe)&&d(q).fade){if(c.parent.is(":animated")){c.parent.stop().show().fadeTo(d(q).fade,q.tOpacity)}else{c.parent.is(":visible")?c.parent.fadeTo(d(q).fade,q.tOpacity):c.parent.fadeIn(d(q).fade)}}else{c.parent.show()}e()}function e(B){if(f.tooltip.blocked){return}if(B&&B.target.tagName=="OPTION"){return}if(!b&&c.parent.is(":visible")){f(document.body).unbind("mousemove",e)}if(q==null){f(document.body).unbind("mousemove",e);return}c.parent.removeClass("viewport-right").removeClass("viewport-bottom");var D=c.parent[0].offsetLeft;var C=c.parent[0].offsetTop;if(B){D=B.pageX+d(q).left;C=B.pageY+d(q).top;var z="auto";if(d(q).positionLeft){z=f(window).width()-D;D="auto"}c.parent.css({left:D,right:z,top:C})}var y=n(),A=c.parent[0];if(y.x+y.cx<A.offsetLeft+A.offsetWidth){D-=A.offsetWidth+20+d(q).left;c.parent.css({left:D+"px"}).addClass("viewport-right")}if(y.y+y.cy<A.offsetTop+A.offsetHeight){C-=A.offsetHeight+20+d(q).top;c.parent.css({top:C+"px"}).addClass("viewport-bottom")}}function n(){return{x:f(window).scrollLeft(),y:f(window).scrollTop(),cx:f(window).width(),cy:f(window).height()}}function h(A){if(f.tooltip.blocked){return}if(x){clearTimeout(x)}q=null;var z=d(this);function y(){c.parent.removeClass(z.extraClass).hide().css("opacity","")}if((!p||!f.fn.bgiframe)&&z.fade){if(c.parent.is(":animated")){c.parent.stop().fadeTo(z.fade,0,y)}else{c.parent.stop().fadeOut(z.fade,y)}}else{y()}if(d(this).fixPNG){c.parent.unfixPNG()}}})(jQuery);(function(c){var b=["3gp","3g2","7z","ace","air","swf","fxp","pdf","ppd","aac","aif","avi","dxf","dwf","bin","bmp","sh","btif","bz","bz2","csh","dae","cgm","wbs","dvi","dtd","dra","dts","dwg","xif","f4v","flv","gtar","gif","h261","h263","h264","ico","ief","jad","jar","class","jnlp","jpm","jpg","jpeg","jpgv","m3u","m4v","mdb","asf","exe","cab","clp","mdi","xls","xlsb","xltm","xlsm","chm","mny","xlsx","xltx","docx","dotx","ppt","mpp","pub","vsd","wm","wma","doc","wps","xps","mid","mpga","mpeg","mp4a","mp4","oda","ogx","oga","ogv","osf","odb","odi","odp","ots","odt","sxd","otf","psd","pic","pbm","png","ai","pbd","qt","rar","rm","rtf","rtx","svg","sdc","sda","sdd","smf","sdw","sgl","au","tiff","tar","ttf","vcd","wav","hlp","wsdl","zip"];c.validator.addMethod("noBinary",function(h,f){var e=c.trim(h).match(/[\w_.-]*?(?=[\?#])|[\w_.-]*$/i);if(typeof(e[0])!="undefined"){var d=e[0].split(".")}if(typeof(d[d.length-1])!="undefined"){var j=d[d.length-1]}return this.optional(f)||c.inArray(j.toLowerCase(),b)==-1});c.validator.addMethod("perc_remote",function(k,e,n){if(this.optional(e)){return"dependency-mismatch"}var h=this.previousValue(e);if(!this.settings.messages[e.name]){this.settings.messages[e.name]={}}n=typeof n=="string"&&{url:n}||n;var f=null;if("handler" in n){f=n.handler}if(h.old!==k){h.old=k;var d=this;this.startRequest(e);var j={};j[e.name]=k;c.ajax(c.extend(true,{url:n,mode:"abort",port:"validate"+e.name,dataType:"json",data:j,success:function(q){var t=f==null?q===true:f(d,e.name,k,q);if(t){var p=d.formSubmitted;d.prepareElement(e);d.formSubmitted=p;d.successList.push(e);d.showErrors()}else{var v={};if(typeof(q)!="string"){q=false}v[e.name]=h.message=q||d.defaultMessage(e,"perc_remote");d.showErrors(v)}h.valid=t;d.stopRequest(e,t)}},n));return"pending"}else{if(this.pending[e.name]){return"pending"}}return h.valid})})(jQuery);(function(b){b.PercDirtyController={dirtyState:false,dirtyObjectType:"object",utils:b.perc_utils,saveCallback:function(){},navigationEvent:function(){if(this.dirtyState){return"This "+this.dirtyObjectType+" contains unsaved changes.\nIf you continue, all changes will be lost.\nClick OK to proceed and discard changes,\nCancel to return to the "+this.dirtyObjectType+" you were editing."}},setDirty:function(d,c){this.dirtyState=d;this.dirtyObjectType=c;this.saveCallback=function(){}},setDirty:function(e,d,c){this.dirtyState=e;this.dirtyObjectType=d;this.saveCallback=c},isDirty:function(){return this.dirtyState},confirmIfDirty:function(f,c,d){if(this.dirtyState){var e=this.setConfirmDialogOptions(f,c,d);this.utils.confirm_dialog(e)}else{f()}},setConfirmDialogOptions:function(j,e,f){var c=this.dirtyObjectType;e=e||function(){};var d=this;var h={id:"perc-editor-page-dirty",title:"Unsaved Edits",success:function(){d.setDirty(false);j()},cancel:e,yes:"Continue anyway"};if(d.isSaveOptionAllowed()){h.dontSaveCallback=f&&f.dontSaveCallback?function(){d.setDirty(false);f.dontSaveCallback()}:h.success;h.type="SAVE_BEFORE_CONTINUE";h.question="You will lose your edits if you do not save. Save your edits before leaving this tab?";h.width="356px";h.save=d.saveCallback||function(){}}else{h.type="CANCEL_CONTINUE";h.question="This page contains unsaved edits. All edits will be lost. CONTINUE?";h.width="326px"}f=f||{};b.extend(h,f);return h},isSaveOptionAllowed:function(){var c=b.PercNavigationManager.getView();return(c==b.PercNavigationManager.VIEW_EDIT_TEMPLATE||c==b.PercNavigationManager.VIEW_EDITOR||c==b.PercNavigationManager.VIEW_WIDGET_BUILDER)}}})(jQuery);(function(K){K.PercNavigationManager={};var k="";var C={};var e="";var p="";var S="";var v="";var t={};var x="";var O="";var T=false;var z=false;var Z=false;var F="";var E=false;var B=false;var I=[];var h={};var X=false;var W=false;var A;var n="";var q=null;var R={URL_BASE:"/cm/app/",MODE_EDIT:"edit",MODE_READONLY:"readonly",VIEW_EDIT_ASSET:"editAsset",VIEW_HOME:"home",VIEW_DASHBOARD:"dash",VIEW_DESIGN:"design",VIEW_EDITOR:"editor",VIEW_SITE_ARCH:"arch",VIEW_PUBLISH:"publish",VIEW_USERS:"users",VIEW_WORKFLOW:"workflow",VIEW_WIDGET_BUILDER:"widgetbuilder",PATH_TYPE_PAGE:"page",PATH_TYPE_ASSET:"asset",PATH_TYPE_UNKNOWN:"unknown",VIEW_EDIT_TEMPLATE:"editTemplate"};function V(){K.perc_sessionTimeout();j();H();if(n){alert(n)}}function P(ab){var aa=ab.type;switch(aa){case"site":Q(ab);break;case"percPage":N(ab);break;case"Folder":G(ab);break;case"FSFolder":G(ab);break;default:if(ab.category=="ASSET"){U(ab)}}}function Q(ab){if(!(T||z)){K.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this site."});return}var aa=R.VIEW_SITE_ARCH;if(e==R.VIEW_DESIGN){aa=R.VIEW_DESIGN}if(e==R.VIEW_PUBLISH){aa=R.VIEW_PUBLISH}M(ab.id,aa,p,null,null,ab.path,null,null)}function N(ac,ab){var aa=K.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(aa!=null){K.PercViewReadyManager.showRenderingProgressWarning();return}K.PercFolderHelper().getAccessLevelById(ac.id,false,function(ae,ad){if(ae==K.PercFolderHelper().PERMISSION_ERROR){K.perc_utils.alert_dialog({title:"Error",content:ad});return}else{if(ab&&ad==K.PercFolderHelper().PERMISSION_READ){K.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the page '"+ac.name+"'."})}else{var ag=D(ac.path);var af=ab?R.MODE_EDIT:R.MODE_READONLY;M(ag,R.VIEW_EDITOR,af,ac.id,ac.name,ac.path,R.PATH_TYPE_PAGE,null)}}})}function G(ab){if(ab.type=="FSFolder"){var aa=ab.path;var ac=aa.split("/");if(K.Percussion.getCurrentFinderView()!=K.Percussion.PERC_FINDER_VIEW_COLUMN){return}else{if(ac.length>5){K.perc_utils.makeFolderEditable(ab)}else{K.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  It cannot be renamed."});return}}}}function U(ab,aa){K.PercFolderHelper().getAccessLevelById(ab.id,false,function(ad,ac){if(ad==K.PercFolderHelper().PERMISSION_ERROR){K.perc_utils.alert_dialog({title:"Error",content:ac});return}else{if(aa&&ac==K.PercFolderHelper().PERMISSION_READ){K.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the asset '"+ab.name+"'."})}else{var ae=aa?R.MODE_EDIT:R.MODE_READONLY;M(null,R.VIEW_EDIT_ASSET,ae,ab.id,ab.name,ab.path,R.PATH_TYPE_ASSET,null)}}})}function M(ah,ae,ad,ac,ai,ag,af,aa){var ab=f(ah,ae,ad,ac,ai,ag,af,aa);K.PercBlockUI(K.PercBlockUIMode.CURSORONLY);K.PercQueuePostAJAX(function(){y(ab)})}function Y(aa){return K.param.querystring(R.URL_BASE,aa)}function f(ah,ae,ad,ac,ai,ag,af,aa){var ab={view:ae};if(!J(ah)){K.extend(ab,{site:ah})}if(!J(ad)){K.extend(ab,{mode:ad})}if(!J(ac)){K.extend(ab,{id:ac})}if(!J(ai)){K.extend(ab,{name:ai})}if(!J(ag)){K.extend(ab,{path:ag})}if(E){K.extend(ab,{debug:"true"})}if(B){K.extend(ab,{at:"true"})}if(aa!=null&&typeof(aa)=="object"){K.extend(ab,{memento:JSON.stringify(aa)})}if(!J(af)){K.extend(ab,{pathType:af})}if(W){K.extend(ab,{disableJS:"true"})}return ab}function L(){var ad=window.location;var ae=ad.protocol;ae+="//";ae+=ad.host;var ab=0;for(var aa in t){++ab}var ac=ab==0?null:encodeURIComponent(t);ae+=Y(f(k,e,p,O,x,S,v,ac));return ae}function c(aa){var ab=R.PATH_TYPE_UNKNOWN;if(aa){if(aa.indexOf(K.perc_paths.ASSETS_ROOT+"/")==0){ab=R.PATH_TYPE_ASSET}if(aa.indexOf(K.perc_paths.SITES_ROOT+"/")==0){ab=R.PATH_TYPE_PAGE}}return ab}function D(ab){var aa=K.perc_paths.SITES_ROOT+"/";if(ab.indexOf(aa)===0){var ac=ab.indexOf("/",aa.length);if(ac==-1){ac=ab.length-1}return ab.substring(aa.length,ac)}return""}function j(){var aa=K.deparam.querystring();k=aa.site;e=aa.view;p=aa.mode;S=aa.path;O=aa.id;x=aa.name;E=aa.debug;B=aa.at;v=aa.pathType;n=aa.warningMessage;W=(aa.disableJS=="true"?true:false);if(typeof(aa.memento)!="undefined"){t=JSON.parse(decodeURIComponent(aa.memento))}}function H(){F=K.cookie("perc_userName");T=K.cookie("perc_isAdmin")=="true"?true:false;z=K.cookie("perc_isDesigner")=="true"?true:false;Z=K.cookie("perc_isAccessibilityUser")=="true"?true:false;K.perc_utils.info("UserInfo","userName: "+F+", isAdmin: "+T+", isDesigner: "+z+", isAccessibilityUser: "+Z)}function y(ad){var ab=Y(ad);var aa=I.length;if(aa==0){window.location.href=ab;return}var ae=b();h[ae]={url:ab,listenerTotal:aa,continueFlag:true,listenersComplete:0};for(var ac=0;ac<aa;ac++){K.unblockUI();I[ac](ab,ae,w,ad)}}function w(ac,aa){var ab=h[ac];ab.continueFlag&=aa;++ab.listenersComplete;if(ab.listenersComplete==ab.listenerTotal){if(ab.continueFlag){K.PercBlockUI(K.PercBlockUIMode.CURSORONLY);window.location.href=ab.url}else{delete h[ac];K.unblockUI()}}}function b(){var ad=[];var aa="0123456789ABCDEF";for(var ab=0;ab<32;ab++){ad[ab]=aa.substr(Math.floor(Math.random()*16),1)}ad[12]="4";ad[16]=aa.substr((ad[16]&3)|8,1);var ac=ad.join("");return ac}function J(aa){return(aa==null||aa.length==0)}var d={getBookmark:L,getSiteName:function(){return k},getMemento:function(){return t},clearMemento:function(){t={}},getView:function(){return e},getMode:function(){return p},setMode:function(aa){p=aa},clearId:function(){O=""},getId:function(){return O},getName:function(){return x},setName:function(aa){x=aa},getPath:function(){return S},setPath:function(aa){S=aa},getUserName:function(){return F},isAutoTest:function(){return B},isDebug:function(){return E},isAdmin:function(){return T},isDesigner:function(){return z},isAccessibilityUser:function(){return Z},isJavascriptOff:function(){return W},isReopenAllowed:function(){return X},setReopenAllowed:function(aa){X=aa},getPathType:function(){if(v){return v}return c(S)},goTo:function(ab,aa){if(aa){M(k,ab,null,null,null,S,null,null)}else{M(k,ab,null,O,x,S,v,null)}},goToDashboard:function(){d.goTo(R.VIEW_DASHBOARD,true)},goToLocation:function(ae,ah,ac,af,ag,ab,ad,aa){M(ah,ae,ac,af,ag,ab,ad,aa)},handleOpenAsset:U,handleOpenPage:N,registerFinder:function(ab){q=ab;ab.addOpenListener(P);ab.addPathChangedListener(function(ae){if(ab.finderOpenInProgress){return}var ac=ae.slice(1);var ad="/"+ac.join("/");S=ad});var aa=S;S=S?S:"/Sites";if(S){q.open(S.split("/"),function(){S=aa})}},addLocationChangeListener:function(aa){if(K.inArray(aa,I)==-1){I.push(aa)}},removeLocationChangeListener:function(ac){if(K.inArray(ac,openListeners)>-1){var aa=I.length;for(var ab=0;ab<aa;ab++){if(I[ab]===ac){I.splice(ab,1);return}}}},openPathItem:function(aa){K.PercPathService.getPathItemForPath(aa,function(ab,ac){if(ab==K.PercServiceUtils.STATUS_SUCCESS){ac.PathItem.path=aa;P(ac.PathItem)}else{K.perc_utils.alert_dialog({title:"Error",content:ac});return}})},openPage:function(ab,aa){K.PercPathService.getPathItemForPath(ab,function(ac,ad){if(ac==K.PercServiceUtils.STATUS_SUCCESS){ad.PathItem.path=ab;N(ad.PathItem,aa)}else{K.perc_utils.alert_dialog({title:"Error",content:ad});return}})},openAsset:function(aa){K.PercPathService.getPathItemById(aa.id,function(ab,ac){if(ab==K.PercServiceUtils.STATUS_SUCCESS){ac.PathItem.path=aa.path;U(ac.PathItem,false)}else{K.perc_utils.alert_dialog({title:"Error",content:ac});return}})},openFolderDialog:function(aa){K.PercPathService.getPathItemForPath(aa,function(ab,ac){if(ab==K.PercServiceUtils.STATUS_SUCCESS){ac.PathItem.path=aa;G(ac.PathItem)}else{K.perc_utils.alert_dialog({title:"Error",content:ac});return}})},loadSiteProperties:function(aa,ab){K.PercSiteService.getSiteProperties(aa,function(ad,ac){if(ad==K.PercServiceUtils.STATUS_SUCCESS){C=ac.SiteProperties;if(typeof(ab)=="function"){ab(ac.SiteProperties)}}})},getSiteProperties:function(){return C},setTemplateModel:function(aa){A=aa},getTemplateModel:function(aa){return A}};K.extend(K.PercNavigationManager,d);K.extend(K.PercNavigationManager,R);V()})(jQuery);(function(b){b.PercFolderHelper=function(){var d={getAccessLevelByPath:c,getAccessLevelById:e};var h={PERMISSION_READ:"READ",PERMISSION_WRITE:"WRITE",PERMISSION_ADMIN:"ADMIN",PERMISSION_SUCCESS:"SUCCESS",PERMISSION_ERROR:"ERROR"};var f={};b.extend(f,d);b.extend(f,h);return f;function c(n,j,p){var k=b.perc_finder().getPathItemByPath(n);if(!j||!k){b.PercPathService.getPathItemForPath(n,function(t,q){if(t==b.PercServiceUtils.STATUS_ERROR){p(h.PERMISSION_ERROR,q);return}p(h.PERMISSION_SUCCESS,q.PathItem.accessLevel)})}else{p(h.PERMISSION_SUCCESS,k.accessLevel)}}function e(j,k,p){var n=b.perc_finder().getPathItemById(j);if(!k||!n){b.PercPathService.getPathItemById(j,function(t,q,v){if(t==b.PercServiceUtils.STATUS_ERROR){p(h.PERMISSION_ERROR,q,v);return}p(h.PERMISSION_SUCCESS,q.PathItem.accessLevel)})}else{p(h.PERMISSION_SUCCESS,n.accessLevel)}}}})(jQuery);(function(b){b.PercFolderPropertiesDialog=function(){var f;var d="";var e="";var h="";function c(n,y){b.PercPathService.getFolderProperties(n.id,A);var j=30;var x;var w;var p=undefined;function A(C,J){var H=this;if(C==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Folder not found: "+n.path});y("",false);return}var E=n.path.split("/");if(!d){d=n.folderPath;e=n.folderPaths;h=n.type}var F=(E!=undefined&&E.length==4&&E[1]=="Assets");var I=b.PercFolderHelper().PERMISSION_ADMIN;var D=J.data.FolderProperties;var G=[];if(D.permission){I=D.permission.accessLevel;if(D.permission.writePrincipals){G=D.permission.writePrincipals;G=b.isArray(G)?G:[G]}}var B=[];B[0]=I==b.PercFolderHelper().PERMISSION_READ?" selected='true' ":"";B[1]=I==b.PercFolderHelper().PERMISSION_WRITE?" selected='true' ":"";B[2]=I==b.PercFolderHelper().PERMISSION_ADMIN?" selected='true' ":"";w=b("<div><p class='perc-field-error' id='perc-save-error'></p><div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-folder-general-properties-container'><div><label for='perc-folder-name'class='perc-required-field'>"+I18N.message("perc.ui.folderPropsDialog.label@Name")+":</label> <br/> <input type='text' class='required' tabindex='"+j+"' id='perc-folder-name' name='folder_name' maxlength='50' value=\""+D.name+"\"/> <br/><label id='perc_folder_duplicate_error' style='display: none;' class='perc_field_error'></label><br/></div></div></div><div class='fieldGroup'><div id='perc-user-permissions-container'><label for='perc-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/><select name='perc-folder-permission' id='perc-folder-permission'>     <option id='perc-folder-permission-option-read'  "+B[0]+" value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' "+B[1]+" value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option>     <option id='perc-folder-permission-option-admin' "+B[2]+" value='"+b.PercFolderHelper().PERMISSION_ADMIN+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Admin")+"</option></select><input type='hidden' id='perc-folder-id' value='"+D.id+"'></input><input type='hidden' id='perc-folder-oldname' value=\""+D.name+"\"></input><div id='perc-folder-permission-users'/></div></div><div class='fieldGroup' id='perc-asset-folder-security' style='display:none;'><div id='perc-asset-folder-sites-container'><label>Assets in this folder are available to:<br/></label></div></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.folderPropsDialog.title@Folder Properties"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var K=new Array();if(H.listEdit.isEnabled()){var L=H.listEdit.getListItems();for(u=0;u<L.length;u++){K[u]={name:L[u],type:"USER"}}}q(K)},id:"perc-folder-props-save"},Cancel:{click:function(){z()},id:"perc-folder-props-cancel"}},id:"perc-folder-props-dialog",width:"500px"});var v=[];for(u=0;u<G.length;u++){v[u]=G[u].name}b.PercUserService.getUsers(function(K,L){if(K==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",L);return}H.listEdit=b.PercListEditorWidget({container:"perc-folder-permission-users",items:v,results:b.perc_utils.convertCXFArray(L.UserList.users),toggler:b("#perc-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")});k();if(F){b.PercServiceUtils.makeJsonRequest(b.perc_paths.SITES_ALL+"/",b.PercServiceUtils.TYPE_GET,false,function(N,V){if(N==b.PercServiceUtils.STATUS_SUCCESS){b("#perc-asset-folder-security").show();var T=w.find("#perc-asset-folder-sites-container");var Q=b("<select name='allowed-sites' id='allowed-sites' multiple='multiple'></select>");T.append(Q);var P=[];if(D.allowedSites!=undefined){if(typeof(D.allowedSites)=="number"){P.push(D.allowedSites.toString())}else{P=D.allowedSites.split(",")}}f=P.sort().join(",");var S=V.data.SiteSummary;for(var U=0;U<S.length;U++){var M=(b.inArray(S[U].siteId.toString(),P)>=0);var O=b("<option/>").attr("value",S[U].siteId).attr("title",S[U].name).text(S[U].name);if(M){O.attr("selected","selected")}Q.append(O)}p=b("#allowed-sites").multiselect({height:175,minWidth:225,checkAllText:"Select all",uncheckAllText:"Deselect all",noneSelectedText:"All sites allowed",selectedText:function(X,Y,W){if(X==0){return"All sites allowed"}else{return"Some sites allowed"}}});b("input[name=multiselect_allowed-sites]").unbind("click");b("input[name=multiselect_allowed-sites]").bind("click",function(W){b("#allowed-sites").multiselect("update")});b("a.ui-multiselect-all").unbind("click.multiselect");b("a.ui-multiselect-all").bind("click.multiselect",function(W){b("#allowed-sites").multiselect("checkAll")});b("a.ui-multiselect-none").unbind("click.multiselect");b("a.ui-multiselect-none").bind("click.multiselect",function(W){b("#allowed-sites").multiselect("uncheckAll")})}else{var R=b.PercServiceUtils.extractDefaultErrorMessage(V.request);b.perc_utils.alert_dialog({title:"Error",content:R})}})}else{b("#perc-asset-folder-security").hide()}})}function z(){w.remove()}function q(E){if(b.trim(b("#perc-folder-name").val()).length<1){b("#perc-folder-name").val("");b("#perc_folder_duplicate_error").text("This field is required.");b("#perc_folder_duplicate_error").show();return}var D=b.trim(b("#perc-folder-name").val());D=b.perc_textFilters.WINDOWS_FILE_NAME(D);var C={FolderProperties:{name:D,id:b("#perc-folder-id").val(),permission:{accessLevel:b("#perc-folder-permission").val(),writePrincipals:E}}};if(p!=undefined){var B=[];b.each(p.multiselect("getChecked"),function(F){B.push(b(this).val())});if(B.length>0){C.FolderProperties.allowedSites=B.sort().join(",")}else{C.FolderProperties.allowedSites=""}}if(f!=undefined&&C.FolderProperties.allowedSites!=f){var v={id:"perc-folder-properties-changed-allowed-sites-warning",title:"Warning",content:"Please note that content already queued for incremental publish will not be affected by this security change.",okCallBack:function(){b.PercPathService.saveFolderProperties(C,t)}};b.perc_utils.alert_dialog(v)}else{b.PercPathService.saveFolderProperties(C,t)}}function t(C,v){if(C==b.PercServiceUtils.STATUS_SUCCESS){var B=b.trim(b("#perc-folder-name").val());w.remove();if(d.match("^/Sites/")||d.match("^//Sites/")){b.PercRedirectHandler.createRedirect(d,e+"/"+B,"folder").fail(function(G){b.perc_utils.alert_dialog({title:"Redirect creation error",content:G,okCallBack:function(){y(B)}})}).done(function(){y(B)})}else{y(B)}}else{var F=b.PercServiceUtils.extractDefaultErrorMessage(v.request);var D=b.PercServiceUtils.extractFieldErrorCode(v.request);if(D=="`FolderProperties#name"){var E="Cannot rename folder '"+b("#perc-folder-oldname").val()+"' to '"+b.trim(b("#perc-folder-name").val())+"' because an object with the same name already exists.";b("#perc_folder_duplicate_error").text(E);b("#perc_folder_duplicate_error").show()}else{if(D=="saveFolderProperties#reservedName"){b("#perc_folder_duplicate_error").text(F);b("#perc_folder_duplicate_error").show()}else{b.perc_utils.alert_dialog({title:"Error",content:F})}}}}function k(){var B=b("#perc-folder-props-dialog");var v=[{groupName:"perc-folder-general-properties-container",groupLabel:"General"},{groupName:"perc-user-permissions-container",groupLabel:"Permissions"},{groupName:"perc-asset-folder-sites-container",groupLabel:"Security"}];b.each(v,function(D){var E=(D==0)?"perc-section-items-minimizer":"perc-section-items-maximizer";var C="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span class='perc-min-max "+E+"' ></span>"+this.groupLabel+"</div></div>";B.find("#"+this.groupName).before(C);D!=0&&B.find("#"+this.groupName).hide()});B.find(".perc-section-label").unbind().click(function(){var C=b(this);C.find(".perc-min-max").toggleClass("perc-section-items-minimizer").toggleClass("perc-section-items-maximizer");B.find("#"+C.attr("groupName")).toggle()})}b.perc_filterField(b("#perc-folder-name"),b.perc_textFilters.URL)}return{open:c}}})(jQuery);(function(d){var b=13;var c=5;d.PercFinderTreeConstants={ROOT_PATH_ALL:"All",ROOT_PATH_SITES:"Sites",ROOT_PATH_ASSETS:"Assets",FOLDERS_ONLY:"Folders",SECTIONS_ONLY:"Sections",MAX_RESULTS:200,FOLDER_ID:null,convertFolderPathToPath:function(e){var f=null;if(!e){return f}if(e.indexOf("//Sites")!=-1){f=e.replace("//Sites",d.perc_paths.SITES_ROOT)}else{if(e.indexOf("//Folders/$System$/Assets")!=-1){f=e.replace("//Folders/$System$/Assets",d.perc_paths.ASSETS_ROOT)}}return f}};d.widget("ui.PercFinderTree",{settings:{rootPath:d.PercFinderTreeConstants.ROOT_PATH_ALL,showFoldersOnly:false,filter:null,height:"200px",width:"290px",onClick:function(e){},onRenderComplete:function(e,f){},classNames:{},initialPath:null,getInitialPathItem:function(e){},onQueryActivate:function(){return true},onQuerySelect:function(){return true},clickFolderMode:3,acceptableTypes:"",acceptableCategories:""},_init:function(){var e=this;d.extend(this.settings,this.options);var f=this.settings.rootPath;if(!(f==d.PercFinderTreeConstants.ROOT_PATH_ALL||f==d.PercFinderTreeConstants.ROOT_PATH_SITES||f==d.PercFinderTreeConstants.ROOT_PATH_ASSETS)){this.settings.rootPath=d.PercFinderTreeConstants.ROOT_PATH_ALL}d(this.element).css("width",this.settings.width);d(this.element).css("height",this.settings.height);d(this.element).css("overflow","auto");d(this.element).append(d("<div id='perc-finder-tree'></div>"));this.intialPathExpanded=true;this.initialRenderCompleted=false;this.intialPathKey=null;if(this.settings.initialPath&&this.settings.initialPath!=null&&d.trim(this.settings.initialPath).length>0){this.intialPathExpanded=false;this.intialPathKey=this._generateKey(this.settings.initialPath)}d.PercServiceUtils.makeJsonRequest(d.perc_paths.PATH_FOLDER+"/",d.PercServiceUtils.GET,false,function(j,h){if(j==d.PercServiceUtils.STATUS_ERROR){var k=d.PercServiceUtils.extractDefaultErrorMessage(request);d.perc_utils.alert_dialog({title:"Error",content:k});dtnode.setLazyNodeStatus(DTNodeStatus_Error)}else{e._initTree(h.data)}},null)},_initTree:function(j){var f=this;var k=[];var e=f._normalizedPath(f.settings.initialPath);d.each(j.PathItem,function(){var n=f.settings.rootPath==d.PercFinderTreeConstants.ROOT_PATH_ALL||f.settings.rootPath==this.name;if(this.name=="Design"||this.name=="Search"){n=false}if(n){var q=f._makeDtNode(this);d.extend(q,{unselectable:true});var p=f._normalizedPath(this.path);if(e==p){d.extend(q,{activate:true});f.intialPathExpanded=true}k.push(q)}});var h=d(this.element).find("#perc-finder-tree").dynatree({selectMode:1,rootVisible:false,autoFocus:false,imagePath:" ",children:k,clickFolderMode:f.settings.clickFolderMode,onQuerySelect:f.settings.onQuerySelect,onQueryActivate:f.settings.onQueryActivate,classNames:f.settings.classNames,onRender:function(q){if(q.data.type!=="SHOW_MORE"){var n=d(q.span);var p=n.parents("ul").length-1;n.css("padding-left",p*b+c)}else{var n=d(q.span);var p=n.parents("ul").length-3;n.css("padding-left",p*b+c)}},onLazyRead:function(n){f._loadChildren(n)},onClick:function(n){if(n.data.type==="SHOW_MORE"&&!n.data.isShowing){n.data.isShowing=true;n.data.icon="/cm/css/dynatree/skin/loading.gif";n.render();f._loadMoreChildren(n);return}f._onClick(n);f.getFolderID(n)},onExpand:function(n,p){if(p.type==="SHOW_MORE"){return}f._onExpand(n,p)}});h.dynatree("getRoot").visit(function(n){n.expand(true)})},_loadChildren:function(k){var f=this,h,e=k.data,j;if(f.settings.showFoldersOnly){h=d.perc_paths.PATH_FOLDER+e.pathItem.path}else{h=d.perc_paths.PATH_PAGINATED_FOLDER+e.pathItem.path+"?startIndex=1&maxResults="+d.PercFinderTreeConstants.MAX_RESULTS;if(f.settings.acceptableTypes){h+="&type="+f.settings.acceptableTypes}if(f.settings.acceptableCategories){h+="&category="+f.settings.acceptableCategories}}d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.GET,false,function(p,n){if(p==d.PercServiceUtils.STATUS_ERROR){var q=d.PercServiceUtils.extractDefaultErrorMessage(request);d.perc_utils.alert_dialog({title:"Error",content:q});k.setLazyNodeStatus(DTNodeStatus_Error)}else{f._addChildren(k,n.data)}},null)},_addChildren:function(n,k){var j=null,f=this;var e=f.settings.showFoldersOnly?k.PathItem:k.PagedItemList.childrenInPage;if(!e){n.setLazyNodeStatus(DTNodeStatus_Ok);return}if(!d.isArray(e)){e=[e]}d.each(e,function(){var t=f.settings.showFoldersOnly&&this.leaf;if(typeof this.category!="undefined"&&f.settings.filter!=null){t=t||(f.settings.filter==d.PercFinderTreeConstants.FOLDERS_ONLY&&this.category!="FOLDER"&&this.category!="SYSTEM");t=t||(f.settings.filter==d.PercFinderTreeConstants.SECTIONS_ONLY&&this.category!="SECTION_FOLDER")}if(!t){var w=f._makeDtNode(this);var q=n.addChild(w);if(!f.intialPathExpanded){var v=f._normalizedPath(this.path);var p=f._normalizedPath(f.settings.initialPath);if(p==v){q.activate();f.settings.getInitialPathItem(q.data.pathItem);f.intialPathExpanded=true}else{if(p.indexOf(v)!=-1){j=q}}}}});if(!f.settings.showFoldersOnly&&k.PagedItemList.startIndex+d.PercFinderTreeConstants.MAX_RESULTS-1<k.PagedItemList.childrenCount){var h=f._makeMoreResultsDtNode(k.PagedItemList.startIndex+d.PercFinderTreeConstants.MAX_RESULTS,n);n.addChild(h)}f._adjustScrollWidths();n.setLazyNodeStatus(DTNodeStatus_Ok);if(j){j.expand(true)}else{if(!f.initialRenderCompleted){f.settings.onRenderComplete(n.data.pathItem,n);f.initialRenderCompleted=true}}},_loadMoreChildren:function(j){var f=this,h,e=j.data;h=d.perc_paths.PATH_PAGINATED_FOLDER+e.parentNode.data.pathItem.path+"?startIndex="+e.startIndex+"&maxResults="+d.PercFinderTreeConstants.MAX_RESULTS;d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.GET,false,function(n,k){if(n==d.PercServiceUtils.STATUS_ERROR){var p=d.PercServiceUtils.extractDefaultErrorMessage(request);d.perc_utils.alert_dialog({title:"Error",content:p});j.setLazyNodeStatus(DTNodeStatus_Error)}else{f._addChildren(e.parentNode,k.data);j.remove()}},null)},_onExpand:function(e,f){this._adjustScrollWidths()},_adjustScrollWidths:function(e){},_onClick:function(e){this.settings.onClick(e.data.pathItem)},getSelectedItems:function(){var f=[];var e=d("#perc-finder-tree").dynatree("getSelectedNodes");d.each(e,function(){f.push(this.data.pathItem)});return f},getFolderID:function(j){var f=j.data.pathItem.id;if(typeof f!="undefined"){var h=f.split("-");var e=h[2];d.PercFinderTreeConstants.FOLDER_ID=e}return e},getDynaTree:function(){return d("#perc-finder-tree").dynatree("getTree")},_makeDtNode:function(n){var e=this;var h=d.perc_utils.extract_path(n.path);var j=d.perc_utils.choose_icon(n.type,n.icon,h);var f=this._generateKey(n.path);var k={title:n.name,isFolder:!n.leaf,isLazy:true,icon:j,tooltip:n.name,pathItem:n,key:f};if(n.leaf){d.extend(k,{addClass:"perc-hide-node-expander"})}return k},_makeMoreResultsDtNode:function(k,e){var f=this;var h="-- Show More --";var j={title:h,isLazy:true,tooltip:h,addClass:"perc-hide-node-expander",startIndex:k,type:"SHOW_MORE",isShowing:false,parentNode:e};return j},_generateKey:function(e){if(!e){return null}if(e&&e.length>1&&e.substring(e.length-1)=="/"){e=e.slice(0,e.length-1)}return e.replace(/[^a-zA-Z0-9/]/g,"_").replace(/\//g,"-")},_normalizedPath:function(e){if(!e||e.length<1){return e}if(e.substring(e.length-1,e.length)!="/"){return e+"/"}return e}})})(jQuery);(function(c){c.PercPathSelectionDialog={open:b};function b(v){var j={okCallback:function(){},cancelCallback:function(){},dialogTitle:"Select path",rootPath:c.PercFinderTreeConstants.ROOT_PATH_SITES,emptySelectionMessage:"Please select a page.",initialPath:null,createNew:{},showFoldersOnly:false,selectedItemValidator:c.noop,acceptableTypes:"",acceptableCategories:""};var f=null;var h=c.extend(j,v);if(!h.initialPath){h.initialPath=null}var e=null;var k=null;var d=t(h);var n={};var p={click:function(){if(h.selectedItemValidator&&c.isFunction(h.selectedItemValidator)){var w=h.selectedItemValidator(e);if(w!=null){d.find("label[for='perc-path-location']").text(w).show();return}}k.remove();h.okCallback(e)},id:"perc-path-selection-dialog-save"};var q={click:function(){k.remove();h.cancelCallback()},id:"perc-path-selection-dialog-cancel"};n.Ok=p;n.Cancel=q;k=c(d).perc_dialog({resizable:false,title:h.dialogTitle,modal:true,closeOnEscape:true,percButtons:n,id:"perc-path-selection-dialog",width:400});function t(){var z=h.initialPath?h.initialPath:"";var x=c('<div class="perc-path-selector-container"><div class="perc-label" style="height:10px;"><span style="float:left;font-weight:bold">Select from path:</span><span class="perc-create-new-button" style="float:right;margin-right:55px;display:none"></span></div></div>');if(h.createNew&&h.createNew.label&&h.createNew.onclick){var w=function(A){k.remove();h.okCallback(A)};var y=function(){};x.find(".perc-create-new-button").show().click(function(){h.createNew.onclick(w,y)}).append('<a class="perc-font perc-font-button" href="#"><i class="'+h.createNew.iconclass+'"></i> '+h.createNew.label+"</a>")}f=c("<div class='perc-path-selection-tree' style='margin-top:20px;'>").PercFinderTree({rootPath:h.rootPath,initialPath:h.initialPath,showFoldersOnly:h.showFoldersOnly,acceptableTypes:h.acceptableTypes,acceptableCategories:h.acceptableCategories,height:"230px",width:"600px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},getInitialPathItem:function(A){e=A},onClick:function(A){e=A;c("#perc_selected_path").html(A.path);if(c.inArray(A.category,h.selectableTypes)!=-1){d.find("label[for='perc-select-blog-location-tree']").hide()}}});x.append(f);x.append('<div style="margin-top:10px;"><span style="color:gray; font-weight:bold">Selected item path:</span> <span id="perc_selected_path">'+z+"</span></div>");x.append('<label for="perc-path-location" class="perc_field_error" style="display: none;"></label>');return x}}})(jQuery);(function(e){e.PercCreateNewAssetDialog=function(k,j,p){e.PercCreateNewAssetDialogData={};e.PercCreateNewAssetDialogData.successCallback=j;e.PercCreateNewAssetDialogData.cancelCallback=p;e.PercAssetService.getAssetEditor(k,function(t,q){if(t==e.PercServiceUtils.STATUS_ERROR){e.perc_utils.alert_dialog({title:"Error creating new asset",content:q})}if(e.PercFinderTreeConstants.FOLDER_ID!=null){q.AssetEditor.legacyFolderId=e.PercFinderTreeConstants.FOLDER_ID}e.PercCreateNewAssetDialogData.assetEditor=q.AssetEditor;n()});function n(){var v=e.PercCreateNewAssetDialogData.assetEditor;var t=v.url+"&sys_folderid="+v.legacyFolderId+"&sys_workflowid="+v.workflowId;var q="<div id='create-new-asset-content-dlg'><iframe name='create-new-asset-content-frame' id='create-new-asset-content-frame'height='100%' FRAMEBORDER='0' width='100%' src='"+t+"'></iframe></div>";dialog=e(q).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:815,width:965,percButtons:{Save:{click:function(){c(j)},id:"perc-create-new-asset-save-button"},Cancel:{click:function(){dialog.remove();e.PercCreateNewAssetDialogData.cancelCallback()},id:"perc-create-new-asset-cancel-button"}},id:"perc-create-new-asset-dialog"})}};function c(j){e.PercBlockUI();var k=e.PercCreateNewAssetDialogData.assetEditor;h("#perc-content-edit-sys_workflowid").val(k.workflowId);var p=k.url;p=p.split("?")[0];var q=k.legacyFolderId;p=p+"?sys_folderid="+q+"&sys_asset_folderid="+q;h("#perc-content-form").attr("action",p);var n=true;e.each(e.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){n=false}});if(!n){e.unblockUI();return}e.PercContentPreSubmitHandlers.clearHandlers();e("#create-new-asset-content-frame").contents().find("#perc-content-form").submit();e("#create-new-asset-content-frame").unbind("load",b).load(b)}function d(n,k,j){return true}function b(){if(e("#create-new-asset-content-frame").contents().find("#perc-content-edit-errors").length>0){e.unblockUI();return}var j="-1-101-"+e("#create-new-asset-content-frame").contents().find("[name=sys_contentid]").val();e("#create-new-asset-content-frame").remove();e("#create-new-asset-content-dlg").remove();e.PercPathService.getPathItemById(j,function(n,k){e.unblockUI();if(n==e.PercServiceUtils.STATUS_ERROR){e.perc_utils.alert_dialog({title:"Error Selecting Asset",content:"The asset has been saved, but failed to select it."});e.PercCreateNewAssetDialogData.cancelCallback();return}e.PercCreateNewAssetDialogData.successCallback(k.PathItem)})}function h(j){var k=f();return e(j,k)}function f(){var j=null;for(i=0;i<frames.length;i++){if(frames[i].name=="create-new-asset-content-frame"){j=frames[i].document;break}}return j}})(jQuery);(function(b){b.fn.extend({autocomplete:function(c,d){var e=typeof c=="string";d=b.extend({},b.Autocompleter.defaults,{url:e?c:null,data:e?null:c,delay:e?b.Autocompleter.defaults.delay:10,max:d&&!d.scroll?10:150},d);d.highlight=d.highlight||function(f){return f};d.formatMatch=d.formatMatch||d.formatItem;return this.each(function(){new b.Autocompleter(this,d)})},result:function(c){return this.bind("result",c)},search:function(c){return this.trigger("search",[c])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(c){return this.trigger("setOptions",[c])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(t,j){var d={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var c=b(t).attr("autocomplete","off").addClass(j.inputClass);var p;var y="";var v=b.Autocompleter.Cache(j);var f=0;var D;var G={mouseDownOnSelect:false};var A=b.Autocompleter.Select(j,t,e,G);var F;b.browser.opera&&b(t.form).bind("submit.autocomplete",function(){if(F){F=false;return false}});c.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(H){D=H.keyCode;switch(H.keyCode){case d.UP:H.preventDefault();if(A.visible()){A.prev()}else{C(0,true)}break;case d.DOWN:H.preventDefault();if(A.visible()){A.next()}else{C(0,true)}break;case d.PAGEUP:H.preventDefault();if(A.visible()){A.pageUp()}else{C(0,true)}break;case d.PAGEDOWN:H.preventDefault();if(A.visible()){A.pageDown()}else{C(0,true)}break;case j.multiple&&b.trim(j.multipleSeparator)==","&&d.COMMA:case d.TAB:case d.RETURN:if(e()){H.preventDefault();F=true;return false}break;case d.ESC:A.hide();break;default:clearTimeout(p);p=setTimeout(C,j.delay);break}}).focus(function(){f++}).blur(function(){f=0;if(!G.mouseDownOnSelect){B()}}).click(function(){if(f++>1&&!A.visible()){C(0,true)}}).bind("search",function(){var H=(arguments.length>1)?arguments[1]:null;function I(M,L){var J;if(L&&L.length){for(var K=0;K<L.length;K++){if(L[K].result.toLowerCase()==M.toLowerCase()){J=L[K];break}}}if(typeof H=="function"){H(J)}else{c.trigger("result",J&&[J.data,J.value])}}b.each(k(c.val()),function(J,K){h(K,I,I)})}).bind("flushCache",function(){v.flush()}).bind("setOptions",function(){b.extend(j,arguments[1]);if("data" in arguments[1]){v.populate()}}).bind("unautocomplete",function(){A.unbind();c.unbind();b(t.form).unbind(".autocomplete")});function e(){var I=A.selected();if(!I){return false}var H=I.result;y=H;if(j.multiple){var J=k(c.val());if(J.length>1){H=J.slice(0,J.length-1).join(j.multipleSeparator)+j.multipleSeparator+H}H+=j.multipleSeparator}c.val(H);E();c.trigger("result",[I.data,I.value]);return true}function C(J,I){if(D==d.DEL){A.hide();return}var H=c.val();if(!I&&H==y){return}y=H;H=n(H);if(H.length>=j.minChars){c.addClass(j.loadingClass);if(!j.matchCase){H=H.toLowerCase()}h(H,q,E)}else{w();A.hide()}}function k(I){if(!I){return[""]}var J=I.split(j.multipleSeparator);var H=[];b.each(J,function(K,L){if(b.trim(L)){H[K]=b.trim(L)}});return H}function n(H){if(!j.multiple){return H}var I=k(H);return I[I.length-1]}function z(H,I){if(j.autoFill&&(n(c.val()).toLowerCase()==H.toLowerCase())&&D!=d.BACKSPACE){c.val(c.val()+I.substring(n(y).length));b.Autocompleter.Selection(t,y.length,y.length+I.length)}}function B(){clearTimeout(p);p=setTimeout(E,200)}function E(){var H=A.visible();A.hide();clearTimeout(p);w();if(j.mustMatch){c.search(function(I){if(!I){if(j.multiple){var J=k(c.val()).slice(0,-1);c.val(J.join(j.multipleSeparator)+(J.length?j.multipleSeparator:""))}else{c.val("")}}})}if(H){b.Autocompleter.Selection(t,t.value.length,t.value.length)}}function q(I,H){if(H&&H.length&&f){w();A.display(H,I);z(I,H[0].value);A.show()}else{E()}}function h(I,K,H){if(!j.matchCase){I=I.toLowerCase()}var J=v.load(I);if(J&&J.length){K(I,J)}else{if((typeof j.url=="string")&&(j.url.length>0)){var L={timestamp:+new Date()};b.each(j.extraParams,function(M,N){L[M]=typeof N=="function"?N():N});b.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:j.dataType,url:j.url,data:b.extend({q:n(I),limit:j.max},L),success:function(N){var M=j.parse&&j.parse(N)||x(N);v.add(I,M);K(I,M)}})}else{A.emptyList();H(I)}}}function x(K){var H=[];var J=K.split("\n");for(var I=0;I<J.length;I++){var L=b.trim(J[I]);if(L){L=L.split("|");H[H.length]={data:L,value:L[0],result:j.formatResult&&j.formatResult(L,L[0])||L[0]}}}return H}function w(){c.removeClass(j.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(c){return c[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(d,c){return d.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+c.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};b.Autocompleter.Cache=function(d){var h={};var e=0;function k(q,p){if(!d.matchCase){q=q.toLowerCase()}var n=q.indexOf(p);if(d.matchContains=="word"){n=q.toLowerCase().search("\\b"+p.toLowerCase())}if(n==-1){return false}return n==0||d.matchContains}function j(p,n){if(e>d.cacheLength){c()}if(!h[p]){e++}h[p]=n}function f(){if(!d.data){return false}var p={},n=0;if(!d.url){d.cacheLength=1}p[""]=[];for(var t=0,q=d.data.length;t<q;t++){var x=d.data[t];x=(typeof x=="string")?[x]:x;var w=d.formatMatch(x,t+1,d.data.length);if(w===false){continue}var v=w.charAt(0).toLowerCase();if(!p[v]){p[v]=[]}var y={value:w,data:x,result:d.formatResult&&d.formatResult(x)||w};p[v].push(y);if(n++<d.max){p[""].push(y)}}b.each(p,function(z,A){d.cacheLength++;j(z,A)})}setTimeout(f,25);function c(){h={};e=0}return{flush:c,add:j,populate:f,load:function(v){if(!d.cacheLength||!e){return null}if(!d.url&&d.matchContains){var t=[];for(var n in h){if(n.length>0){var w=h[n];b.each(w,function(y,q){if(k(q.value,v)){t.push(q)}})}}return t}else{if(h[v]){return h[v]}else{if(d.matchSubset){for(var p=v.length-1;p>=d.minChars;p--){var w=h[v.substr(0,p)];if(w){var t=[];b.each(w,function(y,q){if(k(q.value,v)){t[t.length]=q}});return t}}}}}return null}}};b.Autocompleter.Select=function(f,p,t,y){var n={ACTIVE:"ac_over"};var q,h=-1,A,v="",B=true,d,x;function w(){if(!B){return}d=b("<div/>").hide().addClass(f.resultsClass).css("position","absolute").appendTo(document.body);x=b("<ul/>").appendTo(d).mouseover(function(C){if(z(C).nodeName&&z(C).nodeName.toUpperCase()=="LI"){h=b("li",x).removeClass(n.ACTIVE).index(z(C));b(z(C)).addClass(n.ACTIVE)}}).click(function(C){b(z(C)).addClass(n.ACTIVE);t();p.focus();return false}).mousedown(function(){y.mouseDownOnSelect=true}).mouseup(function(){y.mouseDownOnSelect=false});if(f.width>0){d.css("width",f.width)}B=false}function z(D){var C=D.target;while(C&&C.tagName!="LI"){C=C.parentNode}if(!C){return[]}return C}function k(C){q.slice(h,h+1).removeClass(n.ACTIVE);j(C);var E=q.slice(h,h+1).addClass(n.ACTIVE);if(f.scroll){var D=0;q.slice(0,h).each(function(){D+=this.offsetHeight});if((D+E[0].offsetHeight-x.scrollTop())>x[0].clientHeight){x.scrollTop(D+E[0].offsetHeight-x.innerHeight())}else{if(D<x.scrollTop()){x.scrollTop(D)}}}}function j(C){h+=C;if(h<0){h=q.size()-1}else{if(h>=q.size()){h=0}}}function c(C){return f.max&&f.max<C?f.max:C}function e(){x.empty();var D=c(A.length);for(var E=0;E<D;E++){if(!A[E]){continue}var F=f.formatItem(A[E].data,E+1,D,A[E].value,v);if(F===false){continue}var C=b("<li/>").html(f.highlight(F,v)).addClass(E%2==0?"ac_even":"ac_odd").appendTo(x)[0];b.data(C,"ac_data",A[E])}q=x.find("li");if(f.selectFirst){q.slice(0,1).addClass(n.ACTIVE);h=0}if(b.fn.bgiframe){x.bgiframe()}}return{display:function(D,C){w();A=D;v=C;e()},next:function(){k(1)},prev:function(){k(-1)},pageUp:function(){if(h!=0&&h-8<0){k(-h)}else{k(-8)}},pageDown:function(){if(h!=q.size()-1&&h+8>q.size()){k(q.size()-1-h)}else{k(8)}},hide:function(){d&&d.hide();q&&q.removeClass(n.ACTIVE);h=-1},visible:function(){return d&&d.is(":visible")},current:function(){return this.visible()&&(q.filter("."+n.ACTIVE)[0]||f.selectFirst&&q[0])},show:function(){var E=b(p).offset();d.css({width:typeof f.width=="string"||f.width>0?f.width:b(p).width(),top:E.top+p.offsetHeight,left:E.left}).show();if(f.scroll){x.scrollTop(0);x.css({maxHeight:f.scrollHeight,overflow:"auto"});if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var C=0;q.each(function(){C+=this.offsetHeight});var D=C>f.scrollHeight;x.css("height",D?f.scrollHeight:C);if(!D){q.width(x.width()-parseInt(q.css("padding-left"))-parseInt(q.css("padding-right")))}}}},selected:function(){var C=q&&q.filter("."+n.ACTIVE).removeClass(n.ACTIVE);return C&&C.length&&b.data(C[0],"ac_data")},emptyList:function(){x&&x.empty()},unbind:function(){d&&d.remove()}}};b.Autocompleter.Selection=function(e,f,d){if(e.createTextRange){var c=e.createTextRange();c.collapse(true);c.moveStart("character",f);c.moveEnd("character",d);c.select()}else{if(e.setSelectionRange){e.setSelectionRange(f,d)}else{if(e.selectionStart){e.selectionStart=f;e.selectionEnd=d}}}e.focus()}})(jQuery);(function(b){b.PercListEditorWidget=function(k){var C={isEnabled:R,setListItems:p,getListItems:L,removeListItems:K,addListItem:H,removeListItem:A,enable:z,disable:f,highlightListItem:J,scrollToListItem:Q};var x='<div id="perc-ui-listedit-header">        <div id="perc-ui-listedit-title">            <div id="perc-ui-permission-users-title">                '+k.title1+'            </div>            <div id="perc-ui-permission-users-write">                '+k.title2+'            </div>        </div>        <div id="perc-ui-permission-addstartbutton"/>    </div>    <div id="perc-ui-listedit-listitemfield">        <input id="perc-ui-permission-usernamefield" name="perc-ui-permission-usernamefield"/>        <div id="perc-ui-permission-plusbutton" title="Add user"/>    </div>    <div id="perc-ui-permission-user-list-scroll-pane">        <ul id="perc-ui-permission-user-list">            <li>                <span>Username</span>                <div class="perc-ui-permission-deletebutton" id="Username"/>            </li>        </ul>    </div>';var y='            <li>                <span>_username_</span>                <div class="perc-ui-permission-deletebutton" id="_username_" title="Remove user"/>            </li>';var E=b("#"+k.container);E.empty();E.html(x);var P=E.find("#perc-ui-permission-user-list");var c=E.find("#perc-ui-permission-addstartbutton");var e=E.find("#perc-ui-listedit-listitemfield");var q=E.find("#perc-ui-permission-usernamefield");var I=E.find("#perc-ui-permission-plusbutton");var h=E.find("#perc-ui-permission-user-list-scroll-pane");var S=E.find("#perc-ui-listedit-title");var n;var v="";if(k.help!=undefined&&k.help!=null){v=k.help}else{v=I18N.message("perc.ui.folderPropsDialog.inputField@Enter a username")}var D=[];var t=true;var d=null;k.toggler.change(function(){j()});c.unbind().click(function(){e.toggle()});I.click(function(){var T=q.val();H(T)});q.keypress(function(V){var U=(V.keyCode?V.keyCode:V.which);var T=q.val();if(U==13){if(w(T)){H(T)}}}).click(function(){q.focus();M();N("clear");P.find("li").removeClass("perc-ui-listedit-itemselected")}).keyup(function(){M()}).change(function(){M()}).blur(function(){N("help")}).focus(function(){N("clear")});if(k.results!=undefined&&k.results!=null){d=k.results;q.autocomplete(d,{minChars:0,max:d.length,width:(b.browser.msie)?336:334,scrollHeight:101}).result(function(){M()})}if(b.browser.msie){I.css("margin-right","18px")}p(k.items);j();c.hide();F();N("help");return C;function N(U){var T=q.val();if(U=="help"&&T==""){q.css("font-style","italic");q.css("color","gray");q.val(v)}else{if(U=="clear"){if(T==v){q.val("")}q.css("font-style","normal");q.css("color","black")}}}function M(){var T=q.val();var U=w(T);if(U){B()}else{F()}}function w(T){for(r=0;r<d.length;r++){if(T.toLowerCase()==d[r].toLowerCase()){return true}}return false}function p(T){D=[];if(T!=undefined&&T!=null&&T.length>0){for(u=0;u<T.length;u++){D.splice(0,0,T[u]);G(T[u])}}O()}function L(){return D}function R(){return t}function K(){D=[];O()}function G(T){if(d!=null){d=b.grep(d,function(U){return U!=T});q.setOptions({data:d})}}function H(X){if(X==null||X==undefined||X==""){return}for(li=0;li<D.length;li++){if(X.toLowerCase()==D[li].toLowerCase()){return}}D.splice(0,0,X);q.val("");G(X);O();var U=-1;for(li=0;li<D.length;li++){if(X==D[li]){U=li;break}}var W=U+1;var V=P.find("li:nth-child("+W+")");var T=P.find("li").height();if(U!=-1){h.scrollTop(U*T)}V.addClass("perc-ui-listedit-itemselected");M()}function O(){b.perc_utils.sortCaseInsensitive(D);P.empty();for(u=0;u<D.length;u++){var T=y.replace(/_username_/g,D[u]);P.append(T)}n=b(".perc-ui-permission-deletebutton");n.click(function(){var U=b(this).attr("id");A(U)})}function A(U){var T=-1;for(li=0;li<D.length;li++){if(U==D[li]){T=li;break}}if(T!=-1){D.splice(T,1);if(d!=null){d[d.length]=U;b.perc_utils.sortCaseInsensitive(d);q.setOptions({data:d})}O()}}function z(){t=true;q.removeAttr("disabled");var T=q.val();if(T!=v){q.css("color","black")}if(T==""){N("help")}h.removeClass("disabled").css("color","black");S.css("color","black");n.show();M();c.unbind().removeClass("disabled").click(function(){e.toggle()})}function f(){t=false;q.attr("disabled","disabled").css("color","gray");h.addClass("disabled").css("color","gray");S.css("color","gray");n.hide();F();c.addClass("disabled").unbind();P.find("li").removeClass("perc-ui-listedit-itemselected")}function F(){I.addClass("disabled").unbind()}function B(){I.removeClass("disabled").click(function(){var T=q.val();H(T)})}function j(){var T=k.toggler.val();if(b.inArray(T,k.toggleroff)!=-1){f()}else{z()}}function J(T){}function Q(T){}}})(jQuery);(function(c){c.fn.superfish=function(p){var h=c.fn.superfish,n=h.c,f=c(['<span class="',n.arrowClass,'"> &#187;</span>'].join("")),k=function(){var q=c(this),t=d(q);clearTimeout(t.sfTimer);q.showSuperfishUl().siblings().hideSuperfishUl()},e=function(){var q=c(this),v=d(q),t=h.op;clearTimeout(v.sfTimer);v.sfTimer=setTimeout(function(){t.retainPath=(c.inArray(q[0],t.$path)>-1);q.hideSuperfishUl();if(t.$path.length&&q.parents(["li.",t.hoverClass].join("")).length<1){k.call(t.$path)}},t.delay)},d=function(q){var t=q.parents(["ul.",n.menuClass,":first"].join(""))[0];h.op=h.o[t.serial];return t},j=function(q){q.addClass(n.anchorClass).append(f.clone())};return this.each(function(){var q=this.serial=h.o.length;var v=c.extend({},h.defaults,p);v.$path=c("li."+v.pathClass,this).slice(0,v.pathLevels).each(function(){c(this).addClass([v.hoverClass,n.bcClass].join(" ")).filter("li:has(ul)").removeClass(v.pathClass)});h.o[q]=h.op=v;c("li:has(ul)",this)[(c.fn.hoverIntent&&!v.disableHI)?"hoverIntent":"hover"](k,e).each(function(){if(v.autoArrows){j(c(">a:first-child",this))}}).not("."+n.bcClass).hideSuperfishUl();var t=c("a",this);t.each(function(w){var x=t.eq(w).parents("li");t.eq(w).focus(function(){k.call(x)}).blur(function(){e.call(x)})});v.onInit.call(this)}).each(function(){var q=[n.menuClass];if(h.op.dropShadows&&!(c.browser.msie&&c.browser.version<7)){q.push(n.shadowClass)}c(this).addClass(q.join(" "))})};var b=c.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var d=b.op;if(c.browser.msie&&c.browser.version>6&&d.dropShadows&&d.animation.opacity!=undefined){this.toggleClass(b.c.shadowClass+"-off")}};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};c.fn.extend({hideSuperfishUl:function(){var f=b.op,e=(f.retainPath===true)?f.$path:"";f.retainPath=false;var d=c(["li.",f.hoverClass].join(""),this).add(this).not(e).removeClass(f.hoverClass).find(">ul").hide().css("visibility","hidden");f.onHide.call(d);return this},showSuperfishUl:function(){var f=b.op,e=b.c.shadowClass+"-off",d=this.addClass(f.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(d);f.onBeforeShow.call(d);d.animate(f.animation,f.speed,function(){b.IE7fix.call(d);f.onShow.call(d)});return this}})})(jQuery);(function(e){var b={percDropdownRootClass:"perc-view",percDropdownOptionLabels:["Title","Option1","Option2"],percDropdownOptionElements:null,percDropdownCallbacks:[function(k){alert(k)},function(k){alert(k)},function(k){alert(k)}],percDropdownCallbackData:["Title","Option1","Option2"],percDropdownDisabledFlag:[true,true,true,true,true],percDropdownItemImage:null,percDropdownTitleImage:null,percDropdownTitleImageOver:null,percDropdownShowExpandIcon:true,percDropdownResizeToElement:null,percDropdownDisabledItemImage:null,delay:50,dropShadows:true};var f="<ul class='sf-menu perc-dropdown'><li class='current'><a class='perc-dropdown-title'>_TITLE_</a><ul class='perc-dropdown-option-list'><li class='perc-dropdown-option-item-template '><a href='#' class='perc-dropdown-option'>_OPTION_</a></li></ul></li></ul>";var j;var h=4;e.fn.PercDropdown=function(t){t=e.extend({},b,t);j=e(f);j.addClass(t.percDropdownRootClass).data("config",t);if(t.percDropdownResizeToElement){t.onBeforeShow=d}var B=t.percDropdownCallbacks;var n=t.percDropdownCallbackData;var z=t.percDropdownOptionLabels;var w=t.percDropdownDisabledFlag;var G=t.percDropdownItemImage;var F=t.percDropdownDisabledItemImage;var D=j.find(".perc-dropdown-title");if(t.percDropdownTitleImage==null){D.css("cursor","default").html(z[0])}else{var A=t.percDropdownRootClass?t.percDropdownRootClass+"-split-button-arrow":"perc-split-button-arrow";D.html("&nbsp;").css("background","url("+t.percDropdownTitleImage+") no-repeat").css("cursor","pointer").addClass(A).hover(function(){e(this).css("background","url("+t.percDropdownTitleImageOver+") no-repeat").css("overflow","visible")},function(){e(this).css("background","url("+t.percDropdownTitleImage+") no-repeat").css("overflow","visible")});var q=j.find(".perc-dropdown-option-list");q.css("margin","4px 0 0 0")}D.addClass("perc-dropdown-title-"+z[0]).data("callback",B[0]).data("callbackData",n[0]).click(c);var y=j.find(".perc-dropdown-option-list");var x=j.find(".perc-dropdown-option-item-template");var v=0;for(l=1;l<z.length;l++){v=l;var C=z[l];var E=x.clone();E.removeClass("perc-dropdown-option-item-template");var p;if(t.percDropdownOptionElements!=null){E.find("a").replaceWith(t.percDropdownOptionElements[l]);p=t.percDropdownOptionElements[l].addClass("perc-dropdown-option-"+e.perc_textFilters.IDNAMECDATA(C))}else{p=E.find("a").html(C).addClass("perc-dropdown-option-"+e.perc_textFilters.IDNAMECDATA(C))}if(G!=null){p.css("background-image","url("+G[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}if(!(w[l])){v=0;p.addClass("perc-drop-disabled").css("color","#9FA3AA");if(F!=null){p.css("background-image","url("+F[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}}y.append(E);E.data("callback",B[v]).data("callbackData",n[v]).click(c)}x.remove();j.superfish(t);if(t.percDropdownShowExpandIcon===false){D.find(".sf-sub-indicator").hide()}else{}this.append(j)};function c(n){var p=e(this).data("callback");var k=e(this).data("callbackData");p(k)}function d(){var q=e(this);var t=e(q.parents(".perc-dropdown")[0]);var k=t.data("config");if(typeof(k)!="undefined"){var p=e(k.percDropdownResizeToElement);var n=p.width();q.width(n-h)}}})(jQuery);(function(c,d){var b=0;c.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:false,multiple:true,position:{}},_create:function(){var j=this.element.hide(),n=this.options;this.speed=c.fx.speeds._default;this._isOpen=false;var h=(this.button=c('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(n.classes).attr({title:j.attr("title"),"aria-haspopup":true,tabIndex:j.attr("tabIndex")}).insertAfter(j),e=(this.buttonlabel=c("<span />")).html(n.noneSelectedText).appendTo(h),k=(this.menu=c("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(n.classes).appendTo(document.body),q=(this.header=c("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(k),f=(this.headerLinkContainer=c("<ul />")).addClass("ui-helper-reset").html(function(){if(n.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+n.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+n.uncheckAllText+"</span></a></li>"}else{if(typeof n.header==="string"){return"<li>"+n.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(q),p=(this.checkboxContainer=c("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(k);this._bindEvents();this.refresh(true);if(!n.multiple){k.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(n){var h=this.element,k=this.options,j=this.menu,q=this.checkboxContainer,e=[],f=[],p=h.attr("id")||b++;h.find("option").each(function(w){var x=c(this),B=this.parentNode,z=this.innerHTML,D=this.title,A=this.value,v=this.id||"ui-multiselect-"+p+"-option-"+w,E=this.disabled,t=this.selected,y=["ui-corner-all"],C;if(B.tagName.toLowerCase()==="optgroup"){C=B.getAttribute("label");if(c.inArray(C,e)===-1){f.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+C+"</a></li>");e.push(C)}}if(E){y.push("ui-state-disabled")}if(t&&!k.multiple){y.push("ui-state-active")}f.push('<li class="'+(E?"ui-multiselect-disabled":"")+'">');f.push('<label for="'+v+'" title="'+D+'" class="'+y.join(" ")+'">');f.push('<input id="'+v+'" name="multiselect_'+p+'" type="'+(k.multiple?"checkbox":"radio")+'" value="'+A+'" title="'+z+'"');if(t){f.push(' checked="checked"');f.push(' aria-selected="true"')}if(E){f.push(' disabled="disabled"');f.push(' aria-disabled="true"')}f.push(" /><span>"+z+"</span></label></li>")});q.html(f.join(""));this.labels=j.find("label");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!n){this._trigger("refresh")}},update:function(){var k=this.options,f=this.labels.find("input"),e=f.filter(":checked"),h=e.length,j;if(h===0){j=k.noneSelectedText}else{if(c.isFunction(k.selectedText)){j=k.selectedText.call(this,h,f.length,e.get())}else{if(/\d/.test(k.selectedList)&&k.selectedList>0&&h<=k.selectedList){j=e.map(function(){return c(this).next().text()}).get().join(", ")}else{j=k.selectedText.replace("#",h).replace("#",f.length)}}}this.buttonlabel.html(j);return j},_bindEvents:function(){var e=this,f=this.button;function h(){e[e._isOpen?"close":"open"]();return false}f.find("span").bind("click.multiselect",h);f.bind({click:h,keypress:function(j){switch(j.which){case 27:case 38:case 37:e.close();break;case 39:case 40:e.open();break}},mouseenter:function(){if(!f.hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover")}},mouseleave:function(){c(this).removeClass("ui-state-hover")},focus:function(){if(!f.hasClass("ui-state-disabled")){c(this).addClass("ui-state-focus")}},blur:function(){c(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(j){if(c(this).hasClass("ui-multiselect-close")){e.close()}else{e[c(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}j.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(q){q.preventDefault();var p=c(this),n=p.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),j=n.get(),k=p.parent().text();if(e._trigger("beforeoptgrouptoggle",q,{inputs:j,label:k})===false){return}e._toggleChecked(n.filter("[checked]").length!==n.length,n);e._trigger("optgrouptoggle",q,{inputs:j,label:k,checked:j[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!c(this).hasClass("ui-state-disabled")){e.labels.removeClass("ui-state-hover");c(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(j){j.preventDefault();switch(j.which){case 9:case 27:e.close();break;case 38:case 40:case 37:case 39:e._traverse(j.which,this);break;case 13:c(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(p){var n=c(this),q=this.value,k=this.checked,j=e.element.find("option");if(this.disabled||e._trigger("click",p,{value:q,text:this.title,checked:k})===false){p.preventDefault();return}n.focus();n.attr("aria-selected",k);j.each(function(){if(this.value===q){this.selected=k}else{if(!e.options.multiple){this.selected=false}}});if(!e.options.multiple){e.labels.removeClass("ui-state-active");n.closest("label").toggleClass("ui-state-active",k);e.close()}e.element.trigger("change");setTimeout(c.proxy(e.update,e),10)});c(document).bind("mousedown.multiselect",function(j){if(e._isOpen&&!c.contains(e.menu[0],j.target)&&!c.contains(e.button[0],j.target)&&j.target!==e.button[0]){c("html").click(function(){e.close()})}});c(this.element[0].form).bind("reset.multiselect",function(){setTimeout(c.proxy(e.refresh,e),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),f=this.options;if(/\d/.test(f.minWidth)&&e<f.minWidth){e=f.minWidth}this.button.width(e)},_setMenuWidth:function(){var e=this.menu,f=this.button.outerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)-parseInt(e.css("border-right-width"),10)-parseInt(e.css("border-left-width"),10);e.width(f||this.button.outerWidth())},_traverse:function(k,n){var h=c(n),f=k===38||k===37,e=h.parent()[f?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[f?"last":"first"]();if(!e.length){var j=this.menu.find("ul").last();this.menu.find("label")[f?"last":"first"]().trigger("mouseover");j.scrollTop(f?j.height():0)}else{e.find("label").trigger("mouseover")}},_toggleState:function(f,e){return function(){if(!this.disabled){this[f]=e}if(e){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(e,k){var j=(k&&k.length)?k:this.labels.find("input"),h=this;j.each(this._toggleState("checked",e));j.eq(0).focus();this.update();var f=j.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&c.inArray(this.value,f)>-1){h._toggleState("selected",e).call(this)}});if(j.length){this.element.trigger("change")}},_toggleDisabled:function(e){this.button.attr({disabled:e,"aria-disabled":e})[e?"addClass":"removeClass"]("ui-state-disabled");this.menu.find("input").attr({disabled:e,"aria-disabled":e}).parent()[e?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:e,"aria-disabled":e})},open:function(n){var t=this,k=this.button,f=this.menu,j=this.speed,h=this.options;if(this._trigger("beforeopen")===false||k.hasClass("ui-state-disabled")||this._isOpen){return}var q=f.find("ul").last(),v=h.show,p=k.offset();if(c.isArray(h.show)){v=h.show[0];j=h.show[1]||t.speed}q.scrollTop(0).height(h.height);if(c.ui.position&&!c.isEmptyObject(h.position)){h.position.of=h.position.of||k;f.show().position(h.position).hide().show(v,j)}else{f.css({top:p.top+k.outerHeight(),left:p.left}).show(v,j)}this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");k.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var h=this.options,e=h.hide,f=this.speed;if(c.isArray(h.hide)){e=h.hide[0];f=h.hide[1]||this.speed}this.menu.hide(e,f);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(f){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){c.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(e,f){var h=this.menu;switch(e){case"header":h.find("div.ui-multiselect-header")[f?"show":"hide"]();break;case"checkAllText":h.find("a.ui-multiselect-all span").eq(-1).text(f);break;case"uncheckAllText":h.find("a.ui-multiselect-none span").eq(-1).text(f);break;case"height":h.find("ul").last().height(parseInt(f,10));break;case"minWidth":this.options[e]=parseInt(f,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[e]=f;this.update();break;case"classes":h.add(this.button).removeClass(this.options.classes).addClass(f);break}c.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*
 * jQuery UI Timepicker 0.2.1
 *
 * Copyright (c) 2009 Martin Milesich (http://milesich.com/)
 *
 * Some parts are
 *   Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 *
 * $Id: timepicker.js 28 2009-08-11 20:31:23Z majlo $
 *
 * Depends:
 *  ui.core.js
 *  ui.datepicker.js
 *  ui.slider.js
 */
(function(c){c.extend(c.datepicker._defaults,{stepMinutes:1,stepHours:1,time24h:false,showTime:false,altTimeField:""});c.datepicker._setDateFromFieldOverride=c.datepicker._setDateFromField;c.datepicker._setDateFromField=function(f,e){var d=f.input.val().split(" ");if(d.length>0){f.input.val(d[0]);c.datepicker._setDateFromFieldOverride(f,e);f.input.val(d.join(" "))}};c.datepicker._connectDatepickerOverride=c.datepicker._connectDatepicker;c.datepicker._connectDatepicker=function(f,e){c.datepicker._connectDatepickerOverride(f,e);if(this._get(e,"showTime")){e.settings.showButtonPanel=true}var d=this._get(e,"showOn");if(d=="button"||d=="both"){e.trigger.unbind("click");e.trigger.click(function(){if(c.datepicker._datepickerShowing&&c.datepicker._lastInput==f){c.datepicker._hideDatepicker(null)}else{c.datepicker._showDatepicker(f)}return false})}};c.datepicker._showDatepickerOverride=c.datepicker._showDatepicker;c.datepicker._showDatepicker=function(e){c.datepicker._showDatepickerOverride(e);e=e.target||e;if(e.nodeName.toLowerCase()!="input"){e=c("input",e.parentNode)[0]}if(c.datepicker._isDisabledDatepicker(e)){return}var f=c.datepicker._getInst(e);var d=c.datepicker._get(f,"showTime");if(d){c.timepicker.show(e)}};c.datepicker._checkExternalClickOverride=c.datepicker._checkExternalClick;c.datepicker._checkExternalClick=function(e){if(!c.datepicker._curInst){return}var d=c(e.target);if((d.parents("#"+c.timepicker._mainDivId).length==0)){inst=c.datepicker._getInst(d[0]);if(((d[0].id!=c.datepicker._mainDivId&&d.parents("#"+c.datepicker._mainDivId).length==0&&!d.hasClass(c.datepicker.markerClassName)&&!d.closest("."+c.datepicker._triggerClass).length&&c.datepicker._datepickerShowing&&!(c.datepicker._inDialog&&c.blockUI)))||(d.hasClass(c.datepicker.markerClassName)&&c.datepicker._curInst!=inst)){c("html").click(function(){c.datepicker._hideDatepicker()})}}return};c.datepicker._hideDatepickerOverride=c.datepicker._hideDatepicker;c.datepicker._hideDatepicker=function(e,h){var f=this._curInst;if(!f||(e&&f!=c.data(e,PROP_NAME))){return}var d=this._get(f,"showTime");if(e===undefined&&d){if(f.input){f.input.val(this._formatDate(f));f.input.trigger("change")}this._updateAlternate(f);if(d){c.timepicker.update(this._formatDate(f))}}c.datepicker._hideDatepickerOverride(e,h);if(d){c.timepicker.hide()}};c.datepicker._selectDate=function(k,e){var j=c(k);var h=this._getInst(j[0]);var d=this._get(h,"showTime");e=(e!=null?e:this._formatDate(h));if(!d){if(h.input){h.input.val(e)}this._updateAlternate(h)}var f=this._get(h,"onSelect");if(f){f.apply((h.input?h.input[0]:null),[e,h])}else{if(h.input&&!d){h.input.trigger("change")}}if(h.inline){this._updateDatepicker(h)}else{if(!h.stayOpen){if(d){this._updateDatepicker(h)}else{this._hideDatepicker(null,this._get(h,"duration"));this._lastInput=h.input[0];if(typeof(h.input[0])!="object"){h.input[0].focus()}this._lastInput=null}}}};c.datepicker._updateDatepickerOverride=c.datepicker._updateDatepicker;c.datepicker._updateDatepicker=function(d){c.datepicker._updateDatepickerOverride(d);c.timepicker.resize()};function b(){}b.prototype={init:function(){this._mainDivId="ui-timepicker-div";this._inputId=null;this._orgValue=null;this._orgHour=null;this._orgMinute=null;this._colonPos=-1;this._visible=false;this.tpDiv=c('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style=" display: none; position: absolute;"></div>');this._generateHtml()},show:function(p){var h=c.datepicker._getInst(p);this._time24h=c.datepicker._get(h,"time24h");this._altTimeField=c.datepicker._get(h,"altTimeField");var d=parseInt(c.datepicker._get(h,"stepMinutes"),10)||1;var n=parseInt(c.datepicker._get(h,"stepHours"),10)||1;if(60%d!=0){d=1}if(24%n!=0){n=1}c("#hourSlider").slider("option","max",24-n);c("#hourSlider").slider("option","step",n);c("#minuteSlider").slider("option","max",60-d);c("#minuteSlider").slider("option","step",d);this._inputId=p.id;if(!this._visible){this._parseTime();this._orgValue=c("#"+this._inputId).val()}this.resize();c("#"+this._mainDivId).show();this._visible=true;var e=c("#"+c.datepicker._mainDivId);var k=e.position();var j=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+c(document).scrollLeft();var q=this.tpDiv.offset().left+this.tpDiv.outerWidth();if(q>j){e.css("left",k.left-(q-j)-5);this.tpDiv.css("left",e.offset().left+e.outerWidth()+"px")}var f=c("#"+this._inputId).offset();e.css("top",f.top+25);this.tpDiv.css("top",f.top+25)},update:function(e){var f=c("#"+this._mainDivId+" span.fragHours").text()+":"+c("#"+this._mainDivId+" span.fragMinutes").text();if(!this._time24h){f+=" "+c("#"+this._mainDivId+" span.fragAmpm").text()}var d=c("#"+this._inputId).val();c("#"+this._inputId).val(e+" "+f);if(this._altTimeField){c(this._altTimeField).each(function(){c(this).val(f)})}},hide:function(){this._visible=false;c("#"+this._mainDivId).hide()},resize:function(){var e=c("#"+c.datepicker._mainDivId);var f=e.position();var d=c("#"+c.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();c("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",d);this.tpDiv.css({height:e.height(),top:f.top,left:f.left+e.outerWidth()+"px"});c("#hourSlider").css("height",this.tpDiv.height()-(3.5*d));c("#minuteSlider").css("height",this.tpDiv.height()-(3.5*d))},_generateHtml:function(){var e="";e+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">';e+='<div class="ui-datepicker-title" style="margin:0">';e+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div><table>';e+="<tr><th>Hour</th><th>Minute</th></tr>";e+='<tr><td align="center"><div id="hourSlider" class="slider"></div></td><td align="center"><div id="minuteSlider" class="slider"></div></td></tr>';e+="</table>";this.tpDiv.empty().append(e);c("body").append(this.tpDiv);var d=this;c("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(f,h){d._writeTime("hour",h.value)},stop:function(f,h){c("#"+d._inputId).focus()}});c("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:59,step:1,slide:function(f,h){d._writeTime("minute",h.value)},stop:function(f,h){c("#"+d._inputId).focus()}});c("#hourSlider > a").css("padding",0);c("#minuteSlider > a").css("padding",0)},_writeTime:function(d,e){if(d=="hour"){if(!this._time24h){if(e<12){c("#"+this._mainDivId+" span.fragAmpm").text("am")}else{c("#"+this._mainDivId+" span.fragAmpm").text("pm");e-=12}if(e==0){e=12}}else{c("#"+this._mainDivId+" span.fragAmpm").text("")}if(e<10){e="0"+e}c("#"+this._mainDivId+" span.fragHours").text(e)}if(d=="minute"){if(e<10){e="0"+e}c("#"+this._mainDivId+" span.fragMinutes").text(e)}},_parseTime:function(){var j=c("#"+this._inputId).val();this._colonPos=j.search(":");var d=0,f=0,e="";if(this._colonPos!=-1){f=parseInt(j.substr(this._colonPos-2,2),10);d=parseInt(j.substr(this._colonPos+1,2),10);e=jQuery.trim(j.substr(this._colonPos+3,3))}e=e.toLowerCase();if(e!="am"&&e!="pm"){e=""}if(f<0){f=0}if(d<0){d=0}if(f>23){f=23}if(d>59){d=59}if(e=="pm"&&f<12){f+=12}if(e=="am"&&f==12){f=0}this._setTime("hour",f);this._setTime("minute",d);this._orgHour=f;this._orgMinute=d},_setTime:function(d,e){if(isNaN(e)){e=0}if(e<0){e=0}if(e>23&&d=="hour"){e=23}if(e>59&&d=="minute"){e=59}if(d=="hour"){c("#hourSlider").slider("value",e)}if(d=="minute"){c("#minuteSlider").slider("value",e)}this._writeTime(d,e)}};c.timepicker=new b();c("document").ready(function(){c.timepicker.init()})})(jQuery);(function(d){d.PercRecentListService={getRecentList:b,setRecent:c,RECENT_TYPE_ITEM:"item",RECENT_TYPE_TEMPLATE:"template",RECENT_TYPE_SITE_FOLDER:"site-folder",RECENT_TYPE_ASSET_FOLDER:"asset-folder",RECENT_TYPES:[this.RECENT_TYPE_ITEM,this.RECENT_TYPE_TEMPLATE,this.RECENT_TYPE_SITE_FOLDER,this.RECENT_TYPE_ASSET_FOLDER]};function b(j,h){var e=d.Deferred();if(!d.inArray(j,d.PercRecentListService.RECENT_TYPES)){e.reject("Invalid type passed in for getting recent items.")}else{var f=d.perc_paths.RECENT_ROOT+j;if(j==d.PercRecentListService.RECENT_TYPE_TEMPLATE||j==d.PercRecentListService.RECENT_TYPE_SITE_FOLDER){f+="/"+h}var k=function(p,n){if(p==d.PercServiceUtils.STATUS_SUCCESS){e.resolve(n)}else{var q=d.PercServiceUtils.extractDefaultErrorMessage(n.request);d.perc_utils.info("Error accessing cm1 page optimizer service: "+q);e.reject(q)}};d.PercServiceUtils.makeJsonRequest(f,d.PercServiceUtils.TYPE_GET,true,k)}return e.promise()}function c(k,n,h){var e=d.Deferred();if(!d.inArray(k,d.PercRecentListService.RECENT_TYPES)){e.reject("Invalid type passed in for getting recent items.")}else{var f=d.perc_paths.RECENT_ROOT+k;if(k==d.PercRecentListService.RECENT_TYPE_TEMPLATE||k==d.PercRecentListService.RECENT_TYPE_SITE_FOLDER){f+="/"+h}var j={value:n};d.ajax({url:f,type:"POST",data:j,contentType:"application/x-www-form-urlencoded",dataType:"json"}).done(function(){e.resolve()}).fail(function(p,q){e.reject("Failed to add item to recent list")})}return e.promise()}})(jQuery);(function(f){f.PercRedirectHandler={createRedirect:k};function k(w,v,q){var p=f.Deferred();if(w==v){p.resolve("Both from and to are same no need for a redirect")}else{if(!gIsSaaSEnvironment){p.resolve("This is a non SaaS environment, skipping redirect creation.")}else{var t={data:{fromPath:w,toPath:v,type:q}};n(t).done(function(x){h(w,v,x).done(function(y){p.resolve(y)}).fail(function(y){p.reject(y)})}).fail(function(x){p.reject(x)})}}return p.promise()}function n(t){var p=f.Deferred();var q=f.perc_paths.REDIRECT_ROOT+"validate";f.PercServiceUtils.makeJsonRequest(q,f.PercServiceUtils.TYPE_POST,false,function(w,v){if(w==f.PercServiceUtils.STATUS_SUCCESS){p.resolve(v.data)}else{var x=f.PercServiceUtils.extractDefaultErrorMessage(v.request);p.reject(x)}},t,function(v){p.reject("Redirect service request timed out.")});return p.promise()}function h(v,t,q){var p=f.Deferred();if(q.response.status=="Error"){p.reject(q.response.errorMessage)}if(q.response.status=="NotApplicable"){p.resolve("Redirects are not applicable for this scenario.")}else{if(q.response.status=="Published"){d(v,t,q).done(function(w){p.resolve(w)}).fail(function(w){p.reject(w)})}else{p.resolve("Redirect is not required for this case.")}}return p.promise()}function c(y,x,w){y=e(y);x=e(x);var t=f.Deferred();var p=w.response.redirectLicense;var q={category:"AUTOGEN",condition:y,enabled:true,key:p.key,permanent:true,redirectTo:x,site:w.response.bucketName,type:"CM1"};var v={id:p.key,type:p.name,token:p.handshake};f.ajax({type:"POST",beforeSend:function(z){z.setRequestHeader("Authorization",JSON.stringify(v))},url:p.apiProvider+"/rest/redirect/entries?replace=true",data:JSON.stringify(q),contentType:"application/json",}).done(function(B,z,A){t.resolve("Created redirect successfully")}).fail(function(C,z,B){var A="A redirect rule cannot be created at this time, Please note the time and date and submit this problem to Percussion support.";if(C&&C.responseText){A=JSON.parse(C.responseText).message}t.reject(A)});return t.promise()}function d(w,v,t){var p=f.Deferred();var q;f.unblockUI();q=f(b(w,v)).perc_dialog({title:"Manage Redirects",modal:true,percButtons:{Yes:{click:function(){if(!v){v=q.find("#perc-redirect-to-path").val()}if(!v){q.find("div.perc_field_error[for=perc-redirect-to-path]").show();return}else{q.find("div.perc_field_error[for=perc-redirect-to-path]").hide()}f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);c(w,v,t).fail(function(x){p.reject(x)}).always(function(){f.unblockUI();q.remove();p.resolve("Redirect created successfully.")})},id:"perc-redirect-yes"},No:{click:function(){q.remove();p.resolve("User doesn't want to create redirect.")},id:"perc-redirect-no"}},id:"perc-redirect-dialog",width:700});j(q);return p.promise()}function b(t,p){var q=f("<div/>",{id:"perc-redirect-container"});q.append('<div><label>This change could cause a visitor to your website to see a "page not found" error. Would you like to redirect those users?</label><br/><br/></div>');q.append("<div><label>From path:</label><br/></div>");q.append('<div class="readonlyinput">'+e(t)+"</div><br/>");q.append("<div><label>To path:</label><br/></div>");if(p){q.append('<div class="readonlyinput">'+e(p)+"</div>")}else{q.append("<div><input type='text' class='required' readonly='true' name='perc-redirect-to-path' id='perc-redirect-to-path'/><img id='perc-redirect-to-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div>");q.append("<div for='perc-redirect-to-path' class='perc_field_error' style='display:none'>To path is required to create redirect.</div>")}return q}function j(p){p.find("#perc-redirect-to-path-button").click(function(){var w="Select redirect to path";var x="To path";var v=function(z){var y=z.path;if(y.substring(0,1)==="/"&&!(y.substring(0,2)==="//")){y="/"+y}if(!y){y=z.folderPaths.split("$System$")[1]}y=e(y);p.find("#perc-redirect-to-path").val(y).attr("title",y)};var q=function(z){var y=null;if(!z){y="Please select a folder or page."}else{if(z.path=="/Sites/"){y="Your current selection is sites root, please select a folder or page."}else{if(z.type=="site"){y="Your current selection is a site, please select a folder or page."}}}return y};var t={okCallback:v,dialogTitle:w,rootPath:"Sites",initialPath:p.find("#perc-convert-folder-path").val(),selectedItemValidator:q,showFoldersOnly:false};f.PercPathSelectionDialog.open(t)})}function e(p){p=p.replace("//Sites/","");p=p.replace("/Sites/","");p=p.substring(p.indexOf("/"));if(p.charAt(p.length-1)=="/"){p=p.substr(0,p.length-1)}return p}})(jQuery);(function(b){b.widget("ui.perc_imageselect",{_idPostfix:"_perc_is",_class:"perc_imageselect",_pseudoCtl:null,_init:function(){var c=this;options=this.options;if(this.element[0].nodeName.toLowerCase()!="select"){window.alert("Error! the perc_imageselect widget can only be used on a 'SELECT' html element.")}c._addPseudoControl();c._bindEvents(false)},_addPseudoControl:function(){var c=this;var f="";var e=this.element[0].id;if(e=="undefined"||e==null||e==""){window.alert("Error! An id attribute is required on the select element.")}f+="<div id='";f+=(e+this._idPostfix);f+="' class='";f+=this._class;f+="'>";var d=this.element.children("option");d.each(function(){f+=c._getItemHtml(this.value,this.text)});f+="</div>";this.element.hide();this.element.after(f);this._pseudoCtl=b("#"+this.element[0].id+this._idPostfix);this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"))},_getItemHtml:function(d,c){var e="";e+="<div class='perc_imageselect_item'>";e+="<span class='perc_imageselect_value'>"+d+"</span>";e+="<img src='";e+=c;e+="'/><span>";e+=b.PercTruncateText(d.split(".")[2],22);e+="</span></div>";return e},_addChildIndexes:function(d){var c=0;d.each(function(){b(this).remove(".perc_imageselect_index")});d.each(function(){b(this).append("<span class='perc_imageselect_index'>"+(c++)+"</span>")})},destroy:function(){b.widget.prototype.apply(this,arguments);this._unbindEvents(false)},_bindEvents:function(d){var c=this;if(!d){this._pseudoCtl.bind("keydown",function(e){c._handleKeyDown(e)});this._pseudoCtl.bind("click",function(e){b(this).focus()})}this._pseudoCtl.children(".perc_imageselect_item").bind("click",function(f){var e=b(this).children(".perc_imageselect_index").text();c.selectIndex(e)});this._pseudoCtl.children(".perc_imageselect_item").bind("dblclick",function(e){if(c.options.hardSelect){c._onSelect()}})},_unbindEvents:function(c){if(!c){this._pseudoCtl.unbind("keydown").unbind("click")}this._pseudoCtl.children(".perc_imageselect_item").unbind("click").unbind("dblclick")},_handleKeyDown:function(c){if(!this.options.vertical&&(c.keyCode==37||c.keyCode==39)){this._moveSelection(c.keyCode==39?true:false);return c.preventDefault()}if(this.options.vertical&&(c.keyCode==38||c.keyCode==40)){this._moveSelection(c.keyCode==40?true:false);return c.preventDefault()}if(this.options.hardSelect&&c.keyCode==13){this._onSelect();return c.preventDefault()}return true},_moveSelection:function(c){var e=this.getSelectedIndex();var d=this._pseudoCtl.children(".perc_imageselect_item").length;if(e!=-1){if(c&&(d-1)>e){this.selectIndex(e+1)}else{if(!c&&e>0){this.selectIndex(e-1)}}}},_onSelect:function(){if(this.options.onSelect!=null){var c=this._pseudoCtl.children(".perc_imageselect_selected");var e=c.children(".perc_imageselect_value").text();var d=c.children("img").attr("src");this.options.onSelect(e,d)}},setItems:function(c){if(c==null||c=="undefined"){alert("items cannot be null or undefined")}else{this.clearSelection();this._unbindEvents(true);this._pseudoCtl.children(".perc_imageselect_item").remove();for(var d in c){var e=c[d];this._pseudoCtl.append(this._getItemHtml(e[0],e[1]))}this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"));this._bindEvents(true)}},loadFromUrl:function(d){var c=this;if(d!=null&&d!="undefined"){b.getJSON(d,function(e){c.setItems(e.items)})}},clearSelection:function(){var c=this.element[0].id+this._idPostfix;b("#"+c+" .perc_imageselect_selected").removeClass("perc_imageselect_selected")},selectIndex:function(c){this.clearSelection();var d=this.element[0].id+this._idPostfix;b("#"+d+" .perc_imageselect_item:eq("+c+")").addClass("perc_imageselect_selected");var h=this._pseudoCtl.children(".perc_imageselect_selected").offset().top-50;var f=this._pseudoCtl.offset().top;var e=this._pseudoCtl.scrollTop();if(!this.options.hardSelect){this._onSelect()}this._pseudoCtl.animate({scrollTop:e+h-f},500);this._pseudoCtl.focus()},getSelectedIndex:function(){var c=this._pseudoCtl.children(".perc_imageselect_selected");if(c.length>0){return parseInt(c.children(".perc_imageselect_index").text())}return -1}});b.extend(b.ui.perc_imageselect,{version:"1.0.0",defaults:{vertical:true,onSelect:null,hardSelect:true}})})(jQuery);(function(b){b.widget("ui.perc_wizard",{steps:null,currentStep:0,isCancelled:false,_init:function(){var c=this,d=this.options;this.element.load(d.templateUrl,function(){c.element.perc_dialog({autoOpen:false,title:d.title,modal:d.modal,width:d.width,height:d.height,show:d.show,hide:d.hide,open:d.open,resizable:d.resizable});c.steps=b(".perc_wizard_step");c._addButtons()})},open:function(){this._showStep(0);this.element.dialog("open")},_addButtons:function(){var c=this;var d="<div class='ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'><div href='#' id='perc_wizard_finish' class='perc-save' name='perc_wizard_finish' style='float:right;' /><div href='#' id='perc_wizard_next' class='perc-save'  name='perc_wizard_next' style='float:right;' /><div href='#' id='perc_wizard_cancel' class='perc-save' name='perc_wizard_cancel' style='float:right;' /><div id='perc_wizard_back' href='#' class='perc-save'  name='perc_wizard_back' style='float:right;' /></div>";b(c.element).closest(".ui-dialog").append(d);b("#perc_wizard_back").click(function(){c._onBack()});b("#perc_wizard_cancel").click(function(){c._onCancel()}).val(this.options.cancelButtonLabel);b("#perc_wizard_next").click(function(){c._onNext()});b("#perc_wizard_finish").click(function(){c._onOk()})},_showStep:function(d){if(this.steps==null||d>this.steps.length){alert("Error: Step does not exist.");return}this.currentStep=d;for(i=0;i<this.steps.length;i++){if(i==d){b(this.steps[i]).show()}else{b(this.steps[i]).hide()}}if(d==0&&this.steps.length>1){b("#perc_wizard_back").hide();b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{if(d<this.steps.length-1){b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").hide();b("#perc_wizard_finish").show().val(this.options.finishButtonLabel)}}var c=this.element},_onOk:function(d){var c=this;if(this.options.onValidate()){this.options.onOk()}},_onNext:function(c){if(this.options.onValidate()){if(this.options.onNext!==undefined&&this.options.onNext()===false){return}this._showStep(this.currentStep+1)}},_onBack:function(){if(this.currentStep>0){this._showStep(this.currentStep-1)}},_onCancel:function(){this.isCancelled=true;this.element.dialog("close")}});b.extend(b.ui.perc_wizard,{version:"1.0.0",defaults:{backButtonLabel:typeof I18N=="undefined"?"Back":I18N.message("perc.ui.common.label@Back"),cancelButtonLabel:typeof I18N=="undefined"?"Cancel":I18N.message("perc.ui.common.label@Cancel"),nextButtonLabel:typeof I18N=="undefined"?"Next":I18N.message("perc.ui.common.label@Next"),finishButtonLabel:typeof I18N=="undefined"?"Finish":I18N.message("perc.ui.common.label@Finish"),width:"800px",height:"700px",modal:true,title:typeof I18N=="undefined"?"Wizard":I18N.message("perc.ui.common.label@Wizard"),onOk:function(){alert("No onOk callback was set.")},onValidate:function(){return true}}})})(jQuery);(function(n){n.PercSiteService={getSiteProperties:w,updateSiteProperties:x,copySite:t,copySiteInfo:k,getTemplates:j,getBaseTemplates:h,getSites:d,validateCopySiteFolders:q,createSiteFromUrl:b,createSiteFromUrlAsync:c,createSiteFromUrlStatus:v,createSiteFromUrlResult:e,isSiteBeingImported:f,getSaaSSiteNames:p};function x(y,A){var z=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_UPDATE_PROPERTIES,n.PercServiceUtils.TYPE_POST,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}},y)}function w(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_GET_PROPERTIES+"/"+z,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}})}function t(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY,n.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=n.PercServiceUtils.extractDefaultErrorMessage(C.request);var B=n.PercServiceUtils.extractGlobalErrorCode(C.request);A(n.PercServiceUtils.STATUS_ERROR,E,B)}},z)}function q(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY_VALIDATE_FOLDERS,n.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=n.PercServiceUtils.extractDefaultErrorMessage(C.request);var B=n.PercServiceUtils.extractGlobalErrorCode(C.request);A(n.PercServiceUtils.STATUS_ERROR,E,B)}},z)}function k(z){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY_INFO,n.PercServiceUtils.TYPE_GET,false,function(B,A){if(B==n.PercServiceUtils.STATUS_SUCCESS){z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}else{var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}})}function j(B,C,A){var z=this;var y="";if(A!=null){y=n.perc_paths.TEMPLATES_BY_SITE+"/"+B+"/"+A}else{y=n.perc_paths.TEMPLATES_BY_SITE+"/"+B+""}n.PercServiceUtils.makeJsonRequest(y,n.PercServiceUtils.TYPE_GET,false,function(E,D){if(E==n.PercServiceUtils.STATUS_SUCCESS){C(n.PercServiceUtils.STATUS_SUCCESS,D.data)}else{var F=n.PercServiceUtils.extractDefaultErrorMessage(D.request);C(n.PercServiceUtils.STATUS_ERROR,F)}})}function h(y,A){var z=n.perc_paths.TEMPLATES_READONLY+"?type="+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_GET,true,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(true,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(false,D)}})}function d(z){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITES_ALL+"/",n.PercServiceUtils.TYPE_GET,false,function(B,A){if(B==n.PercServiceUtils.STATUS_SUCCESS){z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}else{var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}})}function b(z,A){n.ajaxSetup({timeout:600000});var y={Site:z};n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL,n.PercServiceUtils.TYPE_POST,false,function(C,B){n.ajaxSetup({timeout:60000});if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}},y)}function c(z,A){var y={Site:z};n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL_ASYNC,n.PercServiceUtils.TYPE_POST,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{defaultMsg="There was an unexpected error during the import process.";A(n.PercServiceUtils.STATUS_ERROR,defaultMsg)}},y)}function v(y,A){n.PercServiceUtils.makeJsonRequest(n.perc_paths.JOB_STATUS+"/"+y,n.PercServiceUtils.TYPE_GET,false,function z(C,B){var E,D=n.PercServiceUtils.STATUS_SUCCESS;if(C==n.PercServiceUtils.STATUS_SUCCESS){E=B.data.asyncJobStatus}else{D=n.PercServiceUtils.STATUS_ERROR;E="There was an unexpected error during the import process."}A(D,E)})}function e(y,A){n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+y,n.PercServiceUtils.TYPE_GET,false,function z(C,B){var E,D=n.PercServiceUtils.STATUS_SUCCESS;if(C==n.PercServiceUtils.STATUS_SUCCESS){E=B.data}else{D=n.PercServiceUtils.STATUS_ERROR;E="There was an unexpected error during the import process."}A(D,E)})}function f(y,z){n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_IS_BEING_IMPORTED+"/"+y,n.PercServiceUtils.TYPE_GET,false,function(B,A){var D,C=n.PercServiceUtils.STATUS_SUCCESS;if(B==n.PercServiceUtils.STATUS_SUCCESS){D=A.data}else{C=n.PercServiceUtils.STATUS_ERROR;D="There was an unexpected error during the import process."}z(C,D)})}function p(A){var z=n.Deferred();var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+A,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){z.resolve(B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);z.reject(D)}});return z.promise()}})(jQuery);(function(e){e.PercAssetService={getAssetEditorForAssetId:q,getAssetViewForAssetId:c,getAssetEditorLibrary:v,getAssetEditor:h,getAssetEditorForWidgetAndFolder:p,putAssetInFolder:j,clear_asset:y,clear_orphan_assets:t,set_relationship:d,update_relationship:B,asset_from_local_content:x,deleteAsset:b,forceDeleteAsset:z,validateDeleteAsset:f,updateAsset:n,getUnusedAssets:w,promoteAsset:C,getAssetTypes:A};function q(D,E){e.ajax({url:e.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+D,success:function(H,G){var F={data:H,textstatus:G};E(e.PercServiceUtils.STATUS_SUCCESS,H)},error:function(I,G,H){var F={request:I,textstatus:G,error:H};var J=e.PercServiceUtils.extractDefaultErrorMessage(F.request);E(e.PercServiceUtils.STATUS_ERROR,J)}})}function c(D,E){e.ajax({url:e.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+D,success:function(H,G){var F={data:H,textstatus:G};E(e.PercServiceUtils.STATUS_SUCCESS,H)},error:function(I,G,H){var F={request:I,textstatus:G,error:H};var J=e.PercServiceUtils.extractDefaultErrorMessage(F.request);E(e.PercServiceUtils.STATUS_ERROR,J)}})}function v(D,E){k(D,"",E)}function k(F,E,G){var D=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_EDITOR_LIBRARY+F+"?filterDisabledWidgets=yes&widgetId="+E,e.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==e.PercServiceUtils.STATUS_SUCCESS){G(e.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=e.PercServiceUtils.extractDefaultErrorMessage(H.request);G(e.PercServiceUtils.STATUS_ERROR,J)}})}function h(E,F){var D=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_EDITOR+"/"+E,e.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==e.PercServiceUtils.STATUS_SUCCESS){F(e.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=e.PercServiceUtils.extractDefaultErrorMessage(G.request);F(e.PercServiceUtils.STATUS_ERROR,I)}})}function p(D,E,F){k(D,E,F)}function j(D,E){e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_ADD_TO_FOLDER,e.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==e.PercServiceUtils.STATUS_SUCCESS){E(e.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=e.PercServiceUtils.extractDefaultErrorMessage(F.request);E(e.PercServiceUtils.STATUS_ERROR,H)}},D)}function b(F,E,D){e.ajax({url:e.perc_paths.ASSET_DELETE+"/"+F,type:"DELETE",success:function(){E()},error:D})}function z(F,E,D){e.ajax({url:e.perc_paths.ASSET_FORCE_DELETE+"/"+F,type:"GET",success:E,error:D})}function f(F,E,D){e.ajax({url:e.perc_paths.ASSET_VALIDATE_DELETE+"/"+F,type:"GET",success:E,error:D})}function d(N,L,E,G,D,F,J,I){var M=D?"shared":"local";var H=(typeof(L.relationshipId)!="undefinded")?L.relationshipId:-1;var K={AssetWidgetRelationship:{ownerId:E,widgetId:L.widgetid,widgetName:L.widgetdefid,widgetInstanceName:L.widgetName,replacedRelationshipId:H,assetId:N,assetOrder:"0",resourceType:M}};if(F){K.AssetWidgetRelationship.folderPath=F}e.ajax({url:e.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(K),success:J,error:I})}function x(G,K,D,F,H,J){var E=e.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+F+H;var I={AssetWidgetRelationship:{ownerId:D,widgetId:K.widgetid,widgetName:K.widgetdefid,widgetInstanceName:K.widgetName,assetId:G,assetOrder:"0",resourceType:"local"}};e.PercServiceUtils.makeRequest(E,e.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==e.PercServiceUtils.STATUS_SUCCESS){J(e.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=e.PercServiceUtils.extractDefaultErrorMessage(L.request);J(e.PercServiceUtils.STATUS_ERROR,N)}},I,"application/json","text")}function B(I,G,K,E,F,H){var D=(typeof(K.relationshipId)!="undefinded")?K.relationshipId:-1;var J={AssetWidgetRelationship:{ownerId:E,widgetId:K.widgetid,widgetName:K.widgetdefid,widgetInstanceName:K.widgetName,replacedRelationshipId:D,assetId:I,assetOrder:"0",resourceType:"local",relationshipId:G}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",e.PercServiceUtils.TYPE_POST,true,function(L,M){if(L==e.PercServiceUtils.STATUS_SUCCESS){var N=M.data;if(N=="-1"){var P="The asset has been removed from the system.";H(false,P)}else{F(true,M.data)}}else{var O=e.PercServiceUtils.extractDefaultErrorMessage(M.request);H(false,O)}},J)}function y(D,F,E,G,I){I=I||function(){};var H={AssetWidgetRelationship:{ownerId:D,widgetId:F,widgetName:E,assetId:G,assetOrder:"0"}};e.ajax({url:e.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(H),success:I,error:function(L,J,K){alert("error")}})}function t(K,I,D,E,L){L=L||function(){};var F=[];for(var H=0;H<E.length;H++){var G="";G='{"assetId":"'+E[H]+'","assetOrder":0,"ownerId":"'+K+'","widgetId":'+I[H]+',"widgetName":"'+D[H]+'"}';F.push(G)}var M='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+F+"]}}";var J=e.parseJSON(M);e.ajax({url:e.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(J),success:L,error:function(P,N,O){alert("error")}})}function n(E,F,H){var D=e.perc_paths.ASSET_UPDATE+"/"+E+"/"+F;var G=function(I,J){if(I==e.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,J.data)}};e.PercServiceUtils.makeRequest(D,e.PercServiceUtils.TYPE_POST,true,G)}function C(G,K,H,E,F,J){var D=F?"shared":"local";var I={AssetWidgetRelationship:{ownerId:H,widgetId:K.widgetid,widgetName:K.widgetdefid,widgetInstanceName:K.widgetName,assetId:G,assetOrder:E,resourceType:D}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_PROMOTE,e.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==e.PercServiceUtils.STATUS_SUCCESS){J(e.PercServiceUtils.STATUS_SUCCESS)}else{var N=e.PercServiceUtils.extractDefaultErrorMessage(L.request);J(e.PercServiceUtils.STATUS_ERROR,N)}},I)}function w(D,E){e.PercServiceUtils.makeJsonRequest(e.perc_paths.ASSET_UNUSED+"/"+D,e.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==e.PercServiceUtils.STATUS_SUCCESS){E(e.PercServiceUtils.STATUS_SUCCESS,e.perc_utils.convertCXFArray(F.data.UnusedAssetSummary))}else{var H=e.PercServiceUtils.extractDefaultErrorMessage(F.request);E(e.PercServiceUtils.STATUS_ERROR,H)}})}function A(E,F){var D=e.perc_paths.ASSET_TYPES;if(E&&E=="yes"){D+=D.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}e.PercServiceUtils.makeJsonRequest(D,e.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==e.PercServiceUtils.STATUS_SUCCESS){F(e.PercServiceUtils.STATUS_SUCCESS,e.perc_utils.convertCXFArray(G.data.WidgetContentType))}else{var I=e.PercServiceUtils.extractDefaultErrorMessage(G.request);F(e.PercServiceUtils.STATUS_ERROR,I)}})}})(jQuery);(function(c){c.PercSearchService={getSearchResult:e,getAsyncSearchResult:d,getAsyncSearchExtendedResult:b};function e(h,k){var f=c.perc_paths.FINDER_SEARCH;var j=function(n,p){if(n==c.PercServiceUtils.STATUS_ERROR){var q=c.PercServiceUtils.extractDefaultErrorMessage(p.request);k(false,q)}else{k(true,p.data)}};c.PercServiceUtils.makeJsonRequest(f,c.PercServiceUtils.TYPE_POST,true,j,h)}function d(h,k){var f=c.perc_paths.FINDER_SEARCH;var j=function(n,p){if(n==c.PercServiceUtils.STATUS_ERROR){var q=c.PercServiceUtils.extractDefaultErrorMessage(p.request);k(false,q)}else{if(n==c.PercServiceUtils.STATUS_ABORT){k(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{k(true,p.data)}}};c.PercServiceUtils.makeJsonRequest(f,c.PercServiceUtils.TYPE_POST,false,j,h,j)}function b(h,k){var f=c.perc_paths.FINDER_SEARCH+"/extendedresults";var j=function(n,p){if(n==c.PercServiceUtils.STATUS_ERROR){var q=c.PercServiceUtils.extractDefaultErrorMessage(p.request);k(false,q)}else{if(n==c.PercServiceUtils.STATUS_ABORT){k(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{k(true,p.data)}}};c.PercServiceUtils.makeJsonRequest(f,c.PercServiceUtils.TYPE_POST,false,j,h,j)}})(jQuery);(function(n){var q=n.PercServiceUtils;n.PercPageService={forceDeletePage:b,validateDeletePage:x,getNonSEOPages:c,savePageMetadata:k,copyPage:h,getPagesWithTemplate:w,getUnassignedPagesBySite:j,checkForEmptyMigrationWidgets:t,clearFlagShowMigrationEmptyMessage:e,addToMyPages:v,removeFromMyPages:d,isMyPage:p,getMyContent:f};function t(B,z){var y=n.perc_paths.MIGRATION_EMPTY_FLAG+"/"+B;function A(C,D){if(C===q.STATUS_SUCCESS){if(D.data===true){z()}}}q.makeJsonRequest(y,q.TYPE_GET,true,A)}function e(A){var y=n.perc_paths.CLEAR_MIGRATION_EMPTY_FLAG+"/"+A;function z(B,C){}q.makeJsonRequest(y,q.TYPE_POST,true,z)}function b(A,z,y){n.ajax({url:n.perc_paths.PAGE_FORCE_DELETE+"/"+A,type:"GET",success:z,error:y});z()}function x(A,z,y){n.ajax({url:n.perc_paths.PAGE_VALIDATE_DELETE+"/"+A,type:"GET",success:z,error:y})}function c(C,E,A,z,y,D){if(A==null){A=""}if(y==null){y=""}var B={NonSEOPagesRequest:{keyword:y,path:C,workflow:E,state:A,severity:z}};n.PercServiceUtils.makeJsonRequest(n.perc_paths.PAGE_NONSEO,n.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==n.PercServiceUtils.STATUS_SUCCESS){D(n.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=n.PercServiceUtils.extractDefaultErrorMessage(F.request);D(n.PercServiceUtils.STATUS_ERROR,H)}},B)}function k(z,B){var y=n.perc_paths.SAVE_PAGE_METADATA+"/"+z;var A=function(C,D){if(C==n.PercServiceUtils.STATUS_ERROR){B(false,[D.request,D.textstatus,D.error])}else{B(true,D.data)}};n.PercServiceUtils.makeRequest(y,n.PercServiceUtils.TYPE_POST,true,A)}function h(y,A){var z=n.perc_paths.PAGE_COPY+"/"+y+"?addToRecent=true";n.PercServiceUtils.makeRequest(z,n.PercServiceUtils.TYPE_POST,true,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}},null,null,null,true)}function w(B,y,D,z){var A={startIndex:1,maxResults:5,sortColumn:"name",sortOrder:"asc",pageId:null};n.extend(A,y);var C=n.perc_paths.PAGES_WITH_TEMPLATE+"/"+B;C+="?startIndex="+A.startIndex;C+="&maxResults="+A.maxResults;C+="&sortColumn="+A.sortColumn;C+="&sortOrder="+A.sortOrder;if(A.pageId!=null){C+="&pageId="+A.pageId}n.PercServiceUtils.makeJsonRequest(C,n.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==n.PercServiceUtils.STATUS_ERROR){var G=n.PercServiceUtils.extractDefaultErrorMessage(E.request);D(n.PercServiceUtils.STATUS_ERROR,G)}else{D(n.PercServiceUtils.STATUS_SUCCESS,E.data.PagedItemList)}})}function j(B,A,y,C){var z=n.perc_paths.UNASSIGNED_PAGES_BY_SITE+"/"+B+"?startIndex="+A+"&maxResults="+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_GET,false,function(E,D){if(E==n.PercServiceUtils.STATUS_ERROR){var F=n.PercServiceUtils.extractDefaultErrorMessage(D.request);C(n.PercServiceUtils.STATUS_ERROR,F)}else{C(n.PercServiceUtils.STATUS_SUCCESS,D.data)}})}function v(y,A){var z=n.perc_paths.ADD_TO_MYPAGES+"/"+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_PUT,false,function(C,B){if(C==n.PercServiceUtils.STATUS_ERROR){var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}else{A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}})}function d(y,A){var z=n.perc_paths.REMOVE_FROM_MYPAGES+"/"+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_DELETE,false,function(C,B){if(C==n.PercServiceUtils.STATUS_ERROR){var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}else{A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}})}function p(y,A){var z=n.perc_paths.IS_MY_PAGE+"/"+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_ERROR){var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}else{A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}})}function f(z){var y=n.perc_paths.MY_CONTENT;n.PercServiceUtils.makeJsonRequest(y,n.PercServiceUtils.TYPE_GET,false,function(B,A){if(B==n.PercServiceUtils.STATUS_ERROR){var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}else{z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}})}})(jQuery);(function(e){e.PercPathService={getPathItemById:E,getFolderPathItem:q,getPathItemForPath:p,getItemPropertiesByWorkflowState:d,deleteFolder:n,deleteSection:z,deleteFSFolder:h,moveItem:w,renameFolder:C,createNewFolder:t,getLastExistingPath:A,validatePath:v,getDisplayFormat:B,getContentForPath:F,getFolderProperties:b,saveFolderProperties:j,deleteFolderSkipValidation:x,getInlineRenderLink:c};function B(I){var H=e.perc_utils.getDisplayFormat(e.PercNavigationManager.getPath());if(e.Percussion.getCurrentFinderView()==e.Percussion.PERC_FINDER_SEARCH_RESULTS||e.Percussion.getCurrentFinderView()==e.Percussion.PERC_FINDER_RESULT){H=e.perc_utils.getDisplayFormat("/")}var G=e.perc_paths.DISPLAY_FORMAT+H;e.PercServiceUtils.makeJsonRequest(G,e.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=e.PercServiceUtils.extractDefaultErrorMessage(J.request);I(e.PercServiceUtils.STATUS_ERROR,L)}})}function F(G,J,K){var H=e.perc_utils.encodeURL(J.path)+"/?startIndex="+J.startIndex+"&maxResults="+J.maxResults+"&displayFormatId="+G.id+"&sortColumn="+J.sortColumn+"&sortOrder="+J.sortOrder;var I=e.perc_paths.PATH_PAGINATED_FOLDER+H;e.PercServiceUtils.makeJsonRequest(I,e.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==e.PercServiceUtils.STATUS_SUCCESS){K(e.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=e.PercServiceUtils.extractDefaultErrorMessage(L.request);K(e.PercServiceUtils.STATUS_ERROR,N)}})}function p(H,I){var G=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_ITEM+H,e.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=e.PercServiceUtils.extractDefaultErrorMessage(J.request);I(e.PercServiceUtils.STATUS_ERROR,L)}})}function E(I,H){var G=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_ITEM_BY_ID+"/"+I,e.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){H(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var M=e.PercServiceUtils.extractDefaultErrorMessage(J.request);var L=e.PercServiceUtils.extractGlobalErrorCode(J.request);H(e.PercServiceUtils.STATUS_ERROR,M,L)}})}function d(I,K,G,J){if(G==null){G=""}var H={ItemByWfStateRequest:{path:I,workflow:K,state:G}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,e.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==e.PercServiceUtils.STATUS_SUCCESS){J(e.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=e.PercServiceUtils.extractDefaultErrorMessage(L.request);J(e.PercServiceUtils.STATUS_ERROR,N)}},H)}function w(J,G,I){var H={MoveFolderItem:{itemPath:J,targetFolderPath:G}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_ITEM_MOVE,e.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS)}else{var M=e.PercServiceUtils.extractDefaultErrorMessage(K.request);I(e.PercServiceUtils.STATUS_ERROR,M)}},H)}function t(H,I){var G=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_ADD_NEW_FOLDER+H,e.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=e.PercServiceUtils.extractDefaultErrorMessage(J.request);I(e.PercServiceUtils.STATUS_ERROR,L)}})}function q(H,I){var G=this;e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_FOLDER+e.perc_utils.encodeURL(H),e.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=e.PercServiceUtils.extractDefaultErrorMessage(J.request);I(e.PercServiceUtils.STATUS_ERROR,L)}})}function C(I,G,J){var H={RenameFolderItem:{path:I,name:G}};e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_RENAME_FOLDER,e.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==e.PercServiceUtils.STATUS_SUCCESS){J(e.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=e.PercServiceUtils.extractDefaultErrorMessage(L.request);var K=e.PercServiceUtils.extractFieldErrorCode(L.request);J(e.PercServiceUtils.STATUS_ERROR,N,K)}},H)}function n(I,G,H,J){e.ajax({url:e.perc_paths.PATH_VALIDATE_DELETE_FOLDER+I,dataType:"text",type:"GET",success:function(K){k(K,I,G,H,J)},error:f})}function z(I,H,K){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);var G={DeleteFolderCriteria:{path:I,skipItems:"NO"}};var J=3600000;e.ajax({url:e.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(G),timeout:J,success:K,error:D});e.unblockUI()}function h(H,G,I){n(H,G,"fsfolder",I)}function A(H,I,G){e.PercServiceUtils.makeRequest(e.perc_paths.PATH_LAST_EXISTING+H,e.PercServiceUtils.TYPE_GET,(G!=null&&G)?true:false,function(K,J){if(K==e.PercServiceUtils.STATUS_SUCCESS){I(e.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=e.PercServiceUtils.extractDefaultErrorMessage(J.request);I(e.PercServiceUtils.STATUS_ERROR,L)}})}function v(G,H){e.PercServiceUtils.makeRequest(e.perc_paths.PATH_VALIDATE_EXIST+G,e.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==e.PercServiceUtils.STATUS_SUCCESS){H(e.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=e.PercServiceUtils.extractDefaultErrorMessage(I.request);H(e.PercServiceUtils.STATUS_ERROR,K)}},null,null,null,true)}function k(I,J,G,H,M){var L;if(H=="section"){L=I18N.message("perc.ui.finder.section.delete@Title")}else{L=I18N.message("perc.ui.finder.folder.delete@Title")}var K=3600000;e.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:L,question:y(I,G,H),success:function(){var O="EMPTY";if(e("#perc_delete_folder_force").length>0){O=e("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var N={DeleteFolderCriteria:{path:J,skipItems:O}};e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.ajax({url:e.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(N),timeout:K,success:M,error:D});e.unblockUI()},width:500})}function x(J,G,H,K){var I="";k(I,J,G,H,K)}function f(G){var H=e.PercServiceUtils.extractDefaultErrorMessage(errors);var I="Failed to delete the folder.";e.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(H!="")?H:I})}function D(I){var G=e.PercServiceUtils.extractDefaultErrorMessage(I);var H="Failed to delete the folder.";e.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(G!="")?G:H})}function y(K,H,M){var G;var L;var O="";var N="";if(M=="Assets"){G="perc.ui.finder.folder.delete@ConfirmAssets";L="perc.ui.finder.folder.delete@WarningAssets";var J=K.indexOf("AssetsNotAuthorized");if(K.indexOf("AssetsNotAuthorized")>-1){O+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(K.indexOf("AssetsInUseTemplates")>-1){O+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(K.indexOf("AssetsInUsePages")>-1){O+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";N="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(M=="fsfolder"){G="perc.ui.finder.fsfolder.delete@Confirm";L="perc.ui.finder.fsfolder.delete@Warning"}else{if(M=="Sites"){G="perc.ui.finder.folder.delete@ConfirmPages";L="perc.ui.finder.folder.delete@WarningPages"}else{G="perc.ui.finder.section.delete@Confirm";L="perc.ui.finder.section.delete@Warning"}if(K.indexOf("PagesNotAuthorized")>-1){O+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(K.indexOf("PagesInUseTemplates")>-1){O+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(K.indexOf("PagesInUsePages")>-1){O+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";N="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var I;if(K=="Success"){I=I18N.message(G,[H])}else{I=I18N.message(L,[H])+"<br/><br/>"}return I+O+N}function b(H,G){e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+H,e.PercServiceUtils.TYPE_GET,true,function(J,I){G(J,I)})}function j(G,H){e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,e.PercServiceUtils.TYPE_POST,true,function(J,I){H(J,I)},G)}function c(I,H,J){var G=e.perc_paths.RENDER_LINK_PREVIEW+"/"+I;if(H=="image"){G+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{G+="/default"}e.PercServiceUtils.makeJsonRequest(G,e.PercServiceUtils.TYPE_GET,true,function(L,K){if(L==e.PercServiceUtils.STATUS_SUCCESS){J(true,K.data)}else{var M=e.PercServiceUtils.extractDefaultErrorMessage(K.request);J(false,M)}})}})(jQuery);(function(f){var x="NONE";var n="READER";var A="ASSIGNEE";var p="ADMIN";f.PercUserService={ACCESS_NONE:x,ACCESS_READ:n,ACCESS_WRITE:A,ACCESS_ADMIN:p,getUsers:E,findUser:t,findDirectoryUsers:v,importDirectoryUsers:w,getDirectoryStatus:c,getRoles:F,createUser:j,deleteUser:z,updateUser:e,findRole:q,deleteRole:y,updateRole:d,createRole:k,getAvailableUsers:b,getAccessLevel:D,validateDeleteRole:C,validateDeleteUsers:h};function E(H){var G=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_USERS,f.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==f.PercServiceUtils.STATUS_SUCCESS){I.data.UserList.users=B(I.data.UserList.users);H(f.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=f.PercServiceUtils.extractDefaultErrorMessage(I.request);H(f.PercServiceUtils.STATUS_ERROR,K)}})}function t(I,H){var G=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_FIND+"/"+I,f.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){J.data.User.name=J.data.User.name.toString();H(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);H(f.PercServiceUtils.STATUS_ERROR,L)}})}function v(I,J){if(I==null){J(f.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}I=I.replace(/%+$/,"");var H=f.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(I)+"%25";var G=this;f.PercServiceUtils.makeJsonRequest(H,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{try{var N=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,N)}catch(M){J(f.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function w(H,I){if(H==null||H==undefined||H.ImportUsers.externalUsers.length==0){I(f.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var G=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_EXTERNAL_IMPORT,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},H)}function c(H){var G=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_EXTERNAL_STATUS,f.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==f.PercServiceUtils.STATUS_SUCCESS){H(f.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=f.PercServiceUtils.extractDefaultErrorMessage(I.request);H(f.PercServiceUtils.STATUS_ERROR,K)}})}function F(H){var G=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_ROLES,f.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==f.PercServiceUtils.STATUS_SUCCESS){I.data.RoleList.roles=B(I.data.RoleList.roles);H(f.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=f.PercServiceUtils.extractDefaultErrorMessage(I.request);H(f.PercServiceUtils.STATUS_ERROR,K)}})}function j(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_CREATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function z(I,H){var G=this;f.PercServiceUtils.makeDeleteRequest(f.perc_paths.USER_DELETE+"/"+I,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){H(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);H(f.PercServiceUtils.STATUS_ERROR,L)}})}function e(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_UPDATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function q(I,J){var G=this;var H={psstring:{value:I}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_FIND,f.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){K.data.Role.name=K.data.Role.name.toString();J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}},H)}function y(H,I){var G={psstring:{value:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_DELETE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function k(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_CREATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function d(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_UPDATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function b(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_AVAILABLE_USERS,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){J.data.UserList.users=B(J.data.UserList.users);I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function D(J,L,M,H,K){var G=this;var I;if(J!=null){I={AccessLevelRequest:{type:J,itemId:L,parentFolderPath:H}}}else{I={AccessLevelRequest:{itemId:L,parentFolderPath:H}}}f.PercServiceUtils.makeJsonRequest(f.perc_paths.USER_ACCESS_LEVEL,f.PercServiceUtils.TYPE_POST,(typeof(K)!="undefined"&&K!=null&&K)?true:false,function(O,N){if(O==f.PercServiceUtils.STATUS_SUCCESS){M(f.PercServiceUtils.STATUS_SUCCESS,N.data.AccessLevel.accessLevel)}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);M(f.PercServiceUtils.STATUS_ERROR,P)}},I)}function C(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_DELETE_VALIDATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function h(G,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ROLE_REMOVE_USERS_VALIDATE,f.PercServiceUtils.TYPE_POST,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},G)}function B(G){G=f.perc_utils.convertCXFArray(G);f.each(G,function(I,H){G[I]=H.toString()});return G}})(jQuery);(function(d){d.PercWebResourcesService={deleteFile:b,validateFileUpload:c};function h(n,p,j,k,t){var q;if(k=="section"){q=I18N.message("perc.ui.finder.section.delete@Title")}else{q=I18N.message("perc.ui.finder.folder.delete@Title")}d.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:q,question:e(n,j,k),success:function(){var w="EMPTY";if(d("#perc_delete_folder_force").length>0){w=d("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var v={DeleteFolderCriteria:{path:p,skipItems:w}};d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.ajax({url:d.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(v),success:t,error:cbDfErrors});d.unblockUI()},width:500})}function f(n){var j=d.PercServiceUtils.extractDefaultErrorMessage(n);var k="Could not delete the file.";d.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete File Error",content:(j!="")?j:k})}function e(n){var k;var j="";j="perc.ui.finder.fsfile.delete@Filename";k="perc.ui.finder.fsfile.delete@Confirm";var p;p=I18N.message(j,[n]);p=p+"<br /><br />"+I18N.message(k,[n]);return p}function b(k,j,p){var n=I18N.message("perc.ui.finder.fsfile.delete@Title");d.perc_utils.confirm_dialog({id:"perc-finder-delete-fsfile",title:n,question:e(j),success:function(){d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.PercServiceUtils.makeDeleteRequest(d.perc_paths.WEBRESOURCESMGT+k,false,function(t,q){if(t==d.PercServiceUtils.STATUS_SUCCESS){p(d.PercServiceUtils.STATUS_SUCCESS,q.data)}else{f(q.request)}});d.unblockUI()},width:500})}function c(j,n,k){j="/"+j.slice(3).join("/")+"/"+n;d.PercServiceUtils.makeRequest(d.perc_paths.WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD+j,d.PercServiceUtils.TYPE_GET,false,function(q,p){k(q,p)})}})(jQuery);(function(n){n.PercWorkflowService=function(){return{checkIn:x,checkOut:j,forceCheckOut:k,transition:D,getTransitions:z,isCheckedOutToCurrentUser:E,isApproveAvailableToCurrentUser:p,getWorkflowObject:q,createNewWorkflowStep:e,deleteWorkflowStep:b,updateWorkflowStep:h,getStatusByWorkflow:f,getWorkflowList:C,getWorkflows:A,createWorkflow:c,updateWorkflow:v,deleteWorkflow:y,bulkApproveItems:t,getBulkApproveStatus:d,getDefaultWorkflow:w}};function f(H,G){var F="/Rhythmyx/services/workflowmanagement/workflows/"+n.perc_utils.encodeURL(H)+"/states/choices";G=G==null?function(){}:G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,G)}function j(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_CHECKOUT+"/"+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function x(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_CHECKIN+"/"+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function z(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_TRANSITIONS+"/"+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function D(H,G,J,I){if(n.perc_utils.isBlankString(H)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}I=I==null?function(){}:I;var F=n.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+H+"/"+G+"?comment="+J;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,I)}function k(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function E(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function p(G,H){if(n.perc_utils.isBlankString(G)){n.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}H=H==null?function(){}:H;var F=n.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+G;n.PercServiceUtils.makeJsonRequest(F,n.PercServiceUtils.TYPE_GET,true,H)}function q(F,I){var H=n.perc_paths.WORKFLOW_STEPPED+F;var G=function(J,K){if(J==n.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,[K.data,K.textstatus])}};n.PercServiceUtils.makeJsonRequest(H,n.PercServiceUtils.TYPE_GET,false,G)}function h(F,K,G,J){var I=n.perc_paths.WORKFLOW_STEPPED+F+"/steps/"+K;var H=function(L,M){if(L==n.PercServiceUtils.STATUS_ERROR){J(false,[M.request,M.textstatus,M.error])}else{J(true,[M.data,M.textstatus])}};n.PercServiceUtils.makeJsonRequest(I,n.PercServiceUtils.TYPE_PUT,false,H,G)}function e(F,K,G,J){var I=n.perc_paths.WORKFLOW_STEPPED+F+"/steps/"+B(K);if((K.indexOf("/")!=-1)||(K.indexOf("\\")!=-1)||(K.indexOf(";")!=-1)||(K.indexOf('"')!=-1)){G.Workflow.workflowSteps[0].stepName=K.replace(/[\\\/\;"]/g,"#")}var H=function(L,M){if(L==n.PercServiceUtils.STATUS_ERROR){J(false,[M.request,M.textstatus,M.error])}else{J(true,[M.data,M.textstatus])}};n.PercServiceUtils.makeJsonRequest(I,n.PercServiceUtils.TYPE_POST,false,H,G)}function b(F,J,I){var H=n.perc_paths.WORKFLOW_STEPPED+F+"/steps/"+J;var G=function(K,L){if(K==n.PercServiceUtils.STATUS_ERROR){I(false,[L.request,L.textstatus,L.error])}else{I(true,[L.data,L.textstatus])}};n.PercServiceUtils.makeJsonRequest(H,n.PercServiceUtils.TYPE_DELETE,false,G)}function C(H){var G=n.perc_paths.WORKFLOW_STEPPED;var F=function(I,J){if(I==n.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{J.data.EnumVals.entries=n.perc_utils.convertCXFArray(J.data.EnumVals.entries);H(true,[J.data,J.textstatus])}};n.PercServiceUtils.makeJsonRequest(G,n.PercServiceUtils.TYPE_GET,false,F)}function w(H){var G=n.perc_paths.DEFAULT_WORKFLOW_META;var F=function(I,J){if(I==n.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{J.data.EnumVals.entries=n.perc_utils.convertCXFArray(J.data.EnumVals.entries);H(true,J.data)}};n.PercServiceUtils.makeJsonRequest(G,n.PercServiceUtils.TYPE_GET,false,F)}function A(H){var G=n.perc_paths.WORKFLOW_META;var F=function(I,J){if(I==n.PercServiceUtils.STATUS_ERROR){H(false,[J.request,J.textstatus,J.error])}else{H(true,[J.data,J.textstatus])}};n.PercServiceUtils.makeJsonRequest(G,n.PercServiceUtils.TYPE_GET,false,F)}function c(F,G,J){var I=n.perc_paths.WORKFLOW_STEPPED+B(F);if((F.indexOf("/")!=-1)||(F.indexOf("\\")!=-1)||(F.indexOf(";")!=-1)||(F.indexOf('"')!=-1)){G.Workflow.workflowName=F.replace(/[\\\/\;"]/g,"#")}var H=function(K,L){if(K==n.PercServiceUtils.STATUS_ERROR){J(false,[L.request,L.textstatus,L.error])}else{J(true,[L.data,L.textstatus])}};n.PercServiceUtils.makeJsonRequest(I,n.PercServiceUtils.TYPE_POST,false,H,G)}function v(J,F,I){var H=n.perc_paths.WORKFLOW_STEPPED+J;var G=function(K,L){if(K==n.PercServiceUtils.STATUS_ERROR){I(false,[L.request,L.textstatus,L.error])}else{I(true,[L.data,L.textstatus])}};n.PercServiceUtils.makeJsonRequest(H,n.PercServiceUtils.TYPE_PUT,false,G,F)}function B(F){var G=F.toString();G=G.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(G))}function y(F,I){var H=n.perc_paths.WORKFLOW_STEPPED+F;var G=function(J,K){if(J==n.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,[K.data,K.textstatus])}};n.PercServiceUtils.makeJsonRequest(H,n.PercServiceUtils.TYPE_DELETE,false,G)}function t(F,I){var H=n.perc_paths.WORKFLOW_BULK_APPROVE;var G=function(J,K){if(J==n.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,[K.data,K.textstatus])}};n.PercServiceUtils.makeJsonRequest(H,n.PercServiceUtils.TYPE_POST,false,G,F)}function d(F,G,J){var I=n.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(G){I+="/full/"+F}else{I+="/processed/"+F}var H=function(K,L){if(K==n.PercServiceUtils.STATUS_ERROR){J(false,[L.request,L.textstatus,L.error])}else{J(true,[L.data,L.textstatus])}};n.PercServiceUtils.makeJsonRequest(I,n.PercServiceUtils.TYPE_GET,false,H)}})(jQuery);(function(c){c.PercImportProgressDialog=function b(C){var f={IDS:{MAIN_DIALOG:"perc_import_progress_dialog",MAIN_DIALOG_CLOSE_BUTTON:"perc_import_progress_dialog_close",MAIN_DIALOG_CLOSE_DISABLED_BUTTON:"perc_import_progress_dialog_close_disabled",MAIN_DIALOG_DONE_BUTTON:"perc_import_progress_dialog_done",MAIN_DIALOG_DONE_DISABLED_BUTTON:"perc_import_progress_dialog_done_disabled"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.ImportProgressDialog.title@Import"),IMPORT_ERROR_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import failed message"),IMPORT_SUCCESS_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import succeded message")},OTHER:{EVENTS_ENABLE_DONE_BUTTON:"enableDoneButton",POLLING_PERIOD_DURATION:100,IMPORT_LOG_URL:c.perc_paths.VIEW_IMPORT_LOG+"?templateId="}};var n={Done:{id:f.IDS.MAIN_DIALOG_DONE_BUTTON,click:function(G){C.onSuccessCallback(E)}},"Done Disabled":{id:f.IDS.MAIN_DIALOG_DONE_DISABLED_BUTTON},"Close Normal":{id:f.IDS.MAIN_DIALOG_CLOSE_BUTTON,click:function(){y=true;if(C.backgroundRefreshCallback!==undefined&&k===true){C.backgroundRefreshCallback()}x.remove()}}};var B={id:f.IDS.MAIN_DIALOG,title:f.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:true,width:686,height:"auto",percButtons:n};var t=c("<div/>");var x;var v;var E;var k=false;var q=-1;var A;var y=false;function z(G){A='<div class="progress">';A+='<p class="progress-message">&nbsp;</p>';A+='<div class="progress-bar-container">';A+='<div class="progress-bar"></div>';A+="</div>";A+='<div class="error-message">';A+=f.TEXT.IMPORT_ERROR_MESSAGE;A+="</div>";A+='<div class="success-message">';A+=f.TEXT.IMPORT_SUCCESS_MESSAGE;A+="</div>";A+="</div>";A=c(A);t.append(c("<div>").append(A));if(G.showVideo===true){t.append(c('<div align="center" style="margin-top:24px;height: 315px; overflow:hidden">').append(c('<iframe id="perc_import_video" src="//help.percussion.com/in-product/single2" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="560px" height="0px" style="display: block; overflow: hidden">')).append(c('<img id="perc_import_image" src="../images/images/ImportVideoNotFound.png" width="560px" height="0px">')))}t.append(c("<div>").append('<p class="hint">Ask questions. Get answers. Visit the <a target="_blank" href="http://cm1community.percussion.com/percussion" title="Percussion Community">Percussion Community</a> to access Video Tutorials, Forums, and more.</p>'));if(G.showVideo===true){t.append(c('<img height="0px" width="0px" src="http://help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(I).load(H))}function I(){c("#"+f.IDS.MAIN_DIALOG).find("#perc_import_image").attr("height","315px")}function H(){c("#"+f.IDS.MAIN_DIALOG).find("#perc_import_video").attr("height","315px")}x=c(t).perc_dialog(B);d();w()}function d(){var G=c("#"+n["Done Disabled"].id);var H=c("#"+n.Done.id);H.hide();c("#"+f.IDS.MAIN_DIALOG).bind(f.OTHER.EVENTS_ENABLE_DONE_BUTTON,function(J,I){F(I)})}function F(G){var I=c("#"+n.Done.id),H=c("#"+n["Done Disabled"].id);if(G===true){I.show();H.hide()}else{I.hide();H.show()}}function w(){C.startProgressCallback(function(H,G){if(H!=c.PercServiceUtils.STATUS_SUCCESS){h()}else{v=G;j()}})}function j(){if(k===true){return}C.pollingProgressCallback(v,function(H,J){if(H!=c.PercServiceUtils.STATUS_SUCCESS||J.status<0){h()}else{var G=A.find(".progress-message");var I=A.find(".progress-bar");if(J.status>q){if(J.message!==undefined&&J.message.length>0){J.message=J.message.charAt(0).toUpperCase()+J.message.slice(1)+"...";G.html(J.message)}I.css("width",J.status+"%");q=J.status}if(J.status==100){k=true;if(C.backgroundRefreshCallback!==undefined&&y===true){C.backgroundRefreshCallback();return}p();return}setTimeout(j,f.OTHER.POLLING_PERIOD_DURATION)}})}function e(){A.find(".progress-message").css("visibility","hidden");A.find(".progress-bar-container").css("visibility","hidden")}function h(){e();A.find(".error-message").show()}function p(){C.importResultCallback(v,function(G,H){E=H;D(E);e();A.find(".success-message").show();F(true)})}function D(){function G(I){var H=A.find('a[title="Download the import log here"]');H.attr("href",f.OTHER.IMPORT_LOG_URL+I)}if(E.id!==undefined){G(E.id)}else{c.PercSiteService.getTemplates(E.Site.name,function(H,I){G(I.TemplateSummary[0].id)})}}z(C)}})(jQuery);var $perc_newSiteDialogLayout;(function(c){var e;c.perc_createNewSiteDialog=function(w){var t=null;e=c("<div></div>").perc_wizard({steps:2,modal:true,resizable:false,templateUrl:"../jsp/dialogs/perc_newSiteDialog.jsp",title:I18N.message("perc.ui.newsitedialog.title@Create Site"),height:"auto",width:690,open:function(){var x=c("#sitename"),z=c("#templatename"),A=c("#url"),v=c("input#type_url");if(!$perc_newSiteDialogLayout){$perc_newSiteDialogLayout=true;c.perc_filterField(x,c.perc_textFilters.HOSTNAME);c.perc_filterField(z,c.perc_textFilters.URL);c("input[type=radio]").change(function(B){var C=c(this);if(C.attr("id")!=="type_url"){A.attr("readonly","readonly").attr("disabled","true");j(A)}else{A.removeAttr("readonly").removeAttr("disabled")}});var y=c("#perc_templateList").perc_imageselect({hardSelect:false,onSelect:function(C,B){c("#perc_selectedTemplate img").remove();c("#perc_selectedTemplate").html("<img src='"+B+"'/><br/><span>"+C.split(".")[2]+"</span>");c("#selectedtemplate").val(C)}});n();c("#perc-select-template-type").change(function(){if(c(this).val()=="base"){c("#perc-base-template-lib").show();c("#perc-resp-template-lib").hide()}else{c("#perc-base-template-lib").hide();c("#perc-resp-template-lib").show()}});t=c("#perc_newSiteDialogForm").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:d(),messages:b(),showErrors:function(B,C){if(this.pendingRequest<1){this.defaultShowErrors();var D=c("#perc_newSiteDialogForm");D.find(".perc_dialog_field.perc_field_success").prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");D.find(".perc_dialog_field.perc_field_error").prevAll(".perc_dialog_label").addClass("perc_dialog_label_error");c(this.currentElements).removeClass(this.settings.errorClass)}}})}else{h()}A.removeAttr("readonly").removeAttr("disabled");j(x);j(A);v.attr("checked",true)},onOk:function(){p(w)},onNext:f,onValidate:function(){return t.form()}});return e};function f(A){var F=e.find("select[name=sitename-select]");if(F.length>0){e.find("input[name=sitename]").val(F.val())}var D=c("#sitename"),z=c("#url"),t={templateName:undefined,templateId:undefined,pageId:undefined},w,B=true;function C(G){c.unblockUI();c.perc_utils.alert_dialog({title:"Error",content:G})}function x(G,H){if(G!=c.PercServiceUtils.STATUS_SUCCESS){C(H);return}t.templateName=H.Site.templateName;t.tabId="perc-tab-layout";w=c.perc_paths.SITES_ROOT+"/"+H.Site.name;c.PercSiteService.getTemplates(H.Site.name,E)}function E(G,H){if(G!=c.PercServiceUtils.STATUS_SUCCESS){C(H);return}t.templateId=H.TemplateSummary[0].id;c.PercPathService.getFolderPathItem(w,v)}function v(H,K){if(H!=c.PercServiceUtils.STATUS_SUCCESS){C(K);return}var J;for(var I=0;I<K.PathItem.length;I++){if(K.PathItem[I].category=="LANDING_PAGE"){J=K.PathItem[I];I=K.PathItem.length}}t.pageId=J.id;var G=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_DESIGN,y.name,null,null,null,J.path,null,t)}if(e.find("input[type=radio]").filter(":checked").attr("id")==="type_url"){var y={name:c.trim(D.val()),baseUrl:c.trim(z.val())};if(!(/^(https?):\/\//i).test(y.baseUrl)){y.baseUrl="http://"+y.baseUrl}B=false;c(".ui-dialog-titlebar .ui-icon-closethick").click();c.PercImportProgressDialog({showVideo:true,backgroundRefreshCallback:function(){c.perc_finderInstance.refresh()},onSuccessCallback:function(G){x("success",G)},startProgressCallback:function(G){c.PercSiteService.createSiteFromUrlAsync(y,function(I,H){G(I,H)})},pollingProgressCallback:c.PercSiteService.createSiteFromUrlStatus,importResultCallback:c.PercSiteService.createSiteFromUrlResult})}return B}function p(v){var t=q();t.selectedtemplate=c("#perc-select-template-type").val()=="base"?t.perc_selected_basetemplate:t.perc_selected_resptemplate;if(t.selectedtemplate.length==0){c.perc_utils.alert_dialog({title:"Error",content:"Please select a template for your homepage."});return}if(t.templatename==null||c.trim(t.templatename)==""){c.perc_utils.alert_dialog({title:"Error",content:"Template name cannot be blank."});return}var w={Site:{name:t.sitename,label:t.sitename,description:t.description,homePageTitle:"Home",navigationTitle:"Home",baseTemplateName:t.selectedtemplate,templateName:c.trim(t.templatename)}};c.PercBlockUI();c(".ui-dialog-titlebar .ui-icon-closethick").click();c.ajax({url:c.perc_paths.SITE_CREATE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(w),success:function(y,x){v(t.sitename);c.unblockUI()},error:function(z,x,y){var A=c.PercServiceUtils.extractDefaultErrorMessage(z);c.unblockUI();c.perc_utils.alert_dialog({title:"Error",content:A})}})}function h(){c("#perc_newSiteDialog .perc_dialog_field").each(function(){c(this).val("")});c("#perc_selectedTemplate").html("");c(".perc_imageselect_selected").removeClass("perc_imageselect_selected")}function q(){var t=new Object();c("#perc_newSiteDialog .perc_dialog_field").each(function(){t[this.id]=c(this).val()});return t}function n(){var v=c("#perc-base-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"base",hiddenFieldId:"perc_selected_basetemplate"});var t=c("#perc-resp-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"resp",hiddenFieldId:"perc_selected_resptemplate"})}function k(w,v,x,t){for(i=0;i<t.SiteSummary.length;i++){if((t.SiteSummary[i].name+"").toLowerCase()==x.toLowerCase()){return false}}return true}function d(){var t={sitename:{required:true,perc_remote:{url:c.perc_paths.SITES_ALL,contentType:"application/json",type:"GET",dataType:"json",handler:k}},url:{required:"input[type=radio]#type_url:checked",maxlength:2000,noBinary:"noBinary"},description:{maxlength:255},selectedtemplate:{required:true}};return t}function b(){var t={sitename:{required:"Site name is a required field.",perc_remote:"The site name must be unique."},url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."},templatename:{required:"Template name is a required field.",perc_remote:"The template name must be unique."},selectedtemplate:{required:"Selected template is required."}};return t}function j(v){v.prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");var t=v.next();if(t.find(".perc_field_error").length>0){v.removeClass("perc_field_error");t.remove()}}})(jQuery);(function(b){b.perc_iframe_fix=function(c){b.perc_iframe_scope="perc-iframe-scope";var p=false;var h=b('<div class="perc-iframe-overlay-dnd-container"/>');b("body").append(h);h.height(c.height()).width(c.width()).addClass("ui-layout-ignore").css({overflow:"hidden",position:"absolute",left:"-10000px",top:"0px",zIndex:1000});k();function d(){h.css({left:c.position().left,top:c.position().top});h.height(c.height());h.width(c.width())}function q(){h.css({left:"-10000px",top:"0px"})}function e(){var t=c.contents().find(":data(droppable)");t.each(function(){var C=b(this);var E=b.data(this,"droppable");var A=b("<div/>").addClass("allDroppablesHelpers").addClass("perc-iframe-dnd-overlay-droppable").attr("for",C.attr("id")).width(C.outerWidth()).height(C.outerHeight());h.append(A);var z,x;var y=c;if(b.browser.msie){var w=y[0].contentWindow;var D=w.document.documentElement;z=D.scrollLeft;x=D.scrollTop}else{z=c[0].contentWindow.scrollX;x=c[0].contentWindow.scrollY}var v=b(this).offset().left-z;var B=b(this).offset().top-x;if(b.browser.mozilla||b.browser.safari){v-=window.scrollX;B-=window.scrollY}A.css({position:"absolute",left:v+"px",top:B+"px"});A.droppable({greedy:E.options.greedy,tolerance:E.options.tolerance,accept:E.options.accept,over:function(F){E._over.call(E,F)},activate:function(F){E._activate.call(E,F)},deactivate:function(F){E._deactivate.call(E,F)},out:function(F){E._out.call(E,F)},drop:function(F){E._drop.call(E,F)}})})}function n(){h.empty()}function j(){if(!p){p=true;d();e()}}function f(){q();n();p=false}function k(){var t=b("<div/>").addClass("ui-layout-ignore").droppable({addClasses:false,activate:function(v,w){j(w.draggable)},deactivate:function(){setTimeout(f,100)}});b("body").append(t)}}})(jQuery);(function(f){function h(w,x,t,v){if(!f.perc_fakes.page_service.create_page){f.perc_pathmanager.get_folder_path(w,function(y){c(y,x,t,v)},v)}else{if(false){v("Could not create new page: random failure")}else{t("16777215-101-733")}}}function c(v,z,t,x){var y={};f.each(z,function(){y[this.name]=this.value});var B=null;var A=null;var w=y.addToRecent?true:false;if(y.landingpage){B=f.perc_paths.SECTION_CREATE;pass_in={CreateSiteSection:{pageName:y.page_name,pageTitle:y.page_title,templateId:y.template,pageUrlIdentifier:y.page_name,pageLinkTitle:y.page_linktext,folderPath:v,addToRecent:true}}}else{B=f.perc_paths.PAGE_CREATE;pass_in={Page:{name:y.page_name,title:y.page_title,templateId:y.template,linkTitle:y.page_linktext,folderPath:v,addToRecent:true}}}f.ajax({dataType:"json",data:JSON.stringify(pass_in),contentType:"application/json",type:"POST",url:B,success:t,error:x})}function k(w,t,v){f.ajax({url:f.perc_paths.PAGE_EDIT+"/"+w,type:"GET",success:t,error:v,dataType:"text"})}function b(w,v,t){f.ajax({url:f.perc_paths.PAGE_DELETE+"/"+w,type:"DELETE",success:function(){v()},error:t})}function p(w,v,t){f.ajax({url:f.perc_paths.SITE_DELETE+"/"+w,type:"DELETE",success:v,error:t})}function j(v,w,x,t){if(!f.perc_fakes.page_service.new_asset){t("New asset not yet implemented!")}else{x("54321")}}function d(v,t,z,w){if(!f.perc_fakes.page_service.get_widget_ctypes){function y(A){var B={};f.each(A.AssetDropCriteria,function(){B[this.widgetId]=this.supportedCtypes});z(B)}f.ajax({url:f.perc_paths.ASSET_WIDGET_DROP_CRITERIA+v+"/"+t,type:"GET",dataType:"json",success:y,error:w})}else{var x={"12345":["percPage","article"],"4567":[]};z(x)}}function q(t,v,w){f.ajax({url:f.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:v,dataType:"xml",processData:false,success:w,error:function(z,x,y){f.unblockUI();f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(z)})}})}function e(t,v){f.ajax({url:f.perc_paths.PAGE_CREATE+"/"+t,type:"GET",dataType:"text",success:v,error:function(y,w,x){f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(y)})}})}function n(w,t,v){f.ajax({url:f.perc_paths.PAGE_PREVIEW+w,type:"POST",contentType:"text/xml",dataType:"xml",data:t,processData:false,success:v,error:function(z,x,y){f.perc_utils.alert_dialog({title:"Error",content:f.PercServiceUtils.extractDefaultErrorMessage(z)})}})}f.perc_pagemanager={save_page:q,render_region:n,load_page:e,create_new_page:h,render_page:k,new_asset:j,delete_page:b,delete_site:p,get_widget_ctypes:d,createPage:c}})(jQuery);(function(h){var e=h.perc_utils;function j(x,w,q,v){k(x,function(y){w(y.PathItem)},t(q),v);function t(y){return function(z){var A=h.map(z.PathItem,function(B){var C=B.path.split("/");if(C[C.length-1]==""){C.pop()}B.path=h.map(C,function(D){return D});B.path_component=C[C.length-1];return B});A=h.grep(A,function(B){return B.type!="percNavTree"&&B.name!=".system"});y(A)}}}function k(y,x,q,v){if(y.length<=2){c(y,true,q,v)}else{var t=h.map(y,function(A){return A});var w=t.pop();function z(B){var A=h.grep(B.PathItem,function(E){var C=E.path.split("/");var D=C.pop();if(D==""){D=C.pop()}return D==w});if(A.length==0){v("Item not found")}else{if(A[0].leaf==true){c(y,false,x,v)}else{c(y,true,q,v)}}}c(t,true,z,v)}}function n(v,q,t){q(v[1])}function d(v,q,t){c(v,false,function(w){q(w.PathItem["folderPath"])},t)}function f(w,t,v){var q=h.map(w,function(y){return y});k(w,function(){q.pop();c(q,true,function(x){t(x,q)},v)},function(x){t(x,q)},v)}function p(y,t,x){var v=y.join("/")+"/";var w=h.perc_utils.acop(y);var q=w.pop();c(w,true,function(A){var z=h.grep(A.PathItem,function(B){return B.name==q});if(z.length>0){x(I18N.message("perc.ui.saveasdialog.error@Duplicate folder"))}else{v=h.perc_utils.encodeURL(v);h.ajax({type:"GET",success:t,error:x,url:h.perc_paths.PATH_ADD_FOLDER+v,dataType:"json"})}},x)}function c(z,x,A,w,t){var v;var y;if(t){v=z;y=h.perc_paths.PATH_PAGINATED_FOLDER+v}else{v=h.perc_utils.encodeURL(z.join("/")+"/");y=h.perc_paths.PATH_FOLDER+v}if(!h.perc_fakes.path_service){if(x){h.ajax({type:"GET",success:A,error:function(D,B,C){if(D.status!=0){w("Error finding path "+v)}},url:y,dataType:"json",cache:false})}else{h.ajax({type:"GET",success:A,error:function(D,B,C){if(D.status!=0){w("Error finding path "+v)}},url:h.perc_paths.PATH_ITEM+v,dataType:"json",cache:false})}}else{var q={"/":{PathItem:[{name:"Sites",leaf:"false",path:"/Sites/"}]},"/Sites/":{PathItem:[{name:"Test",leaf:"false",path:"/Sites/Test/"},{name:"TestTwo",leaf:"false",path:"/Sites/TestTwo/"}]},"/Sites/Test/":{PathItem:[{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}]},"/Sites/Test/Test/":{PathItem:{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}},"/Sites/TestTwo/":{PathItem:[{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}]},"/Sites/TestTwo/TestTwo/":{PathItem:{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}}};A(q[v])}}function b(w,x){var q=function(y){x(true,y.ItemProperties)};var t=function(A,y,z){x(false,h.PercServiceUtils.extractDefaultErrorMessage(A))};var v=h.perc_utils.encodeURL(w);h.ajax({type:"GET",success:q,error:t,url:h.perc_paths.PATH_ITEM_PROPERTIES+v,dataType:"json",cache:false})}h.perc_pathmanager={is_leaf:j,open_path:c,get_folder_path:d,get_site_id:n,open_containing_folder:f,add_folder:p,getItemProperties:b}})(jQuery);(function(b){b.perc_build_new_folder_button=function(c,h){var f=b.perc_utils;var k=["",b.perc_paths.SITES_ROOT_NO_SLASH];var e={};var q=null;var d=b("<a id='perc-finder-new-folder' class='perc-font-icon ui-disabled' href='#' title='Click to create new folder'><span class='icon-plus'></span><span class='icon-folder-close'></span></a>").perc_button().click(function(){n()});function n(){b.PercFolderHelper().getAccessLevelByPath(k.join("/"),false,function(v,t){if(v==b.PercFolderHelper().PERMISSION_ERROR||t==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create a folder here."});return}else{b.PercBlockUI(b.PercBlockUIMode.CURSORONLY);b.PercPathService.createNewFolder(k.join("/"),function(x,w){if(x==b.PercServiceUtils.STATUS_SUCCESS){e=w;c.refresh(function(){var y=b(".perc-finder").css("visibility")=="visible";if(y){f.makeFolderEditable(e.PathItem)}});b.unblockUI()}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:w})}})}})}function j(t){k=t;p(true);if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){p(false)}else{if(t[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&t.length<4){p(false)}else{if(t.length==2&&t[1]==b.perc_paths.SITES_ROOT_NO_SLASH){p(false)}else{b.PercFolderHelper().getAccessLevelByPath(t.join("/"),true,function(w,v){if(w==b.PercFolderHelper().PERMISSION_ERROR||v==b.PercFolderHelper().PERMISSION_READ){p(false)}})}}}}function p(t){if(t){b(".perc-finder-menu #perc-finder-new-folder").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}c.addPathChangedListener(j);return d}})(jQuery);(function(b){b.perc_build_new_page_button=function(k,d){var j;var f=b('<a id="mcol-new-page" class="perc-font-icon" href="#" title="Click to create new page" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file"></span></a>').perc_button();function c(n){j=n;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){e(false)}else{if(n[1]==b.perc_paths.SITES_ROOT_NO_SLASH){f.show();e(true);if(n.length<3){e(false)}else{b.PercFolderHelper().getAccessLevelByPath(n.join("/"),true,function(q,p){if(q==b.PercFolderHelper().PERMISSION_ERROR||p==b.PercFolderHelper().PERMISSION_READ){e(false)}})}}else{if(n[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||n[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){f.hide()}}}}function e(n){if(n){f.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(h)}else{f.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function h(){var p=k.getCurrentItem();var n="";if(p!=null){n=p.folderPaths;if(p.type=="Folder"){n=p.folderPath}}b.PercUserService.getAccessLevel("percPage",-1,function(t,q){if(t==b.PercServiceUtils.STATUS_ERROR||q==b.PercUserService.ACCESS_READ||q==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Page",content:"You are not authorized to create a new page."});return}else{if(d){d.confirm_if_dirty(function(){b.PercNewPageDialog().openDialog(j.join("/"))})}else{open_new_page_dialog(b.PercNewPageDialog().openDialog(j.join("/")),null)}}},n)}k.addPathChangedListener(c);return f}})(jQuery);(function(c){var b;c.perc_build_copy_page_button=function(h,n){var d=c("<a id='perc-finder-copy-page' href='#' title='Click to copy selected page'>Copy</a>").click(function(t){p()});function p(){c.PercBlockUI(c.PercBlockUIMode.CURSORONLY);var x=c(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE");var w=c(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE");var t=c("#perc-finder-listview .perc-datatable-row-highlighted");if(x[0]==undefined&&w[0]==undefined&&t.size()==0){return}b=x.text();if(!b||b==""){b=w.text()}var z;if(t.size()>0){listSelectedRowData=t.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"){z=listSelectedRowData.id;b=listSelectedRowData.name}}else{if(x[0]!=undefined){z=x.attr("id")}else{z=w.attr("id")}}var v=h.getCurrentItem();var y="";if(v!=null){y=v.id}c.PercUserService.getAccessLevel("percPage",y,function(B,A){if(B==c.PercServiceUtils.STATUS_ERROR||A==c.PercUserService.ACCESS_READ||A==c.PercUserService.ACCESS_NONE){c.perc_utils.alert_dialog({title:"Copy Page",content:"You are not authorized to copy the page '"+b+".'"});c.unblockUI();return}else{z=z.replace("perc-finder-listing-","");e(z)}})}function e(t){var v=h.getCurrentPath();var w=h.getPathItemById(t);c.PercPageService.copyPage(t,function(y,x){if(y=="error"){q(x);h.refresh()}else{h.refresh(function(){var A=x.data.split("/");var z=A[A.length-1];v[v.length-1]=z;h.open(v)})}c.unblockUI()})}function q(t){t=t.replace("PAGE_NAME",b);c.perc_utils.alert_dialog({id:"perc-finder-copy-page-error",title:"Error",content:t})}function k(z){var w=z[z.length-1];if(z[1]==c.perc_paths.SITES_ROOT_NO_SLASH){if(z.length<4){j(false)}else{var y=c(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE.perc_last_selected");var x=c(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE.perc_last_selected");var t=c(".mcol-listing.perc-listing-type-Folder.perc-listing-category-FOLDER.ui-draggable.perc_last_selected.ui-droppable[title='"+w+"']").eq(0).attr("id");var A=c(".mcol-listing.perc-listing-type-Folder.perc-listing-category-SECTION_FOLDER.perc_last_selected.ui-droppable[title='"+w+"']").eq(0).attr("id");var v=c("#perc-finder-listview .perc-datatable-row-highlighted");if(v.size()>0){listSelectedRowData=v.data("percRowData");f(z,function(B){if(B&&(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE")){j(true)}else{j(false)}});return}else{if(y[0]!=undefined||x[0]!=undefined){f(z,function(B){if(!B||t!=undefined||A!=undefined){j(false)}else{j(true)}})}else{j(false)}}}}else{j(false)}}function f(v,w){var t=v.slice(0,v.length-1).join("/");c.PercFolderHelper().getAccessLevelByPath(t,false,function(y,x){if(y==c.PercFolderHelper().PERMISSION_ERROR){c.perc_utils.alert_dialog({title:"Error",content:x});return}else{w(!(x==c.PercFolderHelper().PERMISSION_READ));return}})}function j(t){if(t){d.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(p)}else{d.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}d.trigger("actions-change-enabled-state")}h.addPathChangedListener(k);return d}})(jQuery);(function(b){b.perc_build_download_button=function(h,e){var d=b('<a id="perc-finder-download" href="#" title="Click to download the selected file">Download File</a>');function c(n){if(n[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&n.length>4){p=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(p==undefined){var p=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened.perc_last_selected").data("spec")}if(p!=undefined&&p.type=="FSFile"&&p.leaf){j(true);f(true);return}}j(false);f(false)}function f(n){if(n){d.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(k)}else{d.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}d.trigger("actions-change-enabled-state")}function k(){}function j(n){var p;if(n){p=b.perc_paths.WEBRESOURCESMGT+"/"+h.getCurrentPath().slice(3).join("/")}else{p="#"}d.attr("href",p)}h.addPathChangedListener(c);return d}})(jQuery);(function(b){b.perc_build_upload_button=function(h,e){var d=b('<a id="perc-finder-upload" href="#" title="Click to upload a file">Upload File...</a>').click(c);function j(k){if(k.length>3&&b.perc_paths.DESIGN_THEMES==k[0]+"/"+k[1]+"/"+k[2]+"/"+k[3]){f(true);return}f(false)}function f(k){if(k){d.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(c)}else{d.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}d.trigger("actions-change-enabled-state")}function c(){b.perc_upload_theme_file_dialog.open(h)}h.addPathChangedListener(j);return d}})(jQuery);(function(b){b.perc_build_folderproperties_button=function(c,f){var d=b('<a id="perc-finder-folderproperties" href="#" title="Folder properties">Folder properties</a>');var e=undefined;var n=undefined;function p(x){if(x.length>1&&x[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){k(false);n=undefined;return}e=b("#perc-finder-listview .perc-datatable-row-highlighted");if(e.length>0){n=e.data("percRowData");if(n.type!="Folder"&&n.type!="FSFolder"){e=undefined}}else{var y;y=".mcol-listing.perc-listing-type-FSFolder.mcol-opened";y+=", .mcol-listing.perc-listing-type-Folder.mcol-opened";var t=b(y);var w;for(w=0;w<t.length;w++){var v=b(t[w]);var q=v.data("spec").path;if(q==x.join("/")+"/"){e=v;n=v.data("spec")}}}if(e!=undefined&&e.length>0){k(true)}else{k(false);n=undefined}}function k(q){if(q){d.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(j)}else{d.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}d.trigger("actions-change-enabled-state")}function j(){if(n.category=="SYSTEM"){b.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  Its properties cannot be modified."});return}else{if(n.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){var q=pathItem.category=="SECTION_FOLDER"?"section":"folder";b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this "+q+"."});return}else{if(n.category=="SECTION_FOLDER"){b.perc_utils.alert_dialog({title:"Warning",content:"Use the navigation editor to change section properties."});return}}}b.PercFolderPropertiesDialog().open(n,function(v,t){if(t===undefined){if(v!==""&&v!==n.name){var w=n.folderPaths+"/"+v;w=w.substring(1);w=w.replace("/Folders/$System$","");b.perc_finder().open(w.split("/"))}else{b.perc_finder().refresh()}}})}function h(q){var t;if(q){t=b.perc_paths.WEBRESOURCESMGT+"/"+c.getCurrentPath().slice(3).join("/")}else{t="#"}d.attr("href",t)}c.addPathChangedListener(p);return d}})(jQuery);(function(b){b.perc_build_actions_button=function(y,e){var f=b.perc_build_copy_page_button(y,e);var h=b.perc_build_folderproperties_button(y,e);var A=b.perc_build_download_button(y,e);var w=b.perc_build_upload_button(y,e);var d=[f,h,A,w];var c=z(d).hover(k,p);var B='<div id="perc-finder-actions" ><a id="perc-finder-actions-button" class="perc-font-icon" title="Select an action" href="#"><span class="icon-cog"></span><span class="icon-caret-down"></span></a></div>';var j=b(B).append(c).hover(k,p);var x=false;function p(){x=false;setTimeout(function(){if(!x){q(false)}},500)}function k(C){var D=b(C.target);if(D.attr("id")==j.attr("id")){x=true;return}if(D.is("#perc-finder-actions *")){x=true;return}}function n(){if(b("#perc-finder-actions-button").hasClass("ui-disabled")){return false}else{if(c.css("display")=="none"){q(true)}else{q(false)}return false}}function q(E){if(E){var D=j.position().left+j.outerWidth()-c.outerWidth()-1;var C=j.position().top+j.outerHeight()+9;c.css("top",C).css("left",D).css("display","block")}else{c.hide()}}function v(C){var D=b("#perc-finder-actions-button");if(C){D.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{D.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function z(D){var E=b('<ul class="perc-actions-menu box_shadow_with_padding">');var C=b('<li class="perc-actions-menu-item">');for(l=0;l<D.length;l++){C.clone().append(D[l]).appendTo(E)}return E}function t(){var C=d.length;var E=0;function D(){var F=b(this).hasClass("ui-enabled");if(C==1&&E==d.length-1){v(F);C=d.length;E=0}else{if(C==1&&E<d.length-1){v(true);C=d.length;E=0}else{if(!F){E++}C--}}}for(m=0;m<d.length;m++){d[m].bind("actions-change-enabled-state",D)}}t();return j}})(jQuery);(function(b){b.perc_build_delete_page_button=function(t,n){var e=b.perc_utils;var c=b.perc_finder();var j=["","site"];var k="<span id='perc-delete-warn-msg'>";var h="</span>";var d=b('<a id="perc-finder-delete" class="perc-font-icon icon-remove" title="Click to delete selected item" href="#" ></a>').unbind().perc_button().click(q);function q(){var w=j;if(b.perc_utils.isPathUnderDesign(w)){w=b.perc_utils.encodePathArray(j)}b.PercFolderHelper().getAccessLevelByPath(w.join("/"),false,function(y,x){if(y==b.PercFolderHelper().PERMISSION_ERROR){b.perc_utils.alert_dialog({title:"Error",content:x});t.refresh();return}else{if(x==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to delete this."});return}else{p()}}})}function p(){b.perc_pathmanager.open_path(e.acop(j),false,function(H){function G(J,M,K){var L=I18N.message("perc.ui.deleteassetdialog.title@Delete Asset");B(J,"asset",L,function(){var N=H.PathItem["id"];b.PercAssetService.forceDeleteAsset(N,x(N,"asset"),G)})}function E(J,M,K){var L=I18N.message("perc.ui.deletepagedialog.title@Delete Page");B(J,"page",L,function(){var N=H.PathItem["id"];b.PercPageService.forceDeletePage(N,x(N,"page"),E)})}function B(L,K,N,M){var J=b.PercDeleteItemHelper.extractDeleteErrorMessage(L,H.PathItem["name"],K);if(J.canForceDelete){z(J.dialogid,N,J.content,J.chkBoxId,M)}else{e.alert_dialog({id:J.dialogid,title:N,content:k+J.content+h})}}function z(O,M,J,N,L){var K=b("<div/>").append(k+J+h).perc_dialog({id:O,title:M,success:function(){if(b("#"+N).length>0){if(b("#"+N).get(0).checked){L()}}},width:500,resizable:false,percButtons:{Ok:{id:"perc-finder-delete-approved-ok",cls:"ui-state-disabled",click:function(){}},Cancel:{id:"perc-finder-delete-approved-cancel",cls:"perc-cancel",click:function(){K.remove()}}},open:function(){b("#"+N).click(function(){if(b(this).get(0).checked){b("#perc-finder-delete-approved-ok").click(function(){if(b("#"+N).length>0){if(b("#"+N).get(0).checked){L();K.remove()}}});b("#perc-finder-delete-approved-ok").removeClass("ui-state-disabled")}else{b("#perc-finder-delete-approved-ok").addClass("ui-state-disabled")}})}})}function D(){b.PercBlockUI();b.perc_pagemanager.delete_site(H.PathItem["name"],function(){dialog.remove();var J={type:"site",name:H.PathItem["name"]};c.fireActionEvent(c.ACTIONS.DELETE,J);setTimeout(function(){b.PercDirtyController.setDirty(false);b.PercNavigationManager.goToLocation(b.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(J){b.unblockUI();site_delete_handle_error(J)})}function C(){var J=H.PathItem["id"];b.PercAssetService.deleteAsset(J,function(){x(J,"asset")},G)}function y(){var J=H.PathItem["id"];b.PercRedirectHandler.createRedirect(H.PathItem.path,"","page").fail(function(K){b.perc_utils.alert_dialog({title:"Redirect creation error",content:K,okCallBack:function(){b.perc_pagemanager.delete_page(J,function(){x(J,"page")},E)}})}).done(function(){b.perc_pagemanager.delete_page(J,function(){x(J,"page")},E)})}function x(O,M){setTimeout(function(){t.refresh()},200);var L=false;if(O==b.PercNavigationManager.getId()){L=true;n.clear()}var N={type:M,id:O,isOpen:L};c.fireActionEvent(c.ACTIONS.DELETE,N);b("form.perc-template-pages-controls").submit();var J=jQuery.Event("click");J.deletedPageId=O;b(".resetPaging").trigger(J);var K=b.PercNavigationManager.getView();if(M=="page"&&K!=b.PercNavigationManager.VIEW_EDITOR){F(K)}}function F(K){var L={templateId:memento.templateId,pageId:null};var J=$j.deparam.querystring();$j.PercNavigationManager.goToLocation(K,J.site,null,null,null,J.path,null,L)}if(H.PathItem["type"]=="percPage"){if(H.PathItem["category"]=="LANDING_PAGE"){return}else{b.PercPageService.validateDeletePage(H.PathItem["id"],function(){var K=b.PercDirtyController.dirtyObjectType;var J={id:"perc-finder-delete-confirm",title:"Delete Page",question:k+"Page: "+H.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletepagedialog.warning@Confirm")+h,success:function(){b.PercViewReadyManager.setProcessingFlag();var L=b.PercDirtyController.isDirty();n.confirm_if_dirty(function(){if(L){n.save(K,y)}else{y()}},function(){},{title:I18N.message("perc.ui.deletepagedialog.title@Delete Page"),question:"Page: "+H.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["page",K]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};e.confirm_dialog(J)},E)}}else{if(H.PathItem["type"]=="Folder"){if(H.PathItem["category"]=="FOLDER"){function A(){if(b.PercNavigationManager.isAdmin()){b.PercPathService.deleteFolderSkipValidation(j.join("/"),j[j.length-1],j[1],function(J){v(J)})}else{b.PercPathService.deleteFolder(j.join("/"),j[j.length-1],j[1],v)}}if(H.PathItem.path.match("^/Sites/")||H.PathItem.path.match("^//Sites/")){b.PercRedirectHandler.createRedirect(H.PathItem.path,"","folder").fail(function(J){b.perc_utils.alert_dialog({title:"Redirect creation error",content:J,okCallBack:function(){A()}})}).done(function(){A()})}else{A()}}else{return}}else{if(H.PathItem["type"]=="FSFolder"){var w=b.perc_utils.encodePathArray(j);b.PercPathService.deleteFSFolder(w.join("/"),j[j.length-1],v)}else{if(H.PathItem["type"]=="FSFile"){var w="";var I=H.PathItem["path"].split("/");I=I.slice(3,I.length-1);b.each(I,function(J,K){w=w+"/"+K});w=b.perc_utils.encodeURL(w);b.PercWebResourcesService.deleteFile(w,j[j.length-1],v)}else{b.PercAssetService.validateDeleteAsset(H.PathItem["id"],function(){var K=b.PercDirtyController.dirtyObjectType;var J={id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:k+I18N.message("perc.ui.deleteassetdialog.tag@Asset")+": "+H.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deleteassetdialog.warning@Confirm")+"<br/><br/>"+I18N.message("perc.ui.common.question@Continue")+h,success:function(){var L=b.PercDirtyController.isDirty();n.confirm_if_dirty(function(){if(L){n.save(K,C)}else{C()}},function(){},{title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:"Asset: "+H.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["asset",K]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};e.confirm_dialog(J)},G)}}}}},e.show_error)}function v(x){setTimeout(function(){t.refresh()},200);var w={type:"folder"};c.fireActionEvent(c.ACTIONS.DELETE,w)}function f(w){j=w;b.perc_pathmanager.open_path(e.acop(w),false,function(y){var A=y.PathItem.type;var x=y.PathItem.category;var z=(typeof(x)!="undefined")&&(x=="LANDING_PAGE"||x=="SECTION_FOLDER"||x=="SYSTEM");if(A=="Folder"&&y.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){z=true}else{if((x=="ASSET"||x=="PAGE")&&y.PathItem.accessLevel==b.PercFolderHelper().PERMISSION_READ){z=true}}if((A=="FSFolder"||A=="FSFile")&&j.length>=5&&y.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){z=false}if(!z&&j.length>2){if(A=="site"){b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-disabled").addClass("ui-enabled").unbind().click(q)}}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}},function(x){var y=b.PercServiceUtils.extractDefaultErrorMessage(x);b.perc_utils.alert_dialog({title:"Error",content:y})})}t.addPathChangedListener(f);return d}})(jQuery);(function(b){b.perc_build_preview_button=function(f,e){var c=b("<a id='perc-finder-preview' class='perc-font-icon icon-eye-open' href='#' title='Launch Preview'></a>").perc_button().click(function(k){j()});function j(){if(b("#perc-finder-listview .perc-datatable-row-highlighted").size()>0){var n=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(n.category=="LANDING_PAGE"||n.category=="PAGE"){f.launchPagePreview(n.id)}else{if(n.category=="ASSET"){f.launchAssetPreview(n.id)}}}else{var p=b(".mcol-opened.perc-listing-type-percPage");var k=b(".mcol-opened.perc-listing-category-ASSET");if(p.size()>0){f.launchPagePreview(p.data("spec").id)}else{if(k.size()>0){f.launchAssetPreview(k.data("spec").id)}}}}function h(t){var n=b(".mcol-opened.perc-listing-type-percPage");var k=b(".mcol-opened.perc-listing-category-ASSET");var p=b("#perc-finder-listview .perc-datatable-row-highlighted");if(t[1]=="Sites"&&t.length<4){d(false)}else{if(p.size()>0){listSelectedRowData=p.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"||listSelectedRowData.category=="ASSET"){d(true)}else{d(false)}}else{if(n.size()>0){var q=n.data("spec").path.split("/");if(q.length==t.length&&b(q).last()[0]==b(t).last()[0]){d(true)}else{d(false)}}else{if(k.size()>0){var q=k.data("spec").path.split("/");if(q.length==t.length&&b(q).last()[0]==b(t).last()[0]){d(true)}else{d(false)}}else{d(false)}}}}}function d(k){if(k){b("#perc-finder-preview").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(j)}else{b("#perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}f.addPathChangedListener(h);return c}})(jQuery);(function(b){var d={height:200,minWidth:952,minHeight:100,get_max_height:function e(){return b(window).innerHeight()-150}};b.perc_finder=function(){if(b.perc_finderInstance==null){b.perc_finderInstance=c()}return b.perc_finderInstance};function c(){b("body").append('<div id="perc-wide_scroll_div_one" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div id="wide_scroll_div_two" style="height:100px;width:100%"></div></div>');var U=b("#perc-wide_scroll_div_one").width()-b("#wide_scroll_div_two").innerWidth();b("#perc-wide_scroll_div_one").remove();var Y="perc-finder-listing-";var ag=100;var L=true,q=false,ad="perc-finder-expand-state",B=B(),ao=z(B),T=b.perc_utils,ay=[],y=null;actionListeners=[],openListeners=[],_finderPathIdArray={},path_changed=function(aK){ay=aK},finderOpenInProgress=false,lastClickPath=null,dragDelay=(b.PercNavigationManager.isAutoTest()?0:250),actions={DELETE:"delete",FINDER_OPEN_START:"open_start",FINDER_OPEN_END:"open_end"},isLibMode=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";b.perc_utils.preLoadImages("/cm/images/images/loading.gif");function ar(aM){aM.preventDefault();var aN,aL,aK,aO;aK=b(this).parents(".perc-finder-goto-or-search");aO=aK.find("input.perc-finder-goto-or-search:first");aN=aO.val();aL=/^\//.test(aN);if(aN){if(aL){b("#perc-finder-go-action").trigger("click")}else{b("#perc-finder-item-search").val(aN);b("#perc-finder-search-submit").trigger("click")}}return false}b("body").on("click",".perc-action-goto-or-search",ar);b.perc_filterField(b("#mcol-path-summary"),b.perc_textFilters.PATH);b("#mcol-path-summary").bind("keyup",function(aK){if(aK.keyCode==13){b("#mcol-path-summary").blur();ar.apply(this,[aK]);b("#mcol-path-summary").focus();aK.preventDefault();aK.stopPropagation()}if(aK.keyCode==27||aK.keyCode==9){b("#mcol-path-summary").val(G().join("/")).blur();b("#perc-finder-item-search").blur();aK.preventDefault();aK.stopPropagation()}al(false)});b(document).mousedown(function(aK){if(aK.target.id!="perc-finder-go-action"&&aK.target.id!="mcol-path-summary"){b("#mcol-path-summary").blur();if(aK.target.id!="perc-finder-search-submit"&&aK.target.id!="perc-finder-listing-Search"&&b(aK.target).parents(".perc-datatable-row").length>0){b("#mcol-path-summary").val(G().join("/"))}}if(aK.target.id!="perc-finder-item-search"){b("#perc-finder-item-search").blur()}al(false)});b("#perc-finder-go-action").click(function(){var aK=true;ah(aK)});b(".perc-finder-outer").hover(function p(){b(this).removeClass("ui-disabled")},function aa(){b(this).addClass("ui-disabled")});function aH(aL){var aK=aL.split("/");for(i=0;i<aK.length;i++){if(aK[i]==".."){if(i-1>=0){aK.splice(i-1,2);i=i-2}else{aK.splice(i,1);i--}}if(aK[1]=="."){aK.splice(i,1);i--}}return aK.join("/")}function ah(aM){b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");b("#perc-finder-item-name").removeClass("mcol-opened");var aL=b.trim(b("#mcol-path-summary").val());var aK=G().join("/");aL=aL.replace(/\/(\/)+/g,"/");aL=aH(aL);aL=(aL.charAt(0)!="/")?"/"+aL:aL;aL=(aL=="/"||aL=="")?"/"+G()[1]:aL;if(aL==aK&&aM==true&&(b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_SEARCH_RESULTS&&b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_RESULT)){return}else{b.PercPathService.validatePath(aL,function(aO,aN){if(aO==b.PercServiceUtils.STATUS_SUCCESS){b("#mcol-path-summary").val(aN);if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var aQ=$j.PercComponentWrapper("perc-action-finder-go-clicked",["perc-ui-component-finder"]);var aP=$j.PercViewReadyManager.setWrapper(aQ);if(!aP){if(!aP){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}V(aN.split("/"),function(){})}else{al(true,aN)}})}}function aF(aK,aM,aN){var aL=aM;if(b.perc_utils.isPathUnderDesign(aM)){aL=b.perc_utils.encodePathArray(aM)}b.PercPathService.validatePath(aL.join("/"),function(aP,aO){if(aP==b.PercServiceUtils.STATUS_SUCCESS){aN(aK)}else{b.perc_utils.alert_dialog({title:"Error",content:"Path not found: "+aM.join("/")});ax()}})}function al(aK,aM){var aL=b(".perc-finder-message");if(aK){aL.empty().append('<i class="icon-bell"></i>');b('<label class="perc-finder-error"></label>').text(aM).appendTo(aL);aL.fadeIn()}else{aL.fadeOut(function(){b(this).empty()})}fixIframeHeight();fixHeight()}function C(){return/collapsed/.test(b.cookie(ad))}function P(){return(""+b.cookie(ad)).replace(/[^0-9.]/g,"")}function aD(aK){if(!isLibMode&&P()!==aK){var aL=C()?"collapsed":"expanded";b.cookie(ad,aL+aK)}}function ak(aM){if(!isLibMode){var aK,aL;aK=P();aL=aM?"expanded":"collapsed";b.cookie(ad,aL+aK)}}function aw(){fixBottomHeight();fixIframeHeight();fixHeight();if(b("#perc_site_map").length>0){b("#perc_site_map").perc_site_map("layoutAll")}}function aj(aN){var aO,aM,aK=b(".perc-finder-body");if(b(".perc-finder-body").is(":visible")===aN){return}aO=b("#perc-finder-expander");aM=aO.parents(".perc-finder-outer");ak(aN);if(aN){aM.removeAttr("collapsed");aK.slideDown(aw);aO.removeClass("icon-plus-sign").addClass("icon-minus-sign")}else{aM.attr("collapsed",true);aK.slideUp(aw);aO.removeClass("icon-minus-sign").addClass("icon-plus-sign")}var aP=b("#frame");var aQ=b(".perc-main");var aL=b("#bottom")}function am(){aj(!b(".perc-finder-body").is(":visible"))}b("#perc-finder-expander").click(am);function h(aL,aK){aL=parseInt(aL,10);return isNaN(aL)?aK:aL}var aJ=(function(){var aL,aR,aS;function aO(){b(".perc-finder").addClass("ui-resizable-resizing");aL=b(".perc-finder .ui-resizable");aR=h(b(".perc-pagingbar-finder").outerHeight(),0)}function aT(){aP()}function aK(aU){aw();b(this).css("width","auto");if(aU){aD(aS)}b(".perc-finder").removeClass("ui-resizable-resizing")}function aN(aU){return aU&&aU.scrollWidth>aU.clientWidth?U:0}function aP(){var aU=b(".perc-finder")[0];aS=b(".perc-finder-body").height();aL.css("height",aS-aN(aU)-aR)}function aM(aU){if(isLibMode){aU=d.get_max_height()-100}aU=h(aU,b(".perc-finder-body").height());if(aU!==aS){aS=Math.max(aU,d.minHeight);aS=Math.min(aU,d.get_max_height());b(".perc-finder-body").css("height",aS);aD(aS);b(".perc-finder").trigger("resize")}aO();aP();aK()}b(".perc-finder-body").resizable({handles:"s",minHeight:d.minHeight,maxHeight:d.get_max_height(),start:aO,resize:aT,stop:aK});b(window).resize(function aQ(){b(".perc-finder-body").resizable("option","maxHeight",d.get_max_height())});aM(h(P(),d.height));return aM});var ae=b("[view=PERC_SITE]").length||!C();if(isLibMode){ae=true}aj(ae);return{on:function(){b(".perc-finder-body").on.apply(b(".perc-finder-body"),arguments)},ACTIONS:actions,elem:ao,open:V,search:H,addPathChangedListener:N,executePathChangedListeners:au,finderOpenInProgress:finderOpenInProgress,update_finder_height:aJ,goToNewPath:ah,refresh:ax,idFromItem:az,addActionListener:D,removeActionListener:n,fireActionEvent:k,addOpenListener:M,removeOpenListener:x,getCurrentPath:G,getPathItemByPath:aI,getPathItemById:R,getParentPathItemByPath:ap,launchPagePreview:ac,launchPagePreviewByPath:aA,launchAssetPreview:v,insertAfter:av,maxResults:ag,flagChangeView:L,onDragStart:w,onDragStop:O,scrollIntoView:aG,setStateButtonsDesignNode:E,getCurrentItem:aB,setCurrentItem:ai};function aB(){return y}function ai(aK){return y=aK}function at(aK,aL){_finderPathIdArray[aK]=aL}function az(aK){var aL=typeof(aK.id)=="undefined"?aK.path.split("/")[1]:aK.id;return Y+aL}function ax(aK){b(".mcol-opened").each(function(){b(this).removeClass("mcol-opened")});var aM=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR&&(aM==null||aM.wrapperName!="perc-action-finder-refresh")){var aN=[];aN.push("perc-ui-component-finder");var aO=$j.PercComponentWrapper("perc-action-finder-refresh",aN);var aL=$j.PercViewReadyManager.setWrapper(aO);if(!aL){if(!aL){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}V(ay,aK)}function G(){return ay.slice(0)}function H(aL){W(B);aE(B).filter(".mcol-opened").removeClass(".mcol-opened");var aK=av(B);b.each(aL,function(){I(aK,J(this,f(aK)))})}function f(aK){return function(aM,aN){var aL=T.acop(aN);aL.pop();A(aM,aK,[aM.data("name")],aL,function(){})}}function an(aK){finderOpenInProgress=false;k(actions.FINDER_OPEN_END,null);ay=["","Sites"];ax(function(){})}function V(aM,aK){if(finderOpenInProgress){return}finderOpenInProgress=true;k(actions.FINDER_OPEN_START,null);var aL=K([""]);Z(B,aL,aM.slice(1),[""],aK)}function Z(aN,aK,aP,aL,aM){if(aP[aP.length-1]===""){aP.pop()}if(aP.length>0){aN.data("child",aP[0])}if(aL.length>1&&aL[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){E(true)}else{E(false)}b(".perc-finder-panel-loading").remove();S(aN).append('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>');aK(aO,aN);function aO(aQ,aT){if(aT){aN.find(".mcol-direc-wrapper").empty().addClass("mcol-direc-wrapper-last").append(aT)}else{ab(aN,aQ)}if(aP.length==0){$j("#mcol-path-summary").val(aL.join("/"));finderOpenInProgress=false;k(actions.FINDER_OPEN_END,null);path_changed(aL);W(aN);aE(aN).filter(".mcol-opened").removeClass("mcol-opened");var aS=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aS!=null){aS.handleComponentProgress("perc-ui-component-finder","complete")}if(aM){aM()}}else{var aR=aE(aN).filter(function(){if(typeof(b(this).data("name"))!="undefined"&&typeof(aP[0])!="undefined"){return b(this).data("name")==aP[0]}return false});b.PercQueuePostAJAX(function(){setTimeout(function(){A(aR,aN,aP,aL,aM)},150)})}aJ();var aS=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aS!=null){aS.handleComponentProgress("perc-ui-component-finder","processing")}}}function t(){var aK=b(this).parents("td");var aL=aK.data("startIndex")-ag;aK.data("startIndex",aL);F(aK,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function aq(){var aK=b(this).parents("td");var aL=aK.data("startIndex")+ag;aK.data("startIndex",aL);F(aK,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function F(aL,aM){var aN=aL.data("path");var aO=aL.data("startIndex");var aK=b.perc_utils.encodeURL(aN.join("/"))+"/?startIndex="+aO+"&maxResults="+ag;b.perc_pathmanager.open_path(aK,true,aP,an,true);function aP(aR){var aQ={};b.each(b.perc_utils.convertCXFArray(aR.PagedItemList["childrenInPage"]),function(){aQ[T.extract_path_end(this.path)+"_item"]=this});aL.data("totalResult",aR.PagedItemList["childrenCount"]);aL.data("startIndex",aR.PagedItemList["startIndex"]);ab(aL,aQ);if(aM){aL.find(".mcol-direc-wrapper").attr({scrollTop:aL.find(".mcol-direc-wrapper").attr("scrollHeight")})}}}function Q(aL,aK){var aP=aL.data("startIndex");var aM=aL.data("totalResult");var aN="";if(ag>=aM){var aR=aM-(aP-1);aN=aR+" item"+(aR!=1?"s":"")}else{var aO=((aP-1+ag>aM)?aM:(aP-1+ag));aN=aP+" - "+aO+" of "+aM}var aQ=b('<div class="perc-paging-finder"/>').data("name",aK).append(b('<span class="perc-paging-text" />').text(aN)).append(b('<div class="perc-paging-finder-navigator" />').append(b('<a class="perc-paging-finder-previous" />').text("<<").click(t)).append(b('<a class="perc-paging-finder-next"/>').text(">>").click(aq))).addClass(aK);aQ=b("<div/>").append(aQ).append("<div style='clear:both'/>");if((aM-(aP-1+ag))>0){aQ.find(".perc-paging-finder-next").removeClass("perc-hide-navigator")}else{aQ.find(".perc-paging-finder-next").addClass("perc-hide-navigator")}if(aP>ag){aQ.find(".perc-paging-finder-previous").removeClass("perc-hide-navigator")}else{aQ.find(".perc-paging-finder-previous").addClass("perc-hide-navigator")}return aQ}function ab(aL,aM){aL.find(".mcol-direc-wrapper").removeClass("mcol-direc-wrapper-last");var aN={};b.each(aE(aL),function(){aN[b(this).data("name")+"_item"]=b(this)});var aK=T.odiff(aM,aN);b.each(T.odiff(aN,aM),function(){if(this.is(".mcol-opened")){W(aL)}if(!q&&!this.hasClass("ui-resizable-e")&&!this.parent().hasClass("perc-view-column-fixed")){this.remove()}});if(aL.data("path").join("/")!=""&&aL.find(".perc-paging-finder-top").size()==0){S(aL).prepend(Q(aL,"perc-paging-finder-top"))}b.each(aK,function(){if(!isLibMode||this.path!="/Search/"){I(aL,J(this,f(aL)))}})}function A(aP,aN,aQ,aL,aM){if(aP.length==0){path_changed(aL);finderOpenInProgress=false;$j("#mcol-path-summary").val(aL.join("/"));var aO=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aO!=null){aO.handleComponentProgress("perc-ui-component-finder","complete")}}else{if(aP.is(".mcol-opened")){aL.push(aQ.shift());aG(aP);if(typeof(aP.data("spec"))!="undefined"){y=aP.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aP.addClass("perc_last_selected")}Z(aN.next(),aP.data("loader"),aQ,aL,aM)}else{W(aN);aE(aN).filter(".mcol-opened").removeClass("mcol-opened");aP.addClass("mcol-opened");aG(aP);if(typeof(aP.data("spec"))!="undefined"){y=aP.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aP.addClass("perc_last_selected")}var aK=av(aN);aL.push(aQ.shift());Z(aK,aP.data("loader"),aQ,aL,aM)}}aJ()}function J(aZ,aQ){var aR=10;var a0=(aZ.type=="Folder")?"a":"z";var aU=T.extract_path(aZ.path);var aX=T.choose_icon(aZ.type,aZ.icon,aU);var aW=b("<a />").addClass("mcol-listing").attr("alt",aZ.name).attr("id",az(aZ)).append(b("<img src='"+aX+"' style='float:left'></img>")).append(b("<div unselectable='on' class='perc-finder-item-name' style='cursor: default; text-overflow : ellipsis;overflow : hidden'>"+aZ.name+"</div>")).attr("title",aZ.name).data("tag",a0+(aZ.name+"").toLowerCase()).data("name",aU[aU.length-1]).data("spec",aZ);at(aZ.path,aZ.id);if(aZ.type){aW.addClass("perc-listing-type-"+aZ.type)}if(aZ.category){aW.addClass("perc-listing-category-"+aZ.category)}if(aZ.leaf){aW.data("loader",function(a1){aC(aZ,function(a2){a1(null,a2)})})}else{aW.data("loader",K(T.acop(aU)))}aW.singleclick(aV);aW.dblclick(function(a1){aF(a1,aU,function(){if(aZ.type=="Folder"){aV(a1)}else{af(aZ)}})});if(aO(aZ)){aW.draggable({helper:function(){return b(this).clone().css(("overflow","visible"),("width",this.offsetWidth)[0])},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:w,stop:O,delay:dragDelay})}if(aN(aZ)){aW.droppable({tolerance:"pointer",accept:aM,over:aP,out:aL,drop:aK})}var aY=1,aS=500;function aP(a3,a5){var a2=aY;var a1=a5.draggable.data("spec").path;var a6=aZ.path;var a4=aZ.type;if(!aT(a1,a6,a5.draggable.data("spec").type,a4)){return}if(aZ.accessLevel!=b.PercFolderHelper().PERMISSION_READ&&a5.draggable.data("spec").accessLevel!=b.PercFolderHelper().PERMISSION_READ){b(this).addClass("perc-finder-item-over")}if(b(this).hasClass("perc-listing-type-site")){return}setTimeout(function(){if(aY==a2){aV()}},aS)}function aL(a1,a2){b(this).removeClass("perc-finder-item-over");aY++}function aK(a2,a4){var a1=a4.draggable.data("spec").path;var a5=a4.draggable.data("spec").type;var a6=aZ.path;var a3=aZ.type;b(this).removeClass("perc-finder-item-over");aL();if(aZ.accessLevel==b.PercFolderHelper().PERMISSION_READ||a4.draggable.data("spec").accessLevel==b.PercFolderHelper().PERMISSION_READ){return false}if(!aT(a1,a6,a5,a3)){return false}b.PercPathService.moveItem(a1,a6,function(a7,bb){if(a7==b.PercServiceUtils.STATUS_SUCCESS){var a9=null;if(a5=="percPage"){a9="page"}else{if(a5=="Folder"&&a6.indexOf("/Sites")==0){a9="folder"}}if(a9){b.PercRedirectHandler.createRedirect(a1,a6+a4.draggable.data("spec").name,a9).fail(function(bc){b.perc_utils.alert_dialog({title:"Redirect creation error",content:bc,okCallBack:function(){ax()}})}).done(function(){ax()})}else{ax()}}else{var ba=bb;if(bb.indexOf("item with the same name already exists in the folder")!=-1){var a8="asset";if(a5=="percPage"){a8="page"}else{if(a5=="Folder"){a8="folder"}}ba=I18N.message("perc.ui.finder.move.error@Duplicate",[a8,a4.draggable.data("spec").name,a6])}b.perc_utils.alert_dialog({title:"Error",content:ba})}})}function aT(a3,a8,a2,a6){if(a6&&(a6!="Folder"&&a6!="site")){return false}var a7=(a8.match("/$")=="/")?a8.substr(0,a8.length-1):a8;if(a7==(a3.substring(0,a3.lastIndexOf("/")))){return false}if(a2=="Folder"){var a4=a3.substr(1).split("/");if(a4[a4.length-1]==""){a4.pop()}var a7=a8.substr(1).split("/");if(a7[a7.length-1]==""){a7.pop()}var a1=true;for(var a5=0;a5<a4.length;a5++){if(a4[a5]!=a7[a5]){a1=false;break}}if(a1){return false}}return true}function aO(a3){var a2=a3.type;var a1=a3.category;if(!a2){return false}if(a2=="site"){return false}if(a2=="percPage"&&a1=="LANDING_PAGE"){return false}if(a2=="Folder"&&a1=="SECTION_FOLDER"){return false}if(a2=="Folder"&&a3.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){return false}if(a2=="FSFile"){return false}if(a2=="FSFolder"){return false}return true}function aN(a3){var a2=a3.type;var a1=a3.category;if(!a2&&a3.path==b.perc_paths.ASSETS_ROOT+"/"){return true}if(!a2){return false}if(a2=="percPage"){return false}return true}function aM(a4){var a1=a4&&a4.data("spec")&&a4.data("spec").path;if(!a1){return false}var a3=aZ.path;if(aZ.type&&aZ.type=="site"){var a6=a1.substr(1).split("/")[1];var a5=a3.substr(1).split("/")[1];if(a6!=a5){return false}}if(a4.data("spec").category&&a4.data("spec").category=="ASSET"){if(!aZ.type||aZ.type!="Folder"){return false}}if(a3.length>=a1.length&&b.grep(a1,function(a9,a8){return a9==a3[a8]}).length==0){return false}var a7=T.extract_path(a1)[1];var a2=T.extract_path(a3)[1];if(a7!=a2){return false}return true}return aW;function aV(a4){if(a4.currentTarget.id=="perc-finder-listing-Search"){b.Percussion.setView("search");b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon_on.png");return}b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon.png");b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");var a6=b(this);var a3=a6.children(".perc-finder-item-name");var a2=a3.find("#perc_finder_inline_field_edit");var a1=a2.length;if(a1==0){var a8=b("#perc_finder_inline_field_edit");if(a8.length>0){lastClickPath=aU;a8.blur()}a6.focus();if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var a7=$j.PercComponentWrapper("perc-action-finder-item-clicked",["perc-ui-component-finder"]);var a5=$j.PercViewReadyManager.setWrapper(a7);if(!a5){if(!a5){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aQ(aW,T.acop(aU))}}}function w(){var aL=b(".perc-finder-table");var aK={};aK.left=aL.offset().left;aK.top=aL.offset().top;aK.width=aL.width();aK.height=aL.height();q=true;b("body").css("overflow","visible").bind("mousemove.finderDrag",aK,function(aM){var aO=aM.data.left+aM.data.width;var aN=aM.data.top+aM.data.height;var aQ=(aM.pageX>=aM.data.left)&&(aM.pageX<=aO);var aP=(aM.pageY>=aM.data.top)&&(aM.pageY<=aN);j(aP&&aQ)})}function O(){q=false;b("body").css("overflow","hidden").unbind("mousemove.finderDrag");j(true)}function aC(aK,aM){var aL=" ";b.perc_pathmanager.getItemProperties(aK.path,function(aQ,aO){if(aQ){var aS=null;var aW=null;var aR=null;var aX=aK.category=="ASSET"||aK.category=="RESOURCE";if(aX){aS="Asset";aW="Type";aR="<a href='#' class='perc-finder-preview-link' id='perc-asset-preview-link' title='Click for preview'>"}else{aS="Page Link";aW="Template";aR="<a href='#' class='perc-finder-preview-link' id='perc-page-preview-link' title='Click for preview'>"}var aV=aO.lastPublishedDate;if(aV==undefined||aV==null||aV==""){aV=""}else{var aT=b.perc_utils.splitDateTime(aV);aV='<div style="padding:9px 0 0 10px;">Last Published: <span></span></div><div style="padding:3px 0 0 10px;"><span "perc_finder_details_lpdate">'+aT.date+" "+aT.time+"</span></div>"}var aU=b.perc_utils.splitDateTime(aO.lastModifiedDate);if(aK.path.split("/")[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){var aP=b.perc_utils.formatFileSize(aO.size);aL='<div style="padding:10px 0 0 10px;">Properties: <span id="perc_finder_details_name">'+aO.name+'</span></div><div style="padding:10px 0 0 10px;">Size: <span id="perc_finder_details_size">'+aP+'</span></div><div style="padding:10px 0 0 10px;">Last Modified: <span></span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aU.date+" "+aU.time+"</span></div>"}else{aL='<div style="padding:9px 0 0 10px;">'+aS+': <span id="perc_finder_details_name">'+aR+aO.name+'</a></span></div><div style="padding:9px 0 0 10px;">'+aW+': <span id="perc_finder_details_type">'+aO.type+'</span></div><div style="padding:9px 0 0 10px; width:170px;">Status: <div id="perc_finder_details_status" status="'+aO.status+'" workflow="'+aO.workflow+'" class="perc-ellipsis" title="'+aO.status+" ("+aO.workflow+')">'+aO.status+" ("+aO.workflow+')</div></div><div style="padding:9px 0 0 10px;">Last Modified: <span id="perc_finder_details_lmuser">'+aO.lastModifier+'</span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aU.date+" "+aU.time+"</span></div>"+aV}var aN=b(aL);if(aX){aN.find("#perc-asset-preview-link").each(function(){b(this).unbind().bind("click",function(){v(aK.id)})})}else{aN.find("#perc-page-preview-link").each(function(){b(this).unbind().bind("click",function(){ac(aK.id)})})}aM(aN)}else{b.perc_utils.alert_dialog({title:"Error",content:aO});ax()}var aY=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aY!=null){aY.handleComponentProgress("perc-ui-component-finder","complete")}})}function v(aM,aL){if(aL){var aK=aM.split("-");aK[0]=aL;aM=aK.join("-")}b.PercAssetService.getAssetViewForAssetId(aM,function(aO,aN){if(aO==b.PercServiceUtils.STATUS_SUCCESS){var aP=window.open(aN,"percAssetPreviewWindow"+aM.replace(/\-/g,""));b(aP.document).ready(function(){if(aL){window.setTimeout(function(){aP.document.title=aP.document.title+" (Revision "+aL+")"},1000)}aP.focus()})}else{b.perc_utils.alert_dialog({title:"Error",content:aN})}})}function ac(aL,aK){b.PercPathService.getPathItemById(aL,function(aN,aM,aQ){if(aN==b.PercServiceUtils.STATUS_SUCCESS){var aP=aM.PathItem.folderPaths.slice(1)+"/"+aM.PathItem.name;if(aK){aP+="?sys_revision="+aK+"&percmobilepreview=true"}else{aP+="?percmobilepreview=true"}var aO=window.open(aP,"percPagePreviewWindow"+aL.replace(/\-/g,""));b(aO.document).ready(function(){if(aK){window.setTimeout(function(){aO.document.title=aO.document.title+" (Revision "+aK+")"},1000)}aO.focus()})}else{b.unblockUI();var aR="";if(aQ=="cannot.find.item"){aR=I18N.message("perc.ui.common.error@Preview Content Deleted")}else{aR=aM}b.perc_utils.alert_dialog({title:"Error",content:aR})}})}function aA(aK,aM,aL){b.PercPathService.getPathItemForPath(aK,function(aO,aN){if(aO==b.PercServiceUtils.STATUS_SUCCESS){var aQ=aN.PathItem.folderPaths.slice(1)+"/"+aN.PathItem.name;if(aL){aQ+="?sys_revision="+aL+"&percmobilepreview=true"}else{aQ+="?percmobilepreview=true"}var aP=window.open(aQ,"percPagePreviewWindow"+aM.replace(/\-/g,""));b(aP.document).ready(function(){if(aL){window.setTimeout(function(){aP.document.title=aP.document.title+" (Revision "+aL+")"},1000)}aP.focus()})}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:aN})}})}function K(aK){return function(aM,aN){var aL=b.perc_utils.encodeURL(aK.join("/"))+"/?startIndex=1&maxResults="+ag;if(typeof(aN.data("child"))!="undefined"&&aN.data("child")!=""){aL+="&child="+b.perc_utils.encodeURL(aN.data("child"));aN.data("child","")}b.perc_pathmanager.open_path(aL,true,aO,an,true);function aO(aQ){var aP={};b.each(b.perc_utils.convertCXFArray(aQ.PagedItemList["childrenInPage"]),function(){aP[T.extract_path_end(this.path)+"_item"]=this});aN.data("path",aK);aN.data("startIndex",aQ.PagedItemList["startIndex"]);aN.data("totalResult",aQ.PagedItemList["childrenCount"]);aM(aP)}}}function I(aK,aL){S(aK).append(aL)}function aG(aN){var aL=aN.closest(".mcol-direc-wrapper");var aM=aN.position().top+aN.outerHeight();var aK=aL.closest("td").height();if(aM<0||aM>aK){aL.animate({scrollTop:aM-aK},200)}}function E(aK){if(aK){b.percFinderButtons().disableAllButtonsButSite()}}function av(aL){var aK=X();b("#perc-finder-table-top").append(aK);return aK}function W(aK){if(q){aK.nextAll().hide()}else{aK.nextAll().remove()}}function X(aL){aL=aL!==false;var aQ=b('<td tabindex="-1" class="mcol-direc" />');var aK=b('<div class="perc-resize ui-resizable" />');var aN=b('<div class="perc-resize-width mcol-direc-wrapper" />');function aP(aR,aS){aN.css("width",aK.width()-aN.siblings().outerWidth())}function aO(aR,aS){b(".perc-finder").addClass("ui-resizable-resizing")}function aM(aR,aS){b(".perc-finder").removeClass("ui-resizable-resizing")}if(aL){aK.resizable({handles:"e",resize:aP,start:aO,stop:aM})}return aQ.append(aK.append(aN))}function B(){var aK=false,aL;aL=X(aK);aL.find(".mcol-direc-wrapper").addClass("perc-view-column-fixed");aL.find(".ui-resizable").append('<div class="ui-resizable-handle ui-resizable-e perc-resize-disabled" />');return aL}function z(aK){var aL=b("<div class='perc-finder-table'><table><tr id='perc-finder-table-top'></tr></table></div>");aL.find("tr").append(aK);return aL}function aE(aK){return S(aK).children()}function S(aK){return aK.find(".mcol-direc-wrapper")}function j(aK){b(".mcol-listing").each(function(){b(this).droppable("option","disabled",!aK)});b("#perc-finder-listview table").droppable("option","disabled",!aK)}function aI(aN){if(!aN||typeof(aN)!="string"||aN.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}var aM=null;var aL=null;b.each(_finderPathIdArray,function(aO,aP){if(aO==aN){aL=aP}});if(!aL){var aK="";if(aN[aN.length-1]!="/"){aK=aN+"/"}else{aK=aN.substring(0,aN.length-1)}b.each(_finderPathIdArray,function(aO,aP){if(aO==aK){aL=aP}})}if(aL){aM=R(aL.toString())}return aM}function R(aK){if(!aK||typeof(aK)!="string"||aK.length<1){b.perc_utils.alert_dialog({title:"Error",content:"objectId must be a valid string"});return}var aL=b("#"+Y+aK).data("spec");return aL}function ap(aK){if(!aK||typeof(aK)!="string"||aK.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}if(aK.charAt(aK.length-1)=="/"){aK=aK.substring(0,aK.length-1)}aK=aK.substring(0,aK.lastIndexOf("/"));return aI(aK)}function N(aK){(function(aL){path_changed=function(aM){aL(aM);aK(aM)}})(path_changed)}function au(aK){path_changed(aK)}function M(aK){if(b.inArray(aK,openListeners)==-1){openListeners.push(aK)}}function x(aM){if(b.inArray(aM,openListeners)>-1){var aK=openListeners.length;for(var aL=0;aL<aK;aL++){if(openListeners[aL]===aM){openListeners.splice(aL,1);return}}}}function af(aM){var aK=openListeners.length;for(var aL=0;aL<aK;aL++){openListeners[aL](aM)}}function D(aK){if(b.inArray(aK,actionListeners)==-1){actionListeners.push(aK)}}function n(aM){if(b.inArray(aM,actionListeners)>-1){var aK=actionListeners.length;for(var aL=0;aL<aK;aL++){if(actionListeners[aL]===aM){actionListeners.splice(aL,1);return}}}}function k(aN,aM){var aK=actionListeners.length;for(var aL=0;aL<aK;aL++){actionListeners[aL](aN,typeof(aM)=="object"?aM:null)}}}b.perc_finderInstance=null})(jQuery);(function(b){b.percFinderButtons=function(){var d=b.PercDirtyController;var e={createButtons:h,disableAllButtonsButSite:j};return e;function j(){b(".perc-finder-menu #perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-actions-button").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-page").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-asset").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}function h(k,t){var q=b.perc_build_delete_page_button(k,t);var C=b('<div class="perc-finder-buttonbar"/>');C.append(q);var v=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";if(!v){var A=b.perc_build_new_page_button(k,t);C.append(A);var w=b.PercNewAssetDialog.init(k,t);C.append(w)}var p=b.perc_build_new_folder_button(k,t);C.append(p);if(!v){var y='<a id="perc-finder-new-site" class="perc-form ui-state-default perc-font-icon icon-sitemap" href="#" title="Click to create new Site"></a>';C.append(y)}var x=b.perc_build_preview_button(k,t);C.append(x);var B=b.perc_build_actions_button(k,t);C.append(B);b(".perc-finder-menu ").append(C);function n(D){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_DESIGN,D,null,null,null,b.perc_paths.SITES_ROOT+"/"+D,null,null)}$newSiteDialog=b.perc_createNewSiteDialog(n);b("#perc-finder-new-site").unbind("click").click(c);k.addPathChangedListener(f);var z={"delete":q,newPage:A,newFolder:p,newAsset:w,newSite:y,launchPreview:x,launchAction:B};return z}function c(){d.confirmIfDirty(function(){$newSiteDialog.perc_wizard("open");b(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.perc-dialog.perc-dialog-corner-all.ui-draggable").find("div").css("z-index","")})}function f(){if(!b.PercNavigationManager.isAdmin()){b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(c)}}}})(jQuery);(function(b){b.perc_upload_theme_file_dialog={open:c};function c(d){var x=j();var n=window.location.protocol+"//"+window.location.host+"/cm";var q={};buttonSave={id:"perc-addItem-dialog-save"};buttonCancel={id:"perc-addItem-dialog-cancel",click:function(){p.remove()}};q.Save=buttonSave;q.Cancel=buttonCancel;var p=y();function y(){var z=b.perc_paths.WEBRESOURCESMGT_FILE_UPLOAD;var A='<div id=\'perc-design-file-upload\'><form id="perc-theme-file-upload-form" name="perc-theme-file-upload-form" enctype="multipart/form-data" method="post" action="'+z+'"><label for="upload-theme-file-attachment">File name:</label><br><input type="hidden" name="upload-theme-file-path" /><input type="file" size="50" name="upload-theme-file-attachment" /></form><div id="perc-theme-file-upload-response" style="display:none"></div></div>';var B=b(A).perc_dialog({title:I18N.message("perc.ui.uploadtheme.dialog.title@Upload File"),id:"perc-upload-theme-file-dialog",width:686,resizable:false,modal:true,closeOnEscape:true,percButtons:q,open:function(){k();b("#perc-theme-file-upload-form").ajaxForm({target:"#perc-theme-file-upload-response",success:h,error:e,iframe:true})}});return b(B)}function k(){var B=window.location.protocol+"//"+window.location.host+"/cm";var A=b("#perc-addItem-dialog-save");var C="url("+B+"/images/images/buttonSave.png)";var z="url("+B+"/images/images/buttonSaveOver.png)";A.css("background-image",C).hover(function(){b(this).css("background-image",z)},function(){b(this).css("background-image",C)}).unbind("click").click(f)}function f(){if(w()==false){return false}t();return false}function w(){var z=p.find("input:file");var A=p.find("label.perc_field_error");if(z.val()==""){if(A.length==0){z.after('<label class="perc_field_error" for="upload-theme-file-attachment" style="display: block;">'+I18N.message("perc.ui.uploadtheme.form.text@Please select a file.")+"</label>")}return false}else{A.remove();return true}}function t(){var A=p.find("input:file").val().replace(/.+[\\\/]/,"");A=b.perc_utils.encodeURL(A);var z=b.perc_utils.encodePathArray(x);b.PercWebResourcesService.validateFileUpload(z,A,function(C,B){if(C==b.PercServiceUtils.STATUS_SUCCESS){if(B.data==b.PercServiceUtils.STATUS_SUCCESS){v()}else{var D={id:"perc-design-file-upload-file-exist-warning",title:I18N.message("perc.ui.uploadtheme.dialog.title@Warning"),question:B.data,yes:"OK",success:v};b.perc_utils.confirm_dialog(D)}}else{var D={id:"perc-design-file-upload-file-exist-error",title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:b.PercServiceUtils.extractDefaultErrorMessage(B.request)};b.perc_utils.alert_dialog(D)}})}function v(){b.PercBlockUI();var A=p.find("input:file").val().replace(/.+[\\\/]/,"");A=b.perc_utils.encodeURL(A);var z=b.perc_utils.encodePathArray(x);p.find('input[name="upload-theme-file-path"]').val("/"+z.slice(3).join("/")+"/"+A);p.find("#perc-theme-file-upload-form").submit()}function h(){var z=b("#perc-theme-file-upload-response").text();if(z==""){b.unblockUI();p.remove();d.refresh(function(){})}else{var A={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:z};b.perc_utils.alert_dialog(A);b.unblockUI()}}function e(B,D,C){var z="There was an unknown error";if(D=="timeout"){z="The operation is talking too much time"}var A={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:z};b.perc_utils.alert_dialog(A);b.unblockUI()}function j(){var A=d.getCurrentPath();z=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(z==undefined){var z=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened").data("spec")}if(z!=undefined&&z.type=="FSFile"&&z.leaf){A.pop()}return A}}})(jQuery);(function(c){c.PercDeleteItemHelper={extractDeleteErrorMessage:b};function b(n,e,v){var f,t,k=false,j=c.PercServiceUtils.extractDefaultErrorMessage(n),w="perc.ui.delete"+v+"dialog.warning",d="perc_delete_"+v+"_force",h=n.responseText,p=h.match(/User: (.*) is editing the item. Failed to delete item./);if(p){f="perc-finder-delete-error-open";var y=v.charAt(0).toUpperCase();var z=v.substr(1);var x=y+z+": ";var q=p[1].split(" ");t=x+e+"<br/><br/>"+I18N.message(w+"@Open",[q[0]])}else{if(h.indexOf(v+".deleteNotAuthorized")>0){f="perc-finder-delete-auth";t=I18N.message(w+"@Not Authorized",[e])}else{if(h.indexOf(v+".deleteTemplates")>0){f="perc-finder-delete-templates";t=I18N.message(w+"@Templates",[e])}else{if(h.indexOf(v+".deleteApprovedPages")>0){f="perc-finder-delete-approved";t=I18N.message(w+"@Approved Pages",[e])+"<br/><br/><input type='checkbox' id='"+d+"' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message(w+"@Approved Pages Checkbox")+"</label>";k=true}else{if(j!=""){f="perc-finder-delete-error-open";t=j}else{f="perc-finder-delete-error-open";t=I18N.message(w+"@GenericText")}}}}}var A={dialogid:f,content:t,canForceDelete:k,chkBoxId:d};return A}})(jQuery);(function(b){fixIframeHeight=function(){b("#perc-widget-library").width(b("#tabs-3").width()-45);var f=b("#frame");if(f.length==0){return}var j=b(".perc-main");var d=b("#bottom");var h=d.position().top;j.height(h);var c,e;if(window.innerHeight){c=window.innerHeight;e=window.innerWidth}else{if(document.documentElement.clientHeight){c=document.documentElement.clientHeight-4;e=document.documentElement.clientWidth}}f.height(c-h);f.width(e)};fixTemplateHeight=function(){fixBottomHeight()};fixBottomHeight=function(){var h=b.PercNavigationManager.getView();var c;var e;if(h==b.PercNavigationManager.VIEW_DESIGN){c=b(".perc-templates-layout");e=c.position().top+47}else{if(h==b.PercNavigationManager.VIEW_WORKFLOW){c=b(".perc-whitebg");e=b("#tabs").position().top+90;b(".perc-finder-fix").css("padding-bottom",0)}else{if(h==b.PercNavigationManager.VIEW_PUBLISH){c=b(".perc-whitebg");if(b("#tabs").length){e=b("#tabs").position().top+90}else{if(b("#perc-pub-inline-help").length){e=b("#perc-pub-inline-help").position().top+90}}}else{if(h==b.PercNavigationManager.VIEW_DASHBOARD){c=b(".perc-body-background");e=b(".perc-body-background").position().top}else{return}}}}if(c.css("display")!="none"){var d,f;if(window.innerHeight){d=window.innerHeight;f=window.innerWidth}else{if(document.documentElement.clientHeight){d=document.documentElement.clientHeight-4;f=document.documentElement.clientWidth}}c.height(d-e)}};fixHeight=function(){var e=b.PercNavigationManager.getView();if(e==b.PercNavigationManager.VIEW_SITE_ARCH){var d=b(".perc-main");if(d.length>0){var c=d.height();b("#perc_sa_container").css("margin-top",c+3)}}b(".perc-finder").width("auto")}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(h){var c=16;var t=5;var k;var p;h.fn.PercDataTable=function(y){if(y.percVisibleColumns&&y.aoColumns){var F=[];h.each(y.percVisibleColumns,function(J,K){F.push(y.aoColumns[K])});y.aoColumns=F}for(var D=0;D<y.aoColumns.length;D++){var x=y.aoColumns[D];x.sSortDataType="perc-type-"+x.sType}y=h.extend(true,{},f,y);p=y;k=e(y);h(this).append(k);k.dataTable(y).data("config",y);if(y.percExpandParentFrameVertically){var G=k.parents(".dataTables_wrapper").outerHeight()+c;var w=k.parents(".dataTables_wrapper").outerWidth()+c;var H=d();var B=G;var E=y.additionalIframeHeight?y.additionalIframeHeight:0;if(y.iDisplayLength){var A=k.find("thead").height();var v=h(k.find("tbody tr")[0]).height();var C=h(".dataTables_paginate").height();var I=A+v*y.iDisplayLength+C+E;B=I}if(y.percStayBelow){var z=h(y.percStayBelow);B+=z.offset().top+z.outerHeight()+c}h(H).height(B+t)}return k};function q(){var w=h(this);var v=w.data("config");if(v&&v.percTableRedrawCallback){if(typeof(v.percTableRedrawCallback)==="object"){h.each(v.percTableRedrawCallback,function(x,y){this(w)})}else{if(typeof(v.percTableRedrawCallback)==="function"){v.percTableRedrawCallback(w)}}}setTimeout(function(){var y=w.parent().children(".dataTables_paginate.paging_full_numbers");y.find(".perc-datatable-paginator-pages-label").removeClass("paginate_button");var x=y.find("span span.paginate_button, span span.paginate_active");h.each(x,function(z,A){h(A).attr("perc-page",z+1)});if(!x||x.length<2){y.hide()}else{y.show()}y.css("position","absolute")},1)}function d(){var w=parent.document.getElementsByTagName("IFRAME");for(var v=0;v<w.length;v++){if(w[v].contentWindow==window){return w[v]}}}function n(E,y,x,H,D){if(p.bPaginate){var B=p;var z=B.iDisplayLength;var C=D.length;var A=Math.ceil(C/z);var w=Math.ceil(H/z);var v=w+" of "+A+(A==1?" Page":" Pages");if(A==0){v=""}var G=h(".perc-datatables-info");if(G.length>0){G.html(v)}else{h("<div class='datatables_info perc-datatables-info'>"+v+"</div>").appendTo("body")}var F=h(".perc-footer-bar");if(F.length==0){h("<div class='perc-footer-bar'>&nbsp;</div>").appendTo("body")}}}var f={percExpandParentFrameVertically:true,additionalIframeHeight:0,percColumnWidths:["*","123"],percRowDblclickCallback:h.PercOpenPage,showPreviewBtnOnHover:false,iDisplayLength:5,bFilter:false,bAutoWidth:false,bPaginate:true,bSort:true,sPaginationType:"full_numbers",bLengthChange:false,bInfo:true,fnDrawCallback:q,fnFooterCallback:n,oLanguage:{sZeroRecords:"No Pages Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};function e(w){var x=w.percData;var v=w.percHeaders;var B=h("<table class='perc-datatable' style='table-layout : fixed' cellpadding='0' cellspacing='0'>");var y=h("<tbody>");var A=w.aoColumns;h.each(x,function(J,E){var I=E;var G="";if(J==0){G="perc-first"}else{if(J==x.length-1){G="perc-last"}}var F=h("<tr class='perc-datatable-row perc-index-"+J+" "+G+"'>");if(I.rowData){F.data("percRowData",I.rowData)}if(w.percRowClickCallback){if(I.rowData){F.click(I.rowData,w.percRowClickCallback)}else{F.click(w.percRowClickCallback)}}if(w.showPreviewBtnOnHover){F.mouseover(function(){h(this).css("background-color","#CAF589");h(this).find(".perc-preview-col").show()}).mouseout(function(){h(this).css("background-color","white");h(this).find(".perc-preview-col").hide()})}if(w.percRowDblclickCallback){if(I.rowData){F.dblclick(I.rowData,w.percRowDblclickCallback)}else{F.dblclick(w.percRowDblclickCallback)}}var H=0;h.each(I.rowContent,function(V,R){if(w.percVisibleColumns){if(h.inArray(V,w.percVisibleColumns)==-1){return true}}var N=A[H++];var K=N.sType;var M="perc-type-"+K;var P=R;var T="";if(V==0){T="perc-first"}else{if(V==I.rowContent.length-1){T="perc-last"}else{T="perc-middle"}}var L="";if(w.percHeaderClasses&&w.percHeaderClasses[V]){L="perc-"+w.percHeaderClasses[V].replace(/ /g,"-").toLowerCase()}else{L="perc-"+w.percHeaders[V].replace(/ /g,"-").toLowerCase()}var O=h("<td class='"+M+" "+L+" perc-datatable-column perc-ellipsis perc-index-"+V+" perc-cell-"+V+"-"+J+" "+T+"' valign='top'>");if(typeof P=="object"){var S="";var U="";var Q;if(h.isArray(P)){h.each(P,function(Y,W){if(!W){W="&nbsp;"}var X=W;var Z="";if(Y==0){Z="perc-first"}else{if(Y==P.length-1){Z="perc-last"}else{Z="perc-middle"}}if(typeof X=="string"){S=X}else{X=h.extend({content:"",title:""},X);S=X.content;U=X.title}if(U=="&nbsp;"){U=""}Q=h("<div style='width:100%' class='perc-datatable-columnrow perc-ellipsis perc-index-"+Y+" "+Z+"'>");if(X.callback){var aa=h("<span>").attr("title",U).append(S);aa.css("cursor","pointer").addClass("perc-callback");Q.append(aa);if(I.rowData){aa.click(I.rowData,X.callback)}else{aa.click(X.callback)}}else{Q.attr("title",U).append(S)}O.append(Q)})}else{var U=R.title;var S=R.content;var Q=h("<div title='"+U+"' class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(S);O.append(Q)}}else{var Q=h("<div class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(R);O.append(Q)}F.append(O)});y.append(F)});B.append(y);if(v){var z=h("<thead>");var D=h("<tr class='perc-datatable-head-row'>");var C=0;h.each(v,function(M,K){if(w.percVisibleColumns){if(h.inArray(M,w.percVisibleColumns)==-1){return true}}var I=A[C++];var E=I.sType;var H="perc-type-"+E;var G="";if(w.percColumnWidths){if(M<w.percColumnWidths.length-1){G=w.percColumnWidths[M];if(G=="*"){G=""}}else{G=w.percColumnWidths[w.percColumnWidths.length-1]}}if(h.browser.msie||h.browser.webkit){G=parseInt(G)+20}G+="px";var F="";if(w.percHeaderClasses&&w.percHeaderClasses[M]){F="perc-"+w.percHeaderClasses[M].replace(/ /g,"-").toLowerCase()}else{F="perc-"+w.percHeaders[M].replace(/ /g,"-").toLowerCase()}var N="";if(M==0){N="perc-first"}else{if(M==v.length-1){N="perc-last"}else{N="perc-middle"}}var O=h("<th class='"+H+" "+F+" perc-datatable-head-column perc-index-"+M+" "+N+"'>").css("width",G);var L=h("<span class='perc-sort' style='padding: 0px 10px 0px 0px; border-bottom:none'>&nbsp;</span>");if(typeof(w.sortFunction)!="undefined"&&!w.bSort){var P=w.percColNames[M];var J={};J.colName=P;J.sortFunction=w.sortFunction;O.click(J,j);if(h.browser.mozilla){O.css("MozUserSelect","none")}else{if(h.browser.msie){O.bind("selectstart",function(){return false})}}if(P==w.sortColumn){O.addClass("sorting_"+w.sortOrder)}}O.append(K);O.append(L);D.append(O)});z.append(D);B.append(z)}if(w.bSort){b()}return B}function j(y){var x=h(this);var w=y.data.colName;var z=y.data.sortFunction;x.siblings().removeClass("sorting_asc").removeClass("sorting_desc");var v="asc";if(x.is(".sorting_asc")){x.removeClass("sorting_asc").addClass("sorting_desc");v="desc"}else{if(x.is(".sorting_desc")){x.removeClass("sorting_desc").addClass("sorting_asc")}else{x.addClass("sorting_asc")}}z(w,v)}function b(){h.fn.dataTableExt.afnSortData["perc-type-string"]=function(y,w){var v=[];var x;h("td:eq("+w+")",y.oApi._fnGetTrNodes(y)).each(function(){x=h(this).text();v.push(x)});return v};h.fn.dataTableExt.afnSortData["perc-type-numeric"]=h.fn.dataTableExt.afnSortData["perc-type-string"];h.fn.dataTableExt.afnSortData["perc-type-date"]=function(x,w){var v=[];h("td:eq("+w+")",x.oApi._fnGetTrNodes(x)).each(function(){var B=Array("","");var z=h(this).find("div");B[0]=h(z[0]).text();B[1]=h(z[1]).text();var A=B.join(" ");var y=new Date(A);v.push(y)});return v}}})(jQuery);(function(j){var f;var e;var d;var b=null;var h;var c;j.fn.PercFixedTableHeader=function(k){j(".perc-fixedtableheader").remove();c=k;h=j(this);var p=h.css("z-index");if(p=="auto"){p="1000"}if(j.browser.msie||j.browser.chrome||j.browser.safari){var n="-3px"}else{var n="1px"}b=j(this).clone(true);b.find("tbody").remove();b.css("position","relative").css("margin-bottom","-30px").css("top",n).css("left","1px").css("z-index",p+1).css("background","white").attr("cellpadding","0").addClass("perc-fixedtableheader");c.container.prepend(b);remove=k.remove;if(remove){remove.bind("click",function(){b.remove()})}f=k.resizable;if(f){f.bind("resize",function(){q()})}j(window).resize(function(){q()});function q(){b.css("width",h.css("width"))}q()}})(jQuery);(function(f){var d={};var b=function(){};f.fn.PercFinderListView=function(t,A){var G=f(this);var F;if(f.isFunction(t.folderDblClickCallback)){b=t.folderDblClickCallback}if(A.PagedItemList!=undefined){F=f.perc_utils.convertCXFArray(A.PagedItemList["childrenInPage"]);G.data("totalResult",A.PagedItemList["childrenCount"]);G.data("startIndex",A.PagedItemList["startIndex"])}else{F=f.perc_utils.convertCXFArray(A.PathItem)}var z=n(t.displayFormat,F);var B=z.percData;var C=z.percTypes;if(B.length>0){var q=[];for(s=0;s<C.length;s++){q.push("&nbsp;")}B.push({rowContent:q})}var y=z.percHeaders;var v=z.percColNames;var w=z.percWidths;var x=w;var E={percRowClickCallback:k,percRowDblclickCallback:h,percColumnWidths:x,percData:B,percHeaders:y,aoColumns:C};E.oLanguage={sZeroRecords:"No Files Found"};E.bPaginate=false;E.bInfo=false;E.bSort=false;E.oLanguage.sZeroRecords="No Items Found";E.sortFunction=t.sortFunction;E.sortColumn=t.sortColumn;E.sortOrder=t.sortOrder;E.percColNames=v;G.empty();G.PercDataTable(E);var D=f(G.find("table"));var p=f(D.parents(".mcol-direc"));D.PercFixedTableHeader({resizable:f(".perc-finder-body.ui-resizable"),remove:f("#perc-finder-choose-columnview"),container:p});if(typeof(t.callback)!="undefined"){t.callback(G)}e(D);f(".perc-datatable-row:last").unbind()};function e(q){var p=q.find(".perc-datatable-row");f.map(p,function(v,t){if(f(v).data("percRowData")!=undefined&&f(v).data("percRowData").category=="ASSET"){f(v).css("cursor","default");f(v).draggable({helper:function(){return f("<div />").html(f(this).find(".perc-datatable-columnrow").html()).addClass("dataTables_wrapper").css("color","white")},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:f.perc_finder().onDragStart,stop:f.perc_finder().onDragStop,delay:f.perc_finder().dragDelay})}});f(q).droppable({tolerance:"pointer",accept:false,over:function(){},out:function(){},drop:function(){}})}function k(q){f(".perc-datatable-row").removeClass("perc-datatable-row-highlighted");f(this).addClass("perc-datatable-row-highlighted");var p=f.merge([""],j(q));f("#mcol-path-summary").val(p.join("/"));if(typeof(q.data.id)!="undefined"){f.perc_finder().setCurrentItem(q.data)}f.perc_finder().flagChangeView=false;f.perc_finder().executePathChangedListeners(p);f.perc_finder().flagChangeView=true}function j(q){if(!q.data){return""}var p=q.data.folderPaths;if(q.data.type=="site"){p=q.data.folderPaths}else{p=q.data.folderPaths+"/"+q.data.name}return p.replace("Folders/$System$/","").substring(2,p.length).split("/")}function h(p){if(p.data.type=="Folder"||p.data.type=="FSFolder"){b("/"+j(p).join("/"))}else{f.PercNavigationManager.openPathItem("/"+j(p).join("/"))}}function n(R,z){var w=[];var K=[];var I=[];var H=[];var L=[];var q=R.SimpleDisplayFormat.columns;var P,B;for(B=0;B<z.length;B++){var A=f.perc_utils.convertCXFArray(z[B].columnData.column);var E=c(A,"@name","$");var N=[];var O=f.perc_utils.choose_icon(z[B].type,z[B].icon,j({data:z[B]}));var J='<img style="float:left;" src="'+O+'" />';for(P=0;P<q.length;P++){var t=q[P];var C=t.name;var D=t.label;var S=E[C];if(t.type.toLowerCase()=="date"&&S!=null&&S!=""){var M=f.perc_utils.splitDateTime(S);var F=M.date+", "+M.time;S="<div title='"+F+"'>"+M.date+"</div>"}if(t.type.toLowerCase()=="number"&&S!=null&&S!=""){S='<div title = "'+S+' Bytes" style="text-align:right;">'+f.perc_utils.formatFileSize(S)+"</div>"}if(t.type.toLowerCase()=="text"&&S!=null&&S!=""&&P!=0){S='<span title = "'+S+'" style="font-weight: normal;">'+S+"</span>"}if(S==null||S==""){S="&nbsp;"}if(P==0&&J!=""){var y="",G,p=z[B];if(f.isArray(p.folderPaths)){G=p.folderPaths[0]}else{G=p.folderPaths}if(z[B].type=="site"){y=G.replace("/"+f.perc_paths.SITES_ROOT,"")}else{y=G.replace("/"+f.perc_paths.SITES_ROOT,"").replace("/"+f.perc_paths.DESIGN_ROOT,"").replace("//Folders/$System$"+f.perc_paths.ASSETS_ROOT,"")+"/"+z[B].name}S=J+'<span title = "'+y+'" style="padding-left:4px;">'+S+"</span>"}N.push(S)}var x={rowContent:N,rowData:z[B]};w.push(x)}for(P=0;P<q.length;P++){var t=q[P];I.push(t.name);H.push(t.label);L.push((t.width==-1?"*":(f.browser.msie?t.width-20:t.width)));var v=t.type.toLowerCase();if(v=="text"){v="string"}if(P==0){v="html"}K.push({sType:v})}var Q={percData:w,percColNames:I,percHeaders:H,percTypes:K,percWidths:L};return Q}function c(q,t,v){var z;var y={};for(z=0;z<q.length;z++){var x=q[z];var p=x[t];var w=x[v];y[p]=w}return y}})(jQuery);(function(c){c.fn.PercScrollingTemplateBrowser=function(d){var n=c("<div class='perc-scrollable'>");var k=c("<div class='perc-items'>");n.append(k);var e=c("<a style = 'margin:50px 0px' class='prevPage browse left' ></a>");var h=c("<a style = 'margin:50px 0px' class='nextPage browse right'></a>");var p=c("<div style='clear:both'>");c(this).append(e).append(n).append(h).append(p);if(d.width){n.width(d.width)}var f=null;if(d.widgetDefId){f=d.widgetDefId}var j=d.siteName;var t=d.hiddenFieldId?d.hiddenFieldId:"perc-select-template";var q=function(v,x){if(x.TemplateSummary.length==0){var w=c("<div class='perc-empty'>No Templates Found</div>").css("margin-top","70px");n.css("text-align","center").css("background","white").append(w)}else{c.each(x.TemplateSummary,function(y,z){k.append(b(this,d));k.find(".item .item-id").hide();k.find(".item").bind("click",function(){var A=c(this).find(".item-id").text();c("#"+d.hiddenFieldId).val(A);k.find(".item").removeClass("perc-selected-item");c(this).addClass("perc-selected-item")});$firstItem=k.find(".item:first");c("#"+d.hiddenFieldId).val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});n.scrollable({items:k,size:4,keyboard:true})}};if(!d.isBase){c.PercSiteService.getTemplates(j,q,f)}else{c.PercSiteService.getBaseTemplates(d.baseType,q)}return c(this)};function b(h,e){var d="<div for=\"@ITEM_ID@\" class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";var j=h.name;var f=h.id;if(e.isBase){j=j.replace("perc."+e.baseType+".","");f=h.name}return d.replace(/@IMG_SRC@/,h.imageThumbPath).replace(/@ITEM_ID@/g,f).replace(/@ITEM_LABEL@/,j).replace(/@ITEM_TT@/g,j)}})(jQuery);(function($,P){P.PercFinderView=function(){var percFinderListviewContainerInitialHeight;var percFinderListviewContainer;var PERC_FINDER_VIEW_COLUMN="column";var PERC_FINDER_VIEW_LIST="list";var PERC_FINDER_SEARCH_RESULTS="search";var PERC_FINDER_SEARCH_TYPE_MYPAGES="MyPages";var PERC_FINDER_RESULT="result";var MAX_RESULTS;var utils=$.perc_utils;var currentContentPath;var currentContentId;var finderButtons;var dirty=false;var finder=$.perc_finder();var contentId=null;var pageView=P.pageView();var dialogFlag=true;this.setView=setView;var chooseColumnView=$("#perc-finder-choose-columnview").click(setViewColumn);var chooseListView=$("#perc-finder-choose-listview").click(setViewList);var chooseSearchView=$("#perc-finder-search-submit").click(setViewSearch);var chooseMyPagesView=$("#perc-finder-choose-mypagesview").click(setMyPagesView);setColumnViewButtonOn();var dirtyController=$.PercDirtyController;var percFinderViewAPI={reload:function(){},getContentId:function(){return currentContentId},clear:function(){$("#frame").each(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},confirm_if_dirty:confirm_if_dirty,save:save};this.disableSearchBar=function disableSearchBar(disable){if(disable){$("#perc-finder-item-search").attr("disabled",true);$("#perc-finder-item-search").val("");chooseSearchView.unbind("click")}else{$("#perc-finder-item-search").removeAttr("disabled");chooseSearchView.click(setViewSearch)}};this.disableListViewButton=function disableListViewButton(disable){if(disable){chooseListView.unbind("click")}else{chooseListView.click(setViewList)}};var currentFinderView=PERC_FINDER_VIEW_COLUMN;this.getCurrentFinderView=function(){return currentFinderView};this.PERC_FINDER_VIEW_COLUMN=PERC_FINDER_VIEW_COLUMN;this.PERC_FINDER_VIEW_LIST=PERC_FINDER_VIEW_LIST;this.PERC_FINDER_SEARCH_RESULTS=PERC_FINDER_SEARCH_RESULTS;this.PERC_FINDER_RESULT=PERC_FINDER_RESULT;var pagingBar="";$("#perc-finder-item-search").focus(function(){$(this).css("color","#FFFFFF").css("background-color","#5a5d69")}).bind("keyup",function(evt){if(evt.keyCode==13){$("#perc-finder-item-search").blur();performSearch();$("#perc-finder-item-search").focus();evt.preventDefault();evt.stopPropagation()}if(evt.keyCode==27||evt.keyCode==9){$("#perc-finder-item-search").css("color","#CCCCCC").css("background-color","#41434F").blur();evt.preventDefault();evt.stopPropagation()}$(".perc-finder-message").fadeOut(function(){$(this).empty()})});function pagePrevious(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")-MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function pageNext(newStartIndex){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")+MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function refreshView(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");$(".perc-fixedtableheader").remove();percFinderListviewContainer.empty();percFinderListviewContainer.css("text-align","left");percFinderListviewContainer.append($('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>'));var column=percFinderListviewContainer.data("sortColumn");var order=percFinderListviewContainer.data("sortOrder");var startIndex=percFinderListviewContainer.data("startIndex");var callbackFunction=percFinderListviewContainer.data("callback");var config={startIndex:startIndex,maxResults:MAX_RESULTS,callback:callbackFunction,sortFunction:sortView,sortColumn:column,sortOrder:order};percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height();if(currentFinderView===PERC_FINDER_VIEW_LIST){config.path=percFinderListviewContainer.data("path");fillListView(config,function(){expandTableBorders(true)})}else{if(currentFinderView===PERC_FINDER_SEARCH_RESULTS||currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES){var searchQuery=$("#perc-finder-listview").data("searchQuery");var searchType=percFinderListviewContainer.data("searchType");config.searchCriteria={SearchCriteria:{query:searchQuery,searchType:searchType,startIndex:startIndex,maxResults:MAX_RESULTS,sortColumn:column,sortOrder:order}};fillResultView(config,function(){expandTableBorders(true)})}}}function expandTableBorders(expand){if(percFinderListviewContainer){var finder=$(".perc-finder");var lastRow=percFinderListviewContainer.find("tr:last");lastRowHeight=lastRow.height();var containerElement=$("#perc-finder-listview table:first");var containerHeight=containerElement.height();var fixedColumnHeight=$(".perc-view-column-fixed").height();var differenceValue=fixedColumnHeight-containerHeight;if(expand){if(lastRowHeight>0){lastRow.height(lastRowHeight+differenceValue)}}else{lastRow.height(20)}}}function fillPagingBar(dir){var startIndex=dir.data("startIndex");var totalResult=dir.data("totalResult");var endIndex=((startIndex-1+MAX_RESULTS>totalResult)?totalResult:(startIndex-1+MAX_RESULTS));var itemText="0 Items";if(totalResult!=0){itemText=startIndex+" - "+endIndex+" of "+totalResult+" Total"}pagingBar.find(".perc-pagingbar-items").text(itemText);if((totalResult-(startIndex-1+MAX_RESULTS))>0){pagingBar.find(".perc-pagingbar-next").removeClass("perc-disabled-navigator").unbind("click").click(pageNext)}else{pagingBar.find(".perc-pagingbar-next").addClass("perc-disabled-navigator").unbind("click")}if(startIndex>MAX_RESULTS){pagingBar.find(".perc-pagingbar-previous").removeClass("perc-disabled-navigator").unbind("click").click(pagePrevious)}else{pagingBar.find(".perc-pagingbar-previous").addClass("perc-disabled-navigator").unbind("click")}}function showPagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){var finderDiv=$(".perc-finder");pagingBar=$('<div class="perc-pagingbar-finder"/>').append($('<div class="perc-pagingbar-navigator" />').append($('<a class="perc-pagingbar-previous" />').attr("title","Previous")).append($('<a class="perc-pagingbar-next"/>').attr("title","Next"))).append($('<span class="perc-pagingbar-items" />'));fillPagingBar(dir);var newHeight=finderDiv.height();finderDiv.append(pagingBar);fixIframeHeight();fixHeight()}var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}finder.update_finder_height()}function updatePagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){fillPagingBar(dir)}}function addListViewContainer(){var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");$(allColumns[0]).siblings().hide();var newColumn=$.perc_finderInstance.insertAfter(lastColumn);newColumn.css("width","100%");var newColumnContent=newColumn.find(".mcol-direc-wrapper");newColumnContent.find(".ui-resizable-handle").remove();percFinderListviewContainer=$("<div id='perc-finder-listview'>");newColumnContent.css("width","100%");newColumnContent.append(percFinderListviewContainer);return percFinderListviewContainer}function fillListView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercPathService.getContentForPath(displayFormat.SimpleDisplayFormat,config,function(status,content){if(status){percFinderListviewContainer.PercFinderListView(config,content);var newPath=$.trim($("#mcol-path-summary").val());$.PercPathService.getPathItemForPath(newPath,function(status,content){if(content.PathItem.type=="Folder"||content.PathItem.type=="FSFolder"){$(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");if(callback){callback()}return}var index=newPath.lastIndexOf("/");newPath=newPath.substring(index+1);$("#perc-finder-listview td.perc-first").each(function(){var self=$(this);var selectedText=self.find("span").text();if(newPath==selectedText){self.parent().click();finder.scrollIntoView(self)}});if(callback){callback()}})}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height()})})}function fillResultView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.searchCriteria.SearchCriteria.formatId=displayFormat.SimpleDisplayFormat.id;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercSearchService.getSearchResult(config.searchCriteria,function(status,result){if(status){$("#perc-finder-listview").PercFinderListView(config,result);if(callback){callback()}}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}})})}function performSearch(){if(currentFinderView===PERC_FINDER_SEARCH_RESULTS){var encodedSearchText=encodeURIComponent($.trim($("#perc-finder-item-search").val()));var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("searchQuery",encodedSearchText);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}else{setView(PERC_FINDER_SEARCH_RESULTS)}setSearchViewButtonsStates();$("#mcol-path-summary").val("")}function sortView(column,order){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn",column);percFinderListviewContainer.data("sortOrder",order);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function setViewColumn(){setView(PERC_FINDER_VIEW_COLUMN)}function setViewList(){setView(PERC_FINDER_VIEW_LIST)}function setViewSearch(){performSearch()}function setMyPagesView(){setView(PERC_FINDER_SEARCH_TYPE_MYPAGES,true)}function set_view_options_button_state(view){$(".perc-finder-view-options a").removeClass("ui-active");switch(view){case PERC_FINDER_VIEW_COLUMN:chooseColumnView.addClass("ui-active");break;case PERC_FINDER_VIEW_LIST:case PERC_FINDER_SEARCH_RESULTS:chooseListView.addClass("ui-active");break;case PERC_FINDER_SEARCH_TYPE_MYPAGES:chooseMyPagesView.addClass("ui-active");break;default:chooseColumnView.addClass("ui-active")}}function setView(view,forceSet){var force=forceSet?true:false;MAX_RESULTS=$.perc_finderInstance.maxResults;set_view_options_button_state(view);if(view===currentFinderView&&!force){return}if((currentFinderView===PERC_FINDER_SEARCH_RESULTS&&view===PERC_FINDER_VIEW_LIST)||(currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES&&view===PERC_FINDER_VIEW_LIST)){return}currentFinderView=view;var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");allColumns.find("#perc-finder-listview").parents("td").remove();var finderDiv=$(".perc-finder");if(pagingBar){pagingBar.remove();fixIframeHeight();fixHeight();pagingBar=null;var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}}$(".perc-finder-body").attr("perc-view",view);if(view===PERC_FINDER_VIEW_COLUMN){allColumns.show();finder.open(finder.getCurrentPath());setColumnViewButtonOn()}else{if(view===PERC_FINDER_VIEW_LIST){percFinderListviewContainer=addListViewContainer();var contentPath=lastColumn.data("path");if(typeof(contentPath)=="undefined"){lastColumn=lastColumn.prev();contentPath=lastColumn.data("path").join("/")}else{contentPath=contentPath.join("/")}_updateListViewContainerData(contentPath,lastColumn.data("startIndex"),showPagingBar);setListViewButtonOn()}else{if(view===PERC_FINDER_SEARCH_RESULTS||view===PERC_FINDER_SEARCH_TYPE_MYPAGES){$(".perc-view-column-fixed a").removeClass("mcol-opened");$("#perc-finder-listing-Search").addClass("mcol-opened");var percFinderListviewContainer=addListViewContainer();var searchQuery=encodeURIComponent($.trim($("#perc-finder-item-search").val()));if(searchQuery==null){searchQuery==""}percFinderListviewContainer.data("searchQuery",searchQuery);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",showPagingBar);if(view===PERC_FINDER_SEARCH_TYPE_MYPAGES){percFinderListviewContainer.data("searchType",PERC_FINDER_SEARCH_TYPE_MYPAGES)}refreshView();setListViewButtonOn(view);setSearchViewButtonsStates();finder.setStateButtonsDesignNode(false);$("#mcol-path-summary").val(searchQuery)}}}}function _updateListViewContainerData(contentPath,startIndex,pagingBarCallback){percFinderListviewContainer.data("path",contentPath);percFinderListviewContainer.data("startIndex",startIndex);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",pagingBarCallback);refreshView()}function setListViewButtonOn(view){$("#perc-finder-choose-view #perc-finder-choose-columnview").removeClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").addClass("ui-enabled")}function setColumnViewButtonOn(){$("#perc-finder-choose-view #perc-finder-choose-columnview").addClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setViewButtonsOff(){$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setSearchViewButtonsStates(){$.percFinderButtons().disableAllButtonsButSite()}function confirm_if_dirty(callback,errorCallback,options){dirtyController.confirmIfDirty(callback,errorCallback,options)}function openAsset(assetId,isEditMode){$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,assetId).done(function(){$.perc_utils.info("Added asset with id "+assetId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)});var aName=$.PercNavigationManager.getName();var handler=isEditMode?$.PercAssetController.getAssetEditorForAssetId:$.PercAssetController.getAssetViewForAssetId;handler(assetId,function(status,assetEditorUrl){if(status==$.PercServiceUtils.STATUS_SUCCESS){$.PercIFrameView.renderAssetEditor(finder,null,assetEditorUrl,null,null,false);addTransitionButtons("percAsset");$("#perc-revisions-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){var isEditMode=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT;_openRevisions(assetId,aName,isEditMode)});$("#perc-pubhistory-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){_openPublishingHistory(assetId,aName)});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(assetId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{assetId:assetId,aName:aName,trName:"Publish"},{assetId:assetId,aName:aName},{assetId:assetId,aName:aName,trName:"Take Down"},{assetId:assetId,aName:aName,trName:"Stage"},{assetId:assetId,aName:aName,trName:"Remove from Staging"},assetId],percDropdownDisabledFlag:disableAction})}}})}}else{var dlgTitle="Error";var dlgContent=assetEditorUrl;if(assetEditorUrl.indexOf("must be checked out by the current user")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Overridden",[contentName])}else{if(assetEditorUrl.indexOf("Item not found")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Deleted",[contentName])}}$.perc_utils.alert_dialog({title:dlgTitle,content:dlgContent,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}})}function _openRevisions(assetId,assetName,isEditMode){var mode=isEditMode?$.PercRevisionDialog.ITEM_MODE_VIEW:$.PercRevisionDialog.ITEM_MODE_EDIT;$.PercRevisionDialog.open(assetId,assetName,$.PercRevisionDialog.ITEM_TYPE_ASSET,mode)}function _openPublishingHistory(assetId,assetName){$.PercPublishingHistoryDialog.open(assetId,assetName,$.PercPublishingHistoryDialog.ITEM_TYPE_ASSET)}function checkOutCheckInPage(newId,notificationId,notifyComplete,pathType){if(newId!=null){var type="percPage";if(pathType==$.PercNavigationManager.PATH_TYPE_ASSET){type="percAsset"}$.PercWorkflowController().checkOut(type,newId,function(status){if(status){if(contentId&&(newId!=contentId)){$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}else{notifyComplete(notificationId,true)}}else{notifyComplete(notificationId,false)}})}else{$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}function save(type,callback){if(type=="asset"){var newAsset=true;if($.PercNavigationManager.getId()){newAsset=false}$.PercIFrameView.saveContent(newAsset);callback()}else{if(type=="page"||type=="template"){if(layoutModel!=undefined&&layoutModel!=null){$.PercBlockUI();layoutModel.save(function(){$.unblockUI();callback()})}}}}function addTransitionButtons(itemType){function addSaveAndCloseButtons(){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&view==$.PercNavigationManager.VIEW_EDIT_ASSET){var saveButton='<a style="float: right;" name="perc_wizard_save" title="Save" class="perc-save" id="perc-save-content">  </a>';$("#perc-content-menu").append($(saveButton));$("#perc-save-content").click(function(){var newAsset=!contentId||contentId==null;if(!newAsset){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){$.PercIFrameView.saveContent(newAsset)},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})}else{$.PercIFrameView.saveContent(newAsset)}})}if($.PercNavigationManager.getMode()!=$.PercNavigationManager.MODE_EDIT){var editButton='<a style="float: right;" name="perc_page_edit" title="Edit" class="perc-edit-button" id="perc-page-edit">  </a>';$("#perc-content-menu").append($(editButton));currentContentPath=$.PercNavigationManager.getPath();$.PercPathService.getPathItemForPath(currentContentPath,function(message,item){var currentItem=item.PathItem;$("#perc-page-edit").data("currentItem",currentItem).click(function(){var item=$(this).data("currentItem");if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.PercNavigationManager.handleOpenPage(item,true)}else{if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDIT_ASSET){$.PercNavigationManager.handleOpenAsset(item,true)}else{var eMsg="Cannot open unknown view.";$.perc_utils.alert_dialog({title:"Error",content:eMsg})}}})})}var closeButton="<a style='float: right;' class='perc-close' title='Close' id='perc-page-close'></a>";$("#perc-content-menu").append($(closeButton));$("#perc-page-close").click(function(){if(contentId){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){confirm_if_dirty(function(){$.PercBlockUI($.PercBlockUIMode.CURSORONLY);if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkIn(contentId,function(status){contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()})}else{contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}})}function addCommentsIcon(){$.PercRevisionService.getLastComment(contentId,function(status,result){if(status==$.PercServiceUtils.STATUS_SUCCESS){if(result.data&&result.data.length>0){var commentIcon=$("<a style='float: right;' tooltip='"+result.data+"' class='perc-last-comment-menubar'><span class='perc-font-icon icon-comment'/></a>");commentIcon.tooltip({delay:500,left:-150,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+result.data+"</p>"}});$("#tooltip").css("margin-right","20px");$("#perc-content-menu").append(commentIcon)}else{$.perc_utils.info("No comment for this page in its last transaction.")}}else{$.perc_utils.info("Failed to get the last comment information from server for page id: "+contentId+". See server log for more details.")}})}if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&contentId){$.PercWorkflowController().getTransitions(contentId,function(status,results){if(status){var dropdownLabels=[];var dropdownParams=[];var dropdownActions=[];var dropdownButtonImage="";var dropdownButtonImageOver="";results.unshift(results[0]);$.each(results,function(index){var trName=results[index].name;var trClass=results[index].cssClass;var trAlt=results[index].alt;trClass+=" perc-wf-button";var trNameNormal=trName.toLowerCase().replace(/[^a-zA-Z0-9\/]/g,"_");var trId="perc_item_transition_"+trNameNormal;var baseImageName="/cm/images/images/splitButtonWf"+trNameNormal;var imageExt=".gif";var regImageFilename=baseImageName+imageExt;var overImageFilename=baseImageName+"Over"+imageExt;if(index==0){defaultButtonImage=regImageFilename;defaultButtonImageOver=overImageFilename;dropdownButtonImage="/cm/images/images/splitButtonArrow.gif";dropdownButtonImageOver="/cm/images/images/splitButtonArrowOn.gif";name}var param={name:trName,contentId:contentId,itemType:itemType};dropdownParams.push(param);dropdownLabels.push(trName);dropdownActions.push(handlePageWorkflowDropdownAction)});var pageWorkflowDropdown=$("#perc-dropdown-page-workflow");pageWorkflowDropdown.append($("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-workflow-split-button-"+$.perc_textFilters.IDNAMECDATA(dropdownLabels[0]))).append($("<div />").addClass("perc-workflow").css("display","inline-block"));pageWorkflowDropdown.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-workflow",percDropdownOptionLabels:dropdownLabels,percDropdownCallbacks:dropdownActions,percDropdownCallbackData:dropdownParams,percDropdownTitleImage:dropdownButtonImage,percDropdownTitleImageOver:dropdownButtonImageOver,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-page-workflow"});pageWorkflowDropdown.find(".perc-dropdown-title").unbind("click");pageWorkflowDropdown.children("a").click(function(){dropdownActions[0](dropdownParams[0])});addSaveAndCloseButtons()}})}else{addSaveAndCloseButtons();addCommentsIcon()}}finder.addPathChangedListener(function(p){if(currentFinderView===PERC_FINDER_VIEW_COLUMN){return}if(finder.flagChangeView){setView(PERC_FINDER_VIEW_COLUMN)}});$.PercNavigationManager.registerFinder(finder);$.PercNavigationManager.addLocationChangeListener(function(url,id,notifyComplete,params){var newId=params.id;var modeSwitch=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY&&params.mode==$.PercNavigationManager.MODE_EDIT;if(!modeSwitch&&!$.PercNavigationManager.isReopenAllowed()&&contentId&&contentId==newId){var options={title:"Open "+type,content:"The "+type+" '"+$.PercNavigationManager.getName()+"' is already open."};$.perc_utils.alert_dialog(options);notifyComplete(id,false);return}var ok=false;dirty=dirtyController.isDirty();if(dirty){confirm_if_dirty(function(){if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}return})}else{if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}}});$(".perc-finder").append(finder.elem);finder.on("resize",function(event,ui){if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}});finder.update_finder_height();finderButtons=$.percFinderButtons().createButtons(finder,percFinderViewAPI);var contentId=$.PercNavigationManager.getId();var pageMode=$.PercNavigationManager.getMode();var contentName=$.PercNavigationManager.getName();var type=$.PercNavigationManager.getPathType();var view=$.PercNavigationManager.getView();function checkForMigrationWarnings(contentId){function onPageHasEmptyMigrationWidgets(){$.perc_utils.alert_dialog({title:I18N.message("Warning"),content:I18N.message("Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray."),okCallBack:function(){$.PercPageService.clearFlagShowMigrationEmptyMessage(contentId)}})}$.PercPageService.checkForEmptyMigrationWidgets(contentId,onPageHasEmptyMigrationWidgets)}if(type==$.PercNavigationManager.PATH_TYPE_PAGE&&contentId&&contentName){if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percPage",contentId,function(status){if(!status){contentId=null;contentName=null;var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}return}else{checkForMigrationWarnings(contentId);pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}})}else{pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&contentId){var assetId=contentId;var path=$.PercNavigationManager.getPath();$("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name' title = "+contentName+"> "+contentName+"</span>");if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){openAsset(assetId,true)}})}else{openAsset(assetId,false)}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&!contentId){var memento=$j.PercNavigationManager.getMemento();if(memento.widgetId){$.PercNewAssetDialog.openViewer(memento.folderPath,memento.widgetId)}else{$.PercNewAssetDialog.open()}}else{if(!contentId){var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}}}}}if(contentName!=null){$("#perc-editor-inline-help").hide()}function handlePageWorkflowDropdownAction(params){var contentId=params.contentId;var itemType=params.itemType;var trName=params.name;confirm_if_dirty(function(){var type=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"asset":"page";doIfItemExists(params.contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){var buttons={};buttons[trName]={click:function(){userComment=$("#perc-workflow-comment").val();commentDialog.remove();$.PercBlockUI();$.PercWorkflowController().transition(contentId,itemType,trName,encodeURIComponent(userComment),function(status){if(status){contentId=null;$.unblockUI();if(type=="page"&&trName=="Archive"){$.PercRedirectHandler.createRedirect($.PercNavigationManager.getPath(),"","page").fail(function(errMsg){$.perc_utils.alert_dialog({title:"Redirect creation error",content:errMsg,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}).done(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}else{$.unblockUI()}})},id:"perc-workflow-comment-ok"};buttons.Cancel={click:function(){commentDialog.remove()},id:"perc-workflow-comment-cancel"};var userComment="";var commentDialog=$("<div><div class='perc-workflow-comment-label' data='"+trName+'\'>Enter comments (limit to 255 characters)</div><textarea id="perc-workflow-comment" name="perc-workflow-comment" maxlength="255"></textarea></div>').perc_dialog({dialogClass:"perc-workflow-comment-dialog",title:"Enter Comments",modal:true,resizable:false,percButtons:buttons,width:400,id:"perc-workflow-comment-dialog"})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _openSchedule(callbackData){var itemId=callbackData.assetId;var assetName=callbackData.aName;if(dialogFlag){$.PercScheduleDialog.open(itemId,assetName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,assetName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,assetName)}}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Continue to publish now?",success:function(){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}}function _publishItem(callbackData){var itemId=callbackData.assetId;var trName=callbackData.trName;var view=$.PercNavigationManager.getView();var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){$.unblockUI();if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var SitePublishResponse=JSON.parse(results[0]).SitePublishResponse;if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES){$.perc_utils.alert_dialog({title:"Warning",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration multiple sites",[SitePublishResponse.warningMessage])})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{if(typeof(SitePublishResponse.warningMessage)!="undefined"&&SitePublishResponse.warningMessage!=""){$.perc_utils.alert_dialog({title:"Warning",content:SitePublishResponse.warningMessage,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}}}}}}})(jQuery,jQuery.Percussion);(function(n){n.PercIFrameView={renderAssetEditor:d,saveContent:t};var c=n.PercDirtyController;var j=false;var w=null;var q,p,f,e;function d(y,B,z,G,A,C){f=n("#frame");f.contents().remove();f.unbind(".reload");w=G;q=C;p=B;f[0].src=z;var D=/sys_folderid=([0-9]+)/;D=D.exec(z);e=D&&D.length>0?D[1]:null;n.PercContentPreSubmitHandlers.clearHandlers();f.load(function(){if(j==false){j=true;v()}else{k()}});fixIframeHeight();if(q){var E=n("#perc-layout-menu").length>0?"#perc-layout-menu":"#perc-content-menu";n(E).html("");n('<a style="float: right;" name="perc_wizard_save" class="perc-save" id="perc-save-content">  </a>').appendTo(E);n('<a style="float: right;" class="perc-close" id="perc-cancel-content">  </a>').appendTo(E);n("#perc-save-content").unbind("click").click(function(){t(true)});n("#perc-cancel-content").unbind("click").click(function(){F()});function F(){n.PercNavigationManager.goToDashboard()}}}function k(){if(f.contents().find("#perc-content-edit-errors").length==0){if(q){x(f);n.unblockUI()}else{n.PercPathService.getPathItemById(n.PercNavigationManager.getId(),function(z,y){if(z==n.PercServiceUtils.STATUS_SUCCESS){var A=y.PathItem.name;n.PercNavigationManager.setReopenAllowed(true);n.PercNavigationManager.goToLocation(n.PercNavigationManager.VIEW_EDIT_ASSET,n.PercNavigationManager.getSiteName(),n.PercNavigationManager.getMode(),n.PercNavigationManager.getId(),A,n.PercNavigationManager.getPath(),n.PercNavigationManager.PATH_TYPE_ASSET);n.unblockUI()}else{n.unblockUI();n.perc_utils.alert_dialog({title:"Error",content:y})}})}}else{b(f.contents().find("#perc-content-form"));n.unblockUI()}}function v(){if(q&&p){f.contents().find("[name=sys_workflowid]").val(p)}var y=f.contents().find("#perc-content-form");b(y);if(!q){f.contents().find("#perc-site-impact-panel").show();n.PercSiteImpactView.renderSiteImpact(n.PercNavigationManager.getId(),n.PercSiteImpactView.ITEM_TYPE_ASSET,f.contents().find("#perc-site-impact-panel"))}}function t(y){c.setDirty(false,"asset");n.PercBlockUI();var z=true;n.each(n.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){z=false}});if(!z){n.unblockUI();return}n.PercContentPreSubmitHandlers.clearHandlers();n(window).removeData();f.removeData();f.contents().find("#perc-content-form").submit()}function h(y,A,z){n.PercNavigationManager.goToLocation(n.PercNavigationManager.VIEW_EDIT_ASSET,n.PercNavigationManager.getSiteName(),n.PercNavigationManager.getMode(),z,A,y+"/"+A,n.PercNavigationManager.PATH_TYPE_ASSET)}function b(z){if(e){var A=z.attr("action");A=A+"?sys_folderid="+e+"&sys_asset_folderid="+e;z.attr("action",A)}var y=z.find("[name=sys_title]");var y=z.find("[name=sys_title]");if(y.length>0){n.perc_filterField(y,n.perc_textFilters.URL)}z.find("[type=text]").keypress(function(B){if(B.keyCode==13){return false}})}function x(z){var y=z.contents().find("[name=sys_contentid]").val();if(y==""){n.perc_utils.alert_dialog({title:"Error",content:"Unable to create asset"});return}var y="-1-101-"+y;path="//Folders/$System$/Assets"+w;n.PercAssetController.putAssetInFolder(y,path,function(A,B){h(n.perc_paths.ASSETS_ROOT+w,z.contents().find("[name=sys_title]").val(),B.AssetFolderRelationship.assetId)})}})(jQuery);(function(b){b.PercNewPageDialog=function(){var d={openDialog:c};function c(k,h){var x="";if(k){k=k.split("/");if(k[1]==b.perc_paths.SITES_ROOT_NO_SLASH){x=k[2]}}var e=30;var y="<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> ";if(!h){y=y+"<label for='perc-select-template'>Select a template: </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a>"}else{y=y+"<input type='hidden' id='perc-select-template' name='template' value='"+h+"'/>"}y=y+"<div style='float:left;><fieldset><label for='perc-page-linktext' class='perc-required-field'>"+(!h?I18N.message("perc.ui.newpagedialog.label@Page link text"):I18N.message("perc.ui.newblogpostdialog.label@Post title"))+":</label> <br/> <input type='text' tabindex='"+e+"' class='required' id='perc-page-linktext' name='page_linktext' maxlength='512'/> <br/> ";if(!h){y=y+"<input type='text' style = 'display:none' tabindex='"+e+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> "}else{y=y+"<label for='perc-page-title' class='perc-required-field' style='display: none;'>"+I18N.message("perc.ui.newblogpostdialog.label@Hidden Post title")+":</label> <br style='display: none;'/> <input type='hidden' tabindex='"+e+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> <br style='display: none;'/>"}y=y+"<label for='perc-page-name' class='perc-required-field'>"+(!h?I18N.message("perc.ui.newpagedialog.label@Page name"):I18N.message("perc.ui.newblogpostdialog.label@Post name"))+":</label> <br/> <input type='text' tabindex='"+e+"' class='required' id='perc-page-name' name='page_name' maxlength='255'/><br/> </fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>";var p=!h?800:420;var z=b(y).perc_dialog({title:(!h?I18N.message("perc.ui.newpagedialog.title@New Page"):I18N.message("perc.ui.newblogpostdialog.title@New Post")),buttons:{},percButtons:{Save:{click:function(){f(x)},id:"perc-page-save"},Cancel:{click:function(){B()},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:p,resizable:false,modal:true});if(!h){v()}function w(E){var F=b.PercServiceUtils.extractDefaultErrorMessage(E);var D=b.PercServiceUtils.extractFieldErrorCode(E);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:F,okCallBack:function(){if(D=="page.alreadyExists"){b("#perc-page-name").focus()}}})}function B(){z.remove()}function f(D){b.PercSiteService.getSiteProperties(D,function(F,E){if(F==b.PercServiceUtils.STATUS_SUCCESS){var H=b(z.find("#perc-page-name")[0]).val();var G=E.SiteProperties.defaultFileExtention;if(G&&H.lastIndexOf(".")<0){if(H.length+G.length<255){H+="."+G}else{H=H.substring(0,254-G.length)+"."+G}b(z.find("#perc-page-name")[0]).val(H)}}else{b.perc_utils.alert_dialog({title:"Error",content:E})}z.find("form").submit()})}var j=z.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,messages:n(),debug:true,submitHandler:function(E){var D=b(E).find("[name=page_name]").val();D=b.trim(D);D=b.perc_textFilters.WINDOWS_FILE_NAME(D);b(E).find("[name=page_name]").val(D);b.perc_pathmanager.open_containing_folder(k,function(G,F){b.perc_pagemanager.create_new_page(F,b(E).serializeArray(),function(H){z.remove();A(F.join("/"),D,H.Page.id)},w)})}});function v(){var F=z.find("div.perc-scrollable div.perc-items");var G="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",G);var E;if(k[1]==b.perc_paths.SITES_ROOT_NO_SLASH){E=b.perc_paths.TEMPLATES_BY_SITE+"/"+k[2]}else{E=b.perc_paths.TEMPLATES_USER}b.getJSON(E,function(H){b.each(H.TemplateSummary,function(){F.append(D(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var I=b(this).find(".item-id").text();b("#perc-select-template").val(I);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});function D(I){var H="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return H.replace(/@IMG_SRC@/,I.imageThumbPath).replace(/@ITEM_ID@/,I.id).replace(/@ITEM_LABEL@/,I.name).replace(/@ITEM_TT@/g,I.name)}}var t=b("#perc-page-linktext");var q=b("#perc-page-title");var C=b("#perc-page-name");b.perc_textAutoFill(t,q);b.perc_textAutoFill(t,C,b.perc_autoFillTextFilters.URL,null,255);b.perc_filterField(C,b.perc_textFilters.URL);function n(){var D={page_linktext:{required:(!h?"Page link text":"Post Title")+"  is a required field."},page_title:{required:(!h?"Page":"Hidden Post")+" title is a required field."},page_name:{required:(!h?"Page":"Post")+" name is a required field."}};return D}function A(F,D,E){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR,b.PercNavigationManager.getSiteName(),b.PercNavigationManager.MODE_EDIT,E,D,F+"/"+D,b.PercNavigationManager.PATH_TYPE_PAGE)}}return d}})(jQuery);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(c,k){var q=b.perc_utils;var h;b.PercNewAssetDialog.open=function(){var x=30;var E;var B;var C={};B=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:C,percButtons:{Next:{click:function(){var v=b.PercNavigationManager.getMemento().lastOpenedItem;if(!q.isBlankString(v)){b.PercWorkflowController().checkIn(v,function(I){y()})}else{y()}},id:"perc-page-save"},Cancel:{click:function(){F();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var v=b.PercNavigationManager.getBookmark();var I=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(v)!=I){window.location.href=I}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var z=b("#perc-select-template_perc_is");var D="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";z.attr("style",D);function F(){B.remove()}function y(){B.find("form").submit()}E=B.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(I){var v=b("#perc-editor-url").val();var J=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(h,function(L,K){B.remove();path=K.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(N){var M=N.id;var O=M.substring(M.lastIndexOf("-")+1);v+="&sys_folderid="+O+"&sys_asset_folderid="+O+"&sys_workflowid="+J;b.PercIFrameView.renderAssetEditor(c,J,v,path,K,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(f(),function(J){var I=B.find("div.perc-scrollable div.perc-items");for(a in J){var v=J[a];I.append(e(v));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var K=b(this).find(".item-editor-url").text();var L=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(K);b("#perc-workflow-id").val(L);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var H=b("#perc-page-name");var w=b("#perc-page-title");var t=b("#perc-page-url");function A(v){return v.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function G(v){return v.replace(/\\/g,"")}b.perc_textAutoFill(H,w,G);b.perc_textAutoFill(H,t,A);b.perc_textAutoFill(H,"#perc-page-linktitle",G);b.perc_filterField(H,G);b.perc_filterField(w,G);b.perc_filterField(t,A);b.perc_filterField("#perc-page-linktitle",G)};b.PercNewAssetDialog.openViewer=function(t,v){b.PercAssetService.getAssetEditorForWidgetAndFolder(t,v,function(x,w){if(x==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var z=w.AssetEditor.pop();var y=z.url;var A=z.workflowId;path=t.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(t,function(C){var B=C.id;var D=B.substring(B.lastIndexOf("-")+1);y+="&sys_folderid="+D+"&sys_asset_folderid="+D+"&sys_workflowid="+A;b.PercIFrameView.renderAssetEditor(c,A,y,path,t.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function d(){b.PercFolderHelper().getAccessLevelByPath(h.join("/"),false,function(v,t){if(v==b.PercFolderHelper().PERMISSION_ERROR||t==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var x=c.getCurrentItem();var w="";if(x!=null){w=x.folderPaths;if(x.type=="Folder"){w=x.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(z,y){if(z==b.PercServiceUtils.STATUS_ERROR||y==b.PercUserService.ACCESS_READ||y==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{k.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},w)}})}function e(v){var t="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return t.replace(/@IMG_SRC@/,v.icon).replace(/@ITEM_ID@/g,v.title).replace(/@ITEM_URL@/,v.url).replace(/@ITEM_WORKFLOW_ID@/,v.workflowId).replace(/@ITEM_LABEL@/,v.title)}function f(){return b.deparam.querystring().path}var p=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function j(t){h=t;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){n(false)}else{if(t[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){p.show();n(true);if(t.length<3){n(false)}else{b.PercFolderHelper().getAccessLevelByPath(t.join("/"),true,function(w,v){if(w==b.PercFolderHelper().PERMISSION_ERROR||v==b.PercFolderHelper().PERMISSION_READ){n(false)}})}}else{if(t[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||t[1]==b.perc_paths.SITES_ROOT_NO_SLASH){p.hide()}}}}function n(t){if(t){p.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(d)}else{p.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}c.addPathChangedListener(j);return p}})(jQuery);(function($,P){var CONTENT_TAB=0;var LAYOUT_TAB=1;var STYLES_TAB=2;var view=$.PercNavigationManager.getView();var dialogFlag=true;var querystring=$.deparam.querystring();var pageMode=$.PercNavigationManager.getMode();var isAdmin=$.PercNavigationManager.isAdmin();var isDesigner=$.PercNavigationManager.isDesigner();P.pageView=function(){$(".perc-page-status").hide();$(".perc-page-name").hide();var dirtyController=$.PercDirtyController;if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.perc_iframe_fix($("#frame"))}var utils=$.perc_utils;var pageModel;var currentPageId;var unassigned="UNASSIGNED";var dirty=false;var pageViewAPI={resetPageName:resetPageName,reload:function(){loadTab($("#perc-pageEditor-tabs").tabs("selected"))},getPageId:function(){return currentPageId},clear:function(){$("#frame").each(function(){this.open();this.close()})},confirm_if_dirty:confirm_if_dirty,openPage:openPage,isDirty:isDirty};$("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu, #perc-error-alert").css("visibility","hidden");function openPage(pageId,pageName){try{$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,pageId).done(function(){$.perc_utils.info("Added page with id "+pageId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)})}catch(err){$.perc_utils.error("Error adding page with id "+pageId+" to recent item list.")}currentPageId=pageId;$(".perc-page-status").show();$(".perc-page-name").show();getPageStatus(currentPageId);var pglabel=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"Editing Page:":"Viewing Page:";var pgType=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"page-editing":"page-viewing";if(pageName){var titleValue=$.PercNavigationManager.getPath();$(".perc-page-name-name").html('<span class = "perc-title-value"><span class = "perc-page-name-text">'+pageName+"</span></span>");$(".perc-title-value").attr("title",titleValue);$(".perc-title-value").prepend('<span class = "perc-page-name-label">'+pglabel+"</span>");$(".perc-page-details").attr("type",pgType);$("#perc-pageEditor-menu-name").html(pageName);_addMyPagesAction(pageId);$(".perc-page-details").show()}var $tabs=$("#perc-pageEditor-tabs");var currentTabIndex=$tabs.tabs().tabs("option","selected");var defaultTabIndex=0;if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,function(){$tabs.data("disabled.tabs",[]).tabs("select",defaultTabIndex);$("#perc-pageEditor-tabs").find("li").each(function(i){if(pageModel.getTemplateModel().getTemplateType()!==unassigned){$(this).removeClass("ui-state-disabled")}});var enableMenu=pageModel.getTemplateModel().getTemplateType()!==unassigned;if(isAdmin||isDesigner){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Edit Template","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,enableMenu,true]})}else{actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Change Template"],percDropdownDisabledFlag:[false,true,true]})}addMoreMenus()})}$("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)});var actionsDropdown=$("#perc-dropdown-actions");var viewDropdown=$("#perc-dropdown-view");if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","View Meta-data"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)}],percDropdownCallbackData:["Action","View Meta-data"],percDropdownDisabledFlag:[false,true]});viewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History"],percDropdownCallbacks:[function(){},_openRevisions,_openComments,_previewPage,_openPublishingHistory],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"View"],percDropdownDisabledFlag:[false,true,true,true,true]});addMoreMenus()}function _addMyPagesAction(pageId){$.PercPageService.isMyPage(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$(".perc-my-pages-action").addClass("perc-my-pages-error").attr("title","Error occurred retreving the status.")}else{if(result){$(".perc-my-pages-action").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").click(function(){_removeFromMyPages(pageId)})}else{$(".perc-my-pages-action").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").click(function(){_addToMyPages(pageId)})}}})}function _addToMyPages(pageId){$.PercPageService.addToMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-add-to-my-pages").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").unbind().click(function(){_removeFromMyPages(pageId)})}})}function _removeFromMyPages(pageId){$.PercPageService.removeFromMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-remove-from-my-pages").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").unbind().click(function(){_addToMyPages(pageId)})}})}function addMoreMenus(){if(isAdmin||isDesigner){var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]})}else{var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-layout-actions",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]})}var layoutViewDropdown=$("#perc-dropdown-view-layout");layoutViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","View","View"],percDropdownDisabledFlag:[false,true,true]});var styleViewDropdown=$("#perc-dropdown-view-style");styleViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(currentPageId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Take Down"},{pageId:currentPageId,pageName:pageName,trName:"Stage"},{pageId:currentPageId,pageName:pageName,trName:"Remove from Staging"},currentPageId],percDropdownDisabledFlag:disableAction})}}});$.PercAssetService.getUnusedAssets(currentPageId,populateOrphanAssets);var viewDropDownData={percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History","Disable JavaScript"],percDropdownCallbacks:[$.noop,_openRevisions,_openComments,_previewPage,_openPublishingHistory,$.noop],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"Disable JavaScript"],percDropdownDisabledFlag:[false,true,true,true,true,true]};viewDropdown.PercDropdown(viewDropDownData)}if(currentTabIndex==defaultTabIndex){loadTab(defaultTabIndex)}initOrphanAssetsMenu()}}function handleIn(){var self=$(this);self.attr("src",self.data("overIconSrc"))}function handleOut(){var self=$(this);self.attr("src",self.data("iconSrc"))}function populateOrphanAssets(status,unusedAssets){$("#perc_orphan_assets_expander").show();if(status==$.PercServiceUtils.STATUS_ERROR){$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled");$.perc_utils.alert_dialog({title:"Error",content:unusedAssets});return}if(unusedAssets.length>0){var orphanAssetsContainer=$(".perc-orphan-assets-list");orphanAssetsContainer.empty();var htmlAssets="";for(var i=0;i<unusedAssets.length;i++){var asset=unusedAssets[i];var hoverText="Local";var folderPaths="";if(typeof(asset.folderPaths)!="undefined"){hoverText=asset.folderPaths.replace("//Folders/$System$","")+"/"+asset.name;folderPaths=asset.folderPaths}orphanAssetsContainer.append($("<a />").attr("alt",hoverText).attr("title",hoverText).addClass("perc-orphan-asset").data("spec",{type:asset.type,id:asset.id,relationshipId:asset.relationshipId}).append($("<div />").css("position","relative").addClass("perc-widget-tool").append($("<img />").attr("src",asset.icon).data("iconSrc",asset.icon).data("overIconSrc",asset.overIcon).hover(handleIn,handleOut)).append($("<div />").css("overflow","hidden").addClass("perc-asset-label").append($("<nobr />").html(asset.title)))).css("cursor","pointer").data("assetId",asset.id).data("assetType",asset.type).data("assetFolderPaths",folderPaths).data("widgetId",asset.widgetId).unbind().click(selectOrphanAsset))}$("#perc_orphan_assets_expander").unbind().click(function(){clearSelection();$.fn.percOrphanAssetsMaximizer(P)});orphanAssetsContainer.find(".perc-orphan-asset").draggable({helper:function(){var helper=$(this).clone();helper.find(".perc-asset-label").css("padding","0px 0px 5px 5px");return helper},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:function(){$("body").css("overflow","hidden")},stop:function(){$("body").css("overflow","auto")},delay:25});$("#perc_orphan_assets_maximizer").removeClass("perc-disabled");$("#perc_orphan_assets_expander").removeClass("perc-disabled")}else{$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled")}}$(window).resize(function(){fixIframeHeight()});function initOrphanAssetsMenu(){$("#perc_asset_library").disableSelection();$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}function deleteOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanIds=[];var orphanTypes=[];var orphanIsShared=[];var orphanWidgetsIds=[];for(var i=0;i<unused.length;i++){orphanIds.push($(unused[i]).data("assetId"));orphanTypes.push($(unused[i]).data("assetType"));orphanWidgetsIds.push($(unused[i]).data("widgetId"));var folderPaths=$(unused).data("assetFolderPaths");if(typeof(folderPaths)!="undefined"){orphanIsShared.push(true)}else{orphanIsShared.push(false)}}var title="Remove Unused Asset";var assetmsg=(i<2)?"asset":"assets";var msg="Are you sure you want to remove the unused "+assetmsg+"?";var options={id:"perc-orphan-asset-delete-dialog",title:title,question:msg,type:"YES_PREFERRED_NO",cancel:function(){},success:function(){pageModel.clearOrphanAssets(orphanWidgetsIds,orphanTypes,orphanIds,orphanAssetDeleted)}};$.perc_utils.confirm_dialog(options)}function orphanAssetDeleted(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");$(unused).remove();clearSelection();var remainingAssets=$("#perc_asset_library").find(".perc-orphan-assets-list").find("a");if(remainingAssets.length==0){$.fn.percOrphanAssetsMaximizer(P);$("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();$("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function editOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanId=$(unused).data("assetId");var orphanType=$(unused).data("assetType");var orphanWidgetId=$(unused).data("widgetId");var orphanIsShared=false;var widgetData={widgetid:orphanWidgetId,widgetdefid:orphanType};pageModel.configureAsset(widgetData,orphanId,orphanIsShared,orphanAssetEdited)}function orphanAssetEdited(){}function selectOrphanAsset(e){if(e.shiftKey){$(this).toggleClass("perc-orphan-assets-selected")}else{if($(this).is(".perc-orphan-assets-selected")){clearSelection()}else{clearSelection();$(this).toggleClass("perc-orphan-assets-selected")}}var parent=$(this).parent();var selected=$(parent).find(".perc-orphan-assets-selected");if(selected.length>0){$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/delete.png").unbind().click(deleteOrphanAsset);$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/edit.png").unbind().click(editOrphanAsset)}else{$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}if(selected.length>=2){$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}}function clearSelection(){$(".perc-orphan-assets-list").find("a").removeClass("perc-orphan-assets-selected");$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}$("#perc-pageEditor-tabs").tabs({disabled:[1,2],select:function(event,ui){if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);$("#perc-pageEditor-tabs").tabs("select",ui.index);resetJavaScriptMenu()});return false}else{resetJavaScriptMenu()}loadTab(ui.index,true)}});if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR&&$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$("#perc-wid-lib-expander").click(function(){$.fn.percWidLibMaximizer(P)})}function loadTab(index,addWrapper){if(addWrapper){var viewWrapper=$j.PercComponentWrapper("perc-action-page-tab-selected",["perc-ui-component-editor-toolbar","perc-ui-component-editor-frame"]);var isWrapperSet=$j.PercViewReadyManager.setWrapper(viewWrapper);if(!isWrapperSet){$j.PercViewReadyManager.showRenderingProgressWarning();return}}if(index==CONTENT_TAB){loadContent(currentPageId)}else{if(index==LAYOUT_TAB){loadLayout(currentPageId)}else{if(index==STYLES_TAB){loadCss(currentPageId)}}}}function _changeTemplate(){var successCallBack=function(){window.location.reload()};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);openChangeTemplateDialog()});return false}else{openChangeTemplateDialog()}function openChangeTemplateDialog(){$.PercChangeTemplateDialog().openDialog(currentPageId,pageModel.getTemplateModel().getId(),$.PercNavigationManager.getSiteName(),successCallBack)}}function _loadTemplate(){var memento={templateId:pageModel.getTemplateModel().getId(),pageId:currentPageId,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,$.PercNavigationManager.getSiteName(),null,null,null,$.PercNavigationManager.getPath(),null,memento)}function resetJavaScriptMenu(){$(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}function resetPageName(){$.ajax({url:$.perc_paths.PAGE_CREATE+"/"+currentPageId,success:function(data){$("#perc-pageEditor-menu-name").html(data.Page.name)},type:"GET",dataType:"json"})}function confirm_if_dirty(callback,errorCallback,options){options=options||{};errorCallback=errorCallback||function(){};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(callback,errorCallback,options)}else{callback()}}function loadContent(pageId){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupContent);$.PercAssetService.getUnusedAssets(pageId,populateOrphanAssets);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}else{var previewPath=$.perc_paths.PAGE_PREVIEW+currentPageId;$("#frame").contents().remove();$("#frame").attr("src",previewPath);$("#frame").unbind().load(function(){fixIframeHeight();window.setTimeout(function(){$.perc_utils.handleLinks($("#frame"))},500);var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}}function loadLayout(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupLayout);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function loadCss(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setUpCss);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function setupContent(){fixIframeHeight();P.contentView($("#frame"),pageModel)}function setupLayout(){fixIframeHeight();var layoutController=P.layoutController(pageModel);var sizeController=P.sizeController(pageModel);P.layoutView($("#frame"),pageModel,layoutController,sizeController,function(isDirty){setDirty(isDirty)});$("#region-tool").draggable({helper:"clone"})}function setDirty(isDirty){dirtyController.setDirty(isDirty,"page");dirty=isDirty}function isDirty(){return dirty}function setUpCss(){fixIframeHeight();var cssController=P.cssController(pageModel,$("#frame"),P.CSSPreviewView($("#frame"),pageModel));$("#perc-css-editor-save").click(function(){cssController.save(function(){})});$("#perc-css-editor-cancel").click(function(){pageModel.load();dirtyController.setDirty(false,"template")})}function _openSchedule(callbackData){var itemId=callbackData.pageId;var pageName=callbackData.pageName;if(dialogFlag){$.PercScheduleDialog.open(itemId,pageName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,pageName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,pageName)}}function getPageStatus(pageId){var pagePath=$.PercNavigationManager.getPath();$.perc_pathmanager.getItemProperties(pagePath,function(status,itemProps){var pageStatus=itemProps.status;$(".perc-page-status-status").html(pageStatus);$.PercItemPublisherService.getScheduleDates(pageId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;if(scheduleDates.startDate&&pageStatus=="Pending"){$(".perc-page-status-status").html("Approved for "+scheduleDates.startDate)}})})}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Clear the schedule and continue to publish now?",success:function(){_immediateItemPublish(itemId,itemType)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{_immediateItemPublish(itemId,itemType)}}function _immediateItemPublish(itemId,itemType){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}function _publishItem(callbackData){var itemId=callbackData.pageId;var trName=callbackData.trName;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var siteName=$.PercNavigationManager.getSiteName();if(siteName===undefined&&itemType=="Page"){var currentItemPath=$.perc_finder().getPathItemById(itemId).folderPath;siteName=currentItemPath.replace("/"+$.perc_paths.SITES_ROOT,"").split("/")[1]}confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){doIfDefaultServerNotModified(siteName,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.unblockUI();$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var publishStatus=JSON.parse(results[0]).SitePublishResponse.status;if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}}}}}function _openRevisions(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercRevisionDialog.open(pageId,pageName,$.PercRevisionDialog.ITEM_TYPE_PAGE,$.PercRevisionDialog.ITEM_MODE_VIEW)}function _openComments(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercCommentsDialog.open(pageId,pageName,$.PercCommentsDialog.ITEM_TYPE_PAGE)}function _openPublishingHistory(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercPublishingHistoryDialog.open(pageId,pageName,$.PercPublishingHistoryDialog.ITEM_TYPE_PAGE)}function _openOptimizer(callbackData){$.PercPageOptimizerDialog.open(callbackData.pageId,callbackData.pageName)}function _previewPage(currentPageId){confirm_if_dirty(function(){jQuery.perc_finder().launchPagePreview(currentPageId)})}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfDefaultServerNotModified(siteName,callback){$.PercNavigationManager.loadSiteProperties(siteName,function(siteProperties){$.PercItemPublisherService.isDefaultServerModified(siteProperties.id,function(status,result){if(status){if(result){$.perc_utils.alert_dialog({content:"Cannot publish or remove this item until the CM1 server is restarted.",title:"Warning"})}else{callback()}}})})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}return pageViewAPI}})(jQuery,jQuery.Percussion);(function(f){f.PercAssetController={getAssetEditorLibrary:d,getAssetEditorForAssetId:b,getAssetViewForAssetId:c,getPathItemForPath:e,putAssetInFolder:h};function d(k,j){function n(w,t){var v=[];var q=t.AssetEditor;for(i in q){var z=q[i].icon;var A=q[i].title;var p=q[i].url;var x=q[i].workflowId;var y=new f.PercAssetEditorModel(z,A,p,x);v.push(y)}j(v)}f.PercAssetService.getAssetEditorLibrary(k,n)}function b(j,k){f.PercAssetService.getAssetEditorForAssetId(j,function(n,p){k(n,p)})}function c(j,k){f.PercAssetService.getAssetViewForAssetId(j,function(n,p){k(n,p)})}function e(k,j){function n(p,q){var t=new f.PercPathItemModel(q.PathItem.id,q.PathItem.folderPaths,q.PathItem.icon,q.PathItem.name,q.PathItem.type,q.PathItem.folderPath,q.PathItem.leaf,q.PathItem.path);j(t)}f.PercPathService.getPathItemForPath(k,n)}function h(p,n,j){var k={AssetFolderRelationship:{assetId:p,folderPath:n}};f.PercAssetService.putAssetInFolder(k,j)}})(jQuery);(function(e){e.PercWorkflowController=function(){return{checkIn:d,checkOut:h,transition:k,getTransitions:n,isCheckedOutToCurrentUser:f,doesItemExist:p}};var j=e.PercWorkflowService();function d(w,x){x=x==null?function(){}:x;var v=function(y,z){if(y==e.PercServiceUtils.STATUS_ERROR){var A=e.PercServiceUtils.extractDefaultErrorMessage(z.request);e.perc_utils.debug("Error : "+A);x(false)}else{x(true)}};j.checkIn(w,v)}function h(w,v,x){x=x==null?function(){}:x;j.checkOut(v,function(z,B){if(z==e.PercServiceUtils.STATUS_SUCCESS){var y=B.data.ItemUserInfo;if(y.checkOutUser!=y.currentUser){if(y.assignmentType=="Admin"){var A={title:c[w],question:b(0,y,w),cancel:function(){x(false)},success:function(){q(v,x)},type:"OVERRIDE_OK"};e.perc_utils.confirm_dialog(A)}else{if(y.assignmentType=="Assignee"){var A={title:c[w],content:b(1,y,w)};e.perc_utils.alert_dialog(A);x(false);return}else{var A={title:c[w],content:b(2,y,w)};e.perc_utils.alert_dialog(A);x(false);return}}}else{x(true)}}else{var C=e.PercServiceUtils.extractDefaultErrorMessage(B.request);if(C.indexOf("Not a valid content id")!=-1){var A={title:c[w],content:b(3,y,w)};e.perc_utils.alert_dialog(A);x(false);return}e.perc_utils.alert_dialog({title:"Error",content:C});x(false)}})}function q(v,w){w=w==null?function(){}:w;j.forceCheckOut(v,function(x,y){if(x==e.PercServiceUtils.STATUS_SUCCESS){w(true)}else{var z=e.PercServiceUtils.extractDefaultErrorMessage(y.request);e.perc_utils.alert_dialog({title:"Error",content:z});w(false)}})}function k(y,x,w,A,z){z=z==null?function(){}:z;var v=function(C,E){if(C==e.PercServiceUtils.STATUS_ERROR){var I=e.PercServiceUtils.extractDefaultErrorMessage(E.request);e.perc_utils.alert_dialog({title:"Error",content:I});z(false)}else{var B=E.data;var G=B.ItemTransitionResults.failedAssets;if(G){var F=(x=="percAsset")?"asset":"page";var H="Could not publish the "+F+" because the following related asset(s) could not be published.<br/><br/>";if(e.isArray(G)){e.each(G,function(){var J=this.folderPaths;J=J.substring(J.indexOf("/Assets"))+"/"+this.name;H+="<b>"+J+"</b><br/>"})}else{var D=G.folderPaths;D=D.substring(D.indexOf("/Assets"))+"/"+G.name;H+="<b>"+D+"</b><br/>"}H+="<br/>Either remove the related asset(s) or publish them first and then publish this "+F+".";e.perc_utils.alert_dialog({title:"Error",content:H});z(false)}else{z(true)}}};j.transition(y,w,A,v)}function n(v,w){w=w==null?function(){}:w;j.getTransitions(v,function(x,z){if(x==e.PercServiceUtils.STATUS_SUCCESS){var y=[];var A=z.data.ItemStateTransition.transitionTriggers;if(e.isArray(A)){e.each(A,function(C){if(t[A[C]]){y.push(t[A[C]])}})}else{if(t[A]){y.push(t[A])}}w(true,y)}else{var B=e.PercServiceUtils.extractDefaultErrorMessage(z.request);e.perc_utils.alert_dialog({title:"Error",content:B});w(false,[])}})}function f(w,x){x=x==null?function(){}:x;var v=function(y,z){if(y==e.PercServiceUtils.STATUS_SUCCESS){x(z.data==true,z.data)}else{x(false,e.PercServiceUtils.extractDefaultErrorMessage(z.request))}};j.isCheckedOutToCurrentUser(w,v)}function p(v,w){w=w==null?function(){}:w;f(v,function(x,y){if(typeof y=="string"){w(x||y.indexOf("does not exist")==-1)}else{w(x)}})}function b(w,v,z){var y="";var x="page";if(z=="percAsset"){x="asset"}if(w==0){y="The "+x+" '"+v.itemName+"' is currently being edited by '"+v.checkOutUser+"'.<br/>Select 'Override' to edit this "+x+" anyway. <br/>Unsaved changes to '"+v.itemName+"' may be lost."}else{if(w==1){y="The "+x+" '"+v.itemName+"' is currently being edited by '"+v.checkOutUser+"'."}else{if(w==2){y="You are not authorized to edit the "+x+" '"+v.itemName+"'."}else{if(w==3){y="The "+x+" has been deleted in another session."}}}}return y}var c=[];c.percPage="Open Page";c.percAsset="Open Asset";var t=[];t.Reject={name:"Reject",cssClass:"perc-wf-reject",alt:"Reject"};t.Submit={name:"Submit",cssClass:"perc-wf-submit",alt:"Submit"};t.Approve={name:"Approve",cssClass:"perc-wf-approve",alt:"Approve"};t.Resubmit={name:"Resubmit",cssClass:"perc-wf-resubmit",alt:"Resubmit"};t["Quick Edit"]={name:"Quick Edit",cssClass:"perc-wf-edit",alt:"Edit"};t.Archive={name:"Archive",cssClass:"perc-wf-archive",alt:"Archive"}})(jQuery);(function(b){b.PercPathItemModel=function(n,d,j,f,h,e,c,k){this.id=n;this.folderPaths=d;this.icon=j;this.name=f;this.type=h;this.folderPath=e;this.leaf=c;this.path=k}})(jQuery);(function(b){b.PercWidgetModel=function(){this.id=null;this.locked=false;this.html=null;this.ccs=null;this.definitionId=null;this.name=null;this.properties=null;this.assetIds=null;this.relationshipId=-1;this.setId=function(c){this.id=c};this.getId=function(){return this.id};this.setHtml=function(c){this.html=c};this.getHtml=function(){return this.html};this.setCss=function(c){this.css=c};this.getCss=function(){return this.css};this.setDefinitionId=function(c){this.definitionId=c};this.getDefinitionId=function(){return this.definitionId};this.setProperties=function(c){this.properties=c};this.getProperties=function(){return this.properties};this.setName=function(c){this.name=c};this.getName=function(){return this.name};this.setAssetIds=function(c){this.assetIds=c};this.getAssetIds=function(){return this.assetIds};this.setRelationshipId=function(c){this.relationshipId=c};this.getRelationshipId=function(){return this.relationshipId}};b.PercAssetDropCriteriaModel=function(h,k,d,f,c,n,j,e){this.widgetId=h;this.appendSupport=k;this.locked=d;this.multiItemSupport=f;this.ownerId=c;this.supportedContentTypes=n;this.assetShared=j;this.relationshipId=e;this.log=function(){console.log("widgetId              = "+this.widgetId);console.log("appendSupport         = "+this.appendSupport);console.log("locked                = "+this.locked);console.log("multiItemSupport      = "+this.multiItemSupport);console.log("ownerId               = "+this.ownerId);console.log("supportedContentTypes = "+this.supportedContentTypes)}};b.PercAssetEditorModel=function(d,f,c,e){this.icon=d;this.title=f;this.url=c;this.workflowId=e;this.log=function(){console.log("icon       = "+this.icon);console.log("title      = "+this.title);console.log("url        = "+this.url);console.log("workFlowId = "+this.workflowId)}}})(jQuery);var _canLog=true;function _log(j,h){if(!_canLog){return}var c=Array.prototype.slice.apply(arguments,[1]);var d=new Date();var b=d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds();c[0]=b+" - "+c[0];try{switch(j){case"info":window.console.info.apply(window.console,c);break;case"warn":window.console.warn.apply(window.console,c);break;default:window.console.log.apply(window.console,c);break}}catch(f){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){var iMax=5;while(el&&iMax--){if(el.dtnode){return el.dtnode}el=el.parentNode}return null}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this.isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="";if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){res+="<img src='"+opts.imagePath+data.icon+"' alt='' />"}else{if(data.icon===false){noop()}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?" title='"+data.tooltip+"'":"";if(opts.noLink||data.noLink){nodeTitle="<span style='display: inline-block;' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</span>"}else{nodeTitle="<a href='#' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling();if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if((this.bExpanded||includeInvisible===true)&&this.childList){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){return a.data.title===b.data.title?0:a.data.title>b.data.title};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li)}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null;var info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this.isLoading=false;this.render();if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this.isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this.isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"";var cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn.indexOf("dynatree-custom-checkbox")!=-1){return"dynatree-custom-checkbox"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(){this._activate(true,true)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand();this.focus()}if(activate){this.activate()}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_fixSelectionState:function(){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);node._select(true,false,false)});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode){allChildsSelected=false;break}}if(allChildsSelected){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this.isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this.isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand();this.focus()}else{if(targetType==="checkbox"){this.toggleSelect();this.focus()}else{if(targetType!="dynatree-custom-checkbox"){this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){if(!$.browser.msie){aTag[0].focus()}}else{return true}}}}return false},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}return !handled},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}return this.parent.removeChild(this)},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}return this.removeChildren()}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){this.ul.removeChild(tn.li)}}this.childList=null}if(!isRecursiveCall){this.isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logInfo("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree;var opts=tree.options;var pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey==dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey==dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success;var orgError=ajaxOptions.error;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self)}self.tree.logInfo("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(XMLHttpRequest,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",XMLHttpRequest,"\n",errorThrown);if(orgError){orgError.call(options,self,XMLHttpRequest,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}this.parent.ul.removeChild(this.li);this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this];if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}}targetParent.ul.appendChild(this.li);if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}if(!prevParent.isDescendantOf(targetParent)){prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){this._log("DynaTreeStatus: initialize");if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read");this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){this._log("DynaTreeStatus: write");$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){this._log("addExpand(%o)",key);if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){this._log("clearExpand(%o)",key);var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){this._log("addSelect(%o)",key);if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){this._log("clearSelect(%o)",key);var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.1.0$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){_log("warn","Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){_log("warn","Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}if(!opts.imagePath){$("script").each(function(){var _rexDtLibName=/.*dynatree[^\/]*\.js$/i;if(this.src.search(_rexDtLibName)>=0){if(this.src.indexOf("/")>=0){opts.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/"}else{opts.imagePath="skin/"}logMsg("Guessing imagePath from '%s': '%s'",this.src,opts.imagePath);return false}})}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}else{if(this.divRoot){$(this.divRoot).remove()}}this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot;var isReloading=(opts.persist&&this.persistence.isReloading());var isLazy=false;var prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{var $ul=this.$tree.find(">ul:first").hide();this._createFromTag(root,$ul);$ul.remove()}}}this._checkConsistency();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy&&opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(opts.onPostInit){if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored when onPostInit was specified.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored when onPostInit was specified.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,false);if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,true);if(callback){callback.call(dtnode.tree,"error")}}}this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this);var $liSpan=$li.find(">span:first");var title;if($liSpan.length){title=$liSpan.html()}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}var data={title:title,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null;var $target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var pos=$target.position();switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");pos.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");pos.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");pos.left+=8}this.$dndMarker.css({left:(pos.left)+"px",top:(pos.top)+"px"}).show()}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options;var dnd=this.options.dnd;var res=null;var nodeTag=$(node.span);var hitMode;switch(eventName){case"helper":var helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());helper.data("dtSourceNode",node);res=helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;res={over:(res!==false)&&((res===true)||(res==="over")||$.inArray("over",res)>=0),before:(res!==false)&&((res===true)||(res==="before")||$.inArray("before",res)>=0),after:(res!==false)&&((res===true)||(res==="after")||$.inArray("after",res)>=0)};ui.helper.data("enterResponse",res);break;case"over":var enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){break}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode)}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false);break;case"drop":hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.");return this._create()}_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",DynaTree.version,this.options.debugLevel);var opts=this.options;this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=getDtNodeFromElement(event.target);if(!dtnode){return true}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":return(o.onClick&&o.onClick.call(tree,dtnode,event)===false)?false:dtnode._onClick(event);case"dblclick":return(o.onDblClick&&o.onDblClick.call(tree,dtnode,event)===false)?false:dtnode._onDblClick(event);case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){if(typeof event=="undefined"&&window.event==null){return false}event=$.event.fix(event||window.event);var dtnode=getDtNodeFromElement(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,icon:null,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,connectToDynatree:true,helper:function(event){var sourceNode=getDtNodeFromElement(event.target);return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var prevTargetNode=ui.helper.data("dtTargetNode")||null;var targetNode=getDtNodeFromElement(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){noop()}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var targetNode=ui.helper.data("dtTargetNode")||null;var mouseDownEvent=draggable._mouseDownEvent;var eventType=event.type;var dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}})(jQuery);(function(f){f.Perc_SectionServiceClient={getRootSection:q,getChildren:d,getSection:b,deleteSection:z,deleteSectionLink:e,convertSectionToFolder:p,edit:v,updateSectionLink:h,updateExternalLink:n,create:j,convertFolder:y,createSectionLink:x,getTree:c,move:w,replaceLandingPage:t,clearCache:A,PERC_SECTION_TYPE:{SECTION:"section",EXTERNAL_LINK:"externallink",SECTION_LINK:"sectionlink"}};var k={getChildren:{}};function j(D,E){var B=this;var C=D.CreateSiteSection?f.perc_paths.SECTION_CREATE:f.perc_paths.SECTION_CREATE_EXTERNAL_LINK;f.PercServiceUtils.makeJsonRequest(C,f.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){E(f.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);E(f.PercServiceUtils.STATUS_ERROR,H)}},D)}function y(D,E){var B=this;var C=f.perc_paths.SECTION_SECTION_FROM_FOLDER;f.PercServiceUtils.makeJsonRequest(C,f.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){E(f.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);E(f.PercServiceUtils.STATUS_ERROR,H)}},D)}function x(E,C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_CREATE_SECTION_LINK+"/"+E+"/"+C,f.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);D(f.PercServiceUtils.STATUS_ERROR,H)}})}function v(C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_UPDATE,f.PercServiceUtils.TYPE_POST,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}},C)}function h(D,C){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_LINK_UPDATE,f.PercServiceUtils.TYPE_POST,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){C(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);C(f.PercServiceUtils.STATUS_ERROR,G)}},D)}function n(D,C,E){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_EXTERNAL_LINK_UPDATE+"/"+D,f.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){E(f.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);E(f.PercServiceUtils.STATUS_ERROR,H)}},C)}function q(C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_GET_ROOT+"/"+C,f.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}})}function d(D,E,C){var B=this;if(!C&&typeof(k.getChildren[D.SiteSection.id])!="undefined"){E(f.PercServiceUtils.STATUS_SUCCESS,D,k.getChildren[D.SiteSection.id])}else{f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_GET_CHILDREN,f.PercServiceUtils.TYPE_POST,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){k.getChildren[D.SiteSection.id]=F.data;E(f.PercServiceUtils.STATUS_SUCCESS,D,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);E(f.PercServiceUtils.STATUS_ERROR,H)}},D)}}function b(C,D){var B=this;C=C.split("_")[0];f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_LOAD+"/"+C,f.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}},false)}function c(C,D){var B=this;f.PercBlockUI();f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_GET_TREE+"/"+C,f.PercServiceUtils.TYPE_GET,false,function(F,E){f.unblockUI();if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}},false,function(F){f.unblockUI();var E={data:"Oops! The server did not respond in a timely manner. This could be due to system load. Please try again."};D(f.PercServiceUtils.STATUS_ERROR,E)},120000)}function w(C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_MOVE,f.PercServiceUtils.TYPE_POST,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,C,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}},C)}function t(B,D,F){var E={ReplaceLandingPage:{newLandingPageId:B,sectionId:D}};var C=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_REPLACE_LANDING_PAGE,f.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==f.PercServiceUtils.STATUS_SUCCESS){F(f.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=f.PercServiceUtils.extractDefaultErrorMessage(G.request);F(f.PercServiceUtils.STATUS_ERROR,I)}},E)}function z(C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_DELETE+"/"+C,f.PercServiceUtils.TYPE_DELETE,false,function(F,E){if(F==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(f.PercServiceUtils.STATUS_ERROR,G)}})}function e(E,C,D){var B=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.SECTION_DELETE_SECTION_LINK+"/"+E+"/"+C,f.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==f.PercServiceUtils.STATUS_SUCCESS){D(f.PercServiceUtils.STATUS_SUCCESS,F.data)}else{var H=f.PercServiceUtils.extractDefaultErrorMessage(F.request);D(f.PercServiceUtils.STATUS_ERROR,H)}})}function p(C,D){var B=this;f.PercServiceUtils.makeRequest(f.perc_paths.SECTION_CONVERT_TO_FOLDER+C,f.PercServiceUtils.TYPE_DELETE,false,function(F,E){if(F!=f.PercServiceUtils.STATUS_SUCCESS){var G=f.PercServiceUtils.extractDefaultErrorMessage(E.request);D(false,G)}else{D(true)}})}function A(C,B){if(!C&&!B){for(var E in k){k[E]={}}}else{if(C&&!B){k[C]={}}else{if(C&&B){var D=k[C];delete D[B]}}}}})(jQuery);(function(n){n.PercSiteService={getSiteProperties:w,updateSiteProperties:x,copySite:t,copySiteInfo:k,getTemplates:j,getBaseTemplates:h,getSites:d,validateCopySiteFolders:q,createSiteFromUrl:b,createSiteFromUrlAsync:c,createSiteFromUrlStatus:v,createSiteFromUrlResult:e,isSiteBeingImported:f,getSaaSSiteNames:p};function x(y,A){var z=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_UPDATE_PROPERTIES,n.PercServiceUtils.TYPE_POST,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}},y)}function w(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_GET_PROPERTIES+"/"+z,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}})}function t(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY,n.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=n.PercServiceUtils.extractDefaultErrorMessage(C.request);var B=n.PercServiceUtils.extractGlobalErrorCode(C.request);A(n.PercServiceUtils.STATUS_ERROR,E,B)}},z)}function q(z,A){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY_VALIDATE_FOLDERS,n.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=n.PercServiceUtils.extractDefaultErrorMessage(C.request);var B=n.PercServiceUtils.extractGlobalErrorCode(C.request);A(n.PercServiceUtils.STATUS_ERROR,E,B)}},z)}function k(z){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_COPY_INFO,n.PercServiceUtils.TYPE_GET,false,function(B,A){if(B==n.PercServiceUtils.STATUS_SUCCESS){z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}else{var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}})}function j(B,C,A){var z=this;var y="";if(A!=null){y=n.perc_paths.TEMPLATES_BY_SITE+"/"+B+"/"+A}else{y=n.perc_paths.TEMPLATES_BY_SITE+"/"+B+""}n.PercServiceUtils.makeJsonRequest(y,n.PercServiceUtils.TYPE_GET,false,function(E,D){if(E==n.PercServiceUtils.STATUS_SUCCESS){C(n.PercServiceUtils.STATUS_SUCCESS,D.data)}else{var F=n.PercServiceUtils.extractDefaultErrorMessage(D.request);C(n.PercServiceUtils.STATUS_ERROR,F)}})}function h(y,A){var z=n.perc_paths.TEMPLATES_READONLY+"?type="+y;n.PercServiceUtils.makeJsonRequest(z,n.PercServiceUtils.TYPE_GET,true,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(true,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(false,D)}})}function d(z){var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITES_ALL+"/",n.PercServiceUtils.TYPE_GET,false,function(B,A){if(B==n.PercServiceUtils.STATUS_SUCCESS){z(n.PercServiceUtils.STATUS_SUCCESS,A.data)}else{var C=n.PercServiceUtils.extractDefaultErrorMessage(A.request);z(n.PercServiceUtils.STATUS_ERROR,C)}})}function b(z,A){n.ajaxSetup({timeout:600000});var y={Site:z};n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL,n.PercServiceUtils.TYPE_POST,false,function(C,B){n.ajaxSetup({timeout:60000});if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);A(n.PercServiceUtils.STATUS_ERROR,D)}},y)}function c(z,A){var y={Site:z};n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL_ASYNC,n.PercServiceUtils.TYPE_POST,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){A(n.PercServiceUtils.STATUS_SUCCESS,B.data)}else{defaultMsg="There was an unexpected error during the import process.";A(n.PercServiceUtils.STATUS_ERROR,defaultMsg)}},y)}function v(y,A){n.PercServiceUtils.makeJsonRequest(n.perc_paths.JOB_STATUS+"/"+y,n.PercServiceUtils.TYPE_GET,false,function z(C,B){var E,D=n.PercServiceUtils.STATUS_SUCCESS;if(C==n.PercServiceUtils.STATUS_SUCCESS){E=B.data.asyncJobStatus}else{D=n.PercServiceUtils.STATUS_ERROR;E="There was an unexpected error during the import process."}A(D,E)})}function e(y,A){n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+y,n.PercServiceUtils.TYPE_GET,false,function z(C,B){var E,D=n.PercServiceUtils.STATUS_SUCCESS;if(C==n.PercServiceUtils.STATUS_SUCCESS){E=B.data}else{D=n.PercServiceUtils.STATUS_ERROR;E="There was an unexpected error during the import process."}A(D,E)})}function f(y,z){n.PercServiceUtils.makeJsonRequest(n.perc_paths.SITE_IS_BEING_IMPORTED+"/"+y,n.PercServiceUtils.TYPE_GET,false,function(B,A){var D,C=n.PercServiceUtils.STATUS_SUCCESS;if(B==n.PercServiceUtils.STATUS_SUCCESS){D=A.data}else{C=n.PercServiceUtils.STATUS_ERROR;D="There was an unexpected error during the import process."}z(C,D)})}function p(A){var z=n.Deferred();var y=this;n.PercServiceUtils.makeJsonRequest(n.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+A,n.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==n.PercServiceUtils.STATUS_SUCCESS){z.resolve(B.data)}else{var D=n.PercServiceUtils.extractDefaultErrorMessage(B.request);z.reject(D)}});return z.promise()}})(jQuery);(function(b){b.PercEditSectionLinksDialog=function(){function c(k,f,n,t,p){var d=30;var w;var q;q=b("<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> <div id='perc-external-link-container' style='display:none'><fieldset><label for='perc-external-link-text' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@External link text")+":</label> <br/> <input type='text' class='required' tabindex='"+d+"' id='perc-external-link-text' name='perc-external-link-text' maxlength='100'/> <br/><label class = 'perc-required-field' for='perc-external-link-url'>"+I18N.message("perc.ui.newSectionDialog.label@External link URL")+":</label> <br/> <input type='text' tabindex='"+d+"' id='perc-external-link-url' class='required url_name' name='perc-external-link-url' maxlength='512'/><br/> <label for='perc-external-link-target'>Target Window:</label> <br><select id='perc-external-link-target' name='perc-external-link-target'><option value=''></option><option value='_blank'>New Window</option><option value='_top'>Top Window</option></select> <br/><label for='perc-external-link-navigation-cssclassnames'>"+I18N.message("perc.ui.editSectionDialog.label@Navigation class names")+":</label> <br/> <input type='text' tabindex='"+d+"' id='perc-external-link-navigation-cssclassnames' maxlength='255' name='perc-external-link-navigation-cssclassnames'/> <br/></fieldset></div><div id='perc-section-link-container' style='display:none'><fieldset><label for='perc-section-link-target' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@Target section")+":</label> <br/> <div><input type='text' class='required' readonly='true' name='perc-section-link-target' id='perc-section-link-target'/><img src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div><input type='hidden' name='perc-section-link-targetid' id='perc-section-link-targetid'/></fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>").perc_dialog({title:t,open:function(){b.Perc_SectionServiceClient.getSection(k.id,j)},modal:true,percButtons:{Save:{click:function(){e()},id:"perc-new-section-save"},Cancel:{click:function(){x()},id:"perc-new-section-cancel"}},id:"perc-new-section-dialog",width:800});function j(v,y){if(v==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:y});return}if(y.SiteSection.sectionType==b.Perc_SectionServiceClient.PERC_SECTION_TYPE.EXTERNAL_LINK){b("#perc-section-link-container").hide();b("#perc-external-link-container").show();b("#perc-external-link-text").val(y.SiteSection.title);b("#perc-external-link-url").val(y.SiteSection.externalLinkUrl);b("#perc-external-link-target option[value='"+y.SiteSection.target+"']").attr("selected","selected");b.perc_filterFieldText(b("#perc-external-link-navigation-cssclassnames"),b.perc_autoFillTextFilters.IDNAMECDATAALPHA," ");b("#perc-external-link-navigation-cssclassnames").val(y.SiteSection.cssClassNames)}else{if(k.sectionType==b.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){b("#perc-section-link-container").show();b("#perc-external-link-container").hide();b("#perc-section-link-target").val(f);b("#perc-section-link-targetid").val(k.id)}}}q.find(".perc-button-ellipse").click(function(){b.PercSectionTreeDialog.open(n,null,"Select target section","Target section","Select",function(v,y){b("#perc-section-link-targetid").val(v);b("#perc-section-link-target").val(y)})});function h(v){b("#perc-save-error").text(v).effect("pulsate",{times:1})}function x(){q.remove()}function e(){q.find("form").submit()}w=q.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(v){q.remove();p("ok",b(v).serializeArray())}})}return{open:c}}})(jQuery);(function(c){c.PercSectionTreeDialog={open:b};function b(j,t,e,q,n,k){var v=this;var f=null;c.Perc_SectionServiceClient.getTree(j,function(x,w){if(x==c.PercServiceUtils.STATUS_SUCCESS){f=c("<div/>").append(c("<div style='float:left;'/>").html(e).append(c("<div id='perc-movesection-tree' />").append(c("<ul/>").append(h(w.SectionNode))))).append(c("<div class='ui-layout-south'/>").append(c("<div id='perc_buttons' style='z-index: 100;'>"))).perc_dialog({title:q,resizable:false,modal:true,percButtons:{Move:{click:function(){p()},id:"perc-movesection-move"},Select:{click:function(){p()},id:"perc-select-section-button"},Cancel:{click:function(){f.remove()},id:"perc-movesection-cancel"}},open:function(){if(n=="Select"){c("#perc-movesection-move").hide();c("#perc-select-section-button").show()}else{c("#perc-movesection-move").show();c("#perc-select-section-button").hide()}},id:"perc-move-section-dialog",width:600});c("#perc-movesection-tree").dynatree({imagePath:"/cm/images/images/"});c("#perc-movesection-tree").dynatree("getRoot").visit(function(y){y.expand(true)})}else{c.perc_utils.alert_dialog({title:"Error",content:w.data})}});function p(){var y=c("#perc-movesection-tree").dynatree("getActiveNode");var x="";x=d(y,x);if(typeof(y)!="undefined"&&y!=null){f.remove();var w=y.data.key.split(/\|/);k(w[1],x)}}function h(A){var z;if(A.sectionType&&A.sectionType!=c.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION){return""}if(A.id==t){return""}menuTitle=A.title+"";z=c("<li/>").attr("id","perc_section_tree|"+A.id).attr("data","icon:'section.png',sectionName:'"+menuTitle.replace(/'/g,"\\'").replace(/"/g,'\\"')+"'").append(c("<a/>").attr("href","#").text(menuTitle));if(A.childNodes!=""){var y=A.childNodes.SectionNode;var B=c("<ul/>");if(c.isArray(y)){var w=y.length;for(var x=0;x<w;x++){z.append(B.append(h(y[x])))}}else{z.append(B.append(h(y)))}}return z}function d(x,w){if(x.data.sectionName==null){return w}w="/"+x.data.sectionName+w;w=d(x.parent,w);return w}}})(jQuery);(function(e){e.PercCopySiteDialog={open:d};var b=null;var f="share-type-buttons-across-site";function d(h){if(!gIsSaaSEnvironment){c(h)}else{e.PercSiteService.getSaaSSiteNames(true).done(function(j){var k=e.PercServiceUtils.convertMapToArray(j.psmap.entries);if(e.isEmptyObject(k)){e.perc_utils.alert_dialog({title:"Warning",content:"You are not authorized to create more sites in this instance of the Percussion CMS."})}else{c(h,k)}}).fail(function(){e.perc_utils.alert_dialog({title:"Warning",content:"Failed to fecth site configurations, you cannot copy current site, please try again later."})})}}function c(t,k){var v=null;var n=z();v=e(n).perc_dialog({resizable:false,title:"Copy Site",modal:true,closeOnEscape:true,percButtons:{Save:{click:function(){if(e("#perc_site_name").val()==""){e("#perc_copysite_error").text("Site name is a required field.")}else{e.PercSiteService.getSites(j)}},id:"perc-copysite-dialog-save"},Cancel:{click:function(){v.remove()},id:"perc-copysite-dialog-cancel"}},id:"perc-copysite-dialog",open:function(){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);y(t);e.perc_filterField(e("#perc_site_name"),e.perc_textFilters.HOSTNAME);e("#perc_site_name").bind("keypress keydown",function(A){w()});b=null;f=null},width:450});function w(){e("#perc_copysite_error").text("")}function j(B,A){if(B==e.PercServiceUtils.STATUS_SUCCESS){var C=e("#perc_site_name").val();if(!q(C,A)){e("#perc_copysite_error").text("The site name must be unique.")}else{if(!x(C)){e.noop()}}}else{e.unblockUI();e.perc_utils.alert_dialog({title:"Error",content:A})}}function z(){var I=e("<div/>").css("margin-bottom","30px").append(e("<label/>").text("Enter a new name for your site."));var H=e("<div/>").append(e("<label/>").attr("for","perc_site_name").text("Site name:"));var D="";D=e("<div/>").css("position","relative").append(e("<input/>").attr("type","text").css("width","240px").attr("id","perc_site_name").attr("maxlength",86));var F=e("<div/>").append('<div><input style="width:15px; margin-bottom:10px; margin-top:0px; " type="radio" name="share-type-buttons" class="shareTypeButtons" id="share-type-buttons-across-site" value="Share Assets across site" checked="checked" ><label style="margin-left: 3px; margin-top:0px;" for="share-type-buttons-across-site">Share assets across sites.</label></div><div><input style="width:15px; margin-top:0px;" type="radio" name="share-type-buttons" class="shareTypeButtons" id="share-type-buttons-selected-folder" value="Copy Assets from the selected source"><label style="margin-left: 3px; margin-top:0px;" for="share-type-buttons-selected-folder">Copy assets from the selected folder.</label></div>').css("margin-top","8px");var E=e("<div/>").css("margin-top","0px").append(e("<label/>").attr("for","perc-share-assets-location-tree").text("Specify the asset folder to copy:").css("font-weight","bold"));var A=e("<div id='perc-share-assets-location-tree' class='perc-share-assets-location-tree'>").css("margin-top","7px").PercFinderTree({filter:e.PercFinderTreeConstants.FOLDERS_ONLY,rootPath:e.PercFinderTreeConstants.ROOT_PATH_ASSETS,initialPath:e.PercFinderTreeConstants.ROOT_PATH_ASSETS,height:"135px",width:"320px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},onClick:function(J){b=J;w();e(".dynatree-active").removeClass("dynatree-active")},onRenderComplete:function(J,K){e(K.span).addClass("dynatree-active");b=J}});var G=e('<div id="perc-share-assets-tree-container" style="display: none;" />').append(E).append(A).css("margin-top","22px").css("margin-left","10px");e(".shareTypeButtons").live("change",function(){w();f=e(this).attr("id");if(e(this).attr("id")=="share-type-buttons-across-site"){e("#perc-share-assets-tree-container").css("display","none")}else{e("#perc-share-assets-tree-container").css("display","block")}});var B=e("<div/>").append(e("<label/>").css("color","red").attr("id","perc_copysite_error").attr("for","perc_site_name")).css("margin-top","15px");var C=e("<div/>").append(I).append(H).append(D).append(F).append(G).append(B);return C}function p(A){var B={id:"perc-copysite-dialog-confirm",title:"Copy Site Confirmation",question:"A new site, '"+A+"', will be created by copying '"+t+"'. The copy processing runs in the background and may take a few minutes to complete depending on the size of '"+t+"'. '"+A+"' will be added to the finder when copy processing is complete.",success:function(){e("#perc-site-map-copy").addClass("perc-site-map-action-item-disabled");var C=h(A,t);e.PercSiteService.copySite(C,function(F,E,D){if(F==e.PercServiceUtils.STATUS_ERROR&&E!=""){e.perc_utils.alert_dialog({title:"Error",content:E})}else{if(e("#perc-site-map-copy")){e("#perc-site-map-copy").removeClass("perc-site-map-action-item-disabled")}}})},cancel:function(){},yes:"Continue anyway",width:370};v.remove();e.perc_utils.confirm_dialog(B)}function y(A){e.PercSiteService.getSites(function(C,B){var D="";A=A+"-copy";while(!q(A+D,B)){if(D==""){D=2}else{D++}}e("#perc_site_name").val(A+D);e.unblockUI()})}function x(B){if(f=="share-type-buttons-selected-folder"){var A={ValidateCopyFoldersRequest:{srcFolder:b.path.replace(e.perc_paths.ASSETS_ROOT+"/",""),destFolder:B}};e.PercSiteService.validateCopySiteFolders(A,function(D,C,E){if(D==e.PercServiceUtils.STATUS_ERROR){e("#perc_copysite_error").text(C);return false}else{p(B);return true}})}else{p(B);return true}}function h(B,C){var A={SiteCopyRequest:{srcSite:C,copySite:B,assetFolder:null}};if(f=="share-type-buttons-selected-folder"){A.SiteCopyRequest.assetFolder=b.path.replace(e.perc_paths.ASSETS_ROOT+"/","")}else{delete A.SiteCopyRequest.assetFolder}return A}function q(B,A){for(i=0;i<A.SiteSummary.length;i++){if((A.SiteSummary[i].name+"").toLowerCase()==B.toLowerCase()){return false}}return true}}})(jQuery);(function(j){j.PercFolderService={getFoldersWithWorkflow:f,assignFoldersWithWorkflow:e,startAssociatedFoldersJob:h,getAssociatedFoldersJobStatus:b,getFolderPagesById:d,cancelAssociatedFoldersJob:k,isWorkflowAssignmentInProgress:c};function f(t,p,v,n){var q=j.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW+"/"+encodeURI(p)+"/"+t;if(n){q=q+"?includeFoldersWithDifferentWorkflow=true"}j.PercServiceUtils.makeJsonRequest(q,j.PercServiceUtils.TYPE_GET,false,function(x,w){if(x==j.PercServiceUtils.STATUS_SUCCESS){v(j.PercServiceUtils.STATUS_SUCCESS,w.data)}else{var y=j.PercServiceUtils.extractDefaultErrorMessage(w.request);v(j.PercServiceUtils.STATUS_ERROR,y)}})}function h(t,p,v,n){var q=j.perc_paths.FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB+encodeURI(p)+"/"+t;if(n){q=q+"?includeFoldersWithDifferentWorkflow=true"}j.PercServiceUtils.makeJsonRequest(q,j.PercServiceUtils.TYPE_GET,false,function(x,w){if(x==j.PercServiceUtils.STATUS_SUCCESS){v(j.PercServiceUtils.STATUS_SUCCESS,w.data)}else{var y=j.PercServiceUtils.extractDefaultErrorMessage(w.request);v(j.PercServiceUtils.STATUS_ERROR,y)}})}function b(n,q){var p=j.perc_paths.FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS+n;j.PercServiceUtils.makeJsonRequest(p,j.PercServiceUtils.TYPE_GET,false,function(v,t){if(v==j.PercServiceUtils.STATUS_SUCCESS){q(j.PercServiceUtils.STATUS_SUCCESS,t.data)}else{var w=j.PercServiceUtils.extractDefaultErrorMessage(t.request);q(j.PercServiceUtils.STATUS_ERROR,w)}})}function e(n,q,p){j.PercServiceUtils.makeJsonRequest(j.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN,j.PercServiceUtils.TYPE_POST,false,function(v,t){if(v==j.PercServiceUtils.STATUS_SUCCESS){q(j.PercServiceUtils.STATUS_SUCCESS,t.data)}else{var w=j.PercServiceUtils.extractDefaultErrorMessage(t.request);q(j.PercServiceUtils.STATUS_ERROR,w)}},n,p,5000)}function d(n,p){j.PercServiceUtils.makeJsonRequest(j.perc_paths.FOLDERMGT_FOLDER_PAGES+n,j.PercServiceUtils.TYPE_GET,false,function(t,q){if(t==j.PercServiceUtils.STATUS_SUCCESS){p(true,q.data)}else{var v=j.PercServiceUtils.extractDefaultErrorMessage(q.request);p(false,v)}})}function k(n,q,t){var p=j.perc_paths.FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB+n;j.PercServiceUtils.makeJsonRequest(p,j.PercServiceUtils.TYPE_GET,q,function(w,v){if(w==j.PercServiceUtils.STATUS_SUCCESS){t(j.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=j.PercServiceUtils.extractDefaultErrorMessage(v.request);t(j.PercServiceUtils.STATUS_ERROR,x)}})}function c(p){var n=j.perc_paths.FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS;j.PercServiceUtils.makeRequest(n,j.PercServiceUtils.TYPE_GET,false,function(t,q){if(t==j.PercServiceUtils.STATUS_SUCCESS){p(q.data)}else{var v=j.PercServiceUtils.extractDefaultErrorMessage(q.request);j.perc_utils.info(v);p(false)}})}})(jQuery);(function(b){b.perc_newSectionDialog=function(){function d(f,t,C){var h=30;var A;var x;x=b("<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> <label class='perc-required-field' for='perc-section-type'>"+I18N.message("perc.ui.newSectionDialog.label@Type")+":</label> <br><select id='perc-section-type' name='perc-section-type'><option value='section'>"+I18N.message("perc.ui.newSectionDialog.label@Section & landing page")+"</option><option value='sectionlink'>"+I18N.message("perc.ui.newSectionDialog.label@Section link")+"</option><option value='externallink'>"+I18N.message("perc.ui.newSectionDialog.label@External link")+"</option><option value='convertfolder'>"+I18N.message("perc.ui.newSectionDialog.label@Convert folder")+"</option></select> <br><div id='perc-section-container'><label for='perc-select-template'>"+I18N.message("perc.ui.newSectionDialog.label@Select a template")+": </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a><div style='float:left;'><fieldset><label for='perc-section-name' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@Section name")+":</label> <br/> <input type='text' class='required' tabindex='"+h+"' id='perc-section-name' name='section_name' maxlength='512'/> <br/><label for='perc-section-url' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@URL")+":</label> <br/> <input type='text' class='required' tabindex='"+h+"' id='perc-section-url' name='page_url' maxlength='100'/><br/> </fieldset></div></div><div id='perc-external-link-container' style='display:none'><fieldset><label for='perc-external-link-text' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@External link text")+":</label> <br/> <input type='text' class='required' tabindex='"+h+"' id='perc-external-link-text' name='perc-external-link-text' maxlength='100'/> <br/><label class='perc-required-field' for='perc-external-link-url'>"+I18N.message("perc.ui.newSectionDialog.label@External link URL")+":</label> <br/> <input type='text' class='required' tabindex='"+h+"' id='perc-external-link-url' name='perc-external-link-url' maxlength='512'/><br/> </fieldset></div><div id='perc-section-link-container' style='display:none'><fieldset><label for='perc-section-link-target' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@Target section")+":</label> <br/> <div><input type='text' class='required' readonly='true' name='perc-section-link-target' id='perc-section-link-target'/><img id='perc-section-link-targetid-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div><input type='hidden' name='perc-section-link-targetid' id='perc-section-link-targetid'/></fieldset></div><div id='perc-convert-folder-container' style='display:none'><fieldset><label for='perc-convert-folder-path' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@Target folder")+":</label> <br/> <div><input type='text' class='required' readonly='true' name='perc-convert-folder-path' id='perc-convert-folder-path'/><img id='perc-convert-folder-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div><label class='perc-required-field' for='perc-landing-page'>"+I18N.message("perc.ui.newSectionDialog.label@Select landing page")+":</label> <br><select id='perc-landing-page' name='perc-landing-page'><option value='perc-empty-landing-page'>"+I18N.message("perc.ui.newSectionDialog.label@Select a folder to see landing pages")+"</option></select> <br></fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>").perc_dialog({title:I18N.message("perc.ui.newSectionDialog.title@New Section"),modal:true,percButtons:{Save:{click:function(){var v=x.find("form").find("#perc-section-url");var D=b.perc_textFilters.WINDOWS_FILE_NAME(b.trim(v.val()));v.val(D);j()},id:"perc-new-section-save"},Cancel:{click:function(){B()},id:"perc-new-section-cancel"}},id:"perc-new-section-dialog",width:800});x.find("#perc-section-type").change(function(){b("#perc-section-container").hide();b("#perc-section-link-container").hide();b("#perc-external-link-container").hide();b("#perc-convert-folder-container").hide();var v=b(this).val();switch(v){case"sectionlink":b("#perc-section-link-container").show();break;case"externallink":b("#perc-external-link-container").show();break;case"convertfolder":b("#perc-convert-folder-container").show();break;default:b("#perc-section-container").show()}});x.find("#perc-section-link-targetid-button").click(function(){var v=I18N.message("perc.ui.newSectionDialog.label@Target Section");var D=I18N.message("perc.ui.newSectionDialog.label@Select target section");b.PercSectionTreeDialog.open(f,null,D,v,"Select",function(E,F){b("#perc-section-link-targetid").val(E);b("#perc-section-link-target").val(F)})});x.find("#perc-convert-folder-path-button").click(function(){var E=I18N.message("perc.ui.newSectionDialog.label@Target Folder");var G=I18N.message("perc.ui.newSectionDialog.label@Select target folder");var F=function(J){x.find("#perc-landing-page").empty();var I=J.path;if(I.substring(0,1)==="/"&&!(I.substring(0,2)==="//")){I="/"+I}if(!I){I=J.folderPaths.split("$System$")[1]}x.find("#perc-convert-folder-path").val(I).attr("title",I);var H=function(L,O){var M=x.find("#perc-landing-page").empty();if(!L){b.perc_utils.alert_dialog({title:"Error fetching folder pages",message:O});return}var N="";var K=b.isArray(O.psobj)?O.psobj:[O.isobj];b.each(K,function(){N+='<option value="'+this.name+'">'+this.name+"</option>"});M.append(N)};b.PercFolderService.getFolderPagesById(J.id,H)};var v=function(I){var H=null;if(!I){H="Please select a folder."}else{if(I.category=="SECTION_FOLDER"){H="Your current selection is a section, please select a folder."}else{if(I.path=="/Sites/"){H="Your current selection is sites root, please select a folder."}else{if(I.type=="site"){H="Your current selection is a site, please select a folder."}}}}return H};var D={okCallback:F,dialogTitle:E,rootPath:b.PercFinderTreeConstants.ROOT_PATH_SITES,initialPath:x.find("#perc-convert-folder-path").val(),selectedItemValidator:v,showFoldersOnly:true};b.PercPathSelectionDialog.open(D)});var y=x.find("div.perc-scrollable div.perc-items");var p=b("#perc-select-template_perc_is");var z="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";p.attr("style",z);function q(v){b("#perc-save-error").text(v).effect("pulsate",{times:1})}function B(){x.remove();C("cancel")}function j(){x.find("form").submit()}A=x.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(v){x.remove();C("ok",b(v).serializeArray())},errorPlacement:function(v,D){if(D.attr("name")=="perc-section-link-target"){v.insertAfter("#perc-section-link-targetid-button")}else{v.insertAfter(D)}}});var w=b.perc_paths.TEMPLATES_BY_SITE+"/"+f;b.getJSON(w,function(v){b.each(v.TemplateSummary,function(){y.append(c(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var D=b(this).find(".item-id").text();b("#perc-select-template").val(D);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});var n=b("#perc-section-name");var k=b("#perc-section-url");b.perc_textAutoFill(n,k,b.perc_autoFillTextFilters.URL);b.perc_filterField(n,b.perc_textFilters.NOBACKSLASH);b.perc_filterField(k,b.perc_textFilters.URL)}function e(){content.confirm_if_dirty(open_new_page_dialog)}function c(h){var f="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>     <table>         <tr><td align='left'>             <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>         </td></tr>         <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>         </td></tr>     </table></div>";return f.replace(/@IMG_SRC@/,h.imageThumbPath).replace(/@ITEM_ID@/,h.id).replace(/@ITEM_LABEL@/,h.name).replace(/@ITEM_TT@/g,h.name)}return{open:d}}})(jQuery);(function(b){b.perc_editSectionDialog=function(){function c(B,A){var e=b.perc_paths.SECTION_GET_PROPERTIES+"/"+B;b.PercServiceUtils.makeJsonRequest(e,b.PercServiceUtils.TYPE_GET,true,C);var f=30;var y;var w;function C(D,v){var E=this;if(D==b.PercServiceUtils.STATUS_ERROR){var I=b.PercServiceUtils.extractDefaultErrorMessage(v.request);b.perc_utils.alert_dialog({title:"Error",content:I});A(cancel);return}var H=v.data.SiteSectionProperties;w=b("<div><form action='' method='GET'> <div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-section-general-container'><label for='perc-section-name'class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@Section name")+":</label> <br/> <input type='text' class='required' tabindex='"+f+"' id='perc-section-name' name='section_name' maxlength='512'/> <br/><label for='perc-section-url' class='perc-required-field'>"+I18N.message("perc.ui.newSectionDialog.label@URL")+":</label> <br/> <input type='text' class='required' tabindex='"+f+"' id='perc-section-url' name='page_url' maxlength='100'/> <br/><label for='perc-external-link-target'>"+I18N.message("perc.ui.editSectionDialog.label@Target window")+":</label> <br><select id='perc-section-target' name='perc-section-target'><option value=''></option><option value='_blank'>"+I18N.message("perc.ui.editSectionDialog.label@New window")+"</option><option value='_top'>"+I18N.message("perc.ui.editSectionDialog.label@Top window")+"</option></select> <br/><label for='perc-section-navigation-cssclassnames'>"+I18N.message("perc.ui.editSectionDialog.label@Navigation class names")+":</label> <br/> <input type='text' tabindex='"+f+"' id='perc-section-navigation-cssclassnames' maxlength='255' name='perc-section-navigation-cssclassnames'/> <br/></div></div><div class='fieldGroup'><div id='perc-section-users-container'><label for='perc-section-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/> <select name='perc-section-folder-permission' id='perc-section-folder-permission'><option id='perc-folder-permission-option-read' value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option><option id='perc-folder-permission-option-write' value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option></select><div id='perc-section-permission-users'/></div></div>"+t()+"<div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.editSectionDialog.title@Section Preferences"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var M="";if(E.listEdit.isEnabled()){var O=E.listEdit.getListItems();for(u=0;u<O.length;u++){M+=u==0?O[u]:","+O[u]}}w.find("form").append("<input type='hidden' name='writePrincipals' value='"+M+"'>");var L=b("#perc-requires-login").is(":checked");w.find("form").append("<input type='hidden' name='requiresLogin' value='"+L+"'>");var N=w.find("#perc-section-navigation-cssclassnames");N.val(N.val().replace(/ +/g," "));var J=w.find("form").find("#perc-section-url");var K=b.perc_textFilters.WINDOWS_FILE_NAME(b.trim(J.val()));J.val(K);h()},id:"perc-edit-section-save"},Cancel:{click:function(){z()},id:"perc-edit-section-cancel"}},id:"perc-edit-section-dialog",width:520,height:618});var F=[];if(H.folderPermission.writePrincipals){F=H.folderPermission.writePrincipals;F=b.isArray(F)?F:[F]}b("#perc-section-name").val(H.title);b("#perc-section-url").val(H.folderName);b("#perc-section-target option[value='"+H.target+"']").attr("selected","selected");b.perc_filterFieldText(b("#perc-section-navigation-cssclassnames"),b.perc_autoFillTextFilters.IDNAMECDATAALPHA," ");b("#perc-section-navigation-cssclassnames").val(H.cssClassNames);if(H.folderPermission.accessLevel==b.PercFolderHelper().PERMISSION_READ){b("#perc-folder-permission-option-read").attr("selected","true")}else{b("#perc-folder-permission-option-write").attr("selected","true")}d(H);b("#perc-group-name-allowed").val(H.allowAccessTo);var G=[];for(u=0;u<F.length;u++){G[u]=F[u].name}b.PercUserService.getUsers(function(J,K){if(J==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",K);return}E.listEdit=b.PercListEditorWidget({container:"perc-section-permission-users",items:G,results:b.perc_utils.convertCXFArray(K.UserList.users),toggler:b("#perc-section-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")})})}function q(v){b("#perc-save-error").text(v).effect("pulsate",{times:1})}function z(){w.remove();A("cancel")}function h(){w.find("form").submit()}function p(){var D=b("#perc-edit-section-dialog");var v=[{groupName:"perc-section-general-container",groupLabel:"Section"},{groupName:"perc-section-users-container",groupLabel:"Users"},{groupName:"perc-section-security-container",groupLabel:"Security"}];b.each(v,function(F){var G=(F==0)?"perc-items-minimizer":"perc-items-maximizer";var E="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span  class='perc-min-max "+G+"' ></span>"+this.groupLabel+"</div></div>";D.find("#"+this.groupName).before(E);F!=0&&D.find("#"+this.groupName).hide()});D.find(".perc-section-label").unbind().click(function(){var E=b(this);E.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");D.find("#"+E.attr("groupName")).toggle()})}function x(){var v=b("#perc-requires-login");if(v.is(":checked")&&!v.is(":disabled")){b("#perc-group-name-allowed").removeAttr("readonly").css("background-color","#FFFFFF")}else{b("#perc-group-name-allowed").attr("readonly","readonly").css("background-color","#CCCCCC").val("")}}function d(D){var v=b("#perc-requires-login");if(D.requiresLogin){v.attr("checked","checked")}else{v.removeAttr("checked")}v.unbind();if(D.secureSite&&!D.secureAncestor){v.removeAttr("disabled").css("background-color","#FFFFFF");v.unbind().click(function(){x()})}else{v.attr("disabled","disabled").css("background-color","#CCCCCC")}}function t(){var v="";if(!gIsSaaSEnvironment){v="<div class='fieldGroup'><div id=\"perc-section-security-container\"><input type='checkbox' id='perc-requires-login' name='perc-requires-login' style='width:20px' tabindex='"+f+"'/><label for='perc-requires-login'>"+I18N.message("perc.ui.editSectionDialog.label@Requires Log in")+"</label> </br><label for='perc-group-name-allowed' style='margin-left:5px'>"+I18N.message("perc.ui.editSectionDialog.label@Allow access to: (enter group names)")+"</label> </br><input type='text' id='perc-group-name-allowed' name='perc-group-name-allowed' ><p>"+I18N.message("perc.ui.editSectionDialog.label@(Please use a comma to separate each group name)")+"</p><br /></div></div>"}return v}y=w.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(v){w.remove();A("ok",b(v).serializeArray())}});var k=b("#perc-section-name");var j=b("#perc-section-url");var n=b("#perc-group-name-allowed");b.perc_textAutoFill(k,j,b.perc_autoFillTextFilters.URL);b.perc_filterField(k,b.perc_textFilters.NOBACKSLASH);b.perc_filterField(j,b.perc_textFilters.URL);p();x()}return{open:c}}})(jQuery);(function(b){b.perc_editSiteSectionDialog=function(){function c(w,h){var n=30;var q;var C;var x=this;C=b("<div><form action='' method='GET'> <div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class=\"fieldGroup\"><div id='perc-site-general-container'><label for='perc-site-hostname' class='perc-required-field'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Site hostname")+":</label> <br/> <input type='text' class='required' tabindex='"+n+"' id='perc-site-hostname' maxlength='80' name='site_hostname'/> <br/><label for='perc-page-title-link' class='perc-required-field'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Home page link text")+":</label> <br/> <input type='text' tabindex='"+n+"' id='perc-page-title-link' class='required' name='page_title_link'/><br/> <label for='perc-site-desc'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Description")+":</label> <br/> <textarea type='text' tabindex='"+n+"' id='perc-site-desc' name='site_desc'></textarea><br/> <label for='perc-site-navigation-cssclassnames'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Navigation class names")+":</label> <br/> <input type='text' tabindex='"+n+"' id='perc-site-navigation-cssclassnames' maxlength='255' name='perc-site-navigation-cssclassnames'/> <br/><label for='perc-site-pagefile-extention-default'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Default file extension")+":</label> <br/> <input type='text' tabindex='"+n+"' id='perc-site-pagefile-extention-default' maxlength='30' name='perc-site-pagefile-extention-default' value='html'/> <br/><input type=\"checkbox\" id=\"perc-enable-canonical-url\" name=\"perc-enable-canonical-url\" style=\"width:20px\" tabindex=\""+n+'"/><label for="perc-enable-canonical-url">'+I18N.message("perc.ui.editSiteSectionDialog.label@Generate Canonical URLs")+'</label> <br/><input type="radio" id="perc-canonical-url-dist-sections" name="perc-canonical-url-dist" value="sections" style="width:20px" disabled tabindex="'+n+'"/>&nbsp;&nbsp;<label for="perc-canonical-url-dist-sections" id="perc-canonical-url-dist-sections-label">'+I18N.message("perc.ui.editSiteSectionDialog.label@Sections")+'</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="perc-canonical-url-dist-pages" name="perc-canonical-url-dist" value="pages" checked style="width:20px" disabled tabindex="'+n+'"/>&nbsp;&nbsp;<label for="perc-canonical-url-dist-pages" id="perc-canonical-url-dist-pages-label">'+I18N.message("perc.ui.editSiteSectionDialog.label@Landing Pages")+'</label> <br/><input type="checkbox" id="perc-replace-canonical-tags" name="perc-replace-canonical-tags" style="width:20px" disabled tabindex="'+n+'"/><label for="perc-replace-canonical-tags" id="perc-replace-canonical-tags-label">'+I18N.message("perc.ui.editSiteSectionDialog.label@Replace existing Canonical Tags if present")+"</label> <br/><label id='perc-site-protocol-label' for='perc-site-protocol'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Protocol")+":</label> <br/> <select name='perc-site-protocol' id='perc-site-protocol'>     <option id='perc-site-protocol-http' value='http'>http</option>     <option id='perc-site-protocol-https' value='https' selected>https</option></select> <br/> <label for='perc-site-default-document' id='perc-site-default-document-label'>"+I18N.message("perc.ui.editSiteSectionDialog.label@Default document")+":</label> <br/> <input type='text' tabindex='"+n+"' id='perc-site-default-document' maxlength='255' name='perc-site-default-document' value='index.html'/> <br/></div></div><div class=\"fieldGroup\"><div id='perc-site-users-container'><label id='perc-site-folder-permission-label' for='perc-site-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/> <select name='perc-site-folder-permission' id='perc-site-folder-permission'>     <option id='perc-folder-permission-option-read' value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option></select><input type='hidden' id='perc-site-id' name='site_id'/><div id='perc-site-permission-users'/></div></div>"+F()+"<div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.editSiteSectionDialog.title@Site Preferences"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var v=b("#perc-enable-site-security");if(v.data("originalValue")&&!v.is(":checked")){var L=b("#perc-site-hostname").val();var K={id:"perc_disable_site_security",title:"Disable Site Security",question:"<span id='perc-delete-dialog-warning'>Warning:</span> <BR> <span id='perc-warning-red'>You are about to disable the site security for site: '"+L+"' </span><BR> <strong>All cached security specific configure files will be removed.</strong><BR><BR> <span id='perc-delete-warn-msg'>This will not remove the security specific configure files from your live website, but those files will no longer be used.<BR> <BR> Do you want to continue with this operation?</span>",cancel:function(){},success:function(){p()},width:"500px",modal:true};b.perc_utils.confirm_dialog(K)}else{p()}},id:"perc-site-save"},Cancel:{click:function(){k()},id:"perc-site-cancel"}},id:"perc-edit-site-section-dialog",width:520,height:618});function p(){var v="";if(x.listEditor.isEnabled()){var L=x.listEditor.getListItems();for(u=0;u<L.length;u++){v+=u==0?L[u]:","+L[u]}}C.find("form").append("<input type='hidden' name='writePrincipals' value='"+v+"'>");var K=C.find("#perc-site-navigation-cssclassnames");K.val(K.val().replace(/ +/g," "));I()}function j(v){b("#perc-save-error").text(v).effect("pulsate",{times:1})}function k(){C.remove();h("cancel")}function I(){C.find("form").submit()}function G(){var K=b("#perc-edit-site-section-dialog");var v=[{groupName:"perc-site-general-container",groupLabel:I18N.message("perc.ui.editSiteSectionDialog.label@Site")},{groupName:"perc-site-users-container",groupLabel:I18N.message("perc.ui.editSiteSectionDialog.label@Users")},{groupName:"perc-site-security-container",groupLabel:I18N.message("perc.ui.editSiteSectionDialog.label@Security")},{groupName:"perc-site-membership-container",groupLabel:I18N.message("perc.ui.editSiteSectionDialog.label@Membership")}];b.each(v,function(M){var N=(M==0)?"perc-items-minimizer":"perc-items-maximizer";var L="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span  class='perc-min-max "+N+"' ></span>"+this.groupLabel+"</div></div>";K.find("#"+this.groupName).before(L);M!=0&&K.find("#"+this.groupName).hide()});K.find(".perc-section-label").unbind().click(function(){var L=b(this);L.find(".perc-min-max").toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");K.find("#"+L.attr("groupName")).toggle()})}function e(v,K){b.perc_browser({title:v,displayed_containers:"CustomSite",customRootSite:w,save_class:"perc-save",asset_name:I18N.message("Selected Page:"),new_asset_option:false,new_folder_opt:false,selectable_object:"leaf",on_save:function(M,P,O){var N=M.path;var L;N=N.replace("/Sites/","");L=N.indexOf("/");N=N.substring(L);b('[name="'+K+'"]').val(N);P()}})}function E(){var v=b("#perc-enable-site-security");if(v.is(":checked")){b("#perc-site-login-page").addClass("required");b("#perc-site-login-page-label").addClass("perc-required-field")}else{b("#perc-site-login-page").removeClass("required");b("#perc-site-login-page-label").removeClass("perc-required-field")}b("#perc-site-login-page-browse").unbind().click(function(){var K="Select login page";var L="perc-site-login-page";e(K,L)})}function z(){if(b("#perc-enable-canonical-url").is(":checked")){b("#perc-site-protocol").addClass("required");b("#perc-site-default-document").addClass("required");b("#perc-canonical-url-dist-sections").addClass("required");b("#perc-canonical-url-dist-pages").addClass("required");b("#perc-site-protocol-label").addClass("perc-required-field");b("#perc-site-default-document-label").addClass("perc-required-field");b("#perc-canonical-url-dist-sections-label").addClass("perc-required-field");b("#perc-canonical-url-dist-pages-label").addClass("perc-required-field");b("#perc-site-protocol").prop("disabled",false);b("#perc-site-default-document").prop("disabled",false);b("#perc-canonical-url-dist-sections").prop("disabled",false);b("#perc-canonical-url-dist-pages").prop("disabled",false);b("#perc-replace-canonical-tags").prop("disabled",false)}else{b("#perc-site-protocol").removeClass("required");b("#perc-site-default-document").removeClass("required");b("#perc-canonical-url-dist-sections").removeClass("required");b("#perc-canonical-url-dist-pages").removeClass("required");b("#perc-site-protocol-label").removeClass("perc-required-field");b("#perc-site-default-document-label").removeClass("perc-required-field");b("#perc-canonical-url-dist-sections-label").removeClass("perc-required-field");b("#perc-canonical-url-dist-pages-label").removeClass("perc-required-field");b("#perc-site-protocol").prop("disabled",true);b("#perc-site-default-document").prop("disabled",true);b("#perc-canonical-url-dist-sections").prop("disabled",true);b("#perc-canonical-url-dist-pages").prop("disabled",true);b("#perc-replace-canonical-tags").prop("disabled",true)}}function F(){var v="";if(!gIsSaaSEnvironment){v='<div class="fieldGroup"><div id="perc-site-security-container"><input type="checkbox" id="perc-enable-site-security" name="perc-enable-site-security" style="width:20px" tabindex="'+n+'"/><label for="perc-enable-site-security">'+I18N.message("perc.ui.editSiteSectionDialog.label@Use site security")+'</label> <br/><label for="perc-site-login-page" id="perc-site-login-page-label">'+I18N.message("perc.ui.editSiteSectionDialog.label@Login page")+':</label><br/><table class="perc-site-login-page-table"><tr><td><input id="perc-site-login-page" name="perc-site-login-page" readonly = "readonly" maxlength="2000" type="text" tabindex="'+n+'"/></td><td style="vertical-align: top;"> <span id="perc-site-login-page-browse">Browse</span></td></tr></table></div></div><div class="fieldGroup"><div id="perc-site-membership-container"><label for="perc-site-registration-confirmation-page">'+I18N.message("perc.ui.editSiteSectionDialog.label@Confirmation page")+':</label><br/><input id="perc-site-registration-confirmation-page" name="perc-site-registration-confirmation-page" maxlength="2000" type="text" tabindex="'+n+'"/><span id="perc-site-registration-confirmation-page-browse">Browse</span><br/><label for="perc-site-reset-pw-request-page">'+I18N.message("perc.ui.editSiteSectionDialog.label@Password reset request page")+':</label><br/><input id="perc-site-reset-pw-request-page" name="perc-site-reset-pw-request-page" maxlength="2000" type="text" tabindex="'+n+'"/><span id="perc-site-reset-pw-request-page-browse">Browse</span><br/><label for="perc-site-reset-password-page">'+I18N.message("perc.ui.editSiteSectionDialog.label@Password reset page")+':</label><br/><input id="perc-site-reset-password-page" name="perc-site-reset-password-page" maxlength="2000" type="text" tabindex="'+n+'"/><span id="perc-site-reset-password-page-browse">Browse</span><br/></div></div>'}return v}q=C.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(v){C.remove();h("ok",b(v).serializeArray())}});b("#perc-enable-canonical-url").click(function(){z()});b("#perc-site-registration-confirmation-page-browse").click(function(){var v="Select registration confirmation page";var K="perc-site-registration-confirmation-page";e(v,K)});b("#perc-site-reset-pw-request-page-browse").click(function(){var v="Select password reset request page";var K="perc-site-reset-pw-request-page";e(v,K)});b("#perc-site-reset-password-page-browse").click(function(){var v="Select password reset page";var K="perc-site-reset-password-page";e(v,K)});b("#perc-enable-site-security").unbind().click(function(){E()});b("#perc-site-login-page").bind("paste",function(v){v.preventDefault()}).bind("keypress keydown",function(v){if(v.keyCode==46||v.keyCode==8){var K=v.target;K.value="";v.preventDefault();return}if(v.charCode==0||typeof(v.charCode)=="undefined"){return}v.preventDefault()});G();var D=b("#perc-site-hostname");var J=b("#perc-page-title-link");var H=b("#perc-site-id");var B=b("#perc-site-desc");var f=b("#perc-site-login-page");var y=b("#perc-site-registration-confirmation-page");var A=b("#perc-site-reset-pw-request-page");var t=b("#perc-site-reset-password-page");var d=b("#perc-enable-site-security");b.perc_filterField(D,b.perc_textFilters.HOSTNAME);b.PercSiteService.getSiteProperties(w,function(K,v){if(K==b.PercServiceUtils.STATUS_SUCCESS){var L=v.SiteProperties;D.val(L.name);J.val(L.homePageLinkText);b.perc_filterFieldText(b("#perc-site-navigation-cssclassnames"),b.perc_autoFillTextFilters.IDNAMECDATAALPHA," ");b("#perc-site-navigation-cssclassnames").val(L.cssClassNames);H.val(L.id);f.val(L.loginPage);y.val(L.registrationConfirmationPage);A.val(L.resetRequestPasswordPage);t.val(L.resetPage);b.perc_filterFieldText(b("#perc-site-pagefile-extention-default"),b.perc_autoFillTextFilters.IDNAMECDATAALPHA," ");b("#perc-site-pagefile-extention-default").val(L.defaultFileExtention);if(L.isCanonical){b("#perc-enable-canonical-url").prop("checked",true)}else{b("#perc-enable-canonical-url").prop("checked",false)}z();if(L.siteProtocol){b("#perc-site-protocol").val(L.siteProtocol)}b.perc_filterField(b("#perc-site-default-document"),b.perc_textFilters.URL);if(L.defaultDocument){b("#perc-site-default-document").val(L.defaultDocument)}if(L.canonicalDist){b("[name='perc-canonical-url-dist'][value='"+L.canonicalDist+"']").prop("checked",true)}if(L.isCanonicalReplace){b("#perc-replace-canonical-tags").prop("checked",true)}else{b("#perc-replace-canonical-tags").prop("checked",false)}if(typeof(L.description)!="undefined"){B.val(L.description)}if(L.folderPermission.accessLevel==b.PercFolderHelper().PERMISSION_READ){b("#perc-folder-permission-option-read").attr("selected","true")}else{b("#perc-folder-permission-option-write").attr("selected","true")}var M=[];if(L.folderPermission.writePrincipals){M=L.folderPermission.writePrincipals;M=b.isArray(M)?M:[M]}d.data("originalValue",L.isSecure);if(L.isSecure){d.attr("checked","checked")}else{d.removeAttr("checked")}E();var N=[];for(u=0;u<M.length;u++){N[u]=M[u].name}b.PercUserService.getUsers(function(O,P){if(O==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",P);return}x.listEditor=b.PercListEditorWidget({container:"perc-site-permission-users",items:N,results:b.perc_utils.convertCXFArray(P.UserList.users),toggler:b("#perc-site-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")})})}else{b.perc_utils.alert_dialog({title:"Error",content:v})}})}return{open:c}}})(jQuery);(function(d){d.widget("ui.perc_site_map",{NODEWIDTH:92,NODESPACING:40,MINLEFT:116,TOPSPACING:14,MAX_SECTION_TITLE_LENGTH:18,IMAGE_BASE:"../images/images/",LINE_IMAGE:"singlePixelGreen.gif",ADD_BUTTON_IMAGE:"buttonAddPage2.gif",CONFIG_BUTTON_IMAGE:"buttonConfigurePage.gif",DELETE_BUTTON_IMAGE:"buttonDeletePage.gif",CONFIG_BUTTON_IMAGE_STANDALONE:"buttonConfigStandalone.png",ARROW_ON_IMAGE:"arrowSubOn.gif",ARROW_OFF_IMAGE:"arrowSubOff.gif",data:[],rootSection:null,newSectionDialog:null,editSectionDialog:null,editSiteSectionDialog:null,_init:function(){var e=this;this.element.addClass("perc-site-map");this.element.append(d("<div></div>").css("height","8px"));this.element.append(d("<div id='perc_store_draggable'></div>").hide());this.load(this.options.site);this.newSectionDialog=d.perc_newSectionDialog();this.editSectionDialog=d.perc_editSectionDialog();this.editSiteSectionDialog=d.perc_editSiteSectionDialog();this.addActionsMenuItems();d(window).resize(function(){e.layoutAll()})},load:function(h,f,j){var e=this;this.removeLevel(1);if(h){d.Perc_SectionServiceClient.getRootSection(h,function(n,p){if(n==d.PercServiceUtils.STATUS_SUCCESS){var q=p.SiteSection;var v=e.addLevel("");var k=e.createSection(q,1,"",0);e.addSectionToLevel(k,1);e.layoutLevel(1);if(!f){e.expandSection(q.id)}if(typeof(j)=="function"){j()}}else{var t=p;if(p.indexOf("Cannot find object name")!=-1){t="The requested site '"+h+"' does not exist and may have been deleted in another session."}d.perc_utils.alert_dialog({title:"Error",content:t,okCallBack:function(){d.PercNavigationManager.goToLocation(d.PercNavigationManager.VIEW_SITE_ARCH)}})}});d(window).resize(function(){if(d.browser.msie){setTimeout(function(){e.layoutAll()},150)}else{e.layoutAll()}})}},destroy:function(){d.widget.prototype.destroy.apply(this,arguments);d(window).unbind("resize")},handleMoveActionItemState:function(){var e=d(".perc-site-map-box-selected").length>0;if(e){d(".perc-site-map-action-item-disabled").not("#perc-site-map-copy,#perc-site-map-delete").removeClass("perc-site-map-action-item-disabled").addClass("perc-site-map-action-item-enabled")}else{d(".perc-site-map-action-item").not("#perc-site-map-copy,#perc-site-map-delete").removeClass("perc-site-map-action-item-enabled").addClass("perc-site-map-action-item-disabled")}},fireOnChange:function(){if(typeof(this.options.onChange)=="function"){this.options.onChange()}},layoutAll:function(){var h=d(".perc-site-map-level");var e=h.length;for(var f=1;f<=e;f++){this.layoutLevel(f)}},layoutLevel:function(y){var z=this;var x=this.TOPSPACING*(y==1?2:1);var B=d(".perc-site-map-level").slice(y-1,y);var h=B.metadata({type:"attr",name:"data"}).parentId;var q=B.children(".perc-site-map-nodes").children(".perc-site-map-node");var E=q.length;var k=(E*this.NODEWIDTH)+((E-1)*this.NODESPACING);var n=B.offset().top;var w=this.MINLEFT;var f=(d(window).width()-k)/2;var A=-1;if(h.length>0){var F=d("#"+h).offset().left;f=(F+(this.NODEWIDTH/2))-(k/2);if(f+k>(d(window).width()+d(window).scrollLeft())){var H=(f+k)-(d(window).width()+d(window).scrollLeft());A=F;f-=(H+20)}}else{f=(d(window).width()-k)/2;var e=d(".perc-site-map-sitetitle");var j=e.width();e.css("top",n+10).css("left",(d(window).width()-j)/2);var G=d(".perc-site-map-actions");var v=G.width();G.css("top",n+10).css("left",(d(window).width()-v)-40)}if(f>this.MINLEFT){w=f}var D=w;var t=D;B.children(".perc-site-map-nodes").children(".perc-site-map-droparea").remove();q.each(function(I){d(this).css("top",n+x);d(this).css("left",w);if(y>1){z.addDropArea(d(this),n,w,I)}t=w;if(d(this).hasClass("perc-site-map-expanded")){$bottomLine=d(this).children(".perc-site-map-node-bottomline");$bottomLine.css("left",z.NODEWIDTH/2);$bottomLine.show()}w+=(z.NODESPACING+z.NODEWIDTH)});var C=B.children(".perc-site-map-level-line");if(E>1||(E==1&&A>-1)){var p=Math.max(t,A);C.css("top",n+x-2);C.css("left",D+46);C.children("img").css("width",(p-D)+2);C.show()}else{C.hide()}z.adjustLevelWidths();q.each(function(){d(this).show()})},adjustLevelWidths:function(){var f=40;var e=0;d(".perc-site-map-level").each(function(h){if(h<1){return}var j=d(this).find(".perc-site-map-nodes .perc-site-map-droparea:last");if(j.length==0){return}var k=j.offset().left;e=Math.max(e,k)});d(".perc-site-map-level").each(function(h){if(h<1){return}if((e+f)>d(window).width()){d(this).css("width",(e+f)+"px")}else{d(this).css("width",null)}})},addDropArea:function(e,q,p,j){var k=e.metadata({type:"attr",name:"data"});var n={targetId:k.parentId,index:0};if(j==0){var h=d("<div class='perc-site-map-droparea'></div>");h.attr("data",JSON.stringify(n));e.before(h);h.css("top",q+51);h.css("left",p-38);this.initDropArea(h)}n.index=j+1;var f=d("<div class='perc-site-map-droparea'</div>");f.attr("data",JSON.stringify(n));e.after(f);f.css("top",q+51);f.css("left",p+94);this.initDropArea(f)},initDropArea:function(e,h){var f=this;e.droppable({accept:function(j){return f.onDropAccept(this,j)},tolerance:"pointer",over:function(k,n){var j=d(this);j.addClass("perc-site-map-droparea-over")},out:function(k,n){var j=d(this);j.removeClass("perc-site-map-droparea-over")},drop:function(k,n){var j=d(this);j.removeClass("perc-site-map-droparea-over");var q=JSON.parse(e.attr("data"));var p=JSON.parse(n.draggable.attr("data"));f.onMove(p.id,p.parentId,p.index,q.targetId,q.index)}})},getImageSrc:function(f,j){var n=j?"Over":"";var k=f.lastIndexOf(".");var h=f.substring(0,k);var e=f.substring(k,f.length);return this.IMAGE_BASE+h+n+e},addSectionToLevel:function(h,e){var f=d("#perc_level_"+e);var j=f.children(".perc-site-map-nodes");j.append(h);if(e==1){h.children(".perc-site-map-node-topline").hide()}},addLevel:function(n){var p=d(".perc-site-map-level");var h=p.length;var j=h==0;var q=j?I18N.message("perc.ui.sitemap.label@Level 1 (Top)"):I18N.message("perc.ui.sitemap.label@Level",[(h+1)+""]);var t=d(".perc-site-map");var e=d("<div></div>").addClass("perc-site-map-level").addClass(j?"perc-site-map-root":"perc-site-map-sub").attr("id","perc_level_"+(h+1)).attr("data","{level: '"+(h+1)+"', parentId: '"+n+"'}");t.append(e);e.append(d("<div></div>").addClass("perc-site-map-level-title").text(q));if(!j){e.append(d("<div></div>").addClass("perc-site-map-level-line").append(d("<img/>").attr("src",this.getImageSrc(this.LINE_IMAGE)).attr("width","2").attr("height","2")));var f=this.createImageButton(this.ADD_BUTTON_IMAGE,I18N.message("perc.ui.sitemap.tooltip@Add Section"),this.onAddSection,{level:h+1,parentSectionId:n,context:this},"level_"+h+1);f.attr("id","perc_level_"+(h+1)+"_add");var k=e.append(d("<div></div>").addClass("perc-site-map-addpage-button").append(f))}else{e.append(d("<div></div>").addClass("perc-site-map-sitetitle").text(this.options.site));e.append(d("<div></div>").addClass("perc-site-map-actions"));this.checkCopySite()}e.append(d("<div></div>").addClass("perc-site-map-nodes"));return e},removeLevel:function(e){var h=this;var k=d(".perc-site-map-level");var f=k.length;if(e<1||e>f){return}var j=d(k[e-1]);if(e<f){this.removeLevel(e+1)}j.unbind(".level_"+e);j.remove()},addActionsMenuItems:function(){var f=this;var j=d("#perc-navigation-menu");if(d.PercNavigationManager.isAdmin()){var e=d("<div/>").addClass("perc-site-map-action-item").addClass("perc-site-map-action-item-disabled").css("display","table-cell").css("padding-right","30px").attr("id","perc-site-map-delete").attr("title","Delete Site").text("Delete Site");h(function(p){if(!p){e.removeClass("perc-site-map-action-item-disabled").addClass("perc-site-map-action-item-enabled").attr("for",f.options.site).bind("click",function(q){f.onDeleteSiteDialog()})}});j.append(e);var k=d("<div/>").addClass("perc-site-map-action-item").addClass("perc-site-map-action-item-disabled").css("display","table-cell").css("padding-right","30px").attr("id","perc-site-map-copy").text("Copy Site").bind("click",function(p){f.onCopySiteDialog()});j.append(k)}var n=d("<div></div>").addClass("perc-site-map-action-item").addClass("perc-site-map-action-item-disabled").css("display","table-cell").attr("id","perc-site-map-move").text(I18N.message("perc.ui.sitemap.menuitem@Move Section")).bind("click",function(p){f.onMoveWithDialog()});j.append(n);function h(q){var p=d.PercNavigationManager.getSiteName();if(p!="undefined"){d.PercSiteService.isSiteBeingImported(p,function(v,t){q(t)})}else{q(false)}}},onDeleteSiteDialog:function(){var h=d.perc_utils;var f=["","site"];var h=d.perc_utils;var e=[d(".perc-site-map-sitetitle").text()];var j=I18N.message("perc.ui.deletesitedialog.warning@Confirm",e);dialog=d("<div/>").append(j).perc_dialog({id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deletesitedialog.warning@Title"),percButtons:{Ok:{click:function(){dialog.remove();b()},id:"perc-confirm-generic-ok"},Cancel:{click:function(){dialog.remove()},id:"perc-confirm-generic-cancel"}},width:"500px",modal:true})},onCopySiteDialog:function(){var e=d(".perc-site-map-sitetitle").text();if(e!=""&&d("#perc-site-map-copy").not(".perc-site-map-action-item-disabled").length>0){d.PercSiteService.copySiteInfo(function(h,f){if(h==d.PercServiceUtils.STATUS_SUCCESS){if(f.psmap.entries!=""){d.perc_utils.alert_dialog({title:"Error",content:"You cannot start a copy site while another site is being copied."})}else{d.PercCopySiteDialog.open(e)}}else{d.perc_utils.alert_dialog({title:"Error",content:f})}})}},checkCopySite:function(){var e=this;d.PercSiteService.copySiteInfo(function(h,f){if(h==d.PercServiceUtils.STATUS_SUCCESS){if(f.psmap.entries!=""){d("#perc-site-map-copy").addClass("perc-site-map-action-item-disabled").removeClass("perc-site-map-action-item-enabled")}else{d("#perc-site-map-copy").removeClass("perc-site-map-action-item-disabled").addClass("perc-site-map-action-item-enabled").attr("for",e.options.site)}}else{d.perc_utils.alert_dialog({title:"Error",content:f})}})},createSection:function(j,f,q,e){var h=this;var n=d("<div></div>").addClass("perc-site-map-node").attr("id",j.id).attr("perc-section-title",j.title).hide();n.append(d("<div></div>").addClass("perc-site-map-node-topline").append(d("<img/>").attr("src",this.getImageSrc(this.LINE_IMAGE)).attr("width","2").attr("height","14")));n.append(d("<div></div>").addClass("perc-site-map-sectiontitle").text(this.truncateSectionTitle(j.title+"")).attr("title",j.title).attr("alt",j.title));var k={level:f,parentId:q};d.extend(k,j);n.attr("data",JSON.stringify(k));var p=d("<div></div>").addClass("perc-site-map-box");p.attr("data",JSON.stringify({id:k.id,parentId:q,index:e,name:j.title,sectionType:j.sectionType,folderPath:j.folderPath}));n.append(p);this.addNodeButtons(p,j,f);this.addNodeCountArea(p,j,f);if(f>1){p.bind("click",function(t){d(".perc-site-map-box-selected").removeClass("perc-site-map-box-selected");d(this).addClass("perc-site-map-box-selected");h.handleMoveActionItemState()});p.draggable({opacity:0.7,helper:"clone",delay:150})}p.droppable({accept:function(t){return h.onDropAccept(this,t)},tolerance:"pointer",zIndex:9600,over:function(v,w){var t=d(this);t.addClass("perc-site-map-box-over")},out:function(v,w){var t=d(this);t.removeClass("perc-site-map-box-over")},drop:function(v,w){var z=w.draggable.hasClass("perc-listing-category-PAGE");var t=d(this);t.removeClass("perc-site-map-box-over");var y=JSON.parse(t.attr("data"));if(z){h.onAssignLandingPage(w.draggable,y)}else{var x=JSON.parse(w.draggable.attr("data"));h.onMove(x.id,x.parentId,x.index,y.id,-1)}}});return n},truncateSectionTitle:function(f){if(f.length<=this.MAX_SECTION_TITLE_LENGTH){return f}var e=this.MAX_SECTION_TITLE_LENGTH-3;return f.substr(0,e)+"..."},addNodeButtons:function(k,n,q){var t=this;var v=d("<div></div>").addClass("perc-site-map-node-buttons");k.append(v);var f=d(".perc-site-map-sitetitle").text();var e;if(q>1){e=this.CONFIG_BUTTON_IMAGE}else{e=this.CONFIG_BUTTON_IMAGE_STANDALONE}var h=q>1?this.onConfig:this.onSiteEdit;var j=this.createImageButton(e,I18N.message("perc.ui.sitemap.tooltip@Configure Section"),h,{sectionId:n.id,context:this,site:f},"level_"+q);j.attr("id",n.id+"_config");j.addClass("perc-site-map-config-button");v.append(j);if(q>1){var p=this.createImageButton(this.DELETE_BUTTON_IMAGE,I18N.message("perc.ui.sitemap.tooltip@Remove section from Navigation"),this.onDelete,{sectionId:n.id,context:t},"level_"+q);p.attr("id",n.id+"_delete");p.addClass("perc-site-map-delete-button");v.append(p)}},addNodeCountArea:function(h,k,p){var v=this;if(k.sectionType==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.EXTERNAL_LINK){var e=d("<div></div>").addClass("perc-site-map-externallink").append("External Link");h.append(e)}else{if(k.sectionType==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){var j=d("<div></div>").addClass("perc-site-map-sectionlink").append("Section Link");h.append(j)}else{var t=d("<div></div>").addClass("perc-site-map-nodecount");h.append(t);var f=d("<div></div>").addClass("perc-site-map-pagecount");t.append(f);var q=d("<img/>").attr("src",this.getImageSrc(this.ARROW_OFF_IMAGE));f.append(q);var n=this.convertCXFArray(k.childIds).length;f.append(d('<span value="'+n+'"></span>').text(n));t.bind("click.level_"+p,{sectionId:k.id},function(w){v.onNodeCountClick(w)})}}},createImageButton:function(p,n,f,k,h){var e=this;var j=d("<img/>").attr("src",this.getImageSrc(p)).attr("alt",n).attr("title",n).bind("click."+h,k,f).bind("mouseenter."+h,function(q){d(this).attr("src",e.getImageSrc(p,true))}).bind("mouseleave."+h,function(q){d(this).attr("src",e.getImageSrc(p))});return j},expandSections:function(e){if(e==null||e.length==0){return}var h=this;var f=[];d.extend(f,e);f.shift();this.expandSection(e[0],function(){h.expandSections(f)})},expandSection:function(x,n){var y=this;var t=d("#"+x);var q=t.metadata({type:"attr",name:"data"});var v=parseInt(q.level);var j=t.hasClass("perc-site-map-expanded");if(!j){d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);var w=d("#perc_level_"+v+" .perc-site-map-nodes .perc-site-map-expanded");if(w.length==1){this.collapseSection(w.attr("id"))}t.addClass("perc-site-map-expanded");var h=t.find(".perc-site-map-pagecount img");h.attr("src",this.getImageSrc(this.ARROW_ON_IMAGE));y.removeLevel(v+1);var f=y.addLevel(q.id);var e=f.children(".perc-site-map-nodes");var k=y.convertCXFArray(q.childIds);var p=k.length;if(p>0){var z=d("<div></div>").addClass("perc-site-map-node-bottomline").append(d("<img/>").attr("src",y.getImageSrc(y.LINE_IMAGE)).attr("width","2")).hide();t.append(z);d.Perc_SectionServiceClient.getChildren(y.getSectionObject(t),function(A,F,E){if(A==d.PercServiceUtils.STATUS_SUCCESS){var C=y.convertCXFArray(E.SiteSection);var D=C.length;for(var B=0;B<D;B++){var G=C[B];y.addSectionToLevel(y.createSection(G,v+1,x,B),v+1)}y.layoutLevel(v);y.layoutLevel(v+1);if(typeof(n)=="function"){n()}d.unblockUI()}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:E})}})}else{y.adjustLevelWidths();d.unblockUI()}}},getSectionObject:function(f){var e=f.metadata({type:"attr",name:"data"});return{SiteSection:{id:e.id,title:e.title,folderPath:e.folderPath,childIds:e.childIds}}},convertCXFArray:function(e){if(typeof(e)=="undefined"){return[]}if(typeof(e)!="object"){return[e]}return e},collapseSection:function(j){var f=this;var k=d("#"+j);var n=k.hasClass("perc-site-map-expanded");if(n){k.removeClass("perc-site-map-expanded");k.children(".perc-site-map-node-bottomline").remove();var h=k.find(".perc-site-map-pagecount img");h.attr("src",this.getImageSrc(this.ARROW_OFF_IMAGE));var e=parseInt(k.metadata({type:"attr",name:"data"}).level);f.removeLevel(e+1);f.handleMoveActionItemState()}},onDropAccept:function(k,n){var e=d(k);var j=d(n[0]);var v=j.data("spec");if(j.hasClass("perc-listing-category-PAGE")&&e.hasClass("perc-site-map-box")){var q=JSON.parse(e.attr("data"));if(q.sectionType&&q.sectionType!=d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION){return false}var t=(v.path.split("/"))[2];if(d.PercNavigationManager.getSiteName()!=t){return false}return true}if(!j.hasClass("perc-site-map-box")){return false}try{var q=JSON.parse(e.attr("data"));var h=JSON.parse(j.attr("data"));if(q.sectionType&&q.sectionType!=d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION){return false}if(typeof(q.targetId)!="undefined"){q.parentId=q.targetId}if(typeof(q.parentId)=="undefined"){return false}if(q.parentId==h.id){return false}if(q.index==0){return true}var p=this.getSectionParentChain(q.parentId);return(d.inArray(h.id,p)==-1)}catch(f){return false}},onNodeCountClick:function(e){var f=this;var h=d("#"+e.data.sectionId);var j=h.hasClass("perc-site-map-expanded");if(j){f.collapseSection(e.data.sectionId)}else{f.expandSection(e.data.sectionId)}},onSiteEdit:function(e){var f=e.data.context;var h=e.data.sectionId;f.editSiteSectionDialog.open(e.data.site,function(w,k){if(w=="ok"){var q={};d.each(k,function(){q[this.name]=this.value});var t=q.writePrincipals;var p=[];if(t){p=t.split(",")}var x=[];for(u=0;u<p.length;u++){x[u]={name:p[u],type:"USER"}}var j=(typeof(q["perc-enable-site-security"])!="undefined");var n=(typeof(q["perc-enable-canonical-url"])!="undefined");var y=(typeof(q["perc-replace-canonical-tags"])!="undefined");var v={SiteProperties:{id:q.site_id,homePageLinkText:q.page_title_link,name:q.site_hostname,description:q.site_desc,folderPermission:{accessLevel:q["perc-site-folder-permission"],writePrincipals:x},loginPage:q["perc-site-login-page"],registrationConfirmationPage:q["perc-site-registration-confirmation-page"],resetRequestPasswordPage:q["perc-site-reset-pw-request-page"],resetPage:q["perc-site-reset-password-page"],isSecure:j,cssClassNames:q["perc-site-navigation-cssclassnames"],defaultFileExtention:q["perc-site-pagefile-extention-default"],isCanonical:n,siteProtocol:q["perc-site-protocol"],defaultDocument:q["perc-site-default-document"],canonicalDist:q["perc-canonical-url-dist"],isCanonicalReplace:y}};d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.PercSiteService.updateSiteProperties(v,function(z,A){if(z==d.PercServiceUtils.STATUS_SUCCESS){if(A.SiteProperties.pubServersChanged){d.unblockUI();d.perc_utils.alert_dialog({title:"Warning",content:"Your publishing location has been changed as a result of renaming your site; you may need to modify your web server configuration.",okCallBack:function(){d.PercNavigationManager.goToLocation(d.PercNavigationManager.VIEW_SITE_ARCH,q.site_hostname)}})}else{d.PercNavigationManager.goToLocation(d.PercNavigationManager.VIEW_SITE_ARCH,q.site_hostname)}}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:A})}})}})},onConfig:function(e){var f=e.data.context;var j=d("#"+e.data.sectionId);var h=j.metadata({type:"attr",name:"data"}).sectionType;if(h==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){f.editSectionLink(e)}else{if(h==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.EXTERNAL_LINK){f.editExternalLink(e)}else{f.editSection(e)}}},editSection:function(e){var f=e.data.context;var h=e.data.sectionId;f.editSectionDialog.open(e.data.sectionId,function(t,n){if(t=="ok"){var k={};d.each(n,function(){k[this.name]=this.value});var v=k.writePrincipals;var p=[];if(v){p=v.split(",")}var q=[];for(u=0;u<p.length;u++){q[u]={name:p[u],type:"USER"}}var j={SiteSectionProperties:{id:h,title:k.section_name,folderName:k.page_url,target:k["perc-section-target"],folderPermission:{accessLevel:k["perc-section-folder-permission"],writePrincipals:q},requiresLogin:k.requiresLogin,allowAccessTo:k["perc-group-name-allowed"],cssClassNames:k["perc-section-navigation-cssclassnames"]}};d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.Perc_SectionServiceClient.edit(j,function(w,x){f.afterEditSectionCallback(w,x,e)})}})},editSectionLink:function(q){var v=q.data.context;var j=d("#"+q.data.sectionId);var h=j.metadata({type:"attr",name:"data"});var n=parseInt(j.metadata({type:"attr",name:"data"}).level);var t=d("#perc_level_"+n).metadata({type:"attr",name:"data"}).parentId;var k=d(".perc-site-map-sitetitle").text();var e=q.data.sectionId.split("_")[0];var f=j.metadata({type:"attr",name:"data"}).displayTitlePath;var p=I18N.message("perc.ui.sitemap.editsectionlink.dlgtitle@Edit Section Link");d.PercEditSectionLinksDialog().open(h,f,k,p,function(z,y){if(z=="ok"){var w={};d.each(y,function(){w[this.name]=this.value});if(q.data.sectionId==w["perc-section-link-targetid"]||q.data.sectionId.split("_")[0]==w["perc-section-link-targetid"]){d.unblockUI();return}var A=w["perc-section-link-targetid"];if(v.isChild(t,A)){v.displayDuplicateSectionMessage();return}else{var x={UpdateSectionLink:{oldSectionId:q.data.sectionId,newSectionId:w["perc-section-link-targetid"],parentSectionId:t}};d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.Perc_SectionServiceClient.updateSectionLink(x,function(B,C){v.afterEditSectionCallback(B,C,q)})}}})},editExternalLink:function(e){var h=e.data.context;var k=e.data.sectionId;var p=d("#"+e.data.sectionId);var j=p.metadata({type:"attr",name:"data"});var q=d(".perc-site-map-sitetitle").text();var f=h.getParentPath(e.data.sectionId);var n=I18N.message("perc.ui.sitemap.editexternallink.dlgtitle@Edit External Link");d.PercEditSectionLinksDialog().open(j,f,q,n,function(x,v){if(x=="ok"){var t={};d.each(v,function(){t[this.name]=this.value});var w={CreateExternalLinkSection:{externalUrl:t["perc-external-link-url"],linkTitle:t["perc-external-link-text"],folderPath:j.folderPath,sectionType:j.sectionType,target:t["perc-external-link-target"],cssClassNames:t["perc-external-link-navigation-cssclassnames"]}};d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.Perc_SectionServiceClient.updateExternalLink(k,w,function(y,z){h.afterEditSectionCallback(y,z,e)})}})},afterEditSectionCallback:function(n,p,v){var w=v.data.context;var k=v.data.sectionId;var t=d("#"+k);var q=JSON.parse(d("#"+k).attr("data"));if(n==d.PercServiceUtils.STATUS_SUCCESS){if(p.SiteSection.sectionType==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){var e=this.getExpansionState();var h=d(window).scrollTop();d.Perc_SectionServiceClient.clearCache();var j=d(".perc-site-map-sitetitle").text();w.load(j,true,function(){w.expandSections(e);w.handleMoveActionItemState();window.setTimeout(function(){d(window).scrollTop(h)},200);w.fireOnChange();d.unblockUI()});return}var f=d("#"+k+" div.perc-site-map-sectiontitle").text();var x=w.getParentPath(k);d("#"+k+" div.perc-site-map-sectiontitle").text(w.truncateSectionTitle(p.SiteSection.title+"")).attr("title",p.SiteSection.title).attr("alt",p.SiteSection.title);w.updateSectionData(t,p);if(p.SiteSection.sectionType==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION){d("[id*='"+k+"_']").each(function(){d(this).find("div.perc-site-map-sectiontitle").text(w.truncateSectionTitle(p.SiteSection.title+"")).attr("title",p.SiteSection.title).attr("alt",p.SiteSection.title)})}if(f!=p.SiteSection.title){d(".perc-site-map-sectionlink").parents(".perc-site-map-node").each(function(){var y=d(this).metadata({type:"attr",name:"data"}).displayTitlePath;if(typeof(y)!="undefined"){var A=x+"/"+f;var z=x+"/"+p.SiteSection.title;d(this).metadata({type:"attr",name:"data"}).displayTitlePath=y.replace(A,z)}})}d.Perc_SectionServiceClient.clearCache("getChildren");w.handleMoveActionItemState();w.layoutAll();w.fireOnChange();d.unblockUI();if(p.SiteSection.sectionType==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION){d.PercRedirectHandler.createRedirect(q.folderPath,p.SiteSection.folderPath,"section").fail(function(y){d.unblockUI();d.perc_utils.alert_dialog({title:"Redirect creation error",content:y,okCallBack:d.noop})}).done(d.noop)}}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:p})}},updateSectionData:function(t,k){var w=this;var p=JSON.parse(t.attr("data"));d.extend(p,k.SiteSection);t.attr("data",JSON.stringify(p));var h=t.find(".perc-site-map-box");var n=JSON.parse(h.attr("data"));d.extend(n,k.SiteSection);h.attr("data",JSON.stringify(n));var j=t.metadata({type:"attr",name:"data"});d.extend(j,k.SiteSection);var f=t.hasClass("perc-site-map-expanded");if(f){var v=parseInt(t.metadata({type:"attr",name:"data"}).level);var q=d("#perc_level_"+(v+1));var e=q.children(".perc-site-map-nodes").children(".perc-site-map-node");e.each(function(){var y=d(this);var x=JSON.parse(d(this).attr("data"));d.Perc_SectionServiceClient.getSection(x.id,function(A,z){if(A==d.PercServiceUtils.STATUS_SUCCESS){w.updateSectionData(y,z)}else{d.perc_utils.debug(z)}})})}},onMoveWithDialog:function(){var h=this;var j=d(".perc-site-map-box-selected");if(j.length>0){var n=JSON.parse(j.attr("data"));var f=JSON.parse(j.parent().attr("data"));var e=d(".perc-site-map-sitetitle").text();var k=I18N.message("perc.ui.sitemap.movesection.label@message",[f.title]);d.PercSectionTreeDialog.open(e,n.id,k,I18N.message("perc.ui.sitemap.movesection.title@Move Section"),"Move",function(p){h.onMove(n.id,n.parentId,n.index,p,-1)})}},isChild:function(h,f){var j=[];var e=d("#"+h);var k=e.metadata({type:"attr",name:"data"});if(k.childIds){d.each(k.childIds,function(){j.push(this.split("_")[0])})}f=f.split("_")[0];return d.inArray(f,j)>-1},displayDuplicateSectionMessage:function(){d.unblockUI();var f=I18N.message("perc.ui.sitemap.duplicatesection@Duplicate section not allowed");var e=I18N.message("perc.ui.labels@Error");d.perc_utils.alert_dialog({title:e,content:f})},onAssignLandingPage:function(e,k){var q=this;var f=e.data("spec");var h=f.id;var n=f.name;var j=k.name;var p=k.id;var t=k.folderPath;d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.Perc_SectionServiceClient.replaceLandingPage(h,p,function(w,v){if(w==d.PercServiceUtils.STATUS_SUCCESS){q.fireOnChange();d.unblockUI();var z=v.ReplaceLandingPage;var x=[n,j,z.newLandingPageName,z.oldLandingPageName,t];var y=d("<div><div style='float:left;'>"+I18N.message("perc.ui.sitemap.assign.landing.page.label@message",x)+"</div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({title:I18N.message("perc.ui.sitemap.assign.landing.page.title@Landing Page Assigned"),resizable:false,modal:true,percButtons:{Ok:{click:function(){y.remove()},id:"perc-landing-page-assign-info-ok"}},id:"perc-landing-page-assign-info",width:400})}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:v})}})},onMove:function(p,j,h,t,w){var v=this;var k=(j==t);var q=(k&&(h<w))?w-1:w;var n={MoveSiteSection:{sourceParentId:j,sourceId:p,targetId:t,targetIndex:q}};var e=this.getExpansionState();var f=d(window).scrollTop();d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);d.Perc_SectionServiceClient.move(n,function(A,C,H){if(A==d.PercServiceUtils.STATUS_SUCCESS){var F=d("#"+p);var y=d("#"+j);var z=d("#"+t);function B(){var L=JSON.parse(y.attr("data")).parentId;d.Perc_SectionServiceClient.clearCache("getChildren");if(k){var N=z.metadata({type:"attr",name:"data"});var K=F.metadata({type:"attr",name:"data"}).level;var M=d("#perc_level_"+K);var O=M.children(".perc-site-map-nodes");if(h>w){var J=O.children(".perc-site-map-node:eq("+w+")");J.before(F);d.extend(N,H.SiteSelection);z.attr("data",JSON.stringify(N));O.find(".perc-site-map-node .perc-site-map-box").each(function(P){var Q=JSON.parse(d(this).attr("data"));d.extend(Q,{index:P});d(this).attr("data",JSON.stringify(Q))});v.handleMoveActionItemState();v.layoutAll()}else{if((h<w)&&(h!=(w-1))){var J=O.children(".perc-site-map-node:eq("+(w-1)+")");J.after(F);d.extend(N,H.SiteSelection);z.attr("data",JSON.stringify(N));O.find(".perc-site-map-node .perc-site-map-box").each(function(P){var Q=JSON.parse(d(this).attr("data"));d.extend(Q,{index:P});d(this).attr("data",JSON.stringify(Q))});v.handleMoveActionItemState();v.layoutAll()}}d.unblockUI()}else{var I=d(".perc-site-map-sitetitle").text();v.load(I,true,function(){v.expandSections(e);v.handleMoveActionItemState();window.setTimeout(function(){d(window).scrollTop(f)},200);v.fireOnChange();d.unblockUI()})}}var D=JSON.parse(F.attr("data"));var x=D.folderPath;var G=JSON.parse(z.attr("data"));var E=G.folderPath+x.substring(x.lastIndexOf("/"));d.PercRedirectHandler.createRedirect(x,E,"section").fail(function(I){d.unblockUI();d.perc_utils.alert_dialog({title:"Redirect creation error",content:I,okCallBack:function(){B()}})}).done(function(){B()})}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:C})}})},onDelete:function(p){var v=p.data.context;var k=d("#"+p.data.sectionId);var n=parseInt(k.metadata({type:"attr",name:"data"}).level);var q=d("#perc_level_"+n).metadata({type:"attr",name:"data"}).parentId;var j=d("#"+q);var f=JSON.parse(k.attr("data")).folderPath;var w=f.replace("//Sites",d.perc_paths.SITES_ROOT);var h=JSON.parse(k.attr("data")).title;var t=k.metadata({type:"attr",name:"data"}).sectionType;if(t==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){v.deleteSectionLink(p)}else{if(t==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.EXTERNAL_LINK){v.deleteExternalLink(p)}else{var e=d('<div class="perc-remove-section-confirm-container"><div>Do you want to remove the section from the Navigation or delete the section from the site entirely?</div><br/><div class="perc-remove-section-option-container"><div class="perc-remove-section-option-row"><input type="radio" name="perc-remove-section-option" value="remove-section" checked="checked"/><label for="remove-section">Convert section to folder and remove section and all sub-sections from the Navigation.</label></div><div style="clear:both"/><div class="perc-remove-section-option-row"><input type="radio" name="perc-remove-section-option" value="delete-section"/><label for="delete-section">Delete the section and all sub-sections from the site. All pages and content will be permanently deleted from the system.</label></div><div style="clear:both"/></div></div>');e.find(".perc-delete-section-text").click(function(){var x=d(this).attr("for");e.find("input[value="+x+"]").prop("checked",true)});d.perc_utils.confirm_dialog({id:"perc-delete-section-link",title:"Delete Section Link",question:e,success:function(){var x=d("input:radio[name ='perc-remove-section-option']:checked").val();if(x=="delete-section"){d.PercPathService.deleteSection(w,h,function(){v.afterDeleteCallback(p,true)})}else{d.Perc_SectionServiceClient.convertSectionToFolder(p.data.sectionId,function(y,z){if(!y){d.perc_utils.alert_dialog({title:"Error deleting section",content:z})}v.afterDeleteCallback(p,false)})}},width:500})}}},afterDeleteCallback:function(x,t){var B=x.data.context;var p=d("#"+x.data.sectionId);var v=p.metadata({type:"attr",name:"data"});var A=v.sectionType;if((A==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION&&d("[id*='"+x.data.sectionId+"_']").length>0)||A==d.Perc_SectionServiceClient.PERC_SECTION_TYPE.SECTION_LINK){var e=this.getExpansionState();var f=d(window).scrollTop();d.Perc_SectionServiceClient.clearCache();var h=d(".perc-site-map-sitetitle").text();B.load(h,true,function(){B.expandSections(e);B.handleMoveActionItemState();window.setTimeout(function(){d(window).scrollTop(f)},200);B.fireOnChange();d.unblockUI()});if(t){d.PercRedirectHandler.createRedirect(v.folderPath,"","section").fail(function(C){d.perc_utils.alert_dialog({title:"Redirect creation error",content:C,okCallBack:function(){}})}).done(function(){})}return}var q=parseInt(p.metadata({type:"attr",name:"data"}).level);var z=d("#perc_level_"+q).metadata({type:"attr",name:"data"}).parentId;var k=d("#"+z);B.collapseSection(x.data.sectionId);p.remove();var j=k.find(".perc-site-map-pagecount span");var n=parseInt(j.text())-1;j.attr("value",n).text(n);if(n==0){k.children(".perc-site-map-node-bottomline").remove()}var y=k.metadata({type:"attr",name:"data"});y.childIds=B.convertCXFArray(y.childIds);var w=d.inArray(x.data.sectionId,y.childIds);if(w>-1){y.childIds.splice(w,1);k.attr("data",JSON.stringify(y))}d.Perc_SectionServiceClient.clearCache("getChildren",z);d.Perc_SectionServiceClient.clearCache("getChildren",x.data.sectionId);B.handleMoveActionItemState();B.layoutAll();B.fireOnChange()},deleteSectionLink:function(f){var h=f.data.context;var n=d("#"+f.data.sectionId);var e=parseInt(n.metadata({type:"attr",name:"data"}).level);var k=d("#perc_level_"+e).metadata({type:"attr",name:"data"}).parentId;var j=n.metadata({type:"attr",name:"data"}).title;d.perc_utils.confirm_dialog({id:"perc-delete-section-link",title:"Delete Section Link",question:"Delete section link "+j+"?",success:function(){d.Perc_SectionServiceClient.deleteSectionLink(f.data.sectionId,k,function(q,p){if(q==d.PercServiceUtils.STATUS_SUCCESS){h.afterDeleteCallback(f,true)}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:data})}})},width:500})},deleteExternalLink:function(e){var f=e.data.context;var j=d("#"+e.data.sectionId);var h=j.metadata({type:"attr",name:"data"}).title;d.perc_utils.confirm_dialog({id:"perc-delete-external-link",title:"Delete External Link",question:"Delete external link "+h+"?",success:function(){d.Perc_SectionServiceClient.deleteSection(e.data.sectionId,function(n,k){if(n==d.PercServiceUtils.STATUS_SUCCESS){f.afterDeleteCallback(e,false)}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:data})}})},width:500})},onAddSection:function(f){var h=f.data.context;var e=d("#"+f.data.parentSectionId);var j=e.metadata({type:"attr",name:"data"}).folderPath;h.newSectionDialog.open(h.options.site,f.data.parentSectionId,function(t,q){if(t=="ok"){var k={};d.each(q,function(){k[this.name]=this.value});d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);if(k["perc-section-type"]=="section"){var v="index";d.PercSiteService.getSiteProperties(h.options.site,function(x,w){if(x==d.PercServiceUtils.STATUS_SUCCESS){var z=w.SiteProperties.defaultFileExtention;if(z){v+="."+z}}else{d.perc_utils.alert_dialog({title:"Error",content:w})}var y={CreateSiteSection:{pageName:v,pageTitle:k.section_name,templateId:k.template,pageUrlIdentifier:k.page_url,pageLinkTitle:k.section_name,folderPath:j,copyTemplates:false,sectionType:k["perc-section-type"]}};d.Perc_SectionServiceClient.create(y,function(A,B){h.addNewSectionCallback(A,B,f)})})}else{if(k["perc-section-type"]=="externallink"){var p={CreateExternalLinkSection:{externalUrl:k["perc-external-link-url"],linkTitle:k["perc-external-link-text"],folderPath:j,sectionType:k["perc-section-type"]}};d.Perc_SectionServiceClient.create(p,function(w,x){h.addNewSectionCallback(w,x,f)})}else{if(k["perc-section-type"]=="sectionlink"){var n=k["perc-section-link-targetid"];if(h.isChild(f.data.parentSectionId,n)){h.displayDuplicateSectionMessage();return}else{d.Perc_SectionServiceClient.createSectionLink(k["perc-section-link-targetid"],f.data.parentSectionId,function(w,x){h.addNewSectionCallback(w,x,f)})}}else{if(k["perc-section-type"]=="convertfolder"){var p={CreateSectionFromFolderRequest:{sourceFolderPath:k["perc-convert-folder-path"],pageName:k["perc-landing-page"],parentFolderPath:j,sectionType:k["perc-section-type"]}};d.Perc_SectionServiceClient.convertFolder(p,function(w,x){h.addNewSectionCallback(w,x,f)})}}}}}})},addNewSectionCallback:function(j,k,p){var t=p.data.context;var h=d("#"+p.data.parentSectionId);var e=h.metadata({type:"attr",name:"data"}).folderPath;if(j==d.PercServiceUtils.STATUS_SUCCESS){var q=h.metadata({type:"attr",name:"data"});q.childIds=t.convertCXFArray(q.childIds);t.addSectionToLevel(t.createSection(k.SiteSection,p.data.level,p.data.parentSectionId,q.childIds.length),p.data.level);q.childIds.push(k.SiteSection.id);h.attr("data",JSON.stringify(q));var f=h.find(".perc-site-map-pagecount span");var n=parseInt(f.text())+1;f.attr("value",n).text(n);if(n==1){var v=d("<div></div>").addClass("perc-site-map-node-bottomline").append(d("<img/>").attr("src",t.getImageSrc(t.LINE_IMAGE)).attr("width","2")).hide();h.append(v)}d.Perc_SectionServiceClient.clearCache("getChildren");t.handleMoveActionItemState();t.layoutAll();t.fireOnChange();d.unblockUI()}else{d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:k})}},getSectionParentChain:function(h,f){if(typeof(f)=="undefined"||f==null){f=new Array()}var j=d("#"+h);var e=j.metadata({type:"attr",name:"data"});if(typeof(e.parentId)!="undefined"&&e.parentId!=null&&e.parentId.length>0){this.getSectionParentChain(e.parentId,f);f.push(e.parentId)}return f},getParentPath:function(e){if(!e){return""}var h=this.getSectionParentChain(e);var f="";d.each(h,function(){f+="/"+d("#"+this).find(".perc-site-map-sectiontitle").attr("title")});return f},getExpansionState:function(){var e=new Array();d(".perc-site-map-expanded").each(function(){e.push(d(this).attr("id"))});return e}});function b(){var e=d(".perc-site-map-sitetitle").text();d.PercBlockUI();d.perc_pagemanager.delete_site(e,function(){dialog.remove();var f=d(".perc-site-map-sitetitle").text();var h={type:"site",name:f};var j=d.perc_finder();j.fireActionEvent(j.ACTIONS.DELETE,h);setTimeout(function(){d.PercDirtyController.setDirty(false);d.PercNavigationManager.goToLocation(d.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(f){d.unblockUI();c(f)})}function c(n,f,q){var h=d.perc_utils;var j=d(".perc-site-map-sitetitle").text();var p="<span id='perc-delete-warn-msg'>";var k="</span>";var e="perc-finder-delete-error-open";var t="Delete Site";var v=d.PercServiceUtils.extractDefaultErrorMessage(n);if(n.responseText.indexOf("site.isPublishing")>0){h.alert_dialog({id:e,title:t,content:p+I18N.message("perc.ui.deletesiteedialog.warning@SiteTag")+" "+j+" "+I18N.message("perc.ui.deletesiteedialog.warning@SitePublishing")+k})}else{if(v!=""){h.alert_dialog({id:e,title:t,content:p+v+k})}else{h.alert_dialog({id:e,title:t,content:p+I18N.message("perc.ui.deletesiteedialog.warning@GenericText")+k})}}dialog.remove()}})(jQuery);(function(e){var d=e.perc_utils;var c=20;e.perc_browser=function(n){var H={customRootSite:"",new_asset_option:true,initial_val:"",on_save:function(){},selectable_object:"folder",new_folder_opt:true,displayed_containers:"Assets",selection_types:function(){return true},asset_name:I18N.message("perc.ui.saveasdialog.label@Save as"),location:I18N.message("perc.ui.saveasdialog.label@Location:"),title:I18N.message("perc.ui.saveasdialog.title@Save As"),no_name_error:I18N.message("perc.ui.saveasdialog.error@Name required"),save_class:"perc-save"};e.extend(H,n);var x=H.selection_types;if(!e.isFunction(x)){x=function(J){return d.elem(J,H.selection_types)}}var p={All:[""],Sites:["",e.perc_paths.SITES_ROOT_NO_SLASH],Assets:["",e.perc_paths.ASSETS_ROOT_NO_SLASH],CustomSite:["",e.perc_paths.SITES_ROOT_NO_SLASH,"<sitename>"]};var h=p[H.displayed_containers];if(typeof(h[2])!="undefined"){h[2]=h[2].replace("<sitename>",H.customRootSite)}var j=H.selectable_object=="leaf"||H.selectable_object=="all";var E=H.selectable_object=="folder"||H.selectable_object=="all";var D=window.parent.parent.jQuery("<div><p id='perc-saveas-dialog-error' class='perc-field-error' />"+d.input(H.asset_name,"asset-name","perc-saveas-dialog-assetname",c)+d.select(H.location,"location","perc-saveas-dialog-location",c)+"<div id='perc-saveas-dialog-direc'></div></div>");var q=D.find("#perc-saveas-dialog-direc");var y=D.find("#perc-saveas-dialog-location").change(function(){var J=this.value.split("/");B(J)});var w=D.find("#perc-saveas-dialog-assetname");var F=null;var C=null;var z=null;w.val(H.initial_val);if(!H.new_asset_option){w.attr("readonly","readonly")}D.perc_dialog({modal:true,title:H.title,resizable:false,width:320,zIndex:400000000,buttons:{},percButtons:{Save:{click:function(){A()},id:"perc-save-as-save"},Cancel:{click:function(){D.remove()},id:"perc-save-as-cancel"}},id:"perc-save-as-dialog"});if(H.new_folder_opt){D.parent().find("#perc-saveas-dialog-new-folder").click(function(){z()})}else{D.parent().find("#perc-saveas-dialog-new-folder").remove()}B(h);function I(J){D.remove();alert(J)}function B(J){z=k(d.acop(J));if(!H.new_asset_option){w.val("")}G(d.acop(J));f(d.acop(J))}function f(K){q.empty();e.perc_pathmanager.open_path(K,true,J,t);function J(L){e.each(L.PathItem,function(){if(x(this["type"])&&this["path"]!=e.perc_paths.SEARCH_ROOT+"/"&&this["path"]!=e.perc_paths.DESIGN_ROOT+"/"){b(q,v(this))}})}}function G(K){var M=D.find("#perc-saveas-dialog-location");M.attr("size","2");y.empty();var J="";F=[];for(var L=0;L<h.length-1;L++){F.push(K.shift())}while(K.length){F.push(K.shift());J+="&nbsp;&nbsp;";y.append(e("<option  style = 'color:#000' value='"+F.join("/")+"'></option>").append(J+F[F.length-1]))}y.val(F.join("/"));M.attr("size","1")}function k(J){return function(){d.prompt_dialog({title:I18N.message("perc.ui.saveasdialog.title@New Folder"),question:I18N.message("perc.ui.saveasdialog.text@New folder prompt"),yes:I18N.message("perc.ui.common.label@Save"),no:I18N.message("perc.ui.common.label@Cancel"),success:function(K){e.perc_pathmanager.add_folder(d.acat(J,[K]),function(){B(d.acop(J))},t)}})}}function t(J){e("#perc-saveas-dialog-error").text(J).effect("pulsate",{times:1})}function A(){var J=w.val();if(!J||J==""){t(H.no_name_error);return}if(!H.new_asset_option){H.on_save(C,function(){D.remove()},t)}else{H.on_save(d.acop(F),J,function(){D.remove()},t)}}function v(K){var P=d.extract_path_end(K.path);var J=(K.type=="Folder")?"a":"z";var N=d.extract_path(K.path);var O=d.choose_icon(K.type,K.icon,N);var L=e("<a href='#'/>").addClass("mcol-listing").attr("id","perc-saveas-dialog-listing"+d.path_id(N)).append(e("<img src='"+O+"' style='float:left'></img>")).append(K.name).data("name",P).data("tag",J+(K.name+"").toLowerCase());var M="perc-saveas-dialog-selected";function Q(){L.siblings("."+M).removeClass(M);L.addClass(M);if(K.leaf){w.val(K.name);C=K}else{F=d.acop(N)}}if(K.leaf){if(j){L.click(Q);L.dblclick(function(){L.click();e("#perc-saveas-dialog-save-button").click()})}}else{if(E){L.click(Q)}L.dblclick(function(){B(N)})}return L}};function b(h,j){var f=null;h.prepend(j);h.children().each(function(){if(e.data(this,"tag")>e.data(j.get(0),"tag")){f=this;return false}return true});if(f){e(f).before(j)}else{h.append(j)}}})(jQuery);
/* jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*
 * jQuery Form Plugin
 * version: 2.60
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(d){d.fn.ajaxSubmit=function(E){if(!this.length){b("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof E=="function"){E={success:E}}var t=this.attr("action");var f=(typeof t==="string")?d.trim(t):"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}f=f||window.location.href||"";E=d.extend(true,{url:f,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},E);var F={};this.trigger("form-pre-serialize",[this,E,F]);if(F.veto){b("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(E.beforeSerialize&&E.beforeSerialize(this,E)===false){b("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var j,B,z=this.formToArray(E.semantic);if(E.data){E.extraData=E.data;for(j in E.data){if(E.data[j] instanceof Array){for(var w in E.data[j]){z.push({name:j,value:E.data[j][w]})}}else{B=E.data[j];B=d.isFunction(B)?B():B;z.push({name:j,value:B})}}}if(E.beforeSubmit&&E.beforeSubmit(z,this,E)===false){b("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[z,this,E,F]);if(F.veto){b("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var e=d.param(z);if(E.type.toUpperCase()=="GET"){E.url+=(E.url.indexOf("?")>=0?"&":"?")+e;E.data=null}else{E.data=e}var D=this,y=[];if(E.resetForm){y.push(function(){D.resetForm()})}if(E.clearForm){y.push(function(){D.clearForm()})}if(!E.dataType&&E.target){var C=E.success||function(){};y.push(function(n){var k=E.replaceTarget?"replaceWith":"html";d(E.target)[k](n).each(C,arguments)})}else{if(E.success){y.push(E.success)}}E.success=function(G,n,H){var v=E.context||E;for(var q=0,k=y.length;q<k;q++){y[q].apply(v,[G,n,H||D,D])}};var p=d("input:file",this).length>0;var h="multipart/form-data";var x=(D.attr("enctype")==h||D.attr("encoding")==h);if(E.iframe!==false&&(p||E.iframe||x)){if(E.closeKeepAlive){d.get(E.closeKeepAlive,A)}else{A()}}else{d.ajax(E)}this.trigger("form-submit-notify",[this,E]);return this;function A(){var q=D[0];if(d(":input[name=submit],:input[id=submit]",q).length){alert('Error: Form elements must not have name or id of "submit".');return}var K=d.extend(true,{},d.ajaxSettings,E);K.context=K.context||K;var N="jqFormIO"+(new Date().getTime()),I="_"+N;var v=d('<iframe id="'+N+'" name="'+N+'" src="'+K.iframeSrc+'" />');var J=v[0];v.css({position:"absolute",top:"-1000px",left:"-1000px"});var G={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;v.attr("src",K.iframeSrc)}};var S=K.global;if(S&&!d.active++){d.event.trigger("ajaxStart")}if(S){d.event.trigger("ajaxSend",[G,K])}if(K.beforeSend&&K.beforeSend.call(K.context,G,K)===false){if(K.global){d.active--}return}if(G.aborted){return}var O=false;var R=0;var H=q.clk;if(H){var P=H.name;if(P&&!H.disabled){K.extraData=K.extraData||{};K.extraData[P]=H.value;if(H.type=="image"){K.extraData[P+".x"]=q.clk_x;K.extraData[P+".y"]=q.clk_y}}}function Q(){var Y=D.attr("target"),W=D.attr("action");q.setAttribute("target",N);if(q.getAttribute("method")!="POST"){q.setAttribute("method","POST")}if(q.getAttribute("action")!=K.url){q.setAttribute("action",K.url)}if(!K.skipEncodingOverride){D.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(K.timeout){setTimeout(function(){R=true;M()},K.timeout)}var X=[];try{if(K.extraData){for(var Z in K.extraData){X.push(d('<input type="hidden" name="'+Z+'" value="'+K.extraData[Z]+'" />').appendTo(q)[0])}}v.appendTo("body");J.attachEvent?J.attachEvent("onload",M):J.addEventListener("load",M,false);q.submit()}finally{q.setAttribute("action",W);if(Y){q.setAttribute("target",Y)}else{D.removeAttr("target")}d(X).remove()}}if(K.forceSync){Q()}else{setTimeout(Q,10)}var U,V,T=50;function M(){V=J.contentWindow?J.contentWindow.document:J.contentDocument?J.contentDocument:J.document;if(!V||V.location.href==K.iframeSrc){return}J.detachEvent?J.detachEvent("onload",M):J.removeEventListener("load",M,false);var X=true;try{if(R){throw"timeout"}var ab=K.dataType=="xml"||V.XMLDocument||d.isXMLDoc(V);b("isXml="+ab);if(!ab&&window.opera&&(V.body==null||V.body.innerHTML=="")){if(--T){b("requeing onLoad callback, DOM not available");setTimeout(M,250);return}}O=true;G.responseText=V.body?V.body.innerHTML:V.documentElement?V.documentElement.innerHTML:null;G.responseXML=V.XMLDocument?V.XMLDocument:V;G.getResponseHeader=function(ad){var ac={"content-type":K.dataType};return ac[ad]};var aa=/(json|script)/.test(K.dataType);if(aa||K.textarea){var W=V.getElementsByTagName("textarea")[0];if(W){G.responseText=W.value}else{if(aa){var Z=V.getElementsByTagName("pre")[0];var n=V.getElementsByTagName("body")[0];if(Z){G.responseText=Z.textContent}else{if(n){G.responseText=n.innerHTML}}}}}else{if(K.dataType=="xml"&&!G.responseXML&&G.responseText!=null){G.responseXML=L(G.responseText)}}U=k(G,K.dataType,K)}catch(Y){b("error caught:",Y);X=false;G.error=Y;K.error.call(K.context,G,"error",Y);S&&d.event.trigger("ajaxError",[G,K,Y])}if(G.aborted){b("upload aborted");X=false}if(X){K.success.call(K.context,U,"success",G);S&&d.event.trigger("ajaxSuccess",[G,K])}S&&d.event.trigger("ajaxComplete",[G,K]);if(S&&!--d.active){d.event.trigger("ajaxStop")}K.complete&&K.complete.call(K.context,G,X?"success":"error");setTimeout(function(){v.removeData("form-plugin-onload");v.remove();G.responseXML=null},100)}var L=d.parseXML||function(n,W){if(window.ActiveXObject){W=new ActiveXObject("Microsoft.XMLDOM");W.async="false";W.loadXML(n)}else{W=(new DOMParser()).parseFromString(n,"text/xml")}return(W&&W.documentElement&&W.documentElement.nodeName!="parsererror")?W:null};var k=d.httpData||function(aa,Y,X){var W=aa.getResponseHeader("content-type")||"",n=Y==="xml"||!Y&&W.indexOf("xml")>=0,Z=n?aa.responseXML:aa.responseText;if(n&&Z.documentElement.nodeName==="parsererror"){d.error("parsererror")}if(X&&X.dataFilter){Z=X.dataFilter(Z,Y)}if(typeof Z==="string"){if(Y==="json"||!Y&&W.indexOf("json")>=0){Z=d.parseJSON(Z)}else{if(Y==="script"||!Y&&W.indexOf("javascript")>=0){d.globalEval(Z)}}}return Z}}};d.fn.ajaxForm=function(e){if(this.length===0){var f={s:this.selector,c:this.context};if(!d.isReady&&f.s){b("DOM not ready, queuing ajaxForm");d(function(){d(f.s,f.c).ajaxForm(e)});return this}b("terminating; zero elements found by selector"+(d.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(h){if(!h.isDefaultPrevented()){h.preventDefault();d(this).ajaxSubmit(e)}}).bind("click.form-plugin",function(p){var n=p.target;var j=d(n);if(!(j.is(":submit,input:image"))){var h=j.closest(":submit");if(h.length==0){return}n=h[0]}var k=this;k.clk=n;if(n.type=="image"){if(p.offsetX!=undefined){k.clk_x=p.offsetX;k.clk_y=p.offsetY}else{if(typeof d.fn.offset=="function"){var q=j.offset();k.clk_x=p.pageX-q.left;k.clk_y=p.pageY-q.top}else{k.clk_x=p.pageX-n.offsetLeft;k.clk_y=p.pageY-n.offsetTop}}}setTimeout(function(){k.clk=k.clk_x=k.clk_y=null},100)})};d.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};d.fn.formToArray=function(A){var z=[];if(this.length===0){return z}var f=this[0];var p=A?f.getElementsByTagName("*"):f.elements;if(!p){return z}var t,q,k,B,h,x,e;for(t=0,x=p.length;t<x;t++){h=p[t];k=h.name;if(!k){continue}if(A&&f.clk&&h.type=="image"){if(!h.disabled&&f.clk==h){z.push({name:k,value:d(h).val()});z.push({name:k+".x",value:f.clk_x},{name:k+".y",value:f.clk_y})}continue}B=d.fieldValue(h,true);if(B&&B.constructor==Array){for(q=0,e=B.length;q<e;q++){z.push({name:k,value:B[q]})}}else{if(B!==null&&typeof B!="undefined"){z.push({name:k,value:B})}}}if(!A&&f.clk){var w=d(f.clk),y=w[0];k=y.name;if(k&&!y.disabled&&y.type=="image"){z.push({name:k,value:w.val()});z.push({name:k+".x",value:f.clk_x},{name:k+".y",value:f.clk_y})}}return z};d.fn.formSerialize=function(e){return d.param(this.formToArray(e))};d.fn.fieldSerialize=function(f){var e=[];this.each(function(){var p=this.name;if(!p){return}var j=d.fieldValue(this,f);if(j&&j.constructor==Array){for(var k=0,h=j.length;k<h;k++){e.push({name:p,value:j[k]})}}else{if(j!==null&&typeof j!="undefined"){e.push({name:this.name,value:j})}}});return d.param(e)};d.fn.fieldValue=function(n){for(var k=[],h=0,e=this.length;h<e;h++){var j=this[h];var f=d.fieldValue(j,n);if(f===null||typeof f=="undefined"||(f.constructor==Array&&!f.length)){continue}f.constructor==Array?d.merge(k,f):k.push(f)}return k};d.fieldValue=function(e,q){var h=e.name,A=e.type,B=e.tagName.toLowerCase();if(q===undefined){q=true}if(q&&(!h||e.disabled||A=="reset"||A=="button"||(A=="checkbox"||A=="radio")&&!e.checked||(A=="submit"||A=="image")&&e.form&&e.form.clk!=e||B=="select"&&e.selectedIndex==-1)){return null}if(B=="select"){var w=e.selectedIndex;if(w<0){return null}var y=[],f=e.options;var k=(A=="select-one");var x=(k?w+1:f.length);for(var j=(k?w:0);j<x;j++){var p=f[j];if(p.selected){var z=p.value;if(!z){z=(p.attributes&&p.attributes.value&&!(p.attributes.value.specified))?p.text:p.value}if(k){return z}y.push(z)}}return y}return d(e).val()};d.fn.clearForm=function(){return this.each(function(){d("input,select,textarea",this).clearFields()})};d.fn.clearFields=d.fn.clearInputs=function(){return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(f=="text"||f=="password"||e=="textarea"){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};d.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};d.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};d.fn.selected=function(e){if(e===undefined){e=true}return this.each(function(){var f=this.type;if(f=="checkbox"||f=="radio"){this.checked=e}else{if(this.tagName.toLowerCase()=="option"){var h=d(this).parent("select");if(e&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=e}}})};function b(){if(d.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(e)}else{if(window.opera&&window.opera.postError){window.opera.postError(e)}}}}})(jQuery);
/*
 * jQuery blockUI plugin
 * Version 2.31 (06-JAN-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(p){if(/1\.(0|1|2)\.(0|1|2)/.test(p.fn.jquery)||/^1.1/.test(p.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+p.fn.jquery);return}p.fn._fadeIn=p.fn.fadeIn;var e=function(){};var q=document.documentMode||0;var h=p.browser.msie&&((p.browser.version<8&&!q)||q<8);var j=p.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!q;p.blockUI=function(z){f(window,z)};p.unblockUI=function(z){n(window,z)};p.growlUI=function(D,B,C,z){var A=p('<div class="growlUI"></div>');if(D){A.append("<h1>"+D+"</h1>")}if(B){A.append("<h2>"+B+"</h2>")}if(C==undefined){C=3000}p.blockUI({message:A,fadeIn:700,fadeOut:1000,centerY:false,timeout:C,showOverlay:false,onUnblock:z,css:p.blockUI.defaults.growlCSS})};p.fn.block=function(z){return this.unblock({fadeOut:0}).each(function(){if(p.css(this,"position")=="static"){this.style.position="relative"}if(p.browser.msie){this.style.zoom=1}f(this,z)})};p.fn.unblock=function(z){return this.each(function(){n(this,z)})};p.blockUI.version=2.31;p.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4};var d=null;var k=[];function f(C,N){var I=(C==window);var F=N&&N.message!==undefined?N.message:undefined;N=p.extend({},p.blockUI.defaults,N||{});N.overlayCSS=p.extend({},p.blockUI.defaults.overlayCSS,N.overlayCSS||{});var K=p.extend({},p.blockUI.defaults.css,N.css||{});var V=p.extend({},p.blockUI.defaults.themedCSS,N.themedCSS||{});F=F===undefined?N.message:F;if(I&&d){n(window,{fadeOut:0})}if(F&&typeof F!="string"&&(F.parentNode||F.jquery)){var Q=F.jquery?F[0]:F;var X={};p(C).data("blockUI.history",X);X.el=Q;X.parent=Q.parentNode;X.display=Q.style.display;X.position=Q.style.position;if(X.parent){X.parent.removeChild(Q)}}var J=N.baseZ;var U=(p.browser.msie||N.forceIframe)?p('<iframe class="blockUI" style="z-index:'+(J++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+N.iframeSrc+'"></iframe>'):p('<div class="blockUI" style="display:none"></div>');var T=p('<div class="blockUI blockOverlay" style="z-index:'+(J++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var S;if(N.theme&&I){var O='<div class="blockUI blockMsg blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+J+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar blockTitle">'+(N.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>';S=p(O)}else{S=I?p('<div class="blockUI blockMsg blockPage" style="z-index:'+J+';display:none;position:fixed"></div>'):p('<div class="blockUI blockMsg blockElement" style="z-index:'+J+';display:none;position:absolute"></div>')}if(F){if(N.theme){S.css(V);S.addClass("ui-widget-content")}else{S.css(K)}}if(!N.applyPlatformOpacityRules||!(p.browser.mozilla&&/Linux/.test(navigator.platform))){T.css(N.overlayCSS)}T.css("position",I?"fixed":"absolute");if(p.browser.msie||N.forceIframe){U.css("opacity",0)}var H=[U,T,S],W=I?p("body"):p(C);p.each(H,function(){this.appendTo(W)});if(N.theme&&N.draggable&&p.fn.draggable){S.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var E=h&&(!p.boxModel||p("object,embed",I?null:C).length>0);if(j||E){if(I&&N.allowBodyStretch&&p.boxModel){p("html,body").css("height","100%")}if((j||!p.boxModel)&&!I){var M=w(C,"borderTopWidth"),R=w(C,"borderLeftWidth");var G=M?"(0 - "+M+")":0;var L=R?"(0 - "+R+")":0}p.each([U,T,S],function(z,ab){var Y=ab[0].style;Y.position="absolute";if(z<2){I?Y.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+N.quirksmodeOffsetHack+') + "px"'):Y.setExpression("height",'this.parentNode.offsetHeight + "px"');I?Y.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):Y.setExpression("width",'this.parentNode.offsetWidth + "px"');if(L){Y.setExpression("left",L)}if(G){Y.setExpression("top",G)}}else{if(N.centerY){if(I){Y.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}Y.marginTop=0}else{if(!N.centerY&&I){var Z=(N.css&&N.css.top)?parseInt(N.css.top):0;var aa="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+Z+') + "px"';Y.setExpression("top",aa)}}}})}if(F){if(N.theme){S.find(".ui-widget-content").append(F)}else{S.append(F)}if(F.jquery||F.nodeType){p(F).show()}}if((p.browser.msie||N.forceIframe)&&N.showOverlay){U.show()}if(N.fadeIn){var P=N.onBlock?N.onBlock:e;var B=(N.showOverlay&&!F)?P:e;var A=F?P:e;if(N.showOverlay){T._fadeIn(N.fadeIn,B)}if(F){S._fadeIn(N.fadeIn,A)}}else{if(N.showOverlay){T.show()}if(F){S.show()}if(N.onBlock){N.onBlock()}}v(1,C,N);if(I){d=S[0];k=p(":input:enabled:visible",d);if(N.focusInput){setTimeout(y,20)}}else{b(S[0],N.centerX,N.centerY)}if(N.timeout){var D=setTimeout(function(){I?p.unblockUI(N):p(C).unblock(N)},N.timeout);p(C).data("blockUI.timeout",D)}}function n(C,D){var B=(C==window);var A=p(C);var E=A.data("blockUI.history");var F=A.data("blockUI.timeout");if(F){clearTimeout(F);A.removeData("blockUI.timeout")}D=p.extend({},p.blockUI.defaults,D||{});v(0,C,D);var z;if(B){z=p("body").children().filter(".blockUI").add("body > .blockUI")}else{z=p(".blockUI",C)}if(B){d=k=null}if(D.fadeOut){z.fadeOut(D.fadeOut);setTimeout(function(){t(z,E,D,C)},D.fadeOut)}else{t(z,E,D,C)}}function t(z,C,B,A){z.each(function(D,E){if(this.parentNode){this.parentNode.removeChild(this)}});if(C&&C.el){C.el.style.display=C.display;C.el.style.position=C.position;if(C.parent){C.parent.appendChild(C.el)}p(A).removeData("blockUI.history")}if(typeof B.onUnblock=="function"){B.onUnblock(A,B)}}function v(z,D,E){var C=D==window,B=p(D);if(!z&&(C&&!d||!C&&!B.data("blockUI.isBlocked"))){return}if(!C){B.data("blockUI.isBlocked",z)}if(!E.bindEvents||(z&&!E.showOverlay)){return}var A="mousedown mouseup keydown keypress";z?p(document).bind(A,E,x):p(document).unbind(A,x)}function x(C){if(C.keyCode&&C.keyCode==9){if(d&&C.data.constrainTabKey){var B=k;var A=!C.shiftKey&&C.target==B[B.length-1];var z=C.shiftKey&&C.target==B[0];if(A||z){setTimeout(function(){y(z)},10);return false}}}if(p(C.target).parents("div.blockMsg").length>0){return true}return p(C.target).parents().children().filter("div.blockUI").length==0}function y(z){if(!k){return}var A=k[z===true?k.length-1:0];if(A){A.focus()}}function b(D,z,F){var E=D.parentNode,C=D.style;var A=((E.offsetWidth-D.offsetWidth)/2)-w(E,"borderLeftWidth");var B=((E.offsetHeight-D.offsetHeight)/2)-w(E,"borderTopWidth");if(z){C.left=A>0?(A+"px"):"0"}if(F){C.top=B>0?(B+"px"):"0"}}function w(z,A){return parseInt(p.css(z,A))||0}})(jQuery);(function(b){b.fn.caret=function(z,v){var f,k,x=this[0];if(typeof z==="object"&&typeof z.start==="number"&&typeof z.end==="number"){f=z.start;k=z.end}else{if(typeof z==="number"&&typeof v==="number"){f=z;k=v}else{if(typeof z==="string"){if((f=x.value.indexOf(z))>-1){k=f+z.length}else{f=null}}else{if(Object.prototype.toString.call(z)==="[object RegExp]"){var w=z.exec(x.value);if(w!=null){f=w.index;k=f+w[0].length}}}}}if(typeof f!="undefined"){if(b.browser.msie){var p=this[0].createTextRange();p.collapse(true);p.moveStart("character",f);p.moveEnd("character",k-f);p.select()}else{this[0].selectionStart=f;this[0].selectionEnd=k}this[0].focus();return this}else{if(b.browser.msie){if(this[0].tagName.toLowerCase()!="textarea"){var h=this.val();var n=document.selection.createRange().duplicate();n.moveEnd("character",h.length);var y=(n.text==""?h.length:h.lastIndexOf(n.text));n=document.selection.createRange().duplicate();n.moveStart("character",-h.length);var q=n.text.length}else{var n=document.selection.createRange();var d=n.duplicate();d.moveToElementText(this[0]);d.setEndPoint("EndToEnd",n);var y=d.text.length-n.text.length;var q=y+n.text.length}}else{var y=x.selectionStart,q=x.selectionEnd}var j=x.value.substring(y,q);return{start:y,end:q,text:j,replace:function(e){return x.value.substring(0,y)+e+x.value.substring(q,x.value.length)}}}return this}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(b){b.PercViewReadyManager={wrappers:[],isInitialized:false,init:function(){this.isInitialized=true},setWrapper:function(d){if(!this.isInitialized){return false}var f=false;var e=this;b(d.components).each(function(h,k){var j=k;if(e.getWrapper(j)!=null){f=true;return}});if(f){return false}b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing");this.wrappers.push(d);d.init();this.logMessage("Added wrapper '"+d.wrapperName+"' to manager");return true},setProcessingFlag:function(){b("#perc-ui-view-indicator").removeClass("perc-ui-view-ready").addClass("perc-ui-view-processing")},getWrapper:function(d){var e=null;b(this.wrappers).each(function(){if(this.isComponentInWrapper(d,true)){e=this;return}});return e},logMessage:function(d){if(window.console&&gDebug){console.log(d)}},handleWrapperComplete:function(d){this.wrappers.splice(b.inArray(d,this.wrappers),1);this.logMessage("Removed wrapper '"+d+"' from manager");if(this.wrappers.length==0){b("#perc-ui-view-indicator").removeClass("perc-ui-view-processing").addClass("perc-ui-view-ready");this.logMessage("The view is ready.")}},showRenderingProgressWarning:function(){b.perc_utils.alert_dialog({content:"Please wait for the page components to finish rendering.",title:"Warning"})}};b.PercComponentWrapper=function(e,f){var d={wrapperName:e,wrapperStatus:"initialized",processedComponents:[],components:f,isWrapperComplete:function(){return this.wrapperStatus=="processed"},isComponentInWrapper:function(h,j){return j?b.inArray(h,this.components)!=-1&&b.inArray(h,this.processedComponents)==-1:b.inArray(h,this.components)!=-1},handleComponentProgress:function(n,k){if(b.inArray(n,this.components)==-1){b.PercViewReadyManager.logMessage("The component '"+n+"' doesn't exist in the wrapper."+this.wrapperName);return}if(k=="complete"){this.processedComponents.push(n);var j=b("#"+n);j.remove();var h=b("[perc-ui-component='"+n+"']");h.addClass("perc-ui-component-ready").removeClass("perc-ui-component-processing");if(this.components.length==this.processedComponents.length){this.wrapperStatus="processed";b.PercViewReadyManager.handleWrapperComplete(this.wrapperName)}}else{b(".perc-ui-component-overlay").each(function(){var t=b(this);var q=b("[perc-ui-component='"+t.attr("id")+"']");var p=q.position();if(p==null){return}t.css("top",p.top).css("left",p.left).css("height",q.height()).css("width",q.width())})}},init:function(){b(this.components).each(function(){var n=this;var k=b("[perc-ui-component='"+n+"']");k.addClass("perc-ui-component-processing").removeClass("perc-ui-component-ready");var h=k.position();var j=b("<div class='perc-ui-component-overlay ui-widget-overlay' style='position:absolute; background-color:silver; opacity:0.3; border-radius: 6px; border: 1px solid silver; z-index:9000'><img src='/cm/images/images/Busy.gif' style='margin: auto;  position: absolute;  top: 0; left: 0; bottom: 0; right: 0;'></div>");j.attr("id",n).css("top",h.top).css("left",h.left).css("height",k.height()).css("width",k.width());k.after(j)})}};return d}})(jQuery);var $j=jQuery.noConflict();$j.perc={};(function(b){b.perc_redirect=function(e,d){var h=window.location.href.indexOf("debug=true")!=-1;var f=e.indexOf("?")!=-1;if(h){if(d==null||d=="undefined"){d=new Object()}d.debug="true"}var j=(d==null||d=="undefined")?"":b.param(d);if(j.length>0){j=(f?"&":"?")+j}var k=e+j;window.location.href=k}})(jQuery);(function(b){b.perc_textAutoFill=function(k,n,f,d,j){var e=false;var h=false;d=typeof(d)!="undefined"?d:false;j=typeof(j)!="undefined"?j:-1;b(k).bind("focus.textAutoFill",function(p){var q=b(n).val();e=(q=="undefined"||q==null||q==""||d==true);h=true});b(k).bind("keyup.textAutoFill",{filter:f},function(q){var p=b(n).attr("disabled");if(!h){var w=b(n).val();e=(w=="undefined"||w==null||w=="");h=true}var t=function(x){return x};if(typeof q.data.filter=="function"){t=q.data.filter}if(e&&!p){if(j>0&&b(k).val().length>j){var v=b(k).val().substring(0,j);b(n).val(t(v))}else{b(n).val(t(b(k).val()))}}})}})(jQuery);(function(b){b.perc_filterField=function(f,d,e){b(f).bind("keypress.filterField",{filter:d},function(z){var j=function(A){return A};var x=z.charCode?z.charCode:z.which;if(x==0||x==8||x==13){return}var v=String.fromCharCode(x);if(typeof z.data.filter=="function"){j=z.data.filter}var w=j(v);if(w.length==0){z.preventDefault()}else{if(v!=w){var y=z.target;var h=b(y).caret().start;var n=b(y).caret().end;var t=y.value.slice(0,h);var q=y.value.slice(n);var k=t+w+q;y.value=k;var p=t.length+1;b(y).caret({start:p,end:p});z.preventDefault()}}});b(f).bind("blur.filterField",{filter:d},function(h){f.val(h.data.filter(f.val()));if(b.isFunction(e)){e(b(f))}})}})(jQuery);(function(b){b.perc_filterFieldText=function(f,d,e){b(f).bind("keypress.filterField",{filter:d},function(B){var j=function(C){return C};var z=B.charCode?B.charCode:B.which;if(z==0||z==8){return}var w=String.fromCharCode(z);if(typeof B.data.filter=="function"){j=B.data.filter}var t=b(B.target).caret().start;var n=f.val();var v=f.attr("maxlength");if(typeof(v)!="undefined"&&n.length==v){return}n=n.substring(0,t)+w+n.substring(t,n.length);var y="";if(typeof(e)!="undefined"&&e.length==1){var x=n.split(e);for(var q=0;q<x.length;q++){x[q]=j(x[q])}y=x.join(e)}else{y=j(n)}if(y.length==0){B.preventDefault()}else{if(n!=y){var A=B.target;var h=b(A).caret().start;var k=y;A.value=b.trim(k);var p=h+1;b(A).caret({start:p,end:p});B.preventDefault()}}});b(f).bind("blur.filterField",{filter:d},function(h){theText=f.val();var j="";if(typeof(e)!="undefined"&&e.length==1){var n=theText.split(e);for(var k=0;k<n.length;k++){n[k]=d(n[k])}j=n.join(e)}else{j=h.data.filter(theText)}f.val(b.trim(j))})}})(jQuery);(function(b){b.perc_textFilters={URL:function(d){return d.replace(/[ ]/g,"-").replace(/[\\\/\:\*\?\"<\>\|\#\;\%\']/g,"")},HOSTNAME:function(d){return d.replace(/[^a-zA-Z0-9\-\.]/g,"")},NOSPACES:function(d){return d.replace(/ /g,"")},NOBACKSLASH:function(d){return d.replace(/[\\]/g,"")},IDNAMECDATA:function(d){return d.replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(d){var e=d.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(e.length>0&&e.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){e=e.substring(1,e.length)}return e},PATH:function(d){return d.replace(/[\\\:\*\?\"<\>\|\#\;\%]/g,"")},ID:function(d){return d.replace(/[^a-zA-Z0-9\-\.\:\_]/g,"")},ID_WITH_SPACE:function(d){return d.replace(/[^a-zA-Z0-9\-\.\:\_ ]/g,"")},ONLY_DIGITS:function(d){return d.replace(/[^0-9]/g,"")},ALPHA_NUMERIC:function(d){return d.replace(/[^a-zA-Z0-9]/g,"")},DIGITS_DOT:function(d){return d.replace(/[^0-9\.]/g,"")},DESCRIPTION:function(d){return d.replace(/[<>&]/g,"")},WINDOWS_FILE_NAME:function(d){return d.replace(/\.*$/g,"")}}})(jQuery);(function(b){b.perc_autoFillTextFilters={URL:function(d){return d.replace(/[ \_]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"").replace(/[-]+/g,"-").toLowerCase()},IDNAMECDATA:function(d){return d.replace(/[:\ \.]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"")},IDNAMECDATAALPHA:function(d){var e=d.replace(/[\ ]/g,"-").replace(/[^a-zA-Z0-9\-\_]/g,"");if(e.length>0&&e.charAt(0).match(/^[^a-zA-Z]{1}/)!=null){e=e.substring(1,e.length)}return e}}})(jQuery);(function(b){b.PercBlockUI=function(f,e){var d={};if(typeof(f)!="object"||f==null){f=b.PercBlockUIMode.OVERLAY}b.extend(d,f);if(typeof(e)!="undefined"&&e!=null&&e!=""){b.extend(d,{message:e})}b.blockUI(f)};b.PercBlockUIMode={OVERLAY:{message:'<img src="/cm/images/images/Busy.gif"/><br/>Processing. Please wait...',css:{border:"none",backgroundColor:"#fff",opacity:"0.9",color:"#000",fontFamily:"Verdana",fontSize:"11px","-webkit-border-radius":"10px","-moz-border-radius":"10px",padding:"5px",width:"25%"},overlayCSS:{opacity:"0.6"},fadeIn:40,fadeOut:40,baseZ:9999},CURSORONLY:{message:null,overlayCSS:{opacity:0},fadeIn:0,fadeOut:0,baseZ:9999}}})(jQuery);(function(e){var d=false;var b=[];e(document).ready(function(){e("body").ajaxSend(function(){d=true});e("body").ajaxComplete(function(){d=false;f()})});function f(){if(b.length>0&&!d){var h=b.shift();h();f()}}e.PercQueuePostAJAX=function(h){if(typeof(h)=="function"){b.push(h);f()}}})(jQuery);(function(b){b.PercTruncateText=function(f,e){if(f.length<=e){return f}var d=e-3;return f.substr(0,d)+"..."}})(jQuery);(function(b){b.PercTextOverflow=function(d,e){if(b.browser.msie||b.browser.safari){d.css("white-space","nowrap").css("text-overflow","ellipsis").css("width",e).css("overflow","hidden")}else{d.textOverflow("...",false)}}})(jQuery);(function(b){b.fn.binder=b.fn.binder||function(d,e,h){var f=b(this);if((h||false)){f.bind(d,e,h)}else{h=e;f.bind(d,h)}return f};b.fn.singleclick=b.fn.singleclick||function(d,e){return b(this).binder("singleclick",d,e)};b.event.special.singleclick=b.event.special.singleclick||{setup:function(e,d){b(this).bind("click",b.event.special.singleclick.handler)},teardown:function(d){b(this).unbind("click",b.event.special.singleclick.handler)},handler:function(f){var d=function(j){var n=this;var h=b(n);var k=h.data("singleclick-timeout")||false;if(k){clearTimeout(k)}k=false;h.data("singleclick-timeout",k)};var e=function(j){var n=this;d.call(n);var h=b(n);h.data("singleclick-clicks",(h.data("singleclick-clicks")||0)+1);var k=setTimeout(function(){var p=h.data("singleclick-clicks");d.apply(n,[j]);h.data("singleclick-clicks",0);if(p===1){j.type="singleclick";b.event.handle.apply(n,[j])}},500);h.data("singleclick-timeout",k)};e.apply(this,[f])}}})(jQuery);(function(b){b(document).ready(function(){b.editable.addInputType("filteredText",{element:function(f,e){var d=b('<input type="text">');if(f.width!="none"){d.width(f.width)}if(f.height!="none"){d.height(f.height)}d.attr("autocomplete","off");b.perc_filterField(d,b.perc_textFilters.URL);d.attr("id",f.fieldid);b(this).append(d);return(d)}})})})(jQuery);
/*
 * jQuery Text Overflow v0.62
 *
 * Licensed under the new BSD License.
 * Copyright 2009, Bram Stein
 * All rights reserved.
 */
(function(f){var e=document.documentElement.style,h=("textOverflow" in e||"OTextOverflow" in e),j=document.createRange!==undefined,d=function(n){var k=[];f.each(n[0].childNodes,function(){if(this.nodeType===3){k.push(this)}else{f.each(this.childNodes,arguments.callee)}});return f(k)},b=function(q,x,n){var p=document.createRange(),v=0,k=q.length,t=0,w;if(n<=x){return f(q)}if(k===1||!j){return f.map(q,function(y){return y.textContent}).join("").substr(x,n)}for(;v<k;v+=1){w=q[v];if(x>=t&&x<=t+w.length){p.setStart(w,x-t)}if(t<=n&&t+w.length>=n){p.setEnd(w,n-t);break}t+=w.length}return f(p.cloneContents())};f.extend(f.fn,{textOverflow:function(p,k){var n=p||"…";if(!h){return this.each(function(){var x=f(this),z=x.clone(),C=x.clone(),w=x.text(),q=x.width(),y=d(C),A=0,B=0,v=w.length,t=function(){if(q!==x.width()){x.replaceWith(C);x=C;C=x.clone();x.textOverflow(p,false);q=x.width()}};x.after(z.hide());if(z.width()>q){while(A<v){B=Math.floor(A+((v-A)/2));z.empty().append(b(y,0,B)).append(n);if(z.width()<q){A=B+1}else{v=B}}if(A<w.length){x.empty().append(b(y,0,A-1)).append(n)}}z.remove();if(k){setInterval(t,200)}})}else{return this}}})})(jQuery);(function(h){var j="/Rhythmyx";var f=j+"/services";var k="/cm";var d={ANALYTICS:f+"/analytics",PAGEMGT:f+"/pagemanagement",SITEMGT:f+"/sitemanage",MIGRATIONMGT:f+"/migrationmanagement",PATHMGT:f+"/pathmanagement",ASSETMGT:f+"/assetmanagement",DELIVERY:f+"/delivery",ITEMMGT:f+"/itemmanagement",USERMGT:f+"/user",UTILS:f+"/utils",METADATAMGT:f+"/metadatamanagement",ACTIVITY:f+"/activitymanagement",FINDER:f+"/searchmanagement",WORKFLOW:f+"/workflowmanagement",ROLEMGT:f+"/rolemanagement",DESIGN:f+"/design",FOLDERMGT:f+"/foldermanagement",LICENSE:f+"/licensemanagement",PUBMGT:f+"/publishmanagement",SHARE:f+"/share",WDGMGT:f+"/widgetmanagement",PAGEOPTMGT:f+"/pageoptimizermanagement",RECMGT:f+"/recentmanagement",REDMGT:f+"/redirectmanagement",CLDSVC:f+"/cloudservicemanagement",CATMGT:f+"/categorymanagement"};var b="Assets";var e="Sites";var p="Search";var n="Design";h.perc_displayformats={"/":"","/Design":"CM1_Design"};h.perc_paths={PATH_ADD_FOLDER:d.PATHMGT+"/path/addFolder",PATH_ADD_NEW_FOLDER:d.PATHMGT+"/path/addNewFolder",PATH_FOLDER:d.PATHMGT+"/path/folder",PATH_CHILD_FOLDERS:d.PATHMGT+"/path/childFolders",PATH_PAGINATED_FOLDER:d.PATHMGT+"/path/paginatedFolder",PATH_ITEM:d.PATHMGT+"/path/item",PATH_ITEM_BY_ID:d.PATHMGT+"/path/item/id",PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE:d.PATHMGT+"/path/item/wfState",PATH_ITEM_MOVE:d.PATHMGT+"/path/moveItem",PATH_ITEM_PROPERTIES:d.PATHMGT+"/path/itemProperties",PATH_VALIDATE_DELETE_FOLDER:d.PATHMGT+"/path/validateFolderDelete",PATH_DELETE_FOLDER:d.PATHMGT+"/path/deleteFolder",PATH_RENAME_FOLDER:d.PATHMGT+"/path/renameFolder",PATH_GET_FOLDER_PROPERTIES:d.PATHMGT+"/path/folderProperties",PATH_SAVE_FOLDER_PROPERTIES:d.PATHMGT+"/path/saveFolderProperties",PATH_LAST_EXISTING:d.PATHMGT+"/path/lastExisting",PATH_VALIDATE_EXIST:d.PATHMGT+"/path/validate",DISPLAY_FORMAT:f+"/ui/uicomps/displayformat/name/",TEMPLATES_ALL:d.PAGEMGT+"/template/summary/all",TEMPLATE_HTML_PARSE:d.PAGEMGT+"/render/parse",TEMPLATE_EXPORT:d.PAGEMGT+"/template/export",TEMPLATE_IMPORT:d.PAGEMGT+"/template/import",TEMPLATES_USER:d.PAGEMGT+"/template/summary/all/user",TEMPLATE_LOAD_SAVE:d.PAGEMGT+"/template",TEMPLATE_LOAD_METADATA:d.PAGEMGT+"/template/loadTemplateMetadata",TEMPLATE_SAVE_METADATA:d.PAGEMGT+"/template/saveTemplateMetadata",TEMPLATE_CREATE_FROM_URL:d.SITEMGT+"/sitetemplates/createFromUrl",TEMPLATE_CREATE_FROM_URL_ASYNC:d.SITEMGT+"/sitetemplates/createFromUrlAsync",TEMPLATE_CREATE_FROM_URL_RESULT:d.SITEMGT+"/sitetemplates/getImportedTemplate",TEMPLATE_CREATE_FROM_PAGE:d.SITEMGT+"/sitetemplates/createFromPage",TEMPLATE_RENDER:d.PAGEMGT+"/render/template",TEMPLATE_RENDER_SCRIPTSOFF:d.PAGEMGT+"/render/template/scriptsoff",TEMPLATES_BY_SITE:d.SITEMGT+"/sitetemplates/templates",TEMPLATES_WITH_NOSITE:d.SITEMGT+"/sitetemplates/nosite",TEMPLATES_READONLY:d.PAGEMGT+"/template/summary/all/readonly",TEMPLATES_SAVE:d.SITEMGT+"/sitetemplates",PAGE_CREATE:d.PAGEMGT+"/page",SAVE_PAGE_METADATA:d.PAGEMGT+"/page/savePageMetadata",PAGES_WITH_TEMPLATE:d.PAGEMGT+"/page/pagesByTemplate",UNASSIGNED_PAGES_BY_SITE:d.PAGEMGT+"/page/unassignedPagesBySite",MIGRATION_EMPTY_FLAG:d.PAGEMGT+"/page/migrationEmptyFlag",CLEAR_MIGRATION_EMPTY_FLAG:d.PAGEMGT+"/page/clearMigrationEmptyFlag",RENDER_LINK_PREVIEW:d.PAGEMGT+"/renderlink/preview",BLOG_LOAD:d.SITEMGT+"/section/blogs",POST_LOAD:d.SITEMGT+"/section/blogPosts",SECTION_CREATE:d.SITEMGT+"section/create",SECTION_CREATE_SECTION_LINK:d.SITEMGT+"/section/createSectionLink",SECTION_DELETE_SECTION_LINK:d.SITEMGT+"/section/deleteSectionLink",SECTION_CREATE_EXTERNAL_LINK:d.SITEMGT+"/section/createExternalLinkSection",SECTION_SECTION_FROM_FOLDER:d.SITEMGT+"/section/createSectionFromFolder",SECTION_CONVERT_TO_FOLDER:d.SITEMGT+"/section/convertToFolder/",SECTION_DELETE:d.SITEMGT+"section",SECTION_LOAD:d.SITEMGT+"section",SECTION_MOVE:d.SITEMGT+"section/move",SECTION_REPLACE_LANDING_PAGE:d.SITEMGT+"section/replaceLandingPage",SECTION_UPDATE:d.SITEMGT+"section/update",SECTION_LINK_UPDATE:d.SITEMGT+"section/updateSectionLink",SECTION_EXTERNAL_LINK_UPDATE:d.SITEMGT+"section/updateExternalLink",SECTION_GET_ROOT:d.SITEMGT+"section/root",SECTION_GET_TREE:d.SITEMGT+"section/tree",SECTION_GET_CHILDREN:d.SITEMGT+"section/childSections",SECTION_GET_PROPERTIES:d.SITEMGT+"section/properties",PAGE_DELETE:d.PAGEMGT+"/page",PAGE_FORCE_DELETE:d.PAGEMGT+"/page/forceDelete",PAGE_VALIDATE_DELETE:d.PAGEMGT+"/page/validateDelete",PAGE_COPY:d.PAGEMGT+"/page/copy",PAGE_CHANGE_TEMPLATE:d.PAGEMGT+"/page/changeTemplate",PAGE_EDIT:d.PAGEMGT+"/render/page/editmode",PAGE_EDIT_SCRIPTSOFF:d.PAGEMGT+"/render/page/editmode/scriptsoff",PAGE_PREVIEW:d.PAGEMGT+"/render/page/",PAGE_EDITURL:d.PAGEMGT+"/page/pageEditUrl",PAGE_VIEWURL:d.PAGEMGT+"/page/pageViewUrl",PAGE_NONSEO:d.PAGEMGT+"/page/nonSEOPages",WIDGETS_ALL:d.PAGEMGT+"/widget",WIDGET_FULL:d.PAGEMGT+"/widget/full",WIDGET_INFO:d.PAGEMGT+"/widget/packageinfo",THEME_CSS:d.PAGEMGT+"/theme/css",REGION_CSS:d.PAGEMGT+"/theme/regioncss",REGION_CSS_MERGE:d.PAGEMGT+"/theme/regioncss/merge",REGION_CSS_PREPARE_FOR_EDIT:d.PAGEMGT+"/theme/regioncss/prepareForEdit",REGION_CSS_CLEAR_CACHE:d.PAGEMGT+"/theme/regioncss/clearCache",THEME_SUMMARY_ALL:d.PAGEMGT+"/theme/summary/all",RICHTEXT_CUSTOM_STYLES:d.PAGEMGT+"/theme/customstyles",ANALYTICS_GET_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_STORE_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_DELETE_CONFIG:d.ANALYTICS+"/provider/config",ANALYTICS_TEST_CONNECTION:d.ANALYTICS+"/provider/testConnection",ANALYTICS_GET_PROFILES:d.ANALYTICS+"/provider/profiles",CONTENT_EDIT_CRITERIA:d.ASSETMGT+"/asset/contentEditCriteria",ASSET_WIDGET_REL:d.ASSETMGT+"/asset/createAssetWidgetRelationship",ASSET_FROM_LOCALCONTENT:d.ASSETMGT+"/asset/shareLocalContent",ASSET_WIDGET_PROMOTE:d.ASSETMGT+"/asset/promoteAssetWidget",ASSET_WIDGET_REL_UPDATE:d.ASSETMGT+"/asset/updateAssetWidgetRelationship",ASSET_ADD_TO_FOLDER:d.ASSETMGT+"/asset/addAssetToFolder",ASSET_WIDGET_DROP_CRITERIA:d.ASSETMGT+"/asset/assetWidgetDropCriteria/",ASSET_WIDGET_REL_DEL:d.ASSETMGT+"/asset/clearAssetWidgetRelationship",ASSET_ORPHAN_WIDGET_REL_DEL:d.ASSETMGT+"/asset/clearOrphanAssetsWidgetRelationship",ASSET_EDITOR_LIBRARY:d.ASSETMGT+"/asset/assetEditors",ASSET_TYPES:d.ASSETMGT+"/asset/assetTypes",ASSET_EDITOR:d.ASSETMGT+"/asset/assetEditor",ASSET_EDITOR_URL_FOR_ASSET_ID:d.ASSETMGT+"/asset/assetEditUrl",ASSET_VIEW_URL_FOR_ASSET_ID:d.ASSETMGT+"/asset/assetViewUrl",ASSET_DELETE:d.ASSETMGT+"/asset",ASSET_FORCE_DELETE:d.ASSETMGT+"/asset/forceDelete",ASSET_VALIDATE_DELETE:d.ASSETMGT+"/asset/validateDelete",ASSET_REMOVE:d.ASSETMGT+"/asset/remove",ASSET_FORCE_REMOVE:d.ASSETMGT+"/asset/forceRemove",ASSET_UPDATE:d.ASSETMGT+"/asset/updateAsset",ASSET_UNUSED:d.ASSETMGT+"/asset/unusedAssets",ASSET_PROMOTE:d.ASSETMGT+"/asset/promoteAsset",CONVERT_WIDGET:d.ASSETMGT+"/asset/createWidgetAsset",UPDATE_INSPECTED_ELEMENT:d.ASSETMGT+"/asset/updateInspectedElements",SITES_ALL:d.SITEMGT+"/site",SAAS_SITES_NAMES:d.SITEMGT+"/site/sass/sitenames",SITES_ALL_CHOICES:d.SITEMGT+"/site/choices",SITES_BY_TEMPLATE:d.SITEMGT+"/sitetemplates/sites",SITE_CREATE:d.SITEMGT+"/site",SITE_CREATE_FROM_URL:d.SITEMGT+"/site/importFromUrl",SITE_CREATE_FROM_URL_ASYNC:d.SITEMGT+"/site/importFromUrlAsync",SITE_CREATE_FROM_URL_RESULT:d.SITEMGT+"/site/getImportedSite",VIEW_IMPORT_LOG:d.SITEMGT+"/site/importLogViewer",SITE_GET_PROPERTIES:d.SITEMGT+"/site/properties",SITE_IS_BEING_IMPORTED:d.SITEMGT+"/site/isSiteImporting",SITE_PUBLISH:d.SITEMGT+"/publish",SITE_ITEM_PUBLISH_ACTIONS:d.SITEMGT+"/publish/publishingActions",PAGE_PUBLISH:d.SITEMGT+"/publish/page",RESOURCE_PUBLISH:d.SITEMGT+"/publish/resource",PAGE_TAKEDOWN:d.SITEMGT+"/publish/takedown/page",RESOURCE_TAKEDOWN:d.SITEMGT+"/publish/takedown/resource",INCREMENTAL_LIST:d.SITEMGT+"/publish/incremental/content/",INCREMENTAL_PUBLISH:d.SITEMGT+"/publish/incremental/publish/",SITE_UPDATE_PROPERTIES:d.SITEMGT+"/site/updateProperties",SITE_DELETE:d.SITEMGT+"/site",PUBLISH_CURRENT_STATUS:d.SITEMGT+"pubstatus/current",PUBLISH_LOGS:d.SITEMGT+"pubstatus/logs",PUBLISH_PURGE:d.SITEMGT+"pubstatus/purge",PUBLISH_LOGS_DETAILS:d.SITEMGT+"pubstatus/details",SITE_GET_PUBLISH_PROPERTIES:d.SITEMGT+"/site/publishProperties",SITE_UPDATE_PUBLISH_PROPERTIES:d.SITEMGT+"/site/updatePublishProperties",SITE_COPY:d.SITEMGT+"/site/copy",SITE_COPY_VALIDATE_FOLDERS:d.SITEMGT+"/site/copy/validateFolders",SITE_COPY_INFO:d.SITEMGT+"/site/copysiteinfo",SITE_STATS_SUMMARY:d.SITEMGT+"/site/statistics",SITE_ARCHITECTURE:d.SITEMGT+"/siteArchitecture",URL_ADMIN:k+"/jsp/admin.jsp",URL_ARCHITECTURE:k+"/jsp/siteArchitecture.jsp",URL_DASHBOARD:k+"/jsp/dashboard.jsp",URL_WEBMGT:k+"/jsp/webmgt.jsp",IMAGE_ROOT:k+"/images",METADATA_FIND:d.METADATAMGT+"/metadata",METADATA_DELETE_BY_PREFIX:d.METADATAMGT+"/metadata/byprefix",METADATA_FIND_BY_PREFIX:d.METADATAMGT+"/metadata/byprefix",METADATA_DELETE:d.METADATAMGT+"/metadata",METADATA_SAVE:d.METADATAMGT+"/metadata",METADATA_SAVE_GLOBAL_VARIABLES:d.METADATAMGT+"/metadata/globalvariables",PROCESS_STATUS_ALL:d.SITEMGT+"/monitor/all",WORKFLOW_CHECKOUT:d.ITEMMGT+"/workflow/checkOut",WORKFLOW_CHECKIN:d.ITEMMGT+"/workflow/checkIn",WORKFLOW_FORCE_CHECKOUT:d.ITEMMGT+"/workflow/forceCheckOut",WORKFLOW_TRANSITION:d.ITEMMGT+"/workflow/transition",WORKFLOW_TRANSITION_COMMENT:d.ITEMMGT+"/workflow/transitionWithComments",WORKFLOW_TRANSITIONS:d.ITEMMGT+"/workflow/getTransitions",WORKFLOW_CHECKED_OUT_TO_USER:d.ITEMMGT+"/workflow/isCheckedOutToCurrentUser",WORKFLOW_IS_APPROVE_ALLOWED:d.ITEMMGT+"/workflow/isApproveAvailableToCurrentUser",WORKFLOW_BULK_APPROVE:d.ITEMMGT+"/workflow/bulkApprove",WORKFLOW_STEPPED:d.WORKFLOW+"/workflows/",WORKFLOW_META:d.WORKFLOW+"/workflows/metadata",DEFAULT_WORKFLOW_META:d.WORKFLOW+"/workflows/metadata/default",USER_USERS:d.USERMGT+"/user/users",USER_USERS_NAMES:d.USERMGT+"/user/users/names",USER_ROLES:d.USERMGT+"/user/roles",USER_FIND:d.USERMGT+"/user/find",USER_EXTERNAL_FIND:d.USERMGT+"/user/external/find",USER_EXTERNAL_IMPORT:d.USERMGT+"/user/import",USER_EXTERNAL_STATUS:d.USERMGT+"/user/external/status",USER_STATUS:d.USERMGT+"/user/status",USER_DELETE:d.USERMGT+"/user/delete",USER_UPDATE:d.USERMGT+"/user/update",USER_CREATE:d.USERMGT+"/user/create",USER_CURRENT:d.USERMGT+"/user/current",USER_ACCESS_LEVEL:d.USERMGT+"/user/accessLevel",ROLE_FIND:d.ROLEMGT+"/role/find",ROLE_DELETE:d.ROLEMGT+"/role/delete",ROLE_UPDATE:d.ROLEMGT+"/role/update",ROLE_CREATE:d.ROLEMGT+"/role/create",ROLE_AVAILABLE_USERS:d.ROLEMGT+"/role/availableUsers",ROLE_DELETE_VALIDATE:d.ROLEMGT+"/role/validateForDelete",ROLE_REMOVE_USERS_VALIDATE:d.ROLEMGT+"/role/validateDeleteUsers",CAT_ALL:d.CATMGT+"/category/all",CAT_UPDATE:d.CATMGT+"/category/update",CAT_LOCK_INFO:d.CATMGT+"/category/lockinfo",CAT_LOCK_TAB:d.CATMGT+"/category/locktab",CAT_REMOVE_TAB_LOCK:d.CATMGT+"/category/removelocktab",CAT_UPDATE_IN_DTS:d.CATMGT+"/category/updateindts",UTIL_GET_MAXINTERVAL:d.UTILS+"/utility/maxInactiveInterval",UTIL_GET_PRIVATE_KEYS:d.UTILS+"/utility/privatekeys",UTIL_ENCRYPT_STRING:d.UTILS+"/utility/encryptstring",UTIL_ENCRYPT_STRINGS:d.UTILS+"/utility/encryptstrings",UTIL_DECRYPT_STRING:d.UTILS+"/utility/decryptstring",UTIL_LOG_DATA:d.UTILS+"/utility/log",ITEM_REVISIONS:d.ITEMMGT+"/item/revisions",ITEM_PROMOTE_REVISION:d.ITEMMGT+"/item/restoreRevision",ITEM_SETDATES:d.ITEMMGT+"/item/setitemdates",ITEM_GETDATES:d.ITEMMGT+"/item/getitemdates",ITEM_LAST_COMMENT:d.ITEMMGT+"/item/lastComment",ASSET_SITE_IMPACT:d.ITEMMGT+"/item/siteimpact/asset",ADD_TO_MYPAGES:d.ITEMMGT+"/item/addtomypages",REMOVE_FROM_MYPAGES:d.ITEMMGT+"/item/removefrommypages",IS_MY_PAGE:d.ITEMMGT+"/item/ismypage",MY_CONTENT:d.ITEMMGT+"/item/mycontent",ITEM_SETSOPROMETA:d.ITEMMGT+"/item/setsoprometadata",ITEM_GETSOPROMETA:d.ITEMMGT+"/item/getsoprometadata",ASSETS_ROOT_NO_SLASH:b,SITES_ROOT_NO_SLASH:e,DESIGN_ROOT_NO_SLASH:n,SEARCH_ROOT_NO_SLASH:p,ASSETS_ROOT:"/"+b,SITES_ROOT:"/"+e,DESIGN_ROOT:"/"+n,SEARCH_ROOT:"/"+p,FINDER_SEARCH:d.FINDER+"/search/get",DESIGN_THEMES:"/"+n+"/web_resources/themes",ACTIVITY_CONTENT:d.ACTIVITY+"/activity/contentactivity",ACTIVITY_TRAFFIC:d.ACTIVITY+"/activity/contenttraffic",ACTIVITY_TRAFFIC_DETAILS:d.ACTIVITY+"/activity/trafficdetails",ACTIVITY_EFFECTIVENESS:d.ACTIVITY+"/activity/effectiveness",GADGETLIST:k+"/gadgets/listing",ASSET_FORMS:d.ASSETMGT+"/asset/forms",ASSET_FORMS_EXPORT:d.DELIVERY+"/form/submissions",ASSET_FORMS_CLEAR:d.DELIVERY+"/form",COMMENTS_DEFAULT_MODERATION:d.DELIVERY+"/comment/defaultModerationState",COMMENTS_SET_MODERATIONS:d.DELIVERY+"/comment/moderate",COMMENTS_GET_ALL:d.DELIVERY+"/comment/pageswithcomments",COMMENTS_GET_PAGE:d.DELIVERY+"/comment/commentsonpage",COMMENTS_GET_ARTICLE:d.PAGEMGT+"/page/folderpath/Sites",WEBRESOURCESMGT:d.DESIGN+"/webresources",WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD:d.DESIGN+"/webresources/validateFileUpload",WEBRESOURCESMGT_FILE_UPLOAD:d.DESIGN+"/webresources/uploadFile",FOLDERMGT_FOLDERS_WITH_WORKFLOW:d.FOLDERMGT+"/folders",FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/start/",FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/status/",FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB:d.FOLDERMGT+"/folders/GetAssociatedFoldersJob/cancel/",FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN:d.FOLDERMGT+"/folders/workflowassignment",FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS:d.FOLDERMGT+"/folders/workflowassignment/isInProgress",FOLDERMGT_FOLDER_PAGES:d.FOLDERMGT+"/folders/folderpages/id/",MEMBERSHIP_GET_ALL:d.DELIVERY+"/membership/admin/users",MEMBERSHIP_ACT_BLK_DEL_ACCOUNT:d.DELIVERY+"/membership/admin/account",MEMBERSHIP_ACT_SAVE_GROUP:d.DELIVERY+"/membership/admin/user/group",LICENSE_ACTIVATE:d.LICENSE+"/license/activate",LICENSE_GET_INFORMATION:d.LICENSE+"/license/status",LICENSE_GET_NETSUITE_METHOD:d.LICENSE+"/license/methodWithCheckUrl",LICENSE_GET_MODULE:d.LICENSE+"/license/module/",LICENSE_SAVE_MODULE:d.LICENSE+"/license/module/save",SERVER_DETAILS:d.PUBMGT+"/servers/",DEFAULT_PUB_PATH:d.PUBMGT+"/servers/defaultFolderLocation/",DEFAULT_SERVER_MODIFIED:d.PUBMGT+"/servers/isDefaultServerModified/",STOP_PUB_SERVER:d.PUBMGT+"/servers/stopPublishing/",JOB_STATUS:d.SHARE+"/jobstatus",TEMPLATE_MIGRATE_CONTENT:d.MIGRATIONMGT+"/contentmigration/migrate",WIDGET_DEFS_SUMMARIES:d.WDGMGT+"/widgetbuilder/summaries",WIDGET_DEF:d.WDGMGT+"/widgetbuilder/definition/",WIDGET_DEF_VALIDATE:d.WDGMGT+"/widgetbuilder/validate/",WIDGET_DEF_DEPLOY:d.WDGMGT+"/widgetbuilder/deploy/",CLDSVC_ACTIVE:d.CLDSVC+"/cloudservice/active/",CLDSVC_ACTIVE_FMT:d.CLDSVC+"/cloudservice/%s/active/",CLDSVC_ACTIVESTATES:d.CLDSVC+"/cloudservice/activestates/",CLDSVC_INFO:d.CLDSVC+"/cloudservice/info/",CLDSVC_INFO_FMT:d.CLDSVC+"/cloudservice/%s/info/",CLDSVC_DATA:d.CLDSVC+"/cloudservice/pagedata/",CLDSVC_DATA_FMT:d.CLDSVC+"/cloudservice/%s/pagedata/",PAGE_OPT_ACTIVE:d.PAGEOPTMGT+"/pageoptimizer/active/",PAGE_OPT_DATA:d.PAGEOPTMGT+"/pageoptimizer/pagedata/",PAGE_OPT_INFO:d.PAGEOPTMGT+"/pageoptimizer/info/",RECENT_ROOT:d.RECMGT+"/recent/",REDIRECT_ROOT:d.REDMGT+"/redirect/",ITEM_PUB_HISTORY:d.ITEMMGT+"/item/pubhistory/"}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){function j(d,t){var q=d.nodeName.toLowerCase();if("area"===q){var p=d.parentNode,n=p.name,k;return !d.href||!n||p.nodeName.toLowerCase()!=="map"?!1:(k=f("img[usemap=#"+n+"]")[0],!!k&&h(k))}return(/input|select|textarea|button|object/.test(q)?!d.disabled:"a"==q?d.href||t:t)&&h(d)}function h(d){return !f(d).parents().andSelf().filter(function(){return f.curCSS(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}f.ui=f.ui||{};if(f.ui.version){return}f.extend(f.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(d,k){return typeof d=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),k&&k.call(b)},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;return f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?d=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.curCSS(this,"position",1))&&/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0):d=this.parents().filter(function(){return/(auto|scroll)/.test(f.curCSS(this,"overflow",1)+f.curCSS(this,"overflow-y",1)+f.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!d.length?f(document):d},zIndex:function(p){if(p!==e){return this.css("zIndex",p)}if(this.length){var n=f(this[0]),k,b;while(n.length&&n[0]!==document){k=n.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){b=parseInt(n.css("zIndex"),10);if(!isNaN(b)&&b!==0){return b}}n=n.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(t,q){function b(v,y,x,w){return f.each(p,function(){y-=parseFloat(f.curCSS(v,"padding"+this,!0))||0,x&&(y-=parseFloat(f.curCSS(v,"border"+this+"Width",!0))||0),w&&(y-=parseFloat(f.curCSS(v,"margin"+this,!0))||0)}),y}var p=q==="Width"?["Left","Right"]:["Top","Bottom"],n=q.toLowerCase(),k={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+q]=function(d){return d===e?k["inner"+q].call(this):this.each(function(){f(this).css(n,b(this,d)+"px")})},f.fn["outer"+q]=function(d,v){return typeof d!="number"?k["outer"+q].call(this,d):this.each(function(){f(this).css(n,b(this,d,!0,v)+"px")})}}),f.extend(f.expr[":"],{data:function(k,p,n){return !!f.data(k,n[3])},focusable:function(d){return j(d,!isNaN(f.attr(d,"tabindex")))},tabbable:function(k){var p=f.attr(k,"tabindex"),n=isNaN(p);return(n||p>=0)&&j(k,!n)}}),f(function(){var d=document.body,k=d.appendChild(k=document.createElement("div"));k.offsetHeight,f.extend(k.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=k.offsetHeight===100,f.support.selectstart="onselectstart" in k,d.removeChild(k).style.display="none"}),f.extend(f.ui,{plugin:{add:function(k,t,q){var p=f.ui[k].prototype;for(var n in q){p.plugins[n]=p.plugins[n]||[],p.plugins[n].push([t,q[n]])}},call:function(n,k,t){var q=n.plugins[k];if(!q||!n.element[0].parentNode){return}for(var p=0;p<q.length;p++){n.options[q[p][0]]&&q[p][1].apply(n.element,t)}}},contains:function(k,d){return document.compareDocumentPosition?k.compareDocumentPosition(d)&16:k!==d&&k.contains(d)},hasScroll:function(k,q){if(f(k).css("overflow")==="hidden"){return !1}var p=q&&q==="left"?"scrollLeft":"scrollTop",n=!1;return k[p]>0?!0:(k[p]=1,n=k[p]>0,k[p]=0,n)},isOverAxis:function(k,d,n){return k>d&&k<d+n},isOver:function(k,v,t,q,p,n){return f.ui.isOverAxis(k,t,p)&&f.ui.isOverAxis(v,q,n)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){if(f.cleanData){var j=f.cleanData;f.cleanData=function(k){for(var q=0,p;(p=k[q])!=null;q++){try{f(p).triggerHandler("remove")}catch(n){}}j(k)}}else{var h=f.fn.remove;f.fn.remove=function(d,k){return this.each(function(){return k||(!d||f.filter(d,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(n){}}),h.call(f(this),d,k)})}}f.widget=function(k,v,t){var q=k.split(".")[0],p;k=k.split(".")[1],p=q+"-"+k,t||(t=v,v=f.Widget),f.expr[":"][p]=function(b){return !!f.data(b,k)},f[q]=f[q]||{},f[q][k]=function(w,d){arguments.length&&this._createWidget(w,d)};var n=new v;n.options=f.extend(!0,{},n.options),f[q][k].prototype=f.extend(!0,n,{namespace:q,widgetName:k,widgetEventPrefix:f[q][k].prototype.widgetEventPrefix||k,widgetBaseClass:p},t),f.widget.bridge(k,f[q][k])},f.widget.bridge=function(k,b){f.fn[k]=function(q){var p=typeof q=="string",n=Array.prototype.slice.call(arguments,1),d=this;return q=!p&&n.length?f.extend.apply(null,[!0,q].concat(n)):q,p&&q.charAt(0)==="_"?d:(p?this.each(function(){var v=f.data(this,k),t=v&&f.isFunction(v[q])?v[q].apply(v,n):v;if(t!==v&&t!==e){return d=t,!1}}):this.each(function(){var t=f.data(this,k);t?t.option(q||{})._init():f.data(this,k,new b(q,this))}),d)}},f.Widget=function(k,d){arguments.length&&this._createWidget(k,d)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(k,p){f.data(p,this.widgetName,this),this.element=f(p),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),k);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(n,k){var b=n;if(arguments.length===0){return f.extend({},this.options)}if(typeof n=="string"){if(k===e){return this.options[n]}b={},b[n]=k}return this._setOptions(b),this},_setOptions:function(d){var k=this;return f.each(d,function(p,n){k._setOption(p,n)}),this},_setOption:function(k,d){return this.options[k]=d,k==="disabled"&&this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",d),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(k,v,t){var q,p,n=this.options[k];t=t||{},v=f.Event(v),v.type=(k===this.widgetEventPrefix?k:this.widgetEventPrefix+k).toLowerCase(),v.target=this.element[0],p=v.originalEvent;if(p){for(q in p){q in v||(v[q]=p[q])}}return this.element.trigger(v,t),!(f.isFunction(n)&&n.call(this.element[0],v,t)===!1||v.isDefaultPrevented())}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=!1;e(document).mouseup(function(b){f=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var h=this;this.element.bind("mousedown."+this.widgetName,function(b){return h._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===e.data(b.target,h.widgetName+".preventClickEvent")){return e.removeData(b.target,h.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(h){if(f){return}this._mouseStarted&&this._mouseUp(h),this._mouseDownEvent=h;var n=this,k=h.which==1,j=typeof this.options.cancel=="string"&&h.target.nodeName?e(h.target).closest(this.options.cancel).length:!1;if(!k||j||!this._mouseCapture(h)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)){this._mouseStarted=this._mouseStart(h)!==!1;if(!this._mouseStarted){return h.preventDefault(),!0}}return !0===e.data(h.target,this.widgetName+".preventClickEvent")&&e.removeData(h.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return n._mouseMove(b)},this._mouseUpDelegate=function(b){return n._mouseUp(b)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),h.preventDefault(),f=!0,!0},_mouseMove:function(h){return !e.browser.msie||document.documentMode>=9||!!h.button?this._mouseStarted?(this._mouseDrag(h),h.preventDefault()):(this._mouseDistanceMet(h)&&this._mouseDelayMet(h)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,h)!==!1,this._mouseStarted?this._mouseDrag(h):this._mouseUp(h)),!this._mouseStarted):this._mouseUp(h)},_mouseUp:function(h){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,h.target==this._mouseDownEvent.target&&e.data(h.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(h)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return !0}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(k,j){k.ui=k.ui||{};var w=/left|center|right/,v=/top|center|bottom/,t="center",q={},p=k.fn.position,n=k.fn.offset;k.fn.position=function(e){if(!e||!e.of){return p.apply(this,arguments)}e=k.extend({},e);var A=k(e.of),z=A[0],y=(e.collision||"flip").split(" "),x=e.offset?e.offset.split(" "):[0,0],f,d,B;return z.nodeType===9?(f=A.width(),d=A.height(),B={top:0,left:0}):z.setTimeout?(f=A.width(),d=A.height(),B={top:A.scrollTop(),left:A.scrollLeft()}):z.preventDefault?(e.at="left top",f=d=0,B={top:e.of.pageY,left:e.of.pageX}):(f=A.outerWidth(),d=A.outerHeight(),B=A.offset()),k.each(["my","at"],function(){var b=(e[this]||"").split(" ");b.length===1&&(b=w.test(b[0])?b.concat([t]):v.test(b[0])?[t].concat(b):[t,t]),b[0]=w.test(b[0])?b[0]:t,b[1]=v.test(b[1])?b[1]:t,e[this]=b}),y.length===1&&(y[1]=y[0]),x[0]=parseInt(x[0],10)||0,x.length===1&&(x[1]=x[0]),x[1]=parseInt(x[1],10)||0,e.at[0]==="right"?B.left+=f:e.at[0]===t&&(B.left+=f/2),e.at[1]==="bottom"?B.top+=d:e.at[1]===t&&(B.top+=d/2),B.left+=x[0],B.top+=x[1],this.each(function(){var J=k(this),I=J.outerWidth(),H=J.outerHeight(),G=parseInt(k.curCSS(this,"marginLeft",!0))||0,F=parseInt(k.curCSS(this,"marginTop",!0))||0,E=I+G+(parseInt(k.curCSS(this,"marginRight",!0))||0),D=H+F+(parseInt(k.curCSS(this,"marginBottom",!0))||0),C=k.extend({},B),b;e.my[0]==="right"?C.left-=I:e.my[0]===t&&(C.left-=I/2),e.my[1]==="bottom"?C.top-=H:e.my[1]===t&&(C.top-=H/2),q.fractions||(C.left=Math.round(C.left),C.top=Math.round(C.top)),b={left:C.left-G,top:C.top-F},k.each(["left","top"],function(K,h){k.ui.position[y[K]]&&k.ui.position[y[K]][h](C,{targetWidth:f,targetHeight:d,elemWidth:I,elemHeight:H,collisionPosition:b,collisionWidth:E,collisionHeight:D,offset:x,my:e.my,at:e.at})}),k.fn.bgiframe&&J.bgiframe(),J.offset(k.extend(C,{using:e.using}))})},k.ui.position={fit:{left:function(f,y){var x=k(window),h=y.collisionPosition.left+y.collisionWidth-x.width()-x.scrollLeft();f.left=h>0?f.left-h:Math.max(f.left-y.collisionPosition.left,f.left)},top:function(f,y){var x=k(window),h=y.collisionPosition.top+y.collisionHeight-x.height()-x.scrollTop();f.top=h>0?f.top-h:Math.max(f.top-y.collisionPosition.top,f.top)}},flip:{left:function(e,C){if(C.at[0]===t){return}var B=k(window),A=C.collisionPosition.left+C.collisionWidth-B.width()-B.scrollLeft(),z=C.my[0]==="left"?-C.elemWidth:C.my[0]==="right"?C.elemWidth:0,y=C.at[0]==="left"?C.targetWidth:-C.targetWidth,x=-2*C.offset[0];e.left+=C.collisionPosition.left<0?z+y+x:A>0?z+y+x:0},top:function(e,C){if(C.at[1]===t){return}var B=k(window),A=C.collisionPosition.top+C.collisionHeight-B.height()-B.scrollTop(),z=C.my[1]==="top"?-C.elemHeight:C.my[1]==="bottom"?C.elemHeight:0,y=C.at[1]==="top"?C.targetHeight:-C.targetHeight,x=-2*C.offset[1];e.top+=C.collisionPosition.top<0?z+y+x:A>0?z+y+x:0}}},k.offset.setOffset||(k.offset.setOffset=function(x,D){/static/.test(k.curCSS(x,"position"))&&(x.style.position="relative");var C=k(x),B=C.offset(),A=parseInt(k.curCSS(x,"top",!0),10)||0,z=parseInt(k.curCSS(x,"left",!0),10)||0,y={top:D.top-B.top+A,left:D.left-B.left+z};"using" in D?D.using.call(x,y):C.css(y)},k.fn.offset=function(d){var e=this[0];return !e||!e.ownerDocument?null:d?k.isFunction(d)?this.each(function(b){k(this).offset(d.call(this,b,k(this).offset()))}):this.each(function(){k.offset.setOffset(this,d)}):n.call(this)}),function(){var f=document.getElementsByTagName("body")[0],D=document.createElement("div"),C,B,A,z,y;C=document.createElement(f?"div":"body"),A={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},f&&k.extend(A,{position:"absolute",left:"-1000px",top:"-1000px"});for(var x in A){C.style[x]=A[x]}C.appendChild(D),B=f||document.documentElement,B.insertBefore(C,B.firstChild),D.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",z=k(D).offset(function(e,d){return d}).offset(),C.innerHTML="",B.removeChild(C),y=z.top+z.left+(f?2000:0),q.fractions=y>21&&y<22}()})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.draggable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(f){var h=this.options;return this.helper||h.disabled||e(f.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(f),this.handle?(h.iframeFix&&e(h.iframeFix===!0?"iframe":h.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(f){var h=this.options;return this.helper=this._createHelper(f),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(f),this.originalPageX=f.pageX,this.originalPageY=f.pageY,h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt),h.containment&&this._setContainment(),this._trigger("start",f)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!h.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,f),this._mouseDrag(f,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,f),!0)},_mouseDrag:function(f,j){this.position=this._generatePosition(f),this.positionAbs=this._convertPositionTo("absolute");if(!j){var h=this._uiHash();if(this._trigger("drag",f,h)===!1){return this._mouseUp({}),!1}this.position=h.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return e.ui.ddmanager&&e.ui.ddmanager.drag(this,f),!1},_mouseStop:function(h){var p=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(p=e.ui.ddmanager.drop(this,h)),this.dropped&&(p=this.dropped,this.dropped=!1);var n=this.element[0],k=!1;while(n&&(n=n.parentNode)){n==document&&(k=!0)}if(!k&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!p||this.options.revert=="valid"&&p||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,p)){var j=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){j._trigger("stop",h)!==!1&&j._clear()})}else{this._trigger("stop",h)!==!1&&this._clear()}return !1},_mouseUp:function(f){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,f),e.ui.mouse.prototype._mouseUp.call(this,f)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(f){var h=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==f.target&&(h=!0)}),h},_createHelper:function(f){var j=this.options,h=e.isFunction(j.helper)?e(j.helper.apply(this.element[0],[f])):j.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return h.parents("body").length||h.appendTo(j.appendTo=="parent"?this.element[0].parentNode:j.appendTo),h[0]!=this.element[0]&&!/(fixed|absolute)/.test(h.css("position"))&&h.css("position","absolute"),h},_adjustOffsetFromHelper:function(f){typeof f=="string"&&(f=f.split(" ")),e.isArray(f)&&(f={left:+f[0],top:+f[1]||0}),"left" in f&&(this.offset.click.left=f.left+this.margins.left),"right" in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left),"top" in f&&(this.offset.click.top=f.top+this.margins.top),"bottom" in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var h=this.options;h.containment=="parent"&&(h.containment=this.helper[0].parentNode);if(h.containment=="document"||h.containment=="window"){this.containment=[h.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,h.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(h.containment=="document"?0:e(window).scrollLeft())+e(h.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(h.containment=="document"?0:e(window).scrollTop())+(e(h.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(h.containment)&&h.containment.constructor!=Array){var p=e(h.containment),n=p[0];if(!n){return}var k=p.offset(),j=e(n).css("overflow")!="hidden";this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(j?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(j?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=p}else{h.containment.constructor==Array&&(this.containment=h.containment)}},_convertPositionTo:function(h,q){q||(q=this.position);var p=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:q.top+this.offset.relative.top*p+this.offset.parent.top*p-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*p),left:q.left+this.offset.relative.left*p+this.offset.parent.left*p-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*p)}},_generatePosition:function(A){var z=this.options,y=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,x=/(html|body)/i.test(y[0].tagName),w=A.pageX,v=A.pageY;if(this.originalPosition){var t;if(this.containment){if(this.relative_container){var q=this.relative_container.offset();t=[this.containment[0]+q.left,this.containment[1]+q.top,this.containment[2]+q.left,this.containment[3]+q.top]}else{t=this.containment}A.pageX-this.offset.click.left<t[0]&&(w=t[0]+this.offset.click.left),A.pageY-this.offset.click.top<t[1]&&(v=t[1]+this.offset.click.top),A.pageX-this.offset.click.left>t[2]&&(w=t[2]+this.offset.click.left),A.pageY-this.offset.click.top>t[3]&&(v=t[3]+this.offset.click.top)}if(z.grid){var p=z.grid[1]?this.originalPageY+Math.round((v-this.originalPageY)/z.grid[1])*z.grid[1]:this.originalPageY;v=t?p-this.offset.click.top<t[1]||p-this.offset.click.top>t[3]?p-this.offset.click.top<t[1]?p+z.grid[1]:p-z.grid[1]:p:p;var n=z.grid[0]?this.originalPageX+Math.round((w-this.originalPageX)/z.grid[0])*z.grid[0]:this.originalPageX;w=t?n-this.offset.click.left<t[0]||n-this.offset.click.left>t[2]?n-this.offset.click.left<t[0]?n+z.grid[0]:n-z.grid[0]:n:n}}return{top:v-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():x?0:y.scrollTop()),left:w-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():x?0:y.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(f,j,h){return h=h||this._uiHash(),e.ui.plugin.call(this,f,[j,h]),f=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,f,j,h)},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.21"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(h,p){var n=e(this).data("draggable"),k=n.options,j=e.extend({},p,{item:n.element});n.sortables=[],e(k.connectToSortable).each(function(){var b=e.data(this,"sortable");b&&!b.options.disabled&&(n.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",h,j))})},stop:function(f,k){var j=e(this).data("draggable"),h=e.extend({},k,{item:j.element});e.each(j.sortables,function(){this.instance.isOver?(this.instance.isOver=0,j.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(f),this.instance.options.helper=this.instance.options._helper,j.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",f,h))})},drag:function(h,p){var n=e(this).data("draggable"),k=this,j=function(B){var A=this.offset.click.top,z=this.offset.click.left,y=this.positionAbs.top,x=this.positionAbs.left,w=B.height,v=B.width,t=B.top,q=B.left;return e.ui.isOver(y+A,x+z,t,q,w,v)};e.each(n.sortables,function(b){this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return p.helper[0]},h.target=this.instance.currentItem[0],this.instance._mouseCapture(h,!0),this.instance._mouseStart(h,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",h),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(h)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",h,this.instance._uiHash(this.instance)),this.instance._mouseStop(h,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",h),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(f,k){var j=e("body"),h=e(this).data("draggable").options;j.css("cursor")&&(h._cursor=j.css("cursor")),j.css("cursor",h.cursor)},stop:function(f,j){var h=e(this).data("draggable").options;h._cursor&&e("body").css("cursor",h._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(f,k){var j=e(k.helper),h=e(this).data("draggable").options;j.css("opacity")&&(h._opacity=j.css("opacity")),j.css("opacity",h.opacity)},stop:function(f,j){var h=e(this).data("draggable").options;h._opacity&&e(j.helper).css("opacity",h._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(f,j){var h=e(this).data("draggable");h.scrollParent[0]!=document&&h.scrollParent[0].tagName!="HTML"&&(h.overflowOffset=h.scrollParent.offset())},drag:function(h,p){var n=e(this).data("draggable"),k=n.options,j=!1;if(n.scrollParent[0]!=document&&n.scrollParent[0].tagName!="HTML"){if(!k.axis||k.axis!="x"){n.overflowOffset.top+n.scrollParent[0].offsetHeight-h.pageY<k.scrollSensitivity?n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop+k.scrollSpeed:h.pageY-n.overflowOffset.top<k.scrollSensitivity&&(n.scrollParent[0].scrollTop=j=n.scrollParent[0].scrollTop-k.scrollSpeed)}if(!k.axis||k.axis!="y"){n.overflowOffset.left+n.scrollParent[0].offsetWidth-h.pageX<k.scrollSensitivity?n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft+k.scrollSpeed:h.pageX-n.overflowOffset.left<k.scrollSensitivity&&(n.scrollParent[0].scrollLeft=j=n.scrollParent[0].scrollLeft-k.scrollSpeed)}}else{if(!k.axis||k.axis!="x"){h.pageY-e(document).scrollTop()<k.scrollSensitivity?j=e(document).scrollTop(e(document).scrollTop()-k.scrollSpeed):e(window).height()-(h.pageY-e(document).scrollTop())<k.scrollSensitivity&&(j=e(document).scrollTop(e(document).scrollTop()+k.scrollSpeed))}if(!k.axis||k.axis!="y"){h.pageX-e(document).scrollLeft()<k.scrollSensitivity?j=e(document).scrollLeft(e(document).scrollLeft()-k.scrollSpeed):e(window).width()-(h.pageX-e(document).scrollLeft())<k.scrollSensitivity&&(j=e(document).scrollLeft(e(document).scrollLeft()+k.scrollSpeed))}}j!==!1&&e.ui.ddmanager&&!k.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,h)}}),e.ui.plugin.add("draggable","snap",{start:function(f,k){var j=e(this).data("draggable"),h=j.options;j.snapElements=[],e(h.snap.constructor!=String?h.snap.items||":data(draggable)":h.snap).each(function(){var n=e(this),p=n.offset();this!=j.element[0]&&j.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:p.top,left:p.left})})},drag:function(N,M){var L=e(this).data("draggable"),K=L.options,J=K.snapTolerance,I=M.offset.left,H=I+L.helperProportions.width,G=M.offset.top,F=G+L.helperProportions.height;for(var E=L.snapElements.length-1;E>=0;E--){var D=L.snapElements[E].left,C=D+L.snapElements[E].width,B=L.snapElements[E].top,A=B+L.snapElements[E].height;if(!(D-J<I&&I<C+J&&B-J<G&&G<A+J||D-J<I&&I<C+J&&B-J<F&&F<A+J||D-J<H&&H<C+J&&B-J<G&&G<A+J||D-J<H&&H<C+J&&B-J<F&&F<A+J)){L.snapElements[E].snapping&&L.options.snap.release&&L.options.snap.release.call(L.element,N,e.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=!1;continue}if(K.snapMode!="inner"){var z=Math.abs(B-F)<=J,y=Math.abs(A-G)<=J,x=Math.abs(D-H)<=J,w=Math.abs(C-I)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B-L.helperProportions.height,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D-L.helperProportions.width}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C}).left-L.margins.left)}var v=z||y||x||w;if(K.snapMode!="outer"){var z=Math.abs(B-G)<=J,y=Math.abs(A-F)<=J,x=Math.abs(D-I)<=J,w=Math.abs(C-H)<=J;z&&(M.position.top=L._convertPositionTo("relative",{top:B,left:0}).top-L.margins.top),y&&(M.position.top=L._convertPositionTo("relative",{top:A-L.helperProportions.height,left:0}).top-L.margins.top),x&&(M.position.left=L._convertPositionTo("relative",{top:0,left:D}).left-L.margins.left),w&&(M.position.left=L._convertPositionTo("relative",{top:0,left:C-L.helperProportions.width}).left-L.margins.left)}!L.snapElements[E].snapping&&(z||y||x||w||v)&&L.options.snap.snap&&L.options.snap.snap.call(L.element,N,e.extend(L._uiHash(),{snapItem:L.snapElements[E].item})),L.snapElements[E].snapping=z||y||x||w||v}}}),e.ui.plugin.add("draggable","stack",{start:function(h,p){var n=e(this).data("draggable").options,k=e.makeArray(e(n.stack)).sort(function(f,q){return(parseInt(e(f).css("zIndex"),10)||0)-(parseInt(e(q).css("zIndex"),10)||0)});if(!k.length){return}var j=parseInt(k[0].style.zIndex)||0;e(k).each(function(b){this.style.zIndex=j+b}),this[0].style.zIndex=j+k.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(f,k){var j=e(k.helper),h=e(this).data("draggable").options;j.css("zIndex")&&(h._zIndex=j.css("zIndex")),j.css("zIndex",h.zIndex)},stop:function(f,j){var h=e(this).data("draggable").options;h._zIndex&&e(j.helper).css("zIndex",h._zIndex)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.droppable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var f=this.options,h=f.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(h)?h:function(b){return b.is(h)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[f.scope]=e.ui.ddmanager.droppables[f.scope]||[],e.ui.ddmanager.droppables[f.scope].push(this),f.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var f=e.ui.ddmanager.droppables[this.options.scope];for(var h=0;h<f.length;h++){f[h]==this&&f.splice(h,1)}return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(f,h){f=="accept"&&(this.accept=e.isFunction(h)?h:function(b){return b.is(h)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(f){var h=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),h&&this._trigger("activate",f,this.ui(h))},_deactivate:function(f){var h=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),h&&this._trigger("deactivate",f,this.ui(h))},_over:function(f){var h=e.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",f,this.ui(h)))},_out:function(f){var h=e.ui.ddmanager.current;if(!h||(h.currentItem||h.element)[0]==this.element[0]){return}this.accept.call(this.element[0],h.currentItem||h.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",f,this.ui(h)))},_drop:function(f,k){var j=k||e.ui.ddmanager.current;if(!j||(j.currentItem||j.element)[0]==this.element[0]){return !1}var h=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var n=e.data(this,"droppable");if(n.options.greedy&&!n.options.disabled&&n.options.scope==j.options.scope&&n.accept.call(n.element[0],j.currentItem||j.element)&&e.ui.intersect(j,e.extend(n,{offset:n.element.offset()}),n.options.tolerance)){return h=!0,!1}}),h?!1:this.accept.call(this.element[0],j.currentItem||j.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",f,this.ui(j)),this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.21"}),e.ui.intersect=function(F,E,D){if(!E.offset){return !1}var C=(F.positionAbs||F.position.absolute).left,B=C+F.helperProportions.width,A=(F.positionAbs||F.position.absolute).top,z=A+F.helperProportions.height,y=E.offset.left,x=y+E.proportions.width,w=E.offset.top,v=w+E.proportions.height;switch(D){case"fit":return y<=C&&B<=x&&w<=A&&z<=v;case"intersect":return y<C+F.helperProportions.width/2&&B-F.helperProportions.width/2<x&&w<A+F.helperProportions.height/2&&z-F.helperProportions.height/2<v;case"pointer":var t=(F.positionAbs||F.position.absolute).left+(F.clickOffset||F.offset.click).left,q=(F.positionAbs||F.position.absolute).top+(F.clickOffset||F.offset.click).top,p=e.ui.isOver(q,t,w,y,E.proportions.height,E.proportions.width);return p;case"touch":return(A>=w&&A<=v||z>=w&&z<=v||A<w&&z>v)&&(C>=y&&C<=x||B>=y&&B<=x||C<y&&B>x);default:return !1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(j,v){var t=e.ui.ddmanager.droppables[j.options.scope]||[],q=v?v.type:null,p=(j.currentItem||j.element).find(":data(droppable)").andSelf();g:for(var n=0;n<t.length;n++){if(t[n].options.disabled||j&&!t[n].accept.call(t[n].element[0],j.currentItem||j.element)){continue}for(var k=0;k<p.length;k++){if(p[k]==t[n].element[0]){t[n].proportions.height=0;continue g}}t[n].visible=t[n].element.css("display")!="none";if(!t[n].visible){continue}q=="mousedown"&&t[n]._activate.call(t[n],v),t[n].offset=t[n].element.offset(),t[n].proportions={width:t[n].element[0].offsetWidth,height:t[n].element[0].offsetHeight}}},drop:function(f,j){var h=!1;return e.each(e.ui.ddmanager.droppables[f.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&e.ui.intersect(f,this,this.options.tolerance)&&(h=this._drop.call(this,j)||h),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,j))}),h},dragStart:function(f,h){f.element.parents(":not(body,html)").bind("scroll.droppable",function(){f.options.refreshPositions||e.ui.ddmanager.prepareOffsets(f,h)})},drag:function(f,h){f.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(f,h),e.each(e.ui.ddmanager.droppables[f.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var n=e.ui.intersect(f,this,this.options.tolerance),k=!n&&this.isover==1?"isout":n&&this.isover==0?"isover":null;if(!k){return}var j;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");b.length&&(j=e.data(b[0],"droppable"),j.greedyChild=k=="isover"?1:0)}j&&k=="isover"&&(j.isover=0,j.isout=1,j._out.call(j,h)),this[k]=1,this[k=="isout"?"isover":"isout"]=0,this[k=="isover"?"_over":"_out"].call(this,h),j&&k=="isout"&&(j.isout=0,j.isover=1,j._over.call(j,h))})},dragStop:function(f,h){f.element.parents(":not(body,html)").unbind("scroll.droppable"),f.options.refreshPositions||e.ui.ddmanager.prepareOffsets(f,h)}}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.resizable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(f,e){f.widget("ui.resizable",f.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var k=this,w=this.options;this.element.addClass("ui-resizable"),f.extend(this,{_aspectRatio:!!w.aspectRatio,aspectRatio:w.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:w.helper||w.ghost||w.animate?w.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(f('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=w.handles||(f(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var v=this.handles.split(",");this.handles={};for(var t=0;t<v.length;t++){var q=f.trim(v[t]),p="ui-resizable-"+q,n=f('<div class="ui-resizable-handle '+p+'"></div>');n.css({zIndex:w.zIndex}),"se"==q&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[q]=".ui-resizable-"+q,this.element.append(n)}}this._renderAxis=function(x){x=x||this.element;for(var B in this.handles){this.handles[B].constructor==String&&(this.handles[B]=f(this.handles[B],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var A=f(this.handles[B],this.element),z=0;z=/sw|ne|nw|se|n|s/.test(B)?A.outerHeight():A.outerWidth();var y=["padding",/ne|nw|n/.test(B)?"Top":/se|sw|s/.test(B)?"Bottom":/^e$/.test(B)?"Right":"Left"].join("");x.css(y,z),this._proportionallyResize()}if(!f(this.handles[B]).length){continue}}},this._renderAxis(this.element),this._handles=f(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!k.resizing){if(this.className){var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}k.axis=b&&b[1]?b[1]:"se"}}),w.autoHide&&(this._handles.hide(),f(this.element).addClass("ui-resizable-autohide").hover(function(){if(w.disabled){return}f(this).removeClass("ui-resizable-autohide"),k._handles.show()},function(){if(w.disabled){return}k.resizing||(f(this).addClass("ui-resizable-autohide"),k._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(n){f(n).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var k=this.element;k.after(this.originalElement.css({position:k.css("position"),width:k.outerWidth(),height:k.outerHeight(),top:k.css("top"),left:k.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),this},_mouseCapture:function(k){var p=!1;for(var n in this.handles){f(this.handles[n])[0]==k.target&&(p=!0)}return !this.options.disabled&&p},_mouseStart:function(k){var w=this.options,v=this.element.position(),t=this.element;this.resizing=!0,this.documentScroll={top:f(document).scrollTop(),left:f(document).scrollLeft()},(t.is(".ui-draggable")||/absolute/.test(t.css("position")))&&t.css({position:"absolute",top:v.top,left:v.left}),this._renderProxy();var q=j(this.helper.css("left")),p=j(this.helper.css("top"));w.containment&&(q+=f(w.containment).scrollLeft()||0,p+=f(w.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:q,top:p},this.size=this._helper?{width:t.outerWidth(),height:t.outerHeight()}:{width:t.width(),height:t.height()},this.originalSize=this._helper?{width:t.outerWidth(),height:t.outerHeight()}:{width:t.width(),height:t.height()},this.originalPosition={left:q,top:p},this.sizeDiff={width:t.outerWidth()-t.width(),height:t.outerHeight()-t.height()},this.originalMousePosition={left:k.pageX,top:k.pageY},this.aspectRatio=typeof w.aspectRatio=="number"?w.aspectRatio:this.originalSize.width/this.originalSize.height||1;var n=f(".ui-resizable-"+this.axis).css("cursor");return f("body").css("cursor",n=="auto"?this.axis+"-resize":n),t.addClass("ui-resizable-resizing"),this._propagate("start",k),!0},_mouseDrag:function(E){var D=this.helper,C=this.options,B={},A=this,z=this.originalMousePosition,y=this.axis,x=E.pageX-z.left||0,w=E.pageY-z.top||0,v=this._change[y];if(!v){return !1}var t=v.apply(this,[E,x,w]),q=f.browser.msie&&f.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(E.shiftKey);if(this._aspectRatio||E.shiftKey){t=this._updateRatio(t,E)}return t=this._respectSize(t,E),this._propagate("resize",E),D.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(t),this._trigger("resize",E,this.ui()),!1},_mouseStop:function(A){this.resizing=!1;var z=this.options,y=this;if(this._helper){var x=this._proportionallyResizeElements,w=x.length&&/textarea/i.test(x[0].nodeName),v=w&&f.ui.hasScroll(x[0],"left")?0:y.sizeDiff.height,t=w?0:y.sizeDiff.width,q={width:y.helper.width()-t,height:y.helper.height()-v},p=parseInt(y.element.css("left"),10)+(y.position.left-y.originalPosition.left)||null,n=parseInt(y.element.css("top"),10)+(y.position.top-y.originalPosition.top)||null;z.animate||this.element.css(f.extend(q,{top:n,left:p})),y.helper.height(y.size.height),y.helper.width(y.size.width),this._helper&&!z.animate&&this._proportionallyResize()}return f("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",A),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(k){var d=this.options,v,t,q,p,n;n={minWidth:h(d.minWidth)?d.minWidth:0,maxWidth:h(d.maxWidth)?d.maxWidth:Infinity,minHeight:h(d.minHeight)?d.minHeight:0,maxHeight:h(d.maxHeight)?d.maxHeight:Infinity};if(this._aspectRatio||k){v=n.minHeight*this.aspectRatio,q=n.minWidth/this.aspectRatio,t=n.maxHeight*this.aspectRatio,p=n.maxWidth/this.aspectRatio,v>n.minWidth&&(n.minWidth=v),q>n.minHeight&&(n.minHeight=q),t<n.maxWidth&&(n.maxWidth=t),p<n.maxHeight&&(n.maxHeight=p)}this._vBoundaries=n},_updateCache:function(k){var d=this.options;this.offset=this.helper.offset(),h(k.left)&&(this.position.left=k.left),h(k.top)&&(this.position.top=k.top),h(k.height)&&(this.size.height=k.height),h(k.width)&&(this.size.width=k.width)},_updateRatio:function(k,d){var t=this.options,q=this.position,p=this.size,n=this.axis;return h(k.height)?k.width=k.height*this.aspectRatio:h(k.width)&&(k.height=k.width/this.aspectRatio),n=="sw"&&(k.left=q.left+(p.width-k.width),k.top=null),n=="nw"&&(k.top=q.top+(p.height-k.height),k.left=q.left+(p.width-k.width)),k},_respectSize:function(G,F){var E=this.helper,D=this._vBoundaries,C=this._aspectRatio||F.shiftKey,B=this.axis,A=h(G.width)&&D.maxWidth&&D.maxWidth<G.width,z=h(G.height)&&D.maxHeight&&D.maxHeight<G.height,y=h(G.width)&&D.minWidth&&D.minWidth>G.width,x=h(G.height)&&D.minHeight&&D.minHeight>G.height;y&&(G.width=D.minWidth),x&&(G.height=D.minHeight),A&&(G.width=D.maxWidth),z&&(G.height=D.maxHeight);var w=this.originalPosition.left+this.originalSize.width,v=this.position.top+this.size.height,t=/sw|nw|w/.test(B),q=/nw|ne|n/.test(B);y&&t&&(G.left=w-D.minWidth),A&&t&&(G.left=w-D.maxWidth),x&&q&&(G.top=v-D.minHeight),z&&q&&(G.top=v-D.maxHeight);var d=!G.width&&!G.height;return d&&!G.left&&G.top?G.top=null:d&&!G.top&&G.left&&(G.left=null),G},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var v=this.helper||this.element;for(var t=0;t<this._proportionallyResizeElements.length;t++){var q=this._proportionallyResizeElements[t];if(!this.borderDif){var p=[q.css("borderTopWidth"),q.css("borderRightWidth"),q.css("borderBottomWidth"),q.css("borderLeftWidth")],n=[q.css("paddingTop"),q.css("paddingRight"),q.css("paddingBottom"),q.css("paddingLeft")];this.borderDif=f.map(p,function(x,w){var z=parseInt(x,10)||0,y=parseInt(n[w],10)||0;return z+y})}if(!f.browser.msie||!f(v).is(":hidden")&&!f(v).parents(":hidden").length){q.css({height:v.height()-this.borderDif[0]-this.borderDif[2]||0,width:v.width()-this.borderDif[1]-this.borderDif[3]||0})}else{continue}}},_renderProxy:function(){var k=this.element,t=this.options;this.elementOffset=k.offset();if(this._helper){this.helper=this.helper||f('<div style="overflow:hidden;"></div>');var q=f.browser.msie&&f.browser.version<7,p=q?1:0,n=q?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-p+"px",top:this.elementOffset.top-p+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(k,d,n){return{width:this.originalSize.width+d}},w:function(n,k,v){var t=this.options,q=this.originalSize,p=this.originalPosition;return{left:p.left+k,width:q.width-k}},n:function(n,k,v){var t=this.options,q=this.originalSize,p=this.originalPosition;return{top:p.top+v,height:q.height-v}},s:function(k,d,n){return{height:this.originalSize.height+n}},se:function(k,p,n){return f.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[k,p,n]))},sw:function(k,p,n){return f.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[k,p,n]))},ne:function(k,p,n){return f.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[k,p,n]))},nw:function(k,p,n){return f.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[k,p,n]))}},_propagate:function(d,k){f.ui.plugin.call(this,d,[k,this.ui()]),d!="resize"&&this._trigger(d,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),f.extend(f.ui.resizable,{version:"1.8.21"}),f.ui.plugin.add("resizable","alsoResize",{start:function(k,t){var q=f(this).data("resizable"),p=q.options,n=function(d){f(d).each(function(){var v=f(this);v.data("resizable-alsoresize",{width:parseInt(v.width(),10),height:parseInt(v.height(),10),left:parseInt(v.css("left"),10),top:parseInt(v.css("top"),10)})})};typeof p.alsoResize=="object"&&!p.alsoResize.parentNode?p.alsoResize.length?(p.alsoResize=p.alsoResize[0],n(p.alsoResize)):f.each(p.alsoResize,function(b){n(b)}):n(p.alsoResize)},resize:function(k,x){var w=f(this).data("resizable"),v=w.options,t=w.originalSize,q=w.originalPosition,p={height:w.size.height-t.height||0,width:w.size.width-t.width||0,top:w.position.top-q.top||0,left:w.position.left-q.left||0},n=function(y,z){f(y).each(function(){var d=f(this),C=f(this).data("resizable-alsoresize"),B={},A=z&&z.length?z:d.parents(x.originalElement[0]).length?["width","height"]:["width","height","top","left"];f.each(A,function(E,D){var F=(C[D]||0)+(p[D]||0);F&&F>=0&&(B[D]=F||null)}),d.css(B)})};typeof v.alsoResize=="object"&&!v.alsoResize.nodeType?f.each(v.alsoResize,function(y,d){n(y,d)}):n(v.alsoResize)},stop:function(d,k){f(this).removeData("resizable-alsoresize")}}),f.ui.plugin.add("resizable","animate",{stop:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z._proportionallyResizeElements,w=x.length&&/textarea/i.test(x[0].nodeName),v=w&&f.ui.hasScroll(x[0],"left")?0:z.sizeDiff.height,t=w?0:z.sizeDiff.width,q={width:z.size.width-t,height:z.size.height-v},p=parseInt(z.element.css("left"),10)+(z.position.left-z.originalPosition.left)||null,n=parseInt(z.element.css("top"),10)+(z.position.top-z.originalPosition.top)||null;z.element.animate(f.extend(q,n&&p?{top:n,left:p}:{}),{duration:y.animateDuration,easing:y.animateEasing,step:function(){var b={width:parseInt(z.element.css("width"),10),height:parseInt(z.element.css("height"),10),top:parseInt(z.element.css("top"),10),left:parseInt(z.element.css("left"),10)};x&&x.length&&f(x[0]).css({width:b.width,height:b.height}),z._updateCache(b),z._propagate("resize",B)}})}}),f.ui.plugin.add("resizable","containment",{start:function(G,F){var E=f(this).data("resizable"),D=E.options,C=E.element,B=D.containment,A=B instanceof f?B.get(0):/parent/.test(B)?C.parent().get(0):B;if(!A){return}E.containerElement=f(A);if(/document/.test(B)||B==document){E.containerOffset={left:0,top:0},E.containerPosition={left:0,top:0},E.parentData={element:f(document),left:0,top:0,width:f(document).width(),height:f(document).height()||document.body.parentNode.scrollHeight}}else{var z=f(A),y=[];f(["Top","Right","Left","Bottom"]).each(function(k,d){y[k]=j(z.css("padding"+d))}),E.containerOffset=z.offset(),E.containerPosition=z.position(),E.containerSize={height:z.innerHeight()-y[3],width:z.innerWidth()-y[1]};var x=E.containerOffset,w=E.containerSize.height,v=E.containerSize.width,t=f.ui.hasScroll(A,"left")?A.scrollWidth:v,q=f.ui.hasScroll(A)?A.scrollHeight:w;E.parentData={element:A,left:x.left,top:x.top,width:t,height:q}}},resize:function(H,G){var F=f(this).data("resizable"),E=F.options,D=F.containerSize,C=F.containerOffset,B=F.size,A=F.position,z=F._aspectRatio||H.shiftKey,y={top:0,left:0},x=F.containerElement;x[0]!=document&&/static/.test(x.css("position"))&&(y=C),A.left<(F._helper?C.left:0)&&(F.size.width=F.size.width+(F._helper?F.position.left-C.left:F.position.left-y.left),z&&(F.size.height=F.size.width/F.aspectRatio),F.position.left=E.helper?C.left:0),A.top<(F._helper?C.top:0)&&(F.size.height=F.size.height+(F._helper?F.position.top-C.top:F.position.top),z&&(F.size.width=F.size.height*F.aspectRatio),F.position.top=F._helper?C.top:0),F.offset.left=F.parentData.left+F.position.left,F.offset.top=F.parentData.top+F.position.top;var w=Math.abs((F._helper?F.offset.left-y.left:F.offset.left-y.left)+F.sizeDiff.width),v=Math.abs((F._helper?F.offset.top-y.top:F.offset.top-C.top)+F.sizeDiff.height),t=F.containerElement.get(0)==F.element.parent().get(0),q=/relative|absolute/.test(F.containerElement.css("position"));t&&q&&(w-=F.parentData.left),w+F.size.width>=F.parentData.width&&(F.size.width=F.parentData.width-w,z&&(F.size.height=F.size.width/F.aspectRatio)),v+F.size.height>=F.parentData.height&&(F.size.height=F.parentData.height-v,z&&(F.size.width=F.size.height*F.aspectRatio))},stop:function(C,B){var A=f(this).data("resizable"),z=A.options,y=A.position,x=A.containerOffset,w=A.containerPosition,v=A.containerElement,t=f(A.helper),q=t.offset(),p=t.outerWidth()-A.sizeDiff.width,n=t.outerHeight()-A.sizeDiff.height;A._helper&&!z.animate&&/relative/.test(v.css("position"))&&f(this).css({left:q.left-w.left-x.left,width:p,height:n}),A._helper&&!z.animate&&/static/.test(v.css("position"))&&f(this).css({left:q.left-w.left-x.left,width:p,height:n})}}),f.ui.plugin.add("resizable","ghost",{start:function(k,t){var q=f(this).data("resizable"),p=q.options,n=q.size;q.ghost=q.originalElement.clone(),q.ghost.css({opacity:0.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof p.ghost=="string"?p.ghost:""),q.ghost.appendTo(q.helper)},resize:function(k,q){var p=f(this).data("resizable"),n=p.options;p.ghost&&p.ghost.css({position:"relative",height:p.size.height,width:p.size.width})},stop:function(k,q){var p=f(this).data("resizable"),n=p.options;p.ghost&&p.helper&&p.helper.get(0).removeChild(p.ghost.get(0))}}),f.ui.plugin.add("resizable","grid",{resize:function(B,A){var z=f(this).data("resizable"),y=z.options,x=z.size,w=z.originalSize,v=z.originalPosition,t=z.axis,q=y._aspectRatio||B.shiftKey;y.grid=typeof y.grid=="number"?[y.grid,y.grid]:y.grid;var p=Math.round((x.width-w.width)/(y.grid[0]||1))*(y.grid[0]||1),n=Math.round((x.height-w.height)/(y.grid[1]||1))*(y.grid[1]||1);/^(se|s|e)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n):/^(ne)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n,z.position.top=v.top-n):/^(sw)$/.test(t)?(z.size.width=w.width+p,z.size.height=w.height+n,z.position.left=v.left-p):(z.size.width=w.width+p,z.size.height=w.height+n,z.position.top=v.top-n,z.position.left=v.left-p)}});var j=function(b){return parseInt(b,10)||0},h=function(b){return !isNaN(parseInt(b,10))}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.selectable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var f=this;this.element.addClass("ui-selectable"),this.dragged=!1;var h;this.refresh=function(){h=e(f.options.filter,f.element[0]),h.addClass("ui-selectee"),h.each(function(){var j=e(this),k=j.offset();e.data(this,"selectable-item",{element:this,$element:j,left:k.left,top:k.top,right:k.left+j.outerWidth(),bottom:k.top+j.outerHeight(),startselected:!1,selected:j.hasClass("ui-selected"),selecting:j.hasClass("ui-selecting"),unselecting:j.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=h.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(f){var j=this;this.opos=[f.pageX,f.pageY];if(this.options.disabled){return}var h=this.options;this.selectees=e(h.filter,this.element[0]),this._trigger("start",f),e(h.appendTo).append(this.helper),this.helper.css({left:f.clientX,top:f.clientY,width:0,height:0}),h.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var b=e.data(this,"selectable-item");b.startselected=!0,!f.metaKey&&!f.ctrlKey&&(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,j._trigger("unselecting",f,{unselecting:b.element}))}),e(f.target).parents().andSelf().each(function(){var k=e.data(this,"selectable-item");if(k){var b=!f.metaKey&&!f.ctrlKey||!k.$element.hasClass("ui-selected");return k.$element.removeClass(b?"ui-unselecting":"ui-selected").addClass(b?"ui-selecting":"ui-unselecting"),k.unselecting=!b,k.selecting=b,k.selected=b,b?j._trigger("selecting",f,{selecting:k.element}):j._trigger("unselecting",f,{unselecting:k.element}),!1}})},_mouseDrag:function(j){var w=this;this.dragged=!0;if(this.options.disabled){return}var v=this.options,t=this.opos[0],q=this.opos[1],p=j.pageX,n=j.pageY;if(t>p){var k=p;p=t,t=k}if(q>n){var k=n;n=q,q=k}return this.helper.css({left:t,top:q,width:p-t,height:n-q}),this.selectees.each(function(){var f=e.data(this,"selectable-item");if(!f||f.element==w.element[0]){return}var b=!1;v.tolerance=="touch"?b=!(f.left>p||f.right<t||f.top>n||f.bottom<q):v.tolerance=="fit"&&(b=f.left>t&&f.right<p&&f.top>q&&f.bottom<n),b?(f.selected&&(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,w._trigger("selecting",j,{selecting:f.element}))):(f.selecting&&((j.metaKey||j.ctrlKey)&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),f.unselecting=!0),w._trigger("unselecting",j,{unselecting:f.element}))),f.selected&&!j.metaKey&&!j.ctrlKey&&!f.startselected&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,w._trigger("unselecting",j,{unselecting:f.element})))}),!1},_mouseStop:function(f){var j=this;this.dragged=!1;var h=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-unselecting"),b.unselecting=!1,b.startselected=!1,j._trigger("unselected",f,{unselected:b.element})}),e(".ui-selecting",this.element[0]).each(function(){var b=e.data(this,"selectable-item");b.$element.removeClass("ui-selecting").addClass("ui-selected"),b.selecting=!1,b.selected=!0,b.startselected=!0,j._trigger("selected",f,{selected:b.element})}),this._trigger("stop",f),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.sortable.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var f=this.items.length-1;f>=0;f--){this.items[f].item.removeData(this.widgetName+"-item")}return this},_setOption:function(f,h){f==="disabled"?(this.options[f]=h,this.widget()[h?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(j,v){var t=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(j);var q=null,p=this,n=e(j.target).parents().each(function(){if(e.data(this,t.widgetName+"-item")==p){return q=e(this),!1}});e.data(j.target,t.widgetName+"-item")==p&&(q=e(j.target));if(!q){return !1}if(this.options.handle&&!v){var k=!1;e(this.options.handle,q).find("*").andSelf().each(function(){this==j.target&&(k=!0)});if(!k){return !1}}return this.currentItem=q,this._removeCurrentsFromItems(),!0},_mouseStart:function(h,q,p){var n=this.options,k=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!p){for(var j=this.containers.length-1;j>=0;j--){this.containers[j]._trigger("activate",h,k._uiHash(this))}}return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(j){this.position=this._generatePosition(j),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var v=this.options,t=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-j.pageY<v.scrollSensitivity?this.scrollParent[0].scrollTop=t=this.scrollParent[0].scrollTop+v.scrollSpeed:j.pageY-this.overflowOffset.top<v.scrollSensitivity&&(this.scrollParent[0].scrollTop=t=this.scrollParent[0].scrollTop-v.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-j.pageX<v.scrollSensitivity?this.scrollParent[0].scrollLeft=t=this.scrollParent[0].scrollLeft+v.scrollSpeed:j.pageX-this.overflowOffset.left<v.scrollSensitivity&&(this.scrollParent[0].scrollLeft=t=this.scrollParent[0].scrollLeft-v.scrollSpeed)):(j.pageY-e(document).scrollTop()<v.scrollSensitivity?t=e(document).scrollTop(e(document).scrollTop()-v.scrollSpeed):e(window).height()-(j.pageY-e(document).scrollTop())<v.scrollSensitivity&&(t=e(document).scrollTop(e(document).scrollTop()+v.scrollSpeed)),j.pageX-e(document).scrollLeft()<v.scrollSensitivity?t=e(document).scrollLeft(e(document).scrollLeft()-v.scrollSpeed):e(window).width()-(j.pageX-e(document).scrollLeft())<v.scrollSensitivity&&(t=e(document).scrollLeft(e(document).scrollLeft()+v.scrollSpeed))),t!==!1&&e.ui.ddmanager&&!v.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,j)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var q=this.items.length-1;q>=0;q--){var p=this.items[q],n=p.item[0],k=this._intersectsWithPointer(p);if(!k){continue}if(n!=this.currentItem[0]&&this.placeholder[k==1?"next":"prev"]()[0]!=n&&!e.ui.contains(this.placeholder[0],n)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],n):!0)){this.direction=k==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(p)){this._rearrange(j,p)}else{break}this._trigger("change",j,this._uiHash());break}}return this._contactContainers(j),e.ui.ddmanager&&e.ui.ddmanager.drag(this,j),this._trigger("sort",j,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(f,k){if(!f){return}e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,f);if(this.options.revert){var j=this,h=j.placeholder.offset();j.reverting=!0,e(this.helper).animate({left:h.left-this.offset.parent.left-j.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-j.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){j._clear(f)})}else{this._clear(f,k)}return !1},cancel:function(){var f=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("deactivate",null,f._uiHash(this)),this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",null,f._uiHash(this)),this.containers[h].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(f){var j=this._getItemsAsjQuery(f&&f.connected),h=[];return f=f||{},e(j).each(function(){var b=(e(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);b&&h.push((f.key||b[1]+"[]")+"="+(f.key&&f.expression?b[1]:b[2]))}),!h.length&&f.key&&h.push(f.key+"="),h.join("&")},toArray:function(f){var j=this._getItemsAsjQuery(f&&f.connected),h=[];return f=f||{},j.each(function(){h.push(e(f.item||this).attr(f.attribute||"id")||"")}),h},_intersectsWith:function(C){var B=this.positionAbs.left,A=B+this.helperProportions.width,z=this.positionAbs.top,y=z+this.helperProportions.height,x=C.left,w=x+C.width,v=C.top,t=v+C.height,q=this.offset.click.top,p=this.offset.click.left,n=z+q>v&&z+q<t&&B+p>x&&B+p<w;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>C[this.floating?"width":"height"]?n:x<B+this.helperProportions.width/2&&A-this.helperProportions.width/2<w&&v<z+this.helperProportions.height/2&&y-this.helperProportions.height/2<t},_intersectsWithPointer:function(h){var q=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top,h.height),p=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left,h.width),n=q&&p,k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return n?this.floating?j&&j=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(h){var p=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width),k=this._getDragVerticalDirection(),j=this._getDragHorizontalDirection();return this.floating&&j?j=="right"&&n||j=="left"&&!n:k&&(k=="down"&&p||k=="up"&&!p)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(y){var x=this,w=[],v=[],t=this._connectWith();if(t&&y){for(var q=t.length-1;q>=0;q--){var p=e(t[q]);for(var n=p.length-1;n>=0;n--){var k=e.data(p[n],this.widgetName);k&&k!=this&&!k.options.disabled&&v.push([e.isFunction(k.options.items)?k.options.items.call(k.element):e(k.options.items,k.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),k])}}}v.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var q=v.length-1;q>=0;q--){v[q][0].each(function(){w.push(this)})}return e(w)},_removeCurrentsFromItems:function(){var h=this.currentItem.find(":data("+this.widgetName+"-item)");for(var f=0;f<this.items.length;f++){for(var j=0;j<h.length;j++){h[j]==this.items[f].item[0]&&this.items.splice(f,1)}}},_refreshItems:function(E){this.items=[],this.containers=[this];var D=this.items,C=this,B=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],E,{item:this.currentItem}):e(this.options.items,this.element),this]],A=this._connectWith();if(A&&this.ready){for(var z=A.length-1;z>=0;z--){var y=e(A[z]);for(var x=y.length-1;x>=0;x--){var w=e.data(y[x],this.widgetName);w&&w!=this&&!w.options.disabled&&(B.push([e.isFunction(w.options.items)?w.options.items.call(w.element[0],E,{item:this.currentItem}):e(w.options.items,w.element),w]),this.containers.push(w))}}}for(var z=B.length-1;z>=0;z--){var v=B[z][1],t=B[z][0];for(var x=0,q=t.length;x<q;x++){var p=e(t[x]);p.data(this.widgetName+"-item",v),D.push({item:p,instance:v,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var p=this.items.length-1;p>=0;p--){var n=this.items[p];if(n.instance!=this.currentContainer&&this.currentContainer&&n.item[0]!=this.currentItem[0]){continue}var k=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;h||(n.width=k.outerWidth(),n.height=k.outerHeight());var j=k.offset();n.left=j.left,n.top=j.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var p=this.containers.length-1;p>=0;p--){var j=this.containers[p].element.offset();this.containers[p].containerCache.left=j.left,this.containers[p].containerCache.top=j.top,this.containers[p].containerCache.width=this.containers[p].element.outerWidth(),this.containers[p].containerCache.height=this.containers[p].element.outerHeight()}}return this},_createPlaceholder:function(f){var k=f||this,j=k.options;if(!j.placeholder||j.placeholder.constructor==String){var h=j.placeholder;j.placeholder={element:function(){var n=e(document.createElement(k.currentItem[0].nodeName)).addClass(h||k.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return h||(n.style.visibility="hidden"),n},update:function(p,n){if(h&&!j.forcePlaceholderSize){return}n.height()||n.height(k.currentItem.innerHeight()-parseInt(k.currentItem.css("paddingTop")||0,10)-parseInt(k.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(k.currentItem.innerWidth()-parseInt(k.currentItem.css("paddingLeft")||0,10)-parseInt(k.currentItem.css("paddingRight")||0,10))}}}k.placeholder=e(j.placeholder.element.call(k.element,k.currentItem)),k.currentItem.after(k.placeholder),j.placeholder.update(k,k.placeholder)},_contactContainers:function(y){var x=null,w=null;for(var v=this.containers.length-1;v>=0;v--){if(e.ui.contains(this.currentItem[0],this.containers[v].element[0])){continue}if(this._intersectsWith(this.containers[v].containerCache)){if(x&&e.ui.contains(this.containers[v].element[0],x.element[0])){continue}x=this.containers[v],w=v}else{this.containers[v].containerCache.over&&(this.containers[v]._trigger("out",y,this._uiHash(this)),this.containers[v].containerCache.over=0)}}if(!x){return}if(this.containers.length===1){this.containers[w]._trigger("over",y,this._uiHash(this)),this.containers[w].containerCache.over=1}else{if(this.currentContainer!=this.containers[w]){var t=10000,q=null,p=this.positionAbs[this.containers[w].floating?"left":"top"];for(var n=this.items.length-1;n>=0;n--){if(!e.ui.contains(this.containers[w].element[0],this.items[n].item[0])){continue}var k=this.containers[w].floating?this.items[n].item.offset().left:this.items[n].item.offset().top;Math.abs(k-p)<t&&(t=Math.abs(k-p),q=this.items[n],this.direction=k-p>0?"down":"up")}if(!q&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[w],q?this._rearrange(y,q,null,!0):this._rearrange(y,null,this.containers[w].element,!0),this._trigger("change",y,this._uiHash()),this.containers[w]._trigger("change",y,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[w]._trigger("over",y,this._uiHash(this)),this.containers[w].containerCache.over=1}}},_createHelper:function(f){var j=this.options,h=e.isFunction(j.helper)?e(j.helper.apply(this.element[0],[f,this.currentItem])):j.helper=="clone"?this.currentItem.clone():this.currentItem;return h.parents("body").length||e(j.appendTo!="parent"?j.appendTo:this.currentItem[0].parentNode)[0].appendChild(h[0]),h[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(h[0].style.width==""||j.forceHelperSize)&&h.width(this.currentItem.width()),(h[0].style.height==""||j.forceHelperSize)&&h.height(this.currentItem.height()),h},_adjustOffsetFromHelper:function(f){typeof f=="string"&&(f=f.split(" ")),e.isArray(f)&&(f={left:+f[0],top:+f[1]||0}),"left" in f&&(this.offset.click.left=f.left+this.margins.left),"right" in f&&(this.offset.click.left=this.helperProportions.width-f.right+this.margins.left),"top" in f&&(this.offset.click.top=f.top+this.margins.top),"bottom" in f&&(this.offset.click.top=this.helperProportions.height-f.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var f=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(f.left+=this.scrollParent.scrollLeft(),f.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie){f={top:0,left:0}}return{top:f.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:f.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;f.containment=="parent"&&(f.containment=this.helper[0].parentNode);if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(f.containment)){var k=e(f.containment)[0],j=e(f.containment).offset(),h=e(k).css("overflow")!="hidden";this.containment=[j.left+(parseInt(e(k).css("borderLeftWidth"),10)||0)+(parseInt(e(k).css("paddingLeft"),10)||0)-this.margins.left,j.top+(parseInt(e(k).css("borderTopWidth"),10)||0)+(parseInt(e(k).css("paddingTop"),10)||0)-this.margins.top,j.left+(h?Math.max(k.scrollWidth,k.offsetWidth):k.offsetWidth)-(parseInt(e(k).css("borderLeftWidth"),10)||0)-(parseInt(e(k).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,j.top+(h?Math.max(k.scrollHeight,k.offsetHeight):k.offsetHeight)-(parseInt(e(k).css("borderTopWidth"),10)||0)-(parseInt(e(k).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,q){q||(q=this.position);var p=h=="absolute"?1:-1,n=this.options,k=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=/(html|body)/i.test(k[0].tagName);return{top:q.top+this.offset.relative.top*p+this.offset.parent.top*p-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():j?0:k.scrollTop())*p),left:q.left+this.offset.relative.left*p+this.offset.parent.left*p-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:k.scrollLeft())*p)}},_generatePosition:function(j){var w=this.options,v=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!e.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,t=/(html|body)/i.test(v[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var q=j.pageX,p=j.pageY;if(this.originalPosition){this.containment&&(j.pageX-this.offset.click.left<this.containment[0]&&(q=this.containment[0]+this.offset.click.left),j.pageY-this.offset.click.top<this.containment[1]&&(p=this.containment[1]+this.offset.click.top),j.pageX-this.offset.click.left>this.containment[2]&&(q=this.containment[2]+this.offset.click.left),j.pageY-this.offset.click.top>this.containment[3]&&(p=this.containment[3]+this.offset.click.top));if(w.grid){var n=this.originalPageY+Math.round((p-this.originalPageY)/w.grid[1])*w.grid[1];p=this.containment?n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3]?n-this.offset.click.top<this.containment[1]?n+w.grid[1]:n-w.grid[1]:n:n;var k=this.originalPageX+Math.round((q-this.originalPageX)/w.grid[0])*w.grid[0];q=this.containment?k-this.offset.click.left<this.containment[0]||k-this.offset.click.left>this.containment[2]?k-this.offset.click.left<this.containment[0]?k+w.grid[0]:k-w.grid[0]:k:k}}return{top:p-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():t?0:v.scrollTop()),left:q-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():t?0:v.scrollLeft())}},_rearrange:function(j,h,q,p){q?q[0].appendChild(this.placeholder[0]):h.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?h.item[0]:h.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this,k=this.counter;window.setTimeout(function(){k==n.counter&&n.refreshPositions(!p)},0)},_clear:function(h,p){this.reverting=!1;var n=[],k=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var j in this._storedCSS){if(this._storedCSS[j]=="auto"||this._storedCSS[j]=="static"){this._storedCSS[j]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!p&&n.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!p&&n.push(function(b){this._trigger("update",b,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){p||n.push(function(b){this._trigger("remove",b,this._uiHash())});for(var j=this.containers.length-1;j>=0;j--){e.ui.contains(this.containers[j].element[0],this.currentItem[0])&&!p&&(n.push(function(b){return function(f){b._trigger("receive",f,this._uiHash(this))}}.call(this,this.containers[j])),n.push(function(b){return function(f){b._trigger("update",f,this._uiHash(this))}}.call(this,this.containers[j])))}}for(var j=this.containers.length-1;j>=0;j--){p||n.push(function(b){return function(f){b._trigger("deactivate",f,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over&&(n.push(function(b){return function(f){b._trigger("out",f,this._uiHash(this))}}.call(this,this.containers[j])),this.containers[j].containerCache.over=0)}this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!p){this._trigger("beforeStop",h,this._uiHash());for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return !1}p||this._trigger("beforeStop",h,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!p){for(var j=0;j<n.length;j++){n[j].call(this,h)}this._trigger("stop",h,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(f){var h=f||this;return{helper:h.helper,placeholder:h.placeholder||e([]),position:h.position,originalPosition:h.originalPosition,offset:h.positionAbs,item:h.currentItem,sender:f?f.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var f=this,k=f.options;f.running=0,f.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),f.headers=f.element.find(k.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(k.disabled){return}e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(k.disabled){return}e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(k.disabled){return}e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(k.disabled){return}e(this).removeClass("ui-state-focus")}),f.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(k.navigation){var j=f.element.find("a").filter(k.navigationFilter).eq(0);if(j.length){var h=j.closest(".ui-accordion-header");h.length?f.active=h:f.active=j.closest(".ui-accordion-content").prev()}}f.active=f._findActive(f.active||k.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),f.active.next().addClass("ui-accordion-content-active"),f._createIcons(),f.resize(),f.element.attr("role","tablist"),f.headers.attr("role","tab").bind("keydown.accordion",function(b){return f._keydown(b)}).next().attr("role","tabpanel"),f.headers.not(f.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),f.active.length?f.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):f.headers.eq(0).attr("tabIndex",0),e.browser.safari||f.headers.find("a").attr("tabIndex",-1),k.event&&f.headers.bind(k.event.split(" ").join(".accordion ")+".accordion",function(b){f._clickHandler.call(f,b,this),b.preventDefault()})},_createIcons:function(){var f=this.options;f.icons&&(e("<span></span>").addClass("ui-icon "+f.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(f.icons.header).toggleClass(f.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var f=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var h=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(f.autoHeight||f.fillHeight)&&h.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(f,h){e.Widget.prototype._setOption.apply(this,arguments),f=="active"&&this.activate(h),f=="icons"&&(this._destroyIcons(),h&&this._createIcons()),f=="disabled"&&this.headers.add(this.headers.next())[h?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(h){if(this.options.disabled||h.altKey||h.ctrlKey){return}var p=e.ui.keyCode,n=this.headers.length,k=this.headers.index(h.target),j=!1;switch(h.keyCode){case p.RIGHT:case p.DOWN:j=this.headers[(k+1)%n];break;case p.LEFT:case p.UP:j=this.headers[(k-1+n)%n];break;case p.SPACE:case p.ENTER:this._clickHandler({target:h.target},h.target),h.preventDefault()}return j?(e(h.target).attr("tabIndex",-1),e(j).attr("tabIndex",0),j.focus(),!1):!0},resize:function(){var f=this.options,j;if(f.fillSpace){if(e.browser.msie){var h=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}j=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",h),this.headers.each(function(){j-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,j-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else{f.autoHeight&&(j=0,this.headers.next().each(function(){j=Math.max(j,e(this).height("").height())}).height(j))}return this},activate:function(h){this.options.active=h;var f=this._findActive(h)[0];return this._clickHandler({target:f},f),this},_findActive:function(f){return f?typeof f=="number"?this.headers.filter(":eq("+f+")"):this.headers.not(this.headers.not(f)):f===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(A,z){var y=this.options;if(y.disabled){return}if(!A.target){if(!y.collapsible){return}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(y.icons.headerSelected).addClass(y.icons.header),this.active.next().addClass("ui-accordion-content-active");var x=this.active.next(),w={options:y,newHeader:e([]),oldHeader:y.active,newContent:e([]),oldContent:x},v=this.active=e([]);this._toggle(v,x,w);return}var t=e(A.currentTarget||z),q=t[0]===this.active[0];y.active=y.collapsible&&q?!1:this.headers.index(t);if(this.running||!y.collapsible&&q){return}var p=this.active,v=t.next(),x=this.active.next(),w={options:y,newHeader:q&&y.collapsible?e([]):t,oldHeader:this.active,newContent:q&&y.collapsible?e([]):v,oldContent:x},n=this.headers.index(this.active[0])>this.headers.index(t[0]);this.active=q?e([]):t,this._toggle(v,x,w,q,n),p.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(y.icons.headerSelected).addClass(y.icons.header),q||(t.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(y.icons.header).addClass(y.icons.headerSelected),t.next().addClass("ui-accordion-content-active"));return},_toggle:function(C,B,A,z,y){var x=this,w=x.options;x.toShow=C,x.toHide=B,x.data=A;var v=function(){if(!x){return}return x._completed.apply(x,arguments)};x._trigger("changestart",null,x.data),x.running=B.size()===0?C.size():B.size();if(w.animated){var t={};w.collapsible&&z?t={toShow:e([]),toHide:B,complete:v,down:y,autoHeight:w.autoHeight||w.fillSpace}:t={toShow:C,toHide:B,complete:v,down:y,autoHeight:w.autoHeight||w.fillSpace},w.proxied||(w.proxied=w.animated),w.proxiedDuration||(w.proxiedDuration=w.duration),w.animated=e.isFunction(w.proxied)?w.proxied(t):w.proxied,w.duration=e.isFunction(w.proxiedDuration)?w.proxiedDuration(t):w.proxiedDuration;var q=e.ui.accordion.animations,p=w.duration,n=w.animated;n&&!q[n]&&!e.easing[n]&&(n="slide"),q[n]||(q[n]=function(b){this.slide(b,{easing:n,duration:p||700})}),q[n](t)}else{w.collapsible&&z?C.toggle():(B.hide(),C.show()),v(!0)}B.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),C.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(this.running){return}this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.21",animations:{slide:function(y,x){y=e.extend({easing:"swing",duration:300},y,x);if(!y.toHide.size()){y.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},y);return}if(!y.toShow.size()){y.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},y);return}var w=y.toShow.css("overflow"),v=0,t={},q={},p=["height","paddingTop","paddingBottom"],n,k=y.toShow;n=k[0].style.width,k.width(k.parent().width()-parseFloat(k.css("paddingLeft"))-parseFloat(k.css("paddingRight"))-(parseFloat(k.css("borderLeftWidth"))||0)-(parseFloat(k.css("borderRightWidth"))||0)),e.each(p,function(h,f){q[f]="hide";var b=(""+e.css(y.toShow[0],f)).match(/^([\d+-.]+)(.*)$/);t[f]={value:b[1],unit:b[2]||"px"}}),y.toShow.css({height:0,overflow:"hidden"}).show(),y.toHide.filter(":hidden").each(y.complete).end().filter(":visible").animate(q,{step:function(b,f){f.prop=="height"&&(v=f.end-f.start===0?0:(f.now-f.start)/(f.end-f.start)),y.toShow[0].style[f.prop]=v*t[f.prop].value+t[f.prop].unit},duration:y.duration,easing:y.easing,complete:function(){y.autoHeight||y.toShow.css("height",""),y.toShow.css({width:n,overflow:w}),y.complete()}})},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var h=this,k=this.element[0].ownerDocument,j;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(h.options.disabled||h.element.propAttr("readOnly")){return}j=!1;var b=e.ui.keyCode;switch(n.keyCode){case b.PAGE_UP:h._move("previousPage",n);break;case b.PAGE_DOWN:h._move("nextPage",n);break;case b.UP:h._keyEvent("previous",n);break;case b.DOWN:h._keyEvent("next",n);break;case b.ENTER:case b.NUMPAD_ENTER:h.menu.active&&(j=!0,n.preventDefault());case b.TAB:if(!h.menu.active){return}h.menu.select(n);break;case b.ESCAPE:h.element.val(h.term),h.close(n);break;default:clearTimeout(h.searching),h.searching=setTimeout(function(){h.term!=h.element.val()&&(h.selectedItem=null,h.search(null,n))},h.options.delay)}}).bind("keypress.autocomplete",function(b){j&&(j=!1,b.preventDefault())}).bind("focus.autocomplete",function(){if(h.options.disabled){return}h.selectedItem=null,h.previous=h.element.val()}).bind("blur.autocomplete",function(b){if(h.options.disabled){return}clearTimeout(h.searching),h.closing=setTimeout(function(){h.close(b),h._change(b)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",k)[0]).mousedown(function(n){var b=h.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(p){p.target!==h.element[0]&&p.target!==b&&!e.ui.contains(b,p.target)&&h.close()})},1),setTimeout(function(){clearTimeout(h.closing)},13)}).menu({focus:function(b,p){var n=p.item.data("item.autocomplete");!1!==h._trigger("focus",b,{item:n})&&/^key/.test(b.originalEvent.type)&&h.element.val(n.value)},selected:function(b,q){var p=q.item.data("item.autocomplete"),n=h.previous;h.element[0]!==k.activeElement&&(h.element.focus(),h.previous=n,setTimeout(function(){h.previous=n,h.selectedItem=p},1)),!1!==h._trigger("select",b,{item:p})&&h.element.val(p.value),h.term=h.element.val(),h.close(b),h.selectedItem=p},blur:function(b,n){h.menu.element.is(":visible")&&h.element.val()!==h.term&&h.element.val(h.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),h.beforeunloadHandler=function(){h.element.removeAttr("autocomplete")},e(window).bind("beforeunload",h.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(h,j){e.Widget.prototype._setOption.apply(this,arguments),h==="source"&&this._initSource(),h==="appendTo"&&this.menu.element.appendTo(e(j||"body",this.element[0].ownerDocument)[0]),h==="disabled"&&j&&this.xhr&&this.xhr.abort()},_initSource:function(){var h=this,k,j;e.isArray(this.options.source)?(k=this.options.source,this.source=function(n,p){p(e.ui.autocomplete.filter(k,n.term))}):typeof this.options.source=="string"?(j=this.options.source,this.source=function(n,b){h.xhr&&h.xhr.abort(),h.xhr=e.ajax({url:j,data:n,dataType:"json",success:function(q,p){b(q)},error:function(){b([])}})}):this.source=this.options.source},search:function(j,h){j=j!=null?j:this.element.val(),this.term=this.element.val();if(j.length<this.options.minLength){return this.close(h)}clearTimeout(this.closing);if(this._trigger("search",h)===!1){return}return this._search(j)},_search:function(b){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:b},this._response())},_response:function(){var j=this,h=++f;return function(b){h===f&&j.__response(b),j.pending--,j.pending||j.element.removeClass("ui-autocomplete-loading")}},__response:function(b){!this.options.disabled&&b&&b.length?(b=this._normalize(b),this._suggest(b),this._trigger("open")):this.close()},close:function(b){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",b))},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(h){return h.length&&h[0].label&&h[0].value?h:e.map(h,function(j){return typeof j=="string"?{label:j,value:j}:e.extend({label:j.label||j.value,value:j.value||j.label},j)})},_suggest:function(h){var j=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(j,h),this.menu.deactivate(),this.menu.refresh(),j.show(),this._resizeMenu(),j.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(h,k){var j=this;e.each(k,function(b,n){j._renderItem(h,n)})},_renderItem:function(h,j){return e("<li></li>").data("item.autocomplete",j).append(e("<a></a>").text(j.label)).appendTo(h)},_move:function(j,h){if(!this.menu.element.is(":visible")){this.search(null,h);return}if(this.menu.first()&&/^previous/.test(j)||this.menu.last()&&/^next/.test(j)){this.element.val(this.term),this.menu.deactivate();return}this.menu[j](h)},widget:function(){return this.menu.element},_keyEvent:function(j,h){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(j,h),h.preventDefault()}}}),e.extend(e.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(h,k){var j=new RegExp(e.ui.autocomplete.escapeRegex(k),"i");return e.grep(h,function(b){return j.test(b.label||b.value||b)})}})})(jQuery),function(b){b.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){if(!b(e.target).closest(".ui-menu-item a").length){return}e.preventDefault(),d.select(e)}),this.refresh()},refresh:function(){var d=this,e=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");e.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(f){d.activate(f,b(this).parent())}).mouseleave(function(){d.deactivate()})},activate:function(h,f){this.deactivate();if(this.hasScroll()){var n=f.offset().top-this.element.offset().top,k=this.element.scrollTop(),j=this.element.height();n<0?this.element.scrollTop(k+n):n>=j&&this.element.scrollTop(k+n-j+f.height())}this.active=f.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",h,{item:f})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,e,j){if(!this.active){this.activate(j,this.element.children(e));return}var h=this.active[f+"All"](".ui-menu-item").eq(0);h.length?this.activate(j,h):this.activate(j,this.element.children(e))},nextPage:function(f){if(this.hasScroll()){if(!this.active||this.last()){this.activate(f,this.element.children(".ui-menu-item:first"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-k-j+b(this).height();return d<10&&d>-10});h.length||(h=this.element.children(".ui-menu-item:last")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(".ui-menu-item:last"));return}var k=this.active.offset().top,j=this.element.height(),h=this.element.children(".ui-menu-item").filter(function(){var d=b(this).offset().top-k+j-b(this).height();return d<10&&d>-10});h.length||(h=this.element.children(".ui-menu-item:first")),this.activate(f,h)}else{this.activate(f,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[b.fn.prop?"prop":"attr"]("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.button.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(B,A){var z,y,x,w,v="ui-button ui-widget ui-state-default ui-corner-all",t="ui-state-hover ui-state-active ",q="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var d=B(this).find(":ui-button");setTimeout(function(){d.button("refresh")},1)},n=function(f){var k=f.name,j=f.form,h=B([]);return k&&(j?h=B(j).find("[name='"+k+"']"):h=B("[name='"+k+"']",f.ownerDocument).filter(function(){return !this.form})),h};B.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",p),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,k=this.options,j=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(j?"":" ui-state-active"),d="ui-state-focus";k.label===null&&(k.label=this.buttonElement.html()),this.buttonElement.addClass(v).attr("role","button").bind("mouseenter.button",function(){if(k.disabled){return}B(this).addClass("ui-state-hover"),this===z&&B(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(k.disabled){return}B(this).removeClass(f)}).bind("click.button",function(b){k.disabled&&(b.preventDefault(),b.stopImmediatePropagation())}),this.element.bind("focus.button",function(){e.buttonElement.addClass(d)}).bind("blur.button",function(){e.buttonElement.removeClass(d)}),j&&(this.element.bind("change.button",function(){if(w){return}e.refresh()}),this.buttonElement.bind("mousedown.button",function(b){if(k.disabled){return}w=!1,y=b.pageX,x=b.pageY}).bind("mouseup.button",function(b){if(k.disabled){return}if(y!==b.pageX||x!==b.pageY){w=!0}})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(k.disabled||w){return !1}B(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(k.disabled||w){return !1}B(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var b=e.element[0];n(b).not(b).map(function(){return B(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(k.disabled){return !1}B(this).addClass("ui-state-active"),z=this,B(document).one("mouseup",function(){z=null})}).bind("mouseup.button",function(){if(k.disabled){return !1}B(this).removeClass("ui-state-active")}).bind("keydown.button",function(h){if(k.disabled){return !1}(h.keyCode==B.ui.keyCode.SPACE||h.keyCode==B.ui.keyCode.ENTER)&&B(this).addClass("ui-state-active")}).bind("keyup.button",function(){B(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(h){h.keyCode===B.ui.keyCode.SPACE&&B(this).click()})),this._setOption("disabled",k.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),d="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(d),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(d),this.buttonElement.length||(this.buttonElement=e.find(d))),this.element.addClass("ui-helper-hidden-accessible");var f=this.element.is(":checked");f&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",f)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(v+" "+t+" "+q).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),B.Widget.prototype.destroy.call(this)},_setOption:function(d,e){B.Widget.prototype._setOption.apply(this,arguments);if(d==="disabled"){e?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var d=this.element.is(":disabled");d!==this.options.disabled&&this._setOption("disabled",d),this.type==="radio"?n(this.element[0]).each(function(){B(this).is(":checked")?B(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):B(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var h=this.buttonElement.removeClass(q),D=B("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(h.empty()).text(),C=this.options.icons,k=C.primary&&C.secondary,j=[];C.primary||C.secondary?(this.options.text&&j.push("ui-button-text-icon"+(k?"s":C.primary?"-primary":"-secondary")),C.primary&&h.prepend("<span class='ui-button-icon-primary ui-icon "+C.primary+"'></span>"),C.secondary&&h.append("<span class='ui-button-icon-secondary ui-icon "+C.secondary+"'></span>"),this.options.text||(j.push(k?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||h.attr("title",D))):j.push("ui-button-text-only"),h.addClass(j.join(" "))}}),B.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(d,e){d==="disabled"&&this.buttons.button("option",d,e),B.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var d=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return B(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(d?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(d?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return B(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),B.Widget.prototype.destroy.call(this)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){var q="ui-dialog ui-widget ui-widget-content ui-corner-all ",p={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},k=j.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};j.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(d){var e=j(this).css(d).offset().top;e<0&&j(this).css("top",d.top-e)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var D=this,C=D.options,B=C.title||"&#160;",A=j.ui.dialog.getTitleId(D.element),z=(D.uiDialog=j("<div></div>")).appendTo(document.body).hide().addClass(q+C.dialogClass).css({zIndex:C.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(b){C.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(D.close(b),b.preventDefault())}).attr({role:"dialog","aria-labelledby":A}).mousedown(function(b){D.moveToTop(!1,b)}),y=D.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(z),x=(D.uiDialogTitlebar=j("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(z),w=j('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){w.addClass("ui-state-hover")},function(){w.removeClass("ui-state-hover")}).focus(function(){w.addClass("ui-state-focus")}).blur(function(){w.removeClass("ui-state-focus")}).click(function(b){return D.close(b),!1}).appendTo(x),v=(D.uiDialogTitlebarCloseText=j("<span></span>")).addClass("ui-icon ui-icon-closethick").text(C.closeText).appendTo(w),t=j("<span></span>").addClass("ui-dialog-title").attr("id",A).html(B).prependTo(x);j.isFunction(C.beforeclose)&&!j.isFunction(C.beforeClose)&&(C.beforeClose=C.beforeclose),x.find("*").add(x).disableSelection(),C.draggable&&j.fn.draggable&&D._makeDraggable(),C.resizable&&j.fn.resizable&&D._makeResizable(),D._createButtons(C.buttons),D._isOpen=!1,j.fn.bgiframe&&z.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var b=this;return b.overlay&&b.overlay.destroy(),b.uiDialog.hide(),b.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),b.uiDialog.remove(),b.originalTitle&&b.element.attr("title",b.originalTitle),b},widget:function(){return this.uiDialog},close:function(f){var w=this,v,t;if(!1===w._trigger("beforeClose",f)){return}return w.overlay&&w.overlay.destroy(),w.uiDialog.unbind("keypress.ui-dialog"),w._isOpen=!1,w.options.hide?w.uiDialog.hide(w.options.hide,function(){w._trigger("close",f)}):(w.uiDialog.hide(),w._trigger("close",f)),j.ui.dialog.overlay.resize(),w.options.modal&&(v=0,j(".ui-dialog").each(function(){this!==w.uiDialog[0]&&(t=j(this).css("z-index"),isNaN(t)||(v=Math.max(v,t)))}),j.ui.dialog.maxZ=v),w},isOpen:function(){return this._isOpen},moveToTop:function(t,y){var x=this,w=x.options,v;return w.modal&&!t||!w.stack&&!w.modal?x._trigger("focus",y):(w.zIndex>j.ui.dialog.maxZ&&(j.ui.dialog.maxZ=w.zIndex),x.overlay&&(j.ui.dialog.maxZ+=1,x.overlay.$el.css("z-index",j.ui.dialog.overlay.maxZ=j.ui.dialog.maxZ)),v={scrollTop:x.element.scrollTop(),scrollLeft:x.element.scrollLeft()},j.ui.dialog.maxZ+=1,x.uiDialog.css("z-index",j.ui.dialog.maxZ),x.element.attr(v),x._trigger("focus",y),x)},open:function(){if(this._isOpen){return}var e=this,t=e.options,f=e.uiDialog;return e.overlay=t.modal?new j.ui.dialog.overlay(e):null,e._size(),e._position(t.position),f.show(t.show),e.moveToTop(!0),t.modal&&f.bind("keydown.ui-dialog",function(v){if(v.keyCode!==j.ui.keyCode.TAB){return}var y=j(":tabbable",this),x=y.filter(":first"),w=y.filter(":last");if(v.target===w[0]&&!v.shiftKey){return x.focus(1),!1}if(v.target===x[0]&&v.shiftKey){return w.focus(1),!1}}),j(e.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus(),e._isOpen=!0,e._trigger("open"),e},_createButtons:function(f){var x=this,w=!1,v=j("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),t=j("<div></div>").addClass("ui-dialog-buttonset").appendTo(v);x.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof f=="object"&&f!==null&&j.each(f,function(){return !(w=!0)}),w&&(j.each(f,function(y,A){A=j.isFunction(A)?{click:A,text:y}:A;var z=j('<button type="button"></button>').click(function(){A.click.apply(x.element[0],arguments)}).appendTo(t);j.each(A,function(e,d){if(e==="click"){return}e in k?z[e](d):z.attr(e,d)}),j.fn.button&&z.button()}),v.appendTo(x.uiDialog))},_makeDraggable:function(){function v(b){return{position:b.position,offset:b.offset}}var t=this,y=t.options,x=j(document),w;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,b){w=y.height==="auto"?"auto":j(this).height(),j(this).height(j(this).height()).addClass("ui-dialog-dragging"),t._trigger("dragStart",e,v(b))},drag:function(b,d){t._trigger("drag",b,v(d))},stop:function(d,b){y.position=[b.position.left-x.scrollLeft(),b.position.top-x.scrollTop()],j(this).removeClass("ui-dialog-dragging").height(w),t._trigger("dragStop",d,v(b)),j.ui.dialog.overlay.resize()}})},_makeResizable:function(y){function b(d){return{originalPosition:d.originalPosition,originalSize:d.originalSize,position:d.position,size:d.size}}y=y===h?this.options.resizable:y;var x=this,w=x.options,v=x.uiDialog.css("position"),t=typeof y=="string"?y:"n,e,s,w,se,sw,ne,nw";x.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:x.element,maxWidth:w.maxWidth,maxHeight:w.maxHeight,minWidth:w.minWidth,minHeight:x._minHeight(),handles:t,start:function(d,e){j(this).addClass("ui-dialog-resizing"),x._trigger("resizeStart",d,b(e))},resize:function(e,d){x._trigger("resize",e,b(d))},stop:function(d,e){j(this).removeClass("ui-dialog-resizing"),w.height=j(this).height(),w.width=j(this).width(),x._trigger("resizeStop",d,b(e)),j.ui.dialog.overlay.resize()}}).css("position",v).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var b=this.options;return b.height==="auto"?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(f){var w=[],v=[0,0],t;if(f){if(typeof f=="string"||typeof f=="object"&&"0" in f){w=f.split?f.split(" "):[f[0],f[1]],w.length===1&&(w[1]=w[0]),j.each(["left","top"],function(e,d){+w[e]===w[e]&&(v[e]=w[e],w[e]=d)}),f={my:w.join(" "),at:w.join(" "),offset:v.join(" ")}}f=j.extend({},j.ui.dialog.prototype.options.position,f)}else{f=j.ui.dialog.prototype.options.position}t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(j.extend({of:window},f)),t||this.uiDialog.hide()},_setOptions:function(d){var v=this,t={},e=!1;j.each(d,function(w,f){v._setOption(w,f),w in p&&(e=!0),w in n&&(t[w]=f)}),e&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",t)},_setOption:function(t,z){var y=this,x=y.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":y._createButtons(z);break;case"closeText":y.uiDialogTitlebarCloseText.text(""+z);break;case"dialogClass":x.removeClass(y.options.dialogClass).addClass(q+z);break;case"disabled":z?x.addClass("ui-dialog-disabled"):x.removeClass("ui-dialog-disabled");break;case"draggable":var w=x.is(":data(draggable)");w&&!z&&x.draggable("destroy"),!w&&z&&y._makeDraggable();break;case"position":y._position(z);break;case"resizable":var v=x.is(":data(resizable)");v&&!z&&x.resizable("destroy"),v&&typeof z=="string"&&x.resizable("option","handles",z),!v&&z!==!1&&y._makeResizable(z);break;case"title":j(".ui-dialog-title",y.uiDialogTitlebar).html(""+(z||"&#160;"))}j.Widget.prototype._setOption.apply(y,arguments)},_size:function(){var t=this.options,y,x,w=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),y=this.uiDialog.css({height:"auto",width:t.width}).height(),x=Math.max(0,t.minHeight-y);if(t.height==="auto"){if(j.support.minHeight){this.element.css({minHeight:x,height:"auto"})}else{this.uiDialog.show();var v=this.element.css("height","auto").height();w||this.uiDialog.hide(),this.element.height(Math.max(v,x))}}else{this.element.height(Math.max(t.height-y,0))}this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),j.extend(j.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(e){var d=e.attr("id");return d||(this.uuid+=1,d=this.uuid),"ui-dialog-title-"+d},overlay:function(d){this.$el=j.ui.dialog.overlay.create(d)}}),j.extend(j.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:j.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(b){return b+".dialog-overlay"}).join(" "),create:function(d){this.instances.length===0&&(setTimeout(function(){j.ui.dialog.overlay.instances.length&&j(document).bind(j.ui.dialog.overlay.events,function(f){if(j(f.target).zIndex()<j.ui.dialog.overlay.maxZ){return !1}})},1),j(document).bind("keydown.dialog-overlay",function(b){d.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===j.ui.keyCode.ESCAPE&&(d.close(b),b.preventDefault())}),j(window).bind("resize.dialog-overlay",j.ui.dialog.overlay.resize));var e=(this.oldInstances.pop()||j("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return j.fn.bgiframe&&e.bgiframe(),this.instances.push(e),e},destroy:function(e){var t=j.inArray(e,this.instances);t!=-1&&this.oldInstances.push(this.instances.splice(t,1)[0]),this.instances.length===0&&j([document,window]).unbind(".dialog-overlay"),e.remove();var f=0;j.each(this.instances,function(){f=Math.max(f,this.css("z-index"))}),this.maxZ=f},height:function(){var d,e;return j.browser.msie&&j.browser.version<7?(d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),e=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),d<e?j(window).height()+"px":d+"px"):j(document).height()+"px"},width:function(){var d,e;return j.browser.msie?(d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),d<e?j(window).width()+"px":d+"px"):j(document).width()+"px"},resize:function(){var d=j([]);j.each(j.ui.dialog.overlay.instances,function(){d=d.add(this)}),d.css({width:0,height:0}).css({width:j.ui.dialog.overlay.width(),height:j.ui.dialog.overlay.height()})}}),j.extend(j.ui.dialog.overlay.prototype,{destroy:function(){j.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){var f=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var j=this,v=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),q="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",p=v.values&&v.values.length||1,n=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(v.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),v.range&&(v.range===!0&&(v.values||(v.values=[this._valueMin(),this._valueMin()]),v.values.length&&v.values.length!==2&&(v.values=[v.values[0],v.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(v.range==="min"||v.range==="max"?" ui-slider-range-"+v.range:"")));for(var k=t.length;k<p;k+=1){n.push(q)}this.handles=t.add(e(n.join("")).appendTo(j.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){v.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){v.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(h){e(this).data("index.ui-slider-handle",h)}),this.handles.keydown(function(A){var z=e(this).data("index.ui-slider-handle"),y,x,w,b;if(j.options.disabled){return}switch(A.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:A.preventDefault();if(!j._keySliding){j._keySliding=!0,e(this).addClass("ui-state-active"),y=j._start(A,z);if(y===!1){return}}}b=j.options.step,j.options.values&&j.options.values.length?x=w=j.values(z):x=w=j.value();switch(A.keyCode){case e.ui.keyCode.HOME:w=j._valueMin();break;case e.ui.keyCode.END:w=j._valueMax();break;case e.ui.keyCode.PAGE_UP:w=j._trimAlignValue(x+(j._valueMax()-j._valueMin())/f);break;case e.ui.keyCode.PAGE_DOWN:w=j._trimAlignValue(x-(j._valueMax()-j._valueMin())/f);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(x===j._valueMax()){return}w=j._trimAlignValue(x+b);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(x===j._valueMin()){return}w=j._trimAlignValue(x-b)}j._slide(A,z,w)}).keyup(function(h){var b=e(this).data("index.ui-slider-handle");j._keySliding&&(j._keySliding=!1,j._stop(h,b),j._change(h,b),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(B){var A=this.options,z,y,x,w,v,t,q,p,n;return A.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),z={x:B.pageX,y:B.pageY},y=this._normValueFromMouse(z),x=this._valueMax()-this._valueMin()+1,v=this,this.handles.each(function(h){var j=Math.abs(y-v.values(h));x>j&&(x=j,w=e(this),t=h)}),A.range===!0&&this.values(1)===A.min&&(t+=1,w=e(this.handles[t])),q=this._start(B,t),q===!1?!1:(this._mouseSliding=!0,v._handleIndex=t,w.addClass("ui-state-active").focus(),p=w.offset(),n=!e(B.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:B.pageX-p.left-w.width()/2,top:B.pageY-p.top-w.height()/2-(parseInt(w.css("borderTopWidth"),10)||0)-(parseInt(w.css("borderBottomWidth"),10)||0)+(parseInt(w.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(B,t,y),this._animateOff=!0,!0))},_mouseStart:function(b){return !0},_mouseDrag:function(j){var h={x:j.pageX,y:j.pageY},k=this._normValueFromMouse(h);return this._slide(j,this._handleIndex,k),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(j){var h,q,p,n,k;return this.orientation==="horizontal"?(h=this.elementSize.width,q=j.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(h=this.elementSize.height,q=j.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),p=q/h,p>1&&(p=1),p<0&&(p=0),this.orientation==="vertical"&&(p=1-p),n=this._valueMax()-this._valueMin(),k=this._valueMin()+p*n,this._trimAlignValue(k)},_start:function(j,h){var k={handle:this.handles[h],value:this.value()};return this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("start",j,k)},_slide:function(j,h,q){var p,n,k;this.options.values&&this.options.values.length?(p=this.values(h?0:1),this.options.values.length===2&&this.options.range===!0&&(h===0&&q>p||h===1&&q<p)&&(q=p),q!==this.values(h)&&(n=this.values(),n[h]=q,k=this._trigger("slide",j,{handle:this.handles[h],value:q,values:n}),p=this.values(h?0:1),k!==!1&&this.values(h,q,!0))):q!==this.value()&&(k=this._trigger("slide",j,{handle:this.handles[h],value:q}),k!==!1&&this.value(q))},_stop:function(j,h){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("stop",j,k)},_change:function(j,h){if(!this._keySliding&&!this._mouseSliding){var k={handle:this.handles[h],value:this.value()};this.options.values&&this.options.values.length&&(k.value=this.values(h),k.values=this.values()),this._trigger("change",j,k)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(h,p){var n,k,j;if(arguments.length>1){this.options.values[h]=this._trimAlignValue(p),this._refreshValue(),this._change(null,h);return}if(!arguments.length){return this._values()}if(!e.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(h):this.value()}n=this.options.values,k=arguments[0];for(j=0;j<n.length;j+=1){n[j]=this._trimAlignValue(k[j]),this._change(null,j)}this._refreshValue()},_setOption:function(h,n){var k,j=0;e.isArray(this.options.values)&&(j=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(h){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(k=0;k<j;k+=1){this._change(null,k)}this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(j){var h,n,k;if(arguments.length){return h=this.options.values[j],h=this._trimAlignValue(h),h}n=this.options.values.slice();for(k=0;k<n.length;k+=1){n[k]=this._trimAlignValue(n[k])}return n},_trimAlignValue:function(j){if(j<=this._valueMin()){return this._valueMin()}if(j>=this._valueMax()){return this._valueMax()}var h=this.options.step>0?this.options.step:1,n=(j-this._valueMin())%h,k=j-n;return Math.abs(n)*2>=h&&(k+=n>0?h:-h),parseFloat(k.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var A=this.options.range,z=this.options,y=this,x=this._animateOff?!1:z.animate,w,v={},t,q,p,n;this.options.values&&this.options.values.length?this.handles.each(function(h,j){w=(y.values(h)-y._valueMin())/(y._valueMax()-y._valueMin())*100,v[y.orientation==="horizontal"?"left":"bottom"]=w+"%",e(this).stop(1,1)[x?"animate":"css"](v,z.animate),y.options.range===!0&&(y.orientation==="horizontal"?(h===0&&y.range.stop(1,1)[x?"animate":"css"]({left:w+"%"},z.animate),h===1&&y.range[x?"animate":"css"]({width:w-t+"%"},{queue:!1,duration:z.animate})):(h===0&&y.range.stop(1,1)[x?"animate":"css"]({bottom:w+"%"},z.animate),h===1&&y.range[x?"animate":"css"]({height:w-t+"%"},{queue:!1,duration:z.animate}))),t=w}):(q=this.value(),p=this._valueMin(),n=this._valueMax(),w=n!==p?(q-p)/(n-p)*100:0,v[y.orientation==="horizontal"?"left":"bottom"]=w+"%",this.handle.stop(1,1)[x?"animate":"css"](v,z.animate),A==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[x?"animate":"css"]({width:w+"%"},z.animate),A==="max"&&this.orientation==="horizontal"&&this.range[x?"animate":"css"]({width:100-w+"%"},{queue:!1,duration:z.animate}),A==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[x?"animate":"css"]({height:w+"%"},z.animate),A==="max"&&this.orientation==="vertical"&&this.range[x?"animate":"css"]({height:100-w+"%"},{queue:!1,duration:z.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(j,h){function n(){return ++q}function k(){return ++p}var q=0,p=0;j.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,d){if(e=="selected"){if(this.options.collapsible&&d==this.options.selected){return}this.select(d)}else{this.options[e]=d,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+k());return j.cookie.apply(null,[d].concat(j.makeArray(arguments)))},_ui:function(e,d){return{tab:e,panel:d,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=j(this);d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(F){function v(d,e){d.css("display",""),!j.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var E=this,D=this.options,C=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=j(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return j("a",this)[0]}),this.panels=j([]),this.anchors.each(function(d,J){var I=j(J).attr("href"),H=I.split("#")[0],G;H&&(H===location.toString().split("#")[0]||(G=j("base")[0])&&H===G.href)&&(I=J.hash,J.href=I);if(C.test(I)){E.panels=E.panels.add(E.element.find(E._sanitizeSelector(I)))}else{if(I&&I!=="#"){j.data(J,"href.tabs",I),j.data(J,"load.tabs",I.replace(/#.*$/,""));var f=E._tabId(J);J.href="#"+f;var e=E.element.find("#"+f);e.length||(e=j(D.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(E.panels[d-1]||E.list),e.data("destroy.tabs",!0)),E.panels=E.panels.add(e)}else{D.disabled.push(d)}}}),F?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),D.selected===h?(location.hash&&this.anchors.each(function(e,d){if(d.hash==location.hash){return D.selected=e,!1}}),typeof D.selected!="number"&&D.cookie&&(D.selected=parseInt(E._cookie(),10)),typeof D.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(D.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),D.selected=D.selected||(this.lis.length?0:-1)):D.selected===null&&(D.selected=-1),D.selected=D.selected>=0&&this.anchors[D.selected]||D.selected<0?D.selected:0,D.disabled=j.unique(D.disabled.concat(j.map(this.lis.filter(".ui-state-disabled"),function(e,d){return E.lis.index(e)}))).sort(),j.inArray(D.selected,D.disabled)!=-1&&D.disabled.splice(j.inArray(D.selected,D.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),D.selected>=0&&this.anchors.length&&(E.element.find(E._sanitizeSelector(E.anchors[D.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(D.selected).addClass("ui-tabs-selected ui-state-active"),E.element.queue("tabs",function(){E._trigger("show",null,E._ui(E.anchors[D.selected],E.element.find(E._sanitizeSelector(E.anchors[D.selected].hash))[0]))}),this.load(D.selected)),j(window).bind("unload",function(){E.lis.add(E.anchors).unbind(".tabs"),E.lis=E.anchors=E.panels=null})):D.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[D.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),D.cookie&&this._cookie(D.selected,D.cookie);for(var B=0,A;A=this.lis[B];B++){j(A)[j.inArray(B,D.disabled)!=-1&&!j(A).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}D.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(D.event!=="mouseover"){var z=function(e,d){d.is(":not(.ui-state-disabled)")&&d.addClass("ui-state-"+e)},y=function(e,d){d.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){z("hover",j(this))}),this.lis.bind("mouseout.tabs",function(){y("hover",j(this))}),this.anchors.bind("focus.tabs",function(){z("focus",j(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){y("focus",j(this).closest("li"))})}var x,w;D.fx&&(j.isArray(D.fx)?(x=D.fx[0],w=D.fx[1]):x=w=D.fx);var t=w?function(d,e){j(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(w,w.duration||"normal",function(){v(e,w),E._trigger("show",null,E._ui(d,e[0]))})}:function(d,e){j(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),E._trigger("show",null,E._ui(d,e[0]))},b=x?function(e,d){d.animate(x,x.duration||"normal",function(){E.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),v(d,x),E.element.dequeue("tabs")})}:function(e,d,f){E.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),E.element.dequeue("tabs")};this.anchors.bind(D.event+".tabs",function(){var d=this,H=j(d).closest("li"),G=E.panels.filter(":not(.ui-tabs-hide)"),e=E.element.find(E._sanitizeSelector(d.hash));if(H.hasClass("ui-tabs-selected")&&!D.collapsible||H.hasClass("ui-state-disabled")||H.hasClass("ui-state-processing")||E.panels.filter(":animated").length||E._trigger("select",null,E._ui(this,e[0]))===!1){return this.blur(),!1}D.selected=E.anchors.index(this),E.abort();if(D.collapsible){if(H.hasClass("ui-tabs-selected")){return D.selected=-1,D.cookie&&E._cookie(D.selected,D.cookie),E.element.queue("tabs",function(){b(d,G)}).dequeue("tabs"),this.blur(),!1}if(!G.length){return D.cookie&&E._cookie(D.selected,D.cookie),E.element.queue("tabs",function(){t(d,e)}),E.load(E.anchors.index(this)),this.blur(),!1}}D.cookie&&E._cookie(D.selected,D.cookie);if(e.length){G.length&&E.element.queue("tabs",function(){b(d,G)}),E.element.queue("tabs",function(){t(d,e)}),E.load(E.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}j.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){return typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$='"+b+"']"))),b},destroy:function(){var d=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var e=j.data(this,"href.tabs");e&&(this.href=e);var f=j(this).unbind(".tabs");j.each(["href","load","cache"],function(v,t){f.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){j.data(this,"destroy.tabs")?j(this).remove():j(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),d.cookie&&this._cookie(null,d.cookie),this},add:function(A,z,y){y===h&&(y=this.anchors.length);var x=this,w=this.options,v=j(w.tabTemplate.replace(/#\{href\}/g,A).replace(/#\{label\}/g,z)),t=A.indexOf("#")?this._tabId(j("a",v)[0]):A.replace("#","");v.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var b=x.element.find("#"+t);return b.length||(b=j(w.panelTemplate).attr("id",t).data("destroy.tabs",!0)),b.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),y>=this.lis.length?(v.appendTo(this.list),b.appendTo(this.list[0].parentNode)):(v.insertBefore(this.lis[y]),b.insertBefore(this.panels[y])),w.disabled=j.map(w.disabled,function(e,d){return e>=y?++e:e}),this._tabify(),this.anchors.length==1&&(w.selected=0,v.addClass("ui-tabs-selected ui-state-active"),b.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){x._trigger("show",null,x._ui(x.anchors[0],x.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[y],this.panels[y])),this},remove:function(f){f=this._getIndex(f);var w=this.options,v=this.lis.eq(f).remove(),t=this.panels.eq(f).remove();return v.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(f+(f+1<this.anchors.length?1:-1)),w.disabled=j.map(j.grep(w.disabled,function(b,d){return b!=f}),function(b,d){return b>=f?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(v.find("a")[0],t[0])),this},enable:function(d){d=this._getIndex(d);var e=this.options;if(j.inArray(d,e.disabled)==-1){return}return this.lis.eq(d).removeClass("ui-state-disabled"),e.disabled=j.grep(e.disabled,function(b,f){return b!=d}),this._trigger("enable",null,this._ui(this.anchors[d],this.panels[d])),this},disable:function(e){e=this._getIndex(e);var d=this,f=this.options;return e!=f.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),f.disabled.push(e),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}return this.anchors.eq(b).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var z=this,y=this.options,x=this.anchors.eq(t)[0],w=j.data(x,"load.tabs");this.abort();if(!w||this.element.queue("tabs").length!==0&&j.data(x,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(y.spinner){var v=j("span",x);v.data("label.tabs",v.html()).html(y.spinner)}return this.xhr=j.ajax(j.extend({},y.ajaxOptions,{url:w,success:function(e,d){z.element.find(z._sanitizeSelector(x.hash)).html(e),z._cleanup(),y.cache&&j.data(x,"cache.tabs",!0),z._trigger("load",null,z._ui(z.anchors[t],z.panels[t]));try{y.ajaxOptions.success(e,d)}catch(b){}},error:function(b,e,d){z._cleanup(),z._trigger("load",null,z._ui(z.anchors[t],z.panels[t]));try{y.ajaxOptions.error(b,e,t,x)}catch(d){}}})),z.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,d){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",d),this},length:function(){return this.anchors.length}}),j.extend(j.ui.tabs,{version:"1.8.21"}),j.extend(j.ui.tabs.prototype,{rotation:null,rotate:function(v,t){var z=this,y=this.options,x=z._rotate||(z._rotate=function(d){clearTimeout(z.rotation),z.rotation=setTimeout(function(){var b=y.selected;z.select(++b<z.anchors.length?b:0)},v),d&&d.stopPropagation()}),w=z._unrotate||(z._unrotate=t?function(b){x()}:function(b){b.clientX&&z.rotate(null)});return v?(this.element.bind("tabsshow",x),this.anchors.bind(y.event+".tabs",w),x()):(clearTimeout(z.rotation),this.element.unbind("tabsshow",x),this.anchors.unbind(y.event+".tabs",w),delete this._rotate,delete this._unrotate),this}})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.datepicker.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length){return}c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length){return}d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null||b[c]==undefined){a[c]=b[c]}}return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.21"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName)){return}this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++){a[d].length>b&&(b=a[d].length,c=d)}return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName)){return}c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName)){return}var d=a.nodeName.toLowerCase();if(d=="input"){a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a){return !1}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return !0}}return !1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null}var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing){switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}}else{a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1}c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal){try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(d){$.datepicker.log(d)}}return !0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a){return}var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1){return}extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a))){a=a[c?"previousSibling":"nextSibling"]}var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME)){return}if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst){return}var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0])){return}this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay){c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear}else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])){return}var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f){throw"Missing number at position "+r}return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return -(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase()){return f=c[0],r+=d.length,!1}});if(f!=-1){return f+1}throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s)){throw"Unexpected literal at position "+r}r++},r=0;for(var s=0;s<a.length;s++){if(m){a.charAt(s)=="'"&&!n("'")?m=!1:q()}else{switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/10000);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}}}if(r<b.length){throw"Extra/unparsed characters found in date: "+b.substring(r)}i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k<=u){break}j++,k-=u}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k){throw"Invalid date"}return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a)){while(d.length<c){d="0"+d}}return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b){for(var m=0;m<a.length;m++){if(l){a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m)}else{switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*10000+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}}}}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++){if(c){a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e)}else{switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}}}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal){return}var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p){n--,n<0&&(n=11,o--)}}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\" title=\""+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1){switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i){m+='<span class="ui-datepicker-month">'+g[b]+"</span>"}else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" >";for(var p=0;p<12;p++){(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>")}m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j){l+='<span class="ui-datepicker-year">'+c+"</span>"}else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" >";for(;t<=u;t++){a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>"}a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.21",window["DP_jQuery_"+dpuuid]=$})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.progressbar.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(b){return b===d?this._value():(this._setOption("value",b),this)},_setOption:function(f,h){f==="value"&&(this.options.value=h,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;return typeof b!="number"&&(b=0),Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var h=this.value(),f=this._percentage();this.oldValue!==h&&(this.oldValue=h,this._trigger("change")),this.valueDiv.toggle(h>this.min).toggleClass("ui-corner-right",h===this.options.max).width(f.toFixed(0)+"%"),this.element.attr("aria-valuenow",h)}}),e.extend(e.ui.progressbar,{version:"1.8.21"})})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(C,B){function A(d){var e;return d&&d.constructor==Array&&d.length==3?d:(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d))?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]:(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(d))?[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]:(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(d))?[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]:(e=/rgba\(0, 0, 0, 0\)/.exec(d))?y.transparent:y[C.trim(d).toLowerCase()]}function z(f,j){var h;do{h=C.curCSS(f,j);if(h!=""&&h!="transparent"||C.nodeName(f,"body")){break}j="backgroundColor"}while(f=f.parentNode);return A(h)}function v(){var h=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,f={},D,k;if(h&&h.length&&h[0]&&h[h[0]]){var j=h.length;while(j--){D=h[j],typeof h[D]=="string"&&(k=D.replace(/\-(\w)/g,function(e,d){return d.toUpperCase()}),f[k]=h[D])}}else{for(D in h){typeof h[D]=="string"&&(f[D]=h[D])}}return f}function t(e){var h,f;for(h in e){f=e[h],(f==null||C.isFunction(f)||h in w||/scrollbar/.test(h)||!/color/i.test(h)&&isNaN(parseFloat(f)))&&delete e[h]}return e}function q(f,e){var j={_:0},h;for(h in e){f[h]!=e[h]&&(j[h]=e[h])}return j}function p(f,k,j,h){typeof f=="object"&&(h=k,j=null,k=f,f=k.effect),C.isFunction(k)&&(h=k,j=null,k={});if(typeof k=="number"||C.fx.speeds[k]){h=j,j=k,k={}}return C.isFunction(j)&&(h=j,j=null),k=k||{},j=j||k.duration,j=C.fx.off?0:typeof j=="number"?j:j in C.fx.speeds?C.fx.speeds[j]:C.fx.speeds._default,h=h||k.complete,[f,k,j,h]}function n(d){return !d||typeof d=="number"||C.fx.speeds[d]?!0:typeof d=="string"&&!C.effects[d]?!0:!1}C.effects={},C.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(d,f){C.fx.step[f]=function(b){b.colorInit||(b.start=z(b.elem,f),b.end=A(b.end),b.colorInit=!0),b.elem.style[f]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var y={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},x=["add","remove","toggle"],w={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};C.effects.animateClass=function(f,k,j,h){return C.isFunction(j)&&(h=j,j=null),this.queue(function(){var D=C(this),e=D.attr("style")||" ",d=t(v.call(this)),b,E=D.attr("class")||"";C.each(x,function(F,G){f[G]&&D[G+"Class"](f[G])}),b=t(v.call(this)),D.attr("class",E),D.animate(q(d,b),{queue:!1,duration:k,easing:j,complete:function(){C.each(x,function(F,G){f[G]&&D[G+"Class"](f[G])}),typeof D.attr("style")=="object"?(D.attr("style").cssText="",D.attr("style").cssText=e):D.attr("style",e),h&&h.apply(this,arguments),C.dequeue(this)}})})},C.fn.extend({_addClass:C.fn.addClass,addClass:function(f,k,j,h){return k?C.effects.animateClass.apply(this,[{add:f},k,j,h]):this._addClass(f)},_removeClass:C.fn.removeClass,removeClass:function(f,k,j,h){return k?C.effects.animateClass.apply(this,[{remove:f},k,j,h]):this._removeClass(f)},_toggleClass:C.fn.toggleClass,toggleClass:function(D,k,j,h,b){return typeof k=="boolean"||k===B?j?C.effects.animateClass.apply(this,[k?{add:D}:{remove:D},j,h,b]):this._toggleClass(D,k):C.effects.animateClass.apply(this,[{toggle:D},k,j,h])},switchClass:function(h,E,D,k,j){return C.effects.animateClass.apply(this,[{add:E,remove:h},D,k,j])}}),C.extend(C.effects,{version:"1.8.21",save:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.data("ec.storage."+d[f],e[0].style[d[f]])}},restore:function(e,d){for(var f=0;f<d.length;f++){d[f]!==null&&e.css(d[f],e.data("ec.storage."+d[f]))}},setMode:function(e,d){return d=="toggle"&&(d=e.is(":hidden")?"show":"hide"),d},getBaseline:function(f,e){var j,h;switch(f[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=f[0]/e.height}switch(f[1]){case"left":h=0;break;case"center":h=0.5;break;case"right":h=1;break;default:h=f[1]/e.width}return{x:h,y:j}},createWrapper:function(h){if(h.parent().is(".ui-effects-wrapper")){return h.parent()}var E={width:h.outerWidth(!0),height:h.outerHeight(!0),"float":h.css("float")},D=C("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),k=document.activeElement;try{k.id}catch(j){k=document.body}return h.wrap(D),(h[0]===k||C.contains(h[0],k))&&C(k).focus(),D=h.parent(),h.css("position")=="static"?(D.css({position:"relative"}),h.css({position:"relative"})):(C.extend(E,{position:h.css("position"),zIndex:h.css("z-index")}),C.each(["top","left","bottom","right"],function(b,e){E[e]=h.css(e),isNaN(parseInt(E[e],10))&&(E[e]="auto")}),h.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),D.css(E).show()},removeWrapper:function(e){var h,f=document.activeElement;return e.parent().is(".ui-effects-wrapper")?(h=e.parent().replaceWith(e),(e[0]===f||C.contains(e[0],f))&&C(f).focus(),h):e},setTransition:function(f,k,j,h){return h=h||{},C.each(k,function(b,e){var d=f.cssUnit(e);d[0]>0&&(h[e]=d[0]*j+d[1])}),h}}),C.fn.extend({effect:function(j,I,H,G){var F=p.apply(this,arguments),E={options:F[1],duration:F[2],callback:F[3]},D=E.options.mode,k=C.effects[j];return C.fx.off||!k?D?this[D](E.duration,E.callback):this.each(function(){E.callback&&E.callback.call(this)}):k.call(this,E)},_show:C.fn.show,show:function(e){if(n(e)){return this._show.apply(this,arguments)}var d=p.apply(this,arguments);return d[1].mode="show",this.effect.apply(this,d)},_hide:C.fn.hide,hide:function(e){if(n(e)){return this._hide.apply(this,arguments)}var d=p.apply(this,arguments);return d[1].mode="hide",this.effect.apply(this,d)},__toggle:C.fn.toggle,toggle:function(d){if(n(d)||typeof d=="boolean"||C.isFunction(d)){return this.__toggle.apply(this,arguments)}var e=p.apply(this,arguments);return e[1].mode="toggle",this.effect.apply(this,e)},cssUnit:function(e){var h=this.css(e),f=[];return C.each(["em","px","%","pt"],function(j,d){h.indexOf(d)>0&&(f=[parseFloat(h),d])}),f}}),C.easing.jswing=C.easing.swing,C.extend(C.easing,{def:"easeOutQuad",swing:function(h,E,D,k,j){return C.easing[C.easing.def](h,E,D,k,j)},easeInQuad:function(h,f,D,k,j){return k*(f/=j)*f+D},easeOutQuad:function(h,f,D,k,j){return -k*(f/=j)*(f-2)+D},easeInOutQuad:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f+D:-k/2*(--f*(f-2)-1)+D},easeInCubic:function(h,f,D,k,j){return k*(f/=j)*f*f+D},easeOutCubic:function(h,f,D,k,j){return k*((f=f/j-1)*f*f+1)+D},easeInOutCubic:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f+D:k/2*((f-=2)*f*f+2)+D},easeInQuart:function(h,f,D,k,j){return k*(f/=j)*f*f*f+D},easeOutQuart:function(h,f,D,k,j){return -k*((f=f/j-1)*f*f*f-1)+D},easeInOutQuart:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f*f+D:-k/2*((f-=2)*f*f*f-2)+D},easeInQuint:function(h,f,D,k,j){return k*(f/=j)*f*f*f*f+D},easeOutQuint:function(h,f,D,k,j){return k*((f=f/j-1)*f*f*f*f+1)+D},easeInOutQuint:function(h,f,D,k,j){return(f/=j/2)<1?k/2*f*f*f*f*f+D:k/2*((f-=2)*f*f*f*f+2)+D},easeInSine:function(h,f,D,k,j){return -k*Math.cos(f/j*(Math.PI/2))+k+D},easeOutSine:function(h,f,D,k,j){return k*Math.sin(f/j*(Math.PI/2))+D},easeInOutSine:function(h,f,D,k,j){return -k/2*(Math.cos(Math.PI*f/j)-1)+D},easeInExpo:function(h,f,D,k,j){return f==0?D:k*Math.pow(2,10*(f/j-1))+D},easeOutExpo:function(h,f,D,k,j){return f==j?D+k:k*(-Math.pow(2,-10*f/j)+1)+D},easeInOutExpo:function(h,f,D,k,j){return f==0?D:f==j?D+k:(f/=j/2)<1?k/2*Math.pow(2,10*(f-1))+D:k/2*(-Math.pow(2,-10*--f)+2)+D},easeInCirc:function(h,f,D,k,j){return -k*(Math.sqrt(1-(f/=j)*f)-1)+D},easeOutCirc:function(h,f,D,k,j){return k*Math.sqrt(1-(f=f/j-1)*f)+D},easeInOutCirc:function(h,f,D,k,j){return(f/=j/2)<1?-k/2*(Math.sqrt(1-f*f)-1)+D:k/2*(Math.sqrt(1-(f-=2)*f)+1)+D},easeInElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G)==1){return I+H}E||(E=G*0.3);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return -(D*Math.pow(2,10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E))+I},easeOutElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G)==1){return I+H}E||(E=G*0.3);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return D*Math.pow(2,-10*j)*Math.sin((j*G-F)*2*Math.PI/E)+H+I},easeInOutElastic:function(k,j,I,H,G){var F=1.70158,E=0,D=H;if(j==0){return I}if((j/=G/2)==2){return I+H}E||(E=G*0.3*1.5);if(D<Math.abs(H)){D=H;var F=E/4}else{var F=E/(2*Math.PI)*Math.asin(H/D)}return j<1?-0.5*D*Math.pow(2,10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E)+I:D*Math.pow(2,-10*(j-=1))*Math.sin((j*G-F)*2*Math.PI/E)*0.5+H+I},easeInBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),k*(E/=j)*E*((h+1)*E-h)+D},easeOutBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),k*((E=E/j-1)*E*((h+1)*E+h)+1)+D},easeInOutBack:function(b,E,D,k,j,h){return h==B&&(h=1.70158),(E/=j/2)<1?k/2*E*E*(((h*=1.525)+1)*E-h)+D:k/2*((E-=2)*E*(((h*=1.525)+1)*E+h)+2)+D},easeInBounce:function(h,E,D,k,j){return k-C.easing.easeOutBounce(h,j-E,0,k,j)+D},easeOutBounce:function(h,f,D,k,j){return(f/=j)<1/2.75?k*7.5625*f*f+D:f<2/2.75?k*(7.5625*(f-=1.5/2.75)*f+0.75)+D:f<2.5/2.75?k*(7.5625*(f-=2.25/2.75)*f+0.9375)+D:k*(7.5625*(f-=2.625/2.75)*f+0.984375)+D},easeInOutBounce:function(h,E,D,k,j){return E<j/2?C.easing.easeInBounce(h,E*2,0,k,j)*0.5+D:C.easing.easeOutBounce(h,E*2-j,0,k,j)*0.5+k*0.5+D}})}(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.blind.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.blind=function(f){return this.queue(function(){var w=e(this),v=["position","top","bottom","left","right"],t=e.effects.setMode(w,f.options.mode||"hide"),q=f.options.direction||"vertical";e.effects.save(w,v),w.show();var p=e.effects.createWrapper(w).css({overflow:"hidden"}),n=q=="vertical"?"height":"width",k=q=="vertical"?p.height():p.width();t=="show"&&p.css(n,0);var b={};b[n]=t=="show"?k:0,p.animate(b,f.duration,f.options.easing,function(){t=="hide"&&w.hide(),e.effects.restore(w,v),e.effects.removeWrapper(w),f.callback&&f.callback.apply(w[0],arguments),w.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.bounce=function(f){return this.queue(function(){var E=e(this),D=["position","top","bottom","left","right"],C=e.effects.setMode(E,f.options.mode||"effect"),B=f.options.direction||"up",A=f.options.distance||20,z=f.options.times||5,y=f.duration||250;/show|hide/.test(C)&&D.push("opacity"),e.effects.save(E,D),E.show(),e.effects.createWrapper(E);var x=B=="up"||B=="down"?"top":"left",w=B=="up"||B=="left"?"pos":"neg",A=f.options.distance||(x=="top"?E.outerHeight({margin:!0})/3:E.outerWidth({margin:!0})/3);C=="show"&&E.css("opacity",0).css(x,w=="pos"?-A:A),C=="hide"&&(A=A/(z*2)),C!="hide"&&z--;if(C=="show"){var v={opacity:1};v[x]=(w=="pos"?"+=":"-=")+A,E.animate(v,y/2,f.options.easing),A=A/2,z--}for(var t=0;t<z;t++){var q={},b={};q[x]=(w=="pos"?"-=":"+=")+A,b[x]=(w=="pos"?"+=":"-=")+A,E.animate(q,y/2,f.options.easing).animate(b,y/2,f.options.easing),A=C=="hide"?A*2:A/2}if(C=="hide"){var v={opacity:0};v[x]=(w=="pos"?"-=":"+=")+A,E.animate(v,y/2,f.options.easing,function(){E.hide(),e.effects.restore(E,D),e.effects.removeWrapper(E),f.callback&&f.callback.apply(this,arguments)})}else{var q={},b={};q[x]=(w=="pos"?"-=":"+=")+A,b[x]=(w=="pos"?"+=":"-=")+A,E.animate(q,y/2,f.options.easing).animate(b,y/2,f.options.easing,function(){e.effects.restore(E,D),e.effects.removeWrapper(E),f.callback&&f.callback.apply(this,arguments)})}E.queue("fx",function(){E.dequeue()}),E.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.clip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.clip=function(f){return this.queue(function(){var y=e(this),x=["position","top","bottom","left","right","height","width"],w=e.effects.setMode(y,f.options.mode||"hide"),v=f.options.direction||"vertical";e.effects.save(y,x),y.show();var t=e.effects.createWrapper(y).css({overflow:"hidden"}),q=y[0].tagName=="IMG"?t:y,p={size:v=="vertical"?"height":"width",position:v=="vertical"?"top":"left"},n=v=="vertical"?q.height():q.width();w=="show"&&(q.css(p.size,0),q.css(p.position,n/2));var b={};b[p.size]=w=="show"?n:0,b[p.position]=w=="show"?0:n/2,q.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){w=="hide"&&y.hide(),e.effects.restore(y,x),e.effects.removeWrapper(y),f.callback&&f.callback.apply(y[0],arguments),y.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.drop.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.drop=function(f){return this.queue(function(){var w=e(this),v=["position","top","bottom","left","right","opacity"],t=e.effects.setMode(w,f.options.mode||"hide"),q=f.options.direction||"left";e.effects.save(w,v),w.show(),e.effects.createWrapper(w);var p=q=="up"||q=="down"?"top":"left",n=q=="up"||q=="left"?"pos":"neg",k=f.options.distance||(p=="top"?w.outerHeight({margin:!0})/2:w.outerWidth({margin:!0})/2);t=="show"&&w.css("opacity",0).css(p,n=="pos"?-k:k);var b={opacity:t=="show"?1:0};b[p]=(t=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,w.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){t=="hide"&&w.hide(),e.effects.restore(w,v),e.effects.removeWrapper(w),f.callback&&f.callback.apply(this,arguments),w.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.explode=function(f){return this.queue(function(){var w=f.options.pieces?Math.round(Math.sqrt(f.options.pieces)):3,v=f.options.pieces?Math.round(Math.sqrt(f.options.pieces)):3;f.options.mode=f.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":f.options.mode;var t=e(this).show().css("visibility","hidden"),q=t.offset();q.top-=parseInt(t.css("marginTop"),10)||0,q.left-=parseInt(t.css("marginLeft"),10)||0;var p=t.outerWidth(!0),n=t.outerHeight(!0);for(var k=0;k<w;k++){for(var b=0;b<v;b++){t.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*(p/v),top:-k*(n/w)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p/v,height:n/w,left:q.left+b*(p/v)+(f.options.mode=="show"?(b-Math.floor(v/2))*(p/v):0),top:q.top+k*(n/w)+(f.options.mode=="show"?(k-Math.floor(w/2))*(n/w):0),opacity:f.options.mode=="show"?0:1}).animate({left:q.left+b*(p/v)+(f.options.mode=="show"?0:(b-Math.floor(v/2))*(p/v)),top:q.top+k*(n/w)+(f.options.mode=="show"?0:(k-Math.floor(w/2))*(n/w)),opacity:f.options.mode=="show"?1:0},f.duration||500)}}setTimeout(function(){f.options.mode=="show"?t.css({visibility:"visible"}):t.css({visibility:"visible"}).hide(),f.callback&&f.callback.apply(t[0]),t.dequeue(),e("div.ui-effects-explode").remove()},f.duration||500)})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.fade=function(f){return this.queue(function(){var h=e(this),b=e.effects.setMode(h,f.options.mode||"hide");h.animate({opacity:b},{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){f.callback&&f.callback.apply(this,arguments),h.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fold.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.fold=function(f){return this.queue(function(){var E=e(this),D=["position","top","bottom","left","right"],C=e.effects.setMode(E,f.options.mode||"hide"),B=f.options.size||15,A=!!f.options.horizFirst,z=f.duration?f.duration/2:e.fx.speeds._default/2;e.effects.save(E,D),E.show();var y=e.effects.createWrapper(E).css({overflow:"hidden"}),x=C=="show"!=A,w=x?["width","height"]:["height","width"],v=x?[y.width(),y.height()]:[y.height(),y.width()],t=/([0-9]+)%/.exec(B);t&&(B=parseInt(t[1],10)/100*v[C=="hide"?0:1]),C=="show"&&y.css(A?{height:0,width:B}:{height:B,width:0});var q={},b={};q[w[0]]=C=="show"?v[0]:B,b[w[1]]=C=="show"?v[1]:0,y.animate(q,z,f.options.easing).animate(b,z,f.options.easing,function(){C=="hide"&&E.hide(),e.effects.restore(E,D),e.effects.removeWrapper(E),f.callback&&f.callback.apply(E[0],arguments),E.dequeue()})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.highlight.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.highlight=function(f){return this.queue(function(){var k=e(this),j=["backgroundImage","backgroundColor","opacity"],h=e.effects.setMode(k,f.options.mode||"show"),b={backgroundColor:k.css("backgroundColor")};h=="hide"&&(b.opacity=0),e.effects.save(k,j),k.show().css({backgroundImage:"none",backgroundColor:f.options.color||"#ffff99"}).animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){h=="hide"&&k.hide(),e.effects.restore(k,j),h=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),f.callback&&f.callback.apply(this,arguments),k.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.pulsate=function(f){return this.queue(function(){var t=e(this),q=e.effects.setMode(t,f.options.mode||"show"),p=(f.options.times||5)*2-1,n=f.duration?f.duration/2:e.fx.speeds._default/2,k=t.is(":visible"),j=0;k||(t.css("opacity",0).show(),j=1),(q=="hide"&&k||q=="show"&&!k)&&p--;for(var b=0;b<p;b++){t.animate({opacity:j},n,f.options.easing),j=(j+1)%2}t.animate({opacity:j},n,f.options.easing,function(){j==0&&t.hide(),f.callback&&f.callback.apply(this,arguments)}),t.queue("fx",function(){t.dequeue()}).dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.scale.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.puff=function(f){return this.queue(function(){var n=e(this),k=e.effects.setMode(n,f.options.mode||"hide"),j=parseInt(f.options.percent,10)||150,h=j/100,b={height:n.height(),width:n.width()};e.extend(f.options,{fade:!0,mode:k,percent:k=="hide"?j:100,from:k=="hide"?b:{height:b.height*h,width:b.width*h}}),n.effect("scale",f.options,f.duration,f.callback),n.dequeue()})},e.effects.scale=function(f){return this.queue(function(){var w=e(this),v=e.extend(!0,{},f.options),t=e.effects.setMode(w,f.options.mode||"effect"),q=parseInt(f.options.percent,10)||(parseInt(f.options.percent,10)==0?0:t=="hide"?0:100),p=f.options.direction||"both",n=f.options.origin;t!="effect"&&(v.origin=n||["middle","center"],v.restore=!0);var k={height:w.height(),width:w.width()};w.from=f.options.from||(t=="show"?{height:0,width:0}:k);var b={y:p!="horizontal"?q/100:1,x:p!="vertical"?q/100:1};w.to={height:k.height*b.y,width:k.width*b.x},f.options.fade&&(t=="show"&&(w.from.opacity=0,w.to.opacity=1),t=="hide"&&(w.from.opacity=1,w.to.opacity=0)),v.from=w.from,v.to=w.to,v.mode=t,w.effect("size",v,f.duration,f.callback),w.dequeue()})},e.effects.size=function(f){return this.queue(function(){var G=e(this),F=["position","top","bottom","left","right","width","height","overflow","opacity"],E=["position","top","bottom","left","right","overflow","opacity"],D=["width","height","overflow"],C=["fontSize"],B=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],A=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],z=e.effects.setMode(G,f.options.mode||"effect"),y=f.options.restore||!1,x=f.options.scale||"both",w=f.options.origin,v={height:G.height(),width:G.width()};G.from=f.options.from||v,G.to=f.options.to||v;if(w){var t=e.effects.getBaseline(w,v);G.from.top=(v.height-G.from.height)*t.y,G.from.left=(v.width-G.from.width)*t.x,G.to.top=(v.height-G.to.height)*t.y,G.to.left=(v.width-G.to.width)*t.x}var b={from:{y:G.from.height/v.height,x:G.from.width/v.width},to:{y:G.to.height/v.height,x:G.to.width/v.width}};if(x=="box"||x=="both"){b.from.y!=b.to.y&&(F=F.concat(B),G.from=e.effects.setTransition(G,B,b.from.y,G.from),G.to=e.effects.setTransition(G,B,b.to.y,G.to)),b.from.x!=b.to.x&&(F=F.concat(A),G.from=e.effects.setTransition(G,A,b.from.x,G.from),G.to=e.effects.setTransition(G,A,b.to.x,G.to))}(x=="content"||x=="both")&&b.from.y!=b.to.y&&(F=F.concat(C),G.from=e.effects.setTransition(G,C,b.from.y,G.from),G.to=e.effects.setTransition(G,C,b.to.y,G.to)),e.effects.save(G,y?F:E),G.show(),e.effects.createWrapper(G),G.css("overflow","hidden").css(G.from);if(x=="content"||x=="both"){B=B.concat(["marginTop","marginBottom"]).concat(C),A=A.concat(["marginLeft","marginRight"]),D=F.concat(B).concat(A),G.find("*[width]").each(function(){var j=e(this);y&&e.effects.save(j,D);var h={height:j.height(),width:j.width()};j.from={height:h.height*b.from.y,width:h.width*b.from.x},j.to={height:h.height*b.to.y,width:h.width*b.to.x},b.from.y!=b.to.y&&(j.from=e.effects.setTransition(j,B,b.from.y,j.from),j.to=e.effects.setTransition(j,B,b.to.y,j.to)),b.from.x!=b.to.x&&(j.from=e.effects.setTransition(j,A,b.from.x,j.from),j.to=e.effects.setTransition(j,A,b.to.x,j.to)),j.css(j.from),j.animate(j.to,f.duration,f.options.easing,function(){y&&e.effects.restore(j,D)})})}G.animate(G.to,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){G.to.opacity===0&&G.css("opacity",G.from.opacity),z=="hide"&&G.hide(),e.effects.restore(G,y?F:E),e.effects.removeWrapper(G),f.callback&&f.callback.apply(this,arguments),G.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.shake=function(f){return this.queue(function(){var E=e(this),D=["position","top","bottom","left","right"],C=e.effects.setMode(E,f.options.mode||"effect"),B=f.options.direction||"left",A=f.options.distance||20,z=f.options.times||3,y=f.duration||f.options.duration||140;e.effects.save(E,D),E.show(),e.effects.createWrapper(E);var x=B=="up"||B=="down"?"top":"left",w=B=="up"||B=="left"?"pos":"neg",v={},t={},q={};v[x]=(w=="pos"?"-=":"+=")+A,t[x]=(w=="pos"?"+=":"-=")+A*2,q[x]=(w=="pos"?"-=":"+=")+A*2,E.animate(v,y,f.options.easing);for(var b=1;b<z;b++){E.animate(t,y,f.options.easing).animate(q,y,f.options.easing)}E.animate(t,y,f.options.easing).animate(v,y/2,f.options.easing,function(){e.effects.restore(E,D),e.effects.removeWrapper(E),f.callback&&f.callback.apply(this,arguments)}),E.queue("fx",function(){E.dequeue()}),E.dequeue()})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.slide=function(f){return this.queue(function(){var w=e(this),v=["position","top","bottom","left","right"],t=e.effects.setMode(w,f.options.mode||"show"),q=f.options.direction||"left";e.effects.save(w,v),w.show(),e.effects.createWrapper(w).css({overflow:"hidden"});var p=q=="up"||q=="down"?"top":"left",n=q=="up"||q=="left"?"pos":"neg",k=f.options.distance||(p=="top"?w.outerHeight({margin:!0}):w.outerWidth({margin:!0}));t=="show"&&w.css(p,n=="pos"?isNaN(k)?"-"+k:-k:k);var b={};b[p]=(t=="show"?n=="pos"?"+=":"-=":n=="pos"?"-=":"+=")+k,w.animate(b,{queue:!1,duration:f.duration,easing:f.options.easing,complete:function(){t=="hide"&&w.hide(),e.effects.restore(w,v),e.effects.removeWrapper(w),f.callback&&f.callback.apply(this,arguments),w.dequeue()}})})}})(jQuery);
/* jQuery UI - v1.8.21 - 2012-06-05
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.transfer.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(e,d){e.effects.transfer=function(f){return this.queue(function(){var q=e(this),p=e(f.options.to),n=p.offset(),k={top:n.top,left:n.left,height:p.innerHeight(),width:p.innerWidth()},j=q.offset(),b=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(f.options.className).css({top:j.top,left:j.left,height:q.innerHeight(),width:q.innerWidth(),position:"absolute"}).animate(k,f.duration,f.options.easing,function(){b.remove(),f.callback&&f.callback.apply(q[0],arguments),q.dequeue()})})}})(jQuery);(function(e,d){if(e.ui&&e.ui.dialog){e.ui.dialog.overlay.events=e.map("focus,keydown,keypress".split(","),function(b){return b+".dialog-overlay"}).join(" ")}}(jQuery));(function(e){var d=e.ui.dialog.prototype._createButtons;var b=e.ui.dialog.prototype._setData;e.ui.dialog.prototype._createButtons=function(h){var f=this;d.apply(this,[h]);if(typeof(this.options.percButtons)!="undefined"&&this.options.percButtons!=null){f._createPercButtons(this.options.percButtons)}};e.ui.dialog.prototype._setData=function(h,j){var f=this;if(h=="perc-buttons"){f._createPercButtons(j)}b.apply(this,[h,j])};e.ui.dialog.prototype._createPercButtons=function(j){var h=this;var f=false;var n=window.location.protocol+"//"+window.location.host+"/cm";uiDialogButtonPane=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");var k={Ok:{bgimage:"url("+n+"/images/images/buttonOk.png)",bgimageOver:"url("+n+"/images/images/buttonOkOver.png)",width:"78px",height:"29px",cls:"perc-ok",display:"block"},Override:{bgimage:"url("+n+"/images/images/buttonOverride.png)",bgimageOver:"url("+n+"/images/images/buttonOverrideOver.png)",width:"126px",height:"29px",cls:"perc-ok",display:"block"},Move:{bgimage:"url("+n+"/images/images/buttonMove.png)",bgimageOver:"url("+n+"/images/images/buttonMoveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Select:{bgimage:"url("+n+"/images/images/buttonSelect.png)",bgimageOver:"url("+n+"/images/images/buttonSelectOver.png)",width:"100px",height:"29px",cls:"perc-save",display:"block"},Yes:{bgimage:"url("+n+"/images/images/buttonYes.png)",bgimageOver:"url("+n+"/images/images/buttonYesOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Preferred":{bgimage:"url("+n+"/images/images/ButtonYesBlue.png)",bgimageOver:"url("+n+"/images/images/ButtonYesBlueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Yes Silver":{bgimage:"url("+n+"/images/images/buttonYesNoFocus.png)",bgimageOver:"url("+n+"/images/images/buttonYesOverNoFocus.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Continue:{bgimage:"url("+n+"/images/images/buttonContinue.png)",bgimageOver:"url("+n+"/images/images/buttonContinueOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Continue Preferred":{bgimage:"url("+n+"/images/images/buttonContinueBlue.png)",bgimageOver:"url("+n+"/images/images/buttonContinueBlueOver.png)",width:"126px",height:"29px",cls:"perc-save",display:"block"},"New Folder":{bgimage:"url("+n+"/images/images/buttonSave.gif)",bgimageOver:"url("+n+"/images/images/buttonSaveOver.gif)",width:"auto",height:"22px",cls:"perc-save",display:"block"},Save:{bgimage:"url("+n+"/images/images/buttonSave.png)",bgimageOver:"url("+n+"/images/images/buttonSaveOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},"Don't Save":{bgimage:"url("+n+"/images/images/buttonDontSave.png)",bgimageOver:"url("+n+"/images/images/buttonDontSaveOver.png)",width:"88px",height:"29px",cls:"perc-dont-save",display:"block"},Cancel:{bgimage:"url("+n+"/images/images/buttonCancel.gif)",bgimageOver:"url("+n+"/images/images/buttonCancelOver.gif)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"Cancel Blue":{bgimage:"url("+n+"/images/images/buttonCancelBlue.png)",bgimageOver:"url("+n+"/images/images/buttonCancelBlueOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},No:{bgimage:"url("+n+"/images/images/buttonNo.png)",bgimageOver:"url("+n+"/images/images/buttonNoOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},"No Silver":{bgimage:"url("+n+"/images/images/ButtonNoSilver.png)",bgimageOver:"url("+n+"/images/images/ButtonNoSilverOver.png)",width:"78px",height:"29px",cls:"perc-cancel",display:"block"},Next:{bgimage:"url("+n+"/images/images/buttonNext.png)",bgimageOver:"url("+n+"/images/images/buttonNextOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"block"},Back:{bgimage:"url("+n+"/images/images/buttonBack.gif)",bgimageOver:"url("+n+"/images/images/buttonBack.gif)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Finish:{bgimage:"url("+n+"/images/images/buttonFinish.png)",bgimageOver:"url("+n+"/images/images/buttonFinishOver.png)",width:"78px",height:"29px",cls:"perc-save",display:"none"},Close:{bgimage:"url("+n+"/images/images/buttonClose.png)",bgimageOver:"url("+n+"/images/images/buttonCloseOver.png)",width:"78px",height:"29px",cls:"perc-close",display:"block"},"Close Normal":{bgimage:"url("+n+"/images/images/buttonCloseNormal.png)",bgimageOver:"url("+n+"/images/images/buttonCloseNormalOver.png)",width:"78px",height:"29px",cls:"perc-close-normal",display:"block"},Done:{bgimage:"url("+n+"/images/images/buttonDone.png)",bgimageOver:"url("+n+"/images/images/buttonDoneOver.png)",width:"78px",height:"29px",cls:"perc-done",display:"block"},"Done Disabled":{bgimage:"url("+n+"/images/images/buttonDoneDisabled.png)",width:"78px",height:"29px",cls:"perc-done-disabled",display:"block"},Import:{bgimage:"url("+n+"/images/images/buttonImport.png)",bgimageOver:"url("+n+"/images/images/buttonImportOver.png)",width:"78px",height:"29px",cls:"perc-import",display:"block"},Activate:{bgimage:"url("+n+"/images/images/perc-lmg-activate-sprites.png)",bgimageOver:"url("+n+"/images/images/perc-lmg-activate-sprites.png)",width:"78px",height:"29px",cls:"perc-activate",display:"block"},Start:{bgimage:"url("+n+"/images/images/buttonStart.png)",bgimageOver:"url("+n+"/images/images/buttonStartOver.png)",width:"78px",height:"29px",cls:"perc-start",display:"block"},Search:{bgimage:"url("+n+"/images/images/blueButtonSearch.png)",bgimageOver:"url("+n+"/images/images/blueButtonSearchOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Submit:{bgimage:"url("+n+"/images/images/buttonWfsubmit.png)",bgimageOver:"url("+n+"/images/images/buttonWfsubmitOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Approve:{bgimage:"url("+n+"/images/images/buttonWfapprove.png)",bgimageOver:"url("+n+"/images/images/buttonWfapproveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"},Reject:{bgimage:"url("+n+"/images/images/buttonWfreject.png)",bgimageOver:"url("+n+"/images/images/buttonWfrejectOver.png)",width:"100px",height:"29px",cls:"perc-search",display:"block"},Resubmit:{bgimage:"url("+n+"/images/images/buttonWfresubmit.png)",bgimageOver:"url("+n+"/images/images/buttonWfresubmitOver.png)",width:"126px",height:"29px",cls:"perc-search",display:"block"},Archive:{bgimage:"url("+n+"/images/images/buttonWfarchive.png)",bgimageOver:"url("+n+"/images/images/buttonWfarchiveOver.png)",width:"88px",height:"29px",cls:"perc-search",display:"block"}};this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof j=="object"&&j!==null&&e.each(j,function(){return !(f=true)}));if(f){e.each(j,function(p,q){e("<div></div>").attr("id",q.id).css("background-image",k[p].bgimage).css("display",k[p].display).css("float","right").css("height",k[p].height).css("width",k[p].width).addClass(k[p].cls).addClass(q.cls).click(function(){q.click.apply(h.element[0],arguments)}).hover(function(){e(this).css("background-image",k[p].bgimageOver)},function(){e(this).css("background-image",k[p].bgimage)}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}).appendTo(uiDialogButtonPane)});uiDialogButtonPane.appendTo(this.uiDialog)}}})(jQuery);(function(T){T.globalEventIds={"#perc_head #perc-links":"#perc_head #perc_topnav"};document.onclick=function(){T.each(T.globalEventIds,function(au,at){if(T(au).hasClass("perc-visible")){T(at).click()}})};T.ajaxSetup({cache:false});T.Percussion=T.Percussion||{};T.perc_fakes={path_service:false,page_service:{create_page:false,render_page:false,new_asset:false,get_widget_ctypes:false},template_service:{get_template_css:false,set_template_css:false}};T.perc_utils={id:X,acop:ao,acat:H,odiff:q,a_o:R,o_a:k,elem:ag,show_error:Z,alert_dialog:v,prompt_dialog:an,confirm_dialog:ah,choose_icon:I,path_id:ap,input:d,handleLinks:h,handleObjects:P,select:ad,extract_path:aq,extract_path_end:ac,click_and_double_click:ak,unxml:N,rexml:V,arem:K,deep_get:D,debug:G,info:al,error:M,isBlankString:aa,convertCXFArray:aj,encodeURL:ai,preLoadImages:J,replaceURLWithHTMLLinks:t,sortCaseInsensitive:F,formatTimeFromDate:y,copyRegionObject:copyRegionObject,max:E,min:am,addArrays:S,newArray:p,splitDateTime:ae,addAutoScroll:O,removeAutoScroll:A,formatFileSize:W,parseUTCintoDate:ar,getDisplayFormat:b,makeFolderEditable:z,contains:Q,encodePathArray:B,isPathUnderDesign:ab,percParseInt:f,logToServer:j};function f(av){var at=null;if(av){try{at=parseInt(av,10)}catch(au){}}return at}function b(av){if(typeof av!=="string"){return""}var at=av.split("/");var au="";while(at.length>0){au=T.perc_displayformats[at.join("/")];if(au!=undefined){return au}at.pop()}return""}function j(at,av,au){if(!(T.type(at)==="string")){return}if(at==="debug"){G(au)}else{if(at==="error"){M(au)}else{al(au)}}T.PercUtilService.logToServer(at,av,au)}function ar(av){var at=av.replace(/(\d\d)-(\d\d)-(\d\d)/,"$1/$2/$3").replace(/([+-]\d\d):(\d\d)/,"$1$2").replace(/\.\d\d\d/,"").replace("T"," ");var au=new Date(at);return au}function ae(au,at){var aw=new Date(au);if(typeof(aw)=="undefined"||isNaN(aw)){aw=ar(au)}if(!at){at="M d, yy"}var av=T.datepicker.formatDate(at,aw);var ax=y(aw);return{date:av,time:ax}}function aj(at){if(typeof(at)=="undefined"){return[]}if(!T.isArray(at)){return[at]}return at}function aa(at){return !at||at==null||typeof at!="string"||T.trim(at).length<1}function ag(av,au){var at=T.grep(au,function(aw){return aw==av});return at.length>0}function ad(au,at,av){return"<label for='"+av+"'>"+au+"</label><br/><select name='"+at+"' id='"+av+"' ></select><br/>"}function d(au,at,ax,aw,av){av=av||"text";return"<label for='"+ax+"'>"+au+"</label><br/><input type='"+av+"' name='"+at+"' id='"+ax+"' ></input><br/>"}function aq(au){var at=au.split("/");if(at.length>1&&at[at.length-1]==""){at.pop()}return at}function ap(at){return T.map(at,function(au){return au}).join("-")}T.fn.perc_dialog=function(au){au.dialogClass="perc-dialog perc-dialog-corner-all";au.zIndex=9500;var av=T(this).dialog(au);var at=av.closest(".ui-dialog");if(au.id){at.attr("id",au.id)}T(window).trigger("resize").trigger("resize");return av};function U(at,au){var av=T("<div/>").addClass("perc-show-again").append(T("<input/>").attr("type","checkBox").attr("id","perc_show_again_check")).append(T("<label/>").attr("for","perc_show_again_check").text("Do not show again"));T(this).parent().find(".ui-dialog-buttonpane").append(av)}function e(av){var au=T.PercNavigationManager.getUserName();var aw="dontShowAgain-"+au+"-"+av;var at=T.cookie(aw);return at=="true"}function w(av,aw){var ay=T(this).parent().find("#perc_show_again_check").is(":checked");if(ay){var at=T.PercNavigationManager.getUserName();var au=T(this).parent().attr("id");var ax="dontShowAgain-"+at+"-"+au;T.cookie(ax,"true")}}function ah(av){var ax={title:"Please Confirm",question:"Do you really want to do this ?",type:"OK_CANCEL",cancel:function(){},success:function(){},showAgainCheck:false,dontShowAgainAction:null};function au(){ax.success();aw.dialog("close");aw.remove()}function az(){ax.cancel();aw.dialog("close");aw.remove()}T.extend(ax,av);var ay={};if(ax.type=="YES_NO"){ay={Yes:{click:au,id:"perc-confirm-generic-yes"},No:{click:az,id:"perc-confirm-generic-no"}}}else{if(ax.type=="YES_PREFERRED_NO"){ay={"Yes Preferred":{click:au,id:"perc-confirm-generic-yes"},"No Silver":{click:az,id:"perc-confirm-generic-no"}}}else{if(ax.type=="YES_NO_PREFERRED"){ay={"Yes Silver":{click:function(){ax.success();aw.remove()},id:"perc-confirm-generic-yes"},No:{click:function(){ax.cancel();aw.remove()},id:"perc-confirm-generic-no"}}}else{if(ax.type=="OK"){ay={Ok:{click:au,id:"perc-confirm-generic-ok"}}}else{if(ax.type=="OVERRIDE_OK"){ay={Ok:{click:az,id:"perc-confirm-generic-ok"},Override:{click:au,id:"perc-confirm-generic-override"}}}else{if(ax.type=="SAVE_BEFORE_CONTINUE"){ay={Save:{click:function(){ax.save(au)},id:"perc-confirm-generic-save"},Cancel:{click:az,id:"perc-confirm-generic-cancel"},"Don't Save":{click:function(){ax.dontSaveCallback();aw.dialog("close");aw.remove()},id:"perc-confirm-generic-continue"}}}else{if(ax.type=="CANCEL_CONTINUE"){ay={Continue:{click:au,id:"perc-confirm-generic-continue"},"Cancel Blue":{click:az,id:"perc-confirm-generic-cancel"}}}else{if(ax.type=="CANCEL_START"){ay={Start:{click:au,id:"perc-confirm-generic-start"},Cancel:{click:az,id:"perc-confirm-generic-cancel"}}}else{ay={Ok:{click:au,id:"perc-confirm-generic-ok"},Cancel:{click:az,id:"perc-confirm-generic-cancel"}}}}}}}}}}var aw;var at={dialogClass:"perc-confirm-dialog",title:ax.title,modal:true,resizable:false,percButtons:ay,id:ax.id};if(av.height){at.height=av.height}if(av.width){at.width=av.width}if(ax.showAgainCheck){if(e(at.id)){if(typeof(av.dontShowAgainAction)=="function"){av.dontShowAgainAction()}else{av.success()}return""}at.open=U;at.beforeclose=w}aw=T("<div/>").append(ax.question).perc_dialog(at)}function v(au){var aw={title:"Please Confirm",content:"Something is wrong!",okCallBack:function(){}};T.extend(aw,au);var at=(aw.width==undefined||aw.width==null)?Math.max(aw.title.length*35,400):aw.width;var av;av=T("<div/>").append(aw.content).perc_dialog({dialogClass:"perc-alert-dialog",title:aw.title,modal:true,width:at,resizable:false,id:aw.id,percButtons:{Ok:{click:function(){av.remove();aw.okCallBack()},id:"perc-alert-generic-ok"}}})}function an(au){var aw={title:"Beg Pardon?",question:"I'm sorry, what was the thing you needed to do?",cancel:function(){},success:function(){}};T.extend(aw,au);var at=T("<input type='text' id='perc-prompt-dialog-question' />");var av=T("<div/>").append(T("<label for='perc-prompt-dialog-question'/>").append(aw.question)).append(T("<br/>")).append(at).dialog({dialogClass:"perc-prompt-dialog",title:aw.title,modal:true,resizable:false,percButtons:{Yes:{click:function(){var ax=at.val();av.remove();aw.success(ax)},id:"perc-prompt-generic-yes"},No:{click:function(){av.remove();aw.cancel()},id:"perc-prompt-generic-no"}},id:aw.id})}function X(at){return at}function ao(at){return T.map(at,X)}function H(au,at){return ao(au).concat(ao(at))}function q(at,au){var av={};T.each(at,function(ax,aw){if(!au[ax]){av[ax]=aw}});return av}function K(at,au){T.each(at,function(av){if(at[av]===au){delete at[av]}})}function R(au){var at=[];T.each(au,function(av){at.push([av,this])});return at}function k(at){var au={};T.each(at,function(){au[this.k]=this.v});return au}function ac(au){var at=au.split("/");if(at[at.length-1]===""){at.pop()}return at[at.length-1]}function Z(at){if(at){alert(at)}}T.fn.perc_button=function(){this.addClass("ui-state-default ui-corner-all").hover(function(){if(!T(this).hasClass("ui-state-disabled")){T(this).addClass("ui-state-hover")}},function(){T(this).removeClass("ui-state-hover")});return this};function W(av){var au=1024;var aw=(1024*1024);var at=parseFloat(av);if(isNaN(at)){return""}if(at<au){return at+" B"}if(at>aw){return(at/aw).toFixed(0)+" MB"}return(at/au).toFixed(0)+" KB"}function I(av,au,aw){var at={site:"../images/images/iconWebsite.gif",folder:"../images/images/iconFolder.gif",percPage:"../images/images/iconPage.gif"};if(aw==","+T.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/iconLibrary.gif"}if(aw==","+T.perc_paths.SITES_ROOT_NO_SLASH){return"../images/images/iconWebsite.gif"}if(aw==","+T.perc_paths.DESIGN_ROOT_NO_SLASH){return"../images/images/iconDesign.png"}if(aw==",Search"){return"../images/images/searchIcon.png"}if(au){return au}if(av&&at[av]){return at[av]}if(av=="percImageAsset"){return"../images/images/genericImage.png"}if(av=="percFileAsset"||av=="percFlashAsset"){return"../images/images/genericFile.png"}if(av&&aw[1]==T.perc_paths.ASSETS_ROOT_NO_SLASH){return"../images/images/genericAsset.png"}if(av){return"../images/images/iconPage.gif"}return"../images/images/iconFolder.gif"}T.fn.percWidLibMaximizer=function(av){var ay="#perc-layout-menu";if($j("#tabs-3").length){ay="#tabs-3 #perc-layout-menu"}if($j(ay).parent().find(".perc-template-container").hasClass("perc-visible")){$j(ay).parent().find(".perc-template-container").removeClass("perc-visible").addClass("perc-hidden");$j(ay).parent().find("#perc-wid-lib-expander").removeClass("perc-whitebg");$j(ay).parent().find("#perc-wid-lib-minimizer").replaceWith('<a id="perc-wid-lib-maximizer" style="float: left;" href="#"></a>')}else{var au=$j(ay).parent().find(".perc-region-library-container");if(au.hasClass("perc-visible")){T.fn.percRegionLibraryMaximizer(av)}$j(ay).parent().find(".perc-template-container").removeClass("perc-hidden").addClass("perc-visible");$j(ay).parent().find("#perc-wid-lib-expander").addClass("perc-whitebg");$j(ay).parent().find("#perc-wid-lib-maximizer").replaceWith('<a id="perc-wid-lib-minimizer" style="float: left;" href="#"></a>')}var aw=T("#frame");var ax=T(".perc-main");var at=T("#bottom");fixIframeHeight(ax,at,aw)};T.fn.percRegionLibraryMaximizer=function(ay){var ax="#perc-layout-menu";if($j("#tabs-3").length){ax="#tabs-3 #perc-layout-menu"}var aD=$j(ax).parent();var aC=$j(aD.find(".perc-region-library-container"));var aB=$j(ax).parent().find(".perc-template-container");var aA=$j(aD.find("#perc-region-library-expander"));var av=$j(aD.find("#perc-region-library-maximizer"));var az=$j(aD.find("#perc-region-library-minimizer"));if(aC.hasClass("perc-visible")){aC.removeClass("perc-visible").addClass("perc-hidden");aA.removeClass("perc-whitebg");az.replaceWith('<a id="perc-region-library-maximizer" style="float: left;" href="#"></a>')}else{if(aB.hasClass("perc-visible")){T.fn.percWidLibMaximizer(ay)}aC.removeClass("perc-hidden").addClass("perc-visible");aA.addClass("perc-whitebg");av.replaceWith('<a id="perc-region-library-minimizer" style="float: left;" href="#"></a>')}var au=T("#frame");var aw=T(".perc-main");var at=T("#bottom");fixIframeHeight(aw,at,au)};T.fn.percOrphanAssetsMaximizer=function(az){var ay="#perc-layout-menu";if($j("#tabs-2").length){ay="#tabs-2 #perc-content-menu"}var aC=$j(ay).parent();var aA=aC.find("#perc_asset_library");var aB=aC.find("#perc_orphan_assets_expander");if(aA.hasClass("perc-visible")){var aw=aC.find("#perc_orphan_assets_minimizer");aA.removeClass("perc-visible").addClass("perc-hidden");aB.removeClass("perc-whitebg");aw.replaceWith('<a id="perc_orphan_assets_maximizer" style="float: left;" href="#"></a>')}else{var av=aC.find("#perc_orphan_assets_maximizer");aA.removeClass("perc-hidden").addClass("perc-visible");aB.addClass("perc-whitebg");av.replaceWith('<a id="perc_orphan_assets_minimizer" style="float: left;" href="#"></a>')}var au=T("#frame");var ax=T(".perc-main");var at=T("#bottom");fixIframeHeight(ax,at,au)};function ak(aw,ax,av){var au=false;var at=500;aw.click(function(){if(au){}else{au=true;setTimeout(function(){au=false},at);ax()}});aw.dblclick(av)}T.fn.perc_toggle=function(at){if(T(at).length&&T(at).hasClass("perc-hidden")){T(at).removeClass("perc-hidden");T(at).addClass("perc-visible")}else{T(at).removeClass("perc-visible");T(at).addClass("perc-hidden")}return this};T.fn.perc_toggle_padding=function(){var au=T.fn.perc_toggle_padding.arguments;for(var at=0;at<au.length;at++){if(T(au[at]).length&&T(au[at]).hasClass("perc-nopadding")){T(au[at]).removeClass("perc-nopadding")}else{T(au[at]).addClass("perc-nopadding")}}return this};var n=0;function O(){T("#frame").percAutoScroll({offsetY:10,width:10,speed:10,directions:"n, s"});T("#frame").percAutoScroll.postScrollView=function(at,au){T("div.ui-droppable").each(function(){if(!T(this).hasClass("ui-layout-ignore")){T(this).css("top",T(this).position().top-au)}})}}function A(){T("#frame").percAutoScroll.remove()}function N(ax,ay){if(T.isFunction(ax)){ax=ax(ay.get(0).tagName)}if(ax.valueOf()==="$"){return ay.text()}if(T.isArray(ax)){var av=[];var au=ax[0];var aw=ay.children();if(aw.length==0&&au=="$"){var at=ay.length;for(i=0;i<at;i++){av.unshift(T(ay[i]).text())}}else{aw.each(function(){var az=N(au,T(this));az._tagName=T(this)[0].tagName;av.push(az)})}return av}var av={};T.each(ax,function(aA){var az=[];var aB=ay.children().filter(function(){az.push(this.tagName);return this.tagName.toLowerCase()==aA.toLowerCase()});if(aB.length){av[aA]=N(this,aB)}else{G("Expected to find child: "+aA+", tags found: "+az)}});return av}function V(au,at){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Y(au,at)}function Y(aw,au,ax){if(T.isFunction(aw)){aw=aw(au._tagName)}if(aw.valueOf()==="$"){if(!au){G("Unexpected null in rexml");return""}else{if(typeof(au)==="string"){return au.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}else{return au}}}else{if(T.isArray(aw)){var av="";if(aw.length==1&&aw[0]=="$"){var at=au.length;for(i=0;i<at;i++){av+="<"+ax+">"+au[i]+"</"+ax+">"}}else{if(T.isArray(au)){T.each(au,function(){av+="<"+this._tagName+">"+Y(aw[0],this,this.tagName)+"</"+this._tagName+">"})}else{G("Expected array, got %o instead",au)}}return av}else{var av="";T.each(aw,function(ay){if(ay in au){var az=T.isArray(aw[ay])&&aw[ay].length==1&&(aw[ay])[0]=="$";if(!az){av+="<"+ay+">"}av+=Y(aw[ay],au[ay],ay);if(!az){av+="</"+ay+">"}}else{G("Can't find "+ay+" in %o",au)}});return av}}}function D(av,aw){var at=aw.split(" ");var au;while((au=shift(at))){if(au in av){av=av[au]}else{return null}}return av}function ai(at){return encodeURIComponent(at).replace(/%2F/g,"/")}var C=false;function af(){return C}function G(at){if(!af()){return}var au;if(arguments.length>1){au="DEBUG ["+arguments[0]+"] "+arguments[1]}else{au="[DEBUG] "+arguments[0]}x(au)}function al(at){var au;if(arguments.length>1){au="INFO ["+arguments[0]+"] "+arguments[1]}else{au="[INFO] "+arguments[0]}x(au)}function M(at){var au;if(arguments.length>1){au="ERROR ["+arguments[0]+"] "+arguments[1]}else{au="[ERROR] "+arguments[0]}x(au)}function x(at){if(window.console&&console&&console.log){if(T.browser.msie){console.log(at)}else{console.log.apply(console,arguments)}}}var L=[];function J(){var av=arguments.length;for(var au=av;au--;){var at=document.createElement("img");at.src=arguments[au];L.push(at)}}function t(au){var at=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return au.replace(at,"<a href='$1'>$1</a>")}function P(au){var at=0;au.contents().find(".perc-flash").find("object").each(function(){at++;var aA=T(this).attr("width");var aw=T(this).attr("height");var av=aA;var ay=aw;if(aA==""){var ax=T(this).children("embed").attr("width");if(ax==""){av="100%"}else{av=ax}}if(aw==""){var az=T(this).children("embed").attr("height");if(az==""){ay="100%"}else{ay=az}}if(av.lastIndexOf("%")<0&&av.lastIndexOf("px")<0){av=av+"px"}if(ay.lastIndexOf("%")<0&&ay.lastIndexOf("px")<0){ay=ay+"px"}T(this).replaceWith(T('<div id="perc-object-placeholder-'+at+'" class="perc-object-placeholder" style="width: '+av+"; height: "+ay+';"></div>'))})}function h(at){at.contents().find("a").each(function(){var au=T(this).attr("href");T(this).attr("tempURL",au);T(this).removeAttr("target");T(this).attr("href","javascript:void(0)")});if(T.browser.msie){at.contents().find("iframe").each(function(){var au=T(this).attr("src");if(au.length>0){var av="wmode=transparent";if(au.indexOf("?")!=-1){T(this).attr("src",au+"&"+av)}else{T(this).attr("src",au+"?"+av)}}})}}function F(at){if(T.isArray(at)){at.sort(function(av,ax){var aw=String(av).toUpperCase();var au=String(ax).toUpperCase();if(aw>au){return 1}if(aw<au){return -1}return 0})}}function y(aw,au){var ay;var at=aw.getHours();var ax=aw.getMinutes();var az=aw.getSeconds();var av=(at>=12?" PM":" AM");ax=(ax<10?"0":"")+ax;at=at%12;if(at==0){at=12}ay=at+":"+ax;if(au){ay+=":"+(az<10?"0"+az:az)}ay+=av;return ay}function E(au){var at=-1;for(a=0;a<au.length;a++){if(at<au[a]){at=au[a]}}return at}function am(au){var at=10000000;for(a=0;a<au.length;a++){if(au[a]<at){at=au[a]}}return at}function S(av,at){var au=[];for(i=0;i<av.length;i++){au[i]=av[i]+at[i]}return au}function p(at){var au=new Array(at);for(i=0;i<at;i++){au[i]=0}return au}T.percHideBodyScrollbars=function(){T("body").css("overflow","hidden")};T.percShowBodyScrollbars=function(){T("body").css("position","").css("overflow","")};function z(av){var aw=T("#perc-finder-listing-"+av.id);var at=aw.children(".perc-finder-item-name");var au=av.type;at.editable(function(aA,ay){var aA=T.trim(aA);aA=T.perc_textFilters.WINDOWS_FILE_NAME(aA);if(au!="FSFolder"){aA=aA.replace(/ /g,"-")}var az=T(this);var ax=az.parent().attr("title");if(aA.length==0){return ax}if(aA!=ax){T.PercBlockUI(T.PercBlockUIMode.CURSORONLY);T.PercPathService.renameFolder(av.path,aA,function(aC,aB,aE){if(aC==T.PercServiceUtils.STATUS_SUCCESS){var aF=T.perc_finder().lastClickPath;if(T.perc_finder().lastClickPath==null){aF=aB.PathItem.path.split("/");aF.push(aA)}T.perc_finder().lastClickPath=null;T.perc_finder().open(aF);T.unblockUI()}else{az.text(ax);T.unblockUI();var aD="";if(aE=="renameFolderItem.reservedName"||aE=="renameFolderItem.longName"||aE=="renameFolderItem.invalidCharInName"){aD=aB.replace("<old_name>",ax).replace("<new_name>",aA)}else{aD="Cannot rename folder '"+ax+"' to '"+aA+"' because an object with the same name already exists."}T.perc_utils.alert_dialog({id:"perc-finder-rename-folder-error",title:"Error",content:aD})}})}else{T.perc_finder().refresh()}return aA},{type:"filteredText",event:"dblclick",height:"14px",width:"125px",select:true,onblur:"submit",fieldid:"perc_finder_inline_field_edit",onedit:function(ax){T("#perc_finder_inline_field_edit").blur()},data:function(ay,ax){return T(this).parent().attr("title")}});T("#perc-finder-listing-"+av.id).children(".perc-finder-item-name").trigger("dblclick")}function Q(at,aw){var au=at.entries;if(!T.isArray(au)){var av=[];av.push(au);au=av}for(i=0;i<au.length;i++){if(au[i].value==aw){return true}}return false}function B(at){if(typeof(at)=="undefined"){return}var au=[];T(at).each(function(av,ax){var aw=ai(ax);au.push(aw)});return au}function ab(at){if(at.length==0){return false}if(at[1]=="Design"){return true}else{return false}}})(jQuery);function copyRegionObject(d,b){b.vertical=d.vertical;b.children=d.children;b.widgets=d.widgets;b.width=d.width;b.height=d.height;b.owner=d.owner}function htmlEntities(b){return String(b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#39;")}(function(b){b.perc_sessionTimeout=function(h){var n={serverCheck:10,sessionStateUrl:"/Rhythmyx/sessioncheck",logoutUrl:"/Rhythmyx/logout",dialogTitle:"Are you still there?",dialogMessageTimeout:"You will be automatically logged out in"};var t=n;if(h){t=b.extend(n,h)}var y={expiry:0,warning:0,counter:0};var A=null;var p;var v;var w=new Date().getTime();var d=(window.opener&&window.opener!==window);function f(E){var F="";if(E){F="extendSession=true";q()}var D=new Date().getTime();b.ajax({url:t.sessionStateUrl,type:"get",cache:false,data:F,contentType:"application/json; charset=utf-8",dataType:"json",success:function(G){y=G;w=D;x()},error:function(G,I,H){console.log("error :"+G.responseText);y.expiry=y.expiry+D-w;w=D;x()}})}function x(){if(y.expiry<=0){B()}else{if(y.expiry<y.warning){if(A===null){z()}}else{if(A!==null){q()}window.clearInterval(v);if(y.warning<y.expiry){v=window.setTimeout(function(){f(false)},y.expiry-y.warning)}}}}function e(){var E=new Date().getTime();var D=(E-w);var F=y.expiry-D;if(F>0){b("#logouttime").html(j(F));if(D>t.serverCheck*1000){f(false)}}else{q();f(false)}}function z(){A=k();window.clearInterval(p);e();p=window.setInterval(function(){e()},1000)}function q(){window.clearInterval(p);if(A!==null){A.remove();A=null}}function j(G){var H=Math.floor((G/1000)%60);var F=Math.floor((G/1000/60)%60);var D=Math.floor((G/(1000*60*60))%24);var E="";if(D>0){E+=D+" hour";if(D>1){E+="s"}E+=" "}return E+F+" min "+H+"s"}function B(){q();if(d){b.get("/Rhythmyx/logout",function(D){window.close()})}else{top.document.location.href="/Rhythmyx/logout"}}function C(){q();f(true)}function k(){A=D();function D(){var E="<div id='perc-session-timeout-content'><p>"+t.dialogMessageTimeout+'</p><p><span id="logouttime"/></p></div>';var F=b(E).perc_dialog({title:t.dialogTitle,id:"perc-session-timeout-dialog",width:400,resizable:false,modal:true,buttons:{"Extend Session":function(){C()},Logout:function(){B()}}});return b(F)}return A}f(false)}})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.1 - 1/9/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,x){var k,y=x.location,t=Array.prototype.slice,A=decodeURIComponent,b=$.param,e,q,E,d=$.bbq=$.bbq||{},z,D,n,h=$.event.special,f="hashchange",J="querystring",M="fragment",H="elemUrlAttr",p="href",C="src",G=/^.*\?|#.*$/g,F=/^.*\#/,L={};function N(O){return typeof O==="string"}function K(P){var O=t.call(arguments,1);return function(){return P.apply(this,O.concat(t.call(arguments)))}}function v(O){return O.replace(/^[^#]*#?(.*)$/,"$1")}function w(O){return O.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function j(Q,V,O,R,P){var X,U,T,W,S;if(R!==k){T=O.match(Q?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);S=T[3]||"";if(P===2&&N(R)){U=R.replace(Q?F:G,"")}else{W=q(T[2]);R=N(R)?q[Q?M:J](R):R;U=P===2?R:P===1?$.extend({},R,W):$.extend({},W,R);U=b(U)}X=T[1]+(Q?"#":U||!T[1]?"?":"")+U+S}else{X=V(O!==k?O:y[p])}return X}b[J]=K(j,0,w);b[M]=e=K(j,1,v);$.deparam=q=function(R,O){var Q={},P={"true":!0,"false":!1,"null":null};$.each(R.replace(/\+/g," ").split("&"),function(U,Z){var T=Z.split("="),Y=A(T[0]),S,X=Q,V=0,aa=Y.split("]["),W=aa.length-1;if(/\[/.test(aa[0])&&/\]$/.test(aa[W])){aa[W]=aa[W].replace(/\]$/,"");aa=aa.shift().split("[").concat(aa);W=aa.length-1}else{W=0}if(T.length===2){S=A(T[1]);if(O){S=S&&!isNaN(S)?+S:S==="undefined"?k:P[S]!==k?P[S]:S}if(W){for(;V<=W;V++){Y=aa[V]===""?X.length:aa[V];X=X[Y]=V<W?X[Y]||(aa[V+1]&&isNaN(aa[V+1])?{}:[]):S}}else{if($.isArray(Q[Y])){Q[Y].push(S)}else{if(Q[Y]!==k){Q[Y]=[Q[Y],S]}else{Q[Y]=S}}}}else{if(Y){Q[Y]=O?k:""}}});return Q};function I(Q,O,P){if(O===k||typeof O==="boolean"){P=O;O=b[Q?M:J]()}else{O=N(O)?O.replace(Q?F:G,""):O}return q(O,P)}q[J]=K(I,0);q[M]=E=K(I,1);$[H]||($[H]=function(O){return $.extend(L,O)})({a:p,base:p,iframe:C,img:C,input:C,form:"action",link:p,script:C});n=$[H];function B(R,P,Q,O){if(!N(Q)&&typeof Q!=="object"){O=Q;Q=P;P=k}return this.each(function(){var U=$(this),S=P||n()[(this.nodeName||"").toLowerCase()]||"",T=S&&U.attr(S)||"";U.attr(S,b[R](T,Q,O))})}$.fn[J]=K(B,J);$.fn[M]=K(B,M);d.pushState=z=function(R,O){if(N(R)&&/^#/.test(R)&&O===k){O=2}var Q=R!==k,P=e(y[p],Q?R:{},Q?O:2);y[p]=P+(/#/.test(P)?"":"#")};d.getState=D=function(O,P){return O===k||typeof O==="boolean"?E(O):E(P)[O]};d.removeState=function(O){var P={};if(O!==k){P=D();$.each($.isArray(O)?O:arguments,function(R,Q){delete P[Q]})}z(P,2)};h[f]=$.extend(h[f],{add:function(O,Q,P){return function(S){var R=S[M]=e();S.getState=function(T,U){return T===k||typeof T==="boolean"?q(R,T):q(R,U)[T]};O.apply(this,arguments)}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.0 - 1/9/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,k){var j=k.location,n,p=$.event.special,d="hashchange",f=$.browser,h=f.msie&&f.version<8,e="on"+d in k&&!h;function b(q){q=q||j.href;return q.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;p[d]=$.extend(p[d],{setup:function(){if(e){return false}n.start()},teardown:function(){if(e){return false}n.stop()}});n=(function(){var q={},y,t,v,x;function w(){v=x=function(z){return z};if(h){t=$('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow;x=function(){return b(t.document.location.href)};v=function(B,z){if(B!==z){var A=t.document;A.open().close();A.location.hash="#"+B}};v(b())}}q.start=function(){if(y){return}var A=b();v||w();(function z(){var C=b(),B=x(A);if(C!==A){v(A=C,B);$(k).trigger(d)}else{if(B!==A){j.href=j.href.replace(/#.*/,"")+"#"+B}}y=setTimeout(z,$[d+"Delay"])})()};q.stop=function(){if(!t){y&&clearTimeout(y);y=0}};return q})()})(jQuery,this);jQuery.cookie=function(d,p,v){if(typeof p!="undefined"){v=v||{};if(p===null){p="";v.expires=-1}var h="";if(v.expires&&(typeof v.expires=="number"||v.expires.toUTCString)){var j;if(typeof v.expires=="number"){j=new Date();j.setTime(j.getTime()+(v.expires*24*60*60*1000))}else{j=v.expires}h="; expires="+j.toUTCString()}var t=v.path?"; path="+(v.path):"";var k=v.domain?"; domain="+(v.domain):"";var b=v.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(p),h,t,k,b].join("")}else{var f=null;if(document.cookie&&document.cookie!=""){var q=document.cookie.split(";");for(var n=0;n<q.length;n++){var e=jQuery.trim(q[n]);if(e.substring(0,d.length+1)==(d+"=")){f=decodeURIComponent(e.substring(d.length+1));break}}}return f}};(function(h){var B="success";var f="error";var x="abort";var C="DELETE";var d="GET";var e="POST";var k="PUT";h.PercServiceUtils={STATUS_ERROR:f,STATUS_SUCCESS:B,STATUS_ABORT:x,TYPE_DELETE:C,TYPE_GET:d,TYPE_POST:e,TYPE_PUT:k,makeJsonRequest:p,makeXmlRequest:A,makeRequest:z,makeXdmJsonRequest:n,makeDeleteRequest:j,extractDefaultErrorMessage:v,extractFieldErrorCode:b,extractGlobalErrorCode:t,makeXdmXmlRequest:y,convertMapToArray:w};h.ajaxSetup({timeout:60000});function p(G,L,N,O,H,I,M){var P=this;var F=h.isFunction(h.getCm1License)?h.getCm1License():"";var J=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var E=h.perc_utils.percParseInt(M);var K={dataType:"json",async:!N,contentType:"application/json",type:L,url:G,headers:{"perc-tid":F,"perc-version":J},success:function(S,R){var Q={data:S,textstatus:R};O(P.STATUS_SUCCESS,Q)},error:function(T,R,S){if(T.status==204||T.status==1223){var Q={data:{},textstatus:T.statusText};O(P.STATUS_SUCCESS,Q);return}else{if(T.status>0){var Q={request:T,textstatus:R,error:S};O(P.STATUS_ERROR,Q)}else{if(h.isFunction(I)){I(P.STATUS_ABORT)}}}}};if(H){h.extend(K,{data:JSON.stringify(H)})}if(E){h.extend(K,{timeout:E})}return h.ajax(K)}function z(F,L,M,P,G,O,N,J,H){var Q=this;var E=h.isFunction(h.getCm1License)?h.getCm1License():"";var I=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var K={dataType:N,async:!M,contentType:O,type:L,url:(J)?F:escape(F),headers:{"perc-tid":E,"perc-version":I},success:function(T,S){var R={data:T,textstatus:S};P(Q.STATUS_SUCCESS,R)},error:function(U,S,T){if(U.status==204||U.status==1223){var R={data:{},textstatus:U.statusText};P(Q.STATUS_SUCCESS,R);return}else{if(U.status>0){var R={request:U,textstatus:S,error:T};P(Q.STATUS_ERROR,R)}else{if(h.isFunction(H)){H(Q.STATUS_ABORT)}}}}};if(G){h.extend(K,{data:JSON.stringify(G)})}h.ajax(K)}function y(H,F,L,M,I){var N=this;var G=h.isFunction(h.getCm1License)?h.getCm1License():"";var K=h.isFunction(h.getCm1Version)?h.getCm1Version():"";if(typeof(easyXDM)=="undefined"){N.makeJsonRequest(F,L,false,M,I);return}if(M==null||typeof(M)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(L==N.TYPE_GET||L==N.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(H==null||typeof(H)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){H=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var J=new easyXDM.Rpc({remote:H+"/perc-common-ui/cors/"},{remote:{request:{}}});var E={url:F,headers:{"Content-Type":"application/json",Accept:"application/xml,text/plain","perc-tid":G,"perc-version":K},method:L,timeout:60000};if(I!=null&&I!=""&&typeof(I)!="undefined"){E.data=easyXDM.getJSONObject().stringify(I)}J.request(E,function(O){var P=O.headers["Content-Type"]=="application/json";var Q={data:P?JSON.parse(O.data):O.data,status:O.status};M(N.STATUS_SUCCESS,Q)},function(O){var P={message:O.message,status:O.status};M(N.STATUS_ERROR,P)})}function n(H,F,L,M,I){var N=this;var G=h.isFunction(h.getCm1License)?h.getCm1License():"";var K=h.isFunction(h.getCm1Version)?h.getCm1Version():"";if(typeof(easyXDM)=="undefined"){N.makeJsonRequest(F,L,false,M,I);return}if(M==null||typeof(M)=="undefined"){alert("Callback cannot be null or undefined");return}if(!(L==N.TYPE_GET||L==N.TYPE_POST)){alert("Invalid type specified, must be GET or POST.");return}if(H==null||typeof(H)=="undefined"){if(typeof(jQuery.getDeliveryServiceBase)=="function"){H=jQuery.getDeliveryServiceBase()}else{alert("Servicebase not defined, cannot make ajax call.");return}}var J=new easyXDM.Rpc({remote:H+"/perc-common-ui/cors/"},{remote:{request:{}}});var E={url:F,headers:{"Content-Type":"application/json",Accept:"application/json,text/plain","perc-tid":G,"perc-version":K},method:L,timeout:60000};if(I!=null&&I!=""&&typeof(I)!="undefined"){E.data=easyXDM.getJSONObject().stringify(I)}J.request(E,function(O){var P=O.headers["Content-Type"]=="application/json";var Q={data:P?JSON.parse(O.data):O.data,status:O.status};M(N.STATUS_SUCCESS,Q)},function(O){var P={message:O.message,status:O.status};M(N.STATUS_ERROR,P)})}function A(E,K,L,M,H,G){var N=this;var F=h.isFunction(h.getCm1License)?h.getCm1License():"";var I=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var J={dataType:"xml",async:!L,contentType:"text/xml",type:K,url:E,headers:{"perc-tid":F,"perc-version":I},success:function(Q,P){var O={data:Q,textstatus:P};M(N.STATUS_SUCCESS,O)},error:function(R,P,Q){if(R.status>0){var O={request:R,textstatus:P,error:Q};M(N.STATUS_ERROR,O)}else{if(h.isFunction(G)){G(N.STATUS_ABORT)}}}};if(H){h.extend(J,{data:H})}h.ajax(J)}function j(E,K,L,H,G){var M=this;var F=h.isFunction(h.getCm1License)?h.getCm1License():"";var I=h.isFunction(h.getCm1Version)?h.getCm1Version():"";var J={dataType:"text",async:!K,contentType:"text/xml",type:M.TYPE_DELETE,url:E,headers:{"perc-tid":F,"perc-version":I},success:function(P,O){var N={data:P,textstatus:O};L(M.STATUS_SUCCESS,N)},error:function(Q,O,P){if(Q.status>0){var N={request:Q,textstatus:O,error:P};L(M.STATUS_ERROR,N)}else{if(h.isFunction(G)){G(M.STATUS_ABORT)}}}};if(H){h.extend(J,{data:H})}h.ajax(J)}function v(H){var L="";if(H==null||typeof(H)=="undefined"){return""}if(typeof(H.responseText)=="undefined"&&typeof(H.message)!="undefined"){H.responseText=H.message}if(H.responseText==null||H.responseText.length==0){return""}var G=null;try{G=JSON.parse(H.responseText);if(h.browser.msie&&!G&&typeof(H.responseText)=="string"&&H.responseText.length>0){return H.responseText}}catch(K){}if(G!=null&&G.Errors){var J="";if(typeof(G.defaultMessage)!="undefined"){J=G.defaultMessage}else{if(typeof(G.Errors.globalError.defaultMessage)!="undefined"){J=G.Errors.globalError.defaultMessage}else{if(typeof(G.Errors.localizedMessage)!="undefined"){J=G.Errors.localizedMessage}else{if(typeof(G.Errors.globalError.code)!="undefined"){var I=H.status==500?"Server Error: ":"";J=I+G.Errors.globalError.code}}}}L+=J}else{if(G!=null&&G.ValidationErrors!=undefined){var F=G.ValidationErrors;if(F.fieldErrors!=undefined){L+=q(F.fieldErrors)}else{if(F.globalErrors!=undefined){L+=q(F.globalErrors)}else{if(F.globalError!=undefined){L+=q(F.globalError)}}}}}var E;if(typeof(H.responseText)!="undefined"&&H.responseText.indexOf("<?xml")!=-1){E=h(H.responseText)}else{if(typeof(H)=="string"&&H.indexOf("<?xml")!=-1){E=h(H)}}if(typeof(E)!="undefined"&&E.is("ValidationErrors")){if(E.find("globalErrors").find("defaultMessage").text()!=""){L+=E.find("globalErrors").find("defaultMessage").text()}else{if(E.find("globalError").find("defaultMessage").text()!=""){L+=E.find("globalError").find("defaultMessage").text()!=""}else{if(E.next("defaultMessage")){L+=E.next("defaultMessage")[0].nextSibling.nodeValue}}}}if(L==""){L=H.responseText}return L}function q(E){E=h.makeArray(E);var F="";for(var G=0;G<E.length;G++){var H=E[G];if(H.defaultMessage){F+=D(H.defaultMessage,H.arguments)}else{if(H.code){F+=H.code}}}return F}function D(H,E){E=h.makeArray(E);var G="";for(var F=0;F<E.length;F++){G=new RegExp("\\{"+F+"\\}","g");H=H.replace(G,E[F])}return H}function b(G){var F=JSON.parse(G.responseText);if(F.ValidationErrors==undefined){return""}var E=F.ValidationErrors;if(E.fieldErrors!=undefined){return E.fieldErrors.code}return""}function t(G){var F=JSON.parse(G.responseText);if(F.ValidationErrors==undefined){return""}var E=F.ValidationErrors;if(E.globalError!=undefined){return E.globalError.code}return""}function w(F){var G=[];if(h.isArray(F.entry)){G=F.entry}else{if(F.entry){G.push(F.entry)}}var E=[];h(G).each(function(){E[this.key]=this.value});return E}})(jQuery);(function($){$.fn.layout=function(opts){var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"};var options={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,closable:true,resizable:true,slidable:true,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:500,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}};var effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}};var config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:10000,animation:10000},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}};var state={id:Math.floor(Math.random()*10000),container:{},north:{},south:{},east:{},west:{},center:{}};var altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"};var isStr=function(o){if(typeof o=="string"){return true}else{if(typeof o=="object"){try{var match=o.constructor.toString().match(/string/i);return(match!==null)}catch(e){}}}return false};var str=function(o){if(typeof o=="string"||isStr(o)){return $.trim(o)}else{return o}};var min=function(x,y){return Math.min(x,y)};var max=function(x,y){return Math.max(x,y)};var transformData=function(d){var json={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};d=d||{};if(d.effects||d.defaults||d.north||d.south||d.west||d.east||d.center){json=$.extend(json,d)}else{$.each(d,function(key,val){a=key.split("__");json[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=val})}return json};var setFlowCallback=function(action,pane,param){var cb=action+","+pane+","+(param?1:0),cP,cbPane;$.each(c.borderPanes.split(","),function(i,p){if(c[p].isMoving){bindCallback(p);return false}});function bindCallback(p,test){cP=c[p];if(!cP.doCallback){cP.doCallback=true;cP.callback=cb}else{cpPane=cP.callback.split(",")[1];if(cpPane!=p&&cpPane!=pane){bindCallback(cpPane,true)}}}};var execFlowCallback=function(pane){var cP=c[pane];c.isLayoutBusy=false;delete cP.isMoving;if(!cP.doCallback||!cP.callback){return}cP.doCallback=false;var cb=cP.callback.split(","),param=(cb[2]>0?true:false);if(cb[0]=="open"){open(cb[1],param)}else{if(cb[0]=="close"){close(cb[1],param)}}if(!cP.doCallback){cP.callback=null}};var execUserCallback=function(pane,v_fn){if(!v_fn){return}var fn;try{if(typeof v_fn=="function"){fn=v_fn}else{if(typeof v_fn!="string"){return}else{if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if(typeof fn=="function"&&args.length>1){return fn(args[1])}}else{fn=eval(v_fn)}}}if(typeof fn=="function"){return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}}catch(ex){}};var cssNum=function($E,prop){var val=0,hidden=false,visibility="";if(!$.browser.msie){if($.curCSS($E[0],"display",true)=="none"){hidden=true;visibility=$.curCSS($E[0],"visibility",true);$E.css({display:"block",visibility:"hidden"})}}val=parseInt($.curCSS($E[0],prop,true),10)||0;if(hidden){$E.css({display:"none"});if(visibility&&visibility!="hidden"){$E.css({visibility:visibility})}}return val};var cssW=function(e,outerWidth){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerWidth<=0){return 0}else{if(!(outerWidth>0)){outerWidth=isStr(e)?getPaneSize(e):$E.outerWidth()}}if(!$.boxModel){return outerWidth}else{return outerWidth-cssNum($E,"paddingLeft")-cssNum($E,"paddingRight")-($.curCSS($E[0],"borderLeftStyle",true)=="none"?0:cssNum($E,"borderLeftWidth"))-($.curCSS($E[0],"borderRightStyle",true)=="none"?0:cssNum($E,"borderRightWidth"))}};var cssH=function(e,outerHeight){var $E;if(isStr(e)){e=str(e);$E=$Ps[e]}else{$E=$(e)}if(outerHeight<=0){return 0}else{if(!(outerHeight>0)){outerHeight=(isStr(e))?getPaneSize(e):$E.outerHeight()}}if(!$.boxModel){return outerHeight}else{return outerHeight-cssNum($E,"paddingTop")-cssNum($E,"paddingBottom")-($.curCSS($E[0],"borderTopStyle",true)=="none"?0:cssNum($E,"borderTopWidth"))-($.curCSS($E[0],"borderBottomStyle",true)=="none"?0:cssNum($E,"borderBottomWidth"))}};var cssSize=function(pane,outerSize){if(c[pane].dir=="horz"){return cssH(pane,outerSize)}else{return cssW(pane,outerSize)}};var getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp}else{if(c[pane].dir=="horz"){return $P.outerHeight()+oSp}else{return $P.outerWidth()+oSp}}}};var setPaneMinMaxSizes=function(pane){var d=cDims,edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$altPane=$Ps[altSide[pane]],paneSpacing=o.spacing_open,altPaneSpacing=options[altSide[pane]].spacing_open,altPaneSize=(!$altPane?0:(dir=="horz"?$altPane.outerHeight():$altPane.outerWidth())),containerSize=(dir=="horz"?d.innerHeight:d.innerWidth),limitSize=containerSize-paneSpacing-altPaneSize-altPaneSpacing,minSize=s.minSize||0,maxSize=Math.min(s.maxSize||9999,limitSize),minPos,maxPos;switch(pane){case"north":minPos=d.offsetTop+minSize;maxPos=d.offsetTop+maxSize;break;case"west":minPos=d.offsetLeft+minSize;maxPos=d.offsetLeft+maxSize;break;case"south":minPos=d.offsetTop+d.innerHeight-maxSize;maxPos=d.offsetTop+d.innerHeight-minSize;break;case"east":minPos=d.offsetLeft+d.innerWidth-maxSize;maxPos=d.offsetLeft+d.innerWidth-minSize;break}$.extend(s,{minSize:minSize,maxSize:maxSize,minPosition:minPos,maxPosition:maxPos})};var getPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};with(d){width=cDims.innerWidth-left-right;height=cDims.innerHeight-bottom-top;top+=cDims.top;bottom+=cDims.bottom;left+=cDims.left;right+=cDims.right}return d};var getElemDims=function($E){var d={},e,b,p;$.each("Left,Right,Top,Bottom".split(","),function(){e=str(this);b=d["border"+e]=cssNum($E,"border"+e+"Width");p=d["padding"+e]=cssNum($E,"padding"+e);d["offset"+e]=b+p;if($E==$Container){d[e.toLowerCase()]=($.boxModel?p:0)}});d.innerWidth=d.outerWidth=$E.outerWidth();d.innerHeight=d.outerHeight=$E.outerHeight();if($.boxModel){d.innerWidth-=(d.offsetLeft+d.offsetRight);d.innerHeight-=(d.offsetTop+d.offsetBottom)}return d};var setTimer=function(pane,action,fn,ms){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){return}else{Timers[name]=setTimeout(fn,ms)}};var clearTimer=function(pane,action){var Layout=window.layout=window.layout||{},Timers=Layout.timers=Layout.timers||{},name="layout_"+state.id+"_"+pane+"_"+action;if(Timers[name]){clearTimeout(Timers[name]);delete Timers[name];return true}else{return false}};var create=function(){initOptions();initContainer();initPanes();initHandles();initResizable();sizeContent("all");if(options.scrollToBookmarkOnLoad){with(self.location){if(hash){replace(hash)}}}initHotkeys();$(window).resize(function(){var timerID="timerLayout_"+state.id;if(window[timerID]){clearTimeout(window[timerID])}window[timerID]=null;if(true||$.browser.msie){window[timerID]=setTimeout(resizeAll,100)}else{resizeAll()}})};var initContainer=function(){try{if($Container[0].tagName=="BODY"){$("html").css({height:"100%",overflow:"hidden"});$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var CSS={overflow:"hidden"},p=$Container.css("position"),h=$Container.css("height");if(!$Container.hasClass("ui-layout-pane")){if(!p||"fixed,absolute,relative".indexOf(p)<0){CSS.position="relative"}if(!h||h=="auto"){CSS.height="100%"}}$Container.css(CSS)}}catch(ex){}cDims=state.container=getElemDims($Container)};var initHotkeys=function(){$.each(c.borderPanes.split(","),function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).keydown(keyDown);return false}})};var initOptions=function(){opts=transformData(opts);if(opts.effects){$.extend(effects,opts.effects);delete opts.effects}$.each("name,scrollToBookmarkOnLoad".split(","),function(idx,key){if(opts[key]!==undefined){options[key]=opts[key]}else{if(opts.defaults[key]!==undefined){options[key]=opts.defaults[key];delete opts.defaults[key]}}});$.each("paneSelector,resizerCursor,customHotkey".split(","),function(idx,key){delete opts.defaults[key]});$.extend(options.defaults,opts.defaults);c.center=$.extend(true,{},c.defaults,c.center);$.extend(options.center,opts.center);var o_Center=$.extend(true,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(idx,key){options.center[key]=o_Center[key]});var defs=options.defaults;$.each(c.borderPanes.split(","),function(i,pane){c[pane]=$.extend(true,{},c.defaults,c[pane]);o=options[pane]=$.extend(true,{},options.defaults,options[pane],opts.defaults,opts[pane]);if(!o.paneClass){o.paneClass=defaults.paneClass}if(!o.resizerClass){o.resizerClass=defaults.resizerClass}if(!o.togglerClass){o.togglerClass=defaults.togglerClass}$.each(["_open","_close",""],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n;o[sName]=opts[pane][sName]||opts[pane].fxName||opts.defaults[sName]||opts.defaults.fxName||o[sName]||o.fxName||defs[sName]||defs.fxName||"none";var fxName=o[sName];if(fxName=="none"||!$.effects||!$.effects[fxName]||(!effects[fxName]&&!o[sSettings]&&!o.fxSettings)){fxName=o[sName]="none"}var fx=effects[fxName]||{},fx_all=fx.all||{},fx_pane=fx[pane]||{};o[sSettings]=$.extend({},fx_all,fx_pane,defs.fxSettings||{},defs[sSettings]||{},o.fxSettings,o[sSettings],opts.defaults.fxSettings,opts.defaults[sSettings]||{},opts[pane].fxSettings,opts[pane][sSettings]||{});o[sSpeed]=opts[pane][sSpeed]||opts[pane].fxSpeed||opts.defaults[sSpeed]||opts.defaults.fxSpeed||o[sSpeed]||o[sSettings].duration||o.fxSpeed||o.fxSettings.duration||defs.fxSpeed||defs.fxSettings.duration||fx_pane.duration||fx_all.duration||"normal"})})};var initPanes=function(){$.each(c.allPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],fx=s.fx,dir=c[pane].dir,size=o.size=="auto"||isNaN(o.size)?0:o.size,minSize=o.minSize||1,maxSize=o.maxSize||9999,spacing=o.spacing_open||0,sel=o.paneSelector,isIE6=($.browser.msie&&$.browser.version<7),CSS={},$P,$C;$Cs[pane]=false;if(sel.substr(0,1)==="#"){$P=$Ps[pane]=$Container.find(sel+":first")}else{$P=$Ps[pane]=$Container.children(sel+":first");if(!$P.length){$P=$Ps[pane]=$Container.children("form:first").children(sel+":first")}}if(!$P.length){$Ps[pane]=false;return true}$P.attr("pane",pane).addClass(o.paneClass+" "+o.paneClass+"-"+pane);if(pane!="center"){s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;s.noRoom=false;c[pane].pins=[]}CSS=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[pane].cssReq);if(o.applyDefaultStyles){$.extend(CSS,c.defaults.cssDef,c[pane].cssDef)}$P.css(CSS);CSS={};switch(pane){case"north":CSS.top=cDims.top;CSS.left=cDims.left;CSS.right=cDims.right;break;case"south":CSS.bottom=cDims.bottom;CSS.left=cDims.left;CSS.right=cDims.right;break;case"west":CSS.left=cDims.left;break;case"east":CSS.right=cDims.right;break;case"center":}if(dir=="horz"){if(size===0||size=="auto"){$P.css({height:"auto"});size=$P.outerHeight()}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerHeight-spacing);CSS.height=max(1,cssH(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.height+1);$P.css(CSS)}else{if(dir=="vert"){if(size===0||size=="auto"){$P.css({width:"auto","float":"left"});size=$P.outerWidth();$P.css({"float":"none"})}size=max(size,minSize);size=min(size,maxSize);size=min(size,cDims.innerWidth-spacing);CSS.width=max(1,cssW(pane,size));s.size=size;s.maxSize=maxSize;s.minSize=max(minSize,size-CSS.width+1);$P.css(CSS);sizeMidPanes(pane,null,true)}else{if(pane=="center"){$P.css(CSS);sizeMidPanes("center",null,true)}}}if(o.initClosed&&o.closable){$P.hide().addClass("closed");s.isClosed=true}else{if(o.initHidden||o.initClosed){hide(pane,true);s.isHidden=true}else{$P.addClass("open")}}if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow)}if(o.contentSelector){$C=$Cs[pane]=$P.children(o.contentSelector+":first");if(!$C.length){$Cs[pane]=false;return true}$C.css(c.content.cssReq);if(o.applyDefaultStyles){$C.css(c.content.cssDef)}$P.css({overflow:"hidden"})}})};var initHandles=function(){$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],rClass=o.resizerClass,tClass=o.togglerClass,$P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P||(!o.closable&&!o.resizable)){return}var edge=c[pane].edge,isOpen=$P.is(":visible"),spacing=(isOpen?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(isOpen?"-open":"-closed"),$R,$T;$R=$Rs[pane]=$("<span></span>");if(isOpen&&o.resizable){}else{if(!isOpen&&o.slidable){$R.attr("title",o.sliderTip).css("cursor",o.sliderCursor)}}$R.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-resizer":"")).attr("resizer",pane).css(c.resizers.cssReq).css(edge,cDims[edge]+getPaneSize(pane)).addClass(rClass+" "+rClass+_pane+" "+rClass+_state+" "+rClass+_pane+_state).appendTo($Container);if(o.applyDefaultStyles){$R.css(c.resizers.cssDef)}if(o.closable){$T=$Ts[pane]=$("<div></div>");$T.attr("id",(o.paneSelector.substr(0,1)=="#"?o.paneSelector.substr(1)+"-toggler":"")).css(c.togglers.cssReq).attr("title",(isOpen?o.togglerTip_open:o.togglerTip_closed)).click(function(evt){toggle(pane);evt.stopPropagation()}).mouseover(function(evt){evt.stopPropagation()}).addClass(tClass+" "+tClass+_pane+" "+tClass+_state+" "+tClass+_pane+_state).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").addClass("content content-open").css("display",s.isClosed?"none":"block").appendTo($T)}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").addClass("content content-closed").css("display",s.isClosed?"block":"none").appendTo($T)}if(o.applyDefaultStyles){$T.css(c.togglers.cssDef)}if(!isOpen){bindStartSlidingEvent(pane,true)}}});sizeHandles("all",true)};var initResizable=function(){var draggingAvailable=(typeof $.fn.draggable=="function"),minPosition,maxPosition,edge;$.each(c.borderPanes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true}var rClass=o.resizerClass,dragClass=rClass+"-drag",dragPaneClass=rClass+"-"+pane+"-drag",draggingClass=rClass+"-dragging",draggingPaneClass=rClass+"-"+pane+"-dragging",draggingClassSet=false,$P=$Ps[pane],$R=$Rs[pane];if(!s.isClosed){$R.attr("title",o.resizerTip).css("cursor",o.resizerCursor)}$R.draggable({containment:$Container[0],axis:(c[pane].dir=="horz"?"y":"x"),delay:200,distance:1,helper:"clone",opacity:o.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(e,ui){if(false===execUserCallback(pane,o.onresize_start)){return false}s.isResizing=true;clearTimer(pane,"closeSlider");$R.addClass(dragClass+" "+dragPaneClass);draggingClassSet=false;var resizerWidth=(pane=="east"||pane=="south"?o.spacing_open:0);setPaneMinMaxSizes(pane);s.minPosition-=resizerWidth;s.maxPosition-=resizerWidth;edge=(c[pane].dir=="horz"?"top":"left");$(o.maskIframesOnResize===true?"iframe":o.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(e,ui){if(!draggingClassSet){$(".ui-draggable-dragging").addClass(draggingClass+" "+draggingPaneClass).children().css("visibility","hidden");draggingClassSet=true;if(s.isSliding){$Ps[pane].css("zIndex",c.zIndex.sliding)}}if(ui.position[edge]<s.minPosition){ui.position[edge]=s.minPosition}else{if(ui.position[edge]>s.maxPosition){ui.position[edge]=s.maxPosition}}},stop:function(e,ui){var dragPos=ui.position,resizerPos,newSize;$R.removeClass(dragClass+" "+dragPaneClass);switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=cDims.outerHeight-dragPos.top-$R.outerHeight();break;case"east":resizerPos=cDims.outerWidth-dragPos.left-$R.outerWidth();break}newSize=resizerPos-cDims[c[pane].edge];sizePane(pane,newSize);$("div.ui-layout-mask").remove();s.isResizing=false}})})};var hide=function(pane,onInit){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||s.isHidden){return}if(false===execUserCallback(pane,o.onhide_start)){return}s.isSliding=false;if($R){$R.hide()}if(onInit||s.isClosed){s.isClosed=true;s.isHidden=true;$P.hide();sizeMidPanes(c[pane].dir=="horz"?"all":"center");execUserCallback(pane,o.onhide_end||o.onhide)}else{s.isHiding=true;close(pane,false)}};var show=function(pane,openPane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(!$P||!s.isHidden){return}if(false===execUserCallback(pane,o.onshow_start)){return}s.isSliding=false;s.isShowing=true;if($R&&o.spacing_open>0){$R.show()}if(openPane===false){close(pane,true)}else{open(pane)}};var toggle=function(pane){var s=state[pane];if(s.isHidden){show(pane)}else{if(s.isClosed){open(pane)}else{close(pane)}}};var close=function(pane,force,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",isShowing=s.isShowing,isHiding=s.isHiding;delete s.isShowing;delete s.isHiding;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!force&&s.isClosed&&!isShowing){return}}if(c.isLayoutBusy){setFlowCallback("close",pane,force);return}if(!isShowing&&false===execUserCallback(pane,o.onclose_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;s.isClosed=true;if(isHiding){s.isHidden=true}else{if(isShowing){s.isHidden=false}}syncPinBtns(pane,false);if(!s.isSliding){sizeMidPanes(c[pane].dir=="horz"?"all":"center")}if($R){$R.css(edge,cDims[edge]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(o.resizable){$R.draggable("disable").css("cursor","default").attr("title","")}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.togglerTip_closed)}sizeHandles()}if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(!s.isClosed){return}close_2()})}else{$P.hide();close_2()}function close_2(){bindStartSlidingEvent(pane,true);if(!isShowing){execUserCallback(pane,o.onclose_end||o.onclose)}if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}if(isHiding){execUserCallback(pane,o.onhide_end||o.onhide)}execFlowCallback(pane)}};var open=function(pane,slide,noAnimation){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none"),edge=c[pane].edge,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding",isShowing=s.isShowing;delete s.isShowing;if(!$P||(!o.resizable&&!o.closable)){return}else{if(!s.isClosed&&!s.isSliding){return}}if(s.isHidden&&!isShowing){show(pane,true);return}if(c.isLayoutBusy){setFlowCallback("open",pane,slide);return}if(false===execUserCallback(pane,o.onopen_start)){return}c[pane].isMoving=true;c.isLayoutBusy=true;if(s.isSliding&&!slide){bindStopSlidingEvents(pane,false)}s.isClosed=false;if(isShowing){s.isHidden=false}setPaneMinMaxSizes(pane);if(s.size>s.maxSize){$P.css(c[pane].sizeType,max(1,cssSize(pane,s.maxSize)))}bindStartSlidingEvent(pane,false);if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isClosed){return}open_2()})}else{$P.show();open_2()}function open_2(){if(!s.isSliding){sizeMidPanes(c[pane].dir=="vert"?"center":"all")}if($R){$R.css(edge,cDims[edge]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open).addClass(!s.isSliding?"":rClass+_sliding+" "+rClass+_pane+_sliding);if(o.resizable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.resizerTip)}else{$R.css("cursor","default")}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.togglerTip_open)}sizeHandles("all")}sizeContent(pane);syncPinBtns(pane,!s.isSliding);execUserCallback(pane,o.onopen_end||o.onopen);if(isShowing){execUserCallback(pane,o.onshow_end||o.onshow)}execFlowCallback(pane)}};var lockPaneForFX=function(pane,doLock){var $P=$Ps[pane];if(doLock){$P.css({zIndex:c.zIndex.animation});if(pane=="south"){$P.css({top:cDims.top+cDims.innerHeight-$P.outerHeight()})}else{if(pane=="east"){$P.css({left:cDims.left+cDims.innerWidth-$P.outerWidth()})}}}else{if(!state[pane].isSliding){$P.css({zIndex:c.zIndex.pane_normal})}if(pane=="south"){$P.css({top:"auto"})}else{if(pane=="east"){$P.css({left:"auto"})}}}};var bindStartSlidingEvent=function(pane,enable){var o=options[pane],$R=$Rs[pane],trigger=o.slideTrigger_open;if(!$R||!o.slidable){return}if(trigger!="click"&&trigger!="dblclick"&&trigger!="mouseover"){trigger="click"}$R[enable?"bind":"unbind"](trigger,slideOpen).css("cursor",(enable?o.sliderCursor:"default")).attr("title",(enable?o.sliderTip:""))};var bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],trigger=o.slideTrigger_close,action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];s.isSliding=enable;clearTimer(pane,"closeSlider");$P.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.pane_normal)});$R.css({zIndex:(enable?c.zIndex.sliding:c.zIndex.resizer_normal)});if(trigger!="click"&&trigger!="mouseout"){trigger="mouseout"}if(enable){$P.bind(trigger,slideClosed);$R.bind(trigger,slideClosed);if(trigger="mouseout"){$P.bind("mouseover",cancelMouseOut);$R.bind("mouseover",cancelMouseOut)}}else{$P.unbind(trigger);$R.unbind(trigger);if(trigger="mouseout"){$P.unbind("mouseover");$R.unbind("mouseover");clearTimer(pane,"closeSlider")}}function cancelMouseOut(evt){clearTimer(pane,"closeSlider");evt.stopPropagation()}};var slideOpen=function(){var pane=$(this).attr("resizer");if(state[pane].isClosed){bindStopSlidingEvents(pane,true);open(pane,true)}};var slideClosed=function(){var $E=$(this),pane=$E.attr("pane")||$E.attr("resizer"),o=options[pane],s=state[pane];if(s.isClosed||s.isResizing){return}else{if(o.slideTrigger_close=="click"){close_NOW()}else{setTimer(pane,"closeSlider",close_NOW,300)}}function close_NOW(){bindStopSlidingEvents(pane,false);if(!s.isClosed){close(pane)}}};var sizePane=function(pane,size){var edge=c[pane].edge,dir=c[pane].dir,o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];setPaneMinMaxSizes(pane);s.minSize=max(s.minSize,o.minSize);if(o.maxSize>0){s.maxSize=min(s.maxSize,o.maxSize)}size=max(size,s.minSize);size=min(size,s.maxSize);s.size=size;$R.css(edge,size+cDims[edge]);$P.css(c[pane].sizeType,max(1,cssSize(pane,size)));if(!s.isSliding){sizeMidPanes(dir=="horz"?"all":"center")}sizeHandles();sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)};var sizeMidPanes=function(panes,overrideDims,onInit){if(!panes||panes=="all"){panes="east,west,center"}var d=getPaneDims();if(overrideDims){$.extend(d,overrideDims)}$.each(panes.split(","),function(){if(!$Ps[this]){return}var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],hasRoom=true,CSS={};if(pane=="center"){d=getPaneDims();CSS=$.extend({},d);CSS.width=max(1,cssW(pane,CSS.width));CSS.height=max(1,cssH(pane,CSS.height));hasRoom=(CSS.width>1&&CSS.height>1);if($.browser.msie&&(!$.boxModel||$.browser.version<7)){if($Ps.north){$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)})}if($Ps.south){$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)})}}}else{CSS.top=d.top;CSS.bottom=d.bottom;CSS.height=max(1,cssH(pane,d.height));hasRoom=(CSS.height>1)}if(hasRoom){$P.css(CSS);if(s.noRoom){s.noRoom=false;if(s.isHidden){return}else{show(pane,!s.isClosed)}}if(!onInit){sizeContent(pane);execUserCallback(pane,o.onresize_end||o.onresize)}}else{if(!s.noRoom){s.noRoom=true;if(s.isHidden){return}if(onInit){$P.hide();if($R){$R.hide()}}else{hide(pane)}}}})};var sizeContent=function(panes){if(!panes||panes=="all"){panes=c.allPanes}$.each(panes.split(","),function(){if(!$Cs[this]){return}var pane=str(this),ignore=options[pane].contentIgnoreSelector,$P=$Ps[pane],$C=$Cs[pane],e_C=$C[0],height=cssH($P);$P.children().each(function(){if(this==e_C){return}var $E=$(this);if(!ignore||!$E.is(ignore)){height-=$E.outerHeight()}});if(height>0){height=cssH($C,height)}if(height<1){$C.hide()}else{$C.css({height:height}).show()}})};var sizeHandles=function(panes,onInit){if(!panes||panes=="all"){panes=c.borderPanes}$.each(panes.split(","),function(){var pane=str(this),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane];if(!$P||!$R||(!o.resizable&&!o.closable)){return}var dir=c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,offset,CSS={};if(spacing==0){$R.hide();return}else{if(!s.noRoom&&!s.isHidden){$R.show()}}if(dir=="horz"){paneLen=$P.outerWidth();$R.css({width:max(1,cssW($R,paneLen)),height:max(1,cssH($R,spacing)),left:cssNum($P,"left")})}else{paneLen=$P.outerHeight();$R.css({height:max(1,cssH($R,paneLen)),width:max(1,cssW($R,spacing)),top:cDims.top+getPaneSize("north",true)})}if($T){if(togLen==0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return}else{$T.show()}if(!(togLen>0)||togLen=="100%"||togLen>paneLen){togLen=paneLen;offset=0}else{if(typeof togAlign=="string"){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=Math.floor((paneLen-togLen)/2)}}else{var x=parseInt(togAlign);if(togAlign>=0){offset=x}else{offset=paneLen-togLen+x}}}var $TC_o=(o.togglerContent_open?$T.children(".content-open"):false),$TC_c=(o.togglerContent_closed?$T.children(".content-closed"):false),$TC=(s.isClosed?$TC_c:$TC_o);if($TC_o){$TC_o.css("display",s.isClosed?"none":"block")}if($TC_c){$TC_c.css("display",s.isClosed?"block":"none")}if(dir=="horz"){var width=cssW($T,togLen);$T.css({width:max(0,width),height:max(1,cssH($T,spacing)),left:offset});if($TC){$TC.css("marginLeft",Math.floor((width-$TC.outerWidth())/2))}}else{var height=cssH($T,togLen);$T.css({height:max(0,height),width:max(1,cssW($T,spacing)),top:offset});if($TC){$TC.css("marginTop",Math.floor((height-$TC.outerHeight())/2))}}}if(onInit&&o.initHidden){$R.hide();if($T){$T.hide()}}})};var resizeAll=function(){var oldW=cDims.innerWidth,oldH=cDims.innerHeight;cDims=state.container=getElemDims($Container);var checkH=(cDims.innerHeight<oldH),checkW=(cDims.innerWidth<oldW),s,dir;if(checkH||checkW){$.each(["south","north","east","west"],function(i,pane){s=state[pane];dir=c[pane].dir;if(!s.isClosed&&((checkH&&dir=="horz")||(checkW&&dir=="vert"))){setPaneMinMaxSizes(pane);if(s.size>s.maxSize){sizePane(pane,s.maxSize)}}})}sizeMidPanes("all");sizeHandles("all")};function keyDown(evt){if(!evt){return true}var code=evt.keyCode;if(code<33){return true}var PANE={38:"north",40:"south",37:"west",39:"east"},isCursorKey=(code>=37&&code<=40),ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,pane=false,s,o,k,m,el;if(!CTRL&&!SHIFT){return true}else{if(isCursorKey&&options[PANE[code]].enableCursorHotkey){pane=PANE[code]}else{$.each(c.borderPanes.split(","),function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code==(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false}}})}}if(!pane){return true}o=options[pane];s=state[pane];if(!o.enableCursorHotkey||s.isHidden||!$Ps[pane]){return true}el=evt.target||evt.srcElement;if(el&&SHIFT&&isCursorKey&&(el.tagName=="TEXTAREA"||(el.tagName=="INPUT"&&(code==37||code==39)))){return true}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false}function allowOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).attr("pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane];if(s.cssSaved){resetOverflow(pane)}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return}var newCSS={zIndex:(c.zIndex.pane_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible"}if(ofX&&ofX!="visible"&&ofX!="auto"){curCSS.overflowX=ofX;newCSS.overflowX="visible"}if(ofY&&ofY!="visible"&&ofY!="auto"){curCSS.overflowY=ofX;newCSS.overflowY="visible"}s.cssSaved=curCSS;$P.css(newCSS);$.each(c.allPanes.split(","),function(i,p){if(p!=pane){resetOverflow(p)}})}function resetOverflow(elem){if(this&&this.tagName){elem=this}var $P;if(typeof elem=="string"){$P=$Ps[elem]}else{if($(elem).hasClass("ui-layout-pane")){$P=$(elem)}else{$P=$(elem).parents("div[pane]:first")}}if(!$P.length){return}var pane=$P.attr("pane"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",c.zIndex.pane_normal)}$P.css(CSS);s.cssSaved=false}function getBtn(selector,pane,action){var $E=$(selector),err="Error Adding Button \n\nInvalid ";if(!$E.length){alert(err+"selector: "+selector)}else{if(c.borderPanes.indexOf(pane)==-1){alert(err+"pane: "+pane)}else{var btn=options[pane].buttonClass+"-"+action;$E.addClass(btn+" "+btn+"-"+pane);return $E}}return false}function addToggleBtn(selector,pane){var $E=getBtn(selector,pane,"toggle");if($E){$E.attr("title",state[pane].isClosed?"Open":"Close").click(function(evt){toggle(pane);evt.stopPropagation()})}}function addOpenBtn(selector,pane){var $E=getBtn(selector,pane,"open");if($E){$E.attr("title","Open").click(function(evt){open(pane);evt.stopPropagation()})}}function addCloseBtn(selector,pane){var $E=getBtn(selector,pane,"close");if($E){$E.attr("title","Close").click(function(evt){close(pane);evt.stopPropagation()})}}function addPinBtn(selector,pane){var $E=getBtn(selector,pane,"pin");if($E){var s=state[pane];$E.click(function(evt){setPinState($(this),pane,(s.isSliding||s.isClosed));if(s.isSliding||s.isClosed){open(pane)}else{close(pane)}evt.stopPropagation()});setPinState($E,pane,(!s.isClosed&&!s.isSliding));c[pane].pins.push(selector)}}function syncPinBtns(pane,doPin){$.each(c[pane].pins,function(i,selector){setPinState($(selector),pane,doPin)})}function setPinState($Pin,pane,doPin){var updown=$Pin.attr("pin");if(updown&&doPin==(updown=="down")){return}var root=options[pane].buttonClass,class1=root+"-pin",class2=class1+"-"+pane,UP1=class1+"-up",UP2=class2+"-up",DN1=class1+"-down",DN2=class2+"-down";$Pin.attr("pin",doPin?"down":"up").attr("title",doPin?"Un-Pin":"Pin").removeClass(doPin?UP1:DN1).removeClass(doPin?UP2:DN2).addClass(doPin?DN1:UP1).addClass(doPin?DN2:UP2)}var $Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;create();return{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}})(jQuery);(function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type;this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length){settings.single="metadata"}var data=$.data(elem,settings.single);if(data){return data}data="{}";var getData=function(data){if(typeof data!="string"){return data}if(data.indexOf("{")<0){data=eval("("+data+")")}};var getObject=function(data){if(typeof data!="string"){return data}data=eval("("+data+")");return data};if(settings.type=="html5"){var object={};$(elem.attributes).each(function(){var name=this.nodeName;if(name.match(/^data-/)){name=name.replace(/^data-/,"")}else{return true}object[name]=getObject(this.nodeValue)})}else{if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m){data=m[1]}}else{if(settings.type=="elem"){if(!elem.getElementsByTagName){return}var e=elem.getElementsByTagName(settings.name);if(e.length){data=$.trim(e[0].innerHTML)}}else{if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr){data=attr}}}}object=getObject(data.indexOf("{")<0?"{"+data+"}":data)}$.data(elem,settings.single,object);return object}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}})(jQuery);(function($){$.fn.editable=function(target,options){if("disable"==target){$(this).data("disabled.editable",true);return}if("enable"==target){$(this).data("disabled.editable",false);return}if("destroy"==target){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var settings=$.extend({},$.fn.editable.defaults,{target:target},options);var plugin=$.editable.types[settings.type].plugin||function(){};var submit=$.editable.types[settings.type].submit||function(){};var buttons=$.editable.types[settings.type].buttons||$.editable.types.defaults.buttons;var content=$.editable.types[settings.type].content||$.editable.types.defaults.content;var element=$.editable.types[settings.type].element||$.editable.types.defaults.element;var reset=$.editable.types[settings.type].reset||$.editable.types.defaults.reset;var callback=settings.callback||function(){};var onedit=settings.onedit||function(){};var onsubmit=settings.onsubmit||function(){};var onreset=settings.onreset||function(){};var onerror=settings.onerror||reset;if(settings.tooltip){$(this).attr("title",settings.tooltip)}settings.autowidth="auto"==settings.width;settings.autoheight="auto"==settings.height;return this.each(function(){var self=this;var savedwidth=$(self).width();var savedheight=$(self).height();$(this).data("event.editable",settings.event);if(!$.trim($(this).html())){$(this).html(settings.placeholder)}$(this).bind(settings.event,function(e){if(true===$(this).data("disabled.editable")){return}if(self.editing){return}if(false===onedit.apply(this,[settings,self])){return}e.preventDefault();e.stopPropagation();if(settings.tooltip){$(self).removeAttr("title")}if(0==$(self).width()){settings.width=savedwidth;settings.height=savedheight}else{if(settings.width!="none"){settings.width=settings.autowidth?$(self).width():settings.width}if(settings.height!="none"){settings.height=settings.autoheight?$(self).height():settings.height}}if($(this).html().toLowerCase().replace(/(;|")/g,"")==settings.placeholder.toLowerCase().replace(/(;|")/g,"")){$(this).html("")}self.editing=true;self.revert=$(self).html();$(self).html("");var form=$("<form />");if(settings.cssclass){if("inherit"==settings.cssclass){form.attr("class",$(self).attr("class"))}else{form.attr("class",settings.cssclass)}}if(settings.style){if("inherit"==settings.style){form.attr("style",$(self).attr("style"));form.css("display",$(self).css("display"))}else{form.attr("style",settings.style)}}var input=element.apply(form,[settings,self]);var input_content;if(settings.loadurl){var t=setTimeout(function(){input.disabled=true;content.apply(form,[settings.loadtext,settings,self])},100);var loaddata={};loaddata[settings.id]=self.id;if($.isFunction(settings.loaddata)){$.extend(loaddata,settings.loaddata.apply(self,[self.revert,settings]))}else{$.extend(loaddata,settings.loaddata)}$.ajax({type:settings.loadtype,url:settings.loadurl,data:loaddata,async:false,success:function(result){window.clearTimeout(t);input_content=result;input.disabled=false}})}else{if(settings.data){input_content=settings.data;if($.isFunction(settings.data)){input_content=settings.data.apply(self,[self.revert,settings])}}else{input_content=self.revert}}content.apply(form,[input_content,settings,self]);input.attr("name",settings.name);buttons.apply(form,[settings,self]);$(self).append(form);plugin.apply(form,[settings,self]);$(":input:visible:enabled:first",form).focus();if(settings.select){input.select()}input.keydown(function(e){if(e.keyCode==27){e.preventDefault();reset.apply(form,[settings,self])}});var t;if("cancel"==settings.onblur){input.blur(function(e){t=setTimeout(function(){reset.apply(form,[settings,self])},500)})}else{if("submit"==settings.onblur){input.blur(function(e){t=setTimeout(function(){form.submit()},200)})}else{if($.isFunction(settings.onblur)){input.blur(function(e){settings.onblur.apply(self,[input.val(),settings])})}else{input.blur(function(e){})}}}form.submit(function(e){if(t){clearTimeout(t)}e.preventDefault();if(false!==onsubmit.apply(form,[settings,self])){if(false!==submit.apply(form,[settings,self])){if($.isFunction(settings.target)){var str=settings.target.apply(self,[input.val(),settings]);$(self).html(str);self.editing=false;callback.apply(self,[self.innerHTML,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}}else{var submitdata={};submitdata[settings.name]=input.val();submitdata[settings.id]=self.id;if($.isFunction(settings.submitdata)){$.extend(submitdata,settings.submitdata.apply(self,[self.revert,settings]))}else{$.extend(submitdata,settings.submitdata)}if("PUT"==settings.method){submitdata._method="put"}$(self).html(settings.indicator);var ajaxoptions={type:"POST",data:submitdata,dataType:"html",url:settings.target,success:function(result,status){if(ajaxoptions.dataType=="html"){$(self).html(result)}self.editing=false;callback.apply(self,[result,settings]);if(!$.trim($(self).html())){$(self).html(settings.placeholder)}},error:function(xhr,status,error){onerror.apply(form,[settings,self,xhr])}};$.extend(ajaxoptions,settings.ajaxoptions);$.ajax(ajaxoptions)}}}$(self).attr("title",settings.tooltip);return false})});this.reset=function(form){if(this.editing){if(false!==onreset.apply(form,[settings,self])){$(self).html(self.revert);self.editing=false;if(!$.trim($(self).html())){$(self).html(settings.placeholder)}if(settings.tooltip){$(self).attr("title",settings.tooltip)}}}}})};$.editable={types:{defaults:{element:function(settings,original){var input=$('<input type="hidden"></input>');$(this).append(input);return(input)},content:function(string,settings,original){$(":input:first",this).val(string)},reset:function(settings,original){original.reset(this)},buttons:function(settings,original){var form=this;if(settings.submit){if(settings.submit.match(/>$/)){var submit=$(settings.submit).click(function(){if(submit.attr("type")!="submit"){form.submit()}})}else{var submit=$('<button type="submit" />');submit.html(settings.submit)}$(this).append(submit)}if(settings.cancel){if(settings.cancel.match(/>$/)){var cancel=$(settings.cancel)}else{var cancel=$('<button type="cancel" />');cancel.html(settings.cancel)}$(this).append(cancel);$(cancel).click(function(event){if($.isFunction($.editable.types[settings.type].reset)){var reset=$.editable.types[settings.type].reset}else{var reset=$.editable.types.defaults.reset}reset.apply(form,[settings,original]);return false})}}},text:{element:function(settings,original){var input=$("<input />");if(settings.width!="none"){input.width(settings.width)}if(settings.height!="none"){input.height(settings.height)}input.attr("autocomplete","off");input.attr("id",settings.fieldid);$(this).append(input);return(input)}},textarea:{element:function(settings,original){var textarea=$("<textarea />");if(settings.rows){textarea.attr("rows",settings.rows)}else{if(settings.height!="none"){textarea.height(settings.height)}}if(settings.cols){textarea.attr("cols",settings.cols)}else{if(settings.width!="none"){textarea.width(settings.width)}}textarea.attr("id",settings.fieldid);$(this).append(textarea);return(textarea)}},select:{element:function(settings,original){var select=$("<select />");select.attr("id",settings.fieldid);$(this).append(select);return(select)},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json.selected||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}})}}},addInputType:function(name,input){$.editable.types[name]=input}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{},fieldid:"jeditable_inline_field"}})(jQuery);(function(d){d.tools=d.tools||{};d.tools.scrollable={version:"1.1.2",conf:{size:5,vertical:false,speed:400,keyboard:true,keyboardSteps:null,disabledClass:"disabled",hoverClass:null,clickable:true,activeClass:"active",easing:"swing",loop:false,items:".items",item:null,prev:".prev",next:".next",prevPage:".prevPage",nextPage:".nextPage",api:false}};var e;function b(y,w){var B=this,z=d(this),f=!w.vertical,h=y.children(),t=0,p;if(!e){e=B}d.each(w,function(C,D){if(d.isFunction(D)){z.bind(C,D)}});if(h.length>1){h=d(w.items,y)}function v(D){var C=d(D);return w.globalNav?C:y.parent().find(D)}y.data("finder",v);var j=v(w.prev),n=v(w.next),k=v(w.prevPage),x=v(w.nextPage);d.extend(B,{getIndex:function(){return t},getClickIndex:function(){var C=B.getItems();return C.index(C.filter("."+w.activeClass))},getConf:function(){return w},getSize:function(){return B.getItems().size()},getPageAmount:function(){return Math.ceil(this.getSize()/w.size)},getPageIndex:function(){return Math.ceil(t/w.size)},getNaviButtons:function(){return j.add(n).add(k).add(x)},getRoot:function(){return y},getItemWrap:function(){return h},updateItemWrap:function(){h=B.getRoot().children()},getItems:function(){return h.children(w.item)},getVisibleItems:function(){return B.getItems().slice(t,t+w.size)},seekTo:function(C,G,D){if(C<0){C=0}if(t===C){return B}if(d.isFunction(G)){D=G}if(C>B.getSize()-w.size){return w.loop?B.begin():this.end()}var E=B.getItems().eq(C);if(!E.length){return B}var F=d.Event("onBeforeSeek");z.trigger(F,[C]);if(F.isDefaultPrevented()){return B}if(G===undefined||d.isFunction(G)){G=w.speed}function H(){if(D){D.call(B,C)}z.trigger("onSeek",[C])}if(f){h.animate({left:-E.position().left},G,w.easing,H)}else{h.animate({top:-E.position().top},G,w.easing,H)}e=B;t=C;F=d.Event("onStart");z.trigger(F,[C]);if(F.isDefaultPrevented()){return B}j.add(k).toggleClass(w.disabledClass,C===0);n.add(x).toggleClass(w.disabledClass,C>=B.getSize()-w.size);return B},move:function(E,D,C){p=E>0;return this.seekTo(t+E,D,C)},next:function(D,C){return this.move(1,D,C)},prev:function(D,C){return this.move(-1,D,C)},movePage:function(G,F,E){p=G>0;var C=w.size*G;var D=t%w.size;if(D>0){C+=(G>0?-D:w.size-D)}return this.move(C,F,E)},prevPage:function(D,C){return this.movePage(-1,D,C)},nextPage:function(D,C){return this.movePage(1,D,C)},setPage:function(D,E,C){return this.seekTo(D*w.size,E,C)},begin:function(D,C){p=false;return this.seekTo(0,D,C)},end:function(D,C){p=true;var E=this.getSize()-w.size;return E>0?this.seekTo(E,D,C):B},reload:function(){z.trigger("onReload");return B},focus:function(){e=B;return B},click:function(E){var F=B.getItems().eq(E),C=w.activeClass,D=w.size;if(E<0||E>=B.getSize()){return B}if(D==1){if(w.loop){return B.next()}if(E===0||E==B.getSize()-1){p=(p===undefined)?true:!p}return p===false?B.prev():B.next()}if(D==2){if(E==t){E--}B.getItems().removeClass(C);F.addClass(C);return B.seekTo(E,time,fn)}if(!F.hasClass(C)){B.getItems().removeClass(C);F.addClass(C);var H=Math.floor(D/2);var G=E-H;if(G>B.getSize()-D){G=B.getSize()-D}if(G!==E){return B.seekTo(G)}}return B},bind:function(C,D){z.bind(C,D);return B},unbind:function(C){z.unbind(C);return B}});d.each("onBeforeSeek,onStart,onSeek,onReload".split(","),function(C,D){B[D]=function(E){return B.bind(D,E)}});j.addClass(w.disabledClass).click(function(){B.prev()});n.click(function(){B.next()});x.click(function(){B.nextPage()});if(B.getSize()<w.size){n.add(x).addClass(w.disabledClass)}k.addClass(w.disabledClass).click(function(){B.prevPage()});var q=w.hoverClass,A="keydown."+Math.random().toString().substring(10);B.onReload(function(){if(q){B.getItems().hover(function(){d(this).addClass(q)},function(){d(this).removeClass(q)})}if(w.clickable){B.getItems().each(function(C){d(this).unbind("click.scrollable").bind("click.scrollable",function(D){if(d(D.target).is("a")){return}return B.click(C)})})}if(w.keyboard){d(document).unbind(A).bind(A,function(C){if(C.altKey||C.ctrlKey){return}if(w.keyboard!="static"&&e!=B){return}var D=w.keyboardSteps;if(f&&(C.keyCode==37||C.keyCode==39)){B.move(C.keyCode==37?-D:D);return C.preventDefault()}if(!f&&(C.keyCode==38||C.keyCode==40)){B.move(C.keyCode==38?-D:D);return C.preventDefault()}return true})}else{d(document).unbind(A)}});B.reload()}d.fn.scrollable=function(f){var h=this.eq(typeof f=="number"?f:0).data("scrollable");if(h){return h}var j=d.extend({},d.tools.scrollable.conf);f=d.extend(j,f);f.keyboardSteps=f.keyboardSteps||f.size;this.each(function(){h=new b(d(this),f);d(this).data("scrollable",h)});return f.api?h:this}})(jQuery);(function(d){d.fn.wheel=function(h){return this[h?"bind":"trigger"]("wheel",h)};d.event.special.wheel={setup:function(){d.event.add(this,f,e,{})},teardown:function(){d.event.remove(this,f,e)}};var f=!d.browser.mozilla?"mousewheel":"DOMMouseScroll"+(d.browser.version<"1.9"?" mousemove":"");function e(h){switch(h.type){case"mousemove":return d.extend(h.data,{clientX:h.clientX,clientY:h.clientY,pageX:h.pageX,pageY:h.pageY});case"DOMMouseScroll":d.extend(h,h.data);h.delta=-h.detail/3;break;case"mousewheel":h.delta=h.wheelDelta/120;break}h.type="wheel";return d.event.handle.call(this,h,h.delta)}var b=d.tools.scrollable;b.plugins=b.plugins||{};b.plugins.mousewheel={version:"1.0.1",conf:{api:false,speed:50}};d.fn.mousewheel=function(j){var k=d.extend({},b.plugins.mousewheel.conf),h;if(typeof j=="number"){j={speed:j}}j=d.extend(k,j);this.each(function(){var n=d(this).scrollable();if(n){h=n}n.getRoot().wheel(function(p,q){n.move(q<0?1:-1,j.speed||50);return false})});return j.api?h:this}})(jQuery);
/* jQuery Validation Plugin - v1.10.0 - 9/7/2012
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2012 Jörn Zaefferer; Licensed MIT, GPL */
(function(b){b.extend(b.fn,{validate:function(d){if(!this.length){d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var e=b.data(this[0],"validator");return e?e:(this.attr("novalidate","novalidate"),e=new b.validator(d,this[0]),b.data(this[0],"validator",e),e.settings.onsubmit&&(this.validateDelegate(":submit","click",function(f){e.settings.submitHandler&&(e.submitButton=f.target),b(f.target).hasClass("cancel")&&(e.cancelSubmit=!0)}),this.submit(function(f){function h(){var j;return e.settings.submitHandler?(e.submitButton&&(j=b("<input type='hidden'/>").attr("name",e.submitButton.name).val(e.submitButton.value).appendTo(e.currentForm)),e.settings.submitHandler.call(e,e.currentForm,f),e.submitButton&&j.remove(),!1):!0}return e.settings.debug&&f.preventDefault(),e.cancelSubmit?(e.cancelSubmit=!1,h()):e.form()?e.pendingRequest?(e.formSubmitted=!0,!1):h():(e.focusInvalid(),!1)})),e)},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}var d=!0,e=b(this[0].form).validate();return this.each(function(){d&=e.element(this)}),d},removeAttrs:function(e){var h={},f=this;return b.each(e.split(/\s/),function(j,d){h[d]=f.attr(d),f.removeAttr(d)}),h},rules:function(y,x){var w=this[0];if(y){var v=b.data(w.form,"validator").settings,t=v.rules,q=b.validator.staticRules(w);switch(y){case"add":b.extend(q,b.validator.normalizeRule(x)),t[w.name]=q,x.messages&&(v.messages[w.name]=b.extend(v.messages[w.name],x.messages));break;case"remove":if(!x){return delete t[w.name],q}var p={};return b.each(x.split(/\s/),function(e,d){p[d]=q[d],delete q[d]}),p}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(w),b.validator.classRules(w),b.validator.attributeRules(w),b.validator.staticRules(w)),w);if(n.required){var k=n.required;delete n.required,n=b.extend({required:k},n)}return n}}),b.extend(b.expr[":"],{blank:function(d){return !b.trim(""+d.value)},filled:function(d){return !!b.trim(""+d.value)},unchecked:function(d){return !d.checked}}),b.validator=function(d,e){this.settings=b.extend(!0,{},b.validator.defaults,d),this.currentForm=e,this.init()},b.validator.format=function(d,e){return arguments.length===1?function(){var f=b.makeArray(arguments);return f.unshift(d),b.validator.format.apply(this,f)}:(arguments.length>2&&e.constructor!==Array&&(e=b.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),b.each(e,function(f,h){d=d.replace(new RegExp("\\{"+f+"\\}","g"),h)}),d)},b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,d){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,d){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,d){if(d.which===9&&this.elementValue(e)===""){return}(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,d){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).addClass(h).removeClass(f):b(e).addClass(h).removeClass(f)},unhighlight:function(e,h,f){e.type==="radio"?this.findByName(e.name).removeClass(h).addClass(f):b(e).removeClass(h).addClass(f)}},setDefaults:function(d){b.extend(b.validator.defaults,d)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function f(j){var n=b.data(this[0].form,"validator"),k="on"+j.type.replace(/^validate/,"");n.settings[k]&&n.settings[k].call(n,this[0],j)}this.labelContainer=b(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm),this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var e=this.groups={};b.each(this.settings.groups,function(k,j){b.each(j.split(/\s/),function(n,p){e[p]=k})});var h=this.settings.rules;b.each(h,function(j,k){h[j]=b.validator.normalizeRule(k)}),b(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f),this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),b.extend(this.submitted,this.errorMap),this.invalid=b.extend({},this.errorMap),this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,d=this.currentElements=this.elements();d[e];e++){this.check(d[e])}return this.valid()},element:function(d){d=this.validationTargetFor(this.clean(d)),this.lastElement=d,this.prepareElement(d),this.currentElements=b(d);var e=this.check(d)!==!1;return e?delete this.invalid[d.name]:this.invalid[d.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(d){if(d){b.extend(this.errorMap,d),this.errorList=[];for(var e in d){this.errorList.push({message:d[e],element:this.findByName(e)[0]})}this.successList=b.grep(this.successList,function(f){return !(f.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var d=0;for(var f in e){d++}return d},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(d){}}},findLastActive:function(){var d=this.lastActive;return d&&b.grep(this.errorList,function(e){return e.element.name===d.name}).length===1&&d},elements:function(){var d=this,e={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in e||!d.objectLength(b(this).rules())?!1:(e[this.name]=!0,!0)})},clean:function(d){return b(d)[0]},errors:function(){var d=this.settings.errorClass.replace(" ",".");return b(this.settings.errorElement+"."+d,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=b([]),this.toHide=b([]),this.currentElements=b([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(d){this.reset(),this.toHide=this.errorsFor(d)},elementValue:function(e){var h=b(e).attr("type"),f=b(e).val();return h==="radio"||h==="checkbox"?b('input[name="'+b(e).attr("name")+'"]:checked').val():typeof f=="string"?f.replace(/\r/g,""):f},check:function(j){j=this.validationTargetFor(this.clean(j));var w=b(j).rules(),v=!1,t=this.elementValue(j),q;for(var p in w){var n={method:p,parameters:w[p]};try{q=b.validator.methods[p].call(this,t,j,n.parameters);if(q==="dependency-mismatch"){v=!0;continue}v=!1;if(q==="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!q){return this.formatAndAdd(j,n),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+n.method+"' method",k),k}}if(v){return}return this.objectLength(w)&&this.successList.push(j),!0},customMetaMessage:function(e,h){if(!b.metadata){return}var f=this.settings.meta?b(e).metadata()[this.settings.meta]:b(e).metadata();return f&&f.messages&&f.messages[h]},customDataMessage:function(d,e){return b(d).data("msg-"+e.toLowerCase())||d.attributes&&b(d).attr("data-msg-"+e.toLowerCase())},customMessage:function(e,d){var f=this.settings.messages[e];return f&&(f.constructor===String?f:f[d])},findDefined:function(){for(var d=0;d<arguments.length;d++){if(arguments[d]!==undefined){return arguments[d]}}return undefined},defaultMessage:function(d,e){return this.findDefined(this.customMessage(d.name,e),this.customDataMessage(d,e),this.customMetaMessage(d,e),!this.settings.ignoreTitle&&d.title||undefined,b.validator.messages[e],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(f,k){var j=this.defaultMessage(f,k.method),h=/\$?\{(\d+)\}/g;typeof j=="function"?j=j.call(this,k.parameters,f):h.test(j)&&(j=b.validator.format(j.replace(h,"{$1}"),k.parameters)),this.errorList.push({message:j,element:f}),this.errorMap[f.name]=j,this.submitted[f.name]=j},addWrapper:function(d){return this.settings.wrapper&&(d=d.add(d.parent(this.settings.wrapper))),d},defaultShowErrors:function(){var e,d;for(e=0;this.errorList[e];e++){var f=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,f.element,this.settings.errorClass,this.settings.validClass),this.showLabel(f.element,f.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success){for(e=0;this.successList[e];e++){this.showLabel(this.successList[e])}}if(this.settings.unhighlight){for(e=0,d=this.validElements();d[e];e++){this.settings.unhighlight.call(this,d[e],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(e,h){var f=this.errorsFor(e);f.length?(f.removeClass(this.settings.validClass).addClass(this.settings.errorClass),f.attr("generated")&&f.html(h)):(f=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).html(h||""),this.settings.wrapper&&(f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,b(e)):f.insertAfter(e))),!h&&this.settings.success&&(f.text(""),typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f,e)),this.toShow=this.toShow.add(f)},errorsFor:function(d){var e=this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")===e})},idOrName:function(d){return this.groups[d.name]||(this.checkable(d)?d.name:d.id||d.name)},validationTargetFor:function(d){return this.checkable(d)&&(d=this.findByName(d.name).not(this.settings.ignore)[0]),d},checkable:function(d){return/radio|checkbox/i.test(d.type)},findByName:function(d){return b(this.currentForm).find('[name="'+d+'"]')},getLength:function(d,e){switch(e.nodeName.toLowerCase()){case"select":return b("option:selected",e).length;case"input":if(this.checkable(e)){return this.findByName(e.name).filter(":checked").length}}return d.length},depend:function(e,d){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,d):!0},dependTypes:{"boolean":function(e,d){return e},string:function(d,e){return !!b(d,e.form).length},"function":function(e,d){return e(d)}},optional:function(d){var e=this.elementValue(d);return !b.validator.methods.required.call(this,e,d)&&"dependency-mismatch"},startRequest:function(d){this.pending[d.name]||(this.pendingRequest++,this.pending[d.name]=!0)},stopRequest:function(d,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[d.name],e&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!e&&this.pendingRequest===0&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(d){return b.data(d,"previousValue")||b.data(d,"previousValue",{old:null,valid:!0,message:this.defaultMessage(d,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(d,e){d.constructor===String?this.classRuleSettings[d]=e:b.extend(this.classRuleSettings,d)},classRules:function(e){var h={},f=b(e).attr("class");return f&&b.each(f.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(h,b.validator.classRuleSettings[this])}),h},attributeRules:function(h){var p={},n=b(h);for(var k in b.validator.methods){var j;k==="required"?(j=n.get(0).getAttribute(k),j===""&&(j=!0),j=!!j):j=n.attr(k),j?p[k]=j:n[0].getAttribute("type")===k&&(p[k]=!0)}return p.maxlength&&/-1|2147483647|524288/.test(p.maxlength)&&delete p.maxlength,p},metadataRules:function(d){if(!b.metadata){return{}}var e=b.data(d.form,"validator").settings.meta;return e?b(d).metadata()[e]:b(d).metadata()},staticRules:function(e){var h={},f=b.data(e.form,"validator");return f.settings.rules&&(h=b.validator.normalizeRule(f.settings.rules[e.name])||{}),h},normalizeRules:function(d,e){return b.each(d,function(k,j){if(j===!1){delete d[k];return}if(j.param||j.depends){var h=!0;switch(typeof j.depends){case"string":h=!!b(j.depends,e.form).length;break;case"function":h=j.depends.call(e,e)}h?d[k]=j.param!==undefined?j.param:!0:delete d[k]}}),b.each(d,function(h,f){d[h]=b.isFunction(f)?f(e):f}),b.each(["minlength","maxlength","min","max"],function(){d[this]&&(d[this]=Number(d[this]))}),b.each(["rangelength","range"],function(){d[this]&&(d[this]=[Number(d[this][0]),Number(d[this][1])])}),b.validator.autoCreateRanges&&(d.min&&d.max&&(d.range=[d.min,d.max],delete d.min,delete d.max),d.minlength&&d.maxlength&&(d.rangelength=[d.minlength,d.maxlength],delete d.minlength,delete d.maxlength)),d.messages&&delete d.messages,d},normalizeRule:function(d){if(typeof d=="string"){var e={};b.each(d.split(/\s/),function(){e[this]=!0}),d=e}return d},addMethod:function(e,h,f){b.validator.methods[e]=h,b.validator.messages[e]=f!==undefined?f:b.validator.messages[e],h.length<3&&b.validator.addClassRules(e,b.validator.normalizeRule(e))},methods:{required:function(f,k,j){if(!this.depend(j,k)){return"dependency-mismatch"}if(k.nodeName.toLowerCase()==="select"){var h=b(k).val();return h&&h.length>0}return this.checkable(k)?this.getLength(f,k)>0:b.trim(f).length>0},remote:function(h,q,p){if(this.optional(q)){return"dependency-mismatch"}var n=this.previousValue(q);this.settings.messages[q.name]||(this.settings.messages[q.name]={}),n.originalMessage=this.settings.messages[q.name].remote,this.settings.messages[q.name].remote=n.message,p=typeof p=="string"&&{url:p}||p;if(this.pending[q.name]){return"pending"}if(n.old===h){return n.valid}n.old=h;var k=this;this.startRequest(q);var j={};return j[q.name]=h,b.ajax(b.extend(!0,{url:p,mode:"abort",port:"validate"+q.name,dataType:"json",data:j,success:function(w){k.settings.messages[q.name].remote=n.originalMessage;var v=w===!0||w==="true";if(v){var t=k.formSubmitted;k.prepareElement(q),k.formSubmitted=t,k.successList.push(q),delete k.invalid[q.name],k.showErrors()}else{var f={},e=w||k.defaultMessage(q,"remote");f[q.name]=n.message=b.isFunction(e)?e(h):e,k.invalid[q.name]=!0,k.showErrors(f)}n.valid=v,k.stopRequest(q,v)}},p)),"pending"},minlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j},maxlength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h<=j},rangelength:function(f,k,j){var h=b.isArray(f)?f.length:this.getLength(b.trim(f),k);return this.optional(k)||h>=j[0]&&h<=j[1]},min:function(e,d,f){return this.optional(d)||e>=f},max:function(e,d,f){return this.optional(d)||e<=f},range:function(e,d,f){return this.optional(d)||e>=f[0]&&e<=f[1]},email:function(e,d){return this.optional(d)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,d){return this.optional(d)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,d){return this.optional(d)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,d){return this.optional(d)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,d){return this.optional(d)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,d){return this.optional(d)||/^\d+$/.test(e)},creditcard:function(j,h){if(this.optional(h)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(j)){return !1}var t=0,q=0,p=!1;j=j.replace(/\D/g,"");for(var n=j.length-1;n>=0;n--){var k=j.charAt(n);q=parseInt(k,10),p&&(q*=2)>9&&(q-=9),t+=q,p=!p}return t%10===0},equalTo:function(f,k,j){var h=b(j);return this.settings.onfocusout&&h.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(k).valid()}),f===h.val()}}}),b.format=b.validator.format})(jQuery),function(e){var d={};if(e.ajaxPrefilter){e.ajaxPrefilter(function(b,k,j){var h=b.port;b.mode==="abort"&&(d[h]&&d[h].abort(),d[h]=j)})}else{var f=e.ajax;e.ajax=function(j){var h=("mode" in j?j:e.ajaxSettings).mode,b=("port" in j?j:e.ajaxSettings).port;return h==="abort"?(d[b]&&d[b].abort(),d[b]=f.apply(this,arguments)):f.apply(this,arguments)}}}(jQuery),function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(e,h){function f(d){return d=b.event.fix(d),d.type=h,b.event.handle.call(this,d)}b.event.special[h]={setup:function(){this.addEventListener(e,f,!0)},teardown:function(){this.removeEventListener(e,f,!0)},handler:function(j){var k=arguments;return k[0]=b.event.fix(j),k[0].type=h,b.event.handle.apply(this,k)}}}),b.extend(b.fn,{validateDelegate:function(e,h,f){return this.bind(h,function(j){var d=b(j.target);if(d.is(e)){return f.apply(d,arguments)}})}})}(jQuery);(function(h){var d={},t,w,y,q=h.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),b=false;h.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){h.tooltip.blocked=!h.tooltip.blocked}};h.fn.extend({tooltip:function(z){z=h.extend({},h.tooltip.defaults,z);n(z);return this.each(function(){h.data(this,"tooltip",z);this.tOpacity=d.parent.css("opacity");this.tooltipText=this.title;h(this).removeAttr("title");this.alt=""}).mouseover(v).mouseout(j).click(j)},fixPNG:q?function(){return this.each(function(){var z=h(this).css("backgroundImage");if(z.match(/^url\(["']?(.*\.png)["']?\)$/i)){z=RegExp.$1;h(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+z+"')"}).each(function(){var A=h(this).css("position");if(A!="absolute"&&A!="relative"){h(this).css("position","relative")}})}})}:function(){return this},unfixPNG:q?function(){return this.each(function(){h(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){h(this)[h(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function n(z){if(d.parent){return}d.parent=h('<div id="'+z.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(h.fn.bgiframe){d.parent.bgiframe()}d.title=h("h3",d.parent);d.body=h("div.body",d.parent);d.url=h("div.url",d.parent)}function e(z){return h.data(z,"tooltip")}function k(z){if(e(this).delay){y=setTimeout(x,e(this).delay)}else{x()}b=!!e(this).track;h(document.body).bind("mousemove",f);f(z)}function v(){if(h.tooltip.blocked||this==t||(!this.tooltipText&&!e(this).bodyHandler)){return}t=this;w=this.tooltipText;if(e(this).bodyHandler){d.title.hide();var C=e(this).bodyHandler.call(this);if(C.nodeType||C.jquery){d.body.empty().append(C)}else{d.body.html(C)}d.body.show()}else{if(e(this).showBody){var B=w.split(e(this).showBody);d.title.html(B.shift()).show();d.body.empty();for(var A=0,z;(z=B[A]);A++){if(A>0){d.body.append("<br/>")}d.body.append(z)}d.body.hideWhenEmpty()}else{d.title.html(w).show();d.body.hide()}}if(e(this).showURL&&h(this).url()){d.url.html(h(this).url().replace("http://","")).show()}else{d.url.hide()}d.parent.addClass(e(this).extraClass);if(e(this).fixPNG){d.parent.fixPNG()}k.apply(this,arguments)}function x(){y=null;if((!q||!h.fn.bgiframe)&&e(t).fade){if(d.parent.is(":animated")){d.parent.stop().show().fadeTo(e(t).fade,t.tOpacity)}else{d.parent.is(":visible")?d.parent.fadeTo(e(t).fade,t.tOpacity):d.parent.fadeIn(e(t).fade)}}else{d.parent.show()}f()}function f(C){if(h.tooltip.blocked){return}if(C&&C.target.tagName=="OPTION"){return}if(!b&&d.parent.is(":visible")){h(document.body).unbind("mousemove",f)}if(t==null){h(document.body).unbind("mousemove",f);return}d.parent.removeClass("viewport-right").removeClass("viewport-bottom");var E=d.parent[0].offsetLeft;var D=d.parent[0].offsetTop;if(C){E=C.pageX+e(t).left;D=C.pageY+e(t).top;var A="auto";if(e(t).positionLeft){A=h(window).width()-E;E="auto"}d.parent.css({left:E,right:A,top:D})}var z=p(),B=d.parent[0];if(z.x+z.cx<B.offsetLeft+B.offsetWidth){E-=B.offsetWidth+20+e(t).left;d.parent.css({left:E+"px"}).addClass("viewport-right")}if(z.y+z.cy<B.offsetTop+B.offsetHeight){D-=B.offsetHeight+20+e(t).top;d.parent.css({top:D+"px"}).addClass("viewport-bottom")}}function p(){return{x:h(window).scrollLeft(),y:h(window).scrollTop(),cx:h(window).width(),cy:h(window).height()}}function j(B){if(h.tooltip.blocked){return}if(y){clearTimeout(y)}t=null;var A=e(this);function z(){d.parent.removeClass(A.extraClass).hide().css("opacity","")}if((!q||!h.fn.bgiframe)&&A.fade){if(d.parent.is(":animated")){d.parent.stop().fadeTo(A.fade,0,z)}else{d.parent.stop().fadeOut(A.fade,z)}}else{z()}if(e(this).fixPNG){d.parent.unfixPNG()}}})(jQuery);(function(d){var b=["3gp","3g2","7z","ace","air","swf","fxp","pdf","ppd","aac","aif","avi","dxf","dwf","bin","bmp","sh","btif","bz","bz2","csh","dae","cgm","wbs","dvi","dtd","dra","dts","dwg","xif","f4v","flv","gtar","gif","h261","h263","h264","ico","ief","jad","jar","class","jnlp","jpm","jpg","jpeg","jpgv","m3u","m4v","mdb","asf","exe","cab","clp","mdi","xls","xlsb","xltm","xlsm","chm","mny","xlsx","xltx","docx","dotx","ppt","mpp","pub","vsd","wm","wma","doc","wps","xps","mid","mpga","mpeg","mp4a","mp4","oda","ogx","oga","ogv","osf","odb","odi","odp","ots","odt","sxd","otf","psd","pic","pbm","png","ai","pbd","qt","rar","rm","rtf","rtx","svg","sdc","sda","sdd","smf","sdw","sgl","au","tiff","tar","ttf","vcd","wav","hlp","wsdl","zip"];d.validator.addMethod("noBinary",function(j,h){var f=d.trim(j).match(/[\w_.-]*?(?=[\?#])|[\w_.-]*$/i);if(typeof(f[0])!="undefined"){var e=f[0].split(".")}if(typeof(e[e.length-1])!="undefined"){var k=e[e.length-1]}return this.optional(h)||d.inArray(k.toLowerCase(),b)==-1});d.validator.addMethod("perc_remote",function(n,f,p){if(this.optional(f)){return"dependency-mismatch"}var j=this.previousValue(f);if(!this.settings.messages[f.name]){this.settings.messages[f.name]={}}p=typeof p=="string"&&{url:p}||p;var h=null;if("handler" in p){h=p.handler}if(j.old!==n){j.old=n;var e=this;this.startRequest(f);var k={};k[f.name]=n;d.ajax(d.extend(true,{url:p,mode:"abort",port:"validate"+f.name,dataType:"json",data:k,success:function(t){var v=h==null?t===true:h(e,f.name,n,t);if(v){var q=e.formSubmitted;e.prepareElement(f);e.formSubmitted=q;e.successList.push(f);e.showErrors()}else{var w={};if(typeof(t)!="string"){t=false}w[f.name]=j.message=t||e.defaultMessage(f,"perc_remote");e.showErrors(w)}j.valid=v;e.stopRequest(f,v)}},p));return"pending"}else{if(this.pending[f.name]){return"pending"}}return j.valid})})(jQuery);(function(b){b.PercDirtyController={dirtyState:false,dirtyObjectType:"object",utils:b.perc_utils,saveCallback:function(){},navigationEvent:function(){if(this.dirtyState){return"This "+this.dirtyObjectType+" contains unsaved changes.\nIf you continue, all changes will be lost.\nClick OK to proceed and discard changes,\nCancel to return to the "+this.dirtyObjectType+" you were editing."}},setDirty:function(e,d){this.dirtyState=e;this.dirtyObjectType=d;this.saveCallback=function(){}},setDirty:function(f,e,d){this.dirtyState=f;this.dirtyObjectType=e;this.saveCallback=d},isDirty:function(){return this.dirtyState},confirmIfDirty:function(h,d,e){if(this.dirtyState){var f=this.setConfirmDialogOptions(h,d,e);this.utils.confirm_dialog(f)}else{h()}},setConfirmDialogOptions:function(k,f,h){var d=this.dirtyObjectType;f=f||function(){};var e=this;var j={id:"perc-editor-page-dirty",title:"Unsaved Edits",success:function(){e.setDirty(false);k()},cancel:f,yes:"Continue anyway"};if(e.isSaveOptionAllowed()){j.dontSaveCallback=h&&h.dontSaveCallback?function(){e.setDirty(false);h.dontSaveCallback()}:j.success;j.type="SAVE_BEFORE_CONTINUE";j.question="You will lose your edits if you do not save. Save your edits before leaving this tab?";j.width="356px";j.save=e.saveCallback||function(){}}else{j.type="CANCEL_CONTINUE";j.question="This page contains unsaved edits. All edits will be lost. CONTINUE?";j.width="326px"}h=h||{};b.extend(j,h);return j},isSaveOptionAllowed:function(){var d=b.PercNavigationManager.getView();return(d==b.PercNavigationManager.VIEW_EDIT_TEMPLATE||d==b.PercNavigationManager.VIEW_EDITOR||d==b.PercNavigationManager.VIEW_WIDGET_BUILDER)}}})(jQuery);(function(L){L.PercNavigationManager={};var n="";var D={};var f="";var q="";var T="";var w="";var v={};var y="";var P="";var U=false;var A=false;var aa=false;var G="";var F=false;var C=false;var J=[];var j={};var Y=false;var X=false;var B;var p="";var t=null;var S={URL_BASE:"/cm/app/",MODE_EDIT:"edit",MODE_READONLY:"readonly",VIEW_EDIT_ASSET:"editAsset",VIEW_HOME:"home",VIEW_DASHBOARD:"dash",VIEW_DESIGN:"design",VIEW_EDITOR:"editor",VIEW_SITE_ARCH:"arch",VIEW_PUBLISH:"publish",VIEW_USERS:"users",VIEW_WORKFLOW:"workflow",VIEW_WIDGET_BUILDER:"widgetbuilder",PATH_TYPE_PAGE:"page",PATH_TYPE_ASSET:"asset",PATH_TYPE_UNKNOWN:"unknown",VIEW_EDIT_TEMPLATE:"editTemplate"};function W(){L.perc_sessionTimeout();k();I();if(p){alert(p)}}function Q(ac){var ab=ac.type;switch(ab){case"site":R(ac);break;case"percPage":O(ac);break;case"Folder":H(ac);break;case"FSFolder":H(ac);break;default:if(ac.category=="ASSET"){V(ac)}}}function R(ac){if(!(U||A)){L.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this site."});return}var ab=S.VIEW_SITE_ARCH;if(f==S.VIEW_DESIGN){ab=S.VIEW_DESIGN}if(f==S.VIEW_PUBLISH){ab=S.VIEW_PUBLISH}N(ac.id,ab,q,null,null,ac.path,null,null)}function O(ad,ac){var ab=L.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(ab!=null){L.PercViewReadyManager.showRenderingProgressWarning();return}L.PercFolderHelper().getAccessLevelById(ad.id,false,function(af,ae){if(af==L.PercFolderHelper().PERMISSION_ERROR){L.perc_utils.alert_dialog({title:"Error",content:ae});return}else{if(ac&&ae==L.PercFolderHelper().PERMISSION_READ){L.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the page '"+ad.name+"'."})}else{var ah=E(ad.path);var ag=ac?S.MODE_EDIT:S.MODE_READONLY;N(ah,S.VIEW_EDITOR,ag,ad.id,ad.name,ad.path,S.PATH_TYPE_PAGE,null)}}})}function H(ac){if(ac.type=="FSFolder"){var ab=ac.path;var ad=ab.split("/");if(L.Percussion.getCurrentFinderView()!=L.Percussion.PERC_FINDER_VIEW_COLUMN){return}else{if(ad.length>5){L.perc_utils.makeFolderEditable(ac)}else{L.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  It cannot be renamed."});return}}}}function V(ac,ab){L.PercFolderHelper().getAccessLevelById(ac.id,false,function(ae,ad){if(ae==L.PercFolderHelper().PERMISSION_ERROR){L.perc_utils.alert_dialog({title:"Error",content:ad});return}else{if(ab&&ad==L.PercFolderHelper().PERMISSION_READ){L.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to edit the asset '"+ac.name+"'."})}else{var af=ab?S.MODE_EDIT:S.MODE_READONLY;N(null,S.VIEW_EDIT_ASSET,af,ac.id,ac.name,ac.path,S.PATH_TYPE_ASSET,null)}}})}function N(ai,af,ae,ad,aj,ah,ag,ab){var ac=h(ai,af,ae,ad,aj,ah,ag,ab);L.PercBlockUI(L.PercBlockUIMode.CURSORONLY);L.PercQueuePostAJAX(function(){z(ac)})}function Z(ab){return L.param.querystring(S.URL_BASE,ab)}function h(ai,af,ae,ad,aj,ah,ag,ab){var ac={view:af};if(!K(ai)){L.extend(ac,{site:ai})}if(!K(ae)){L.extend(ac,{mode:ae})}if(!K(ad)){L.extend(ac,{id:ad})}if(!K(aj)){L.extend(ac,{name:aj})}if(!K(ah)){L.extend(ac,{path:ah})}if(F){L.extend(ac,{debug:"true"})}if(C){L.extend(ac,{at:"true"})}if(ab!=null&&typeof(ab)=="object"){L.extend(ac,{memento:JSON.stringify(ab)})}if(!K(ag)){L.extend(ac,{pathType:ag})}if(X){L.extend(ac,{disableJS:"true"})}return ac}function M(){var ae=window.location;var af=ae.protocol;af+="//";af+=ae.host;var ac=0;for(var ab in v){++ac}var ad=ac==0?null:encodeURIComponent(v);af+=Z(h(n,f,q,P,y,T,w,ad));return af}function d(ab){var ac=S.PATH_TYPE_UNKNOWN;if(ab){if(ab.indexOf(L.perc_paths.ASSETS_ROOT+"/")==0){ac=S.PATH_TYPE_ASSET}if(ab.indexOf(L.perc_paths.SITES_ROOT+"/")==0){ac=S.PATH_TYPE_PAGE}}return ac}function E(ac){var ab=L.perc_paths.SITES_ROOT+"/";if(ac.indexOf(ab)===0){var ad=ac.indexOf("/",ab.length);if(ad==-1){ad=ac.length-1}return ac.substring(ab.length,ad)}return""}function k(){var ab=L.deparam.querystring();n=ab.site;f=ab.view;q=ab.mode;T=ab.path;P=ab.id;y=ab.name;F=ab.debug;C=ab.at;w=ab.pathType;p=ab.warningMessage;X=(ab.disableJS=="true"?true:false);if(typeof(ab.memento)!="undefined"){v=JSON.parse(decodeURIComponent(ab.memento))}}function I(){G=L.cookie("perc_userName");U=L.cookie("perc_isAdmin")=="true"?true:false;A=L.cookie("perc_isDesigner")=="true"?true:false;aa=L.cookie("perc_isAccessibilityUser")=="true"?true:false;L.perc_utils.info("UserInfo","userName: "+G+", isAdmin: "+U+", isDesigner: "+A+", isAccessibilityUser: "+aa)}function z(ae){var ac=Z(ae);var ab=J.length;if(ab==0){window.location.href=ac;return}var af=b();j[af]={url:ac,listenerTotal:ab,continueFlag:true,listenersComplete:0};for(var ad=0;ad<ab;ad++){L.unblockUI();J[ad](ac,af,x,ae)}}function x(ad,ab){var ac=j[ad];ac.continueFlag&=ab;++ac.listenersComplete;if(ac.listenersComplete==ac.listenerTotal){if(ac.continueFlag){L.PercBlockUI(L.PercBlockUIMode.CURSORONLY);window.location.href=ac.url}else{delete j[ad];L.unblockUI()}}}function b(){var ae=[];var ab="0123456789ABCDEF";for(var ac=0;ac<32;ac++){ae[ac]=ab.substr(Math.floor(Math.random()*16),1)}ae[12]="4";ae[16]=ab.substr((ae[16]&3)|8,1);var ad=ae.join("");return ad}function K(ab){return(ab==null||ab.length==0)}var e={getBookmark:M,getSiteName:function(){return n},getMemento:function(){return v},clearMemento:function(){v={}},getView:function(){return f},getMode:function(){return q},setMode:function(ab){q=ab},clearId:function(){P=""},getId:function(){return P},getName:function(){return y},setName:function(ab){y=ab},getPath:function(){return T},setPath:function(ab){T=ab},getUserName:function(){return G},isAutoTest:function(){return C},isDebug:function(){return F},isAdmin:function(){return U},isDesigner:function(){return A},isAccessibilityUser:function(){return aa},isJavascriptOff:function(){return X},isReopenAllowed:function(){return Y},setReopenAllowed:function(ab){Y=ab},getPathType:function(){if(w){return w}return d(T)},goTo:function(ac,ab){if(ab){N(n,ac,null,null,null,T,null,null)}else{N(n,ac,null,P,y,T,w,null)}},goToDashboard:function(){e.goTo(S.VIEW_DASHBOARD,true)},goToLocation:function(af,ai,ad,ag,ah,ac,ae,ab){N(ai,af,ad,ag,ah,ac,ae,ab)},handleOpenAsset:V,handleOpenPage:O,registerFinder:function(ac){t=ac;ac.addOpenListener(Q);ac.addPathChangedListener(function(af){if(ac.finderOpenInProgress){return}var ad=af.slice(1);var ae="/"+ad.join("/");T=ae});var ab=T;T=T?T:"/Sites";if(T){t.open(T.split("/"),function(){T=ab})}},addLocationChangeListener:function(ab){if(L.inArray(ab,J)==-1){J.push(ab)}},removeLocationChangeListener:function(ad){if(L.inArray(ad,openListeners)>-1){var ab=J.length;for(var ac=0;ac<ab;ac++){if(J[ac]===ad){J.splice(ac,1);return}}}},openPathItem:function(ab){L.PercPathService.getPathItemForPath(ab,function(ac,ad){if(ac==L.PercServiceUtils.STATUS_SUCCESS){ad.PathItem.path=ab;Q(ad.PathItem)}else{L.perc_utils.alert_dialog({title:"Error",content:ad});return}})},openPage:function(ac,ab){L.PercPathService.getPathItemForPath(ac,function(ad,ae){if(ad==L.PercServiceUtils.STATUS_SUCCESS){ae.PathItem.path=ac;O(ae.PathItem,ab)}else{L.perc_utils.alert_dialog({title:"Error",content:ae});return}})},openAsset:function(ab){L.PercPathService.getPathItemById(ab.id,function(ac,ad){if(ac==L.PercServiceUtils.STATUS_SUCCESS){ad.PathItem.path=ab.path;V(ad.PathItem,false)}else{L.perc_utils.alert_dialog({title:"Error",content:ad});return}})},openFolderDialog:function(ab){L.PercPathService.getPathItemForPath(ab,function(ac,ad){if(ac==L.PercServiceUtils.STATUS_SUCCESS){ad.PathItem.path=ab;H(ad.PathItem)}else{L.perc_utils.alert_dialog({title:"Error",content:ad});return}})},loadSiteProperties:function(ab,ac){L.PercSiteService.getSiteProperties(ab,function(ae,ad){if(ae==L.PercServiceUtils.STATUS_SUCCESS){D=ad.SiteProperties;if(typeof(ac)=="function"){ac(ad.SiteProperties)}}})},getSiteProperties:function(){return D},setTemplateModel:function(ab){B=ab},getTemplateModel:function(ab){return B}};L.extend(L.PercNavigationManager,e);L.extend(L.PercNavigationManager,S);W()})(jQuery);(function(b){b.PercFolderHelper=function(){var e={getAccessLevelByPath:d,getAccessLevelById:f};var j={PERMISSION_READ:"READ",PERMISSION_WRITE:"WRITE",PERMISSION_ADMIN:"ADMIN",PERMISSION_SUCCESS:"SUCCESS",PERMISSION_ERROR:"ERROR"};var h={};b.extend(h,e);b.extend(h,j);return h;function d(p,k,q){var n=b.perc_finder().getPathItemByPath(p);if(!k||!n){b.PercPathService.getPathItemForPath(p,function(v,t){if(v==b.PercServiceUtils.STATUS_ERROR){q(j.PERMISSION_ERROR,t);return}q(j.PERMISSION_SUCCESS,t.PathItem.accessLevel)})}else{q(j.PERMISSION_SUCCESS,n.accessLevel)}}function f(k,n,q){var p=b.perc_finder().getPathItemById(k);if(!n||!p){b.PercPathService.getPathItemById(k,function(v,t,w){if(v==b.PercServiceUtils.STATUS_ERROR){q(j.PERMISSION_ERROR,t,w);return}q(j.PERMISSION_SUCCESS,t.PathItem.accessLevel)})}else{q(j.PERMISSION_SUCCESS,p.accessLevel)}}}})(jQuery);(function(b){b.PercFolderPropertiesDialog=function(){var h;var e="";var f="";var j="";function d(p,z){b.PercPathService.getFolderProperties(p.id,B);var k=30;var y;var x;var q=undefined;function B(D,K){var I=this;if(D==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Folder not found: "+p.path});z("",false);return}var F=p.path.split("/");if(!e){e=p.folderPath;f=p.folderPaths;j=p.type}var G=(F!=undefined&&F.length==4&&F[1]=="Assets");var J=b.PercFolderHelper().PERMISSION_ADMIN;var E=K.data.FolderProperties;var H=[];if(E.permission){J=E.permission.accessLevel;if(E.permission.writePrincipals){H=E.permission.writePrincipals;H=b.isArray(H)?H:[H]}}var C=[];C[0]=J==b.PercFolderHelper().PERMISSION_READ?" selected='true' ":"";C[1]=J==b.PercFolderHelper().PERMISSION_WRITE?" selected='true' ":"";C[2]=J==b.PercFolderHelper().PERMISSION_ADMIN?" selected='true' ":"";x=b("<div><p class='perc-field-error' id='perc-save-error'></p><div style='background: #E6E6E9; padding-top: 5px; padding-right: 10px; text-align:right;'><label>* - denotes required field</label></div><div class='fieldGroup'><div id='perc-folder-general-properties-container'><div><label for='perc-folder-name'class='perc-required-field'>"+I18N.message("perc.ui.folderPropsDialog.label@Name")+":</label> <br/> <input type='text' class='required' tabindex='"+k+"' id='perc-folder-name' name='folder_name' maxlength='50' value=\""+E.name+"\"/> <br/><label id='perc_folder_duplicate_error' style='display: none;' class='perc_field_error'></label><br/></div></div></div><div class='fieldGroup'><div id='perc-user-permissions-container'><label for='perc-folder-permission'>"+I18N.message("perc.ui.folderPropsDialog.label@Permission")+":</label> <br/><select name='perc-folder-permission' id='perc-folder-permission'>     <option id='perc-folder-permission-option-read'  "+C[0]+" value='"+b.PercFolderHelper().PERMISSION_READ+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Read")+"</option>     <option id='perc-folder-permission-option-write' "+C[1]+" value='"+b.PercFolderHelper().PERMISSION_WRITE+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")+"</option>     <option id='perc-folder-permission-option-admin' "+C[2]+" value='"+b.PercFolderHelper().PERMISSION_ADMIN+"'>"+I18N.message("perc.ui.folderPropsDialog.permissionValue@Admin")+"</option></select><input type='hidden' id='perc-folder-id' value='"+E.id+"'></input><input type='hidden' id='perc-folder-oldname' value=\""+E.name+"\"></input><div id='perc-folder-permission-users'/></div></div><div class='fieldGroup' id='perc-asset-folder-security' style='display:none;'><div id='perc-asset-folder-sites-container'><label>Assets in this folder are available to:<br/></label></div></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></div>").perc_dialog({resizable:false,title:I18N.message("perc.ui.folderPropsDialog.title@Folder Properties"),modal:true,dragStart:function(){b("div.ac_results").hide()},closeOnEscape:false,percButtons:{Save:{click:function(){var L=new Array();if(I.listEdit.isEnabled()){var M=I.listEdit.getListItems();for(u=0;u<M.length;u++){L[u]={name:M[u],type:"USER"}}}t(L)},id:"perc-folder-props-save"},Cancel:{click:function(){A()},id:"perc-folder-props-cancel"}},id:"perc-folder-props-dialog",width:"500px"});var v=[];for(u=0;u<H.length;u++){v[u]=H[u].name}b.PercUserService.getUsers(function(L,M){if(L==b.PercUserService.STATUS_ERROR){b.PercUserView.alertDialog("Error while loading users",M);return}I.listEdit=b.PercListEditorWidget({container:"perc-folder-permission-users",items:v,results:b.perc_utils.convertCXFArray(M.UserList.users),toggler:b("#perc-folder-permission"),toggleron:[b.PercFolderHelper().PERMISSION_READ],toggleroff:[b.PercFolderHelper().PERMISSION_WRITE,b.PercFolderHelper().PERMISSION_ADMIN],title1:I18N.message("perc.ui.folderPropsDialog.title@User Properties")+":",title2:I18N.message("perc.ui.folderPropsDialog.permissionValue@Write")});n();if(G){b.PercServiceUtils.makeJsonRequest(b.perc_paths.SITES_ALL+"/",b.PercServiceUtils.TYPE_GET,false,function(O,W){if(O==b.PercServiceUtils.STATUS_SUCCESS){b("#perc-asset-folder-security").show();var U=x.find("#perc-asset-folder-sites-container");var R=b("<select name='allowed-sites' id='allowed-sites' multiple='multiple'></select>");U.append(R);var Q=[];if(E.allowedSites!=undefined){if(typeof(E.allowedSites)=="number"){Q.push(E.allowedSites.toString())}else{Q=E.allowedSites.split(",")}}h=Q.sort().join(",");var T=W.data.SiteSummary;for(var V=0;V<T.length;V++){var N=(b.inArray(T[V].siteId.toString(),Q)>=0);var P=b("<option/>").attr("value",T[V].siteId).attr("title",T[V].name).text(T[V].name);if(N){P.attr("selected","selected")}R.append(P)}q=b("#allowed-sites").multiselect({height:175,minWidth:225,checkAllText:"Select all",uncheckAllText:"Deselect all",noneSelectedText:"All sites allowed",selectedText:function(Y,Z,X){if(Y==0){return"All sites allowed"}else{return"Some sites allowed"}}});b("input[name=multiselect_allowed-sites]").unbind("click");b("input[name=multiselect_allowed-sites]").bind("click",function(X){b("#allowed-sites").multiselect("update")});b("a.ui-multiselect-all").unbind("click.multiselect");b("a.ui-multiselect-all").bind("click.multiselect",function(X){b("#allowed-sites").multiselect("checkAll")});b("a.ui-multiselect-none").unbind("click.multiselect");b("a.ui-multiselect-none").bind("click.multiselect",function(X){b("#allowed-sites").multiselect("uncheckAll")})}else{var S=b.PercServiceUtils.extractDefaultErrorMessage(W.request);b.perc_utils.alert_dialog({title:"Error",content:S})}})}else{b("#perc-asset-folder-security").hide()}})}function A(){x.remove()}function t(F){if(b.trim(b("#perc-folder-name").val()).length<1){b("#perc-folder-name").val("");b("#perc_folder_duplicate_error").text("This field is required.");b("#perc_folder_duplicate_error").show();return}var E=b.trim(b("#perc-folder-name").val());E=b.perc_textFilters.WINDOWS_FILE_NAME(E);var D={FolderProperties:{name:E,id:b("#perc-folder-id").val(),permission:{accessLevel:b("#perc-folder-permission").val(),writePrincipals:F}}};if(q!=undefined){var C=[];b.each(q.multiselect("getChecked"),function(G){C.push(b(this).val())});if(C.length>0){D.FolderProperties.allowedSites=C.sort().join(",")}else{D.FolderProperties.allowedSites=""}}if(h!=undefined&&D.FolderProperties.allowedSites!=h){var v={id:"perc-folder-properties-changed-allowed-sites-warning",title:"Warning",content:"Please note that content already queued for incremental publish will not be affected by this security change.",okCallBack:function(){b.PercPathService.saveFolderProperties(D,w)}};b.perc_utils.alert_dialog(v)}else{b.PercPathService.saveFolderProperties(D,w)}}function w(D,v){if(D==b.PercServiceUtils.STATUS_SUCCESS){var C=b.trim(b("#perc-folder-name").val());x.remove();if(e.match("^/Sites/")||e.match("^//Sites/")){b.PercRedirectHandler.createRedirect(e,f+"/"+C,"folder").fail(function(H){b.perc_utils.alert_dialog({title:"Redirect creation error",content:H,okCallBack:function(){z(C)}})}).done(function(){z(C)})}else{z(C)}}else{var G=b.PercServiceUtils.extractDefaultErrorMessage(v.request);var E=b.PercServiceUtils.extractFieldErrorCode(v.request);if(E=="`FolderProperties#name"){var F="Cannot rename folder '"+b("#perc-folder-oldname").val()+"' to '"+b.trim(b("#perc-folder-name").val())+"' because an object with the same name already exists.";b("#perc_folder_duplicate_error").text(F);b("#perc_folder_duplicate_error").show()}else{if(E=="saveFolderProperties#reservedName"){b("#perc_folder_duplicate_error").text(G);b("#perc_folder_duplicate_error").show()}else{b.perc_utils.alert_dialog({title:"Error",content:G})}}}}function n(){var C=b("#perc-folder-props-dialog");var v=[{groupName:"perc-folder-general-properties-container",groupLabel:"General"},{groupName:"perc-user-permissions-container",groupLabel:"Permissions"},{groupName:"perc-asset-folder-sites-container",groupLabel:"Security"}];b.each(v,function(E){var F=(E==0)?"perc-section-items-minimizer":"perc-section-items-maximizer";var D="<div class='perc-section-header'><div class='perc-section-label' groupName='"+this.groupName+"'><span class='perc-min-max "+F+"' ></span>"+this.groupLabel+"</div></div>";C.find("#"+this.groupName).before(D);E!=0&&C.find("#"+this.groupName).hide()});C.find(".perc-section-label").unbind().click(function(){var D=b(this);D.find(".perc-min-max").toggleClass("perc-section-items-minimizer").toggleClass("perc-section-items-maximizer");C.find("#"+D.attr("groupName")).toggle()})}b.perc_filterField(b("#perc-folder-name"),b.perc_textFilters.URL)}return{open:d}}})(jQuery);(function(e){var b=13;var d=5;e.PercFinderTreeConstants={ROOT_PATH_ALL:"All",ROOT_PATH_SITES:"Sites",ROOT_PATH_ASSETS:"Assets",FOLDERS_ONLY:"Folders",SECTIONS_ONLY:"Sections",MAX_RESULTS:200,FOLDER_ID:null,convertFolderPathToPath:function(f){var h=null;if(!f){return h}if(f.indexOf("//Sites")!=-1){h=f.replace("//Sites",e.perc_paths.SITES_ROOT)}else{if(f.indexOf("//Folders/$System$/Assets")!=-1){h=f.replace("//Folders/$System$/Assets",e.perc_paths.ASSETS_ROOT)}}return h}};e.widget("ui.PercFinderTree",{settings:{rootPath:e.PercFinderTreeConstants.ROOT_PATH_ALL,showFoldersOnly:false,filter:null,height:"200px",width:"290px",onClick:function(f){},onRenderComplete:function(f,h){},classNames:{},initialPath:null,getInitialPathItem:function(f){},onQueryActivate:function(){return true},onQuerySelect:function(){return true},clickFolderMode:3,acceptableTypes:"",acceptableCategories:""},_init:function(){var f=this;e.extend(this.settings,this.options);var h=this.settings.rootPath;if(!(h==e.PercFinderTreeConstants.ROOT_PATH_ALL||h==e.PercFinderTreeConstants.ROOT_PATH_SITES||h==e.PercFinderTreeConstants.ROOT_PATH_ASSETS)){this.settings.rootPath=e.PercFinderTreeConstants.ROOT_PATH_ALL}e(this.element).css("width",this.settings.width);e(this.element).css("height",this.settings.height);e(this.element).css("overflow","auto");e(this.element).append(e("<div id='perc-finder-tree'></div>"));this.intialPathExpanded=true;this.initialRenderCompleted=false;this.intialPathKey=null;if(this.settings.initialPath&&this.settings.initialPath!=null&&e.trim(this.settings.initialPath).length>0){this.intialPathExpanded=false;this.intialPathKey=this._generateKey(this.settings.initialPath)}e.PercServiceUtils.makeJsonRequest(e.perc_paths.PATH_FOLDER+"/",e.PercServiceUtils.GET,false,function(k,j){if(k==e.PercServiceUtils.STATUS_ERROR){var n=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:n});dtnode.setLazyNodeStatus(DTNodeStatus_Error)}else{f._initTree(j.data)}},null)},_initTree:function(k){var h=this;var n=[];var f=h._normalizedPath(h.settings.initialPath);e.each(k.PathItem,function(){var p=h.settings.rootPath==e.PercFinderTreeConstants.ROOT_PATH_ALL||h.settings.rootPath==this.name;if(this.name=="Design"||this.name=="Search"){p=false}if(p){var t=h._makeDtNode(this);e.extend(t,{unselectable:true});var q=h._normalizedPath(this.path);if(f==q){e.extend(t,{activate:true});h.intialPathExpanded=true}n.push(t)}});var j=e(this.element).find("#perc-finder-tree").dynatree({selectMode:1,rootVisible:false,autoFocus:false,imagePath:" ",children:n,clickFolderMode:h.settings.clickFolderMode,onQuerySelect:h.settings.onQuerySelect,onQueryActivate:h.settings.onQueryActivate,classNames:h.settings.classNames,onRender:function(t){if(t.data.type!=="SHOW_MORE"){var p=e(t.span);var q=p.parents("ul").length-1;p.css("padding-left",q*b+d)}else{var p=e(t.span);var q=p.parents("ul").length-3;p.css("padding-left",q*b+d)}},onLazyRead:function(p){h._loadChildren(p)},onClick:function(p){if(p.data.type==="SHOW_MORE"&&!p.data.isShowing){p.data.isShowing=true;p.data.icon="/cm/css/dynatree/skin/loading.gif";p.render();h._loadMoreChildren(p);return}h._onClick(p);h.getFolderID(p)},onExpand:function(p,q){if(q.type==="SHOW_MORE"){return}h._onExpand(p,q)}});j.dynatree("getRoot").visit(function(p){p.expand(true)})},_loadChildren:function(n){var h=this,j,f=n.data,k;if(h.settings.showFoldersOnly){j=e.perc_paths.PATH_FOLDER+f.pathItem.path}else{j=e.perc_paths.PATH_PAGINATED_FOLDER+f.pathItem.path+"?startIndex=1&maxResults="+e.PercFinderTreeConstants.MAX_RESULTS;if(h.settings.acceptableTypes){j+="&type="+h.settings.acceptableTypes}if(h.settings.acceptableCategories){j+="&category="+h.settings.acceptableCategories}}e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.GET,false,function(q,p){if(q==e.PercServiceUtils.STATUS_ERROR){var t=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:t});n.setLazyNodeStatus(DTNodeStatus_Error)}else{h._addChildren(n,p.data)}},null)},_addChildren:function(p,n){var k=null,h=this;var f=h.settings.showFoldersOnly?n.PathItem:n.PagedItemList.childrenInPage;if(!f){p.setLazyNodeStatus(DTNodeStatus_Ok);return}if(!e.isArray(f)){f=[f]}e.each(f,function(){var v=h.settings.showFoldersOnly&&this.leaf;if(typeof this.category!="undefined"&&h.settings.filter!=null){v=v||(h.settings.filter==e.PercFinderTreeConstants.FOLDERS_ONLY&&this.category!="FOLDER"&&this.category!="SYSTEM");v=v||(h.settings.filter==e.PercFinderTreeConstants.SECTIONS_ONLY&&this.category!="SECTION_FOLDER")}if(!v){var x=h._makeDtNode(this);var t=p.addChild(x);if(!h.intialPathExpanded){var w=h._normalizedPath(this.path);var q=h._normalizedPath(h.settings.initialPath);if(q==w){t.activate();h.settings.getInitialPathItem(t.data.pathItem);h.intialPathExpanded=true}else{if(q.indexOf(w)!=-1){k=t}}}}});if(!h.settings.showFoldersOnly&&n.PagedItemList.startIndex+e.PercFinderTreeConstants.MAX_RESULTS-1<n.PagedItemList.childrenCount){var j=h._makeMoreResultsDtNode(n.PagedItemList.startIndex+e.PercFinderTreeConstants.MAX_RESULTS,p);p.addChild(j)}h._adjustScrollWidths();p.setLazyNodeStatus(DTNodeStatus_Ok);if(k){k.expand(true)}else{if(!h.initialRenderCompleted){h.settings.onRenderComplete(p.data.pathItem,p);h.initialRenderCompleted=true}}},_loadMoreChildren:function(k){var h=this,j,f=k.data;j=e.perc_paths.PATH_PAGINATED_FOLDER+f.parentNode.data.pathItem.path+"?startIndex="+f.startIndex+"&maxResults="+e.PercFinderTreeConstants.MAX_RESULTS;e.PercServiceUtils.makeJsonRequest(j,e.PercServiceUtils.GET,false,function(p,n){if(p==e.PercServiceUtils.STATUS_ERROR){var q=e.PercServiceUtils.extractDefaultErrorMessage(request);e.perc_utils.alert_dialog({title:"Error",content:q});k.setLazyNodeStatus(DTNodeStatus_Error)}else{h._addChildren(f.parentNode,n.data);k.remove()}},null)},_onExpand:function(f,h){this._adjustScrollWidths()},_adjustScrollWidths:function(f){},_onClick:function(f){this.settings.onClick(f.data.pathItem)},getSelectedItems:function(){var h=[];var f=e("#perc-finder-tree").dynatree("getSelectedNodes");e.each(f,function(){h.push(this.data.pathItem)});return h},getFolderID:function(k){var h=k.data.pathItem.id;if(typeof h!="undefined"){var j=h.split("-");var f=j[2];e.PercFinderTreeConstants.FOLDER_ID=f}return f},getDynaTree:function(){return e("#perc-finder-tree").dynatree("getTree")},_makeDtNode:function(p){var f=this;var j=e.perc_utils.extract_path(p.path);var k=e.perc_utils.choose_icon(p.type,p.icon,j);var h=this._generateKey(p.path);var n={title:p.name,isFolder:!p.leaf,isLazy:true,icon:k,tooltip:p.name,pathItem:p,key:h};if(p.leaf){e.extend(n,{addClass:"perc-hide-node-expander"})}return n},_makeMoreResultsDtNode:function(n,f){var h=this;var j="-- Show More --";var k={title:j,isLazy:true,tooltip:j,addClass:"perc-hide-node-expander",startIndex:n,type:"SHOW_MORE",isShowing:false,parentNode:f};return k},_generateKey:function(f){if(!f){return null}if(f&&f.length>1&&f.substring(f.length-1)=="/"){f=f.slice(0,f.length-1)}return f.replace(/[^a-zA-Z0-9/]/g,"_").replace(/\//g,"-")},_normalizedPath:function(f){if(!f||f.length<1){return f}if(f.substring(f.length-1,f.length)!="/"){return f+"/"}return f}})})(jQuery);(function(d){d.PercPathSelectionDialog={open:b};function b(w){var k={okCallback:function(){},cancelCallback:function(){},dialogTitle:"Select path",rootPath:d.PercFinderTreeConstants.ROOT_PATH_SITES,emptySelectionMessage:"Please select a page.",initialPath:null,createNew:{},showFoldersOnly:false,selectedItemValidator:d.noop,acceptableTypes:"",acceptableCategories:""};var h=null;var j=d.extend(k,w);if(!j.initialPath){j.initialPath=null}var f=null;var n=null;var e=v(j);var p={};var q={click:function(){if(j.selectedItemValidator&&d.isFunction(j.selectedItemValidator)){var x=j.selectedItemValidator(f);if(x!=null){e.find("label[for='perc-path-location']").text(x).show();return}}n.remove();j.okCallback(f)},id:"perc-path-selection-dialog-save"};var t={click:function(){n.remove();j.cancelCallback()},id:"perc-path-selection-dialog-cancel"};p.Ok=q;p.Cancel=t;n=d(e).perc_dialog({resizable:false,title:j.dialogTitle,modal:true,closeOnEscape:true,percButtons:p,id:"perc-path-selection-dialog",width:400});function v(){var A=j.initialPath?j.initialPath:"";var y=d('<div class="perc-path-selector-container"><div class="perc-label" style="height:10px;"><span style="float:left;font-weight:bold">Select from path:</span><span class="perc-create-new-button" style="float:right;margin-right:55px;display:none"></span></div></div>');if(j.createNew&&j.createNew.label&&j.createNew.onclick){var x=function(B){n.remove();j.okCallback(B)};var z=function(){};y.find(".perc-create-new-button").show().click(function(){j.createNew.onclick(x,z)}).append('<a class="perc-font perc-font-button" href="#"><i class="'+j.createNew.iconclass+'"></i> '+j.createNew.label+"</a>")}h=d("<div class='perc-path-selection-tree' style='margin-top:20px;'>").PercFinderTree({rootPath:j.rootPath,initialPath:j.initialPath,showFoldersOnly:j.showFoldersOnly,acceptableTypes:j.acceptableTypes,acceptableCategories:j.acceptableCategories,height:"230px",width:"600px",classNames:{container:"perc-section-selector-container",selected:"perc-section-selected-item"},getInitialPathItem:function(B){f=B},onClick:function(B){f=B;d("#perc_selected_path").html(B.path);if(d.inArray(B.category,j.selectableTypes)!=-1){e.find("label[for='perc-select-blog-location-tree']").hide()}}});y.append(h);y.append('<div style="margin-top:10px;"><span style="color:gray; font-weight:bold">Selected item path:</span> <span id="perc_selected_path">'+A+"</span></div>");y.append('<label for="perc-path-location" class="perc_field_error" style="display: none;"></label>');return y}}})(jQuery);(function(f){f.PercCreateNewAssetDialog=function(n,k,q){f.PercCreateNewAssetDialogData={};f.PercCreateNewAssetDialogData.successCallback=k;f.PercCreateNewAssetDialogData.cancelCallback=q;f.PercAssetService.getAssetEditor(n,function(v,t){if(v==f.PercServiceUtils.STATUS_ERROR){f.perc_utils.alert_dialog({title:"Error creating new asset",content:t})}if(f.PercFinderTreeConstants.FOLDER_ID!=null){t.AssetEditor.legacyFolderId=f.PercFinderTreeConstants.FOLDER_ID}f.PercCreateNewAssetDialogData.assetEditor=t.AssetEditor;p()});function p(){var w=f.PercCreateNewAssetDialogData.assetEditor;var v=w.url+"&sys_folderid="+w.legacyFolderId+"&sys_workflowid="+w.workflowId;var t="<div id='create-new-asset-content-dlg'><iframe name='create-new-asset-content-frame' id='create-new-asset-content-frame'height='100%' FRAMEBORDER='0' width='100%' src='"+v+"'></iframe></div>";dialog=f(t).perc_dialog({title:"Edit Widget Content",resizable:true,modal:true,height:815,width:965,percButtons:{Save:{click:function(){d(k)},id:"perc-create-new-asset-save-button"},Cancel:{click:function(){dialog.remove();f.PercCreateNewAssetDialogData.cancelCallback()},id:"perc-create-new-asset-cancel-button"}},id:"perc-create-new-asset-dialog"})}};function d(k){f.PercBlockUI();var n=f.PercCreateNewAssetDialogData.assetEditor;j("#perc-content-edit-sys_workflowid").val(n.workflowId);var q=n.url;q=q.split("?")[0];var t=n.legacyFolderId;q=q+"?sys_folderid="+t+"&sys_asset_folderid="+t;j("#perc-content-form").attr("action",q);var p=true;f.each(f.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){p=false}});if(!p){f.unblockUI();return}f.PercContentPreSubmitHandlers.clearHandlers();f("#create-new-asset-content-frame").contents().find("#perc-content-form").submit();f("#create-new-asset-content-frame").unbind("load",b).load(b)}function e(p,n,k){return true}function b(){if(f("#create-new-asset-content-frame").contents().find("#perc-content-edit-errors").length>0){f.unblockUI();return}var k="-1-101-"+f("#create-new-asset-content-frame").contents().find("[name=sys_contentid]").val();f("#create-new-asset-content-frame").remove();f("#create-new-asset-content-dlg").remove();f.PercPathService.getPathItemById(k,function(p,n){f.unblockUI();if(p==f.PercServiceUtils.STATUS_ERROR){f.perc_utils.alert_dialog({title:"Error Selecting Asset",content:"The asset has been saved, but failed to select it."});f.PercCreateNewAssetDialogData.cancelCallback();return}f.PercCreateNewAssetDialogData.successCallback(n.PathItem)})}function j(k){var n=h();return f(k,n)}function h(){var k=null;for(i=0;i<frames.length;i++){if(frames[i].name=="create-new-asset-content-frame"){k=frames[i].document;break}}return k}})(jQuery);(function(b){b.fn.extend({autocomplete:function(d,e){var f=typeof d=="string";e=b.extend({},b.Autocompleter.defaults,{url:f?d:null,data:f?null:d,delay:f?b.Autocompleter.defaults.delay:10,max:e&&!e.scroll?10:150},e);e.highlight=e.highlight||function(h){return h};e.formatMatch=e.formatMatch||e.formatItem;return this.each(function(){new b.Autocompleter(this,e)})},result:function(d){return this.bind("result",d)},search:function(d){return this.trigger("search",[d])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(d){return this.trigger("setOptions",[d])},unautocomplete:function(){return this.trigger("unautocomplete")}});b.Autocompleter=function(v,k){var e={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var d=b(v).attr("autocomplete","off").addClass(k.inputClass);var q;var z="";var w=b.Autocompleter.Cache(k);var h=0;var E;var H={mouseDownOnSelect:false};var B=b.Autocompleter.Select(k,v,f,H);var G;b.browser.opera&&b(v.form).bind("submit.autocomplete",function(){if(G){G=false;return false}});d.bind((b.browser.opera?"keypress":"keydown")+".autocomplete",function(I){E=I.keyCode;switch(I.keyCode){case e.UP:I.preventDefault();if(B.visible()){B.prev()}else{D(0,true)}break;case e.DOWN:I.preventDefault();if(B.visible()){B.next()}else{D(0,true)}break;case e.PAGEUP:I.preventDefault();if(B.visible()){B.pageUp()}else{D(0,true)}break;case e.PAGEDOWN:I.preventDefault();if(B.visible()){B.pageDown()}else{D(0,true)}break;case k.multiple&&b.trim(k.multipleSeparator)==","&&e.COMMA:case e.TAB:case e.RETURN:if(f()){I.preventDefault();G=true;return false}break;case e.ESC:B.hide();break;default:clearTimeout(q);q=setTimeout(D,k.delay);break}}).focus(function(){h++}).blur(function(){h=0;if(!H.mouseDownOnSelect){C()}}).click(function(){if(h++>1&&!B.visible()){D(0,true)}}).bind("search",function(){var I=(arguments.length>1)?arguments[1]:null;function J(N,M){var K;if(M&&M.length){for(var L=0;L<M.length;L++){if(M[L].result.toLowerCase()==N.toLowerCase()){K=M[L];break}}}if(typeof I=="function"){I(K)}else{d.trigger("result",K&&[K.data,K.value])}}b.each(n(d.val()),function(K,L){j(L,J,J)})}).bind("flushCache",function(){w.flush()}).bind("setOptions",function(){b.extend(k,arguments[1]);if("data" in arguments[1]){w.populate()}}).bind("unautocomplete",function(){B.unbind();d.unbind();b(v.form).unbind(".autocomplete")});function f(){var J=B.selected();if(!J){return false}var I=J.result;z=I;if(k.multiple){var K=n(d.val());if(K.length>1){I=K.slice(0,K.length-1).join(k.multipleSeparator)+k.multipleSeparator+I}I+=k.multipleSeparator}d.val(I);F();d.trigger("result",[J.data,J.value]);return true}function D(K,J){if(E==e.DEL){B.hide();return}var I=d.val();if(!J&&I==z){return}z=I;I=p(I);if(I.length>=k.minChars){d.addClass(k.loadingClass);if(!k.matchCase){I=I.toLowerCase()}j(I,t,F)}else{x();B.hide()}}function n(J){if(!J){return[""]}var K=J.split(k.multipleSeparator);var I=[];b.each(K,function(L,M){if(b.trim(M)){I[L]=b.trim(M)}});return I}function p(I){if(!k.multiple){return I}var J=n(I);return J[J.length-1]}function A(I,J){if(k.autoFill&&(p(d.val()).toLowerCase()==I.toLowerCase())&&E!=e.BACKSPACE){d.val(d.val()+J.substring(p(z).length));b.Autocompleter.Selection(v,z.length,z.length+J.length)}}function C(){clearTimeout(q);q=setTimeout(F,200)}function F(){var I=B.visible();B.hide();clearTimeout(q);x();if(k.mustMatch){d.search(function(J){if(!J){if(k.multiple){var K=n(d.val()).slice(0,-1);d.val(K.join(k.multipleSeparator)+(K.length?k.multipleSeparator:""))}else{d.val("")}}})}if(I){b.Autocompleter.Selection(v,v.value.length,v.value.length)}}function t(J,I){if(I&&I.length&&h){x();B.display(I,J);A(J,I[0].value);B.show()}else{F()}}function j(J,L,I){if(!k.matchCase){J=J.toLowerCase()}var K=w.load(J);if(K&&K.length){L(J,K)}else{if((typeof k.url=="string")&&(k.url.length>0)){var M={timestamp:+new Date()};b.each(k.extraParams,function(N,O){M[N]=typeof O=="function"?O():O});b.ajax({mode:"abort",port:"autocomplete"+v.name,dataType:k.dataType,url:k.url,data:b.extend({q:p(J),limit:k.max},M),success:function(O){var N=k.parse&&k.parse(O)||y(O);w.add(J,N);L(J,N)}})}else{B.emptyList();I(J)}}}function y(L){var I=[];var K=L.split("\n");for(var J=0;J<K.length;J++){var M=b.trim(K[J]);if(M){M=M.split("|");I[I.length]={data:M,value:M[0],result:k.formatResult&&k.formatResult(M,M[0])||M[0]}}}return I}function x(){d.removeClass(k.loadingClass)}};b.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(d){return d[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(e,d){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:180};b.Autocompleter.Cache=function(e){var j={};var f=0;function n(t,q){if(!e.matchCase){t=t.toLowerCase()}var p=t.indexOf(q);if(e.matchContains=="word"){p=t.toLowerCase().search("\\b"+q.toLowerCase())}if(p==-1){return false}return p==0||e.matchContains}function k(t,p){if(f>e.cacheLength){d()}if(!j[t]){f++}j[t]=p}function h(){if(!e.data){return false}var q={},p=0;if(!e.url){e.cacheLength=1}q[""]=[];for(var v=0,t=e.data.length;v<t;v++){var y=e.data[v];y=(typeof y=="string")?[y]:y;var x=e.formatMatch(y,v+1,e.data.length);if(x===false){continue}var w=x.charAt(0).toLowerCase();if(!q[w]){q[w]=[]}var z={value:x,data:y,result:e.formatResult&&e.formatResult(y)||x};q[w].push(z);if(p++<e.max){q[""].push(z)}}b.each(q,function(A,B){e.cacheLength++;k(A,B)})}setTimeout(h,25);function d(){j={};f=0}return{flush:d,add:k,populate:h,load:function(w){if(!e.cacheLength||!f){return null}if(!e.url&&e.matchContains){var v=[];for(var p in j){if(p.length>0){var x=j[p];b.each(x,function(y,q){if(n(q.value,w)){v.push(q)}})}}return v}else{if(j[w]){return j[w]}else{if(e.matchSubset){for(var t=w.length-1;t>=e.minChars;t--){var x=j[w.substr(0,t)];if(x){var v=[];b.each(x,function(y,q){if(n(q.value,w)){v[v.length]=q}});return v}}}}}return null}}};b.Autocompleter.Select=function(h,q,v,z){var p={ACTIVE:"ac_over"};var t,j=-1,B,w="",C=true,e,y;function x(){if(!C){return}e=b("<div/>").hide().addClass(h.resultsClass).css("position","absolute").appendTo(document.body);y=b("<ul/>").appendTo(e).mouseover(function(D){if(A(D).nodeName&&A(D).nodeName.toUpperCase()=="LI"){j=b("li",y).removeClass(p.ACTIVE).index(A(D));b(A(D)).addClass(p.ACTIVE)}}).click(function(D){b(A(D)).addClass(p.ACTIVE);v();q.focus();return false}).mousedown(function(){z.mouseDownOnSelect=true}).mouseup(function(){z.mouseDownOnSelect=false});if(h.width>0){e.css("width",h.width)}C=false}function A(E){var D=E.target;while(D&&D.tagName!="LI"){D=D.parentNode}if(!D){return[]}return D}function n(D){t.slice(j,j+1).removeClass(p.ACTIVE);k(D);var F=t.slice(j,j+1).addClass(p.ACTIVE);if(h.scroll){var E=0;t.slice(0,j).each(function(){E+=this.offsetHeight});if((E+F[0].offsetHeight-y.scrollTop())>y[0].clientHeight){y.scrollTop(E+F[0].offsetHeight-y.innerHeight())}else{if(E<y.scrollTop()){y.scrollTop(E)}}}}function k(D){j+=D;if(j<0){j=t.size()-1}else{if(j>=t.size()){j=0}}}function d(D){return h.max&&h.max<D?h.max:D}function f(){y.empty();var E=d(B.length);for(var F=0;F<E;F++){if(!B[F]){continue}var G=h.formatItem(B[F].data,F+1,E,B[F].value,w);if(G===false){continue}var D=b("<li/>").html(h.highlight(G,w)).addClass(F%2==0?"ac_even":"ac_odd").appendTo(y)[0];b.data(D,"ac_data",B[F])}t=y.find("li");if(h.selectFirst){t.slice(0,1).addClass(p.ACTIVE);j=0}if(b.fn.bgiframe){y.bgiframe()}}return{display:function(E,D){x();B=E;w=D;f()},next:function(){n(1)},prev:function(){n(-1)},pageUp:function(){if(j!=0&&j-8<0){n(-j)}else{n(-8)}},pageDown:function(){if(j!=t.size()-1&&j+8>t.size()){n(t.size()-1-j)}else{n(8)}},hide:function(){e&&e.hide();t&&t.removeClass(p.ACTIVE);j=-1},visible:function(){return e&&e.is(":visible")},current:function(){return this.visible()&&(t.filter("."+p.ACTIVE)[0]||h.selectFirst&&t[0])},show:function(){var F=b(q).offset();e.css({width:typeof h.width=="string"||h.width>0?h.width:b(q).width(),top:F.top+q.offsetHeight,left:F.left}).show();if(h.scroll){y.scrollTop(0);y.css({maxHeight:h.scrollHeight,overflow:"auto"});if(b.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var D=0;t.each(function(){D+=this.offsetHeight});var E=D>h.scrollHeight;y.css("height",E?h.scrollHeight:D);if(!E){t.width(y.width()-parseInt(t.css("padding-left"))-parseInt(t.css("padding-right")))}}}},selected:function(){var D=t&&t.filter("."+p.ACTIVE).removeClass(p.ACTIVE);return D&&D.length&&b.data(D[0],"ac_data")},emptyList:function(){y&&y.empty()},unbind:function(){e&&e.remove()}}};b.Autocompleter.Selection=function(f,h,e){if(f.createTextRange){var d=f.createTextRange();d.collapse(true);d.moveStart("character",h);d.moveEnd("character",e);d.select()}else{if(f.setSelectionRange){f.setSelectionRange(h,e)}else{if(f.selectionStart){f.selectionStart=h;f.selectionEnd=e}}}f.focus()}})(jQuery);(function(b){b.PercListEditorWidget=function(n){var D={isEnabled:S,setListItems:q,getListItems:M,removeListItems:L,addListItem:I,removeListItem:B,enable:A,disable:h,highlightListItem:K,scrollToListItem:R};var y='<div id="perc-ui-listedit-header">        <div id="perc-ui-listedit-title">            <div id="perc-ui-permission-users-title">                '+n.title1+'            </div>            <div id="perc-ui-permission-users-write">                '+n.title2+'            </div>        </div>        <div id="perc-ui-permission-addstartbutton"/>    </div>    <div id="perc-ui-listedit-listitemfield">        <input id="perc-ui-permission-usernamefield" name="perc-ui-permission-usernamefield"/>        <div id="perc-ui-permission-plusbutton" title="Add user"/>    </div>    <div id="perc-ui-permission-user-list-scroll-pane">        <ul id="perc-ui-permission-user-list">            <li>                <span>Username</span>                <div class="perc-ui-permission-deletebutton" id="Username"/>            </li>        </ul>    </div>';var z='            <li>                <span>_username_</span>                <div class="perc-ui-permission-deletebutton" id="_username_" title="Remove user"/>            </li>';var F=b("#"+n.container);F.empty();F.html(y);var Q=F.find("#perc-ui-permission-user-list");var d=F.find("#perc-ui-permission-addstartbutton");var f=F.find("#perc-ui-listedit-listitemfield");var t=F.find("#perc-ui-permission-usernamefield");var J=F.find("#perc-ui-permission-plusbutton");var j=F.find("#perc-ui-permission-user-list-scroll-pane");var T=F.find("#perc-ui-listedit-title");var p;var w="";if(n.help!=undefined&&n.help!=null){w=n.help}else{w=I18N.message("perc.ui.folderPropsDialog.inputField@Enter a username")}var E=[];var v=true;var e=null;n.toggler.change(function(){k()});d.unbind().click(function(){f.toggle()});J.click(function(){var U=t.val();I(U)});t.keypress(function(W){var V=(W.keyCode?W.keyCode:W.which);var U=t.val();if(V==13){if(x(U)){I(U)}}}).click(function(){t.focus();N();O("clear");Q.find("li").removeClass("perc-ui-listedit-itemselected")}).keyup(function(){N()}).change(function(){N()}).blur(function(){O("help")}).focus(function(){O("clear")});if(n.results!=undefined&&n.results!=null){e=n.results;t.autocomplete(e,{minChars:0,max:e.length,width:(b.browser.msie)?336:334,scrollHeight:101}).result(function(){N()})}if(b.browser.msie){J.css("margin-right","18px")}q(n.items);k();d.hide();G();O("help");return D;function O(V){var U=t.val();if(V=="help"&&U==""){t.css("font-style","italic");t.css("color","gray");t.val(w)}else{if(V=="clear"){if(U==w){t.val("")}t.css("font-style","normal");t.css("color","black")}}}function N(){var U=t.val();var V=x(U);if(V){C()}else{G()}}function x(U){for(r=0;r<e.length;r++){if(U.toLowerCase()==e[r].toLowerCase()){return true}}return false}function q(U){E=[];if(U!=undefined&&U!=null&&U.length>0){for(u=0;u<U.length;u++){E.splice(0,0,U[u]);H(U[u])}}P()}function M(){return E}function S(){return v}function L(){E=[];P()}function H(U){if(e!=null){e=b.grep(e,function(V){return V!=U});t.setOptions({data:e})}}function I(Y){if(Y==null||Y==undefined||Y==""){return}for(li=0;li<E.length;li++){if(Y.toLowerCase()==E[li].toLowerCase()){return}}E.splice(0,0,Y);t.val("");H(Y);P();var V=-1;for(li=0;li<E.length;li++){if(Y==E[li]){V=li;break}}var X=V+1;var W=Q.find("li:nth-child("+X+")");var U=Q.find("li").height();if(V!=-1){j.scrollTop(V*U)}W.addClass("perc-ui-listedit-itemselected");N()}function P(){b.perc_utils.sortCaseInsensitive(E);Q.empty();for(u=0;u<E.length;u++){var U=z.replace(/_username_/g,E[u]);Q.append(U)}p=b(".perc-ui-permission-deletebutton");p.click(function(){var V=b(this).attr("id");B(V)})}function B(V){var U=-1;for(li=0;li<E.length;li++){if(V==E[li]){U=li;break}}if(U!=-1){E.splice(U,1);if(e!=null){e[e.length]=V;b.perc_utils.sortCaseInsensitive(e);t.setOptions({data:e})}P()}}function A(){v=true;t.removeAttr("disabled");var U=t.val();if(U!=w){t.css("color","black")}if(U==""){O("help")}j.removeClass("disabled").css("color","black");T.css("color","black");p.show();N();d.unbind().removeClass("disabled").click(function(){f.toggle()})}function h(){v=false;t.attr("disabled","disabled").css("color","gray");j.addClass("disabled").css("color","gray");T.css("color","gray");p.hide();G();d.addClass("disabled").unbind();Q.find("li").removeClass("perc-ui-listedit-itemselected")}function G(){J.addClass("disabled").unbind()}function C(){J.removeClass("disabled").click(function(){var U=t.val();I(U)})}function k(){var U=n.toggler.val();if(b.inArray(U,n.toggleroff)!=-1){h()}else{A()}}function K(U){}function R(U){}}})(jQuery);(function(d){d.fn.superfish=function(q){var j=d.fn.superfish,p=j.c,h=d(['<span class="',p.arrowClass,'"> &#187;</span>'].join("")),n=function(){var t=d(this),v=e(t);clearTimeout(v.sfTimer);t.showSuperfishUl().siblings().hideSuperfishUl()},f=function(){var t=d(this),w=e(t),v=j.op;clearTimeout(w.sfTimer);w.sfTimer=setTimeout(function(){v.retainPath=(d.inArray(t[0],v.$path)>-1);t.hideSuperfishUl();if(v.$path.length&&t.parents(["li.",v.hoverClass].join("")).length<1){n.call(v.$path)}},v.delay)},e=function(t){var v=t.parents(["ul.",p.menuClass,":first"].join(""))[0];j.op=j.o[v.serial];return v},k=function(t){t.addClass(p.anchorClass).append(h.clone())};return this.each(function(){var t=this.serial=j.o.length;var w=d.extend({},j.defaults,q);w.$path=d("li."+w.pathClass,this).slice(0,w.pathLevels).each(function(){d(this).addClass([w.hoverClass,p.bcClass].join(" ")).filter("li:has(ul)").removeClass(w.pathClass)});j.o[t]=j.op=w;d("li:has(ul)",this)[(d.fn.hoverIntent&&!w.disableHI)?"hoverIntent":"hover"](n,f).each(function(){if(w.autoArrows){k(d(">a:first-child",this))}}).not("."+p.bcClass).hideSuperfishUl();var v=d("a",this);v.each(function(x){var y=v.eq(x).parents("li");v.eq(x).focus(function(){n.call(y)}).blur(function(){f.call(y)})});w.onInit.call(this)}).each(function(){var t=[p.menuClass];if(j.op.dropShadows&&!(d.browser.msie&&d.browser.version<7)){t.push(p.shadowClass)}d(this).addClass(t.join(" "))})};var b=d.fn.superfish;b.o=[];b.op={};b.IE7fix=function(){var e=b.op;if(d.browser.msie&&d.browser.version>6&&e.dropShadows&&e.animation.opacity!=undefined){this.toggleClass(b.c.shadowClass+"-off")}};b.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};b.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};d.fn.extend({hideSuperfishUl:function(){var h=b.op,f=(h.retainPath===true)?h.$path:"";h.retainPath=false;var e=d(["li.",h.hoverClass].join(""),this).add(this).not(f).removeClass(h.hoverClass).find(">ul").hide().css("visibility","hidden");h.onHide.call(e);return this},showSuperfishUl:function(){var h=b.op,f=b.c.shadowClass+"-off",e=this.addClass(h.hoverClass).find(">ul:hidden").css("visibility","visible");b.IE7fix.call(e);h.onBeforeShow.call(e);e.animate(h.animation,h.speed,function(){b.IE7fix.call(e);h.onShow.call(e)});return this}})})(jQuery);(function(f){var b={percDropdownRootClass:"perc-view",percDropdownOptionLabels:["Title","Option1","Option2"],percDropdownOptionElements:null,percDropdownCallbacks:[function(n){alert(n)},function(n){alert(n)},function(n){alert(n)}],percDropdownCallbackData:["Title","Option1","Option2"],percDropdownDisabledFlag:[true,true,true,true,true],percDropdownItemImage:null,percDropdownTitleImage:null,percDropdownTitleImageOver:null,percDropdownShowExpandIcon:true,percDropdownResizeToElement:null,percDropdownDisabledItemImage:null,delay:50,dropShadows:true};var h="<ul class='sf-menu perc-dropdown'><li class='current'><a class='perc-dropdown-title'>_TITLE_</a><ul class='perc-dropdown-option-list'><li class='perc-dropdown-option-item-template '><a href='#' class='perc-dropdown-option'>_OPTION_</a></li></ul></li></ul>";var k;var j=4;f.fn.PercDropdown=function(t){t=f.extend({},b,t);k=f(h);k.addClass(t.percDropdownRootClass).data("config",t);if(t.percDropdownResizeToElement){t.onBeforeShow=e}var B=t.percDropdownCallbacks;var n=t.percDropdownCallbackData;var z=t.percDropdownOptionLabels;var w=t.percDropdownDisabledFlag;var G=t.percDropdownItemImage;var F=t.percDropdownDisabledItemImage;var D=k.find(".perc-dropdown-title");if(t.percDropdownTitleImage==null){D.css("cursor","default").html(z[0])}else{var A=t.percDropdownRootClass?t.percDropdownRootClass+"-split-button-arrow":"perc-split-button-arrow";D.html("&nbsp;").css("background","url("+t.percDropdownTitleImage+") no-repeat").css("cursor","pointer").addClass(A).hover(function(){f(this).css("background","url("+t.percDropdownTitleImageOver+") no-repeat").css("overflow","visible")},function(){f(this).css("background","url("+t.percDropdownTitleImage+") no-repeat").css("overflow","visible")});var q=k.find(".perc-dropdown-option-list");q.css("margin","4px 0 0 0")}D.addClass("perc-dropdown-title-"+z[0]).data("callback",B[0]).data("callbackData",n[0]).click(d);var y=k.find(".perc-dropdown-option-list");var x=k.find(".perc-dropdown-option-item-template");var v=0;for(l=1;l<z.length;l++){v=l;var C=z[l];var E=x.clone();E.removeClass("perc-dropdown-option-item-template");var p;if(t.percDropdownOptionElements!=null){E.find("a").replaceWith(t.percDropdownOptionElements[l]);p=t.percDropdownOptionElements[l].addClass("perc-dropdown-option-"+f.perc_textFilters.IDNAMECDATA(C))}else{p=E.find("a").html(C).addClass("perc-dropdown-option-"+f.perc_textFilters.IDNAMECDATA(C))}if(G!=null){p.css("background-image","url("+G[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}if(!(w[l])){v=0;p.addClass("perc-drop-disabled").css("color","#9FA3AA");if(F!=null){p.css("background-image","url("+F[l]+")").css("background-repeat","no-repeat").css("background-position","10px 8px").css("padding-left",28)}}y.append(E);E.data("callback",B[v]).data("callbackData",n[v]).click(d)}x.remove();k.superfish(t);if(t.percDropdownShowExpandIcon===false){D.find(".sf-sub-indicator").hide()}else{}this.append(k)};function d(p){var q=f(this).data("callback");var n=f(this).data("callbackData");q(n)}function e(){var t=f(this);var v=f(t.parents(".perc-dropdown")[0]);var n=v.data("config");if(typeof(n)!="undefined"){var q=f(n.percDropdownResizeToElement);var p=q.width();t.width(p-j)}}})(jQuery);(function(d,e){var b=0;d.widget("ech.multiselect",{options:{header:true,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:"",hide:"",autoOpen:false,multiple:true,position:{}},_create:function(){var k=this.element.hide(),p=this.options;this.speed=d.fx.speeds._default;this._isOpen=false;var j=(this.button=d('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(p.classes).attr({title:k.attr("title"),"aria-haspopup":true,tabIndex:k.attr("tabIndex")}).insertAfter(k),f=(this.buttonlabel=d("<span />")).html(p.noneSelectedText).appendTo(j),n=(this.menu=d("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(p.classes).appendTo(document.body),t=(this.header=d("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(n),h=(this.headerLinkContainer=d("<ul />")).addClass("ui-helper-reset").html(function(){if(p.header===true){return'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+p.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+p.uncheckAllText+"</span></a></li>"}else{if(typeof p.header==="string"){return"<li>"+p.header+"</li>"}else{return""}}}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(t),q=(this.checkboxContainer=d("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(n);this._bindEvents();this.refresh(true);if(!p.multiple){n.addClass("ui-multiselect-single")}},_init:function(){if(this.options.header===false){this.header.hide()}if(!this.options.multiple){this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide()}if(this.options.autoOpen){this.open()}if(this.element.is(":disabled")){this.disable()}},refresh:function(p){var j=this.element,n=this.options,k=this.menu,t=this.checkboxContainer,f=[],h=[],q=j.attr("id")||b++;j.find("option").each(function(x){var y=d(this),C=this.parentNode,A=this.innerHTML,E=this.title,B=this.value,w=this.id||"ui-multiselect-"+q+"-option-"+x,F=this.disabled,v=this.selected,z=["ui-corner-all"],D;if(C.tagName.toLowerCase()==="optgroup"){D=C.getAttribute("label");if(d.inArray(D,f)===-1){h.push('<li class="ui-multiselect-optgroup-label"><a href="#">'+D+"</a></li>");f.push(D)}}if(F){z.push("ui-state-disabled")}if(v&&!n.multiple){z.push("ui-state-active")}h.push('<li class="'+(F?"ui-multiselect-disabled":"")+'">');h.push('<label for="'+w+'" title="'+E+'" class="'+z.join(" ")+'">');h.push('<input id="'+w+'" name="multiselect_'+q+'" type="'+(n.multiple?"checkbox":"radio")+'" value="'+B+'" title="'+A+'"');if(v){h.push(' checked="checked"');h.push(' aria-selected="true"')}if(F){h.push(' disabled="disabled"');h.push(' aria-disabled="true"')}h.push(" /><span>"+A+"</span></label></li>")});t.html(h.join(""));this.labels=k.find("label");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();if(!p){this._trigger("refresh")}},update:function(){var n=this.options,h=this.labels.find("input"),f=h.filter(":checked"),j=f.length,k;if(j===0){k=n.noneSelectedText}else{if(d.isFunction(n.selectedText)){k=n.selectedText.call(this,j,h.length,f.get())}else{if(/\d/.test(n.selectedList)&&n.selectedList>0&&j<=n.selectedList){k=f.map(function(){return d(this).next().text()}).get().join(", ")}else{k=n.selectedText.replace("#",j).replace("#",h.length)}}}this.buttonlabel.html(k);return k},_bindEvents:function(){var f=this,h=this.button;function j(){f[f._isOpen?"close":"open"]();return false}h.find("span").bind("click.multiselect",j);h.bind({click:j,keypress:function(k){switch(k.which){case 27:case 38:case 37:f.close();break;case 39:case 40:f.open();break}},mouseenter:function(){if(!h.hasClass("ui-state-disabled")){d(this).addClass("ui-state-hover")}},mouseleave:function(){d(this).removeClass("ui-state-hover")},focus:function(){if(!h.hasClass("ui-state-disabled")){d(this).addClass("ui-state-focus")}},blur:function(){d(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(k){if(d(this).hasClass("ui-multiselect-close")){f.close()}else{f[d(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}k.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(t){t.preventDefault();var q=d(this),p=q.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),k=p.get(),n=q.parent().text();if(f._trigger("beforeoptgrouptoggle",t,{inputs:k,label:n})===false){return}f._toggleChecked(p.filter("[checked]").length!==p.length,p);f._trigger("optgrouptoggle",t,{inputs:k,label:n,checked:k[0].checked})}).delegate("label","mouseenter.multiselect",function(){if(!d(this).hasClass("ui-state-disabled")){f.labels.removeClass("ui-state-hover");d(this).addClass("ui-state-hover").find("input").focus()}}).delegate("label","keydown.multiselect",function(k){k.preventDefault();switch(k.which){case 9:case 27:f.close();break;case 38:case 40:case 37:case 39:f._traverse(k.which,this);break;case 13:d(this).find("input")[0].click();break}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(q){var p=d(this),t=this.value,n=this.checked,k=f.element.find("option");if(this.disabled||f._trigger("click",q,{value:t,text:this.title,checked:n})===false){q.preventDefault();return}p.focus();p.attr("aria-selected",n);k.each(function(){if(this.value===t){this.selected=n}else{if(!f.options.multiple){this.selected=false}}});if(!f.options.multiple){f.labels.removeClass("ui-state-active");p.closest("label").toggleClass("ui-state-active",n);f.close()}f.element.trigger("change");setTimeout(d.proxy(f.update,f),10)});d(document).bind("mousedown.multiselect",function(k){if(f._isOpen&&!d.contains(f.menu[0],k.target)&&!d.contains(f.button[0],k.target)&&k.target!==f.button[0]){d("html").click(function(){f.close()})}});d(this.element[0].form).bind("reset.multiselect",function(){setTimeout(d.proxy(f.refresh,f),10)})},_setButtonWidth:function(){var f=this.element.outerWidth(),h=this.options;if(/\d/.test(h.minWidth)&&f<h.minWidth){f=h.minWidth}this.button.width(f)},_setMenuWidth:function(){var f=this.menu,h=this.button.outerWidth()-parseInt(f.css("padding-left"),10)-parseInt(f.css("padding-right"),10)-parseInt(f.css("border-right-width"),10)-parseInt(f.css("border-left-width"),10);f.width(h||this.button.outerWidth())},_traverse:function(n,p){var j=d(p),h=n===38||n===37,f=j.parent()[h?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[h?"last":"first"]();if(!f.length){var k=this.menu.find("ul").last();this.menu.find("label")[h?"last":"first"]().trigger("mouseover");k.scrollTop(h?k.height():0)}else{f.find("label").trigger("mouseover")}},_toggleState:function(h,f){return function(){if(!this.disabled){this[h]=f}if(f){this.setAttribute("aria-selected",true)}else{this.removeAttribute("aria-selected")}}},_toggleChecked:function(f,n){var k=(n&&n.length)?n:this.labels.find("input"),j=this;k.each(this._toggleState("checked",f));k.eq(0).focus();this.update();var h=k.map(function(){return this.value}).get();this.element.find("option").each(function(){if(!this.disabled&&d.inArray(this.value,h)>-1){j._toggleState("selected",f).call(this)}});if(k.length){this.element.trigger("change")}},_toggleDisabled:function(f){this.button.attr({disabled:f,"aria-disabled":f})[f?"addClass":"removeClass"]("ui-state-disabled");this.menu.find("input").attr({disabled:f,"aria-disabled":f}).parent()[f?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:f,"aria-disabled":f})},open:function(n){var t=this,k=this.button,f=this.menu,j=this.speed,h=this.options;if(this._trigger("beforeopen")===false||k.hasClass("ui-state-disabled")||this._isOpen){return}var q=f.find("ul").last(),v=h.show,p=k.offset();if(d.isArray(h.show)){v=h.show[0];j=h.show[1]||t.speed}q.scrollTop(0).height(h.height);if(d.ui.position&&!d.isEmptyObject(h.position)){h.position.of=h.position.of||k;f.show().position(h.position).hide().show(v,j)}else{f.css({top:p.top+k.outerHeight(),left:p.left}).show(v,j)}this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");k.addClass("ui-state-active");this._isOpen=true;this._trigger("open")},close:function(){if(this._trigger("beforeclose")===false){return}var j=this.options,f=j.hide,h=this.speed;if(d.isArray(j.hide)){f=j.hide[0];h=j.hide[1]||this.speed}this.menu.hide(f,h);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=false;this._trigger("close")},enable:function(){this._toggleDisabled(false)},disable:function(){this._toggleDisabled(true)},checkAll:function(f){this._toggleChecked(true);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(false);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){d.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},_setOption:function(f,h){var j=this.menu;switch(f){case"header":j.find("div.ui-multiselect-header")[h?"show":"hide"]();break;case"checkAllText":j.find("a.ui-multiselect-all span").eq(-1).text(h);break;case"uncheckAllText":j.find("a.ui-multiselect-none span").eq(-1).text(h);break;case"height":j.find("ul").last().height(parseInt(h,10));break;case"minWidth":this.options[f]=parseInt(h,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[f]=h;this.update();break;case"classes":j.add(this.button).removeClass(this.options.classes).addClass(h);break}d.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
/*
 * jQuery UI Timepicker 0.2.1
 *
 * Copyright (c) 2009 Martin Milesich (http://milesich.com/)
 *
 * Some parts are
 *   Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 *
 * $Id: timepicker.js 28 2009-08-11 20:31:23Z majlo $
 *
 * Depends:
 *  ui.core.js
 *  ui.datepicker.js
 *  ui.slider.js
 */
(function(d){d.extend(d.datepicker._defaults,{stepMinutes:1,stepHours:1,time24h:false,showTime:false,altTimeField:""});d.datepicker._setDateFromFieldOverride=d.datepicker._setDateFromField;d.datepicker._setDateFromField=function(h,f){var e=h.input.val().split(" ");if(e.length>0){h.input.val(e[0]);d.datepicker._setDateFromFieldOverride(h,f);h.input.val(e.join(" "))}};d.datepicker._connectDatepickerOverride=d.datepicker._connectDatepicker;d.datepicker._connectDatepicker=function(h,f){d.datepicker._connectDatepickerOverride(h,f);if(this._get(f,"showTime")){f.settings.showButtonPanel=true}var e=this._get(f,"showOn");if(e=="button"||e=="both"){f.trigger.unbind("click");f.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==h){d.datepicker._hideDatepicker(null)}else{d.datepicker._showDatepicker(h)}return false})}};d.datepicker._showDatepickerOverride=d.datepicker._showDatepicker;d.datepicker._showDatepicker=function(f){d.datepicker._showDatepickerOverride(f);f=f.target||f;if(f.nodeName.toLowerCase()!="input"){f=d("input",f.parentNode)[0]}if(d.datepicker._isDisabledDatepicker(f)){return}var h=d.datepicker._getInst(f);var e=d.datepicker._get(h,"showTime");if(e){d.timepicker.show(f)}};d.datepicker._checkExternalClickOverride=d.datepicker._checkExternalClick;d.datepicker._checkExternalClick=function(f){if(!d.datepicker._curInst){return}var e=d(f.target);if((e.parents("#"+d.timepicker._mainDivId).length==0)){inst=d.datepicker._getInst(e[0]);if(((e[0].id!=d.datepicker._mainDivId&&e.parents("#"+d.datepicker._mainDivId).length==0&&!e.hasClass(d.datepicker.markerClassName)&&!e.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)))||(e.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=inst)){d("html").click(function(){d.datepicker._hideDatepicker()})}}return};d.datepicker._hideDatepickerOverride=d.datepicker._hideDatepicker;d.datepicker._hideDatepicker=function(f,j){var h=this._curInst;if(!h||(f&&h!=d.data(f,PROP_NAME))){return}var e=this._get(h,"showTime");if(f===undefined&&e){if(h.input){h.input.val(this._formatDate(h));h.input.trigger("change")}this._updateAlternate(h);if(e){d.timepicker.update(this._formatDate(h))}}d.datepicker._hideDatepickerOverride(f,j);if(e){d.timepicker.hide()}};d.datepicker._selectDate=function(n,f){var k=d(n);var j=this._getInst(k[0]);var e=this._get(j,"showTime");f=(f!=null?f:this._formatDate(j));if(!e){if(j.input){j.input.val(f)}this._updateAlternate(j)}var h=this._get(j,"onSelect");if(h){h.apply((j.input?j.input[0]:null),[f,j])}else{if(j.input&&!e){j.input.trigger("change")}}if(j.inline){this._updateDatepicker(j)}else{if(!j.stayOpen){if(e){this._updateDatepicker(j)}else{this._hideDatepicker(null,this._get(j,"duration"));this._lastInput=j.input[0];if(typeof(j.input[0])!="object"){j.input[0].focus()}this._lastInput=null}}}};d.datepicker._updateDatepickerOverride=d.datepicker._updateDatepicker;d.datepicker._updateDatepicker=function(e){d.datepicker._updateDatepickerOverride(e);d.timepicker.resize()};function b(){}b.prototype={init:function(){this._mainDivId="ui-timepicker-div";this._inputId=null;this._orgValue=null;this._orgHour=null;this._orgMinute=null;this._colonPos=-1;this._visible=false;this.tpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible" style=" display: none; position: absolute;"></div>');this._generateHtml()},show:function(q){var j=d.datepicker._getInst(q);this._time24h=d.datepicker._get(j,"time24h");this._altTimeField=d.datepicker._get(j,"altTimeField");var e=parseInt(d.datepicker._get(j,"stepMinutes"),10)||1;var p=parseInt(d.datepicker._get(j,"stepHours"),10)||1;if(60%e!=0){e=1}if(24%p!=0){p=1}d("#hourSlider").slider("option","max",24-p);d("#hourSlider").slider("option","step",p);d("#minuteSlider").slider("option","max",60-e);d("#minuteSlider").slider("option","step",e);this._inputId=q.id;if(!this._visible){this._parseTime();this._orgValue=d("#"+this._inputId).val()}this.resize();d("#"+this._mainDivId).show();this._visible=true;var f=d("#"+d.datepicker._mainDivId);var n=f.position();var k=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+d(document).scrollLeft();var t=this.tpDiv.offset().left+this.tpDiv.outerWidth();if(t>k){f.css("left",n.left-(t-k)-5);this.tpDiv.css("left",f.offset().left+f.outerWidth()+"px")}var h=d("#"+this._inputId).offset();f.css("top",h.top+25);this.tpDiv.css("top",h.top+25)},update:function(f){var h=d("#"+this._mainDivId+" span.fragHours").text()+":"+d("#"+this._mainDivId+" span.fragMinutes").text();if(!this._time24h){h+=" "+d("#"+this._mainDivId+" span.fragAmpm").text()}var e=d("#"+this._inputId).val();d("#"+this._inputId).val(f+" "+h);if(this._altTimeField){d(this._altTimeField).each(function(){d(this).val(h)})}},hide:function(){this._visible=false;d("#"+this._mainDivId).hide()},resize:function(){var f=d("#"+d.datepicker._mainDivId);var h=f.position();var e=d("#"+d.datepicker._mainDivId+" > div.ui-datepicker-header:first-child").height();d("#"+this._mainDivId+" > div.ui-datepicker-header:first-child").css("height",e);this.tpDiv.css({height:f.height(),top:h.top,left:h.left+f.outerWidth()+"px"});d("#hourSlider").css("height",this.tpDiv.height()-(3.5*e));d("#minuteSlider").css("height",this.tpDiv.height()-(3.5*e))},_generateHtml:function(){var f="";f+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">';f+='<div class="ui-datepicker-title" style="margin:0">';f+='<span class="fragHours">08</span><span class="delim">:</span><span class="fragMinutes">45</span> <span class="fragAmpm"></span></div></div><table>';f+="<tr><th>Hour</th><th>Minute</th></tr>";f+='<tr><td align="center"><div id="hourSlider" class="slider"></div></td><td align="center"><div id="minuteSlider" class="slider"></div></td></tr>';f+="</table>";this.tpDiv.empty().append(f);d("body").append(this.tpDiv);var e=this;d("#hourSlider").slider({orientation:"vertical",range:"min",min:0,max:23,step:1,slide:function(h,j){e._writeTime("hour",j.value)},stop:function(h,j){d("#"+e._inputId).focus()}});d("#minuteSlider").slider({orientation:"vertical",range:"min",min:0,max:59,step:1,slide:function(h,j){e._writeTime("minute",j.value)},stop:function(h,j){d("#"+e._inputId).focus()}});d("#hourSlider > a").css("padding",0);d("#minuteSlider > a").css("padding",0)},_writeTime:function(e,f){if(e=="hour"){if(!this._time24h){if(f<12){d("#"+this._mainDivId+" span.fragAmpm").text("am")}else{d("#"+this._mainDivId+" span.fragAmpm").text("pm");f-=12}if(f==0){f=12}}else{d("#"+this._mainDivId+" span.fragAmpm").text("")}if(f<10){f="0"+f}d("#"+this._mainDivId+" span.fragHours").text(f)}if(e=="minute"){if(f<10){f="0"+f}d("#"+this._mainDivId+" span.fragMinutes").text(f)}},_parseTime:function(){var k=d("#"+this._inputId).val();this._colonPos=k.search(":");var e=0,j=0,f="";if(this._colonPos!=-1){j=parseInt(k.substr(this._colonPos-2,2),10);e=parseInt(k.substr(this._colonPos+1,2),10);f=jQuery.trim(k.substr(this._colonPos+3,3))}f=f.toLowerCase();if(f!="am"&&f!="pm"){f=""}if(j<0){j=0}if(e<0){e=0}if(j>23){j=23}if(e>59){e=59}if(f=="pm"&&j<12){j+=12}if(f=="am"&&j==12){j=0}this._setTime("hour",j);this._setTime("minute",e);this._orgHour=j;this._orgMinute=e},_setTime:function(e,f){if(isNaN(f)){f=0}if(f<0){f=0}if(f>23&&e=="hour"){f=23}if(f>59&&e=="minute"){f=59}if(e=="hour"){d("#hourSlider").slider("value",f)}if(e=="minute"){d("#minuteSlider").slider("value",f)}this._writeTime(e,f)}};d.timepicker=new b();d("document").ready(function(){d.timepicker.init()})})(jQuery);(function(e){e.PercRecentListService={getRecentList:b,setRecent:d,RECENT_TYPE_ITEM:"item",RECENT_TYPE_TEMPLATE:"template",RECENT_TYPE_SITE_FOLDER:"site-folder",RECENT_TYPE_ASSET_FOLDER:"asset-folder",RECENT_TYPES:[this.RECENT_TYPE_ITEM,this.RECENT_TYPE_TEMPLATE,this.RECENT_TYPE_SITE_FOLDER,this.RECENT_TYPE_ASSET_FOLDER]};function b(k,j){var f=e.Deferred();if(!e.inArray(k,e.PercRecentListService.RECENT_TYPES)){f.reject("Invalid type passed in for getting recent items.")}else{var h=e.perc_paths.RECENT_ROOT+k;if(k==e.PercRecentListService.RECENT_TYPE_TEMPLATE||k==e.PercRecentListService.RECENT_TYPE_SITE_FOLDER){h+="/"+j}var n=function(q,p){if(q==e.PercServiceUtils.STATUS_SUCCESS){f.resolve(p)}else{var t=e.PercServiceUtils.extractDefaultErrorMessage(p.request);e.perc_utils.info("Error accessing cm1 page optimizer service: "+t);f.reject(t)}};e.PercServiceUtils.makeJsonRequest(h,e.PercServiceUtils.TYPE_GET,true,n)}return f.promise()}function d(n,p,j){var f=e.Deferred();if(!e.inArray(n,e.PercRecentListService.RECENT_TYPES)){f.reject("Invalid type passed in for getting recent items.")}else{var h=e.perc_paths.RECENT_ROOT+n;if(n==e.PercRecentListService.RECENT_TYPE_TEMPLATE||n==e.PercRecentListService.RECENT_TYPE_SITE_FOLDER){h+="/"+j}var k={value:p};e.ajax({url:h,type:"POST",data:k,contentType:"application/x-www-form-urlencoded",dataType:"json"}).done(function(){f.resolve()}).fail(function(q,t){f.reject("Failed to add item to recent list")})}return f.promise()}})(jQuery);(function(h){h.PercRedirectHandler={createRedirect:n};function n(x,w,t){var q=h.Deferred();if(x==w){q.resolve("Both from and to are same no need for a redirect")}else{if(!gIsSaaSEnvironment){q.resolve("This is a non SaaS environment, skipping redirect creation.")}else{var v={data:{fromPath:x,toPath:w,type:t}};p(v).done(function(y){j(x,w,y).done(function(z){q.resolve(z)}).fail(function(z){q.reject(z)})}).fail(function(y){q.reject(y)})}}return q.promise()}function p(v){var q=h.Deferred();var t=h.perc_paths.REDIRECT_ROOT+"validate";h.PercServiceUtils.makeJsonRequest(t,h.PercServiceUtils.TYPE_POST,false,function(x,w){if(x==h.PercServiceUtils.STATUS_SUCCESS){q.resolve(w.data)}else{var y=h.PercServiceUtils.extractDefaultErrorMessage(w.request);q.reject(y)}},v,function(w){q.reject("Redirect service request timed out.")});return q.promise()}function j(w,v,t){var q=h.Deferred();if(t.response.status=="Error"){q.reject(t.response.errorMessage)}if(t.response.status=="NotApplicable"){q.resolve("Redirects are not applicable for this scenario.")}else{if(t.response.status=="Published"){e(w,v,t).done(function(x){q.resolve(x)}).fail(function(x){q.reject(x)})}else{q.resolve("Redirect is not required for this case.")}}return q.promise()}function d(z,y,x){z=f(z);y=f(y);var v=h.Deferred();var q=x.response.redirectLicense;var t={category:"AUTOGEN",condition:z,enabled:true,key:q.key,permanent:true,redirectTo:y,site:x.response.bucketName,type:"CM1"};var w={id:q.key,type:q.name,token:q.handshake};h.ajax({type:"POST",beforeSend:function(A){A.setRequestHeader("Authorization",JSON.stringify(w))},url:q.apiProvider+"/rest/redirect/entries?replace=true",data:JSON.stringify(t),contentType:"application/json",}).done(function(C,A,B){v.resolve("Created redirect successfully")}).fail(function(D,A,C){var B="A redirect rule cannot be created at this time, Please note the time and date and submit this problem to Percussion support.";if(D&&D.responseText){B=JSON.parse(D.responseText).message}v.reject(B)});return v.promise()}function e(x,w,v){var q=h.Deferred();var t;h.unblockUI();t=h(b(x,w)).perc_dialog({title:"Manage Redirects",modal:true,percButtons:{Yes:{click:function(){if(!w){w=t.find("#perc-redirect-to-path").val()}if(!w){t.find("div.perc_field_error[for=perc-redirect-to-path]").show();return}else{t.find("div.perc_field_error[for=perc-redirect-to-path]").hide()}h.PercBlockUI(h.PercBlockUIMode.CURSORONLY);d(x,w,v).fail(function(y){q.reject(y)}).always(function(){h.unblockUI();t.remove();q.resolve("Redirect created successfully.")})},id:"perc-redirect-yes"},No:{click:function(){t.remove();q.resolve("User doesn't want to create redirect.")},id:"perc-redirect-no"}},id:"perc-redirect-dialog",width:700});k(t);return q.promise()}function b(v,q){var t=h("<div/>",{id:"perc-redirect-container"});t.append('<div><label>This change could cause a visitor to your website to see a "page not found" error. Would you like to redirect those users?</label><br/><br/></div>');t.append("<div><label>From path:</label><br/></div>");t.append('<div class="readonlyinput">'+f(v)+"</div><br/>");t.append("<div><label>To path:</label><br/></div>");if(q){t.append('<div class="readonlyinput">'+f(q)+"</div>")}else{t.append("<div><input type='text' class='required' readonly='true' name='perc-redirect-to-path' id='perc-redirect-to-path'/><img id='perc-redirect-to-path-button' src='../images/images/buttonEllipse.png' class='perc-button-ellipse'/></div>");t.append("<div for='perc-redirect-to-path' class='perc_field_error' style='display:none'>To path is required to create redirect.</div>")}return t}function k(q){q.find("#perc-redirect-to-path-button").click(function(){var x="Select redirect to path";var y="To path";var w=function(A){var z=A.path;if(z.substring(0,1)==="/"&&!(z.substring(0,2)==="//")){z="/"+z}if(!z){z=A.folderPaths.split("$System$")[1]}z=f(z);q.find("#perc-redirect-to-path").val(z).attr("title",z)};var t=function(A){var z=null;if(!A){z="Please select a folder or page."}else{if(A.path=="/Sites/"){z="Your current selection is sites root, please select a folder or page."}else{if(A.type=="site"){z="Your current selection is a site, please select a folder or page."}}}return z};var v={okCallback:w,dialogTitle:x,rootPath:"Sites",initialPath:q.find("#perc-convert-folder-path").val(),selectedItemValidator:t,showFoldersOnly:false};h.PercPathSelectionDialog.open(v)})}function f(q){q=q.replace("//Sites/","");q=q.replace("/Sites/","");q=q.substring(q.indexOf("/"));if(q.charAt(q.length-1)=="/"){q=q.substr(0,q.length-1)}return q}})(jQuery);(function(n){n.PercDataList={init:x,selectItem:p,updateList:h,getCurrentItem:d,disableButtons:j,enableButtons:q,enableDeleteButton:t,unhighlightAllItems:A,disableDeleteButton:f,getCurrentList:b,hideButtons:z};var v={listItem:[],title:"",addTitle:"Add",deleteTitle:"Delete",enableDelete:true,enableAdd:true,collapsible:false,createItem:function(){},deleteItem:function(){},selectedItem:function(){},truncateEntries:false,truncateEntriesCount:5};var k=[];var e=new Object();var w="";function x(D,E){options=n.extend(true,{},v,E);D.data("options",options);var F=n('<div class="perc-item-list-label" />').html(options.title);D.append(F);if(options.enableDelete){D.find(".perc-item-list-label").append(n('<div class="perc-item-delete-button" />').attr("title",options.deleteTitle))}if(options.enableAdd){D.find(".perc-item-list-label").append(n('<div class="perc-item-add-button"/>').attr("title",options.addTitle))}if(options.collapsible){D.find(".perc-item-list-label").append(n('<span style="float: left;" id="perc-wf-min-max" class = "perc-items-minimizer" />'))}var G=n('<div class="perc-itemname-list" />').append(n("<ul/>"));D.append(G);h(D,[]);D.find(".perc-item-add-button").unbind().click(function(){var H=D.data("options");if(typeof(H.createItem)=="function"){H.createItem()}});D.find("#perc-wf-min-max").unbind().click(function(){n(this).toggleClass("perc-items-minimizer").toggleClass("perc-items-maximizer");D.find(".perc-itemname-list").slideToggle("fast")});D.find(".perc-item-delete-button").unbind().click(function(I){var H=D.data("options");I.stopPropagation();if(typeof(H.deleteItem)=="function"){H.deleteItem(w)}})}function h(E,D){k=D;var G=E.data("options");var F=E.find(".perc-itemname-list>ul");F.html("");n.each(D,function(I){var J=D[I].toString();var K="perc-item-id-"+I;e[J]=K;var H=n('<li class="perc-itemname" />').attr("id",K).attr("title",J).html(J).data("item",J).addClass("perc-ellipsis");if(G.truncateEntries&&I>=G.truncateEntriesCount){H.addClass("perc-more-list perc-hidden").hide()}F.append(H);if(G.truncateEntries&&I==G.truncateEntriesCount){F.append('<li class="perc-moreLink perc-visible" style = "display:block" title = "more">more</li>')}if(G.truncateEntries&&I==D.length-1){F.append('<li class="perc-lessLink perc-hidden" style = "display:none" title = "less">less</li>')}});B(E);F.find(".perc-itemname").unbind().click(function(I){var H=n(this).data("item");dirtyController.confirmIfDirty(function(){if(typeof(G.selectedItem)=="function"){G.selectedItem(H)}})})}function B(D){n(D).find(".perc-moreLink, .perc-lessLink").click(function(){n(D).find(".perc-more-list, .perc-moreLink, .perc-lessLink").toggle().toggleClass("perc-visible perc-hidden")})}function d(){return w}function b(){return k}function p(D,G){var E=G;G=G.replace(/\\/g,"\\\\").replace(/\'/g,"\\'");var F=D.find(".perc-itemname[title='"+G+"']").attr("id");w=E;A(D);D.find("#"+F).css("background-color","#caf589").addClass("perc-item-selected")}function A(D){D.find("ul li").css("background-color","").removeClass("perc-item-selected");D.find("ul li div").css("background-color","")}function C(D){var E=D.data("options");if(E.enableAdd){D.find(".perc-item-add-button").unbind().click(function(){if(typeof(E.createItem)=="function"){E.createItem()}}).removeClass("perc-item-disabled").addClass("perc-item-enabled")}}function t(D){var E=D.data("options");if(E.enableDelete){D.find(".perc-item-delete-button").unbind().click(function(F){F.stopPropagation();if(typeof(E.deleteItem)=="function"){E.deleteItem(w)}}).removeClass("perc-item-disabled").addClass("perc-item-enabled")}}function q(D){C(D);t(D)}function y(D){var E=D.data("options");if(E.enableAdd){D.find(".perc-item-add-button").unbind().addClass("perc-item-disabled").removeClass("perc-item-enabled")}}function f(D){var E=D.data("options");if(E.enableDelete){D.find(".perc-item-delete-button").unbind().removeClass("perc-item-enabled").addClass("perc-item-disabled")}}function j(D){y(D);f(D)}function z(D){D.find(".perc-item-add-button").hide();D.find(".perc-item-delete-button").hide()}})(jQuery);(function(d){d.PercAddItemDialog={open:b};function b(p,k,f,z){var q=window.location.protocol+"//"+window.location.host+"/cm";var v=null;var j=A(k);var w={};var x={click:function(){t(v,z)},id:"perc-addItem-dialog-save"};var y={click:function(){v.remove()},id:"perc-addItem-dialog-cancel"};if(p){w.Save=x}else{w.Ok=x}w.Cancel=y;v=d(j).perc_dialog({resizable:false,title:f,modal:true,closeOnEscape:true,percButtons:w,id:"perc-addItem-dialog",open:function(){var B="url("+q+"/images/images/buttonSaveInactive.png)";if(!p){B="url("+q+"/images/images/buttonOkInactive.png)"}d("#perc-addItem-dialog-save").unbind("click").unbind("mouseenter mouseleave").css("background-image",B);d(this).find("input").click(function(C){h(p,v,z);C.stopPropagation()});d(this).find(".perc-item-entry").click(function(C){n(C,p,v,z)})},width:400});function A(B){var G=d('<div class="perc-multicheck-list" />').append(d('<div class="perc-items-container" />'));var C=G.find(".perc-items-container");for(i in B){var E=B[i];var D=d("<div class='perc-item-entry'/>").append(d("<input type='checkbox'/>").val(E)).append(d("<span />").html(E).attr("title",E));C.append(D)}var F=d("<div/>").append(G);return F}function n(D,B,C,E){d(D.currentTarget).find("input").attr("checked",!d(D.currentTarget).find("input").attr("checked"));h(B,C,E)}function h(D,E,I){var G=window.location.protocol+"//"+window.location.host+"/cm";var B=d("#perc-addItem-dialog-save");var H="url("+G+"/images/images/buttonSave.png)";var C="url("+G+"/images/images/buttonSaveOver.png)";var F="url("+G+"/images/images/buttonSaveInactive.png)";if(!D){var H="url("+G+"/images/images/buttonOk.png)";var C="url("+G+"/images/images/buttonOkOver.png)";var F="url("+G+"/images/images/buttonOkInactive.png)"}if(d(".perc-multicheck-list input:checked").length>0){B.unbind("click").click(function(){t(E,I)}).css("background-image",H).hover(function(){d(this).css("background-image",C)},function(){d(this).css("background-image",H)})}else{B.unbind("click").unbind("mouseenter mouseleave").css("background-image",F)}}function t(B,D){var C=e();if(C.length>0&&typeof(D)=="function"){D(C)}B.remove()}function e(){var B=[];d(".perc-multicheck-list input:checked").each(function(){B.push(d(this).val())});return B}}})(jQuery);(function(h){var y="NONE";var p="READER";var B="ASSIGNEE";var q="ADMIN";h.PercUserService={ACCESS_NONE:y,ACCESS_READ:p,ACCESS_WRITE:B,ACCESS_ADMIN:q,getUsers:F,findUser:v,findDirectoryUsers:w,importDirectoryUsers:x,getDirectoryStatus:d,getRoles:G,createUser:k,deleteUser:A,updateUser:f,findRole:t,deleteRole:z,updateRole:e,createRole:n,getAvailableUsers:b,getAccessLevel:E,validateDeleteRole:D,validateDeleteUsers:j};function F(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_USERS,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){J.data.UserList.users=C(J.data.UserList.users);I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function v(J,I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_FIND+"/"+J,h.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){K.data.User.name=K.data.User.name.toString();I(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);I(h.PercServiceUtils.STATUS_ERROR,M)}})}function w(J,K){if(J==null){K(h.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}J=J.replace(/%+$/,"");var I=h.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(J)+"%25";var H=this;h.PercServiceUtils.makeJsonRequest(I,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{try{var O=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,O)}catch(N){K(h.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function x(I,J){if(I==null||I==undefined||I.ImportUsers.externalUsers.length==0){J(h.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_IMPORT,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},I)}function d(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_STATUS,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function G(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ROLES,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){J.data.RoleList.roles=C(J.data.RoleList.roles);I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function k(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_CREATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function A(J,I){var H=this;h.PercServiceUtils.makeDeleteRequest(h.perc_paths.USER_DELETE+"/"+J,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){I(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);I(h.PercServiceUtils.STATUS_ERROR,M)}})}function f(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function t(J,K){var H=this;var I={psstring:{value:J}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_FIND,h.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){L.data.Role.name=L.data.Role.name.toString();K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}},I)}function z(I,J){var H={psstring:{value:I}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function n(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_CREATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function e(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function b(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_AVAILABLE_USERS,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){K.data.UserList.users=C(K.data.UserList.users);J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function E(K,M,N,I,L){var H=this;var J;if(K!=null){J={AccessLevelRequest:{type:K,itemId:M,parentFolderPath:I}}}else{J={AccessLevelRequest:{itemId:M,parentFolderPath:I}}}h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ACCESS_LEVEL,h.PercServiceUtils.TYPE_POST,(typeof(L)!="undefined"&&L!=null&&L)?true:false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data.AccessLevel.accessLevel)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}},J)}function D(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function j(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_REMOVE_USERS_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function C(H){H=h.perc_utils.convertCXFArray(H);h.each(H,function(J,I){H[J]=I.toString()});return H}})(jQuery);(function(J){J.PercUserController={init:R,editSelectedUser:H,addNewUser:N,findDirectoryUsers:x,importDirectoryUsers:v,selectUser:A,deleteUser:j,getSelectedUser:E,getCurrentUser:k,setUserChanged:K,save:B,cacheAllRoles:e,cancel:n,isAddingNewUser:h};var t=J.PercDirtyController;var U=J.PercUserService;var T="";var p=0;var y=500;var Q=0;var d=1;var C=2;var b=3;var I=4;var S=0;var M=[];var G=[];var P=null;var L=null;var F=Q;var f;var D=false;function R(V){f=V;f.init();e();O(function(){w(function(){A(G[S])})});U.getDirectoryStatus(function(W,Y){var X=null;if(W==U.STATUS_ERROR){X="Unable to retrieve Directory Service status."}else{if(Y.DirectoryServiceStatus.status!="ENABLED"){X="The Directory Service is currently unavailable."}}if(X!=null){f.disableUserImport();return}})}function O(V){L=J.PercNavigationManager.getUserName();V()}function w(V){U.getUsers(function(W,X){if(W==U.STATUS_ERROR){f.alertDialog("Error while loading users",X);return}var Y=J.perc_utils.convertCXFArray(X.UserList.users);G=Y;f.updateListOfUsers(G);if(V){V()}})}function A(V){state=d;for(u in G){if(V==G[u]){S=u}}P=V;q(V)}function j(V){U.deleteUser(V,function(W,X){if(W==U.STATUS_ERROR){f.alertDialog("Error while deleting user "+V+" available roles.",X);return}for(u in G){if(V==G[u]){S=u}}w(function(){if(S>G.length-1){S--}A(G[S])})})}function H(){if(P==null||state==b){f.alertDialog("Please select a user to edit","Please select a user to edit");return}state=C;f.showSelectedUserEditor()}function N(){state=b;f.showNewUserEditor();f.updateAvailableRoles(M,[]);f.updateAssignedRoles([])}function x(V){J.PercBlockUI();U.findDirectoryUsers(V,function(X,aa){J.unblockUI();if(X==J.PercServiceUtils.STATUS_SUCCESS){var W=aa.ExternalUser;var Z=[];for(u=0;u<W.length;u++){var Y=true;for(c=0;c<G.length;c++){if(String(W[u].name).toLowerCase()==String(G[c]).toLowerCase()){Y=false;break}}if(Y){Z.push(W[u])}}f.updateImportUsersDialog(Z)}else{f.alertDialog("Error",aa)}})}function v(W){if(W==null||W.length==0){return}var X={ImportUsers:{externalUsers:[]}};for(u=0;u<W.length;u++){var V={name:W[u]};X.ImportUsers.externalUsers.push(V)}J.PercBlockUI();U.importDirectoryUsers(X,function(Z,ab){J.unblockUI();if(Z==J.PercServiceUtils.STATUS_SUCCESS){var aa=ab.ImportedUser;var Y=false;for(u=0;u<aa.length;u++){if(aa[u].status=="ERROR"){Y=false;f.showImportError();break}if(aa[u].status=="DUPLICATE"){Y=true}}if(Y){f.showImportWarning(aa)}w(function(){if(P!=null){A(P)}})}else{f.alertDialog("Error",ab)}})}function q(V){U.findUser(V,function(X,Y){if(X==U.STATUS_ERROR){f.alertDialog("Error while retrieving user "+V,usersJson);return}var W=J.perc_utils.convertCXFArray(Y.User.roles);W.sort();f.updateUserNameField(V);f.updateEmail(Y.User.email);f.updateAssignedRoles(W);f.updateAvailableRoles(M,W);f.selectUser(V,Y.User.providerType)})}function E(){return P}function k(){return L}function K(V){D=V}function B(ac,ab,Z,Y,X){if(J.perc_utils.isBlankString(ac)){f.alertDialog("Error","User name cannot be blank.");return}if(ac=="PercussionAdmin"){f.alertDialog("Error","That user name is restricted for system use. Please choose a different user name.");return}if(ab!=Z){f.alertDialog("Error","Passwords must be the same.");return}var W=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;if(X!=""&&!W.test(X)){f.alertDialog("Error","Invalid Email address format.");return}if(Y==null||Y=="undefined"||Y.length==0){f.alertDialog("Error","User must be in at least one role.");return}if(ab=="*******"){ab=Z=""}if(state==C||state==d){var V={User:{name:ac,password:ab,roles:Y,email:X}};U.updateUser(V,function(ad,ae){if(ad!=J.PercServiceUtils.STATUS_SUCCESS){f.alertDialog("Error",ae);return}t.setDirty(false);f.init();w(function(){A(ac)})})}else{if(state==b){var aa={User:{name:ac,password:ab,roles:Y,email:X}};U.createUser(aa,function(ad,ae){if(ad!=J.PercServiceUtils.STATUS_SUCCESS){f.alertDialog("Error",ae);return}t.setDirty(false);f.init();w(function(){A(ac)})})}}return}function n(){t.setDirty(false);f.init();w(function(){if(P!=null){A(P)}})}function z(V){for(u in G){if(V==G[u]){S=u;return u}}}function e(){U.getRoles(function(V,W){if(V==J.PercServiceUtils.STATUS_ERROR){f.alertDialog("Error while loading available roles.",W);return}M=W.RoleList.roles;M.sort()})}function h(){return state==b}})(jQuery);(function(d){var b=d.PercDirtyController;d.PercUserView=function(){var E={init:Y,updateListOfUsers:n,updateUserNameField:O,updateAssignedRoles:F,updateAvailableRoles:I,updateEmail:f,resetUserDetails:k,selectUser:w,showSelectedUserEditor:C,showNewUserEditor:L,updateImportUsersDialog:v,showImportWarning:X,showImportError:B,disableUserImport:j,alertDialog:x};d(window).resize(function(){fixIframeHeight();fixTemplateHeight()});var p=d("#perc-users-import-users-dialog-fixed");var W=d("#perc-users-directory-users-table");var z=d("#perc-users-search-input");var H=d("#perc-users-search-button");var T=d("#perc-users-directory-users-selectall-checkbox");var J=d("#perc-users-directory-users-selectall-label");var P=d("#perc-users-directory-users-cancel-button");var ab=d("#perc-users-import-users-button");var S=d("#perc-users-directory-users-import-button");var t=d("#perc-users-select-at-least-one-user-label");var M=d("#perc-users-narrow-search");var aa=200;var q=true;var Q=[];var U=new Object();var A=false;var Z=d.PercUserController;Z.init(E);function Y(){k();d("#perc-users-edit-user-button").unbind().click(function(){Z.editSelectedUser();A=false});d("#perc-users-add-user-button").unbind().click(function(){b.confirmIfDirty(function(){A=true;d("#perc-users-external-user-label").hide();Z.addNewUser()})});d("#perc-users-save").unbind().click(function(){y();A=false});d("#perc-users-cancel").unbind().click(function(){Z.cancel();A=false});d("#perc-users-remove-role-button").unbind().click(function(){N()});d("#perc-users-add-role-button").unbind().click(function(){D()});p.dialog({title:I18N.message("perc.ui.users.import.dialogs@ImportDirectoryUsers"),autoOpen:false,closeOnEscape:true,modal:true,height:575,dialogClass:"alert",width:694,resizable:false,zIndex:5000});if(q){ab.unbind().click(function(){G();b.confirmIfDirty(function(){W.empty();p.dialog("open");T.attr("checked",false);t.hide();M.hide()})})}else{G()}H.click(function(){T.attr("checked",false);var ag=z.val();Z.findDirectoryUsers(ag)});T.click(function(){e();ac()});J.click(function(){T.click();e();ac()});P.click(function(){p.dialog("close")});S.click(function(){if(S.hasClass("perc-users-directory-users-import-button-disabled")){return}var ag=d(".perc-users-checkboxes:checked");var ah=[];ag.each(function(){ah.push(d(this).attr("id"))});if(ah.length==0){x("Warning",I18N.message("perc.ui.users.import.dialogs@SelectOneUser"));return}Z.importDirectoryUsers(ah);p.dialog("close")});M.html(I18N.message("perc.ui.users.import.dialogs@NarrowSearch",[aa]))}function ac(){var ag=d(".perc-users-checkboxes:checked");var ah=d(".perc-users-checkboxes");if(ag.length>0){t.hide();h()}else{if(ah.length>0&&ag.length==0){t.show();G()}}}function h(){S.attr("title",I18N.message("perc.ui.users.import.tooltips@ClickToImport"));S.addClass("perc-users-directory-users-import-button-enabled");S.removeClass("perc-users-directory-users-import-button-disabled")}function G(){S.attr("title",I18N.message("perc.ui.users.import.tooltips@SelectUsersToImport"));S.addClass("perc-users-directory-users-import-button-disabled");S.removeClass("perc-users-directory-users-import-button-enabled")}function X(al){var ak=[];var ag=[];for(u=0;u<al.length;u++){if(al[u].status!="SUCCESS"){if(al[u].status=="ERROR"){ak.push(al[u])}else{if(al[u].status=="DUPLICATE"){ag.push(al[u])}}}}var ai="<div id='perc-users-import-warning-scrollpane'><table id='perc-users-import-warning'>";for(u=0;u<ak.length;u++){var aj=ad.replace(/_username_/g,ak[u].name);ai+=aj}ai+="</table></div>";var ah=I18N.message("perc.ui.users.import.dialogs@LdapImportFailed");ah=d.perc_utils.replaceURLWithHTMLLinks(ah);ah+="<br/><br/>"+ai;x(I18N.message("perc.ui.users.import.dialogs@ErrorImportingUsers"),ah,450)}function B(){var ag=I18N.message("perc.ui.users.import.dialogs@LdapImportFailed");x(I18N.message("perc.ui.users.import.dialogs@ErrorImportingUsers"),ag,450)}function e(){if(T.attr("checked")){d(".perc-users-checkboxes").attr("checked",true)}else{d(".perc-users-checkboxes").attr("checked",false)}}function k(){d("#perc-users-password-block").hide();d("#perc-users-username-field").val("");d("#perc-users-password-field").val("");d("#perc-users-password-confirm-field").val("");d("#perc-users-email-label").hide();d("#perc-users-email-field").val("");var ah=d("#perc-users-available-roles > select");var ag=d("#perc-users-assigned-roles  > select");ag.click(function(){ah.attr("selectedIndex","-1")}).html("");ah.click(function(){ag.attr("selectedIndex","-1")}).html("");d("#perc-users-username-field").addClass("perc-users-password-field-view-user").attr("readonly","readonly");d("#perc-users-edit-user-button").show()}function n(ai){Q=ai;U=new Object();var al=d("#perc-username-list > ul");al.html("");var ah="";var ak="";var aj="...";for(i in ai){var an=ai[i].toString();var am="perc-users-id-"+i;U[an]=am;ak=V.replace(/_id_/g,am);aj=an.length>20?"...":"";ak=ak.replace(/_username_/g,an.substring(0,20)+aj);al.append(ak)}d(".perc-username").unbind().click(function(ap){var ao=this;b.confirmIfDirty(function(){var ar=d(ao).attr("id");var aq;for(aq in U){if(U[aq]==ar){break}}Z.selectUser(aq)})});var ag=Z.getCurrentUser();var am=U[ag];d("#perc-username-list ul li div").addClass("perc-user-delete").removeClass("perc-user-delete-disabled").attr("title","Delete user");d("#perc-username-list #"+am+" #"+am).addClass("perc-user-delete-disabled").removeClass("perc-user-delete");d(".perc-user-delete").unbind().click(function(ap){ap.stopPropagation();var ar=d(this).attr("id");var aq=ae(ar);if(aq==Z.getCurrentUser()){x("Warning","You can not remove the user currently logged in.");return}var ao={id:"perc-user-delete-confirm-dialog",title:"Confirm User Deletion",question:"<span style='padding-right:11px'>Are you sure you want to remove user: "+aq+"</span>",success:function(){Z.deleteUser(aq)},yes:"Continue anyway"};d.perc_utils.confirm_dialog(ao)})}function v(ah){W.empty();if(ah.length>aa){M.show()}else{M.hide()}for(i=0;i<ah.length;i++){if(i>=aa){break}var ag=R.replace(/_username_/g,ah[i].name);W.append(ag)}if(ah.length>0){d(".perc-users-checkboxes").click(function(){ac()})}p.dialog("open");ac()}function j(){q=false;ab.removeClass("perc-users-import-users-button-enabled");ab.addClass("perc-users-import-users-button-disabled");ab.attr("title",I18N.message("perc.ui.users.import.tooltips@UserImportUnavailable"));ab.unbind()}function C(){d("#perc-users-username-field").addClass("perc-users-password-field-view-user").change(function(){b.setDirty(true,"user")});d("#perc-users-email-field").removeClass("perc-users-password-field-view-user").removeAttr("readonly").change(function(){b.setDirty(true,"user")});d("#perc-users-email-label").show();af(false);d("#perc-users-edit-user-button").hide()}function L(){d("#perc-users-username-field").removeClass("perc-users-password-field-view-user").removeAttr("readonly").val("").focus().change(function(){b.setDirty(true,"user")});d("#perc-users-username-label").addClass("perc-required-field");af(true);d("#perc-users-email-field").removeClass("perc-users-password-field-view-user").removeAttr("readonly").val("").change(function(){b.setDirty(true,"user")});d("#perc-users-email-label").show();K();d("#perc-users-edit-user-button").hide()}function af(ag){var ah=ag?"":"*******";d("#perc-users-password-block").show();d("#perc-users-password-field").val(ah).unbind().click(function(){d(this).val("").unbind().change(function(){b.setDirty(true,"user")});d("#perc-users-password-confirm-field").val("").unbind().change(function(){b.setDirty(true,"user")})});d("#perc-users-password-confirm-field").val(ah).unbind().click(function(){d(this).val("").unbind().change(function(){b.setDirty(true,"user")});d("#perc-users-password-field").val("").unbind().change(function(){b.setDirty(true,"user")})})}function O(ah){var ag=d("#perc-users-username-field");ag.val(ah)}function f(ah){var ag=d("#perc-users-email-field");ag.val(ah)}function F(ag){var aj=d("#perc-users-assigned-roles > select");aj.html("");for(i in ag){var ah=ag[i];var ai=d("<option/>").val(ah).html(ah);aj.append(ai)}}function I(ai,al){if(al==null){al=[]}var aj=d("#perc-users-available-roles > select");aj.html("");var ak=0;for(i in ai){var ag=al[ak];if(ai[i]!=ag){var ah=d("<option/>").val(ai[i]).html(ai[i]);aj.append(ah)}else{ak++}}}function w(ai,ag){var ah=U[ai];d("#perc-users-username-field").addClass("perc-users-password-field-view-user").attr("readonly","readonly");d("#perc-users-email-field").addClass("perc-users-password-field-view-user").attr("readonly","readonly");if(d("#perc-users-email-field").val()==""){d("#perc-users-email-label").hide()}else{d("#perc-users-email-label").show()}K();d("#perc-username-list #"+ah).css("background-color","#caf589").addClass("perc-users-selected");d("#perc-users-password-block").hide();d("#perc-users-username-label").removeClass("perc-required-field");if(ag=="DIRECTORY"){d("#perc-users-external-user-label").show();d("#perc-users-edit-user-button").hide()}else{if(ag=="INTERNAL"){d("#perc-users-external-user-label").hide();d("#perc-users-edit-user-button").show()}}}function K(){d("#perc-username-list ul li").css("background-color","").removeClass("perc-users-selected");d("#perc-username-list ul li div").css("background-color","")}function N(){var ag=d("#perc-users-assigned-roles > select");var ak=d("#perc-users-assigned-roles > select > option:selected");var ah=ag.val();if(ah=="Admin"&&!Z.isAddingNewUser()&&Z.getSelectedUser()==Z.getCurrentUser()){x("Warning","You can not remove the 'Admin' role from your own profile.");return}if(ah==null){return}if(ak){ak.remove()}var aj=d("<option/>").val(ah).html(ah);var ai=d("#perc-users-available-roles > select").append(aj);b.setDirty(true,"user")}function D(){var ak=d("#perc-users-available-roles > select");var ai=d("#perc-users-available-roles > select > option:selected");var ag=ak.val();if(ag==null){return}if(ai){ai.remove()}var ah=d("<option/>").val(ag).html(ag);var aj=d("#perc-users-assigned-roles > select").append(ah);b.setDirty(true,"user")}function y(){var aj=new Array();d("#perc-users-assigned-roles > select option").each(function(){aj.push(d(this).val())});var ak=d("#perc-users-username-field").val();if(A){for(u=0;u<Q.length;u++){if(ak.toString().toLowerCase()==Q[u].toString().toLowerCase()){x(I18N.message("perc.ui.labels@Error"),I18N.message("perc.ui.users.import.dialogs@UserAlreadyExists",[ak,Q[u]]));return}}}var ai=d("#perc-users-password-field").val();var ah=d("#perc-users-password-confirm-field").val();var ag=d("#perc-users-email-field").val();Z.save(ak,ai,ah,aj,ag)}function x(ai,ah,ag){if(ag==null||ag==undefined||ag==""||ag<1){ag=400}d.perc_utils.alert_dialog({title:ai,content:ah,width:ag})}function ae(ah){var ag;for(ag in U){if(U[ag]==ah){break}}return ag}var V='<li     id="_id_"     class="perc-username"     title="_username_">         _username_     <div id="_id_" class="perc-user-delete">     </div></li>';var ad="<tr><td class='perc-users-row'><span>_username_</span></td><td><span></span></td></td></td></tr>";var R="<tr><td><input class='perc-users-checkboxes' id='_username_' type='checkbox'></td><td><span>_username_</span></td></tr>"}})(jQuery);(function(v){v.PercRoleController={init:N,editSelectedRole:P,addNewRole:J,selectRole:A,validateAndDeleteRole:y,getSelectedRole:H,save:O,getAvailableUsers:e,cancel:n,validateAndRemoveUsers:M,getCurrentUser:k,updateListOfRoles:w};var x=v.PercDirtyController;var I=v.PercRoleService;var R=v.PercUserService;var q=0;var d=1;var z=2;var j=3;var B=0;var K=[];var C=null;var h=null;var b=[];var Q=q;var E;var f=window.location.protocol+"//"+window.location.host+"/cm";function N(S){E=S;F();E.init();w(function(){A(K[B])})}function w(S){R.getRoles(function(U,V){if(U==v.PercServiceUtils.STATUS_ERROR){E.alertDialog("Error while loading roles.",V);return}var T=v.perc_utils.convertCXFArray(V.RoleList.roles);K=T;E.updateListOfRoles(T);if(S){S()}})}function A(S){state=d;for(u in K){if(S==K[u]){B=u}}h=S;p(S)}function L(S){R.deleteRole(S,function(T,U){if(T!=v.PercServiceUtils.STATUS_SUCCESS){E.alertDialog("Error while deleting role '"+S+"'.",U);return}w(function(){if(B>K.length-1){B--}A(K[B])})})}function P(){if(h==null||state==j){E.alertDialog("Please select a role to edit","Please select a role to edit");return}state=z;E.showSelectedRoleEditor()}function J(){state=j;E.showNewRoleEditor();E.updateAssignedUsers([])}function p(S){R.findRole(S,function(U,T){if(U!=v.PercServiceUtils.STATUS_SUCCESS){E.alertDialog("Error while retrieving role "+S,T);return}var V=v.perc_utils.convertCXFArray(T.Role.users);E.updateRoleNameField(S);E.updateDescriptionField(T.Role.description);E.updateHomepageField(T.Role.homepage);E.updateAssignedUsers(V);E.selectRole(S)})}function H(){return h}function O(T,U,X,W){if(v.perc_utils.isBlankString(T)){E.alertDialog("Error","Role name cannot be blank.");return}if(T.indexOf("??")!=-1){E.alertDialog("Error","The role name contains invalid character sequence '??'.");return}if(v.perc_utils.isBlankString(X)){E.alertDialog("Error","Homepage cannot be blank.");return}if(U.length>255){E.alertDialog("Error","The maximum length of a role description is 255 characters.");return}if(U.indexOf("??")!=-1){E.alertDialog("Error","The role description contains invalid character sequence '??'.");return}if(state==z||state==d){var S={Role:{name:T,description:U,homepage:X,users:W}};t(S)}else{if(state==j){var V={Role:{name:T,description:U,homepage:X,users:W}};R.createRole(V,function(Y,Z){if(Y!=v.PercServiceUtils.STATUS_SUCCESS){E.alertDialog("Error",Z);return}x.setDirty(false);w(function(){A(T)})})}}return}function n(){x.setDirty(false);w(function(){if(h!=null){A(h)}})}function e(T){b=T;if(state==d){var S={Role:{name:h,users:b}};R.getAvailableUsers(S,function(V,W){if(V==v.PercServiceUtils.STATUS_ERROR){E.alertDialog("Error while loading available users.",W);return}var U=v.perc_utils.convertCXFArray(W.UserList.users);if(U.length>0){v.PercAddItemDialog.open(true,U,"Add Users to Role",D)}else{E.alertDialog("Add Users to Role","There are no users available to add to role '"+h+"'.  All users in the system have already been added to the role.")}})}else{R.getUsers(function(V,W){if(V==v.PercServiceUtils.STATUS_ERROR){E.alertDialog("Error while loading available users.",W);return}var U=v.perc_utils.convertCXFArray(W.UserList.users);for(i in T){U.splice(U.indexOf(T[i]),1)}if(U.length>0){v.PercAddItemDialog.open(false,U,"Add Users to Role",D)}else{E.alertDialog("Add Users to Role","There are no users available to add to role '"+h+"'.  All users in the system have already been added to the role.")}})}}function D(S){var U=b.concat(S);U.sort();if(state==z||state==j){E.updateAssignedUsers(U)}else{if(state==d){var T={Role:{name:h,description:E.getDescription(),users:U}};t(T)}}}function G(S){var T={Role:{role:h,description:E.getDescription(),users:S}};t(T)}function k(){return C}function F(){C=v.PercNavigationManager.getUserName()}function t(S){R.updateRole(S,function(U,T){if(U!=v.PercServiceUtils.STATUS_SUCCESS){E.alertDialog("Error",T);return}x.setDirty(false);w(function(){A(T.Role.name)})})}function y(S){R.validateDeleteRole(S,function(T,W){if(W!=null||S.Role.users.length>0){var V="<p id='perc-delete-dialog-warning'>Warning:</p><p id='perc-warning-red'>You are about to delete the role: '"+h+"'.</p> <br/>"+(W!=null?"<strong>"+W+"</strong><br/><br/>":"")+"<p id='perc-delete-warn-msg'>Are you sure you would like to delete this role? </p>";var U={id:"perc-role-delete-confirm",title:"Delete Role",question:V,success:function(){L(S.Role.name)},yes:"Continue anyway",type:"YES_NO",open:function(){alert("open")},width:500};v.perc_utils.confirm_dialog(U);v("#perc-role-delete-confirm").find("#perc-confirm-generic-yes").css("background-image","url("+f+"/images/images/buttonYesNoFocus.png)").unbind("mouseenter mouseleave").hover(function(){v(this).css("background-image","url("+f+"/images/images/buttonYesOverNoFocus.png)")},function(){v(this).css("background-image","url("+f+"/images/images/buttonYesNoFocus.png)")})}else{L(S.Role.name)}})}function M(U,V){var S={UserList:{users:U}};var T={Role:{name:h,description:E.getDescription(),users:V}};R.validateDeleteUsers(S,function(X,aa){if(X==v.PercServiceUtils.STATUS_SUCCESS){t(T)}else{var W=U.join(", ");var Z="<p id='perc-delete-dialog-warning'>Warning</p><br/><strong>"+aa+"</strong><br/><br/><p id='perc-delete-warn-msg'>Are you sure you would like to remove these users from role '"+h+"'?</p>";var Y={id:"perc-roles-removeusers-confirm",title:"Remove Users from Role",question:Z,success:function(){t(T)},yes:"Continue anyway",type:"YES_NO",width:500};v.perc_utils.confirm_dialog(Y);v("#perc-roles-removeusers-confirm").find("#perc-confirm-generic-yes").css("background-image","url("+f+"/images/images/buttonYesNoFocus.png)").unbind("mouseenter mouseleave").hover(function(){v(this).css("background-image","url("+f+"/images/images/buttonYesOverNoFocus.png)")},function(){v(this).css("background-image","url("+f+"/images/images/buttonYesNoFocus.png)")})}})}})(jQuery);(function(d){var b=d.PercDirtyController;d.PercRoleView=function(){var F={init:J,updateListOfRoles:p,updateRoleNameField:k,updateAssignedUsers:f,updateDescriptionField:q,updateHomepageField:N,resetRoleDetails:A,selectRole:x,showSelectedRoleEditor:O,showNewRoleEditor:z,alertDialog:G,getDescription:w};d(window).resize(function(){fixIframeHeight();fixTemplateHeight()});var C=d("#perc-roles-list");var j=false;var h=false;var t=false;var E=d.PercRoleController;E.init(F);function I(S){var R=new Array();d(".perc-roles-assigned-users-list span").each(function(){R.push(d(this).html())});var Q={Role:{name:S,description:w,users:R}};E.validateAndDeleteRole(Q)}function J(){A();d("#perc-roles-edit-role-button").unbind().click(function(){j=true;E.editSelectedRole();e();L()});d(".perc-roles-addusers-button").unbind().click(B);d(".perc-roles-removeusers-button").unbind().click(D);d("#perc-roles-save").unbind().click(function(){K()});d("#perc-roles-cancel").unbind().click(function(){E.cancel()});var Q={listItem:[],title:"Roles",addTitle:"Add new role",deleteTitle:"Delete role",createItem:H,deleteItem:I,selectedItem:E.selectRole};d.PercDataList.init(C,Q)}function B(){var Q=new Array();d(".perc-roles-assigned-users-list span").each(function(){Q.push(d(this).html())});E.getAvailableUsers(Q)}function D(){if(!h){if(!t){t=true;var Q=new Array();var R=new Array();d(".perc-roles-assigned-users-list li").each(function(){var T=d(this);var S=T.find("span").html();if(T.is(".perc-assigned-user-selected")){R.push(S)}else{Q.push(S)}});E.validateAndRemoveUsers(R,Q)}}else{d(".perc-roles-assigned-users-list .perc-assigned-user-selected").remove();n()}}function H(){h=true;E.addNewRole();e();n();d(".perc-required-label").show();d("#perc-roles-edit-role-button").hide()}function A(){d("#perc-roles-name-field").val("");d("#perc-roles-description-field").val("");d("#perc-roles-homepage-field").val("");d(".perc-roles-assigned-users-list").html("");d("#perc-roles-name-field").addClass("perc-roles-field-readonly").attr("readonly","readonly");d("#perc-roles-description-label").hide();d("#perc-role-save-cancel-block").hide();d("#perc-roles-edit-role-button").show()}function p(Q){d.PercDataList.updateList(C,Q)}function O(){d("#perc-roles-name-field").addClass("perc-roles-field-readonly");d("#perc-roles-description-field").removeClass("perc-roles-field-readonly").removeAttr("readonly").attr("style","height: 55px;width: 100%;").change(function(){b.setDirty(true,"role")});d("#perc-roles-description-label").show();d("#perc-roles-homepage-field").show().change(function(){b.setDirty(true,"role")});d("#perc-roles-homepage-label").show();d("#perc-roles-homepage-field-readonly").hide();d("#perc-roles-edit-role-button").hide();d("#perc-role-save-cancel-block").show();d("#perc-roles-description-field").focus()}function z(){d("#perc-roles-name-field").removeClass("perc-roles-field-readonly").removeAttr("readonly").val("").focus().change(function(){b.setDirty(true,"role")});d("#perc-roles-name-label").addClass("perc-required-field");d("#perc-roles-description-field").removeClass("perc-roles-field-readonly").removeAttr("readonly").attr("style","height: 55px;width: 100%;").val("").change(function(){b.setDirty(true,"role")});d("#perc-roles-description-label").show();d("#perc-roles-homepage-field").show().change(function(){b.setDirty(true,"role")}).val("Home");d("#perc-roles-homepage-label").show();d("#perc-roles-homepage-field-readonly").hide();M();d("#perc-roles-edit-role-button").hide();d("#perc-role-save-cancel-block").show()}function k(Q){var R=d("#perc-roles-name-field");R.val(Q)}function q(R){var Q=d("#perc-roles-description-field");Q.val(R)}function N(Q){d("#perc-roles-homepage-field").val(Q);d("#perc-roles-homepage-field-readonly").text(Q)}function f(S){var V=d(".perc-roles-assigned-users-list");var Q=E.getCurrentUser();var U=d("<ul class='perc-assigned-users' />");V.html("");for(i in S){var T=S[i];var R=d("<li class='perc-assigned-user-entry'/>").append(d("<span />").html(T).attr("title",T));if(E.getSelectedRole()=="Admin"&&(Q==T)){R.find("span").css("color","gray")}else{R.click(y)}U.append(R)}V.append(U)}function y(S){if(!j){var Q=E.getCurrentUser();var R=d(this);var T=R.find("span").html();if(R.is(".perc-assigned-user-selected")){R.removeClass("perc-assigned-user-selected")}else{R.addClass("perc-assigned-user-selected")}if(d(".perc-roles-assigned-users-list .perc-assigned-user-selected span").length>0){P()}else{n()}}}function x(R){t=false;if(j||h){j=false;h=false;v();d(".perc-required-label").hide();d("#perc-roles-edit-role-button").show()}if(R=="Admin"||R=="Designer"){d.PercDataList.disableDeleteButton(C)}else{d.PercDataList.enableDeleteButton(C)}n();d.PercDataList.selectItem(C,R);d("#perc-roles-name-field").addClass("perc-roles-field-readonly").attr("readonly","readonly");var S=d("#perc-roles-description-label");var Q=d("#perc-roles-description-field");Q.addClass("perc-roles-field-readonly").attr("readonly","readonly");if(Q.val()==""){S.hide()}else{S.show()}d("#perc-roles-homepage-field").hide();d("#perc-roles-homepage-field-readonly").show();d("#perc-roles-homepage-label").show();d("#perc-roles-name-label").removeClass("perc-required-field");d("#perc-roles-edit-role-button").show();d("#perc-role-save-cancel-block").hide()}function M(){d("#perc-rolename-list ul li").css("background-color","").removeClass("perc-roles-selected");d("#perc-rolename-list ul li div").css("background-color","")}function L(){d(".perc-roles-assigned-users-list .perc-assigned-user-selected").removeClass("perc-assigned-user-selected")}function e(){d.PercDataList.disableButtons(C);if(j){d(".perc-roles-addusers-button").addClass("perc-item-disabled").unbind();n()}}function v(){d.PercDataList.enableButtons(C);d(".perc-roles-addusers-button").removeClass("perc-item-disabled").unbind().click(B)}function P(){d(".perc-roles-removeusers-button").removeClass("perc-item-disabled").unbind().click(D)}function n(){d(".perc-roles-removeusers-button").addClass("perc-item-disabled").unbind()}function K(){var R=new Array();d(".perc-roles-assigned-users-list span").each(function(){R.push(d(this).html())});var Q=d.trim(d("#perc-roles-name-field").val());var S=d("#perc-roles-description-field").val();var T=d("#perc-roles-homepage-field").val();E.save(Q,S,T,R)}function G(S,R,Q){if(Q==null||Q==undefined||Q==""||Q<1){Q=400}d.perc_utils.alert_dialog({title:S,content:R,width:Q,okCallBack:function(){E.updateListOfRoles(function(){d("#perc-roles-list #perc-item-id-0").click()})}})}function w(){return d("#perc-roles-description-field").val()}}})(jQuery);(function(k){var j="ADMIN";k.PercCategoryService={ACCESS_ADMIN:j,getCategories:n,editCategories:e,getTabLockData:f,lockCategoryTab:h,removeCatTabLock:b,publishToDTS:d};function n(p,t){var q=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_ALL+"/"+p,k.PercServiceUtils.TYPE_GET,false,function(w,v){if(w==k.PercServiceUtils.STATUS_SUCCESS){t(k.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=k.PercServiceUtils.extractDefaultErrorMessage(v.request);t(k.PercServiceUtils.STATUS_ERROR,x)}})}function e(q,t){var p=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_UPDATE,k.PercServiceUtils.TYPE_POST,false,function(w,v){if(w==k.PercServiceUtils.STATUS_SUCCESS){t(k.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=k.PercServiceUtils.extractDefaultErrorMessage(v.request);t(k.PercServiceUtils.STATUS_ERROR,x)}},q)}function f(p,t){var q=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_LOCK_INFO+"/"+p,k.PercServiceUtils.TYPE_GET,false,function(w,v){if(w==k.PercServiceUtils.STATUS_SUCCESS){t(k.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=k.PercServiceUtils.extractDefaultErrorMessage(v.request);t(k.PercServiceUtils.STATUS_ERROR,x)}})}function h(q,v){var t=this;var p=(new Date()).toString();k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_LOCK_TAB+"/"+q+"/"+p,k.PercServiceUtils.TYPE_POST,false,function(x,w){if(x==k.PercServiceUtils.STATUS_SUCCESS){v(k.PercServiceUtils.STATUS_SUCCESS,w.data)}else{var y=k.PercServiceUtils.extractDefaultErrorMessage(w.request);v(k.PercServiceUtils.STATUS_ERROR,y)}})}function b(p){var q=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_REMOVE_TAB_LOCK+"/"+p,k.PercServiceUtils.TYPE_POST,false,function(v,t){if(v==k.PercServiceUtils.STATUS_SUCCESS){callback(k.PercServiceUtils.STATUS_SUCCESS,t.data)}else{var w=k.PercServiceUtils.extractDefaultErrorMessage(t.request);callback(k.PercServiceUtils.STATUS_ERROR,w)}})}function d(v,p,q,w){var t=this;k.PercServiceUtils.makeJsonRequest(k.perc_paths.CAT_UPDATE_IN_DTS+"/"+q+"/"+p,k.PercServiceUtils.TYPE_POST,false,function(y,x){if(y==k.PercServiceUtils.STATUS_SUCCESS){w(k.PercServiceUtils.STATUS_SUCCESS)}else{var z=k.PercServiceUtils.extractDefaultErrorMessage(x.request);w(k.PercServiceUtils.STATUS_ERROR,z)}},v)}})(jQuery);var globalVar;(function(n){n.PercCategoryController={init:y,lockUser:"x",getCategories:z,editCategories:b,getTabLockData:k,lockCategoryTab:j,removeCatTabLock:e,confirmDialog:x,publishToDTS:v};var d=n.PercDirtyController;var t=n.PercCategoryService;var w;var h;var q=window.location.protocol+"//"+window.location.host+"/cm";function y(A){w=A;w.init();h=n.PercNavigationManager.getSiteName();z(h)}function z(A,B){t.getCategories(A,function(C,D){if(C!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Error while loading categories.",D);return}w.getCategories(D);if(B){B()}})}function b(B,A){k(n.PercNavigationManager.getSiteName(),function(C){var D=C.userName;if(D!=null&&D!=n.PercNavigationManager.getUserName()){x("Category Tab is Locked",D+" is working on the Categories, do you want to override the lock?",function(E){if(E=="cancel"){window.location.reload()}else{f(B,A)}})}else{f(B,A)}})}function f(C,A){var B=p(C);t.editCategories(B,function(D,E){if(D!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Error",E);return}d.setDirty(false);j(A);z(A)})}function p(C){if(C===null){w.alertDialog("Error","Categories cannot by null.");return}var B=JSON.stringify(C);B=B.replace(/children/g,"childNodes").trim();var A=JSON.parse(B);A={title:"Categories",sitename:"xyz",topLevelNodes:A};return A}function k(A,B){t.getTabLockData(A,function(D,C){if(D!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Error",C);return}else{B(C)}d.setDirty(false)})}function j(A){t.lockCategoryTab(A,function(C,B){if(C!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Error",B);return}d.setDirty(false)});z(A)}function e(A){t.removeCatTabLock(A,function(B){if(B!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Error","Some problem occurred while removing the category tab lock!");return}d.setDirty(false)})}function x(C,B,D){var A=400;n.perc_utils.confirm_dialog({title:C,question:B,width:A,success:function(){j(n.PercNavigationManager.getSiteName());w.init();z(h);D("success")},cancel:function(){D("cancel")}})}function v(D,A,B){var C=p(D);t.publishToDTS(C,A,B,function(E,F){if(E!=n.PercServiceUtils.STATUS_SUCCESS){w.alertDialog("Publish Error","Error Occurred during publish to DTS!"+F);return}d.setDirty(false)})}})(jQuery);(function(d){var b=d.PercDirtyController;d.PercCategoryView=function(){var B={init:H,getCategories:Q,showSelectedCategoryEditor:w,alertDialog:D,editCategories:n,showNewCategoryEditor:P,displayCategoryDetails:q,deleteCategory:M,handleDelete:O,getCurrentDate:f,visitTreeForBaseProperties:A,manageDynaProps:k,getUpdatedCategoryArray:K,updateCategoryXML:p,save:J,findUpTargetNode:e,moveNodeUp:h,findDownTargetNode:I,moveNodeDown:L,doChildrenExist:N,publishToDTS:C};d(window).resize(function(){fixIframeHeight();fixTemplateHeight()});var x=d("#perc-category-tree");var z=d.PercCategoryController;var j=d.PercNavigationManager.getSiteName();var E;var R=false;var v=false;var t=false;var G=false;var y=false;var F=function(){var T="-";function S(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(S()+S()+T+S()+T+S()+T+S()+T+S()+S()+S())};z.init(B);function H(){d("#perc-categories-add-category-button").unbind().click(function(){if(!d.PercNavigationManager.isAdmin()){D("User should be an Admin","Only Admin users can add a new category");return}var S=x.dynatree("getActiveNode");if(S!=null&&S.data.title==="Add Top Level Categories"){R=false;w()}else{R=true;P()}});d("#perc-categories-delete-category-button").unbind().click(function(){if(!d.PercNavigationManager.isAdmin()){D("User should be an Admin","Only Admin users can delete a category");return}var S=x.dynatree("getTree");if(S.count()==1){D("Delete Category","Cannot delete node as 'Category Tree' cannot be empty!")}else{t=true;M()}});d("#perc-categories-edit-category-button").unbind().click(function(){if(!d.PercNavigationManager.isAdmin()){D("User should be an Admin","Only Admin users can edit the category");return}var S=x.dynatree("getActiveNode");var T=S.data.title;if(S.data.lastModifiedDate!=null&&S.data.publishDate!=S.data.lastModifiedDate){D("Publish Alert","Modifications made to this node are not published. If you choose to not publish these now, you may loose the changes. Please click 'Publish' button for publishing the previous changes now.");q(S)}R=false;w();if(T===S.data.title){y=true}});d("#perc-categories-moveup-button").unbind().click(function(){var S=x.dynatree("getActiveNode");var T=e(S);if(T!=null){h(S,T)}q(x.dynatree("getActiveNode"))});d("#perc-categories-movedown-button").unbind().click(function(){var S=x.dynatree("getActiveNode");var T=I(S);if(T!=null){L(S,T)}q(x.dynatree("getActiveNode"))});d("#perc-category-save").unbind().click(function(){J()});d("#perc-category-cancel").unbind().click(function(){var S=x.dynatree("getActiveNode");q(S)});d("#perc-category-title").unbind().click(function(){var S=x.dynatree("getActiveNode");S.deactivate()});d("#perc-categories-publish-staging").unbind().click(function(){var S=x.dynatree("getActiveNode");C(S,"Staging")});d("#perc-categories-publish-production").unbind().click(function(){var S=x.dynatree("getActiveNode");C(S,"Production")});d("#perc-categories-publish-both").unbind().click(function(){var S=x.dynatree("getActiveNode");C(S,"Both")})}function Q(W){var S=W;var U=JSON.stringify(S.Children);E=U;var T=U.replace(/Child/g,"children").trim();var V=JSON.parse(T);x.dynatree({selectMode:3,autoCollapse:true,children:V,onPostInit:function(Y,X){A();this.activateKey("_2")},onActivate:function(X){q(X)},dnd:{preventVoidMoves:true,onDragStart:function(X){return true},onDragEnter:function(Y,X){if(Y.parent!==X.parent){return false}return["before","after"]},onDrop:function(aa,Z,Y,ab,X){Z.move(aa,Y);v=true;J()}}})}function A(){var S=x.dynatree("getRoot");S.visit(function(T){if(T.data.initialViewCollapsed==="false"){T.expand(true)}})}function q(T){d("#perc-category-save-cancel-block").hide();d("#perc-category-name-field").prop("disabled",true);d("#perc-category-name-field").addClass("perc-category-field-readonly");if(T.data.title==="Add Top Level Categories"){d("#perc-category-name-field").val("")}else{d("#perc-category-name-field").val(T.data.title)}d("#perc-category-selectable-field").prop("disabled",true);d("#perc-category-selectable-field").addClass("perc-category-field-readonly");var S=T.data.selectable;if(S==true||S==="true"){d("#perc-category-selectable-field").prop("checked",true)}else{d("#perc-category-selectable-field").prop("checked",false)}d("#perc-category-show-in-page-field").prop("disabled",true);d("#perc-category-show-in-page-field").addClass("perc-category-field-readonly");var U=T.data.showInPgMetaData;if(U==="true"||U==true){d("#perc-category-show-in-page-field").prop("checked",true)}else{d("#perc-category-show-in-page-field").prop("checked",false)}d("#perc-category-createdby-field").val(T.data.createdBy);d("#perc-category-creationdt-field").val(T.data.creationDate);d("#perc-category-lstmodifiedby-field").val(T.data.lastModifiedBy);d("#perc-category-lstmodifieddt-field").val(T.data.lastModifiedDate)}function w(){d("#perc-category-name-field").prop("disabled",false);d("#perc-category-name-field").removeClass("perc-category-field-readonly");if((x.dynatree("getActiveNode")).data.title==="Add Top Level Categories"){d("#perc-category-name-field").val("")}d("#perc-category-selectable-field").prop("disabled",false);d("#perc-category-selectable-field").removeClass("perc-category-field-readonly");d("#perc-category-show-in-page-field").prop("disabled",false);d("#perc-category-show-in-page-field").removeClass("perc-category-field-readonly");d("#perc-category-save-cancel-block").show();d("#perc-category-name-field").focus()}function P(){d("#perc-category-name-field").prop("disabled",false);d("#perc-category-name-field").removeClass("perc-category-field-readonly");d("#perc-category-name-field").val("");d("#perc-category-selectable-field").prop("disabled",false);d("#perc-category-selectable-field").removeClass("perc-category-field-readonly");d("#perc-category-selectable-field").prop("checked",true);d("#perc-category-show-in-page-field").prop("disabled",false);d("#perc-category-show-in-page-field").removeClass("perc-category-field-readonly");var S=x.dynatree("getActiveNode");if(S==null){d("#perc-category-show-in-page-field").prop("checked",true)}else{if(S.data.showInPgMetaData==="true"||S.data.showInPgMetaData==true){d("#perc-category-show-in-page-field").prop("checked",true)}else{d("#perc-category-show-in-page-field").prop("checked",false)}}d("#perc-category-creationdt-field").val(f());d("#perc-category-creationdt-field").addClass("perc-category-field-readonly");d("#perc-category-save-cancel-block").show();d("#perc-category-name-field").focus()}function f(){var V=new Date();var U=V.getMonth()+1;var T=V.getDate();var S=V.getFullYear()+"-"+(U<10?"0":"")+U+"-"+(T<10?"0":"")+T+"T"+V.getHours()+":"+V.getMinutes()+":"+V.getSeconds()+"."+V.getMilliseconds();return S}function D(V,U,T){var S;if(T==null||T==undefined||T==""||T<1){T=400}d.perc_utils.alert_dialog({title:V,content:U,width:T,okCallBack:function(){if(t){O()}z.getCategories()}})}function O(){t=false;var S=x.dynatree("getActiveNode");parentNode=S.getParent();if(S.hasChildren()){S.visit(function(T){T.data.deleted=true})}S.data.deleted=true;S.data.lastModifiedBy=d.PercNavigationManager.getUserName();S.data.lastModifiedDate=f();p();S.remove();if(parentNode.data.title==null){x.dynatree("getTree").activateKey("_2")}else{x.dynatree("getTree").activateKey(parentNode.data.key)}q(x.dynatree("getActiveNode"));z.getCategories()}function n(U){if(U==null){U=N();if(U==null){U=x.dynatree("getRoot")}else{R=false}}var W=U.data.key;var S;if(!R){var aa=d.trim(d("#perc-category-name-field").val());if(U.data.title!="Add Top Level Categories"){if(y){U.data.previousCategoryName=U.data.title;y=false}U.data.lastModifiedBy=d.PercNavigationManager.getUserName();U.data.lastModifiedDate=f();if(G){U.data.publishDate=U.data.lastModifiedDate;G=false}}U.data.title=aa;var Z=d("#perc-category-selectable-field").prop("checked");if(Z===true){U.data.selectable="true"}else{U.data.selectable="false"}var Y=d("#perc-category-show-in-page-field").prop("checked");if(Y===true){U.data.showInPgMetaData="true"}else{U.data.showInPgMetaData="false"}if(U.data.createdBy==null){U.data.createdBy=d.PercNavigationManager.getUserName()}if(U.data.creationDate==null){U.data.creationDate=f()}}else{var T=F();var V=d("#perc-category-selectable-field").prop("checked");var X=d("#perc-category-show-in-page-field").prop("checked");S=U.addChild({id:T,title:d("#perc-category-name-field").val(),selectable:d("#perc-category-selectable-field").prop("checked"),showInPgMetaData:d("#perc-category-show-in-page-field").prop("checked"),createdBy:d.PercNavigationManager.getUserName(),creationDate:d("#perc-category-creationdt-field").val(),deleted:false,initialViewCollapsed:true})}if(R){x.dynatree("getTree").activateKey(S.data.key);U=S;R=false}else{x.dynatree("getTree").activateKey(W)}return U}function N(){var T;var S=x.dynatree("getRoot");S.visit(function(U){if(U.data.title==="Add Top Level Categories"){T=U}});return T}function M(){var S=x.dynatree("getActiveNode");if(S.hasChildren()===false){D("Delete Category","Are you sure you want to delete this category?")}else{D("Delete Category","This category and all its children will be deleted!")}}function k(){var S=x.dynatree("getRoot");var T=[];S.visit(function(V){var U=V.getParent();if(U.data.title==null){T.push(V.toDict(true,function(W){delete W.activate;delete W.addClass;delete W.expand;delete W.focus;delete W.hideCheckbox;delete W.icon;delete W.isFolder;delete W.isLazy;delete W.key;delete W.noLink;delete W.select;delete W.tooltip;delete W.unselectable}))}});return T}function K(T){var S=[];for(i=0;i<T.length;i++){S.push(T[i].data)}return S}function p(){var S=k();z.editCategories(S,j)}function J(){var T=x.dynatree("getActiveNode");if(!v){var U=n(T);T=U;var S=x.dynatree("getTree");S.activateKey(T.data.key);S.redraw()}v=false;p();q(T)}function e(V){var S=V.getParent();var W=null;var X=null;var U=0;if(S.data.title==null){var T=x.dynatree("getRoot");T.visit(function(Z){var Y=Z.getParent();if(Y.data.title==null){U++;if(V.data.id!=Z.data.id){W=Z}else{if(U>1){X=W;return false}return false}}});return X}else{S.visit(function(Y){U++;var Z=Y.getParent();if(Z.data.id==S.data.id){if(V.data.id!=Y.data.id){W=Y}else{if(U>1){X=W;return false}return false}}});return X}}function h(S,T){S.move(T,"before");v=true;J()}function I(V){var S=V.getParent();var W=null;var X=null;var U=0;if(S.data.title==null){var T=x.dynatree("getRoot");T.visit(function(Z){var Y=Z.getParent();if(Y.data.title==null){if(V.data.id!=Z.data.id){if(U>0){X=Z;return false}}else{U++}}});return X}else{S.visit(function(Y){var Z=Y.getParent();if(Z.data.id==S.data.id){if(V.data.id!=Y.data.id){if(U>0){X=Y;return false}}else{U++}}});return X}}function L(S,T){S.move(T,"after");v=true;J()}function C(T,S){var U=k();z.publishToDTS(U,S,j);G=true;J()}}})(jQuery);(function(b){b.PercEditWorkflowStepDialog=function(){var d={open:f,tempPossiblePermissions:["Submit","Reject","Approve","Publish","Notify"]};return d;var e=b.perc_utils;function f(F,L,p,h,D,I,t,B){b("#perc-edit-workflow-dialog").remove();b("#perc-workflow-addstep-dialog").remove();var H;var k=F?"perc-step-readonly":"perc-step-editable";var z=F?'readonly = ""':"";var y=I?"Configure Step":"New Step";var G={};H=b(" <div id='perc-workflow-addstep-dialog'>     <div id='perc-wfconfig-wrapper'>         <span style='position: relative; float: right; margin-top: -28px;'><label>* - denotes required field</label></span>         <div class = 'perc-required-field'>Step Name: <br/><input maxlength = '50' name='perc-wfstep-name' id='perc-wfstep-name' class = '"+k+"' type='text'"+z+"/></div>         <span style='color:red'></span>         <div><div style='font-weight:bold; margin-bottom:5px'>Roles:</div>         <div >Specify the permissions for each role.</div><br/>         <div id='perc-wfconfig-roles-wrapper' style='background:#fff'>  </div></div></div>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></div>").perc_dialog({buttons:G,percButtons:{Save:{click:function(){x()},id:"perc-wfstep-save"},Cancel:{click:function(){q();B()},id:"perc-wfstep-cancel"}},id:"perc-edit-workflow-dialog",width:620,height:585,title:y,modal:true});function x(){b("#perc-wfstep-save").unbind();C(L,h,p,D,function(){q();t()})}function q(){H.remove()}A(L,p);function A(O,N){b.PercUserService.getRoles(function(P,Q){if(P==b.PercServiceUtils.STATUS_ERROR){e.alertDialog("Error while loading roles.",Q);return}n(Q,O,N)})}function n(aa,ag,S){var T=aa;var ab=b('<table id = "perc-wfconfig-roles-table"></table>');var O=b("<tbody></tbody>");var ad=b('<tr class="perc-wfconfig-row-header"></tr>');b(ad).attr("class",w(0));var Q=b('<th align="left">Roles</th>');b(Q).attr("class",K(0));b(ad).append(Q);var P=S.permissionNames;var R=["Notify"];if(!b.isArray(P)){var Y=[];Y.push(P);P=Y}if(ag){var af=P.concat(R)}else{var af=b.PercEditWorkflowStepDialog().tempPossiblePermissions}b.each(af,function(ah){var ai=b("<th>"+this+"</th>");b(ai).attr("class",K(ah+1));b(ad).append(ai)});b(O).append(ad);for(var ae=0;ae<T.RoleList.roles.length;ae++){var N=b('<tr class="perc-wfconfig-row"></tr>');N.addClass(w(ae+1));var U=b('<td align:"left"><span class = "perc-roleName-wrapper perc-ellipsis"></span></td>');b(U).addClass(K(0));var Z=T.RoleList.roles[ae];N.attr("data",Z);var W=M(Z);b(U).find("span").append(Z).attr("title",Z);b(N).append(U);N.data("roleName",Z);for(var ac=0;ac<af.length;ac++){var V=b("<td></td>");if(W&&ac!=af.length-1){var X=b('<input type="checkbox" checked="true" disabled="true" />')}else{var X=b('<input type="checkbox" />')}if((af[ac]=="Notify"||af[ac]=="Publish")&&!W){b(X).attr("disabled",true)}b(X).click(function(){v(b(this),b(this).parent().parent())});b(V).append(X);b(V).attr("class",K(ac+1));b(V).attr("class","perc-"+af[ac].toLowerCase());b(N).append(V)}b(O).append(N)}b(ab).append(O);b("#perc-wfconfig-roles-wrapper").append(ab);if(ag){j(S);b("#perc-wfstep-name").blur()}b(".perc-checkall").change(function(){var ah=".perc-"+b(this).attr("data")+" input:not(:disabled)";if(b(this).attr("checked")){b("#perc-wfconfig-roles-table").find(ah).attr("checked","checked")}else{b("#perc-wfconfig-roles-table").find(ah).attr("checked",false)}})}function j(N){b("#perc-wfstep-name").val(N.stepName);var P=N.stepRoles;if(!b.isArray(P)){var O=[];O.push(P);P=O}b.each(P,function(){var Q=b(this)[0].roleName;var S=b(this)[0].roleTransitions;var R=b(this)[0].enableNotification;J(Q,S,R)})}function J(N,P,O){b(".perc-wfconfig-row").each(function(){var Q=this;if(b(Q).find("td.perc-column-0").text()==N){E(N,O,P,Q);return}})}function E(N,O,R,Q){var P=M(N);b(Q).find('td:not(".perc-column-0")').each(function(){var V=this;var U=b(V).attr("class");U=U.replace("perc-","");if(!b.isArray(R)){var W=[];W.push(R);R=W}for(i=0;i<R.length;i++){var T=R[i];T=T.transitionPermission.toLowerCase();if(U==T){b(V).find("input").attr("checked","checked");if(T=="publish"&&!P){b(V).find("input").removeAttr("disabled",false)}if(T=="approve"&&!P){b(Q).find("td.perc-publish input").removeAttr("disabled",false)}}}var S=b(Q).find("td.perc-notify input").removeAttr("disabled",false);if(O){S.attr("checked",true)}})}function v(N,O){if(N.parent().hasClass("perc-approve")){if(N.is(":checked")){b(O).find(".perc-publish input").removeAttr("disabled")}else{b(O).find(".perc-publish input").removeAttr("checked").attr("disabled",true)}}if(b(O).find("td:not('.perc-notify') input:checked").length>0){b(O).find(".perc-notify input").attr("disabled",false)}else{b(O).find(".perc-notify input").removeAttr("checked").attr("disabled",true)}if(N.parent().hasClass("perc-publish")&&N.is(":checked")){b(O).find(".perc-approve input").attr("checked","checked")}}function w(N){return"perc-row-"+N}function K(N){return"perc-column-"+N}function M(N){return N=="Admin"||N=="Designer"}function C(W,S,U,V,O){var T=b.trim(b("#perc-wfstep-name").val());if(T.indexOf("??")!=-1){var N="The step name contains invalid character sequence '??'.";b.perc_utils.alert_dialog({title:"Validation error",content:N});return}var P=[];if(W){var R=U.permissionNames}else{var R=b.PercEditWorkflowStepDialog().tempPossiblePermissions}b(".perc-wfconfig-row").each(function(){var Y=b(this);var X=Y.data("roleName");var ab=[];var Z=false;b.each(R,function(){var ac=this+"";if(Y.find(".perc-"+ac.toLowerCase()+" :checked").length>0){var ad={transitionPermission:ac};ab.push(ad)}});if(Y.find(".perc-notify input").is(":checked")){Z=true}if(ab.length>0){var aa={enableNotification:Z,roleName:X,roleTransitions:ab};P.push(aa)}});var Q={Workflow:{workflowName:S,previousStepName:V,workflowSteps:[{stepName:b.trim(b("#perc-wfstep-name").val()),stepRoles:P}]}};var T=b.trim(b("#perc-wfstep-name").val());b.PercBlockUI();if(W){b.PercWorkflowService().updateWorkflowStep(S,V,Q,function(Y,X){if(Y){b("#perc-wfstep-save").click(function(){x()});O()}else{b("#perc-wfstep-save").click(function(){x()});var Z=b.PercServiceUtils.extractDefaultErrorMessage(X[0]);b.perc_utils.alert_dialog({title:"Error Updating Step",content:Z})}b.unblockUI()})}else{b.PercWorkflowService().createNewWorkflowStep(S,T,Q,function(Y,X){if(Y){b("#perc-wfstep-save").click(function(){x()});O()}else{b("#perc-wfstep-save").click(function(){x()});var Z=b.PercServiceUtils.extractDefaultErrorMessage(X[0]);b.perc_utils.alert_dialog({title:"Error Creating Step",content:Z})}b.unblockUI()})}}}}})(jQuery);(function(k,n){var h={workflowObject:null,workflowName:null};k.PercWorkflowStepsView={init:w,refresh:q};function w(z){h.workflowName=z;k("#perc-workflow-steps-container table").addClass("perc-workflow-steps-rendering").removeClass("perc-workflow-steps-ready");p(h.workflowName,function(A){f(A,function(){j();k("#perc-workflow-steps-container table").removeClass("perc-workflow-steps-rendering").addClass("perc-workflow-steps-ready")})})}function q(z){k("#perc-workflow-steps-container table").addClass("perc-workflow-steps-rendering").removeClass("perc-workflow-steps-ready");p(z,function(A){f(A,function(){j();k("#perc-workflow-steps-container table").removeClass("perc-workflow-steps-rendering").addClass("perc-workflow-steps-ready")})})}function p(z,A){k.PercWorkflowService().getWorkflowObject(z,function(C,B){workflowObject=B[0];if(C&&(workflowObject!=null)&&(workflowObject!=undefined)){A(workflowObject)}else{}})}function f(T,C){k("#perc-workflow-steps-container table").html("");var T=T;var z=T.Workflow.workflowName;var P;var A=k('<tr><td><div id = "perc-workflow-column-wrapper" style = "float:left"></div></td></tr>');var B=k('<tr id = "perc-workflow-archvie-row"><td></td></tr>');k(A).attr("id","perc-wf-row-one");k("#perc-workflow-name").html(z);for(var S=0;S<T.Workflow.workflowSteps.length;S++){var E=T.Workflow.workflowSteps[S];var G=k('<div class ="perc-workflow-step" ><div class ="perc-workflow-step-label perc-ellipsis"></div><div class = "perc-action-button"></div></div>');G.data("workflowStep",E);var L=k('<div class = "perc-workflow-step-spacer"></div>');var F=k(G).find(".perc-workflow-step-label");var U=k('<div class ="perc-action-label"><span class = "perc-action-label-span-stepdown"></span><span class="perc-action-label-span-stepup"></span></div>');var J=k('<div class = "perc-workflow-edit-button"></div>');var I=k('<div class ="perc-workflow-step-roles"></div>');var H=k("<ul></ul>");var Q=true;P=E.stepName;k(G).attr("id",v(P));k(G).attr("name",P);k(F).html(P).attr("title",P);var D=E.stepRoles;if(!k.isArray(D)){var K=[];K.push(D);D=K}for(var R=0;R<D.length;R++){var O;var V=k('<li class="perc-ellipsis"></li>');if(R>2){V.addClass("perc-more-list perc-hidden").hide()}O=D[R].roleName;k(V).html(O).attr("title",O);k(H).append(V);if(R==2&&D.length>3){var N=k('<li class="perc-moreLink perc-visible">more</li>');k(H).append(N)}if(R==D.length-1&&D.length>3){var M=k('<li style = "display:none" class="perc-lessLink perc-ellipsis perc-hidden">less</li>');k(H).append(M)}}k(G).append(k(I).append(H),U);if(P!="Archive"){k(A).find("#perc-workflow-column-wrapper").append(G,L)}else{k(B).find("td").attr("align","right").append(G,L)}x(z,P,U,L,G,E)}k("#perc-workflow-table").append(A,B);k("#perc-workflow-archive").parent().prepend("<div id = 'perc-archive-action-text'></div>");C()}function x(A,G,B,F,z,C){var E=k(B).find(".perc-action-label-span-stepup");var D=k(B).find(".perc-action-label-span-stepdown");k(z).find(".perc-action-button").html('<span title="Configure Step" class="perc-reserved-step-config-bttn"></span>');k(z).find(".perc-reserved-step-config-bttn").data({isReservedStep:true});switch(G){case"Draft":E.text("Submit");F.addClass("perc-twoheaded-arrow");F.addClass("perc-twoheaded-arrow");F.append('<div class = "perc-create-new-step" title = "Add new step"></div>');F.attr("name",F.prev().attr("name"));break;case"Review":D.html("<br />Reject");E.html("Approve<br />Publish");F.addClass("perc-broken-arrow");break;case"Approved":D.html("Pending<br/>Live");break;case"Archive":D.text("Restore");break;default:D.text("Reject");E.text("Submit");F.addClass("perc-twoheaded-arrow");F.addClass("perc-twoheaded-arrow");F.append('<div class = "perc-create-new-step" title = "Add new step"></div>');F.attr("name",F.prev().attr("name"));k(z).find(".perc-action-button").html('<span title="Configure Step" class="perc-step-config-button"></span><span title="Delete Step" class="perc-step-delete-button"></span>');k(z).find(".perc-reserved-step-config-bttn").data({isReservedStep:false})}k(z).find(".perc-step-config-button, .perc-reserved-step-config-bttn").data({workflowStep:C});k(z).find(".perc-step-delete-button, .perc-reserved-step-config-bttn").data({workflowName:A,stepName:G})}function j(){k(".perc-create-new-step").click(function(){d(this)});k(".perc-step-delete-button").click(function(){t(this)});k(".perc-step-config-button, .perc-reserved-step-config-bttn").click(function(){e(this)});k(window).resize(function(){b()});k("#perc-workflow-steps-container .perc-moreLink, #perc-workflow-steps-container .perc-lessLink").click(function(){y(this)})}function d(C){var H=false;var G=k(C).parent().attr("name");var E=k("#perc-workflow-name").text();var z="";var F="";var A=false;var D=function(){q(E)};var B=function(){};k.PercEditWorkflowStepDialog().open(A,H,F,E,G,z,D,B)}function t(B){var z=k(B).data("workflowName");var C=k(B).data("stepName");var A={id:"perc-wf-step-delete",type:"YES_NO",title:"Confirm Step Deletion",question:"You are about to delete the step: '"+C+"'<br /><br />Are you sure you want to delete this step?",success:function(){k.PercBlockUI();k.PercWorkflowService().deleteWorkflowStep(z,C,function(E,D){if(!E){var F=k.PercServiceUtils.extractDefaultErrorMessage(D[0]);k.perc_utils.alert_dialog({title:"Error Deleting Step",content:F});return}q(z)});k.unblockUI()}};k.perc_utils.confirm_dialog(A)}function e(C){var H=true;var G=k(C).data("workflowStep").stepName;var E=k("#perc-workflow-name").text();var z=k(C).data("workflowStep").stepName;var F=k(C).data("workflowStep");var A=k(C).data("isReservedStep");var D=function(){q(E)};var B=function(){};k.PercEditWorkflowStepDialog().open(A,H,F,E,G,z,D,B)}function v(z){var A=z.toString().toLowerCase();A=A.replace(/[^a-zA-Z 0-9]+/g,"");A=A.replace(/ /g,"-");return"perc-workflow-"+A}function b(){var A=k("#perc-wf-row-one").find("td").width();k("#perc-wf-row-one").find("td").width("100%");var C=k("#perc-workflow-steps-container").innerWidth()-50;var B=k(".perc-workflow-step").width()+k(".perc-workflow-step-spacer").width();var z=Math.floor((C)/B);z=z*B;if(A>0){k("#perc-wf-row-one").find("td").width(z)}}function y(z){k(z).parent().find(".perc-more-list, .perc-moreLink, .perc-lessLink").toggle().toggleClass("perc-hidden perc-visible")}})(jQuery,jQuery.Percussion);var _canLog=true;function _log(k,j){if(!_canLog){return}var d=Array.prototype.slice.apply(arguments,[1]);var f=new Date();var b=f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+"."+f.getMilliseconds();d[0]=b+" - "+d[0];try{switch(k){case"info":window.console.info.apply(window.console,d);break;case"warn":window.console.warn.apply(window.console,d);break;default:window.console.log.apply(window.console,d);break}}catch(h){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){var iMax=5;while(el&&iMax--){if(el.dtnode){return el.dtnode}el=el.parentNode}return null}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this.isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="";if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){res+="<img src='"+opts.imagePath+data.icon+"' alt='' />"}else{if(data.icon===false){noop()}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?" title='"+data.tooltip+"'":"";if(opts.noLink||data.noLink){nodeTitle="<span style='display: inline-block;' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</span>"}else{nodeTitle="<a href='#' class='"+opts.classNames.title+"'"+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling();if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if((this.bExpanded||includeInvisible===true)&&this.childList){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){return a.data.title===b.data.title?0:a.data.title>b.data.title};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li)}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null;var info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this.isLoading=false;this.render();if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this.isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this.isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"";var cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn.indexOf("dynatree-custom-checkbox")!=-1){return"dynatree-custom-checkbox"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(){this._activate(true,true)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand();this.focus()}if(activate){this.activate()}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_fixSelectionState:function(){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);node._select(true,false,false)});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode){allChildsSelected=false;break}}if(allChildsSelected){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(deep&&opts.selectMode===3){this._fixSelectionState()}if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this.isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this.isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand();this.focus()}else{if(targetType==="checkbox"){this.toggleSelect();this.focus()}else{if(targetType!="dynatree-custom-checkbox"){this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){if(!$.browser.msie){aTag[0].focus()}}else{return true}}}}return false},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}return !handled},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}return this.parent.removeChild(this)},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}return this.removeChildren()}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){this.ul.removeChild(tn.li)}}this.childList=null}if(!isRecursiveCall){this.isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logInfo("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree;var opts=tree.options;var pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey==dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey==dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success;var orgError=ajaxOptions.error;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self)}self.tree.logInfo("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(XMLHttpRequest,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",XMLHttpRequest,"\n",errorThrown);if(orgError){orgError.call(options,self,XMLHttpRequest,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}this.parent.ul.removeChild(this.li);this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this];if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}}targetParent.ul.appendChild(this.li);if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}if(!prevParent.isDescendantOf(targetParent)){prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){this._log("DynaTreeStatus: initialize");if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read");this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){this._log("DynaTreeStatus: write");$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){this._log("addExpand(%o)",key);if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){this._log("clearExpand(%o)",key);var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){this._log("addSelect(%o)",key);if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){this._log("clearSelect(%o)",key);var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.1.0$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){_log("warn","Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){_log("warn","Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}if(!opts.imagePath){$("script").each(function(){var _rexDtLibName=/.*dynatree[^\/]*\.js$/i;if(this.src.search(_rexDtLibName)>=0){if(this.src.indexOf("/")>=0){opts.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/"}else{opts.imagePath="skin/"}logMsg("Guessing imagePath from '%s': '%s'",this.src,opts.imagePath);return false}})}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}else{if(this.divRoot){$(this.divRoot).remove()}}this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot;var isReloading=(opts.persist&&this.persistence.isReloading());var isLazy=false;var prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{var $ul=this.$tree.find(">ul:first").hide();this._createFromTag(root,$ul);$ul.remove()}}}this._checkConsistency();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy&&opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(opts.onPostInit){if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored when onPostInit was specified.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored when onPostInit was specified.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,false);if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode){opts.onPostInit.call(dtnode.tree,isReloading,true);if(callback){callback.call(dtnode.tree,"error")}}}this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this);var $liSpan=$li.find(">span:first");var title;if($liSpan.length){title=$liSpan.html()}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}var data={title:title,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null;var $target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var pos=$target.position();switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");pos.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");pos.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");pos.left+=8}this.$dndMarker.css({left:(pos.left)+"px",top:(pos.top)+"px"}).show()}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options;var dnd=this.options.dnd;var res=null;var nodeTag=$(node.span);var hitMode;switch(eventName){case"helper":var helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());helper.data("dtSourceNode",node);res=helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;res={over:(res!==false)&&((res===true)||(res==="over")||$.inArray("over",res)>=0),before:(res!==false)&&((res===true)||(res==="before")||$.inArray("before",res)>=0),after:(res!==false)&&((res===true)||(res==="after")||$.inArray("after",res)>=0)};ui.helper.data("enterResponse",res);break;case"over":var enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){break}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode)}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false);break;case"drop":hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.");return this._create()}_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",DynaTree.version,this.options.debugLevel);var opts=this.options;this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=getDtNodeFromElement(event.target);if(!dtnode){return true}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":return(o.onClick&&o.onClick.call(tree,dtnode,event)===false)?false:dtnode._onClick(event);case"dblclick":return(o.onDblClick&&o.onDblClick.call(tree,dtnode,event)===false)?false:dtnode._onDblClick(event);case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){if(typeof event=="undefined"&&window.event==null){return false}event=$.event.fix(event||window.event);var dtnode=getDtNodeFromElement(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,icon:null,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,connectToDynatree:true,helper:function(event){var sourceNode=getDtNodeFromElement(event.target);return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var prevTargetNode=ui.helper.data("dtTargetNode")||null;var targetNode=getDtNodeFromElement(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){noop()}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable");var sourceNode=ui.helper.data("dtSourceNode")||null;var targetNode=ui.helper.data("dtTargetNode")||null;var mouseDownEvent=draggable._mouseDownEvent;var eventType=event.type;var dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}})(jQuery);(function(k){k.PercFolderService={getFoldersWithWorkflow:h,assignFoldersWithWorkflow:f,startAssociatedFoldersJob:j,getAssociatedFoldersJobStatus:b,getFolderPagesById:e,cancelAssociatedFoldersJob:n,isWorkflowAssignmentInProgress:d};function h(v,q,w,p){var t=k.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW+"/"+encodeURI(q)+"/"+v;if(p){t=t+"?includeFoldersWithDifferentWorkflow=true"}k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_GET,false,function(y,x){if(y==k.PercServiceUtils.STATUS_SUCCESS){w(k.PercServiceUtils.STATUS_SUCCESS,x.data)}else{var z=k.PercServiceUtils.extractDefaultErrorMessage(x.request);w(k.PercServiceUtils.STATUS_ERROR,z)}})}function j(v,q,w,p){var t=k.perc_paths.FOLDERMGT_START_ASSOCIATED_FOLDERS_JOB+encodeURI(q)+"/"+v;if(p){t=t+"?includeFoldersWithDifferentWorkflow=true"}k.PercServiceUtils.makeJsonRequest(t,k.PercServiceUtils.TYPE_GET,false,function(y,x){if(y==k.PercServiceUtils.STATUS_SUCCESS){w(k.PercServiceUtils.STATUS_SUCCESS,x.data)}else{var z=k.PercServiceUtils.extractDefaultErrorMessage(x.request);w(k.PercServiceUtils.STATUS_ERROR,z)}})}function b(p,t){var q=k.perc_paths.FOLDERMGT_GET_ASSOCIATED_FOLDERS_JOB_STATUS+p;k.PercServiceUtils.makeJsonRequest(q,k.PercServiceUtils.TYPE_GET,false,function(w,v){if(w==k.PercServiceUtils.STATUS_SUCCESS){t(k.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=k.PercServiceUtils.extractDefaultErrorMessage(v.request);t(k.PercServiceUtils.STATUS_ERROR,x)}})}function f(p,t,q){k.PercServiceUtils.makeJsonRequest(k.perc_paths.FOLDERMGT_FOLDERS_WITH_WORKFLOW_ASSIGN,k.PercServiceUtils.TYPE_POST,false,function(w,v){if(w==k.PercServiceUtils.STATUS_SUCCESS){t(k.PercServiceUtils.STATUS_SUCCESS,v.data)}else{var x=k.PercServiceUtils.extractDefaultErrorMessage(v.request);t(k.PercServiceUtils.STATUS_ERROR,x)}},p,q,5000)}function e(p,q){k.PercServiceUtils.makeJsonRequest(k.perc_paths.FOLDERMGT_FOLDER_PAGES+p,k.PercServiceUtils.TYPE_GET,false,function(v,t){if(v==k.PercServiceUtils.STATUS_SUCCESS){q(true,t.data)}else{var w=k.PercServiceUtils.extractDefaultErrorMessage(t.request);q(false,w)}})}function n(p,t,v){var q=k.perc_paths.FOLDERMGT_CANCEL_ASSOCIATED_FOLDERS_JOB+p;k.PercServiceUtils.makeJsonRequest(q,k.PercServiceUtils.TYPE_GET,t,function(x,w){if(x==k.PercServiceUtils.STATUS_SUCCESS){v(k.PercServiceUtils.STATUS_SUCCESS,w.data)}else{var y=k.PercServiceUtils.extractDefaultErrorMessage(w.request);v(k.PercServiceUtils.STATUS_ERROR,y)}})}function d(q){var p=k.perc_paths.FOLDERMGT_IS_WORKFLOW_ASSIGN_PROGRESS;k.PercServiceUtils.makeRequest(p,k.PercServiceUtils.TYPE_GET,false,function(v,t){if(v==k.PercServiceUtils.STATUS_SUCCESS){q(t.data)}else{var w=k.PercServiceUtils.extractDefaultErrorMessage(t.request);k.perc_utils.info(w);q(false)}})}})(jQuery);(function(f){f.PercDataTree={init:z,updateTree:B,enableAddButton:H,disableAddButton:A,disableButtons:d,enableButtons:k};var t={instanceIdSuffix:undefined,listItem:[],addTitle:"Add",enableAdd:true,collapsible:false,levelLimit:undefined,createItem:function(){},showCheckboxes:false,addHeader:true,showRoots:true,cookieId:"dynatree-checkbox",idPrefix:"dynatree-checkbox-",customOnRender:function(){},customOnExpand:function(){}};var e="perc-datatree-label";var G="perc-itemname-treelist";var j="perc-wf-minmax";var v="perc-item-add-button";var h="perc-items-minimizer";var q="perc-items-maximizer";var x="perc-item-disabled";var p="perc-children-other-workflow";var C="perc-item-all-same-workflow";var x="perc-item-disabled";var y="datatree";var F="Sites";var E="Assets";var D=13;var b=5;var n="";function z(J,M){var L=f.extend(true,{},t,M);if(L.instanceIdSuffix==undefined){throw"instanceIdSuffix must be defined."}L.instanceId=y+L.instanceIdSuffix;J.data("options",L);n=L.selectedWorkflow;if(L.addHeader){var N=f('<div class="'+e+'" />').html(L.title);J.append(N);L.collapsible&&N.append(f('<span style="float: left;" class ="'+j+" "+h+'" />'));L.enableAdd&&N.append(f('<div class="'+v+'"/>').attr("title",L.addTitle));J.find("."+j).unbind().click(function(){f(this).toggleClass(h).toggleClass(q);J.find("."+G).slideToggle("fast")});J.find("."+v).unbind().click(function(){var Q=J.data("options");if(typeof(Q.createItem)=="function"){Q.createItem()}})}J.append(f('<div id="'+L.instanceId+'" class="'+G+'" />'));if(L.showRoots){var O={title:F,key:F,isFolder:true,isLazy:false,expand:true,children:[],icon:false};var K={title:E,key:E,isFolder:true,isLazy:false,expand:true,children:[],icon:false};var P=[O,K]}var I=f("#"+L.instanceId).width();f("#"+L.instanceId).dynatree({children:(L.showRoots?P:[]),noLink:true,clickFolderMode:3,checkbox:L.showCheckboxes,cookieId:"dynatree-"+L.instanceId,idPrefix:"dynatree-"+L.instanceId+"-",onRender:function(S,Q){span=f(Q);var R=span.parents("ul").length-1;span.attr("for",S.data.title).css("padding-left",R*D+b).find(".dynatree-title").addClass("perc-ellipsis");if(!f(span[0]).hasClass("dynatree-has-children")){span.find(".dynatree-title").css("padding-left","13px")}},onExpand:function(Q,R){L.customOnExpand(R)},onSelect:L.onSelect,onQuerySelect:L.onQuerySelect});if(L.listItem!=undefined&&typeof(L.listItem)=="object"){B(J,L.listItem)}}function B(K,J,N){options=K.data("options");if(N!=undefined){n=N}var I=f(K).find("#"+options.instanceId).dynatree("getTree");var P=1;if(options.showRoots){var O=I.getNodeByKey(F);var M=I.getNodeByKey(E);M.removeChildren();O.removeChildren();J[0]&&J[0].folderItem&&w(O,J[0].folderItem,options.levelLimit,P);J[1]&&J[1].folderItem&&w(M,J[1].folderItem,options.levelLimit,P)}else{var L=I.getRoot();L.removeChildren();J[0]&&J[0].folderItem&&w(L,J[0].folderItem,options.levelLimit,P)}I.visit(function(Q){options.customOnRender(Q)},false)}function w(J,I,K,L){if(K!=undefined&&L>K){return}I=f.perc_utils.convertCXFArray(I);if(I&&I instanceof Array&&I.length>0){f.each(I,function(O){var N={title:this.name,key:this.id,tooltip:this.path,isFolder:true,isLazy:false,children:[],addClass:"",icon:false};var P=typeof(this.workflowName)!="undefined";if(options.showCheckboxes&&P&&this.workflowName!=n){N.unselectable=true;N.title=N.title+" ("+this.workflowName+")";N.addClass=N.addClass+" "+x}if(options.showCheckboxes&&P&&this.workflowName==n){N.select=true}if(!this.allChildrenAssociatedWithWorkflow||this.workflowName!=n){N.addClass=N.addClass+" "+p}else{if(options.showCheckboxes&&N.select==true){N.addClass=N.addClass+" "+C}}N.workflowName=this.workflowName;N.allChildrenAssociatedWithWorkflow=this.allChildrenAssociatedWithWorkflow;J.addChild(N);var M=(this.children.child instanceof Array);if(M){this.children!=""&&w(J.getChildren()[O],this.children.child,K,L+1)}else{this.children!=""&&w(J.getChildren()[O],[this.children.child],K,L+1)}});return}}function H(I){var J=I.data("options");if(J.enableAdd){I.find("."+v).removeClass("."+x).unbind().click(function(){if(typeof(J.createItem)=="function"){J.createItem()}})}}function A(I){var J=I.data("options");if(J.enableAdd){I.find("."+v).addClass("."+x).unbind()}}function k(I){H(I)}function d(I){A(I)}})(jQuery);(function(k){k.perc_assign_workflow_sites_folder_dialog={createDialog:q,WORKFLOW_ASSIGNMENT_INPROCESS_MESSAGE:"Your changes were unable to be saved. The system is currently assigning pages and assets to workflow. During this process access to workflow administration is prevented to avoid conflicting changes.  You can check the status of the assignment process using the Process Monitor on the Dashboard."};var n;var K;var C,H;var G;var d;var y;var t=[];function q(R,O){n=K=C=H=null;var Q={Save:{id:"perc-assign-workflow-sites-folder-dialog-save",click:function(){var aa=jQuery("#datatree-workflow-sites").dynatree("getTree").getSelectedNodes();var X=jQuery("#datatree-workflow-assets").dynatree("getTree").getSelectedNodes();var Z=aa;k.merge(Z,X);var Y=[];for(i=0;i<Z.length;i++){Y.push(Z[i].data.key)}var ac=x(Y,R);var W=t;var U={workflowAssignment:[{workflowName:R,assignedFolders:Y,unassignedFolders:ac,appliedFolders:W}]};var V=k(this);k.PercBlockUI();function ab(){k.PercFolderService.assignFoldersWithWorkflow(U,function(ae,ad){if(ae==k.PercServiceUtils.STATUS_ERROR){k.perc_utils.alert_dialog({title:"Warning",content:ad})}else{if(typeof(O)!="undefined"&&typeof(O)=="function"){O()}V.remove()}k.unblockUI()},function(){V.remove();k.unblockUI()})}k.PercFolderService.isWorkflowAssignmentInProgress(function(ad){if(ad=="true"){k.unblockUI();k.perc_utils.alert_dialog({title:"Warning",content:k.perc_assign_workflow_sites_folder_dialog.WORKFLOW_ASSIGNMENT_INPROCESS_MESSAGE,okCallBack:function(){window.location.reload()}})}else{ab()}})}},Cancel:{id:"perc-assign-workflow-sites-folder-dialog-cancel",click:function(){k(this).remove()}}};t=[];var P="Apply the workflow setting of the selected folder to all of its contents.";d=R;k(G).remove();G=k('<div id="perc-assign-workflow-wrapper"></div>').css("maxHeight","350px").css("background-color","white").css("padding-top","0px");G.append('<div class="perc-loading-warning-message" style="margin-left:20px;margin-bottom:5px;"><img src="../css/dynatree/skin/loading.gif" style="vertical-align:bottom"/> Loading: Please wait while site and asset folders are loaded. For large sites, this may take several minutes.</div>');G.append(k('<div id="perc-assign-workflow-sites-title-wrapper"></div>').append(k('<div id="perc-assign-workflow-sites-title"></div>').append(k('<div id="perc-assign-workflow-sites-expander" style="display: inline;"></div>').append(k('<div id="perc-assign-workflow-sites-title-span" class="perc-assign-workflow-expander-image collapsed">&nbsp;</div>')).append("<span>Sites</span>").click(function(){k("#perc-assign-workflow-sites-tree-wrapper").toggle();k("#perc-assign-workflow-sites-title-span").toggleClass("collapsed");w("sites")})).append(k('<span class="perc-assign-workflow-sites-apply-top">Apply <span class="perc-assign-workflow-sites-apply-top-icon" title="'+P+'"/></span>'))));var M=k('<div id="perc-assign-workflow-sites-tree"></div>');G.append(k('<div id="perc-assign-workflow-sites-tree-wrapper"></div>').append(M));G.append(k('<div id="perc-assign-workflow-assets-title-wrapper"></div>').append(k('<div id="perc-assign-workflow-assets-title"></div>').append(k('<div id="perc-assign-workflow-assets-expander" style="display: inline;"></div>').append(k('<div id="perc-assign-workflow-assets-title-span" class="perc-assign-workflow-expander-image collapsed">&nbsp;</div>')).append("<span>Assets</span>").click(function(){k("#perc-assign-workflow-assets-tree-wrapper").toggle();k("#perc-assign-workflow-assets-title-span").toggleClass("collapsed");w("assets")})).append(k('<span class="perc-assign-workflow-assets-apply-top">Apply <span class="perc-assign-workflow-assets-apply-top-icon" title="'+P+'"/></span>'))));var L=k('<div id="perc-assign-workflow-assets-tree"></div>');G.append(k('<div id="perc-assign-workflow-assets-tree-wrapper"></div>').append(L));G.perc_dialog({title:"Assigned sites & folders",id:"perc-assign-workflow-sites-folder-dialog",width:686,maxWidth:1200,resizable:true,modal:true,percButtons:Q,resizeStop:function(U,V){k("#perc-assign-workflow-wrapper").css("maxHeight","100%")}});var S={instanceIdSuffix:"-workflow-sites",addHeader:false,collapsible:false,showCheckboxes:true,selectedWorkflow:R,showRoots:false,customOnRender:J,customOnExpand:b,onSelect:z};var T={instanceIdSuffix:"-workflow-assets",addHeader:false,collapsible:false,showCheckboxes:true,selectedWorkflow:R,showRoots:false,customOnRender:J,customOnExpand:b,onSelect:z};var N=k("#perc-assign-workflow-sites-tree");var L=k("#perc-assign-workflow-assets-tree");k.PercDataTree.init(N,S);k.PercDataTree.init(L,T);A(R);M.append(k("<span>Apply</span>").addClass("perc-assign-workflow-sites-apply-bottom").hide());L.append(k("<span>Apply</span>").addClass("perc-assign-workflow-assets-apply-bottom").hide());k("#perc-assign-workflow-wrapper").after('<div class="perc-assign-workflow-warning">Processing will be completed in the background and may take a while to complete. <br /> Checked out items will be excluded.</div>');return G}function A(L){k.PercFolderService.startAssociatedFoldersJob("Sites",L,function(N,M){if(N==k.PercServiceUtils.STATUS_ERROR){k.perc_utils.alert_dialog({title:"Error",content:M});return false}C=M;k.PercFolderService.startAssociatedFoldersJob("Assets",L,function(P,O){if(P==k.PercServiceUtils.STATUS_ERROR){k.perc_utils.alert_dialog({title:"Error",content:O});return false}H=O;B();D()},true)},true)}function B(){if(C==null){return}k.PercFolderService.getAssociatedFoldersJobStatus(C,function(M,L){if(M==k.PercServiceUtils.STATUS_ERROR){k.perc_utils.alert_dialog({title:"Error loading site folders",content:L});return false}var M=L.GetAssginedFoldersJobStatus.status;if(M!="100"){setTimeout(B,1000);return}C=null;n={};n.folderItem=L.GetAssginedFoldersJobStatus.folderItems;e()})}function D(){if(H==null){return}k.PercFolderService.getAssociatedFoldersJobStatus(H,function(M,L){if(M==k.PercServiceUtils.STATUS_ERROR){k.perc_utils.alert_dialog({title:"Error loading asset folders",content:L});return false}var M=L.GetAssginedFoldersJobStatus.status;if(M!="100"){setTimeout(D,1000);return}H=null;K={};K.folderItem=L.GetAssginedFoldersJobStatus.folderItems;e()})}function e(){if(n!=null&&K!=null){var L=k("#perc-assign-workflow-sites-tree");var M=k("#perc-assign-workflow-assets-tree");if(n.folderItem){k.PercDataTree.updateTree(L,[n]);k.each(k("#datatree-workflow-sites").dynatree("getRoot").childList,function(){b(this)});if(n.folderItem.length>0){k("span.perc-assign-workflow-sites-apply-bottom").show()}}if(K.folderItem){k.PercDataTree.updateTree(M,[K]);k.each(k("#datatree-workflow-assets").dynatree("getRoot").childList,function(){b(this)});if(K.folderItem.length>0){k("span.perc-assign-workflow-assets-apply-bottom").show()}}k(".perc-loading-warning-message").addClass("perc-loading-warning-message-hidden").removeClass("perc-loading-warning-message")}}function w(L){if(k("#perc-assign-workflow-"+L+"-title-span").hasClass("collapsed")){k(".perc-assign-workflow-"+L+"-apply-top").show();if((L=="sites"&&n.folderItem&&n.folderItem.length>0)||(L=="assets"&&K.folderItem&&K.folderItem.length>0)){k(".perc-assign-workflow-"+L+"-apply-bottom").show()}}else{k(".perc-assign-workflow-"+L+"-apply-top").hide();k(".perc-assign-workflow-"+L+"-apply-bottom").hide()}}function J(N){span=k(N.span);if(span.find(".dynatree-custom-checkbox").length==0){var L=k("<span />").addClass("dynatree-custom-checkbox").click(function(O){if(!k(O.currentTarget).hasClass("dynatree-custom-checkbox-disabled")){k(O.currentTarget).toggleClass("dynatree-custom-checkbox-selected");if(k(O.currentTarget).hasClass("dynatree-custom-checkbox-selected")){if(k.inArray(N.data.key,t)==-1){t.push(N.data.key)}p(true,N)}else{t.splice(k.inArray(N.data.key,t),1);p(false,N)}}v()});if(span.hasClass("perc-item-disabled")){L.addClass("dynatree-custom-checkbox-disabled")}else{if(k.inArray(N.data.key,t)!=-1){L.addClass("dynatree-custom-checkbox-selected")}}var M=k("<span />").addClass("dynatree-custom-checkbox-container").append(L);span.append(M)}}function b(M){if(!M.isSelected()){var L=F(M);if(L){k(M.span).addClass("dynatree-partsel")}else{k(M.span).removeClass("dynatree-partsel")}}J(M);M.visit(function(N){if(!N.isSelected()){var O=F(N);if(O){k(N.span).addClass("dynatree-partsel")}else{k(N.span).removeClass("dynatree-partsel")}}J(N)})}function f(L){k(L.span).find(".dynatree-custom-checkbox").addClass("dynatree-custom-checkbox-selected");if(k.inArray(L.data.key,t)==-1){t.push(L.data.key)}}function j(L){k(L.span).find(".dynatree-custom-checkbox").removeClass("dynatree-custom-checkbox-selected");t.splice(k.inArray(L.data.key,t),1)}function p(O,P){var L=P.getChildren();var N;if(typeof(L)=="undefined"||L==null){return}for(var M=0;M<L.length;M++){N=L[M];if(!k(N.span).hasClass("perc-item-disabled")){if(O){f(N)}else{j(N)}}p(O,N)}}function z(O,P){E(P);f(P);v();var L=P.getChildren();var N;if(typeof(L)=="undefined"||L==null){return}for(var M=0;M<L.length;M++){N=L[M];N.select(O);if(!k(N.span).hasClass("perc-item-disabled")){f(N)}}}function v(){if(t.length>0){k(".perc-assign-workflow-warning").show()}else{k(".perc-assign-workflow-warning").hide()}}function E(L){span=k(L.span);parentSpan=k(L.getParent().span);allMyChildren=span.next().find(".dynatree-checkbox");selectedMyChildren=span.next().find(".dynatree-selected");selectedChildren=parentSpan.next().find(".dynatree-selected");if(L.isSelected()&&allMyChildren.length==selectedMyChildren.length){span.addClass("perc-item-all-same-workflow")}else{span.removeClass("perc-item-all-same-workflow")}if(!L.getParent().isSelected()){if(selectedChildren.length>0){parentSpan.addClass("dynatree-partsel")}else{parentSpan.removeClass("dynatree-partsel")}}if(L.getParent().getParent()!=null){E(L.getParent())}}function F(N){if(N.isSelected()){return true}if(N.childList==null){return false}var L=false;for(var M=0;M<N.childList.length;M++){L=L||F(N.childList[M])}return L}function x(N,L){var M=h(L);for(i in N){var O=k.inArray(N[i],M);if(O>-1){M.splice(O,1)}}return M}function h(L){var M=[];if(n.folderItem){k(n.folderItem).each(function(N,O){I(O,L,M)})}if(K.folderItem){k(K.folderItem).each(function(N,O){I(O,L,M)})}return M}function I(M,L,N){if(M.workflowName&&M.workflowName==L){N.push(M.id)}if(typeof(M.children)=="undefined"||k.isEmptyObject(M.children)){return}if(recursive_case=typeof(M.children.child.length)=="undefined"){I(M.children.child,L,N)}else{k(M.children.child).each(function(O,P){I(P,L,N)})}}})(jQuery);(function(d,b){d.PercWorkflowView=function(){var q=d.PercDirtyController;var N=d("#perc-workflows-list");var Y="";var w,A,R,B;var h=new Map();var j={init:X,showNewWorkflowEditor:y,selectWorflow:L,cancelJobs:M,isWorkflowAvailable:true};var U="#perc-workflows-assigned-sites-folders";var Z=d(U);var H="Your changes were unable to be saved. The system is currently assigning pages and assets to workflow. During this process access to workflow administration is prevented to avoid conflicting changes.  You can check the status of the assignment process using the Process Monitor on the Dashboard.";function y(){d(".perc-wf-default").find("input").removeAttr("checked").removeAttr("disabled");O();F();E("perc-publish-now-roles-control-new",null);d("#perc-wf-new-editor").show();d("#perc-new-workflow-name").val("").focus().change(function(){q.setDirty(true,"workflow")})}function M(ab){if(R){d.perc_utils.info("Cancelling assigned site folders job");e(R,ab)}if(B){d.perc_utils.info("Cancelling assigned asset folders job");e(B,ab)}}function e(ab,ac){if(!ab){return}d.perc_utils.info("Cancelling assigned folders job:"+ab);var ad=function(af,ae){if(af==d.PercServiceUtils.STATUS_ERROR){d.perc_utils.info(ae)}else{d.perc_utils.info("Cancelled assigned folders job:"+ab)}};d.PercFolderService.cancelAssociatedFoldersJob(ab,ac,ad)}function I(){d.PercDataList.disableButtons(N)}function n(){d("#perc-wf-save-cancel-block").show()}function aa(){d("#perc-workflow-steps-container table").html("");I();n();y();d.PercDataList.disableButtons(N);d.PercDataList.unhighlightAllItems(N)}function V(){d(".perc-wf-default").find("input").removeAttr("checked").removeAttr("disabled");d(".perc-step-config-button, .perc-reserved-step-config-bttn, .perc-step-delete-button, .perc-create-new-step").unbind().click();d(".perc-create-new-step").addClass("perc-step-disable");d(".perc-step-delete-button").addClass("perc-step-delete-disable");d(".perc-step-config-button").addClass("perc-step-config-disable");d(".perc-reserved-step-config-bttn").addClass("perc-reserved-step-config-disable");F();d("#perc-wf-update-editor").show();var ab=d("#perc-workflow-steps-container").data("workflowName");E("perc-publish-now-roles-control",ab);if(defaultWorkflow==ab){d(".perc-wf-default").find("input").attr("checked","checked").attr("disabled",true)}d("#perc-update-workflow-name").val(ab).focus().change(function(){q.setDirty(true,"workflow")});d(".perc-wf-default").find("input").change(function(){q.setDirty(true,"workflow")});d.PercDataList.disableButtons(N)}function v(){d.PercDataList.enableButtons(N);d("#perc-workflow-name").val("");d("#perc-wf-new-editor").hide();q.setDirty(false)}function O(){d.PercDataList.enableButtons(N);d("#perc-workflow-name").val("");d("#perc-wf-update-editor").hide();d("#perc-wf-name-wrapper").show();q.setDirty(false)}function F(){d.PercDataList.enableButtons(N);d("#perc-wf-update-editor").hide();d("#perc-wf-name-wrapper").hide();q.setDirty(false)}function Q(ab){var ad=d(".perc-itemname[title='"+ab+"']").prev().attr("title");if(typeof(ad)=="undefined"){ad=d(".perc-itemname[title='"+ab+"']").next().attr("title")}if(ad=="more"){ad=d(".perc-moreLink").prev().attr("title")}var ac={id:"perc-wf-delete",title:"Confirm Workflow Deletion",type:"YES_NO",question:"You are about to delete the workflow: '"+ab+"'<br /><br />Are you sure you want to delete this workflow?",success:function(){d.PercBlockUI();d.PercWorkflowService().deleteWorkflow(ab,function(af,ae){if(af){t(ad)}else{var ag=d.PercServiceUtils.extractDefaultErrorMessage(ae[0]);d.perc_utils.alert_dialog({title:"Error Deleting Workflow",content:ag})}d.unblockUI()})}};d.perc_utils.confirm_dialog(ac)}function P(ab){var ac=N.find(".perc-itemname[title='"+ab+"']").is(".perc-hidden");if(d("#perc-wf-min-max").is(".perc-items-maximizer")){d("#perc-wf-min-max").click()}if(ac){d("#perc-workflows-list").find(".perc-moreLink").click()}}function L(ab){N.find(".perc-itemname[title='"+defaultWorkflow+"']").addClass("perc-default-wf-list-marker");d(".perc-default-wf-marker").hide();var ac=ab==N.find(".perc-itemname.perc-item-selected").attr("title");d("#perc-workflow-steps-container").data("workflowName",ab);v();O();Y=ab;d.PercDataList.selectItem(N,ab);d.PercWorkflowStepsView.refresh(ab);d("#perc-wf-edit").removeClass("perc-wf-edit-disable");previousWorkflowName=d(".perc-itemname[title='"+ab+"']").prev().attr("title");d("#perc-wf-edit").unbind().click(function(){V()});N.find(".perc-item-delete-button").unbind().click(function(){Q(ab)});if(ab==defaultWorkflow){d(".perc-default-wf-marker").show();N.find(".perc-item-delete-button").unbind().click();N.find(".perc-item-delete-button").addClass("perc-item-disabled")}if(!ac){D(ab)}}function G(){var ab=d("#perc-new-workflow-name").val();if(ab.indexOf("??")!=-1){var af="The workflow name contains invalid character sequence '??'.";d.perc_utils.alert_dialog({title:"Validation error",content:af});return}var ae=d(".perc-wf-default input").is(":checked");var ad={Workflow:{defaultWorkflow:ae,workflowName:ab,previousStepName:"",workflowDescription:"",stagingRoleNames:z(),previousWorkflowName:""}};function ac(){d.PercWorkflowService().createWorkflow(ab,ad,function(ah,ag){if(ah){t(d.trim(ab))}else{var ai=d.PercServiceUtils.extractDefaultErrorMessage(ag[0]);d.perc_utils.alert_dialog({title:"Error Creating Workflow",content:ai})}d.unblockUI()})}d.PercBlockUI();if(ae){d.PercFolderService.isWorkflowAssignmentInProgress(function(ag){if(ag=="true"){d.unblockUI();d.perc_utils.alert_dialog({title:"Warning",content:H,okCallBack:function(){q.setDirty(false);window.location.reload()}})}else{ac()}})}else{ac()}}function S(){var ai=d("#perc-workflow-steps-container").data("workflowName");var af=d("#perc-update-workflow-name").val();var ae=d(".perc-wf-default input").is(":checked");if(af.indexOf("??")!=-1){var ag="The workflow name contains invalid character sequence '??'.";d.perc_utils.alert_dialog({title:"Validation error",content:ag});return}var ac={Workflow:{defaultWorkflow:ae,workflowName:af,previousStepName:"",workflowDescription:"",stagingRoleNames:z(),previousWorkflowName:ai}};d.PercBlockUI();function ad(){d.PercWorkflowService().updateWorkflow(ai,ac,function(ak,aj){if(ak){t(d.trim(af))}else{var al=d.PercServiceUtils.extractDefaultErrorMessage(aj[0]);d.perc_utils.alert_dialog({content:al,title:"Error",okCallBack:function(){t()}})}d.unblockUI()})}var ah=d(".perc-default-wf-list-marker").attr("title");var ab=ae&&ah!=ai;if(ab){d.PercFolderService.isWorkflowAssignmentInProgress(function(aj){if(aj=="true"){d.unblockUI();d.perc_utils.alert_dialog({title:"Warning",content:H,okCallBack:function(){q.setDirty(false);window.location.reload()}})}else{ad()}})}else{ad()}}function z(){var ac=self.listEdit.getListItems();var ab="";for(var ad in ac){ab=ab+ac[ad]+";"}if(ab.length>0){ab=ab.substring(0,ab.length-1)}return ab}function E(ab,ac){var ad=[];if(ac){if(d.trim(h.get(ac))!==""){ad=h.get(ac).split(";")}}d.PercUserService.getRoles(function(ae,af){if(ae==d.PercServiceUtils.STATUS_ERROR){utils.alertDialog("Error while loading roles.",af);return}self.listEdit=d.PercListEditorWidget({container:ab,items:ad,results:d.perc_utils.convertCXFArray(af.RoleList.roles),toggler:d(".perc-wf-default").find("input"),title1:I18N.message("perc.ui.rolePropsDialog.title@Role Properties"),title2:I18N.message("perc.ui.rolePropsDialog.title@Role Staging Actions"),help:I18N.message("perc.ui.rolePropsDialog.title@Enter a role")})})}function t(ab){W(function(ad,ac){if(ad){d.PercDataList.updateList(N,ac);v();O();L(ab);P(ab)}else{}})}function p(){q.setDirty(false);v();O();L(Y)}function f(){d("#perc-wf-save").unbind().click(function(){G()});d("#perc-wf-cancel, #perc-wf-update-cancel").unbind().click(function(){p()});d("#perc-wf-edit").unbind().click(function(){V()});d("#perc-wf-update-save").unbind().click(function(){S()})}function W(ab){d.PercWorkflowService().getWorkflows(function(ae,ac){if(ae){var af=[];if(!d.isArray(ac[0].Workflow)){af.push(ac[0].Workflow)}else{af=ac[0].Workflow}var ad=[];d.each(af,function(){ad.push(this.workflowName);h.set(this.workflowName,this.stagingRoleNames);if(this.defaultWorkflow){defaultWorkflow=this.workflowName}});ab(true,ad)}else{ab(false,d.PercServiceUtils.extractDefaultErrorMessage(ac[0]))}})}function X(){d("#perc-workflows-list").html("");var ab=d("#perc-workflows-list");var ac={listItem:[],title:"Workflows",addTitle:"Add new workflow",deleteTitle:"Delete workflow",enableDelete:true,collapsible:true,createItem:aa,deleteItem:Q,selectedItem:L,truncateEntries:true,truncateEntriesCount:5};d.PercDataList.init(ab,ac);W(function(ae,ad){if(ae){d.PercDataList.updateList(ab,ad);L(ad[0])}else{}});f();x()}function x(){var ab={instanceIdSuffix:"-instance1",title:"Assigned",addTitle:"Assign sites & folders to selected workflow",collapsible:true,levelLimit:2,createItem:T,showCheckboxes:false,selectedWorkflow:Y};d.PercDataTree.init(Z,ab);Z.append('<div class="perc-sa-loading-warning-message"><img src="../css/dynatree/skin/loading.gif" style="vertical-align:bottom"/> Loading: Please wait while site and asset folders are loaded. For large sites, this may take several minutes.</div>')}function D(ab){d(".perc-sa-loading-warning-message-hidden").addClass("perc-sa-loading-warning-message").removeClass("perc-sa-loading-warning-message-hidden");if(typeof(ab)=="null"||typeof(ab)=="undefined"){ab=Y}w=A=null;C()}function C(){d.PercFolderService.startAssociatedFoldersJob("Sites",Y,function(ac,ab){if(ac==d.PercServiceUtils.STATUS_ERROR){d.perc_utils.alert_dialog({title:"Error",content:ab});return false}if(R){e(R,false)}R=ab;d.perc_utils.info("Started associated folders job for sites: "+R);d.PercFolderService.startAssociatedFoldersJob("Assets",Y,function(ae,ad){if(ae==d.PercServiceUtils.STATUS_ERROR){d.perc_utils.alert_dialog({title:"Error",content:ad});return false}if(B){e(B,false)}B=ad;d.perc_utils.info("Started associated folders job for assets: "+B);k();J()},false)},false)}function k(){if(R==null){return}d.PercFolderService.getAssociatedFoldersJobStatus(R,function(ac,ab){if(ac==d.PercServiceUtils.STATUS_ERROR){d.perc_utils.alert_dialog({title:"Error",content:ab});return false}var ac=ab.GetAssginedFoldersJobStatus.status;if(ac!="100"){setTimeout(k,2000);return}d.perc_utils.info("Finished associated folders job for sites: "+R);R=null;w={};w.folderItem=ab.GetAssginedFoldersJobStatus.folderItems;K()})}function J(){if(B==null){return}d.PercFolderService.getAssociatedFoldersJobStatus(B,function(ac,ab){if(ac==d.PercServiceUtils.STATUS_ERROR){d.perc_utils.alert_dialog({title:"Error",content:ab});return false}var ac=ab.GetAssginedFoldersJobStatus.status;if(ac!="100"){setTimeout(J,2000);return}d.perc_utils.info("Finished associated folders job for assets: "+B);B=null;A={};A.folderItem=ab.GetAssginedFoldersJobStatus.folderItems;K()})}function K(){if(w!=null&&A!=null){d(".perc-sa-loading-warning-message").addClass("perc-sa-loading-warning-message-hidden").removeClass("perc-sa-loading-warning-message");d.PercDataTree.updateTree(Z,[w,A],Y)}}function T(){d.perc_assign_workflow_sites_folder_dialog.createDialog(Y,D)}return j};d(document).ready(function(){d.wfViewObject=d.PercWorkflowView();d.PercFolderService.isWorkflowAssignmentInProgress(function(e){if(e=="true"){d.wfViewObject.isWorkflowAvailable=false;d("#perc-workflow-wrapper").empty().addClass("perc-workflow-unavailale-message-table").append("<div class='perc-workflow-unavailale-message'>Workflow assignment in process</div>")}else{d.wfViewObject.init()}})})})(jQuery,jQuery.Percussion);(function(b){b.widget("ui.perc_imageselect",{_idPostfix:"_perc_is",_class:"perc_imageselect",_pseudoCtl:null,_init:function(){var d=this;options=this.options;if(this.element[0].nodeName.toLowerCase()!="select"){window.alert("Error! the perc_imageselect widget can only be used on a 'SELECT' html element.")}d._addPseudoControl();d._bindEvents(false)},_addPseudoControl:function(){var d=this;var h="";var f=this.element[0].id;if(f=="undefined"||f==null||f==""){window.alert("Error! An id attribute is required on the select element.")}h+="<div id='";h+=(f+this._idPostfix);h+="' class='";h+=this._class;h+="'>";var e=this.element.children("option");e.each(function(){h+=d._getItemHtml(this.value,this.text)});h+="</div>";this.element.hide();this.element.after(h);this._pseudoCtl=b("#"+this.element[0].id+this._idPostfix);this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"))},_getItemHtml:function(e,d){var f="";f+="<div class='perc_imageselect_item'>";f+="<span class='perc_imageselect_value'>"+e+"</span>";f+="<img src='";f+=d;f+="'/><span>";f+=b.PercTruncateText(e.split(".")[2],22);f+="</span></div>";return f},_addChildIndexes:function(e){var d=0;e.each(function(){b(this).remove(".perc_imageselect_index")});e.each(function(){b(this).append("<span class='perc_imageselect_index'>"+(d++)+"</span>")})},destroy:function(){b.widget.prototype.apply(this,arguments);this._unbindEvents(false)},_bindEvents:function(e){var d=this;if(!e){this._pseudoCtl.bind("keydown",function(f){d._handleKeyDown(f)});this._pseudoCtl.bind("click",function(f){b(this).focus()})}this._pseudoCtl.children(".perc_imageselect_item").bind("click",function(h){var f=b(this).children(".perc_imageselect_index").text();d.selectIndex(f)});this._pseudoCtl.children(".perc_imageselect_item").bind("dblclick",function(f){if(d.options.hardSelect){d._onSelect()}})},_unbindEvents:function(d){if(!d){this._pseudoCtl.unbind("keydown").unbind("click")}this._pseudoCtl.children(".perc_imageselect_item").unbind("click").unbind("dblclick")},_handleKeyDown:function(d){if(!this.options.vertical&&(d.keyCode==37||d.keyCode==39)){this._moveSelection(d.keyCode==39?true:false);return d.preventDefault()}if(this.options.vertical&&(d.keyCode==38||d.keyCode==40)){this._moveSelection(d.keyCode==40?true:false);return d.preventDefault()}if(this.options.hardSelect&&d.keyCode==13){this._onSelect();return d.preventDefault()}return true},_moveSelection:function(d){var f=this.getSelectedIndex();var e=this._pseudoCtl.children(".perc_imageselect_item").length;if(f!=-1){if(d&&(e-1)>f){this.selectIndex(f+1)}else{if(!d&&f>0){this.selectIndex(f-1)}}}},_onSelect:function(){if(this.options.onSelect!=null){var d=this._pseudoCtl.children(".perc_imageselect_selected");var f=d.children(".perc_imageselect_value").text();var e=d.children("img").attr("src");this.options.onSelect(f,e)}},setItems:function(d){if(d==null||d=="undefined"){alert("items cannot be null or undefined")}else{this.clearSelection();this._unbindEvents(true);this._pseudoCtl.children(".perc_imageselect_item").remove();for(var e in d){var f=d[e];this._pseudoCtl.append(this._getItemHtml(f[0],f[1]))}this._addChildIndexes(this._pseudoCtl.children(".perc_imageselect_item"));this._bindEvents(true)}},loadFromUrl:function(e){var d=this;if(e!=null&&e!="undefined"){b.getJSON(e,function(f){d.setItems(f.items)})}},clearSelection:function(){var d=this.element[0].id+this._idPostfix;b("#"+d+" .perc_imageselect_selected").removeClass("perc_imageselect_selected")},selectIndex:function(d){this.clearSelection();var e=this.element[0].id+this._idPostfix;b("#"+e+" .perc_imageselect_item:eq("+d+")").addClass("perc_imageselect_selected");var j=this._pseudoCtl.children(".perc_imageselect_selected").offset().top-50;var h=this._pseudoCtl.offset().top;var f=this._pseudoCtl.scrollTop();if(!this.options.hardSelect){this._onSelect()}this._pseudoCtl.animate({scrollTop:f+j-h},500);this._pseudoCtl.focus()},getSelectedIndex:function(){var d=this._pseudoCtl.children(".perc_imageselect_selected");if(d.length>0){return parseInt(d.children(".perc_imageselect_index").text())}return -1}});b.extend(b.ui.perc_imageselect,{version:"1.0.0",defaults:{vertical:true,onSelect:null,hardSelect:true}})})(jQuery);(function(b){b.widget("ui.perc_wizard",{steps:null,currentStep:0,isCancelled:false,_init:function(){var d=this,e=this.options;this.element.load(e.templateUrl,function(){d.element.perc_dialog({autoOpen:false,title:e.title,modal:e.modal,width:e.width,height:e.height,show:e.show,hide:e.hide,open:e.open,resizable:e.resizable});d.steps=b(".perc_wizard_step");d._addButtons()})},open:function(){this._showStep(0);this.element.dialog("open")},_addButtons:function(){var d=this;var e="<div class='ui-dialog-buttonpane ui-widget-content ui-helper-clearfix'><div href='#' id='perc_wizard_finish' class='perc-save' name='perc_wizard_finish' style='float:right;' /><div href='#' id='perc_wizard_next' class='perc-save'  name='perc_wizard_next' style='float:right;' /><div href='#' id='perc_wizard_cancel' class='perc-save' name='perc_wizard_cancel' style='float:right;' /><div id='perc_wizard_back' href='#' class='perc-save'  name='perc_wizard_back' style='float:right;' /></div>";b(d.element).closest(".ui-dialog").append(e);b("#perc_wizard_back").click(function(){d._onBack()});b("#perc_wizard_cancel").click(function(){d._onCancel()}).val(this.options.cancelButtonLabel);b("#perc_wizard_next").click(function(){d._onNext()});b("#perc_wizard_finish").click(function(){d._onOk()})},_showStep:function(e){if(this.steps==null||e>this.steps.length){alert("Error: Step does not exist.");return}this.currentStep=e;for(i=0;i<this.steps.length;i++){if(i==e){b(this.steps[i]).show()}else{b(this.steps[i]).hide()}}if(e==0&&this.steps.length>1){b("#perc_wizard_back").hide();b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{if(e<this.steps.length-1){b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").show().val(this.options.nextButtonLabel);b("#perc_wizard_finish").hide()}else{b("#perc_wizard_back").show().val(this.options.backButtonLabel);b("#perc_wizard_cancel").show().val(this.options.cancelButtonLabel);b("#perc_wizard_next").hide();b("#perc_wizard_finish").show().val(this.options.finishButtonLabel)}}var d=this.element},_onOk:function(f){var d=this;if(this.options.onValidate()){this.options.onOk()}},_onNext:function(d){if(this.options.onValidate()){if(this.options.onNext!==undefined&&this.options.onNext()===false){return}this._showStep(this.currentStep+1)}},_onBack:function(){if(this.currentStep>0){this._showStep(this.currentStep-1)}},_onCancel:function(){this.isCancelled=true;this.element.dialog("close")}});b.extend(b.ui.perc_wizard,{version:"1.0.0",defaults:{backButtonLabel:typeof I18N=="undefined"?"Back":I18N.message("perc.ui.common.label@Back"),cancelButtonLabel:typeof I18N=="undefined"?"Cancel":I18N.message("perc.ui.common.label@Cancel"),nextButtonLabel:typeof I18N=="undefined"?"Next":I18N.message("perc.ui.common.label@Next"),finishButtonLabel:typeof I18N=="undefined"?"Finish":I18N.message("perc.ui.common.label@Finish"),width:"800px",height:"700px",modal:true,title:typeof I18N=="undefined"?"Wizard":I18N.message("perc.ui.common.label@Wizard"),onOk:function(){alert("No onOk callback was set.")},onValidate:function(){return true}}})})(jQuery);(function(p){p.PercSiteService={getSiteProperties:x,updateSiteProperties:y,copySite:v,copySiteInfo:n,getTemplates:k,getBaseTemplates:j,getSites:e,validateCopySiteFolders:t,createSiteFromUrl:b,createSiteFromUrlAsync:d,createSiteFromUrlStatus:w,createSiteFromUrlResult:f,isSiteBeingImported:h,getSaaSSiteNames:q};function y(z,B){var A=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_UPDATE_PROPERTIES,p.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}},z)}function x(A,B){var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_GET_PROPERTIES+"/"+A,p.PercServiceUtils.TYPE_GET,false,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}})}function v(A,B){var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_COPY,p.PercServiceUtils.TYPE_POST,false,function(E,D){if(E==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,D.data)}else{var F=p.PercServiceUtils.extractDefaultErrorMessage(D.request);var C=p.PercServiceUtils.extractGlobalErrorCode(D.request);B(p.PercServiceUtils.STATUS_ERROR,F,C)}},A)}function t(A,B){var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_COPY_VALIDATE_FOLDERS,p.PercServiceUtils.TYPE_POST,false,function(E,D){if(E==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,D.data)}else{var F=p.PercServiceUtils.extractDefaultErrorMessage(D.request);var C=p.PercServiceUtils.extractGlobalErrorCode(D.request);B(p.PercServiceUtils.STATUS_ERROR,F,C)}},A)}function n(A){var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_COPY_INFO,p.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==p.PercServiceUtils.STATUS_SUCCESS){A(p.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=p.PercServiceUtils.extractDefaultErrorMessage(B.request);A(p.PercServiceUtils.STATUS_ERROR,D)}})}function k(C,D,B){var A=this;var z="";if(B!=null){z=p.perc_paths.TEMPLATES_BY_SITE+"/"+C+"/"+B}else{z=p.perc_paths.TEMPLATES_BY_SITE+"/"+C+""}p.PercServiceUtils.makeJsonRequest(z,p.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==p.PercServiceUtils.STATUS_SUCCESS){D(p.PercServiceUtils.STATUS_SUCCESS,E.data)}else{var G=p.PercServiceUtils.extractDefaultErrorMessage(E.request);D(p.PercServiceUtils.STATUS_ERROR,G)}})}function j(z,B){var A=p.perc_paths.TEMPLATES_READONLY+"?type="+z;p.PercServiceUtils.makeJsonRequest(A,p.PercServiceUtils.TYPE_GET,true,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){B(true,C.data)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(false,E)}})}function e(A){var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITES_ALL+"/",p.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==p.PercServiceUtils.STATUS_SUCCESS){A(p.PercServiceUtils.STATUS_SUCCESS,B.data)}else{var D=p.PercServiceUtils.extractDefaultErrorMessage(B.request);A(p.PercServiceUtils.STATUS_ERROR,D)}})}function b(A,B){p.ajaxSetup({timeout:600000});var z={Site:A};p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_CREATE_FROM_URL,p.PercServiceUtils.TYPE_POST,false,function(D,C){p.ajaxSetup({timeout:60000});if(D==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}},z)}function d(A,B){var z={Site:A};p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_CREATE_FROM_URL_ASYNC,p.PercServiceUtils.TYPE_POST,false,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}else{defaultMsg="There was an unexpected error during the import process.";B(p.PercServiceUtils.STATUS_ERROR,defaultMsg)}},z)}function w(z,B){p.PercServiceUtils.makeJsonRequest(p.perc_paths.JOB_STATUS+"/"+z,p.PercServiceUtils.TYPE_GET,false,function A(D,C){var F,E=p.PercServiceUtils.STATUS_SUCCESS;if(D==p.PercServiceUtils.STATUS_SUCCESS){F=C.data.asyncJobStatus}else{E=p.PercServiceUtils.STATUS_ERROR;F="There was an unexpected error during the import process."}B(E,F)})}function f(z,B){p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_CREATE_FROM_URL_RESULT+"/"+z,p.PercServiceUtils.TYPE_GET,false,function A(D,C){var F,E=p.PercServiceUtils.STATUS_SUCCESS;if(D==p.PercServiceUtils.STATUS_SUCCESS){F=C.data}else{E=p.PercServiceUtils.STATUS_ERROR;F="There was an unexpected error during the import process."}B(E,F)})}function h(z,A){p.PercServiceUtils.makeJsonRequest(p.perc_paths.SITE_IS_BEING_IMPORTED+"/"+z,p.PercServiceUtils.TYPE_GET,false,function(C,B){var E,D=p.PercServiceUtils.STATUS_SUCCESS;if(C==p.PercServiceUtils.STATUS_SUCCESS){E=B.data}else{D=p.PercServiceUtils.STATUS_ERROR;E="There was an unexpected error during the import process."}A(D,E)})}function q(B){var A=p.Deferred();var z=this;p.PercServiceUtils.makeJsonRequest(p.perc_paths.SAAS_SITES_NAMES+"?filterUsedSites="+B,p.PercServiceUtils.TYPE_GET,false,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){A.resolve(C.data)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);A.reject(E)}});return A.promise()}})(jQuery);(function(f){f.PercAssetService={getAssetEditorForAssetId:t,getAssetViewForAssetId:d,getAssetEditorLibrary:w,getAssetEditor:j,getAssetEditorForWidgetAndFolder:q,putAssetInFolder:k,clear_asset:z,clear_orphan_assets:v,set_relationship:e,update_relationship:C,asset_from_local_content:y,deleteAsset:b,forceDeleteAsset:A,validateDeleteAsset:h,updateAsset:p,getUnusedAssets:x,promoteAsset:D,getAssetTypes:B};function t(E,F){f.ajax({url:f.perc_paths.ASSET_EDITOR_URL_FOR_ASSET_ID+"/"+E,success:function(I,H){var G={data:I,textstatus:H};F(f.PercServiceUtils.STATUS_SUCCESS,I)},error:function(J,H,I){var G={request:J,textstatus:H,error:I};var K=f.PercServiceUtils.extractDefaultErrorMessage(G.request);F(f.PercServiceUtils.STATUS_ERROR,K)}})}function d(E,F){f.ajax({url:f.perc_paths.ASSET_VIEW_URL_FOR_ASSET_ID+"/"+E,success:function(I,H){var G={data:I,textstatus:H};F(f.PercServiceUtils.STATUS_SUCCESS,I)},error:function(J,H,I){var G={request:J,textstatus:H,error:I};var K=f.PercServiceUtils.extractDefaultErrorMessage(G.request);F(f.PercServiceUtils.STATUS_ERROR,K)}})}function w(E,F){n(E,"",F)}function n(G,F,H){var E=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_EDITOR_LIBRARY+G+"?filterDisabledWidgets=yes&widgetId="+F,f.PercServiceUtils.TYPE_GET,false,function(J,I){if(J==f.PercServiceUtils.STATUS_SUCCESS){H(f.PercServiceUtils.STATUS_SUCCESS,I.data)}else{var K=f.PercServiceUtils.extractDefaultErrorMessage(I.request);H(f.PercServiceUtils.STATUS_ERROR,K)}})}function j(F,G){var E=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_EDITOR+"/"+F,f.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==f.PercServiceUtils.STATUS_SUCCESS){G(f.PercServiceUtils.STATUS_SUCCESS,H.data)}else{var J=f.PercServiceUtils.extractDefaultErrorMessage(H.request);G(f.PercServiceUtils.STATUS_ERROR,J)}})}function q(E,F,G){n(E,F,G)}function k(E,F){f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_ADD_TO_FOLDER,f.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==f.PercServiceUtils.STATUS_SUCCESS){F(f.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=f.PercServiceUtils.extractDefaultErrorMessage(G.request);F(f.PercServiceUtils.STATUS_ERROR,I)}},E)}function b(G,F,E){f.ajax({url:f.perc_paths.ASSET_DELETE+"/"+G,type:"DELETE",success:function(){F()},error:E})}function A(G,F,E){f.ajax({url:f.perc_paths.ASSET_FORCE_DELETE+"/"+G,type:"GET",success:F,error:E})}function h(G,F,E){f.ajax({url:f.perc_paths.ASSET_VALIDATE_DELETE+"/"+G,type:"GET",success:F,error:E})}function e(O,M,F,H,E,G,K,J){var N=E?"shared":"local";var I=(typeof(M.relationshipId)!="undefinded")?M.relationshipId:-1;var L={AssetWidgetRelationship:{ownerId:F,widgetId:M.widgetid,widgetName:M.widgetdefid,widgetInstanceName:M.widgetName,replacedRelationshipId:I,assetId:O,assetOrder:"0",resourceType:N}};if(G){L.AssetWidgetRelationship.folderPath=G}f.ajax({url:f.perc_paths.ASSET_WIDGET_REL+"/",dataType:"text",contentType:"application/json",type:"POST",data:JSON.stringify(L),success:K,error:J})}function y(H,L,E,G,I,K){var F=f.perc_paths.ASSET_FROM_LOCALCONTENT+"/"+G+I;var J={AssetWidgetRelationship:{ownerId:E,widgetId:L.widgetid,widgetName:L.widgetdefid,widgetInstanceName:L.widgetName,assetId:H,assetOrder:"0",resourceType:"local"}};f.PercServiceUtils.makeRequest(F,f.PercServiceUtils.TYPE_POST,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){K(f.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);K(f.PercServiceUtils.STATUS_ERROR,O)}},J,"application/json","text")}function C(J,H,L,F,G,I){var E=(typeof(L.relationshipId)!="undefinded")?L.relationshipId:-1;var K={AssetWidgetRelationship:{ownerId:F,widgetId:L.widgetid,widgetName:L.widgetdefid,widgetInstanceName:L.widgetName,replacedRelationshipId:E,assetId:J,assetOrder:"0",resourceType:"local",relationshipId:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_WIDGET_REL_UPDATE+"/",f.PercServiceUtils.TYPE_POST,true,function(M,N){if(M==f.PercServiceUtils.STATUS_SUCCESS){var O=N.data;if(O=="-1"){var Q="The asset has been removed from the system.";I(false,Q)}else{G(true,N.data)}}else{var P=f.PercServiceUtils.extractDefaultErrorMessage(N.request);I(false,P)}},K)}function z(E,G,F,H,J){J=J||function(){};var I={AssetWidgetRelationship:{ownerId:E,widgetId:G,widgetName:F,assetId:H,assetOrder:"0"}};f.ajax({url:f.perc_paths.ASSET_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(I),success:J,error:function(M,K,L){alert("error")}})}function v(L,J,E,F,M){M=M||function(){};var G=[];for(var I=0;I<F.length;I++){var H="";H='{"assetId":"'+F[I]+'","assetOrder":0,"ownerId":"'+L+'","widgetId":'+J[I]+',"widgetName":"'+E[I]+'"}';G.push(H)}var N='{"OrphanAssetsSummary":{"assetWidgetRelationship":['+G+"]}}";var K=f.parseJSON(N);f.ajax({url:f.perc_paths.ASSET_ORPHAN_WIDGET_REL_DEL+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(K),success:M,error:function(Q,O,P){alert("error")}})}function p(F,G,I){var E=f.perc_paths.ASSET_UPDATE+"/"+F+"/"+G;var H=function(J,K){if(J==f.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,K.data)}};f.PercServiceUtils.makeRequest(E,f.PercServiceUtils.TYPE_POST,true,H)}function D(H,L,I,F,G,K){var E=G?"shared":"local";var J={AssetWidgetRelationship:{ownerId:I,widgetId:L.widgetid,widgetName:L.widgetdefid,widgetInstanceName:L.widgetName,assetId:H,assetOrder:F,resourceType:E}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_PROMOTE,f.PercServiceUtils.TYPE_POST,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){K(f.PercServiceUtils.STATUS_SUCCESS)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);K(f.PercServiceUtils.STATUS_ERROR,O)}},J)}function x(E,F){f.PercServiceUtils.makeJsonRequest(f.perc_paths.ASSET_UNUSED+"/"+E,f.PercServiceUtils.TYPE_GET,false,function(H,G){if(H==f.PercServiceUtils.STATUS_SUCCESS){F(f.PercServiceUtils.STATUS_SUCCESS,f.perc_utils.convertCXFArray(G.data.UnusedAssetSummary))}else{var I=f.PercServiceUtils.extractDefaultErrorMessage(G.request);F(f.PercServiceUtils.STATUS_ERROR,I)}})}function B(F,G){var E=f.perc_paths.ASSET_TYPES;if(F&&F=="yes"){E+=E.indexOf("?")==-1?"?filterDisabledWidgets=yes":"&filterDisabledWidgets=yes"}f.PercServiceUtils.makeJsonRequest(E,f.PercServiceUtils.TYPE_GET,false,function(I,H){if(I==f.PercServiceUtils.STATUS_SUCCESS){G(f.PercServiceUtils.STATUS_SUCCESS,f.perc_utils.convertCXFArray(H.data.WidgetContentType))}else{var J=f.PercServiceUtils.extractDefaultErrorMessage(H.request);G(f.PercServiceUtils.STATUS_ERROR,J)}})}})(jQuery);(function(d){d.PercSearchService={getSearchResult:f,getAsyncSearchResult:e,getAsyncSearchExtendedResult:b};function f(j,n){var h=d.perc_paths.FINDER_SEARCH;var k=function(p,q){if(p==d.PercServiceUtils.STATUS_ERROR){var t=d.PercServiceUtils.extractDefaultErrorMessage(q.request);n(false,t)}else{n(true,q.data)}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,true,k,j)}function e(j,n){var h=d.perc_paths.FINDER_SEARCH;var k=function(p,q){if(p==d.PercServiceUtils.STATUS_ERROR){var t=d.PercServiceUtils.extractDefaultErrorMessage(q.request);n(false,t)}else{if(p==d.PercServiceUtils.STATUS_ABORT){n(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{n(true,q.data)}}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,false,k,j,k)}function b(j,n){var h=d.perc_paths.FINDER_SEARCH+"/extendedresults";var k=function(p,q){if(p==d.PercServiceUtils.STATUS_ERROR){var t=d.PercServiceUtils.extractDefaultErrorMessage(q.request);n(false,t)}else{if(p==d.PercServiceUtils.STATUS_ABORT){n(false,"The server is taking too long to return your search results. Please update your criteria to narrow down your search.")}else{n(true,q.data)}}};d.PercServiceUtils.makeJsonRequest(h,d.PercServiceUtils.TYPE_POST,false,k,j,k)}})(jQuery);(function(p){var t=p.PercServiceUtils;p.PercPageService={forceDeletePage:b,validateDeletePage:y,getNonSEOPages:d,savePageMetadata:n,copyPage:j,getPagesWithTemplate:x,getUnassignedPagesBySite:k,checkForEmptyMigrationWidgets:v,clearFlagShowMigrationEmptyMessage:f,addToMyPages:w,removeFromMyPages:e,isMyPage:q,getMyContent:h};function v(C,A){var z=p.perc_paths.MIGRATION_EMPTY_FLAG+"/"+C;function B(D,E){if(D===t.STATUS_SUCCESS){if(E.data===true){A()}}}t.makeJsonRequest(z,t.TYPE_GET,true,B)}function f(B){var z=p.perc_paths.CLEAR_MIGRATION_EMPTY_FLAG+"/"+B;function A(C,D){}t.makeJsonRequest(z,t.TYPE_POST,true,A)}function b(B,A,z){p.ajax({url:p.perc_paths.PAGE_FORCE_DELETE+"/"+B,type:"GET",success:A,error:z});A()}function y(B,A,z){p.ajax({url:p.perc_paths.PAGE_VALIDATE_DELETE+"/"+B,type:"GET",success:A,error:z})}function d(D,F,B,A,z,E){if(B==null){B=""}if(z==null){z=""}var C={NonSEOPagesRequest:{keyword:z,path:D,workflow:F,state:B,severity:A}};p.PercServiceUtils.makeJsonRequest(p.perc_paths.PAGE_NONSEO,p.PercServiceUtils.TYPE_POST,false,function(H,G){if(H==p.PercServiceUtils.STATUS_SUCCESS){E(p.PercServiceUtils.STATUS_SUCCESS,G.data)}else{var I=p.PercServiceUtils.extractDefaultErrorMessage(G.request);E(p.PercServiceUtils.STATUS_ERROR,I)}},C)}function n(A,C){var z=p.perc_paths.SAVE_PAGE_METADATA+"/"+A;var B=function(D,E){if(D==p.PercServiceUtils.STATUS_ERROR){C(false,[E.request,E.textstatus,E.error])}else{C(true,E.data)}};p.PercServiceUtils.makeRequest(z,p.PercServiceUtils.TYPE_POST,true,B)}function j(z,B){var A=p.perc_paths.PAGE_COPY+"/"+z+"?addToRecent=true";p.PercServiceUtils.makeRequest(A,p.PercServiceUtils.TYPE_POST,true,function(D,C){if(D==p.PercServiceUtils.STATUS_SUCCESS){B(p.PercServiceUtils.STATUS_SUCCESS,C)}else{var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}},null,null,null,true)}function x(C,z,E,A){var B={startIndex:1,maxResults:5,sortColumn:"name",sortOrder:"asc",pageId:null};p.extend(B,z);var D=p.perc_paths.PAGES_WITH_TEMPLATE+"/"+C;D+="?startIndex="+B.startIndex;D+="&maxResults="+B.maxResults;D+="&sortColumn="+B.sortColumn;D+="&sortOrder="+B.sortOrder;if(B.pageId!=null){D+="&pageId="+B.pageId}p.PercServiceUtils.makeJsonRequest(D,p.PercServiceUtils.TYPE_GET,false,function(G,F){if(G==p.PercServiceUtils.STATUS_ERROR){var H=p.PercServiceUtils.extractDefaultErrorMessage(F.request);E(p.PercServiceUtils.STATUS_ERROR,H)}else{E(p.PercServiceUtils.STATUS_SUCCESS,F.data.PagedItemList)}})}function k(C,B,z,D){var A=p.perc_paths.UNASSIGNED_PAGES_BY_SITE+"/"+C+"?startIndex="+B+"&maxResults="+z;p.PercServiceUtils.makeJsonRequest(A,p.PercServiceUtils.TYPE_GET,false,function(F,E){if(F==p.PercServiceUtils.STATUS_ERROR){var G=p.PercServiceUtils.extractDefaultErrorMessage(E.request);D(p.PercServiceUtils.STATUS_ERROR,G)}else{D(p.PercServiceUtils.STATUS_SUCCESS,E.data)}})}function w(z,B){var A=p.perc_paths.ADD_TO_MYPAGES+"/"+z;p.PercServiceUtils.makeJsonRequest(A,p.PercServiceUtils.TYPE_PUT,false,function(D,C){if(D==p.PercServiceUtils.STATUS_ERROR){var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}else{B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}})}function e(z,B){var A=p.perc_paths.REMOVE_FROM_MYPAGES+"/"+z;p.PercServiceUtils.makeJsonRequest(A,p.PercServiceUtils.TYPE_DELETE,false,function(D,C){if(D==p.PercServiceUtils.STATUS_ERROR){var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}else{B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}})}function q(z,B){var A=p.perc_paths.IS_MY_PAGE+"/"+z;p.PercServiceUtils.makeJsonRequest(A,p.PercServiceUtils.TYPE_GET,false,function(D,C){if(D==p.PercServiceUtils.STATUS_ERROR){var E=p.PercServiceUtils.extractDefaultErrorMessage(C.request);B(p.PercServiceUtils.STATUS_ERROR,E)}else{B(p.PercServiceUtils.STATUS_SUCCESS,C.data)}})}function h(A){var z=p.perc_paths.MY_CONTENT;p.PercServiceUtils.makeJsonRequest(z,p.PercServiceUtils.TYPE_GET,false,function(C,B){if(C==p.PercServiceUtils.STATUS_ERROR){var D=p.PercServiceUtils.extractDefaultErrorMessage(B.request);A(p.PercServiceUtils.STATUS_ERROR,D)}else{A(p.PercServiceUtils.STATUS_SUCCESS,B.data)}})}})(jQuery);(function(f){f.PercPathService={getPathItemById:F,getFolderPathItem:t,getPathItemForPath:q,getItemPropertiesByWorkflowState:e,deleteFolder:p,deleteSection:A,deleteFSFolder:j,moveItem:x,renameFolder:D,createNewFolder:v,getLastExistingPath:B,validatePath:w,getDisplayFormat:C,getContentForPath:G,getFolderProperties:b,saveFolderProperties:k,deleteFolderSkipValidation:y,getInlineRenderLink:d};function C(J){var I=f.perc_utils.getDisplayFormat(f.PercNavigationManager.getPath());if(f.Percussion.getCurrentFinderView()==f.Percussion.PERC_FINDER_SEARCH_RESULTS||f.Percussion.getCurrentFinderView()==f.Percussion.PERC_FINDER_RESULT){I=f.perc_utils.getDisplayFormat("/")}var H=f.perc_paths.DISPLAY_FORMAT+I;f.PercServiceUtils.makeJsonRequest(H,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function G(H,K,L){var I=f.perc_utils.encodeURL(K.path)+"/?startIndex="+K.startIndex+"&maxResults="+K.maxResults+"&displayFormatId="+H.id+"&sortColumn="+K.sortColumn+"&sortOrder="+K.sortOrder;var J=f.perc_paths.PATH_PAGINATED_FOLDER+I;f.PercServiceUtils.makeJsonRequest(J,f.PercServiceUtils.TYPE_GET,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){L(f.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);L(f.PercServiceUtils.STATUS_ERROR,O)}})}function q(I,J){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM+I,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function F(J,I){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_BY_ID+"/"+J,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var N=f.PercServiceUtils.extractDefaultErrorMessage(K.request);var M=f.PercServiceUtils.extractGlobalErrorCode(K.request);I(f.PercServiceUtils.STATUS_ERROR,N,M)}})}function e(J,L,H,K){if(H==null){H=""}var I={ItemByWfStateRequest:{path:J,workflow:L,state:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_SUMMARY_BY_WORKFLOW_STATE,f.PercServiceUtils.TYPE_POST,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){K(f.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);K(f.PercServiceUtils.STATUS_ERROR,O)}},I)}function x(K,H,J){var I={MoveFolderItem:{itemPath:K,targetFolderPath:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ITEM_MOVE,f.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS)}else{var N=f.PercServiceUtils.extractDefaultErrorMessage(L.request);J(f.PercServiceUtils.STATUS_ERROR,N)}},I)}function v(I,J){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_ADD_NEW_FOLDER+I,f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function t(I,J){var H=this;f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_FOLDER+f.perc_utils.encodeURL(I),f.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function D(J,H,K){var I={RenameFolderItem:{path:J,name:H}};f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_RENAME_FOLDER,f.PercServiceUtils.TYPE_POST,false,function(N,M){if(N==f.PercServiceUtils.STATUS_SUCCESS){K(f.PercServiceUtils.STATUS_SUCCESS,M.data)}else{var O=f.PercServiceUtils.extractDefaultErrorMessage(M.request);var L=f.PercServiceUtils.extractFieldErrorCode(M.request);K(f.PercServiceUtils.STATUS_ERROR,O,L)}},I)}function p(J,H,I,K){f.ajax({url:f.perc_paths.PATH_VALIDATE_DELETE_FOLDER+J,dataType:"text",type:"GET",success:function(L){n(L,J,H,I,K)},error:h})}function A(J,I,L){f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);var H={DeleteFolderCriteria:{path:J,skipItems:"NO"}};var K=3600000;f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(H),timeout:K,success:L,error:E});f.unblockUI()}function j(I,H,J){p(I,H,"fsfolder",J)}function B(I,J,H){f.PercServiceUtils.makeRequest(f.perc_paths.PATH_LAST_EXISTING+I,f.PercServiceUtils.TYPE_GET,(H!=null&&H)?true:false,function(L,K){if(L==f.PercServiceUtils.STATUS_SUCCESS){J(f.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=f.PercServiceUtils.extractDefaultErrorMessage(K.request);J(f.PercServiceUtils.STATUS_ERROR,M)}})}function w(H,I){f.PercServiceUtils.makeRequest(f.perc_paths.PATH_VALIDATE_EXIST+H,f.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==f.PercServiceUtils.STATUS_SUCCESS){I(f.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=f.PercServiceUtils.extractDefaultErrorMessage(J.request);I(f.PercServiceUtils.STATUS_ERROR,L)}},null,null,null,true)}function n(J,K,H,I,N){var M;if(I=="section"){M=I18N.message("perc.ui.finder.section.delete@Title")}else{M=I18N.message("perc.ui.finder.folder.delete@Title")}var L=3600000;f.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:M,question:z(J,H,I),success:function(){var P="EMPTY";if(f("#perc_delete_folder_force").length>0){P=f("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var O={DeleteFolderCriteria:{path:K,skipItems:P}};f.PercBlockUI(f.PercBlockUIMode.CURSORONLY);f.ajax({url:f.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(O),timeout:L,success:N,error:E});f.unblockUI()},width:500})}function y(K,H,I,L){var J="";n(J,K,H,I,L)}function h(H){var I=f.PercServiceUtils.extractDefaultErrorMessage(errors);var J="Failed to delete the folder.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(I!="")?I:J})}function E(J){var H=f.PercServiceUtils.extractDefaultErrorMessage(J);var I="Failed to delete the folder.";f.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete Folder Error",content:(H!="")?H:I})}function z(L,I,N){var H;var M;var P="";var O="";if(N=="Assets"){H="perc.ui.finder.folder.delete@ConfirmAssets";M="perc.ui.finder.folder.delete@WarningAssets";var K=L.indexOf("AssetsNotAuthorized");if(L.indexOf("AssetsNotAuthorized")>-1){P+=I18N.message("perc.ui.finder.folder.delete@AssetNotAuthorized")+"<br/><br/>"}if(L.indexOf("AssetsInUseTemplates")>-1){P+=I18N.message("perc.ui.finder.folder.delete@AssetInUseTemplates")+"<br/><br/>"}if(L.indexOf("AssetsInUsePages")>-1){P+=I18N.message("perc.ui.finder.folder.delete@AssetInUsePages")+"<br/>";O="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLiveAssets")+"</label>"}}else{if(N=="fsfolder"){H="perc.ui.finder.fsfolder.delete@Confirm";M="perc.ui.finder.fsfolder.delete@Warning"}else{if(N=="Sites"){H="perc.ui.finder.folder.delete@ConfirmPages";M="perc.ui.finder.folder.delete@WarningPages"}else{H="perc.ui.finder.section.delete@Confirm";M="perc.ui.finder.section.delete@Warning"}if(L.indexOf("PagesNotAuthorized")>-1){P+=I18N.message("perc.ui.finder.folder.delete@PageNotAuthorized")+"<br/><br/>"}if(L.indexOf("PagesInUseTemplates")>-1){P+=I18N.message("perc.ui.finder.folder.delete@PageInUseTemplates")+"<br/><br/>"}if(L.indexOf("PagesInUsePages")>-1){P+=I18N.message("perc.ui.finder.folder.delete@PageInUsePages")+"<br/>";O="<br/><input type='checkbox' id='perc_delete_folder_force' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message("perc.ui.finder.folder.delete@DeleteLinkedPages")+"</label>"}}}var J;if(L=="Success"){J=I18N.message(H,[I])}else{J=I18N.message(M,[I])+"<br/><br/>"}return J+P+O}function b(I,H){f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_GET_FOLDER_PROPERTIES+"/"+I,f.PercServiceUtils.TYPE_GET,true,function(K,J){H(K,J)})}function k(H,I){f.PercServiceUtils.makeJsonRequest(f.perc_paths.PATH_SAVE_FOLDER_PROPERTIES,f.PercServiceUtils.TYPE_POST,true,function(K,J){I(K,J)},H)}function d(J,I,K){var H=f.perc_paths.RENDER_LINK_PREVIEW+"/"+J;if(I=="image"){H+="/percSystem.imageMainBinary/percSystem.imageThumbBinary"}else{H+="/default"}f.PercServiceUtils.makeJsonRequest(H,f.PercServiceUtils.TYPE_GET,true,function(M,L){if(M==f.PercServiceUtils.STATUS_SUCCESS){K(true,L.data)}else{var N=f.PercServiceUtils.extractDefaultErrorMessage(L.request);K(false,N)}})}})(jQuery);(function(h){var y="NONE";var p="READER";var B="ASSIGNEE";var q="ADMIN";h.PercUserService={ACCESS_NONE:y,ACCESS_READ:p,ACCESS_WRITE:B,ACCESS_ADMIN:q,getUsers:F,findUser:v,findDirectoryUsers:w,importDirectoryUsers:x,getDirectoryStatus:d,getRoles:G,createUser:k,deleteUser:A,updateUser:f,findRole:t,deleteRole:z,updateRole:e,createRole:n,getAvailableUsers:b,getAccessLevel:E,validateDeleteRole:D,validateDeleteUsers:j};function F(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_USERS,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){J.data.UserList.users=C(J.data.UserList.users);I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function v(J,I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_FIND+"/"+J,h.PercServiceUtils.TYPE_GET,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){K.data.User.name=K.data.User.name.toString();I(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);I(h.PercServiceUtils.STATUS_ERROR,M)}})}function w(J,K){if(J==null){K(h.PercServiceUtils.STATUS_ERROR,"Search string can not be null.");return}J=J.replace(/%+$/,"");var I=h.perc_paths.USER_EXTERNAL_FIND+"/"+encodeURIComponent(J)+"%25";var H=this;h.PercServiceUtils.makeJsonRequest(I,h.PercServiceUtils.TYPE_GET,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{try{var O=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,O)}catch(N){K(h.PercServiceUtils.STATUS_ERROR,"Unable to retrieve users from directory service.")}}})}function x(I,J){if(I==null||I==undefined||I.ImportUsers.externalUsers.length==0){J(h.PercServiceUtils.STATUS_ERROR,"List of users to import can not be null or empty.");return}var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_IMPORT,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},I)}function d(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_EXTERNAL_STATUS,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function G(I){var H=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ROLES,h.PercServiceUtils.TYPE_GET,false,function(K,J){if(K==h.PercServiceUtils.STATUS_SUCCESS){J.data.RoleList.roles=C(J.data.RoleList.roles);I(h.PercServiceUtils.STATUS_SUCCESS,J.data)}else{var L=h.PercServiceUtils.extractDefaultErrorMessage(J.request);I(h.PercServiceUtils.STATUS_ERROR,L)}})}function k(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_CREATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function A(J,I){var H=this;h.PercServiceUtils.makeDeleteRequest(h.perc_paths.USER_DELETE+"/"+J,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){I(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);I(h.PercServiceUtils.STATUS_ERROR,M)}})}function f(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function t(J,K){var H=this;var I={psstring:{value:J}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_FIND,h.PercServiceUtils.TYPE_POST,false,function(M,L){if(M==h.PercServiceUtils.STATUS_SUCCESS){L.data.Role.name=L.data.Role.name.toString();K(h.PercServiceUtils.STATUS_SUCCESS,L.data)}else{var N=h.PercServiceUtils.extractDefaultErrorMessage(L.request);K(h.PercServiceUtils.STATUS_ERROR,N)}},I)}function z(I,J){var H={psstring:{value:I}};h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function n(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_CREATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function e(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_UPDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function b(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_AVAILABLE_USERS,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){K.data.UserList.users=C(K.data.UserList.users);J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function E(K,M,N,I,L){var H=this;var J;if(K!=null){J={AccessLevelRequest:{type:K,itemId:M,parentFolderPath:I}}}else{J={AccessLevelRequest:{itemId:M,parentFolderPath:I}}}h.PercServiceUtils.makeJsonRequest(h.perc_paths.USER_ACCESS_LEVEL,h.PercServiceUtils.TYPE_POST,(typeof(L)!="undefined"&&L!=null&&L)?true:false,function(P,O){if(P==h.PercServiceUtils.STATUS_SUCCESS){N(h.PercServiceUtils.STATUS_SUCCESS,O.data.AccessLevel.accessLevel)}else{var Q=h.PercServiceUtils.extractDefaultErrorMessage(O.request);N(h.PercServiceUtils.STATUS_ERROR,Q)}},J)}function D(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_DELETE_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function j(H,J){var I=this;h.PercServiceUtils.makeJsonRequest(h.perc_paths.ROLE_REMOVE_USERS_VALIDATE,h.PercServiceUtils.TYPE_POST,false,function(L,K){if(L==h.PercServiceUtils.STATUS_SUCCESS){J(h.PercServiceUtils.STATUS_SUCCESS,K.data)}else{var M=h.PercServiceUtils.extractDefaultErrorMessage(K.request);J(h.PercServiceUtils.STATUS_ERROR,M)}},H)}function C(H){H=h.perc_utils.convertCXFArray(H);h.each(H,function(J,I){H[J]=I.toString()});return H}})(jQuery);(function(e){e.PercWebResourcesService={deleteFile:b,validateFileUpload:d};function j(p,q,k,n,v){var t;if(n=="section"){t=I18N.message("perc.ui.finder.section.delete@Title")}else{t=I18N.message("perc.ui.finder.folder.delete@Title")}e.perc_utils.confirm_dialog({id:"perc-finder-delete-folder",title:t,question:f(p,k,n),success:function(){var x="EMPTY";if(e("#perc_delete_folder_force").length>0){x=e("#perc_delete_folder_force").get(0).checked?"NO":"YES"}var w={DeleteFolderCriteria:{path:q,skipItems:x}};e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.ajax({url:e.perc_paths.PATH_DELETE_FOLDER,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(w),success:v,error:cbDfErrors});e.unblockUI()},width:500})}function h(p){var k=e.PercServiceUtils.extractDefaultErrorMessage(p);var n="Could not delete the file.";e.perc_utils.alert_dialog({id:"perc-finder-delete-error",title:"Delete File Error",content:(k!="")?k:n})}function f(p){var n;var k="";k="perc.ui.finder.fsfile.delete@Filename";n="perc.ui.finder.fsfile.delete@Confirm";var q;q=I18N.message(k,[p]);q=q+"<br /><br />"+I18N.message(n,[p]);return q}function b(n,k,q){var p=I18N.message("perc.ui.finder.fsfile.delete@Title");e.perc_utils.confirm_dialog({id:"perc-finder-delete-fsfile",title:p,question:f(k),success:function(){e.PercBlockUI(e.PercBlockUIMode.CURSORONLY);e.PercServiceUtils.makeDeleteRequest(e.perc_paths.WEBRESOURCESMGT+n,false,function(v,t){if(v==e.PercServiceUtils.STATUS_SUCCESS){q(e.PercServiceUtils.STATUS_SUCCESS,t.data)}else{h(t.request)}});e.unblockUI()},width:500})}function d(k,p,n){k="/"+k.slice(3).join("/")+"/"+p;e.PercServiceUtils.makeRequest(e.perc_paths.WEBRESOURCESMGT_VALIDATE_FILE_UPLOAD+k,e.PercServiceUtils.TYPE_GET,false,function(t,q){n(t,q)})}})(jQuery);(function(p){p.PercWorkflowService=function(){return{checkIn:y,checkOut:k,forceCheckOut:n,transition:E,getTransitions:A,isCheckedOutToCurrentUser:F,isApproveAvailableToCurrentUser:q,getWorkflowObject:t,createNewWorkflowStep:f,deleteWorkflowStep:b,updateWorkflowStep:j,getStatusByWorkflow:h,getWorkflowList:D,getWorkflows:B,createWorkflow:d,updateWorkflow:w,deleteWorkflow:z,bulkApproveItems:v,getBulkApproveStatus:e,getDefaultWorkflow:x}};function h(I,H){var G="/Rhythmyx/services/workflowmanagement/workflows/"+p.perc_utils.encodeURL(I)+"/states/choices";H=H==null?function(){}:H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,H)}function k(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkOut");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_CHECKOUT+"/"+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function y(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in checkin");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_CHECKIN+"/"+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function A(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'getTransitions'");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_TRANSITIONS+"/"+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function E(I,H,K,J){if(p.perc_utils.isBlankString(I)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId in 'transition'");return false}J=J==null?function(){}:J;var G=p.perc_paths.WORKFLOW_TRANSITION_COMMENT+"/"+I+"/"+H+"?comment="+K;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,J)}function n(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_FORCE_CHECKOUT+"/"+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function F(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank itemId, but found a blank itemId");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_CHECKED_OUT_TO_USER+"/"+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function q(H,I){if(p.perc_utils.isBlankString(H)){p.perc_utils.debug("Expected a non blank folderPath, but found a blank folderPath");return false}I=I==null?function(){}:I;var G=p.perc_paths.WORKFLOW_IS_APPROVE_ALLOWED+H;p.PercServiceUtils.makeJsonRequest(G,p.PercServiceUtils.TYPE_GET,true,I)}function t(G,J){var I=p.perc_paths.WORKFLOW_STEPPED+G;var H=function(K,L){if(K==p.PercServiceUtils.STATUS_ERROR){J(false,[L.request,L.textstatus,L.error])}else{J(true,[L.data,L.textstatus])}};p.PercServiceUtils.makeJsonRequest(I,p.PercServiceUtils.TYPE_GET,false,H)}function j(G,L,H,K){var J=p.perc_paths.WORKFLOW_STEPPED+G+"/steps/"+L;var I=function(M,N){if(M==p.PercServiceUtils.STATUS_ERROR){K(false,[N.request,N.textstatus,N.error])}else{K(true,[N.data,N.textstatus])}};p.PercServiceUtils.makeJsonRequest(J,p.PercServiceUtils.TYPE_PUT,false,I,H)}function f(G,L,H,K){var J=p.perc_paths.WORKFLOW_STEPPED+G+"/steps/"+C(L);if((L.indexOf("/")!=-1)||(L.indexOf("\\")!=-1)||(L.indexOf(";")!=-1)||(L.indexOf('"')!=-1)){H.Workflow.workflowSteps[0].stepName=L.replace(/[\\\/\;"]/g,"#")}var I=function(M,N){if(M==p.PercServiceUtils.STATUS_ERROR){K(false,[N.request,N.textstatus,N.error])}else{K(true,[N.data,N.textstatus])}};p.PercServiceUtils.makeJsonRequest(J,p.PercServiceUtils.TYPE_POST,false,I,H)}function b(G,K,J){var I=p.perc_paths.WORKFLOW_STEPPED+G+"/steps/"+K;var H=function(L,M){if(L==p.PercServiceUtils.STATUS_ERROR){J(false,[M.request,M.textstatus,M.error])}else{J(true,[M.data,M.textstatus])}};p.PercServiceUtils.makeJsonRequest(I,p.PercServiceUtils.TYPE_DELETE,false,H)}function D(I){var H=p.perc_paths.WORKFLOW_STEPPED;var G=function(J,K){if(J==p.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{K.data.EnumVals.entries=p.perc_utils.convertCXFArray(K.data.EnumVals.entries);I(true,[K.data,K.textstatus])}};p.PercServiceUtils.makeJsonRequest(H,p.PercServiceUtils.TYPE_GET,false,G)}function x(I){var H=p.perc_paths.DEFAULT_WORKFLOW_META;var G=function(J,K){if(J==p.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{K.data.EnumVals.entries=p.perc_utils.convertCXFArray(K.data.EnumVals.entries);I(true,K.data)}};p.PercServiceUtils.makeJsonRequest(H,p.PercServiceUtils.TYPE_GET,false,G)}function B(I){var H=p.perc_paths.WORKFLOW_META;var G=function(J,K){if(J==p.PercServiceUtils.STATUS_ERROR){I(false,[K.request,K.textstatus,K.error])}else{I(true,[K.data,K.textstatus])}};p.PercServiceUtils.makeJsonRequest(H,p.PercServiceUtils.TYPE_GET,false,G)}function d(G,H,K){var J=p.perc_paths.WORKFLOW_STEPPED+C(G);if((G.indexOf("/")!=-1)||(G.indexOf("\\")!=-1)||(G.indexOf(";")!=-1)||(G.indexOf('"')!=-1)){H.Workflow.workflowName=G.replace(/[\\\/\;"]/g,"#")}var I=function(L,M){if(L==p.PercServiceUtils.STATUS_ERROR){K(false,[M.request,M.textstatus,M.error])}else{K(true,[M.data,M.textstatus])}};p.PercServiceUtils.makeJsonRequest(J,p.PercServiceUtils.TYPE_POST,false,I,H)}function w(K,G,J){var I=p.perc_paths.WORKFLOW_STEPPED+K;var H=function(L,M){if(L==p.PercServiceUtils.STATUS_ERROR){J(false,[M.request,M.textstatus,M.error])}else{J(true,[M.data,M.textstatus])}};p.PercServiceUtils.makeJsonRequest(I,p.PercServiceUtils.TYPE_PUT,false,H,G)}function C(G){var H=G.toString();H=H.replace(/[\\\/\\;"]/g,"#");return encodeURIComponent(JSON.stringify(H))}function z(G,J){var I=p.perc_paths.WORKFLOW_STEPPED+G;var H=function(K,L){if(K==p.PercServiceUtils.STATUS_ERROR){J(false,[L.request,L.textstatus,L.error])}else{J(true,[L.data,L.textstatus])}};p.PercServiceUtils.makeJsonRequest(I,p.PercServiceUtils.TYPE_DELETE,false,H)}function v(G,J){var I=p.perc_paths.WORKFLOW_BULK_APPROVE;var H=function(K,L){if(K==p.PercServiceUtils.STATUS_ERROR){J(false,[L.request,L.textstatus,L.error])}else{J(true,[L.data,L.textstatus])}};p.PercServiceUtils.makeJsonRequest(I,p.PercServiceUtils.TYPE_POST,false,H,G)}function e(G,H,K){var J=p.perc_paths.WORKFLOW_BULK_APPROVE+"/status";if(H){J+="/full/"+G}else{J+="/processed/"+G}var I=function(L,M){if(L==p.PercServiceUtils.STATUS_ERROR){K(false,[M.request,M.textstatus,M.error])}else{K(true,[M.data,M.textstatus])}};p.PercServiceUtils.makeJsonRequest(J,p.PercServiceUtils.TYPE_GET,false,I)}})(jQuery);(function(d){d.PercImportProgressDialog=function b(D){var h={IDS:{MAIN_DIALOG:"perc_import_progress_dialog",MAIN_DIALOG_CLOSE_BUTTON:"perc_import_progress_dialog_close",MAIN_DIALOG_CLOSE_DISABLED_BUTTON:"perc_import_progress_dialog_close_disabled",MAIN_DIALOG_DONE_BUTTON:"perc_import_progress_dialog_done",MAIN_DIALOG_DONE_DISABLED_BUTTON:"perc_import_progress_dialog_done_disabled"},TEXT:{MAIN_DIALOG_TITLE:I18N.message("perc.ui.ImportProgressDialog.title@Import"),IMPORT_ERROR_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import failed message"),IMPORT_SUCCESS_MESSAGE:I18N.message("perc.ui.ImportProgressDialog.message@Import succeded message")},OTHER:{EVENTS_ENABLE_DONE_BUTTON:"enableDoneButton",POLLING_PERIOD_DURATION:100,IMPORT_LOG_URL:d.perc_paths.VIEW_IMPORT_LOG+"?templateId="}};var p={Done:{id:h.IDS.MAIN_DIALOG_DONE_BUTTON,click:function(H){D.onSuccessCallback(F)}},"Done Disabled":{id:h.IDS.MAIN_DIALOG_DONE_DISABLED_BUTTON},"Close Normal":{id:h.IDS.MAIN_DIALOG_CLOSE_BUTTON,click:function(){z=true;if(D.backgroundRefreshCallback!==undefined&&n===true){D.backgroundRefreshCallback()}y.remove()}}};var C={id:h.IDS.MAIN_DIALOG,title:h.TEXT.MAIN_DIALOG_TITLE,modal:true,resizable:false,closeOnEscape:true,width:686,height:"auto",percButtons:p};var v=d("<div/>");var y;var w;var F;var n=false;var t=-1;var B;var z=false;function A(H){B='<div class="progress">';B+='<p class="progress-message">&nbsp;</p>';B+='<div class="progress-bar-container">';B+='<div class="progress-bar"></div>';B+="</div>";B+='<div class="error-message">';B+=h.TEXT.IMPORT_ERROR_MESSAGE;B+="</div>";B+='<div class="success-message">';B+=h.TEXT.IMPORT_SUCCESS_MESSAGE;B+="</div>";B+="</div>";B=d(B);v.append(d("<div>").append(B));if(H.showVideo===true){v.append(d('<div align="center" style="margin-top:24px;height: 315px; overflow:hidden">').append(d('<iframe id="perc_import_video" src="//help.percussion.com/in-product/single2" scrolling="no" marginheight="0" marginwidth="0" frameborder="0" width="560px" height="0px" style="display: block; overflow: hidden">')).append(d('<img id="perc_import_image" src="../images/images/ImportVideoNotFound.png" width="560px" height="0px">')))}v.append(d("<div>").append('<p class="hint">Ask questions. Get answers. Visit the <a target="_blank" href="http://cm1community.percussion.com/percussion" title="Percussion Community">Percussion Community</a> to access Video Tutorials, Forums, and more.</p>'));if(H.showVideo===true){v.append(d('<img height="0px" width="0px" src="http://help.percussion.com/Assets/Help/header/images/PercussionSwoosh.png?dummy='+Math.random()+'">').error(J).load(I))}function J(){d("#"+h.IDS.MAIN_DIALOG).find("#perc_import_image").attr("height","315px")}function I(){d("#"+h.IDS.MAIN_DIALOG).find("#perc_import_video").attr("height","315px")}y=d(v).perc_dialog(C);e();x()}function e(){var H=d("#"+p["Done Disabled"].id);var I=d("#"+p.Done.id);I.hide();d("#"+h.IDS.MAIN_DIALOG).bind(h.OTHER.EVENTS_ENABLE_DONE_BUTTON,function(K,J){G(J)})}function G(H){var J=d("#"+p.Done.id),I=d("#"+p["Done Disabled"].id);if(H===true){J.show();I.hide()}else{J.hide();I.show()}}function x(){D.startProgressCallback(function(I,H){if(I!=d.PercServiceUtils.STATUS_SUCCESS){j()}else{w=H;k()}})}function k(){if(n===true){return}D.pollingProgressCallback(w,function(I,K){if(I!=d.PercServiceUtils.STATUS_SUCCESS||K.status<0){j()}else{var H=B.find(".progress-message");var J=B.find(".progress-bar");if(K.status>t){if(K.message!==undefined&&K.message.length>0){K.message=K.message.charAt(0).toUpperCase()+K.message.slice(1)+"...";H.html(K.message)}J.css("width",K.status+"%");t=K.status}if(K.status==100){n=true;if(D.backgroundRefreshCallback!==undefined&&z===true){D.backgroundRefreshCallback();return}q();return}setTimeout(k,h.OTHER.POLLING_PERIOD_DURATION)}})}function f(){B.find(".progress-message").css("visibility","hidden");B.find(".progress-bar-container").css("visibility","hidden")}function j(){f();B.find(".error-message").show()}function q(){D.importResultCallback(w,function(H,I){F=I;E(F);f();B.find(".success-message").show();G(true)})}function E(){function H(J){var I=B.find('a[title="Download the import log here"]');I.attr("href",h.OTHER.IMPORT_LOG_URL+J)}if(F.id!==undefined){H(F.id)}else{d.PercSiteService.getTemplates(F.Site.name,function(I,J){H(J.TemplateSummary[0].id)})}}A(D)}})(jQuery);var $perc_newSiteDialogLayout;(function(d){var f;d.perc_createNewSiteDialog=function(x){var w=null;f=d("<div></div>").perc_wizard({steps:2,modal:true,resizable:false,templateUrl:"../jsp/dialogs/perc_newSiteDialog.jsp",title:I18N.message("perc.ui.newsitedialog.title@Create Site"),height:"auto",width:690,open:function(){var y=d("#sitename"),A=d("#templatename"),B=d("#url"),v=d("input#type_url");if(!$perc_newSiteDialogLayout){$perc_newSiteDialogLayout=true;d.perc_filterField(y,d.perc_textFilters.HOSTNAME);d.perc_filterField(A,d.perc_textFilters.URL);d("input[type=radio]").change(function(C){var D=d(this);if(D.attr("id")!=="type_url"){B.attr("readonly","readonly").attr("disabled","true");k(B)}else{B.removeAttr("readonly").removeAttr("disabled")}});var z=d("#perc_templateList").perc_imageselect({hardSelect:false,onSelect:function(D,C){d("#perc_selectedTemplate img").remove();d("#perc_selectedTemplate").html("<img src='"+C+"'/><br/><span>"+D.split(".")[2]+"</span>");d("#selectedtemplate").val(D)}});p();d("#perc-select-template-type").change(function(){if(d(this).val()=="base"){d("#perc-base-template-lib").show();d("#perc-resp-template-lib").hide()}else{d("#perc-base-template-lib").hide();d("#perc-resp-template-lib").show()}});w=d("#perc_newSiteDialogForm").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,debug:true,rules:e(),messages:b(),showErrors:function(C,D){if(this.pendingRequest<1){this.defaultShowErrors();var E=d("#perc_newSiteDialogForm");E.find(".perc_dialog_field.perc_field_success").prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");E.find(".perc_dialog_field.perc_field_error").prevAll(".perc_dialog_label").addClass("perc_dialog_label_error");d(this.currentElements).removeClass(this.settings.errorClass)}}})}else{j()}B.removeAttr("readonly").removeAttr("disabled");k(y);k(B);v.attr("checked",true)},onOk:function(){q(x)},onNext:h,onValidate:function(){return w.form()}});return f};function h(B){var G=f.find("select[name=sitename-select]");if(G.length>0){f.find("input[name=sitename]").val(G.val())}var E=d("#sitename"),A=d("#url"),v={templateName:undefined,templateId:undefined,pageId:undefined},x,C=true;function D(H){d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:H})}function y(H,I){if(H!=d.PercServiceUtils.STATUS_SUCCESS){D(I);return}v.templateName=I.Site.templateName;v.tabId="perc-tab-layout";x=d.perc_paths.SITES_ROOT+"/"+I.Site.name;d.PercSiteService.getTemplates(I.Site.name,F)}function F(H,I){if(H!=d.PercServiceUtils.STATUS_SUCCESS){D(I);return}v.templateId=I.TemplateSummary[0].id;d.PercPathService.getFolderPathItem(x,w)}function w(I,L){if(I!=d.PercServiceUtils.STATUS_SUCCESS){D(L);return}var K;for(var J=0;J<L.PathItem.length;J++){if(L.PathItem[J].category=="LANDING_PAGE"){K=L.PathItem[J];J=L.PathItem.length}}v.pageId=K.id;var H=$j.deparam.querystring();$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_DESIGN,z.name,null,null,null,K.path,null,v)}if(f.find("input[type=radio]").filter(":checked").attr("id")==="type_url"){var z={name:d.trim(E.val()),baseUrl:d.trim(A.val())};if(!(/^(https?):\/\//i).test(z.baseUrl)){z.baseUrl="http://"+z.baseUrl}C=false;d(".ui-dialog-titlebar .ui-icon-closethick").click();d.PercImportProgressDialog({showVideo:true,backgroundRefreshCallback:function(){d.perc_finderInstance.refresh()},onSuccessCallback:function(H){y("success",H)},startProgressCallback:function(H){d.PercSiteService.createSiteFromUrlAsync(z,function(J,I){H(J,I)})},pollingProgressCallback:d.PercSiteService.createSiteFromUrlStatus,importResultCallback:d.PercSiteService.createSiteFromUrlResult})}return C}function q(w){var v=t();v.selectedtemplate=d("#perc-select-template-type").val()=="base"?v.perc_selected_basetemplate:v.perc_selected_resptemplate;if(v.selectedtemplate.length==0){d.perc_utils.alert_dialog({title:"Error",content:"Please select a template for your homepage."});return}if(v.templatename==null||d.trim(v.templatename)==""){d.perc_utils.alert_dialog({title:"Error",content:"Template name cannot be blank."});return}var x={Site:{name:v.sitename,label:v.sitename,description:v.description,homePageTitle:"Home",navigationTitle:"Home",baseTemplateName:v.selectedtemplate,templateName:d.trim(v.templatename)}};d.PercBlockUI();d(".ui-dialog-titlebar .ui-icon-closethick").click();d.ajax({url:d.perc_paths.SITE_CREATE+"/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify(x),success:function(z,y){w(v.sitename);d.unblockUI()},error:function(A,y,z){var B=d.PercServiceUtils.extractDefaultErrorMessage(A);d.unblockUI();d.perc_utils.alert_dialog({title:"Error",content:B})}})}function j(){d("#perc_newSiteDialog .perc_dialog_field").each(function(){d(this).val("")});d("#perc_selectedTemplate").html("");d(".perc_imageselect_selected").removeClass("perc_imageselect_selected")}function t(){var v=new Object();d("#perc_newSiteDialog .perc_dialog_field").each(function(){v[this.id]=d(this).val()});return v}function p(){var w=d("#perc-base-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"base",hiddenFieldId:"perc_selected_basetemplate"});var v=d("#perc-resp-template-lib").PercScrollingTemplateBrowser({isBase:true,width:590,baseType:"resp",hiddenFieldId:"perc_selected_resptemplate"})}function n(x,w,y,v){for(i=0;i<v.SiteSummary.length;i++){if((v.SiteSummary[i].name+"").toLowerCase()==y.toLowerCase()){return false}}return true}function e(){var v={sitename:{required:true,perc_remote:{url:d.perc_paths.SITES_ALL,contentType:"application/json",type:"GET",dataType:"json",handler:n}},url:{required:"input[type=radio]#type_url:checked",maxlength:2000,noBinary:"noBinary"},description:{maxlength:255},selectedtemplate:{required:true}};return v}function b(){var v={sitename:{required:"Site name is a required field.",perc_remote:"The site name must be unique."},url:{required:"URL is a required field.",noBinary:"The url field contains a reference to a file format which is not allowed."},templatename:{required:"Template name is a required field.",perc_remote:"The template name must be unique."},selectedtemplate:{required:"Selected template is required."}};return v}function k(w){w.prevAll(".perc_dialog_label").removeClass("perc_dialog_label_error");var v=w.next();if(v.find(".perc_field_error").length>0){w.removeClass("perc_field_error");v.remove()}}})(jQuery);(function(b){b.perc_iframe_fix=function(d){b.perc_iframe_scope="perc-iframe-scope";var q=false;var j=b('<div class="perc-iframe-overlay-dnd-container"/>');b("body").append(j);j.height(d.height()).width(d.width()).addClass("ui-layout-ignore").css({overflow:"hidden",position:"absolute",left:"-10000px",top:"0px",zIndex:1000});n();function e(){j.css({left:d.position().left,top:d.position().top});j.height(d.height());j.width(d.width())}function t(){j.css({left:"-10000px",top:"0px"})}function f(){var v=d.contents().find(":data(droppable)");v.each(function(){var D=b(this);var F=b.data(this,"droppable");var B=b("<div/>").addClass("allDroppablesHelpers").addClass("perc-iframe-dnd-overlay-droppable").attr("for",D.attr("id")).width(D.outerWidth()).height(D.outerHeight());j.append(B);var A,y;var z=d;if(b.browser.msie){var x=z[0].contentWindow;var E=x.document.documentElement;A=E.scrollLeft;y=E.scrollTop}else{A=d[0].contentWindow.scrollX;y=d[0].contentWindow.scrollY}var w=b(this).offset().left-A;var C=b(this).offset().top-y;if(b.browser.mozilla||b.browser.safari){w-=window.scrollX;C-=window.scrollY}B.css({position:"absolute",left:w+"px",top:C+"px"});B.droppable({greedy:F.options.greedy,tolerance:F.options.tolerance,accept:F.options.accept,over:function(G){F._over.call(F,G)},activate:function(G){F._activate.call(F,G)},deactivate:function(G){F._deactivate.call(F,G)},out:function(G){F._out.call(F,G)},drop:function(G){F._drop.call(F,G)}})})}function p(){j.empty()}function k(){if(!q){q=true;e();f()}}function h(){t();p();q=false}function n(){var v=b("<div/>").addClass("ui-layout-ignore").droppable({addClasses:false,activate:function(w,x){k(x.draggable)},deactivate:function(){setTimeout(h,100)}});b("body").append(v)}}})(jQuery);(function(h){function j(x,y,v,w){if(!h.perc_fakes.page_service.create_page){h.perc_pathmanager.get_folder_path(x,function(z){d(z,y,v,w)},w)}else{if(false){w("Could not create new page: random failure")}else{v("16777215-101-733")}}}function d(w,A,v,y){var z={};h.each(A,function(){z[this.name]=this.value});var C=null;var B=null;var x=z.addToRecent?true:false;if(z.landingpage){C=h.perc_paths.SECTION_CREATE;pass_in={CreateSiteSection:{pageName:z.page_name,pageTitle:z.page_title,templateId:z.template,pageUrlIdentifier:z.page_name,pageLinkTitle:z.page_linktext,folderPath:w,addToRecent:true}}}else{C=h.perc_paths.PAGE_CREATE;pass_in={Page:{name:z.page_name,title:z.page_title,templateId:z.template,linkTitle:z.page_linktext,folderPath:w,addToRecent:true}}}h.ajax({dataType:"json",data:JSON.stringify(pass_in),contentType:"application/json",type:"POST",url:C,success:v,error:y})}function n(x,v,w){h.ajax({url:h.perc_paths.PAGE_EDIT+"/"+x,type:"GET",success:v,error:w,dataType:"text"})}function b(x,w,v){h.ajax({url:h.perc_paths.PAGE_DELETE+"/"+x,type:"DELETE",success:function(){w()},error:v})}function q(x,w,v){h.ajax({url:h.perc_paths.SITE_DELETE+"/"+x,type:"DELETE",success:w,error:v})}function k(w,x,y,v){if(!h.perc_fakes.page_service.new_asset){v("New asset not yet implemented!")}else{y("54321")}}function e(w,v,A,x){if(!h.perc_fakes.page_service.get_widget_ctypes){function z(B){var C={};h.each(B.AssetDropCriteria,function(){C[this.widgetId]=this.supportedCtypes});A(C)}h.ajax({url:h.perc_paths.ASSET_WIDGET_DROP_CRITERIA+w+"/"+v,type:"GET",dataType:"json",success:z,error:x})}else{var y={"12345":["percPage","article"],"4567":[]};A(y)}}function t(v,w,x){h.ajax({url:h.perc_paths.PAGE_CREATE+"/",type:"POST",contentType:"text/xml",data:w,dataType:"xml",processData:false,success:x,error:function(A,y,z){h.unblockUI();h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(A)})}})}function f(v,w){h.ajax({url:h.perc_paths.PAGE_CREATE+"/"+v,type:"GET",dataType:"text",success:w,error:function(z,x,y){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(z)})}})}function p(x,v,w){h.ajax({url:h.perc_paths.PAGE_PREVIEW+x,type:"POST",contentType:"text/xml",dataType:"xml",data:v,processData:false,success:w,error:function(A,y,z){h.perc_utils.alert_dialog({title:"Error",content:h.PercServiceUtils.extractDefaultErrorMessage(A)})}})}h.perc_pagemanager={save_page:t,render_region:p,load_page:f,create_new_page:j,render_page:n,new_asset:k,delete_page:b,delete_site:q,get_widget_ctypes:e,createPage:d}})(jQuery);(function(j){var f=j.perc_utils;function k(y,x,t,w){n(y,function(z){x(z.PathItem)},v(t),w);function v(z){return function(A){var B=j.map(A.PathItem,function(C){var D=C.path.split("/");if(D[D.length-1]==""){D.pop()}C.path=j.map(D,function(E){return E});C.path_component=D[D.length-1];return C});B=j.grep(B,function(C){return C.type!="percNavTree"&&C.name!=".system"});z(B)}}}function n(z,y,t,w){if(z.length<=2){d(z,true,t,w)}else{var v=j.map(z,function(B){return B});var x=v.pop();function A(C){var B=j.grep(C.PathItem,function(F){var D=F.path.split("/");var E=D.pop();if(E==""){E=D.pop()}return E==x});if(B.length==0){w("Item not found")}else{if(B[0].leaf==true){d(z,false,y,w)}else{d(z,true,t,w)}}}d(v,true,A,w)}}function p(w,t,v){t(w[1])}function e(w,t,v){d(w,false,function(x){t(x.PathItem["folderPath"])},v)}function h(x,v,w){var t=j.map(x,function(y){return y});n(x,function(){t.pop();d(t,true,function(y){v(y,t)},w)},function(y){v(y,t)},w)}function q(z,v,y){var w=z.join("/")+"/";var x=j.perc_utils.acop(z);var t=x.pop();d(x,true,function(B){var A=j.grep(B.PathItem,function(C){return C.name==t});if(A.length>0){y(I18N.message("perc.ui.saveasdialog.error@Duplicate folder"))}else{w=j.perc_utils.encodeURL(w);j.ajax({type:"GET",success:v,error:y,url:j.perc_paths.PATH_ADD_FOLDER+w,dataType:"json"})}},y)}function d(A,y,B,x,v){var w;var z;if(v){w=A;z=j.perc_paths.PATH_PAGINATED_FOLDER+w}else{w=j.perc_utils.encodeURL(A.join("/")+"/");z=j.perc_paths.PATH_FOLDER+w}if(!j.perc_fakes.path_service){if(y){j.ajax({type:"GET",success:B,error:function(E,C,D){if(E.status!=0){x("Error finding path "+w)}},url:z,dataType:"json",cache:false})}else{j.ajax({type:"GET",success:B,error:function(E,C,D){if(E.status!=0){x("Error finding path "+w)}},url:j.perc_paths.PATH_ITEM+w,dataType:"json",cache:false})}}else{var t={"/":{PathItem:[{name:"Sites",leaf:"false",path:"/Sites/"}]},"/Sites/":{PathItem:[{name:"Test",leaf:"false",path:"/Sites/Test/"},{name:"TestTwo",leaf:"false",path:"/Sites/TestTwo/"}]},"/Sites/Test/":{PathItem:[{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}]},"/Sites/Test/Test/":{PathItem:{name:"Test",leaf:"true",path:"/Sites/Test/Test/"}},"/Sites/TestTwo/":{PathItem:[{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}]},"/Sites/TestTwo/TestTwo/":{PathItem:{name:"TestTwo",leaf:"true",path:"/Sites/TestTwo/TestTwo/"}}};B(t[w])}}function b(x,y){var t=function(z){y(true,z.ItemProperties)};var v=function(B,z,A){y(false,j.PercServiceUtils.extractDefaultErrorMessage(B))};var w=j.perc_utils.encodeURL(x);j.ajax({type:"GET",success:t,error:v,url:j.perc_paths.PATH_ITEM_PROPERTIES+w,dataType:"json",cache:false})}j.perc_pathmanager={is_leaf:k,open_path:d,get_folder_path:e,get_site_id:p,open_containing_folder:h,add_folder:q,getItemProperties:b}})(jQuery);(function(b){b.perc_build_new_folder_button=function(d,j){var h=b.perc_utils;var n=["",b.perc_paths.SITES_ROOT_NO_SLASH];var f={};var t=null;var e=b("<a id='perc-finder-new-folder' class='perc-font-icon ui-disabled' href='#' title='Click to create new folder'><span class='icon-plus'></span><span class='icon-folder-close'></span></a>").perc_button().click(function(){p()});function p(){b.PercFolderHelper().getAccessLevelByPath(n.join("/"),false,function(w,v){if(w==b.PercFolderHelper().PERMISSION_ERROR||v==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create a folder here."});return}else{b.PercBlockUI(b.PercBlockUIMode.CURSORONLY);b.PercPathService.createNewFolder(n.join("/"),function(y,x){if(y==b.PercServiceUtils.STATUS_SUCCESS){f=x;d.refresh(function(){var z=b(".perc-finder").css("visibility")=="visible";if(z){h.makeFolderEditable(f.PathItem)}});b.unblockUI()}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:x})}})}})}function k(v){n=v;q(true);if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){q(false)}else{if(v[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&v.length<4){q(false)}else{if(v.length==2&&v[1]==b.perc_paths.SITES_ROOT_NO_SLASH){q(false)}else{b.PercFolderHelper().getAccessLevelByPath(v.join("/"),true,function(x,w){if(x==b.PercFolderHelper().PERMISSION_ERROR||w==b.PercFolderHelper().PERMISSION_READ){q(false)}})}}}}function q(v){if(v){b(".perc-finder-menu #perc-finder-new-folder").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(p)}else{b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}d.addPathChangedListener(k);return e}})(jQuery);(function(b){b.perc_build_new_page_button=function(n,e){var k;var h=b('<a id="mcol-new-page" class="perc-font-icon" href="#" title="Click to create new page" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file"></span></a>').perc_button();function d(p){k=p;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){f(false)}else{if(p[1]==b.perc_paths.SITES_ROOT_NO_SLASH){h.show();f(true);if(p.length<3){f(false)}else{b.PercFolderHelper().getAccessLevelByPath(p.join("/"),true,function(t,q){if(t==b.PercFolderHelper().PERMISSION_ERROR||q==b.PercFolderHelper().PERMISSION_READ){f(false)}})}}else{if(p[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||p[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){h.hide()}}}}function f(p){if(p){h.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(j)}else{h.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function j(){var q=n.getCurrentItem();var p="";if(q!=null){p=q.folderPaths;if(q.type=="Folder"){p=q.folderPath}}b.PercUserService.getAccessLevel("percPage",-1,function(v,t){if(v==b.PercServiceUtils.STATUS_ERROR||t==b.PercUserService.ACCESS_READ||t==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Page",content:"You are not authorized to create a new page."});return}else{if(e){e.confirm_if_dirty(function(){b.PercNewPageDialog().openDialog(k.join("/"))})}else{open_new_page_dialog(b.PercNewPageDialog().openDialog(k.join("/")),null)}}},p)}n.addPathChangedListener(d);return h}})(jQuery);(function(d){var b;d.perc_build_copy_page_button=function(j,p){var e=d("<a id='perc-finder-copy-page' href='#' title='Click to copy selected page'>Copy</a>").click(function(v){q()});function q(){d.PercBlockUI(d.PercBlockUIMode.CURSORONLY);var y=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE");var x=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE");var v=d("#perc-finder-listview .perc-datatable-row-highlighted");if(y[0]==undefined&&x[0]==undefined&&v.size()==0){return}b=y.text();if(!b||b==""){b=x.text()}var A;if(v.size()>0){listSelectedRowData=v.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"){A=listSelectedRowData.id;b=listSelectedRowData.name}}else{if(y[0]!=undefined){A=y.attr("id")}else{A=x.attr("id")}}var w=j.getCurrentItem();var z="";if(w!=null){z=w.id}d.PercUserService.getAccessLevel("percPage",z,function(C,B){if(C==d.PercServiceUtils.STATUS_ERROR||B==d.PercUserService.ACCESS_READ||B==d.PercUserService.ACCESS_NONE){d.perc_utils.alert_dialog({title:"Copy Page",content:"You are not authorized to copy the page '"+b+".'"});d.unblockUI();return}else{A=A.replace("perc-finder-listing-","");f(A)}})}function f(v){var w=j.getCurrentPath();var x=j.getPathItemById(v);d.PercPageService.copyPage(v,function(z,y){if(z=="error"){t(y);j.refresh()}else{j.refresh(function(){var B=y.data.split("/");var A=B[B.length-1];w[w.length-1]=A;j.open(w)})}d.unblockUI()})}function t(v){v=v.replace("PAGE_NAME",b);d.perc_utils.alert_dialog({id:"perc-finder-copy-page-error",title:"Error",content:v})}function n(A){var x=A[A.length-1];if(A[1]==d.perc_paths.SITES_ROOT_NO_SLASH){if(A.length<4){k(false)}else{var z=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-PAGE.perc_last_selected");var y=d(".mcol-opened.perc-listing-type-percPage.perc-listing-category-LANDING_PAGE.perc_last_selected");var v=d(".mcol-listing.perc-listing-type-Folder.perc-listing-category-FOLDER.ui-draggable.perc_last_selected.ui-droppable[title='"+x+"']").eq(0).attr("id");var B=d(".mcol-listing.perc-listing-type-Folder.perc-listing-category-SECTION_FOLDER.perc_last_selected.ui-droppable[title='"+x+"']").eq(0).attr("id");var w=d("#perc-finder-listview .perc-datatable-row-highlighted");if(w.size()>0){listSelectedRowData=w.data("percRowData");h(A,function(C){if(C&&(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE")){k(true)}else{k(false)}});return}else{if(z[0]!=undefined||y[0]!=undefined){h(A,function(C){if(!C||v!=undefined||B!=undefined){k(false)}else{k(true)}})}else{k(false)}}}}else{k(false)}}function h(w,x){var v=w.slice(0,w.length-1).join("/");d.PercFolderHelper().getAccessLevelByPath(v,false,function(z,y){if(z==d.PercFolderHelper().PERMISSION_ERROR){d.perc_utils.alert_dialog({title:"Error",content:y});return}else{x(!(y==d.PercFolderHelper().PERMISSION_READ));return}})}function k(v){if(v){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(q)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}j.addPathChangedListener(n);return e}})(jQuery);(function(b){b.perc_build_download_button=function(j,f){var e=b('<a id="perc-finder-download" href="#" title="Click to download the selected file">Download File</a>');function d(p){if(p[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH&&p.length>4){q=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(q==undefined){var q=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened.perc_last_selected").data("spec")}if(q!=undefined&&q.type=="FSFile"&&q.leaf){k(true);h(true);return}}k(false);h(false)}function h(p){if(p){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(n)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function n(){}function k(p){var q;if(p){q=b.perc_paths.WEBRESOURCESMGT+"/"+j.getCurrentPath().slice(3).join("/")}else{q="#"}e.attr("href",q)}j.addPathChangedListener(d);return e}})(jQuery);(function(b){b.perc_build_upload_button=function(j,f){var e=b('<a id="perc-finder-upload" href="#" title="Click to upload a file">Upload File...</a>').click(d);function k(n){if(n.length>3&&b.perc_paths.DESIGN_THEMES==n[0]+"/"+n[1]+"/"+n[2]+"/"+n[3]){h(true);return}h(false)}function h(n){if(n){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(d)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function d(){b.perc_upload_theme_file_dialog.open(j)}j.addPathChangedListener(k);return e}})(jQuery);(function(b){b.perc_build_folderproperties_button=function(d,h){var e=b('<a id="perc-finder-folderproperties" href="#" title="Folder properties">Folder properties</a>');var f=undefined;var p=undefined;function q(y){if(y.length>1&&y[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){n(false);p=undefined;return}f=b("#perc-finder-listview .perc-datatable-row-highlighted");if(f.length>0){p=f.data("percRowData");if(p.type!="Folder"&&p.type!="FSFolder"){f=undefined}}else{var z;z=".mcol-listing.perc-listing-type-FSFolder.mcol-opened";z+=", .mcol-listing.perc-listing-type-Folder.mcol-opened";var v=b(z);var x;for(x=0;x<v.length;x++){var w=b(v[x]);var t=w.data("spec").path;if(t==y.join("/")+"/"){f=w;p=w.data("spec")}}}if(f!=undefined&&f.length>0){n(true)}else{n(false);p=undefined}}function n(t){if(t){e.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(k)}else{e.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}e.trigger("actions-change-enabled-state")}function k(){if(p.category=="SYSTEM"){b.perc_utils.alert_dialog({title:"Warning",content:"This is a system folder.  Its properties cannot be modified."});return}else{if(p.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){var t=pathItem.category=="SECTION_FOLDER"?"section":"folder";b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to modify the properties of this "+t+"."});return}else{if(p.category=="SECTION_FOLDER"){b.perc_utils.alert_dialog({title:"Warning",content:"Use the navigation editor to change section properties."});return}}}b.PercFolderPropertiesDialog().open(p,function(w,v){if(v===undefined){if(w!==""&&w!==p.name){var x=p.folderPaths+"/"+w;x=x.substring(1);x=x.replace("/Folders/$System$","");b.perc_finder().open(x.split("/"))}else{b.perc_finder().refresh()}}})}function j(t){var v;if(t){v=b.perc_paths.WEBRESOURCESMGT+"/"+d.getCurrentPath().slice(3).join("/")}else{v="#"}e.attr("href",v)}d.addPathChangedListener(q);return e}})(jQuery);(function(b){b.perc_build_actions_button=function(z,f){var h=b.perc_build_copy_page_button(z,f);var j=b.perc_build_folderproperties_button(z,f);var B=b.perc_build_download_button(z,f);var x=b.perc_build_upload_button(z,f);var e=[h,j,B,x];var d=A(e).hover(n,q);var C='<div id="perc-finder-actions" ><a id="perc-finder-actions-button" class="perc-font-icon" title="Select an action" href="#"><span class="icon-cog"></span><span class="icon-caret-down"></span></a></div>';var k=b(C).append(d).hover(n,q);var y=false;function q(){y=false;setTimeout(function(){if(!y){t(false)}},500)}function n(D){var E=b(D.target);if(E.attr("id")==k.attr("id")){y=true;return}if(E.is("#perc-finder-actions *")){y=true;return}}function p(){if(b("#perc-finder-actions-button").hasClass("ui-disabled")){return false}else{if(d.css("display")=="none"){t(true)}else{t(false)}return false}}function t(F){if(F){var E=k.position().left+k.outerWidth()-d.outerWidth()-1;var D=k.position().top+k.outerHeight()+9;d.css("top",D).css("left",E).css("display","block")}else{d.hide()}}function w(D){var E=b("#perc-finder-actions-button");if(D){E.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(p)}else{E.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}function A(E){var F=b('<ul class="perc-actions-menu box_shadow_with_padding">');var D=b('<li class="perc-actions-menu-item">');for(l=0;l<E.length;l++){D.clone().append(E[l]).appendTo(F)}return F}function v(){var D=e.length;var F=0;function E(){var G=b(this).hasClass("ui-enabled");if(D==1&&F==e.length-1){w(G);D=e.length;F=0}else{if(D==1&&F<e.length-1){w(true);D=e.length;F=0}else{if(!G){F++}D--}}}for(m=0;m<e.length;m++){e[m].bind("actions-change-enabled-state",E)}}v();return k}})(jQuery);(function(b){b.perc_build_delete_page_button=function(v,p){var f=b.perc_utils;var d=b.perc_finder();var k=["","site"];var n="<span id='perc-delete-warn-msg'>";var j="</span>";var e=b('<a id="perc-finder-delete" class="perc-font-icon icon-remove" title="Click to delete selected item" href="#" ></a>').unbind().perc_button().click(t);function t(){var x=k;if(b.perc_utils.isPathUnderDesign(x)){x=b.perc_utils.encodePathArray(k)}b.PercFolderHelper().getAccessLevelByPath(x.join("/"),false,function(z,y){if(z==b.PercFolderHelper().PERMISSION_ERROR){b.perc_utils.alert_dialog({title:"Error",content:y});v.refresh();return}else{if(y==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to delete this."});return}else{q()}}})}function q(){b.perc_pathmanager.open_path(f.acop(k),false,function(I){function H(K,N,L){var M=I18N.message("perc.ui.deleteassetdialog.title@Delete Asset");C(K,"asset",M,function(){var O=I.PathItem["id"];b.PercAssetService.forceDeleteAsset(O,y(O,"asset"),H)})}function F(K,N,L){var M=I18N.message("perc.ui.deletepagedialog.title@Delete Page");C(K,"page",M,function(){var O=I.PathItem["id"];b.PercPageService.forceDeletePage(O,y(O,"page"),F)})}function C(M,L,O,N){var K=b.PercDeleteItemHelper.extractDeleteErrorMessage(M,I.PathItem["name"],L);if(K.canForceDelete){A(K.dialogid,O,K.content,K.chkBoxId,N)}else{f.alert_dialog({id:K.dialogid,title:O,content:n+K.content+j})}}function A(P,N,K,O,M){var L=b("<div/>").append(n+K+j).perc_dialog({id:P,title:N,success:function(){if(b("#"+O).length>0){if(b("#"+O).get(0).checked){M()}}},width:500,resizable:false,percButtons:{Ok:{id:"perc-finder-delete-approved-ok",cls:"ui-state-disabled",click:function(){}},Cancel:{id:"perc-finder-delete-approved-cancel",cls:"perc-cancel",click:function(){L.remove()}}},open:function(){b("#"+O).click(function(){if(b(this).get(0).checked){b("#perc-finder-delete-approved-ok").click(function(){if(b("#"+O).length>0){if(b("#"+O).get(0).checked){M();L.remove()}}});b("#perc-finder-delete-approved-ok").removeClass("ui-state-disabled")}else{b("#perc-finder-delete-approved-ok").addClass("ui-state-disabled")}})}})}function E(){b.PercBlockUI();b.perc_pagemanager.delete_site(I.PathItem["name"],function(){dialog.remove();var K={type:"site",name:I.PathItem["name"]};d.fireActionEvent(d.ACTIONS.DELETE,K);setTimeout(function(){b.PercDirtyController.setDirty(false);b.PercNavigationManager.goToLocation(b.PercNavigationManager.getView(),null,null,null,null,null,null)},200)},function(K){b.unblockUI();site_delete_handle_error(K)})}function D(){var K=I.PathItem["id"];b.PercAssetService.deleteAsset(K,function(){y(K,"asset")},H)}function z(){var K=I.PathItem["id"];b.PercRedirectHandler.createRedirect(I.PathItem.path,"","page").fail(function(L){b.perc_utils.alert_dialog({title:"Redirect creation error",content:L,okCallBack:function(){b.perc_pagemanager.delete_page(K,function(){y(K,"page")},F)}})}).done(function(){b.perc_pagemanager.delete_page(K,function(){y(K,"page")},F)})}function y(P,N){setTimeout(function(){v.refresh()},200);var M=false;if(P==b.PercNavigationManager.getId()){M=true;p.clear()}var O={type:N,id:P,isOpen:M};d.fireActionEvent(d.ACTIONS.DELETE,O);b("form.perc-template-pages-controls").submit();var K=jQuery.Event("click");K.deletedPageId=P;b(".resetPaging").trigger(K);var L=b.PercNavigationManager.getView();if(N=="page"&&L!=b.PercNavigationManager.VIEW_EDITOR){G(L)}}function G(L){var M={templateId:memento.templateId,pageId:null};var K=$j.deparam.querystring();$j.PercNavigationManager.goToLocation(L,K.site,null,null,null,K.path,null,M)}if(I.PathItem["type"]=="percPage"){if(I.PathItem["category"]=="LANDING_PAGE"){return}else{b.PercPageService.validateDeletePage(I.PathItem["id"],function(){var L=b.PercDirtyController.dirtyObjectType;var K={id:"perc-finder-delete-confirm",title:"Delete Page",question:n+"Page: "+I.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletepagedialog.warning@Confirm")+j,success:function(){b.PercViewReadyManager.setProcessingFlag();var M=b.PercDirtyController.isDirty();p.confirm_if_dirty(function(){if(M){p.save(L,z)}else{z()}},function(){},{title:I18N.message("perc.ui.deletepagedialog.title@Delete Page"),question:"Page: "+I.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["page",L]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};f.confirm_dialog(K)},F)}}else{if(I.PathItem["type"]=="Folder"){if(I.PathItem["category"]=="FOLDER"){function B(){if(b.PercNavigationManager.isAdmin()){b.PercPathService.deleteFolderSkipValidation(k.join("/"),k[k.length-1],k[1],function(K){w(K)})}else{b.PercPathService.deleteFolder(k.join("/"),k[k.length-1],k[1],w)}}if(I.PathItem.path.match("^/Sites/")||I.PathItem.path.match("^//Sites/")){b.PercRedirectHandler.createRedirect(I.PathItem.path,"","folder").fail(function(K){b.perc_utils.alert_dialog({title:"Redirect creation error",content:K,okCallBack:function(){B()}})}).done(function(){B()})}else{B()}}else{return}}else{if(I.PathItem["type"]=="FSFolder"){var x=b.perc_utils.encodePathArray(k);b.PercPathService.deleteFSFolder(x.join("/"),k[k.length-1],w)}else{if(I.PathItem["type"]=="FSFile"){var x="";var J=I.PathItem["path"].split("/");J=J.slice(3,J.length-1);b.each(J,function(K,L){x=x+"/"+L});x=b.perc_utils.encodeURL(x);b.PercWebResourcesService.deleteFile(x,k[k.length-1],w)}else{b.PercAssetService.validateDeleteAsset(I.PathItem["id"],function(){var L=b.PercDirtyController.dirtyObjectType;var K={id:"perc-finder-delete-confirm",title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:n+I18N.message("perc.ui.deleteassetdialog.tag@Asset")+": "+I.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deleteassetdialog.warning@Confirm")+"<br/><br/>"+I18N.message("perc.ui.common.question@Continue")+j,success:function(){var M=b.PercDirtyController.isDirty();p.confirm_if_dirty(function(){if(M){p.save(L,D)}else{D()}},function(){},{title:I18N.message("perc.ui.deleteassetdialog.title@Delete Asset"),question:"Asset: "+I.PathItem["name"]+"<br/><br/>"+I18N.message("perc.ui.deletedialog.warning@Dirty",["asset",L]),yes:I18N.message("perc.ui.common.label@Continue")})},yes:"Delete"};f.confirm_dialog(K)},H)}}}}},f.show_error)}function w(y){setTimeout(function(){v.refresh()},200);var x={type:"folder"};d.fireActionEvent(d.ACTIONS.DELETE,x)}function h(x){k=x;b.perc_pathmanager.open_path(f.acop(x),false,function(z){var B=z.PathItem.type;var y=z.PathItem.category;var A=(typeof(y)!="undefined")&&(y=="LANDING_PAGE"||y=="SECTION_FOLDER"||y=="SYSTEM");if(B=="Folder"&&z.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){A=true}else{if((y=="ASSET"||y=="PAGE")&&z.PathItem.accessLevel==b.PercFolderHelper().PERMISSION_READ){A=true}}if((B=="FSFolder"||B=="FSFile")&&k.length>=5&&z.PathItem.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){A=false}if(!A&&k.length>2){if(B=="site"){b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-disabled").addClass("ui-enabled").unbind().click(t)}}else{b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}},function(y){var z=b.PercServiceUtils.extractDefaultErrorMessage(y);b.perc_utils.alert_dialog({title:"Error",content:z})})}v.addPathChangedListener(h);return e}})(jQuery);(function(b){b.perc_build_preview_button=function(h,f){var d=b("<a id='perc-finder-preview' class='perc-font-icon icon-eye-open' href='#' title='Launch Preview'></a>").perc_button().click(function(n){k()});function k(){if(b("#perc-finder-listview .perc-datatable-row-highlighted").size()>0){var p=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(p.category=="LANDING_PAGE"||p.category=="PAGE"){h.launchPagePreview(p.id)}else{if(p.category=="ASSET"){h.launchAssetPreview(p.id)}}}else{var q=b(".mcol-opened.perc-listing-type-percPage");var n=b(".mcol-opened.perc-listing-category-ASSET");if(q.size()>0){h.launchPagePreview(q.data("spec").id)}else{if(n.size()>0){h.launchAssetPreview(n.data("spec").id)}}}}function j(v){var p=b(".mcol-opened.perc-listing-type-percPage");var n=b(".mcol-opened.perc-listing-category-ASSET");var q=b("#perc-finder-listview .perc-datatable-row-highlighted");if(v[1]=="Sites"&&v.length<4){e(false)}else{if(q.size()>0){listSelectedRowData=q.data("percRowData");if(listSelectedRowData.category=="LANDING_PAGE"||listSelectedRowData.category=="PAGE"||listSelectedRowData.category=="ASSET"){e(true)}else{e(false)}}else{if(p.size()>0){var t=p.data("spec").path.split("/");if(t.length==v.length&&b(t).last()[0]==b(v).last()[0]){e(true)}else{e(false)}}else{if(n.size()>0){var t=n.data("spec").path.split("/");if(t.length==v.length&&b(t).last()[0]==b(v).last()[0]){e(true)}else{e(false)}}else{e(false)}}}}}function e(n){if(n){b("#perc-finder-preview").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(k)}else{b("#perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}h.addPathChangedListener(j);return d}})(jQuery);(function(b){var e={height:200,minWidth:952,minHeight:100,get_max_height:function f(){return b(window).innerHeight()-150}};b.perc_finder=function(){if(b.perc_finderInstance==null){b.perc_finderInstance=d()}return b.perc_finderInstance};function d(){b("body").append('<div id="perc-wide_scroll_div_one" style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div id="wide_scroll_div_two" style="height:100px;width:100%"></div></div>');var V=b("#perc-wide_scroll_div_one").width()-b("#wide_scroll_div_two").innerWidth();b("#perc-wide_scroll_div_one").remove();var Z="perc-finder-listing-";var ah=100;var M=true,t=false,ae="perc-finder-expand-state",C=C(),ap=A(C),U=b.perc_utils,az=[],z=null;actionListeners=[],openListeners=[],_finderPathIdArray={},path_changed=function(aL){az=aL},finderOpenInProgress=false,lastClickPath=null,dragDelay=(b.PercNavigationManager.isAutoTest()?0:250),actions={DELETE:"delete",FINDER_OPEN_START:"open_start",FINDER_OPEN_END:"open_end"},isLibMode=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";b.perc_utils.preLoadImages("/cm/images/images/loading.gif");function at(aN){aN.preventDefault();var aO,aM,aL,aP;aL=b(this).parents(".perc-finder-goto-or-search");aP=aL.find("input.perc-finder-goto-or-search:first");aO=aP.val();aM=/^\//.test(aO);if(aO){if(aM){b("#perc-finder-go-action").trigger("click")}else{b("#perc-finder-item-search").val(aO);b("#perc-finder-search-submit").trigger("click")}}return false}b("body").on("click",".perc-action-goto-or-search",at);b.perc_filterField(b("#mcol-path-summary"),b.perc_textFilters.PATH);b("#mcol-path-summary").bind("keyup",function(aL){if(aL.keyCode==13){b("#mcol-path-summary").blur();at.apply(this,[aL]);b("#mcol-path-summary").focus();aL.preventDefault();aL.stopPropagation()}if(aL.keyCode==27||aL.keyCode==9){b("#mcol-path-summary").val(H().join("/")).blur();b("#perc-finder-item-search").blur();aL.preventDefault();aL.stopPropagation()}am(false)});b(document).mousedown(function(aL){if(aL.target.id!="perc-finder-go-action"&&aL.target.id!="mcol-path-summary"){b("#mcol-path-summary").blur();if(aL.target.id!="perc-finder-search-submit"&&aL.target.id!="perc-finder-listing-Search"&&b(aL.target).parents(".perc-datatable-row").length>0){b("#mcol-path-summary").val(H().join("/"))}}if(aL.target.id!="perc-finder-item-search"){b("#perc-finder-item-search").blur()}am(false)});b("#perc-finder-go-action").click(function(){var aL=true;ai(aL)});b(".perc-finder-outer").hover(function q(){b(this).removeClass("ui-disabled")},function ab(){b(this).addClass("ui-disabled")});function aI(aM){var aL=aM.split("/");for(i=0;i<aL.length;i++){if(aL[i]==".."){if(i-1>=0){aL.splice(i-1,2);i=i-2}else{aL.splice(i,1);i--}}if(aL[1]=="."){aL.splice(i,1);i--}}return aL.join("/")}function ai(aN){b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");b("#perc-finder-item-name").removeClass("mcol-opened");var aM=b.trim(b("#mcol-path-summary").val());var aL=H().join("/");aM=aM.replace(/\/(\/)+/g,"/");aM=aI(aM);aM=(aM.charAt(0)!="/")?"/"+aM:aM;aM=(aM=="/"||aM=="")?"/"+H()[1]:aM;if(aM==aL&&aN==true&&(b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_SEARCH_RESULTS&&b.Percussion.getCurrentFinderView()!=b.Percussion.PERC_FINDER_RESULT)){return}else{b.PercPathService.validatePath(aM,function(aP,aO){if(aP==b.PercServiceUtils.STATUS_SUCCESS){b("#mcol-path-summary").val(aO);if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var aR=$j.PercComponentWrapper("perc-action-finder-go-clicked",["perc-ui-component-finder"]);var aQ=$j.PercViewReadyManager.setWrapper(aR);if(!aQ){if(!aQ){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}W(aO.split("/"),function(){})}else{am(true,aO)}})}}function aG(aL,aN,aO){var aM=aN;if(b.perc_utils.isPathUnderDesign(aN)){aM=b.perc_utils.encodePathArray(aN)}b.PercPathService.validatePath(aM.join("/"),function(aQ,aP){if(aQ==b.PercServiceUtils.STATUS_SUCCESS){aO(aL)}else{b.perc_utils.alert_dialog({title:"Error",content:"Path not found: "+aN.join("/")});ay()}})}function am(aL,aN){var aM=b(".perc-finder-message");if(aL){aM.empty().append('<i class="icon-bell"></i>');b('<label class="perc-finder-error"></label>').text(aN).appendTo(aM);aM.fadeIn()}else{aM.fadeOut(function(){b(this).empty()})}fixIframeHeight();fixHeight()}function D(){return/collapsed/.test(b.cookie(ae))}function Q(){return(""+b.cookie(ae)).replace(/[^0-9.]/g,"")}function aE(aL){if(!isLibMode&&Q()!==aL){var aM=D()?"collapsed":"expanded";b.cookie(ae,aM+aL)}}function al(aN){if(!isLibMode){var aL,aM;aL=Q();aM=aN?"expanded":"collapsed";b.cookie(ae,aM+aL)}}function ax(){fixBottomHeight();fixIframeHeight();fixHeight();if(b("#perc_site_map").length>0){b("#perc_site_map").perc_site_map("layoutAll")}}function ak(aO){var aP,aN,aL=b(".perc-finder-body");if(b(".perc-finder-body").is(":visible")===aO){return}aP=b("#perc-finder-expander");aN=aP.parents(".perc-finder-outer");al(aO);if(aO){aN.removeAttr("collapsed");aL.slideDown(ax);aP.removeClass("icon-plus-sign").addClass("icon-minus-sign")}else{aN.attr("collapsed",true);aL.slideUp(ax);aP.removeClass("icon-minus-sign").addClass("icon-plus-sign")}var aQ=b("#frame");var aR=b(".perc-main");var aM=b("#bottom")}function an(){ak(!b(".perc-finder-body").is(":visible"))}b("#perc-finder-expander").click(an);function j(aM,aL){aM=parseInt(aM,10);return isNaN(aM)?aL:aM}var aK=(function(){var aM,aS,aT;function aP(){b(".perc-finder").addClass("ui-resizable-resizing");aM=b(".perc-finder .ui-resizable");aS=j(b(".perc-pagingbar-finder").outerHeight(),0)}function aU(){aQ()}function aL(aV){ax();b(this).css("width","auto");if(aV){aE(aT)}b(".perc-finder").removeClass("ui-resizable-resizing")}function aO(aV){return aV&&aV.scrollWidth>aV.clientWidth?V:0}function aQ(){var aV=b(".perc-finder")[0];aT=b(".perc-finder-body").height();aM.css("height",aT-aO(aV)-aS)}function aN(aV){if(isLibMode){aV=e.get_max_height()-100}aV=j(aV,b(".perc-finder-body").height());if(aV!==aT){aT=Math.max(aV,e.minHeight);aT=Math.min(aV,e.get_max_height());b(".perc-finder-body").css("height",aT);aE(aT);b(".perc-finder").trigger("resize")}aP();aQ();aL()}b(".perc-finder-body").resizable({handles:"s",minHeight:e.minHeight,maxHeight:e.get_max_height(),start:aP,resize:aU,stop:aL});b(window).resize(function aR(){b(".perc-finder-body").resizable("option","maxHeight",e.get_max_height())});aN(j(Q(),e.height));return aN});var af=b("[view=PERC_SITE]").length||!D();if(isLibMode){af=true}ak(af);return{on:function(){b(".perc-finder-body").on.apply(b(".perc-finder-body"),arguments)},ACTIONS:actions,elem:ap,open:W,search:I,addPathChangedListener:O,executePathChangedListeners:av,finderOpenInProgress:finderOpenInProgress,update_finder_height:aK,goToNewPath:ai,refresh:ay,idFromItem:aA,addActionListener:E,removeActionListener:p,fireActionEvent:n,addOpenListener:N,removeOpenListener:y,getCurrentPath:H,getPathItemByPath:aJ,getPathItemById:S,getParentPathItemByPath:aq,launchPagePreview:ad,launchPagePreviewByPath:aB,launchAssetPreview:w,insertAfter:aw,maxResults:ah,flagChangeView:M,onDragStart:x,onDragStop:P,scrollIntoView:aH,setStateButtonsDesignNode:F,getCurrentItem:aC,setCurrentItem:aj};function aC(){return z}function aj(aL){return z=aL}function au(aL,aM){_finderPathIdArray[aL]=aM}function aA(aL){var aM=typeof(aL.id)=="undefined"?aL.path.split("/")[1]:aL.id;return Z+aM}function ay(aL){b(".mcol-opened").each(function(){b(this).removeClass("mcol-opened")});var aN=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR&&(aN==null||aN.wrapperName!="perc-action-finder-refresh")){var aO=[];aO.push("perc-ui-component-finder");var aP=$j.PercComponentWrapper("perc-action-finder-refresh",aO);var aM=$j.PercViewReadyManager.setWrapper(aP);if(!aM){if(!aM){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}W(az,aL)}function H(){return az.slice(0)}function I(aM){X(C);aF(C).filter(".mcol-opened").removeClass(".mcol-opened");var aL=aw(C);b.each(aM,function(){J(aL,K(this,h(aL)))})}function h(aL){return function(aN,aO){var aM=U.acop(aO);aM.pop();B(aN,aL,[aN.data("name")],aM,function(){})}}function ao(aL){finderOpenInProgress=false;n(actions.FINDER_OPEN_END,null);az=["","Sites"];ay(function(){})}function W(aN,aL){if(finderOpenInProgress){return}finderOpenInProgress=true;n(actions.FINDER_OPEN_START,null);var aM=L([""]);aa(C,aM,aN.slice(1),[""],aL)}function aa(aO,aL,aQ,aM,aN){if(aQ[aQ.length-1]===""){aQ.pop()}if(aQ.length>0){aO.data("child",aQ[0])}if(aM.length>1&&aM[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){F(true)}else{F(false)}b(".perc-finder-panel-loading").remove();T(aO).append('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>');aL(aP,aO);function aP(aR,aU){if(aU){aO.find(".mcol-direc-wrapper").empty().addClass("mcol-direc-wrapper-last").append(aU)}else{ac(aO,aR)}if(aQ.length==0){$j("#mcol-path-summary").val(aM.join("/"));finderOpenInProgress=false;n(actions.FINDER_OPEN_END,null);path_changed(aM);X(aO);aF(aO).filter(".mcol-opened").removeClass("mcol-opened");var aT=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aT!=null){aT.handleComponentProgress("perc-ui-component-finder","complete")}if(aN){aN()}}else{var aS=aF(aO).filter(function(){if(typeof(b(this).data("name"))!="undefined"&&typeof(aQ[0])!="undefined"){return b(this).data("name")==aQ[0]}return false});b.PercQueuePostAJAX(function(){setTimeout(function(){B(aS,aO,aQ,aM,aN)},150)})}aK();var aT=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aT!=null){aT.handleComponentProgress("perc-ui-component-finder","processing")}}}function v(){var aL=b(this).parents("td");var aM=aL.data("startIndex")-ah;aL.data("startIndex",aM);G(aL,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function ar(){var aL=b(this).parents("td");var aM=aL.data("startIndex")+ah;aL.data("startIndex",aM);G(aL,b(this).closest(".perc-paging-finder").is(".perc-paging-finder-bottom"))}function G(aM,aN){var aO=aM.data("path");var aP=aM.data("startIndex");var aL=b.perc_utils.encodeURL(aO.join("/"))+"/?startIndex="+aP+"&maxResults="+ah;b.perc_pathmanager.open_path(aL,true,aQ,ao,true);function aQ(aS){var aR={};b.each(b.perc_utils.convertCXFArray(aS.PagedItemList["childrenInPage"]),function(){aR[U.extract_path_end(this.path)+"_item"]=this});aM.data("totalResult",aS.PagedItemList["childrenCount"]);aM.data("startIndex",aS.PagedItemList["startIndex"]);ac(aM,aR);if(aN){aM.find(".mcol-direc-wrapper").attr({scrollTop:aM.find(".mcol-direc-wrapper").attr("scrollHeight")})}}}function R(aM,aL){var aQ=aM.data("startIndex");var aN=aM.data("totalResult");var aO="";if(ah>=aN){var aS=aN-(aQ-1);aO=aS+" item"+(aS!=1?"s":"")}else{var aP=((aQ-1+ah>aN)?aN:(aQ-1+ah));aO=aQ+" - "+aP+" of "+aN}var aR=b('<div class="perc-paging-finder"/>').data("name",aL).append(b('<span class="perc-paging-text" />').text(aO)).append(b('<div class="perc-paging-finder-navigator" />').append(b('<a class="perc-paging-finder-previous" />').text("<<").click(v)).append(b('<a class="perc-paging-finder-next"/>').text(">>").click(ar))).addClass(aL);aR=b("<div/>").append(aR).append("<div style='clear:both'/>");if((aN-(aQ-1+ah))>0){aR.find(".perc-paging-finder-next").removeClass("perc-hide-navigator")}else{aR.find(".perc-paging-finder-next").addClass("perc-hide-navigator")}if(aQ>ah){aR.find(".perc-paging-finder-previous").removeClass("perc-hide-navigator")}else{aR.find(".perc-paging-finder-previous").addClass("perc-hide-navigator")}return aR}function ac(aM,aN){aM.find(".mcol-direc-wrapper").removeClass("mcol-direc-wrapper-last");var aO={};b.each(aF(aM),function(){aO[b(this).data("name")+"_item"]=b(this)});var aL=U.odiff(aN,aO);b.each(U.odiff(aO,aN),function(){if(this.is(".mcol-opened")){X(aM)}if(!t&&!this.hasClass("ui-resizable-e")&&!this.parent().hasClass("perc-view-column-fixed")){this.remove()}});if(aM.data("path").join("/")!=""&&aM.find(".perc-paging-finder-top").size()==0){T(aM).prepend(R(aM,"perc-paging-finder-top"))}b.each(aL,function(){if(!isLibMode||this.path!="/Search/"){J(aM,K(this,h(aM)))}})}function B(aQ,aO,aR,aM,aN){if(aQ.length==0){path_changed(aM);finderOpenInProgress=false;$j("#mcol-path-summary").val(aM.join("/"));var aP=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aP!=null){aP.handleComponentProgress("perc-ui-component-finder","complete")}}else{if(aQ.is(".mcol-opened")){aM.push(aR.shift());aH(aQ);if(typeof(aQ.data("spec"))!="undefined"){z=aQ.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aQ.addClass("perc_last_selected")}aa(aO.next(),aQ.data("loader"),aR,aM,aN)}else{X(aO);aF(aO).filter(".mcol-opened").removeClass("mcol-opened");aQ.addClass("mcol-opened");aH(aQ);if(typeof(aQ.data("spec"))!="undefined"){z=aQ.data("spec");b(".perc_last_selected").removeClass("perc_last_selected");aQ.addClass("perc_last_selected")}var aL=aw(aO);aM.push(aR.shift());aa(aL,aQ.data("loader"),aR,aM,aN)}}aK()}function K(a0,aR){var aS=10;var a1=(a0.type=="Folder")?"a":"z";var aV=U.extract_path(a0.path);var aY=U.choose_icon(a0.type,a0.icon,aV);var aX=b("<a />").addClass("mcol-listing").attr("alt",a0.name).attr("id",aA(a0)).append(b("<img src='"+aY+"' style='float:left'></img>")).append(b("<div unselectable='on' class='perc-finder-item-name' style='cursor: default; text-overflow : ellipsis;overflow : hidden'>"+a0.name+"</div>")).attr("title",a0.name).data("tag",a1+(a0.name+"").toLowerCase()).data("name",aV[aV.length-1]).data("spec",a0);au(a0.path,a0.id);if(a0.type){aX.addClass("perc-listing-type-"+a0.type)}if(a0.category){aX.addClass("perc-listing-category-"+a0.category)}if(a0.leaf){aX.data("loader",function(a2){aD(a0,function(a3){a2(null,a3)})})}else{aX.data("loader",L(U.acop(aV)))}aX.singleclick(aW);aX.dblclick(function(a2){aG(a2,aV,function(){if(a0.type=="Folder"){aW(a2)}else{ag(a0)}})});if(aP(a0)){aX.draggable({helper:function(){return b(this).clone().css(("overflow","visible"),("width",this.offsetWidth)[0])},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:x,stop:P,delay:dragDelay})}if(aO(a0)){aX.droppable({tolerance:"pointer",accept:aN,over:aQ,out:aM,drop:aL})}var aZ=1,aT=500;function aQ(a4,a6){var a3=aZ;var a2=a6.draggable.data("spec").path;var a7=a0.path;var a5=a0.type;if(!aU(a2,a7,a6.draggable.data("spec").type,a5)){return}if(a0.accessLevel!=b.PercFolderHelper().PERMISSION_READ&&a6.draggable.data("spec").accessLevel!=b.PercFolderHelper().PERMISSION_READ){b(this).addClass("perc-finder-item-over")}if(b(this).hasClass("perc-listing-type-site")){return}setTimeout(function(){if(aZ==a3){aW()}},aT)}function aM(a2,a3){b(this).removeClass("perc-finder-item-over");aZ++}function aL(a3,a5){var a2=a5.draggable.data("spec").path;var a6=a5.draggable.data("spec").type;var a7=a0.path;var a4=a0.type;b(this).removeClass("perc-finder-item-over");aM();if(a0.accessLevel==b.PercFolderHelper().PERMISSION_READ||a5.draggable.data("spec").accessLevel==b.PercFolderHelper().PERMISSION_READ){return false}if(!aU(a2,a7,a6,a4)){return false}b.PercPathService.moveItem(a2,a7,function(a8,bc){if(a8==b.PercServiceUtils.STATUS_SUCCESS){var ba=null;if(a6=="percPage"){ba="page"}else{if(a6=="Folder"&&a7.indexOf("/Sites")==0){ba="folder"}}if(ba){b.PercRedirectHandler.createRedirect(a2,a7+a5.draggable.data("spec").name,ba).fail(function(bd){b.perc_utils.alert_dialog({title:"Redirect creation error",content:bd,okCallBack:function(){ay()}})}).done(function(){ay()})}else{ay()}}else{var bb=bc;if(bc.indexOf("item with the same name already exists in the folder")!=-1){var a9="asset";if(a6=="percPage"){a9="page"}else{if(a6=="Folder"){a9="folder"}}bb=I18N.message("perc.ui.finder.move.error@Duplicate",[a9,a5.draggable.data("spec").name,a7])}b.perc_utils.alert_dialog({title:"Error",content:bb})}})}function aU(a4,a9,a3,a7){if(a7&&(a7!="Folder"&&a7!="site")){return false}var a8=(a9.match("/$")=="/")?a9.substr(0,a9.length-1):a9;if(a8==(a4.substring(0,a4.lastIndexOf("/")))){return false}if(a3=="Folder"){var a5=a4.substr(1).split("/");if(a5[a5.length-1]==""){a5.pop()}var a8=a9.substr(1).split("/");if(a8[a8.length-1]==""){a8.pop()}var a2=true;for(var a6=0;a6<a5.length;a6++){if(a5[a6]!=a8[a6]){a2=false;break}}if(a2){return false}}return true}function aP(a4){var a3=a4.type;var a2=a4.category;if(!a3){return false}if(a3=="site"){return false}if(a3=="percPage"&&a2=="LANDING_PAGE"){return false}if(a3=="Folder"&&a2=="SECTION_FOLDER"){return false}if(a3=="Folder"&&a4.accessLevel!=b.PercFolderHelper().PERMISSION_ADMIN){return false}if(a3=="FSFile"){return false}if(a3=="FSFolder"){return false}return true}function aO(a4){var a3=a4.type;var a2=a4.category;if(!a3&&a4.path==b.perc_paths.ASSETS_ROOT+"/"){return true}if(!a3){return false}if(a3=="percPage"){return false}return true}function aN(a5){var a2=a5&&a5.data("spec")&&a5.data("spec").path;if(!a2){return false}var a4=a0.path;if(a0.type&&a0.type=="site"){var a7=a2.substr(1).split("/")[1];var a6=a4.substr(1).split("/")[1];if(a7!=a6){return false}}if(a5.data("spec").category&&a5.data("spec").category=="ASSET"){if(!a0.type||a0.type!="Folder"){return false}}if(a4.length>=a2.length&&b.grep(a2,function(ba,a9){return ba==a4[a9]}).length==0){return false}var a8=U.extract_path(a2)[1];var a3=U.extract_path(a4)[1];if(a8!=a3){return false}return true}return aX;function aW(a5){if(a5.currentTarget.id=="perc-finder-listing-Search"){b.Percussion.setView("search");b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon_on.png");return}b("#perc-finder-listing-Search").find("img").attr("src","/cm/images/images/searchIcon.png");b("#perc-finder-choose-listview").removeClass("ui-state-disabled");b("#perc-finder-choose-columnview").removeClass("ui-state-disabled");var a7=b(this);var a4=a7.children(".perc-finder-item-name");var a3=a4.find("#perc_finder_inline_field_edit");var a2=a3.length;if(a2==0){var a9=b("#perc_finder_inline_field_edit");if(a9.length>0){lastClickPath=aV;a9.blur()}a7.focus();if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDITOR){var a8=$j.PercComponentWrapper("perc-action-finder-item-clicked",["perc-ui-component-finder"]);var a6=$j.PercViewReadyManager.setWrapper(a8);if(!a6){if(!a6){$j.PercViewReadyManager.showRenderingProgressWarning();return}}}aR(aX,U.acop(aV))}}}function x(){var aM=b(".perc-finder-table");var aL={};aL.left=aM.offset().left;aL.top=aM.offset().top;aL.width=aM.width();aL.height=aM.height();t=true;b("body").css("overflow","visible").bind("mousemove.finderDrag",aL,function(aN){var aP=aN.data.left+aN.data.width;var aO=aN.data.top+aN.data.height;var aR=(aN.pageX>=aN.data.left)&&(aN.pageX<=aP);var aQ=(aN.pageY>=aN.data.top)&&(aN.pageY<=aO);k(aQ&&aR)})}function P(){t=false;b("body").css("overflow","hidden").unbind("mousemove.finderDrag");k(true)}function aD(aL,aN){var aM=" ";b.perc_pathmanager.getItemProperties(aL.path,function(aR,aP){if(aR){var aT=null;var aX=null;var aS=null;var aY=aL.category=="ASSET"||aL.category=="RESOURCE";if(aY){aT="Asset";aX="Type";aS="<a href='#' class='perc-finder-preview-link' id='perc-asset-preview-link' title='Click for preview'>"}else{aT="Page Link";aX="Template";aS="<a href='#' class='perc-finder-preview-link' id='perc-page-preview-link' title='Click for preview'>"}var aW=aP.lastPublishedDate;if(aW==undefined||aW==null||aW==""){aW=""}else{var aU=b.perc_utils.splitDateTime(aW);aW='<div style="padding:9px 0 0 10px;">Last Published: <span></span></div><div style="padding:3px 0 0 10px;"><span "perc_finder_details_lpdate">'+aU.date+" "+aU.time+"</span></div>"}var aV=b.perc_utils.splitDateTime(aP.lastModifiedDate);if(aL.path.split("/")[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH){var aQ=b.perc_utils.formatFileSize(aP.size);aM='<div style="padding:10px 0 0 10px;">Properties: <span id="perc_finder_details_name">'+aP.name+'</span></div><div style="padding:10px 0 0 10px;">Size: <span id="perc_finder_details_size">'+aQ+'</span></div><div style="padding:10px 0 0 10px;">Last Modified: <span></span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aV.date+" "+aV.time+"</span></div>"}else{aM='<div style="padding:9px 0 0 10px;">'+aT+': <span id="perc_finder_details_name">'+aS+aP.name+'</a></span></div><div style="padding:9px 0 0 10px;">'+aX+': <span id="perc_finder_details_type">'+aP.type+'</span></div><div style="padding:9px 0 0 10px; width:170px;">Status: <div id="perc_finder_details_status" status="'+aP.status+'" workflow="'+aP.workflow+'" class="perc-ellipsis" title="'+aP.status+" ("+aP.workflow+')">'+aP.status+" ("+aP.workflow+')</div></div><div style="padding:9px 0 0 10px;">Last Modified: <span id="perc_finder_details_lmuser">'+aP.lastModifier+'</span></div><div style="padding:3px 0 0 10px;"><span id="perc_finder_details_lmdate">'+aV.date+" "+aV.time+"</span></div>"+aW}var aO=b(aM);if(aY){aO.find("#perc-asset-preview-link").each(function(){b(this).unbind().bind("click",function(){w(aL.id)})})}else{aO.find("#perc-page-preview-link").each(function(){b(this).unbind().bind("click",function(){ad(aL.id)})})}aN(aO)}else{b.perc_utils.alert_dialog({title:"Error",content:aP});ay()}var aZ=b.PercViewReadyManager.getWrapper("perc-ui-component-finder");if(aZ!=null){aZ.handleComponentProgress("perc-ui-component-finder","complete")}})}function w(aN,aM){if(aM){var aL=aN.split("-");aL[0]=aM;aN=aL.join("-")}b.PercAssetService.getAssetViewForAssetId(aN,function(aP,aO){if(aP==b.PercServiceUtils.STATUS_SUCCESS){var aQ=window.open(aO,"percAssetPreviewWindow"+aN.replace(/\-/g,""));b(aQ.document).ready(function(){if(aM){window.setTimeout(function(){aQ.document.title=aQ.document.title+" (Revision "+aM+")"},1000)}aQ.focus()})}else{b.perc_utils.alert_dialog({title:"Error",content:aO})}})}function ad(aM,aL){b.PercPathService.getPathItemById(aM,function(aO,aN,aR){if(aO==b.PercServiceUtils.STATUS_SUCCESS){var aQ=aN.PathItem.folderPaths.slice(1)+"/"+aN.PathItem.name;if(aL){aQ+="?sys_revision="+aL+"&percmobilepreview=true"}else{aQ+="?percmobilepreview=true"}var aP=window.open(aQ,"percPagePreviewWindow"+aM.replace(/\-/g,""));b(aP.document).ready(function(){if(aL){window.setTimeout(function(){aP.document.title=aP.document.title+" (Revision "+aL+")"},1000)}aP.focus()})}else{b.unblockUI();var aS="";if(aR=="cannot.find.item"){aS=I18N.message("perc.ui.common.error@Preview Content Deleted")}else{aS=aN}b.perc_utils.alert_dialog({title:"Error",content:aS})}})}function aB(aL,aN,aM){b.PercPathService.getPathItemForPath(aL,function(aP,aO){if(aP==b.PercServiceUtils.STATUS_SUCCESS){var aR=aO.PathItem.folderPaths.slice(1)+"/"+aO.PathItem.name;if(aM){aR+="?sys_revision="+aM+"&percmobilepreview=true"}else{aR+="?percmobilepreview=true"}var aQ=window.open(aR,"percPagePreviewWindow"+aN.replace(/\-/g,""));b(aQ.document).ready(function(){if(aM){window.setTimeout(function(){aQ.document.title=aQ.document.title+" (Revision "+aM+")"},1000)}aQ.focus()})}else{b.unblockUI();b.perc_utils.alert_dialog({title:"Error",content:aO})}})}function L(aL){return function(aN,aO){var aM=b.perc_utils.encodeURL(aL.join("/"))+"/?startIndex=1&maxResults="+ah;if(typeof(aO.data("child"))!="undefined"&&aO.data("child")!=""){aM+="&child="+b.perc_utils.encodeURL(aO.data("child"));aO.data("child","")}b.perc_pathmanager.open_path(aM,true,aP,ao,true);function aP(aR){var aQ={};b.each(b.perc_utils.convertCXFArray(aR.PagedItemList["childrenInPage"]),function(){aQ[U.extract_path_end(this.path)+"_item"]=this});aO.data("path",aL);aO.data("startIndex",aR.PagedItemList["startIndex"]);aO.data("totalResult",aR.PagedItemList["childrenCount"]);aN(aQ)}}}function J(aL,aM){T(aL).append(aM)}function aH(aO){var aM=aO.closest(".mcol-direc-wrapper");var aN=aO.position().top+aO.outerHeight();var aL=aM.closest("td").height();if(aN<0||aN>aL){aM.animate({scrollTop:aN-aL},200)}}function F(aL){if(aL){b.percFinderButtons().disableAllButtonsButSite()}}function aw(aM){var aL=Y();b("#perc-finder-table-top").append(aL);return aL}function X(aL){if(t){aL.nextAll().hide()}else{aL.nextAll().remove()}}function Y(aM){aM=aM!==false;var aR=b('<td tabindex="-1" class="mcol-direc" />');var aL=b('<div class="perc-resize ui-resizable" />');var aO=b('<div class="perc-resize-width mcol-direc-wrapper" />');function aQ(aS,aT){aO.css("width",aL.width()-aO.siblings().outerWidth())}function aP(aS,aT){b(".perc-finder").addClass("ui-resizable-resizing")}function aN(aS,aT){b(".perc-finder").removeClass("ui-resizable-resizing")}if(aM){aL.resizable({handles:"e",resize:aQ,start:aP,stop:aN})}return aR.append(aL.append(aO))}function C(){var aL=false,aM;aM=Y(aL);aM.find(".mcol-direc-wrapper").addClass("perc-view-column-fixed");aM.find(".ui-resizable").append('<div class="ui-resizable-handle ui-resizable-e perc-resize-disabled" />');return aM}function A(aL){var aM=b("<div class='perc-finder-table'><table><tr id='perc-finder-table-top'></tr></table></div>");aM.find("tr").append(aL);return aM}function aF(aL){return T(aL).children()}function T(aL){return aL.find(".mcol-direc-wrapper")}function k(aL){b(".mcol-listing").each(function(){b(this).droppable("option","disabled",!aL)});b("#perc-finder-listview table").droppable("option","disabled",!aL)}function aJ(aO){if(!aO||typeof(aO)!="string"||aO.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}var aN=null;var aM=null;b.each(_finderPathIdArray,function(aP,aQ){if(aP==aO){aM=aQ}});if(!aM){var aL="";if(aO[aO.length-1]!="/"){aL=aO+"/"}else{aL=aO.substring(0,aO.length-1)}b.each(_finderPathIdArray,function(aP,aQ){if(aP==aL){aM=aQ}})}if(aM){aN=S(aM.toString())}return aN}function S(aL){if(!aL||typeof(aL)!="string"||aL.length<1){b.perc_utils.alert_dialog({title:"Error",content:"objectId must be a valid string"});return}var aM=b("#"+Z+aL).data("spec");return aM}function aq(aL){if(!aL||typeof(aL)!="string"||aL.length<1){b.perc_utils.alert_dialog({title:"Error",content:"path must be a valid string"});return}if(aL.charAt(aL.length-1)=="/"){aL=aL.substring(0,aL.length-1)}aL=aL.substring(0,aL.lastIndexOf("/"));return aJ(aL)}function O(aL){(function(aM){path_changed=function(aN){aM(aN);aL(aN)}})(path_changed)}function av(aL){path_changed(aL)}function N(aL){if(b.inArray(aL,openListeners)==-1){openListeners.push(aL)}}function y(aN){if(b.inArray(aN,openListeners)>-1){var aL=openListeners.length;for(var aM=0;aM<aL;aM++){if(openListeners[aM]===aN){openListeners.splice(aM,1);return}}}}function ag(aN){var aL=openListeners.length;for(var aM=0;aM<aL;aM++){openListeners[aM](aN)}}function E(aL){if(b.inArray(aL,actionListeners)==-1){actionListeners.push(aL)}}function p(aN){if(b.inArray(aN,actionListeners)>-1){var aL=actionListeners.length;for(var aM=0;aM<aL;aM++){if(actionListeners[aM]===aN){actionListeners.splice(aM,1);return}}}}function n(aO,aN){var aL=actionListeners.length;for(var aM=0;aM<aL;aM++){actionListeners[aM](aO,typeof(aN)=="object"?aN:null)}}}b.perc_finderInstance=null})(jQuery);(function(b){b.percFinderButtons=function(){var e=b.PercDirtyController;var f={createButtons:j,disableAllButtonsButSite:k};return f;function k(){b(".perc-finder-menu #perc-finder-preview").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-actions-button").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");b(".perc-finder-menu #perc-finder-new-folder").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-page").addClass("ui-disabled").removeClass("ui-enabled").unbind("click");b(".perc-finder-menu #mcol-new-asset").addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}function j(n,v){var t=b.perc_build_delete_page_button(n,v);var D=b('<div class="perc-finder-buttonbar"/>');D.append(t);var w=typeof gInitialScreen!=="undefined"&&gInitialScreen=="library";if(!w){var B=b.perc_build_new_page_button(n,v);D.append(B);var x=b.PercNewAssetDialog.init(n,v);D.append(x)}var q=b.perc_build_new_folder_button(n,v);D.append(q);if(!w){var z='<a id="perc-finder-new-site" class="perc-form ui-state-default perc-font-icon icon-sitemap" href="#" title="Click to create new Site"></a>';D.append(z)}var y=b.perc_build_preview_button(n,v);D.append(y);var C=b.perc_build_actions_button(n,v);D.append(C);b(".perc-finder-menu ").append(D);function p(E){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_DESIGN,E,null,null,null,b.perc_paths.SITES_ROOT+"/"+E,null,null)}$newSiteDialog=b.perc_createNewSiteDialog(p);b("#perc-finder-new-site").unbind("click").click(d);n.addPathChangedListener(h);var A={"delete":t,newPage:B,newFolder:q,newAsset:x,newSite:z,launchPreview:y,launchAction:C};return A}function d(){e.confirmIfDirty(function(){$newSiteDialog.perc_wizard("open");b(".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.perc-dialog.perc-dialog-corner-all.ui-draggable").find("div").css("z-index","")})}function h(){if(!b.PercNavigationManager.isAdmin()){b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-enabled").addClass("ui-disabled").unbind("click")}else{b(".perc-finder-menu #perc-finder-new-site").removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(d)}}}})(jQuery);(function(b){b.perc_upload_theme_file_dialog={open:d};function d(e){var y=k();var p=window.location.protocol+"//"+window.location.host+"/cm";var t={};buttonSave={id:"perc-addItem-dialog-save"};buttonCancel={id:"perc-addItem-dialog-cancel",click:function(){q.remove()}};t.Save=buttonSave;t.Cancel=buttonCancel;var q=z();function z(){var A=b.perc_paths.WEBRESOURCESMGT_FILE_UPLOAD;var B='<div id=\'perc-design-file-upload\'><form id="perc-theme-file-upload-form" name="perc-theme-file-upload-form" enctype="multipart/form-data" method="post" action="'+A+'"><label for="upload-theme-file-attachment">File name:</label><br><input type="hidden" name="upload-theme-file-path" /><input type="file" size="50" name="upload-theme-file-attachment" /></form><div id="perc-theme-file-upload-response" style="display:none"></div></div>';var C=b(B).perc_dialog({title:I18N.message("perc.ui.uploadtheme.dialog.title@Upload File"),id:"perc-upload-theme-file-dialog",width:686,resizable:false,modal:true,closeOnEscape:true,percButtons:t,open:function(){n();b("#perc-theme-file-upload-form").ajaxForm({target:"#perc-theme-file-upload-response",success:j,error:f,iframe:true})}});return b(C)}function n(){var C=window.location.protocol+"//"+window.location.host+"/cm";var B=b("#perc-addItem-dialog-save");var D="url("+C+"/images/images/buttonSave.png)";var A="url("+C+"/images/images/buttonSaveOver.png)";B.css("background-image",D).hover(function(){b(this).css("background-image",A)},function(){b(this).css("background-image",D)}).unbind("click").click(h)}function h(){if(x()==false){return false}v();return false}function x(){var A=q.find("input:file");var B=q.find("label.perc_field_error");if(A.val()==""){if(B.length==0){A.after('<label class="perc_field_error" for="upload-theme-file-attachment" style="display: block;">'+I18N.message("perc.ui.uploadtheme.form.text@Please select a file.")+"</label>")}return false}else{B.remove();return true}}function v(){var B=q.find("input:file").val().replace(/.+[\\\/]/,"");B=b.perc_utils.encodeURL(B);var A=b.perc_utils.encodePathArray(y);b.PercWebResourcesService.validateFileUpload(A,B,function(D,C){if(D==b.PercServiceUtils.STATUS_SUCCESS){if(C.data==b.PercServiceUtils.STATUS_SUCCESS){w()}else{var E={id:"perc-design-file-upload-file-exist-warning",title:I18N.message("perc.ui.uploadtheme.dialog.title@Warning"),question:C.data,yes:"OK",success:w};b.perc_utils.confirm_dialog(E)}}else{var E={id:"perc-design-file-upload-file-exist-error",title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:b.PercServiceUtils.extractDefaultErrorMessage(C.request)};b.perc_utils.alert_dialog(E)}})}function w(){b.PercBlockUI();var B=q.find("input:file").val().replace(/.+[\\\/]/,"");B=b.perc_utils.encodeURL(B);var A=b.perc_utils.encodePathArray(y);q.find('input[name="upload-theme-file-path"]').val("/"+A.slice(3).join("/")+"/"+B);q.find("#perc-theme-file-upload-form").submit()}function j(){var A=b("#perc-theme-file-upload-response").text();if(A==""){b.unblockUI();q.remove();e.refresh(function(){})}else{var B={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:A};b.perc_utils.alert_dialog(B);b.unblockUI()}}function f(C,E,D){var A="There was an unknown error";if(E=="timeout"){A="The operation is talking too much time"}var B={title:I18N.message("perc.ui.uploadtheme.dialog.title@Error"),content:A};b.perc_utils.alert_dialog(B);b.unblockUI()}function k(){var B=e.getCurrentPath();A=b("#perc-finder-listview .perc-datatable-row-highlighted").data("percRowData");if(A==undefined){var A=b(".mcol-listing.perc-listing-type-FSFile.mcol-opened").data("spec")}if(A!=undefined&&A.type=="FSFile"&&A.leaf){B.pop()}return B}}})(jQuery);(function(d){d.PercDeleteItemHelper={extractDeleteErrorMessage:b};function b(p,f,w){var h,v,n=false,k=d.PercServiceUtils.extractDefaultErrorMessage(p),x="perc.ui.delete"+w+"dialog.warning",e="perc_delete_"+w+"_force",j=p.responseText,q=j.match(/User: (.*) is editing the item. Failed to delete item./);if(q){h="perc-finder-delete-error-open";var z=w.charAt(0).toUpperCase();var A=w.substr(1);var y=z+A+": ";var t=q[1].split(" ");v=y+f+"<br/><br/>"+I18N.message(x+"@Open",[t[0]])}else{if(j.indexOf(w+".deleteNotAuthorized")>0){h="perc-finder-delete-auth";v=I18N.message(x+"@Not Authorized",[f])}else{if(j.indexOf(w+".deleteTemplates")>0){h="perc-finder-delete-templates";v=I18N.message(x+"@Templates",[f])}else{if(j.indexOf(w+".deleteApprovedPages")>0){h="perc-finder-delete-approved";v=I18N.message(x+"@Approved Pages",[f])+"<br/><br/><input type='checkbox' id='"+e+"' style='width:15px'/> <label class='perc_dialog_label'>"+I18N.message(x+"@Approved Pages Checkbox")+"</label>";n=true}else{if(k!=""){h="perc-finder-delete-error-open";v=k}else{h="perc-finder-delete-error-open";v=I18N.message(x+"@GenericText")}}}}}var B={dialogid:h,content:v,canForceDelete:n,chkBoxId:e};return B}})(jQuery);(function(b){fixIframeHeight=function(){b("#perc-widget-library").width(b("#tabs-3").width()-45);var h=b("#frame");if(h.length==0){return}var k=b(".perc-main");var e=b("#bottom");var j=e.position().top;k.height(j);var d,f;if(window.innerHeight){d=window.innerHeight;f=window.innerWidth}else{if(document.documentElement.clientHeight){d=document.documentElement.clientHeight-4;f=document.documentElement.clientWidth}}h.height(d-j);h.width(f)};fixTemplateHeight=function(){fixBottomHeight()};fixBottomHeight=function(){var j=b.PercNavigationManager.getView();var d;var f;if(j==b.PercNavigationManager.VIEW_DESIGN){d=b(".perc-templates-layout");f=d.position().top+47}else{if(j==b.PercNavigationManager.VIEW_WORKFLOW){d=b(".perc-whitebg");f=b("#tabs").position().top+90;b(".perc-finder-fix").css("padding-bottom",0)}else{if(j==b.PercNavigationManager.VIEW_PUBLISH){d=b(".perc-whitebg");if(b("#tabs").length){f=b("#tabs").position().top+90}else{if(b("#perc-pub-inline-help").length){f=b("#perc-pub-inline-help").position().top+90}}}else{if(j==b.PercNavigationManager.VIEW_DASHBOARD){d=b(".perc-body-background");f=b(".perc-body-background").position().top}else{return}}}}if(d.css("display")!="none"){var e,h;if(window.innerHeight){e=window.innerHeight;h=window.innerWidth}else{if(document.documentElement.clientHeight){e=document.documentElement.clientHeight-4;h=document.documentElement.clientWidth}}d.height(e-f)}};fixHeight=function(){var f=b.PercNavigationManager.getView();if(f==b.PercNavigationManager.VIEW_SITE_ARCH){var e=b(".perc-main");if(e.length>0){var d=e.height();b("#perc_sa_container").css("margin-top",d+3)}}b(".perc-finder").width("auto")}})(jQuery);(function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.7.4";_oExt.sErrMode="alert";_oExt.iApiIndex=0;_oExt.oApi={};_oExt.afnFiltering=[];_oExt.aoFeatures=[];_oExt.ofnSearch={};_oExt.afnSortData=[];_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""};_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"};_oExt.oPagination={two_button:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nPrevious,nNext,nPreviousInner,nNextInner;if(!oSettings.bJUI){nPrevious=document.createElement("div");nNext=document.createElement("div")}else{nPrevious=document.createElement("a");nNext=document.createElement("a");nNextInner=document.createElement("span");nNextInner.className=oSettings.oClasses.sPageJUINext;nNext.appendChild(nNextInner);nPreviousInner=document.createElement("span");nPreviousInner.className=oSettings.oClasses.sPageJUIPrev;nPrevious.appendChild(nPreviousInner)}nPrevious.className=oSettings.oClasses.sPagePrevDisabled;nNext.className=oSettings.oClasses.sPageNextDisabled;nPrevious.title=oSettings.oLanguage.oPaginate.sPrevious;nNext.title=oSettings.oLanguage.oPaginate.sNext;nPaging.appendChild(nPrevious);nPaging.appendChild(nNext);$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nPrevious).bind("selectstart",function(){return false});$(nNext).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var an=oSettings.aanFeatures.p;for(var i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length!==0){an[i].childNodes[0].className=(oSettings._iDisplayStart===0)?oSettings.oClasses.sPagePrevDisabled:oSettings.oClasses.sPagePrevEnabled;an[i].childNodes[1].className=(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay())?oSettings.oClasses.sPageNextDisabled:oSettings.oClasses.sPageNextEnabled}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(oSettings,nPaging,fnCallbackDraw){var nFirst=document.createElement("span");var nPrevious=document.createElement("span");var nList=document.createElement("span");var nNext=document.createElement("span");var nLast=document.createElement("span");nFirst.innerHTML=oSettings.oLanguage.oPaginate.sFirst;nPrevious.innerHTML=oSettings.oLanguage.oPaginate.sPrevious;nNext.innerHTML=oSettings.oLanguage.oPaginate.sNext;nLast.innerHTML=oSettings.oLanguage.oPaginate.sLast;var oClasses=oSettings.oClasses;nFirst.className=oClasses.sPageButton+" "+oClasses.sPageFirst;nPrevious.className=oClasses.sPageButton+" "+oClasses.sPagePrevious;nNext.className=oClasses.sPageButton+" "+oClasses.sPageNext;nLast.className=oClasses.sPageButton+" "+oClasses.sPageLast;nPaging.appendChild(nFirst);nPaging.appendChild(nPrevious);nPaging.appendChild(nList);nPaging.appendChild(nNext);nPaging.appendChild(nLast);$(nFirst).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"first")){fnCallbackDraw(oSettings)}});$(nPrevious).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"previous")){fnCallbackDraw(oSettings)}});$(nNext).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"next")){fnCallbackDraw(oSettings)}});$(nLast).click(function(){if(oSettings.oApi._fnPageChange(oSettings,"last")){fnCallbackDraw(oSettings)}});$("span",nPaging).bind("mousedown",function(){return false}).bind("selectstart",function(){return false});if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.p=="undefined"){nPaging.setAttribute("id",oSettings.sTableId+"_paginate");nFirst.setAttribute("id",oSettings.sTableId+"_first");nPrevious.setAttribute("id",oSettings.sTableId+"_previous");nNext.setAttribute("id",oSettings.sTableId+"_next");nLast.setAttribute("id",oSettings.sTableId+"_last")}},fnUpdate:function(oSettings,fnCallbackDraw){if(!oSettings.aanFeatures.p){return}var iPageCount=_oExt.oPagination.iFullNumbersShowPages;var iPageCountHalf=Math.floor(iPageCount/2);var iPages=Math.ceil((oSettings.fnRecordsDisplay())/oSettings._iDisplayLength);var iCurrentPage=Math.ceil(oSettings._iDisplayStart/oSettings._iDisplayLength)+1;var sList="";var iStartButton,iEndButton,i,iLen;var oClasses=oSettings.oClasses;if(iPages<iPageCount){iStartButton=1;iEndButton=iPages}else{if(iCurrentPage<=iPageCountHalf){iStartButton=1;iEndButton=iPageCount}else{if(iCurrentPage>=(iPages-iPageCountHalf)){iStartButton=iPages-iPageCount+1;iEndButton=iPages}else{iStartButton=iCurrentPage-Math.ceil(iPageCount/2)+1;iEndButton=iStartButton+iPageCount-1}}}for(i=iStartButton;i<=iEndButton;i++){if(iCurrentPage!=i){sList+='<span class="'+oClasses.sPageButton+'">'+i+"</span>"}else{sList+='<span class="'+oClasses.sPageButtonActive+'">'+i+"</span>"}if(i<iEndButton){sList+=","}}var an=oSettings.aanFeatures.p;var anButtons,anStatic,nPaginateList;var fnClick=function(){var iTarget=(this.innerHTML*1)-1;oSettings._iDisplayStart=iTarget*oSettings._iDisplayLength;fnCallbackDraw(oSettings);return false};var fnFalse=function(){return false};for(i=0,iLen=an.length;i<iLen;i++){if(an[i].childNodes.length===0){continue}var qjPaginateList=$("span:eq(2)",an[i]);qjPaginateList.html(sList);$("span",qjPaginateList).click(fnClick).bind("mousedown",fnFalse).bind("selectstart",fnFalse);anButtons=an[i].getElementsByTagName("span");anStatic=[anButtons[0],anButtons[1],anButtons[anButtons.length-2],anButtons[anButtons.length-1]];$(anStatic).removeClass(oClasses.sPageButton+" "+oClasses.sPageButtonActive+" "+oClasses.sPageButtonStaticDisabled);if(iCurrentPage==1){anStatic[0].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[1].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[0].className+=" "+oClasses.sPageButton;anStatic[1].className+=" "+oClasses.sPageButton}if(iPages===0||iCurrentPage==iPages||oSettings._iDisplayLength==-1){anStatic[2].className+=" "+oClasses.sPageButtonStaticDisabled;anStatic[3].className+=" "+oClasses.sPageButtonStaticDisabled}else{anStatic[2].className+=" "+oClasses.sPageButton;anStatic[3].className+=" "+oClasses.sPageButton}}}}};_oExt.oSort={"string-asc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?-1:((x>y)?1:0))},"string-desc":function(a,b){var x=a.toLowerCase();var y=b.toLowerCase();return((x<y)?1:((x>y)?-1:0))},"html-asc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?-1:((x>y)?1:0))},"html-desc":function(a,b){var x=a.replace(/<.*?>/g,"").toLowerCase();var y=b.replace(/<.*?>/g,"").toLowerCase();return((x<y)?1:((x>y)?-1:0))},"date-asc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return x-y},"date-desc":function(a,b){var x=Date.parse(a);var y=Date.parse(b);if(isNaN(x)||x===""){x=Date.parse("01/01/1970 00:00:00")}if(isNaN(y)||y===""){y=Date.parse("01/01/1970 00:00:00")}return y-x},"numeric-asc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return x-y},"numeric-desc":function(a,b){var x=(a=="-"||a==="")?0:a*1;var y=(b=="-"||b==="")?0:b*1;return y-x}};_oExt.aTypes=[function(sData){if(sData.length===0){return"numeric"}var sValidFirstChars="0123456789-";var sValidChars="0123456789.";var Char;var bDecimal=false;Char=sData.charAt(0);if(sValidFirstChars.indexOf(Char)==-1){return null}for(var i=1;i<sData.length;i++){Char=sData.charAt(i);if(sValidChars.indexOf(Char)==-1){return null}if(Char=="."){if(bDecimal){return null}bDecimal=true}}return"numeric"},function(sData){var iParse=Date.parse(sData);if((iParse!==null&&!isNaN(iParse))||sData.length===0){return"date"}return null},function(sData){if(sData.indexOf("<")!=-1&&sData.indexOf(">")!=-1){return"html"}return null}];_oExt.fnVersionCheck=function(sVersion){var fnZPad=function(Zpad,count){while(Zpad.length<count){Zpad+="0"}return Zpad};var aThis=_oExt.sVersion.split(".");var aThat=sVersion.split(".");var sThis="",sThat="";for(var i=0,iLen=aThat.length;i<iLen;i++){sThis+=fnZPad(aThis[i],3);sThat+=fnZPad(aThat[i],3)}return parseInt(sThis,10)>=parseInt(sThat,10)};_oExt._oExternConfig={iNextUnique:0};$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsTotal,10)}else{return this.aiDisplayMaster.length}};this.fnRecordsDisplay=function(){if(this.oFeatures.bServerSide){return parseInt(this._iRecordsDisplay,10)}else{return this.aiDisplay.length}};this.fnDisplayEnd=function(){if(this.oFeatures.bServerSide){if(this.oFeatures.bPaginate===false||this._iDisplayLength==-1){return this._iDisplayStart+this.aiDisplay.length}else{return Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay)}}else{return this._iDisplayEnd}};this.oInstance=null;this.sInstance=null;this.oFeatures={bPaginate:true,bLengthChange:true,bFilter:true,bSort:true,bInfo:true,bAutoWidth:true,bProcessing:false,bSortClasses:true,bStateSave:false,bServerSide:false};this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:false,bInfinite:false,iLoadGap:100,iBarWidth:0};this.aanFeatures=[];this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null};this.aoData=[];this.aiDisplay=[];this.aiDisplayMaster=[];this.aoColumns=[];this.iNextId=0;this.asDataSearch=[];this.oPreviousSearch={sSearch:"",bRegex:false,bSmart:true};this.aoPreSearchCols=[];this.aaSorting=[[0,"asc",0]];this.aaSortingFixed=null;this.asStripClasses=[];this.asDestoryStrips=[];this.sDestroyWidth=0;this.fnRowCallback=null;this.fnHeaderCallback=null;this.fnFooterCallback=null;this.aoDrawCallback=[];this.fnInitComplete=null;this.sTableId="";this.nTable=null;this.nTHead=null;this.nTFoot=null;this.nTBody=null;this.nTableWrapper=null;this.bInitialised=false;this.aoOpenRows=[];this.sDom="lfrtip";this.sPaginationType="two_button";this.iCookieDuration=60*60*2;this.sCookiePrefix="SpryMedia_DataTables_";this.fnCookieCallback=null;this.aoStateSave=[];this.aoStateLoad=[];this.oLoadedState=null;this.sAjaxSource=null;this.bAjaxDataGet=true;this.fnServerData=function(url,data,callback){$.ajax({url:url,data:data,success:callback,dataType:"json",cache:false,error:function(xhr,error,thrown){if(error=="parsererror"){alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}}})};this.fnFormatNumber=function(iIn){if(iIn<1000){return iIn}else{var s=(iIn+""),a=s.split(""),out="",iLen=s.length;for(var i=0;i<iLen;i++){if(i%3===0&&i!==0){out=","+out}out=a[iLen-i-1]+out}}return out};this.aLengthMenu=[10,25,50,100];this.iDraw=0;this.bDrawing=0;this.iDrawError=-1;this._iDisplayLength=10;this._iDisplayStart=0;this._iDisplayEnd=10;this._iRecordsTotal=0;this._iRecordsDisplay=0;this.bJUI=false;this.oClasses=_oExt.oStdClasses;this.bFiltered=false;this.bSorted=false;this.oInit=null}this.oApi={};this.fnDraw=function(bComplete){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof bComplete!="undefined"&&bComplete===false){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}else{_fnReDraw(oSettings)}};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!oSettings.oFeatures.bFilter){return}if(typeof bRegex=="undefined"){bRegex=false}if(typeof bSmart=="undefined"){bSmart=true}if(typeof bShowGlobal=="undefined"){bShowGlobal=true}if(typeof iColumn=="undefined"||iColumn===null){_fnFilterComplete(oSettings,{sSearch:sInput,bRegex:bRegex,bSmart:bSmart},1);if(bShowGlobal&&typeof oSettings.aanFeatures.f!="undefined"){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){$("input",n[i]).val(sInput)}}}else{oSettings.aoPreSearchCols[iColumn].sSearch=sInput;oSettings.aoPreSearchCols[iColumn].bRegex=bRegex;oSettings.aoPreSearchCols[iColumn].bSmart=bSmart;_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}};this.fnSettings=function(nNode){return _fnSettingsFromNode(this[_oExt.iApiIndex])};this.fnVersionCheck=_oExt.fnVersionCheck;this.fnSort=function(aaSort){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);oSettings.aaSorting=aaSort;_fnSort(oSettings)};this.fnSortListener=function(nNode,iColumn,fnCallback){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),nNode,iColumn,fnCallback)};this.fnAddData=function(mData,bRedraw){if(mData.length===0){return[]}var aiReturn=[];var iTest;var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mData[0]=="object"){for(var i=0;i<mData.length;i++){iTest=_fnAddData(oSettings,mData[i]);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}}else{iTest=_fnAddData(oSettings,mData);if(iTest==-1){return aiReturn}aiReturn.push(iTest)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return aiReturn};this.fnDeleteRow=function(mTarget,fnCallBack,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iAODataIndex;iAODataIndex=(typeof mTarget=="object")?_fnNodeToDataIndex(oSettings,mTarget):mTarget;var oData=oSettings.aoData.splice(iAODataIndex,1);var iDisplayIndex=$.inArray(iAODataIndex,oSettings.aiDisplay);oSettings.asDataSearch.splice(iDisplayIndex,1);_fnDeleteIndex(oSettings.aiDisplayMaster,iAODataIndex);_fnDeleteIndex(oSettings.aiDisplay,iAODataIndex);if(typeof fnCallBack=="function"){fnCallBack.call(this,oSettings,oData)}if(oSettings._iDisplayStart>=oSettings.aiDisplay.length){oSettings._iDisplayStart-=oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(typeof bRedraw=="undefined"||bRedraw){_fnCalculateEnd(oSettings);_fnDraw(oSettings)}return oData};this.fnClearTable=function(bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnOpen=function(nTr,sHtml,sClass){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(nTr);var nNewRow=document.createElement("tr");var nNewCell=document.createElement("td");nNewRow.appendChild(nNewCell);nNewCell.className=sClass;nNewCell.colSpan=_fnVisbleColumns(oSettings);nNewCell.innerHTML=sHtml;var nTrs=$("tr",oSettings.nTBody);if($.inArray(nTr,nTrs)!=-1){$(nNewRow).insertAfter(nTr)}oSettings.aoOpenRows.push({nTr:nNewRow,nParent:nTr});return nNewRow};this.fnClose=function(nTr){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);for(var i=0;i<oSettings.aoOpenRows.length;i++){if(oSettings.aoOpenRows[i].nParent==nTr){var nTrParent=oSettings.aoOpenRows[i].nTr.parentNode;if(nTrParent){nTrParent.removeChild(oSettings.aoOpenRows[i].nTr)}oSettings.aoOpenRows.splice(i,1);return 0}}return 1};this.fnGetData=function(mRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof mRow!="undefined"){var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;return oSettings.aoData[iRow]._aData}return _fnGetDataMaster(oSettings)};this.fnGetNodes=function(iRow){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof iRow!="undefined"){return oSettings.aoData[iRow].nTr}return _fnGetTrNodes(oSettings)};this.fnGetPosition=function(nNode){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i;if(nNode.nodeName.toUpperCase()=="TR"){return _fnNodeToDataIndex(oSettings,nNode)}else{if(nNode.nodeName.toUpperCase()=="TD"){var iDataIndex=_fnNodeToDataIndex(oSettings,nNode.parentNode);var iCorrector=0;for(var j=0;j<oSettings.aoColumns.length;j++){if(oSettings.aoColumns[j].bVisible){if(oSettings.aoData[iDataIndex].nTr.getElementsByTagName("td")[j-iCorrector]==nNode){return[iDataIndex,j-iCorrector,j]}}else{iCorrector++}}}}return null};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var iVisibleColumn;var sDisplay;var iRow=(typeof mRow=="object")?_fnNodeToDataIndex(oSettings,mRow):mRow;if(typeof mData!="object"){sDisplay=mData;oSettings.aoData[iRow]._aData[iColumn]=sDisplay;if(oSettings.aoColumns[iColumn].fnRender!==null){sDisplay=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,iColumn);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}else{if(mData.length!=oSettings.aoColumns.length){_fnLog(oSettings,0,"An array passed to fnUpdate must have the same number of columns as the table in question - in this case "+oSettings.aoColumns.length);return 1}for(var i=0;i<mData.length;i++){sDisplay=mData[i];oSettings.aoData[iRow]._aData[i]=sDisplay;if(oSettings.aoColumns[i].fnRender!==null){sDisplay=oSettings.aoColumns[i].fnRender({iDataRow:iRow,iDataColumn:i,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iRow]._aData[i]=sDisplay}}iVisibleColumn=_fnColumnIndexToVisible(oSettings,i);if(iVisibleColumn!==null){oSettings.aoData[iRow].nTr.getElementsByTagName("td")[iVisibleColumn].innerHTML=sDisplay}}}var iDisplayIndex=$.inArray(iRow,oSettings.aiDisplay);oSettings.asDataSearch[iDisplayIndex]=_fnBuildSearchRow(oSettings,oSettings.aoData[iRow]._aData);if(typeof bAction=="undefined"||bAction){_fnAjustColumnSizing(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnReDraw(oSettings)}return 0};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var i,iLen;var iColumns=oSettings.aoColumns.length;var nTd,anTds;if(oSettings.aoColumns[iCol].bVisible==bShow){return}var nTrHead=$(">tr",oSettings.nTHead)[0];var nTrFoot=$(">tr",oSettings.nTFoot)[0];var anTheadTh=[];var anTfootTh=[];for(i=0;i<iColumns;i++){anTheadTh.push(oSettings.aoColumns[i].nTh);anTfootTh.push(oSettings.aoColumns[i].nTf)}if(bShow){var iInsert=0;for(i=0;i<iCol;i++){if(oSettings.aoColumns[i].bVisible){iInsert++}}if(iInsert>=_fnVisbleColumns(oSettings)){nTrHead.appendChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.appendChild(anTfootTh[iCol])}for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.appendChild(nTd)}}else{var iBefore;for(i=iCol;i<iColumns;i++){iBefore=_fnColumnIndexToVisible(oSettings,i);if(iBefore!==null){break}}nTrHead.insertBefore(anTheadTh[iCol],nTrHead.getElementsByTagName("th")[iBefore]);if(nTrFoot){nTrFoot.insertBefore(anTfootTh[iCol],nTrFoot.getElementsByTagName("th")[iBefore])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=oSettings.aoData[i]._anHidden[iCol];oSettings.aoData[i].nTr.insertBefore(nTd,$(">td:eq("+iBefore+")",oSettings.aoData[i].nTr)[0])}}oSettings.aoColumns[iCol].bVisible=true}else{nTrHead.removeChild(anTheadTh[iCol]);if(nTrFoot){nTrFoot.removeChild(anTfootTh[iCol])}anTds=_fnGetTdNodes(oSettings);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nTd=anTds[(i*oSettings.aoColumns.length)+(iCol*1)];oSettings.aoData[i]._anHidden[iCol]=nTd;nTd.parentNode.removeChild(nTd)}oSettings.aoColumns[iCol].bVisible=false}for(i=0,iLen=oSettings.aoOpenRows.length;i<iLen;i++){oSettings.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(oSettings)}if(typeof bRedraw=="undefined"||bRedraw){_fnAjustColumnSizing(oSettings);_fnDraw(oSettings)}_fnSaveState(oSettings)};this.fnPageChange=function(sAction,bRedraw){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(oSettings,sAction);_fnCalculateEnd(oSettings);if(typeof bRedraw=="undefined"||bRedraw){_fnDraw(oSettings)}};this.fnDestroy=function(){var oSettings=_fnSettingsFromNode(this[_oExt.iApiIndex]);var nOrig=oSettings.nTableWrapper.parentNode;var nBody=oSettings.nTBody;var i,iLen;oSettings.bDestroying=true;for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].bVisible===false){this.fnSetColumnVis(i,true)}}$("tbody>tr>td."+oSettings.oClasses.sRowEmpty,oSettings.nTable).parent().remove();if(oSettings.nTable!=oSettings.nTHead.parentNode){$(">thead",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTHead)}if(oSettings.nTFoot&&oSettings.nTable!=oSettings.nTFoot.parentNode){$(">tfoot",oSettings.nTable).remove();oSettings.nTable.appendChild(oSettings.nTFoot)}oSettings.nTable.parentNode.removeChild(oSettings.nTable);$(oSettings.nTableWrapper).remove();oSettings.aaSorting=[];oSettings.aaSortingFixed=[];_fnSortingClasses(oSettings);$(_fnGetTrNodes(oSettings)).removeClass(oSettings.asStripClasses.join(" "));if(!oSettings.bJUI){$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" "))}else{$("th",oSettings.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" "));$("th span",oSettings.nTHead).remove()}nOrig.appendChild(oSettings.nTable);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){nBody.appendChild(oSettings.aoData[i].nTr)}oSettings.nTable.style.width=_fnStringToCss(oSettings.sDestroyWidth);$(">tr:even",nBody).addClass(oSettings.asDestoryStrips[0]);$(">tr:odd",nBody).addClass(oSettings.asDestoryStrips[1]);for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i]==oSettings){_aoSettings.splice(i,1)}}oSettings=null};this.fnAdjustColumnSizing=function(bRedraw){_fnAjustColumnSizing(_fnSettingsFromNode(this[_oExt.iApiIndex]));if(typeof bRedraw=="undefined"||bRedraw){this.fnDraw(false)}};function _fnExternApiFunc(sFunc){return function(){var aArgs=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[sFunc].apply(this,aArgs)}}for(var sFunc in _oExt.oApi){if(sFunc){this[sFunc]=_fnExternApiFunc(sFunc)}}function _fnInitalise(oSettings){var i,iLen;if(oSettings.bInitialised===false){setTimeout(function(){_fnInitalise(oSettings)},200);return}_fnAddOptionsHtml(oSettings);_fnDrawHead(oSettings);_fnProcessingDisplay(oSettings,true);if(oSettings.oFeatures.bAutoWidth){_fnCalculateColumnWidths(oSettings)}for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){if(oSettings.aoColumns[i].sWidth!==null){oSettings.aoColumns[i].nTh.style.width=_fnStringToCss(oSettings.aoColumns[i].sWidth)}}if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}if(oSettings.sAjaxSource!==null&&!oSettings.oFeatures.bServerSide){oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,[],function(json){for(i=0;i<json.aaData.length;i++){_fnAddData(oSettings,json.aaData[i])}oSettings.iInitDisplayStart=oSettings._iDisplayStart;if(oSettings.oFeatures.bSort){_fnSort(oSettings)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();_fnCalculateEnd(oSettings);_fnDraw(oSettings)}_fnProcessingDisplay(oSettings,false);if(typeof oSettings.fnInitComplete=="function"){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings,json)}});return}if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}}function _fnLanguageProcess(oSettings,oLanguage,bInit){_fnMap(oSettings.oLanguage,oLanguage,"sProcessing");_fnMap(oSettings.oLanguage,oLanguage,"sLengthMenu");_fnMap(oSettings.oLanguage,oLanguage,"sEmptyTable");_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords");_fnMap(oSettings.oLanguage,oLanguage,"sInfo");_fnMap(oSettings.oLanguage,oLanguage,"sInfoEmpty");_fnMap(oSettings.oLanguage,oLanguage,"sInfoFiltered");_fnMap(oSettings.oLanguage,oLanguage,"sInfoPostFix");_fnMap(oSettings.oLanguage,oLanguage,"sSearch");if(typeof oLanguage.oPaginate!="undefined"){_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sFirst");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sPrevious");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sNext");_fnMap(oSettings.oLanguage.oPaginate,oLanguage.oPaginate,"sLast")}if(typeof oLanguage.sEmptyTable=="undefined"&&typeof oLanguage.sZeroRecords!="undefined"){_fnMap(oSettings.oLanguage,oLanguage,"sZeroRecords","sEmptyTable")}if(bInit){_fnInitalise(oSettings)}}function _fnAddColumn(oSettings,nTh){oSettings.aoColumns[oSettings.aoColumns.length++]={sType:null,_bAutoType:true,bVisible:true,bSearchable:true,bSortable:true,asSorting:["asc","desc"],sSortingClass:oSettings.oClasses.sSortable,sSortingClassJUI:oSettings.oClasses.sSortJUI,sTitle:nTh?nTh.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:true,iDataSort:oSettings.aoColumns.length-1,sSortDataType:"std",nTh:nTh?nTh:document.createElement("th"),nTf:null};var iCol=oSettings.aoColumns.length-1;var oCol=oSettings.aoColumns[iCol];if(typeof oSettings.aoPreSearchCols[iCol]=="undefined"||oSettings.aoPreSearchCols[iCol]===null){oSettings.aoPreSearchCols[iCol]={sSearch:"",bRegex:false,bSmart:true}}else{if(typeof oSettings.aoPreSearchCols[iCol].bRegex=="undefined"){oSettings.aoPreSearchCols[iCol].bRegex=true}if(typeof oSettings.aoPreSearchCols[iCol].bSmart=="undefined"){oSettings.aoPreSearchCols[iCol].bSmart=true}}_fnColumnOptions(oSettings,iCol,null)}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(typeof oOptions!="undefined"&&oOptions!==null){if(typeof oOptions.sType!="undefined"){oCol.sType=oOptions.sType;oCol._bAutoType=false}_fnMap(oCol,oOptions,"bVisible");_fnMap(oCol,oOptions,"bSearchable");_fnMap(oCol,oOptions,"bSortable");_fnMap(oCol,oOptions,"sTitle");_fnMap(oCol,oOptions,"sName");_fnMap(oCol,oOptions,"sWidth");_fnMap(oCol,oOptions,"sWidth","sWidthOrig");_fnMap(oCol,oOptions,"sClass");_fnMap(oCol,oOptions,"fnRender");_fnMap(oCol,oOptions,"bUseRendered");_fnMap(oCol,oOptions,"iDataSort");_fnMap(oCol,oOptions,"asSorting");_fnMap(oCol,oOptions,"sSortDataType")}if(!oSettings.oFeatures.bSort){oCol.bSortable=false}if(!oCol.bSortable||($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)==-1)){oCol.sSortingClass=oSettings.oClasses.sSortableNone;oCol.sSortingClassJUI=""}else{if($.inArray("asc",oCol.asSorting)!=-1&&$.inArray("desc",oCol.asSorting)==-1){oCol.sSortingClass=oSettings.oClasses.sSortableAsc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIAscAllowed}else{if($.inArray("asc",oCol.asSorting)==-1&&$.inArray("desc",oCol.asSorting)!=-1){oCol.sSortingClass=oSettings.oClasses.sSortableDesc;oCol.sSortingClassJUI=oSettings.oClasses.sSortJUIDescAllowed}}}}function _fnAddData(oSettings,aDataSupplied){if(aDataSupplied.length!=oSettings.aoColumns.length&&oSettings.iDrawError!=oSettings.iDraw){_fnLog(oSettings,0,"Added data (size "+aDataSupplied.length+") does not match known number of columns ("+oSettings.aoColumns.length+")");oSettings.iDrawError=oSettings.iDraw;return -1}var aData=aDataSupplied.slice();var iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:document.createElement("tr"),_iId:oSettings.iNextId++,_aData:aData,_anHidden:[],_sRowStripe:""});var nTd,sThisType;for(var i=0;i<aData.length;i++){nTd=document.createElement("td");if(aData[i]===null){aData[i]=""}if(typeof oSettings.aoColumns[i].fnRender=="function"){var sRendered=oSettings.aoColumns[i].fnRender({iDataRow:iThisIndex,iDataColumn:i,aData:aData,oSettings:oSettings});nTd.innerHTML=sRendered;if(oSettings.aoColumns[i].bUseRendered){oSettings.aoData[iThisIndex]._aData[i]=sRendered}}else{nTd.innerHTML=aData[i]}if(typeof aData[i]!="string"){aData[i]+=""}aData[i]=$.trim(aData[i]);if(oSettings.aoColumns[i].sClass!==null){nTd.className=oSettings.aoColumns[i].sClass}if(oSettings.aoColumns[i]._bAutoType&&oSettings.aoColumns[i].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iThisIndex]._aData[i]);if(oSettings.aoColumns[i].sType===null){oSettings.aoColumns[i].sType=sThisType}else{if(oSettings.aoColumns[i].sType!=sThisType){oSettings.aoColumns[i].sType="string"}}}if(oSettings.aoColumns[i].bVisible){oSettings.aoData[iThisIndex].nTr.appendChild(nTd);oSettings.aoData[iThisIndex]._anHidden[i]=null}else{oSettings.aoData[iThisIndex]._anHidden[i]=nTd}}oSettings.aiDisplayMaster.push(iThisIndex);return iThisIndex}function _fnGatherData(oSettings){var iLoop,i,iLen,j,jLen,jInner,nTds,nTrs,nTd,aLocalData,iThisIndex,iRow,iRows,iColumn,iColumns;if(oSettings.sAjaxSource===null){nTrs=oSettings.nTBody.childNodes;for(i=0,iLen=nTrs.length;i<iLen;i++){if(nTrs[i].nodeName.toUpperCase()=="TR"){iThisIndex=oSettings.aoData.length;oSettings.aoData.push({nTr:nTrs[i],_iId:oSettings.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""});oSettings.aiDisplayMaster.push(iThisIndex);aLocalData=oSettings.aoData[iThisIndex]._aData;nTds=nTrs[i].childNodes;jInner=0;for(j=0,jLen=nTds.length;j<jLen;j++){if(nTds[j].nodeName.toUpperCase()=="TD"){aLocalData[jInner]=$.trim(nTds[j].innerHTML);jInner++}}}}}nTrs=_fnGetTrNodes(oSettings);nTds=[];for(i=0,iLen=nTrs.length;i<iLen;i++){for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){nTd=nTrs[i].childNodes[j];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}}if(nTds.length!=nTrs.length*oSettings.aoColumns.length){_fnLog(oSettings,1,"Unexpected number of TD elements. Expected "+(nTrs.length*oSettings.aoColumns.length)+" and got "+nTds.length+". DataTables does not support rowspan / colspan in the table body, and there must be one cell for each row/column combination.")}for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].sTitle===null){oSettings.aoColumns[iColumn].sTitle=oSettings.aoColumns[iColumn].nTh.innerHTML}var bAutoType=oSettings.aoColumns[iColumn]._bAutoType,bRender=typeof oSettings.aoColumns[iColumn].fnRender=="function",bClass=oSettings.aoColumns[iColumn].sClass!==null,bVisible=oSettings.aoColumns[iColumn].bVisible,nCell,sThisType,sRendered;if(bAutoType||bRender||bClass||!bVisible){for(iRow=0,iRows=oSettings.aoData.length;iRow<iRows;iRow++){nCell=nTds[(iRow*iColumns)+iColumn];if(bAutoType){if(oSettings.aoColumns[iColumn].sType!="string"){sThisType=_fnDetectType(oSettings.aoData[iRow]._aData[iColumn]);if(oSettings.aoColumns[iColumn].sType===null){oSettings.aoColumns[iColumn].sType=sThisType}else{if(oSettings.aoColumns[iColumn].sType!=sThisType){oSettings.aoColumns[iColumn].sType="string"}}}}if(bRender){sRendered=oSettings.aoColumns[iColumn].fnRender({iDataRow:iRow,iDataColumn:iColumn,aData:oSettings.aoData[iRow]._aData,oSettings:oSettings});nCell.innerHTML=sRendered;if(oSettings.aoColumns[iColumn].bUseRendered){oSettings.aoData[iRow]._aData[iColumn]=sRendered}}if(bClass){nCell.className+=" "+oSettings.aoColumns[iColumn].sClass}if(!bVisible){oSettings.aoData[iRow]._anHidden[iColumn]=nCell;nCell.parentNode.removeChild(nCell)}else{oSettings.aoData[iRow]._anHidden[iColumn]=null}}}}}function _fnDrawHead(oSettings){var i,nTh,iLen,j,jLen;var iThs=oSettings.nTHead.getElementsByTagName("th").length;var iCorrector=0;if(iThs!==0){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sTitle!=nTh.innerHTML){nTh.innerHTML=oSettings.aoColumns[i].sTitle}}else{nTh.parentNode.removeChild(nTh);iCorrector++}}}else{var nTr=document.createElement("tr");for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;nTh.innerHTML=oSettings.aoColumns[i].sTitle;if(oSettings.aoColumns[i].bVisible){if(oSettings.aoColumns[i].sClass!==null){nTh.className=oSettings.aoColumns[i].sClass}nTr.appendChild(nTh)}}$(oSettings.nTHead).html("")[0].appendChild(nTr)}if(oSettings.bJUI){for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){nTh=oSettings.aoColumns[i].nTh;var nDiv=document.createElement("div");nDiv.className=oSettings.oClasses.sSortJUIWrapper;$(nTh).contents().appendTo(nDiv);nDiv.appendChild(document.createElement("span"));nTh.appendChild(nDiv)}}var fnNoSelect=function(e){this.onselectstart=function(){return false};return false};if(oSettings.oFeatures.bSort){for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable!==false){_fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.aoColumns[i].nTh).mousedown(fnNoSelect)}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.oClasses.sSortableNone)}}}if(oSettings.nTFoot!==null){iCorrector=0;var nTfs=oSettings.nTFoot.getElementsByTagName("th");for(i=0,iLen=nTfs.length;i<iLen;i++){if(typeof oSettings.aoColumns[i]!="undefined"){oSettings.aoColumns[i].nTf=nTfs[i-iCorrector];if(oSettings.oClasses.sFooterTH!==""){oSettings.aoColumns[i].nTf.className+=" "+oSettings.oClasses.sFooterTH}if(!oSettings.aoColumns[i].bVisible){nTfs[i-iCorrector].parentNode.removeChild(nTfs[i-iCorrector]);iCorrector++}}}}}function _fnDraw(oSettings){var i,iLen;var anRows=[];var iRowCount=0;var bRowError=false;var iStrips=oSettings.asStripClasses.length;var iOpenRows=oSettings.aoOpenRows.length;oSettings.bDrawing=true;if(typeof oSettings.iInitDisplayStart!="undefined"&&oSettings.iInitDisplayStart!=-1){if(oSettings.oFeatures.bServerSide){oSettings._iDisplayStart=oSettings.iInitDisplayStart}else{oSettings._iDisplayStart=(oSettings.iInitDisplayStart>=oSettings.fnRecordsDisplay())?0:oSettings.iInitDisplayStart}oSettings.iInitDisplayStart=-1;_fnCalculateEnd(oSettings)}if(oSettings.oFeatures.bServerSide&&!_fnAjaxUpdate(oSettings)){return}else{if(!oSettings.oFeatures.bServerSide){oSettings.iDraw++}}if(oSettings.aiDisplay.length!==0){var iStart=oSettings._iDisplayStart;var iEnd=oSettings._iDisplayEnd;if(oSettings.oFeatures.bServerSide){iStart=0;iEnd=oSettings.aoData.length}for(var j=iStart;j<iEnd;j++){var aoData=oSettings.aoData[oSettings.aiDisplay[j]];var nRow=aoData.nTr;if(iStrips!==0){var sStrip=oSettings.asStripClasses[iRowCount%iStrips];if(aoData._sRowStripe!=sStrip){$(nRow).removeClass(aoData._sRowStripe).addClass(sStrip);aoData._sRowStripe=sStrip}}if(typeof oSettings.fnRowCallback=="function"){nRow=oSettings.fnRowCallback.call(oSettings.oInstance,nRow,oSettings.aoData[oSettings.aiDisplay[j]]._aData,iRowCount,j);if(!nRow&&!bRowError){_fnLog(oSettings,0,"A node was not returned by fnRowCallback");bRowError=true}}anRows.push(nRow);iRowCount++;if(iOpenRows!==0){for(var k=0;k<iOpenRows;k++){if(nRow==oSettings.aoOpenRows[k].nParent){anRows.push(oSettings.aoOpenRows[k].nTr)}}}}}else{anRows[0]=document.createElement("tr");if(typeof oSettings.asStripClasses[0]!="undefined"){anRows[0].className=oSettings.asStripClasses[0]}var nTd=document.createElement("td");nTd.setAttribute("valign","top");nTd.colSpan=_fnVisbleColumns(oSettings);nTd.className=oSettings.oClasses.sRowEmpty;if(typeof oSettings.oLanguage.sEmptyTable!="undefined"&&oSettings.fnRecordsTotal()===0){nTd.innerHTML=oSettings.oLanguage.sEmptyTable}else{nTd.innerHTML=oSettings.oLanguage.sZeroRecords.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))}anRows[iRowCount].appendChild(nTd)}if(typeof oSettings.fnHeaderCallback=="function"){oSettings.fnHeaderCallback.call(oSettings.oInstance,$(">tr",oSettings.nTHead)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}if(typeof oSettings.fnFooterCallback=="function"){oSettings.fnFooterCallback.call(oSettings.oInstance,$(">tr",oSettings.nTFoot)[0],_fnGetDataMaster(oSettings),oSettings._iDisplayStart,oSettings.fnDisplayEnd(),oSettings.aiDisplay)}var nAddFrag=document.createDocumentFragment(),nRemoveFrag=document.createDocumentFragment(),nBodyPar,nTrs;if(oSettings.nTBody){nBodyPar=oSettings.nTBody.parentNode;nRemoveFrag.appendChild(oSettings.nTBody);if(!oSettings.oScroll.bInfinite||!oSettings._bInitComplete||oSettings.bSorted||oSettings.bFiltered){nTrs=oSettings.nTBody.childNodes;for(i=nTrs.length-1;i>=0;i--){nTrs[i].parentNode.removeChild(nTrs[i])}}for(i=0,iLen=anRows.length;i<iLen;i++){nAddFrag.appendChild(anRows[i])}oSettings.nTBody.appendChild(nAddFrag);if(nBodyPar!==null){nBodyPar.appendChild(oSettings.nTBody)}}for(i=0,iLen=oSettings.aoDrawCallback.length;i<iLen;i++){oSettings.aoDrawCallback[i].fn.call(oSettings.oInstance,oSettings)}oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;if(typeof oSettings._bInitComplete=="undefined"){oSettings._bInitComplete=true;if(typeof oSettings.fnInitComplete=="function"&&(oSettings.oFeatures.bServerSide||oSettings.sAjaxSource===null)){oSettings.fnInitComplete.call(oSettings.oInstance,oSettings)}}}function _fnReDraw(oSettings){if(oSettings.oFeatures.bSort){_fnSort(oSettings,oSettings.oPreviousSearch)}else{if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch)}else{_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}function _fnAjaxUpdate(oSettings){if(oSettings.bAjaxDataGet){_fnProcessingDisplay(oSettings,true);var iColumns=oSettings.aoColumns.length;var aoData=[];var i;oSettings.iDraw++;aoData.push({name:"sEcho",value:oSettings.iDraw});aoData.push({name:"iColumns",value:iColumns});aoData.push({name:"sColumns",value:_fnColumnOrdering(oSettings)});aoData.push({name:"iDisplayStart",value:oSettings._iDisplayStart});aoData.push({name:"iDisplayLength",value:oSettings.oFeatures.bPaginate!==false?oSettings._iDisplayLength:-1});var aNames=[];for(i=0;i<iColumns;i++){aNames.push(oSettings.aoColumns[i].sName)}aoData.push({name:"sNames",value:aNames.join(",")});if(oSettings.oFeatures.bFilter!==false){aoData.push({name:"sSearch",value:oSettings.oPreviousSearch.sSearch});aoData.push({name:"bRegex",value:oSettings.oPreviousSearch.bRegex});for(i=0;i<iColumns;i++){aoData.push({name:"sSearch_"+i,value:oSettings.aoPreSearchCols[i].sSearch});aoData.push({name:"bRegex_"+i,value:oSettings.aoPreSearchCols[i].bRegex});aoData.push({name:"bSearchable_"+i,value:oSettings.aoColumns[i].bSearchable})}}if(oSettings.oFeatures.bSort!==false){var iFixed=oSettings.aaSortingFixed!==null?oSettings.aaSortingFixed.length:0;var iUser=oSettings.aaSorting.length;aoData.push({name:"iSortingCols",value:iFixed+iUser});for(i=0;i<iFixed;i++){aoData.push({name:"iSortCol_"+i,value:oSettings.aaSortingFixed[i][0]});aoData.push({name:"sSortDir_"+i,value:oSettings.aaSortingFixed[i][1]})}for(i=0;i<iUser;i++){aoData.push({name:"iSortCol_"+(i+iFixed),value:oSettings.aaSorting[i][0]});aoData.push({name:"sSortDir_"+(i+iFixed),value:oSettings.aaSorting[i][1]})}for(i=0;i<iColumns;i++){aoData.push({name:"bSortable_"+i,value:oSettings.aoColumns[i].bSortable})}}oSettings.fnServerData.call(oSettings.oInstance,oSettings.sAjaxSource,aoData,function(json){_fnAjaxUpdateDraw(oSettings,json)});return false}else{return true}}function _fnAjaxUpdateDraw(oSettings,json){if(typeof json.sEcho!="undefined"){if(json.sEcho*1<oSettings.iDraw){return}else{oSettings.iDraw=json.sEcho*1}}if(!oSettings.oScroll.bInfinite||(oSettings.oScroll.bInfinite&&(oSettings.bSorted||oSettings.bFiltered))){_fnClearTable(oSettings)}oSettings._iRecordsTotal=json.iTotalRecords;oSettings._iRecordsDisplay=json.iTotalDisplayRecords;var sOrdering=_fnColumnOrdering(oSettings);var bReOrder=(typeof json.sColumns!="undefined"&&sOrdering!==""&&json.sColumns!=sOrdering);if(bReOrder){var aiIndex=_fnReOrderIndex(oSettings,json.sColumns)}for(var i=0,iLen=json.aaData.length;i<iLen;i++){if(bReOrder){var aData=[];for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){aData.push(json.aaData[i][aiIndex[j]])}_fnAddData(oSettings,aData)}else{_fnAddData(oSettings,json.aaData[i])}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bAjaxDataGet=false;_fnDraw(oSettings);oSettings.bAjaxDataGet=true;_fnProcessingDisplay(oSettings,false)}function _fnAddOptionsHtml(oSettings){var nHolding=document.createElement("div");oSettings.nTable.parentNode.insertBefore(nHolding,oSettings.nTable);oSettings.nTableWrapper=document.createElement("div");oSettings.nTableWrapper.className=oSettings.oClasses.sWrapper;if(oSettings.sTableId!==""){oSettings.nTableWrapper.setAttribute("id",oSettings.sTableId+"_wrapper")}var nInsertNode=oSettings.nTableWrapper;var aDom=oSettings.sDom.split("");var nTmp,iPushFeature,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){iPushFeature=0;cOption=aDom[i];if(cOption=="<"){nNewNode=document.createElement("div");cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++}if(sAttr=="H"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix"}else{if(sAttr=="F"){sAttr="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.setAttribute("id",aSplit[0].substr(1,aSplit[0].length-1));nNewNode.className=aSplit[1]}else{if(sAttr.charAt(0)=="#"){nNewNode.setAttribute("id",sAttr.substr(1,sAttr.length-1))}else{nNewNode.className=sAttr}}i+=j}nInsertNode.appendChild(nNewNode);nInsertNode=nNewNode}else{if(cOption==">"){nInsertNode=nInsertNode.parentNode}else{if(cOption=="l"&&oSettings.oFeatures.bPaginate&&oSettings.oFeatures.bLengthChange){nTmp=_fnFeatureHtmlLength(oSettings);iPushFeature=1}else{if(cOption=="f"&&oSettings.oFeatures.bFilter){nTmp=_fnFeatureHtmlFilter(oSettings);iPushFeature=1}else{if(cOption=="r"&&oSettings.oFeatures.bProcessing){nTmp=_fnFeatureHtmlProcessing(oSettings);iPushFeature=1}else{if(cOption=="t"){nTmp=_fnFeatureHtmlTable(oSettings);iPushFeature=1}else{if(cOption=="i"&&oSettings.oFeatures.bInfo){nTmp=_fnFeatureHtmlInfo(oSettings);iPushFeature=1}else{if(cOption=="p"&&oSettings.oFeatures.bPaginate){nTmp=_fnFeatureHtmlPaginate(oSettings);iPushFeature=1}else{if(_oExt.aoFeatures.length!==0){var aoFeatures=_oExt.aoFeatures;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){nTmp=aoFeatures[k].fnInit(oSettings);if(nTmp){iPushFeature=1}break}}}}}}}}}}}if(iPushFeature==1&&nTmp!==null){if(typeof oSettings.aanFeatures[cOption]!="object"){oSettings.aanFeatures[cOption]=[]}oSettings.aanFeatures[cOption].push(nTmp);nInsertNode.appendChild(nTmp)}}nHolding.parentNode.replaceChild(oSettings.nTableWrapper,nHolding)}function _fnFeatureHtmlTable(oSettings){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){return oSettings.nTable}var nScroller=document.createElement("div"),nScrollHead=document.createElement("div"),nScrollHeadInner=document.createElement("div"),nScrollBody=document.createElement("div"),nScrollFoot=document.createElement("div"),nScrollFootInner=document.createElement("div"),nScrollHeadTable=oSettings.nTable.cloneNode(false),nScrollFootTable=oSettings.nTable.cloneNode(false),nThead=oSettings.nTable.getElementsByTagName("thead")[0],nTfoot=oSettings.nTable.getElementsByTagName("tfoot").length===0?null:oSettings.nTable.getElementsByTagName("tfoot")[0],oClasses=(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI)?_oExt.oJUIClasses:_oExt.oStdClasses;nScrollHead.appendChild(nScrollHeadInner);nScrollFoot.appendChild(nScrollFootInner);nScrollBody.appendChild(oSettings.nTable);nScroller.appendChild(nScrollHead);nScroller.appendChild(nScrollBody);nScrollHeadInner.appendChild(nScrollHeadTable);nScrollHeadTable.appendChild(nThead);if(nTfoot!==null){nScroller.appendChild(nScrollFoot);nScrollFootInner.appendChild(nScrollFootTable);nScrollFootTable.appendChild(nTfoot)}nScroller.className=oClasses.sScrollWrapper;nScrollHead.className=oClasses.sScrollHead;nScrollHeadInner.className=oClasses.sScrollHeadInner;nScrollBody.className=oClasses.sScrollBody;nScrollFoot.className=oClasses.sScrollFoot;nScrollFootInner.className=oClasses.sScrollFootInner;nScrollHead.style.overflow="hidden";nScrollHead.style.position="relative";nScrollFoot.style.overflow="hidden";nScrollBody.style.overflow="auto";nScrollHead.style.border="0";nScrollFoot.style.border="0";nScrollHeadInner.style.width="150%";nScrollHeadTable.removeAttribute("id");nScrollHeadTable.style.marginLeft="0";oSettings.nTable.style.marginLeft="0";if(nTfoot!==null){nScrollFootTable.removeAttribute("id");nScrollFootTable.style.marginLeft="0"}var nCaptions=$(">caption",oSettings.nTable);for(var i=0,iLen=nCaptions.length;i<iLen;i++){nScrollHeadTable.appendChild(nCaptions[i])}if(oSettings.oScroll.sX!==""){nScrollHead.style.width=_fnStringToCss(oSettings.oScroll.sX);nScrollBody.style.width=_fnStringToCss(oSettings.oScroll.sX);if(nTfoot!==null){nScrollFoot.style.width=_fnStringToCss(oSettings.oScroll.sX)}$(nScrollBody).scroll(function(e){nScrollHead.scrollLeft=this.scrollLeft;if(nTfoot!==null){nScrollFoot.scrollLeft=this.scrollLeft}})}if(oSettings.oScroll.sY!==""){nScrollBody.style.height=_fnStringToCss(oSettings.oScroll.sY)}oSettings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});if(oSettings.oScroll.bInfinite){$(nScrollBody).scroll(function(){if(!oSettings.bDrawing){if($(this).scrollTop()+$(this).height()>$(oSettings.nTable).height()-oSettings.oScroll.iLoadGap){if(oSettings.fnDisplayEnd()<oSettings.fnRecordsDisplay()){_fnPageChange(oSettings,"next");_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}}})}oSettings.nScrollHead=nScrollHead;oSettings.nScrollFoot=nScrollFoot;return nScroller}function _fnScrollDraw(o){var nScrollHeadInner=o.nScrollHead.getElementsByTagName("div")[0],nScrollHeadTable=nScrollHeadInner.getElementsByTagName("table")[0],nScrollBody=o.nTable.parentNode,i,iLen,j,jLen,anHeadToSize,anHeadSizers,anFootSizers,anFootToSize,oStyle,iVis,iWidth,aApplied=[],iSanityWidth;var nTheadSize=o.nTable.getElementsByTagName("thead");if(nTheadSize.length>0){o.nTable.removeChild(nTheadSize[0])}if(o.nTFoot!==null){var nTfootSize=o.nTable.getElementsByTagName("tfoot");if(nTfootSize.length>0){o.nTable.removeChild(nTfootSize[0])}}nTheadSize=o.nTHead.cloneNode(true);o.nTable.insertBefore(nTheadSize,o.nTable.childNodes[0]);if(o.nTFoot!==null){nTfootSize=o.nTFoot.cloneNode(true);o.nTable.insertBefore(nTfootSize,o.nTable.childNodes[1])}var nThs=_fnGetUniqueThs(nTheadSize);for(i=0,iLen=nThs.length;i<iLen;i++){iVis=_fnVisibleToColumnIndex(o,i);nThs[i].style.width=o.aoColumns[iVis].sWidth}if(o.nTFoot!==null){_fnApplyToChildren(function(n){n.style.width=""},nTfootSize.getElementsByTagName("tr"))}iSanityWidth=$(o.nTable).outerWidth();if(o.oScroll.sX===""){o.nTable.style.width="100%";if($.browser.msie&&$.browser.version<=7){o.nTable.style.width=_fnStringToCss($(o.nTable).outerWidth()-o.oScroll.iBarWidth)}}else{if(o.oScroll.sXInner!==""){o.nTable.style.width=_fnStringToCss(o.oScroll.sXInner)}else{if(iSanityWidth==$(nScrollBody).width()&&$(nScrollBody).height()<$(o.nTable).height()){o.nTable.style.width=_fnStringToCss(iSanityWidth-o.oScroll.iBarWidth);if($(o.nTable).outerWidth()>iSanityWidth-o.oScroll.iBarWidth){o.nTable.style.width=_fnStringToCss(iSanityWidth)}}else{o.nTable.style.width=_fnStringToCss(iSanityWidth)}}}iSanityWidth=$(o.nTable).outerWidth();anHeadToSize=o.nTHead.getElementsByTagName("tr");anHeadSizers=nTheadSize.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";oStyle.height=0;iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anHeadSizers,anHeadToSize);$(anHeadSizers).height(0);if(o.nTFoot!==null){anFootSizers=nTfootSize.getElementsByTagName("tr");anFootToSize=o.nTFoot.getElementsByTagName("tr");_fnApplyToChildren(function(nSizer,nToSize){oStyle=nSizer.style;oStyle.paddingTop="0";oStyle.paddingBottom="0";oStyle.borderTopWidth="0";oStyle.borderBottomWidth="0";iWidth=$(nSizer).width();nToSize.style.width=_fnStringToCss(iWidth);aApplied.push(iWidth)},anFootSizers,anFootToSize);$(anFootSizers).height(0)}_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anHeadSizers);if(o.nTFoot!==null){_fnApplyToChildren(function(nSizer){nSizer.innerHTML="";nSizer.style.width=_fnStringToCss(aApplied.shift())},anFootSizers)}if($(o.nTable).outerWidth()<iSanityWidth){if(o.oScroll.sX===""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn")}else{if(o.oScroll.sXInner!==""){_fnLog(o,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")}}}if(o.oScroll.sY===""){if($.browser.msie&&$.browser.version<=7){nScrollBody.style.height=_fnStringToCss(o.nTable.offsetHeight+o.oScroll.iBarWidth)}}if(o.oScroll.sY!==""&&o.oScroll.bCollapse){nScrollBody.style.height=_fnStringToCss(o.oScroll.sY);var iExtra=(o.oScroll.sX!==""&&o.nTable.offsetWidth>nScrollBody.offsetWidth)?o.oScroll.iBarWidth:0;if(o.nTable.offsetHeight<nScrollBody.offsetHeight){nScrollBody.style.height=_fnStringToCss($(o.nTable).height()+iExtra)}}var iOuterWidth=$(o.nTable).outerWidth();nScrollHeadTable.style.width=_fnStringToCss(iOuterWidth);nScrollHeadInner.style.width=_fnStringToCss(iOuterWidth+o.oScroll.iBarWidth);nScrollHeadInner.parentNode.style.width=_fnStringToCss($(nScrollBody).width());if(o.nTFoot!==null){var nScrollFootInner=o.nScrollFoot.getElementsByTagName("div")[0],nScrollFootTable=nScrollFootInner.getElementsByTagName("table")[0];nScrollFootInner.style.width=_fnStringToCss(o.nTable.offsetWidth+o.oScroll.iBarWidth);nScrollFootTable.style.width=_fnStringToCss(o.nTable.offsetWidth)}if(o.bSorted||o.bFiltered){nScrollBody.scrollTop=0}}function _fnAjustColumnSizing(oSettings){if(oSettings.oFeatures.bAutoWidth===false){return false}_fnCalculateColumnWidths(oSettings);for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oSettings.aoColumns[i].nTh.style.width=oSettings.aoColumns[i].sWidth}}function _fnFeatureHtmlFilter(oSettings){var nFilter=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.f=="undefined"){nFilter.setAttribute("id",oSettings.sTableId+"_filter")}nFilter.className=oSettings.oClasses.sFilter;var sSpace=oSettings.oLanguage.sSearch===""?"":" ";nFilter.innerHTML=oSettings.oLanguage.sSearch+sSpace+'<input type="text" />';var jqFilter=$("input",nFilter);jqFilter.val(oSettings.oPreviousSearch.sSearch.replace('"',"&quot;"));jqFilter.keyup(function(e){var n=oSettings.aanFeatures.f;for(var i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("input",n[i]).val(this.value)}}if(this.value!=oSettings.oPreviousSearch.sSearch){_fnFilterComplete(oSettings,{sSearch:this.value,bRegex:oSettings.oPreviousSearch.bRegex,bSmart:oSettings.oPreviousSearch.bSmart})}});jqFilter.keypress(function(e){if(e.keyCode==13){return false}});return nFilter}function _fnFilterComplete(oSettings,oInput,iForce){_fnFilter(oSettings,oInput.sSearch,iForce,oInput.bRegex,oInput.bSmart);for(var i=0;i<oSettings.aoPreSearchCols.length;i++){_fnFilterColumn(oSettings,oSettings.aoPreSearchCols[i].sSearch,i,oSettings.aoPreSearchCols[i].bRegex,oSettings.aoPreSearchCols[i].bSmart)}if(_oExt.afnFiltering.length!==0){_fnFilterCustom(oSettings)}oSettings.bFiltered=true;oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings);_fnBuildSearchArray(oSettings,0)}function _fnFilterCustom(oSettings){var afnFilters=_oExt.afnFiltering;for(var i=0,iLen=afnFilters.length;i<iLen;i++){var iCorrector=0;for(var j=0,jLen=oSettings.aiDisplay.length;j<jLen;j++){var iDisIndex=oSettings.aiDisplay[j-iCorrector];if(!afnFilters[i](oSettings,oSettings.aoData[iDisIndex]._aData,iDisIndex)){oSettings.aiDisplay.splice(j-iCorrector,1);iCorrector++}}}}function _fnFilterColumn(oSettings,sInput,iColumn,bRegex,bSmart){if(sInput===""){return}var iIndexCorrector=0;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);for(var i=oSettings.aiDisplay.length-1;i>=0;i--){var sData=_fnDataToSearch(oSettings.aoData[oSettings.aiDisplay[i]]._aData[iColumn],oSettings.aoColumns[iColumn].sType);if(!rpSearch.test(sData)){oSettings.aiDisplay.splice(i,1);iIndexCorrector++}}}function _fnFilter(oSettings,sInput,iForce,bRegex,bSmart){var i;var rpSearch=_fnFilterCreateSearch(sInput,bRegex,bSmart);if(typeof iForce=="undefined"||iForce===null){iForce=0}if(_oExt.afnFiltering.length!==0){iForce=1}if(sInput.length<=0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice()}else{if(oSettings.aiDisplay.length==oSettings.aiDisplayMaster.length||oSettings.oPreviousSearch.sSearch.length>sInput.length||iForce==1||sInput.indexOf(oSettings.oPreviousSearch.sSearch)!==0){oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnBuildSearchArray(oSettings,1);for(i=0;i<oSettings.aiDisplayMaster.length;i++){if(rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.push(oSettings.aiDisplayMaster[i])}}}else{var iIndexCorrector=0;for(i=0;i<oSettings.asDataSearch.length;i++){if(!rpSearch.test(oSettings.asDataSearch[i])){oSettings.aiDisplay.splice(i-iIndexCorrector,1);iIndexCorrector++}}}}oSettings.oPreviousSearch.sSearch=sInput;oSettings.oPreviousSearch.bRegex=bRegex;oSettings.oPreviousSearch.bSmart=bSmart}function _fnBuildSearchArray(oSettings,iMaster){oSettings.asDataSearch.splice(0,oSettings.asDataSearch.length);var aArray=(typeof iMaster!="undefined"&&iMaster==1)?oSettings.aiDisplayMaster:oSettings.aiDisplay;for(var i=0,iLen=aArray.length;i<iLen;i++){oSettings.asDataSearch[i]=_fnBuildSearchRow(oSettings,oSettings.aoData[aArray[i]]._aData)}}function _fnBuildSearchRow(oSettings,aData){var sSearch="";var nTmp=document.createElement("div");for(var j=0,jLen=oSettings.aoColumns.length;j<jLen;j++){if(oSettings.aoColumns[j].bSearchable){var sData=aData[j];sSearch+=_fnDataToSearch(sData,oSettings.aoColumns[j].sType)+"  "}}if(sSearch.indexOf("&")!==-1){nTmp.innerHTML=sSearch;sSearch=nTmp.textContent?nTmp.textContent:nTmp.innerText;sSearch=sSearch.replace(/\n/g," ").replace(/\r/g,"")}return sSearch}function _fnFilterCreateSearch(sSearch,bRegex,bSmart){var asSearch,sRegExpString;if(bSmart){asSearch=bRegex?sSearch.split(" "):_fnEscapeRegex(sSearch).split(" ");sRegExpString="^(?=.*?"+asSearch.join(")(?=.*?")+").*$";return new RegExp(sRegExpString,"i")}else{sSearch=bRegex?sSearch:_fnEscapeRegex(sSearch);return new RegExp(sSearch,"i")}}function _fnDataToSearch(sData,sType){if(typeof _oExt.ofnSearch[sType]=="function"){return _oExt.ofnSearch[sType](sData)}else{if(sType=="html"){return sData.replace(/\n/g," ").replace(/<.*?>/g,"")}else{if(typeof sData=="string"){return sData.replace(/\n/g," ")}}}return sData}function _fnSort(oSettings,bApplyClasses){var aaSort=[];var oSort=_oExt.oSort;var aoData=oSettings.aoData;var iDataSort;var iDataType;var i,j,jLen;if(!oSettings.oFeatures.bServerSide&&(oSettings.aaSorting.length!==0||oSettings.aaSortingFixed!==null)){if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<aaSort.length;i++){var iColumn=aaSort[i][0];var iVisColumn=_fnColumnIndexToVisible(oSettings,iColumn);var sDataType=oSettings.aoColumns[iColumn].sSortDataType;if(typeof _oExt.afnSortData[sDataType]!="undefined"){var aData=_oExt.afnSortData[sDataType](oSettings,iColumn,iVisColumn);for(j=0,jLen=aoData.length;j<jLen;j++){aoData[j]._aData[iColumn]=aData[j]}}}if(!window.runtime){this.ClosureDataTables={fn:function(){},data:aoData,sort:_oExt.oSort,master:oSettings.aiDisplayMaster.slice()};var sDynamicSort="this.ClosureDataTables.fn = function(a,b){var iTest, oSort=this.ClosureDataTables.sort, aoData=this.ClosureDataTables.data, aiOrig=this.ClosureDataTables.master;";for(i=0;i<aaSort.length-1;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[i][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] ); if ( iTest === 0 )"}if(aaSort.length>0){iDataSort=oSettings.aoColumns[aaSort[aaSort.length-1][0]].iDataSort;iDataType=oSettings.aoColumns[iDataSort].sType;sDynamicSort+="iTest = oSort['"+iDataType+"-"+aaSort[aaSort.length-1][1]+"']( aoData[a]._aData["+iDataSort+"], aoData[b]._aData["+iDataSort+"] );if (iTest===0) return oSort['numeric-asc'](jQuery.inArray(a,aiOrig), jQuery.inArray(b,aiOrig)); return iTest;}";eval(sDynamicSort);oSettings.aiDisplayMaster.sort(this.ClosureDataTables.fn)}this.ClosureDataTables=undefined}else{var aAirSort=[];var iLen=aaSort.length;for(i=0;i<iLen;i++){iDataSort=oSettings.aoColumns[aaSort[i][0]].iDataSort;aAirSort.push([iDataSort,oSettings.aoColumns[iDataSort].sType+"-"+aaSort[i][1]])}oSettings.aiDisplayMaster.sort(function(a,b){var iTest;for(var i=0;i<iLen;i++){iTest=oSort[aAirSort[i][1]](aoData[a]._aData[aAirSort[i][0]],aoData[b]._aData[aAirSort[i][0]]);if(iTest!==0){return iTest}}return 0})}}if(typeof bApplyClasses=="undefined"||bApplyClasses){_fnSortingClasses(oSettings)}oSettings.bSorted=true;if(oSettings.oFeatures.bFilter){_fnFilterComplete(oSettings,oSettings.oPreviousSearch,1)}else{oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings._iDisplayStart=0;_fnCalculateEnd(oSettings);_fnDraw(oSettings)}}function _fnSortAttachListener(oSettings,nNode,iDataIndex,fnCallback){$(nNode).click(function(e){if(oSettings.aoColumns[iDataIndex].bSortable===false){return}var fnInnerSorting=function(){var iColumn,iNextSort;if(e.shiftKey){var bFound=false;for(var i=0;i<oSettings.aaSorting.length;i++){if(oSettings.aaSorting[i][0]==iDataIndex){bFound=true;iColumn=oSettings.aaSorting[i][0];iNextSort=oSettings.aaSorting[i][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){oSettings.aaSorting.splice(i,1)}else{oSettings.aaSorting[i][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[i][2]=iNextSort}break}}if(bFound===false){oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}else{if(oSettings.aaSorting.length==1&&oSettings.aaSorting[0][0]==iDataIndex){iColumn=oSettings.aaSorting[0][0];iNextSort=oSettings.aaSorting[0][2]+1;if(typeof oSettings.aoColumns[iColumn].asSorting[iNextSort]=="undefined"){iNextSort=0}oSettings.aaSorting[0][1]=oSettings.aoColumns[iColumn].asSorting[iNextSort];oSettings.aaSorting[0][2]=iNextSort}else{oSettings.aaSorting.splice(0,oSettings.aaSorting.length);oSettings.aaSorting.push([iDataIndex,oSettings.aoColumns[iDataIndex].asSorting[0],0])}}_fnSort(oSettings)};if(!oSettings.oFeatures.bProcessing){fnInnerSorting()}else{_fnProcessingDisplay(oSettings,true);setTimeout(function(){fnInnerSorting();if(!oSettings.oFeatures.bServerSide){_fnProcessingDisplay(oSettings,false)}},0)}if(typeof fnCallback=="function"){fnCallback(oSettings)}})}function _fnSortingClasses(oSettings){var i,iLen,j,jLen,iFound;var aaSort,sClass;var iColumns=oSettings.aoColumns.length;var oClasses=oSettings.oClasses;for(i=0;i<iColumns;i++){if(oSettings.aoColumns[i].bSortable){$(oSettings.aoColumns[i].nTh).removeClass(oClasses.sSortAsc+" "+oClasses.sSortDesc+" "+oSettings.aoColumns[i].sSortingClass)}}if(oSettings.aaSortingFixed!==null){aaSort=oSettings.aaSortingFixed.concat(oSettings.aaSorting)}else{aaSort=oSettings.aaSorting.slice()}for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bSortable){sClass=oSettings.aoColumns[i].sSortingClass;iFound=-1;for(j=0;j<aaSort.length;j++){if(aaSort[j][0]==i){sClass=(aaSort[j][1]=="asc")?oClasses.sSortAsc:oClasses.sSortDesc;iFound=j;break}}$(oSettings.aoColumns[i].nTh).addClass(sClass);if(oSettings.bJUI){var jqSpan=$("span",oSettings.aoColumns[i].nTh);jqSpan.removeClass(oClasses.sSortJUIAsc+" "+oClasses.sSortJUIDesc+" "+oClasses.sSortJUI+" "+oClasses.sSortJUIAscAllowed+" "+oClasses.sSortJUIDescAllowed);var sSpanClass;if(iFound==-1){sSpanClass=oSettings.aoColumns[i].sSortingClassJUI}else{if(aaSort[iFound][1]=="asc"){sSpanClass=oClasses.sSortJUIAsc}else{sSpanClass=oClasses.sSortJUIDesc}}jqSpan.addClass(sSpanClass)}}else{$(oSettings.aoColumns[i].nTh).addClass(oSettings.aoColumns[i].sSortingClass)}}sClass=oClasses.sSortColumn;if(oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){var nTds=_fnGetTdNodes(oSettings);if(nTds.length>=iColumns){for(i=0;i<iColumns;i++){if(nTds[i].className.indexOf(sClass+"1")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"1",""))}}else{if(nTds[i].className.indexOf(sClass+"2")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(sClass+"2",""))}}else{if(nTds[i].className.indexOf(sClass+"3")!=-1){for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+i].className=$.trim(nTds[(iColumns*j)+i].className.replace(" "+sClass+"3",""))}}}}}}var iClass=1,iTargetCol;for(i=0;i<aaSort.length;i++){iTargetCol=parseInt(aaSort[i][0],10);for(j=0,jLen=(nTds.length/iColumns);j<jLen;j++){nTds[(iColumns*j)+iTargetCol].className+=" "+sClass+iClass}if(iClass<3){iClass++}}}}function _fnFeatureHtmlPaginate(oSettings){if(oSettings.oScroll.bInfinite){return null}var nPaginate=document.createElement("div");nPaginate.className=oSettings.oClasses.sPaging+oSettings.sPaginationType;_oExt.oPagination[oSettings.sPaginationType].fnInit(oSettings,nPaginate,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)});if(typeof oSettings.aanFeatures.p=="undefined"){oSettings.aoDrawCallback.push({fn:function(oSettings){_oExt.oPagination[oSettings.sPaginationType].fnUpdate(oSettings,function(oSettings){_fnCalculateEnd(oSettings);_fnDraw(oSettings)})},sName:"pagination"})}return nPaginate}function _fnPageChange(oSettings,sAction){var iOldStart=oSettings._iDisplayStart;if(sAction=="first"){oSettings._iDisplayStart=0}else{if(sAction=="previous"){oSettings._iDisplayStart=oSettings._iDisplayLength>=0?oSettings._iDisplayStart-oSettings._iDisplayLength:0;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}else{if(sAction=="next"){if(oSettings._iDisplayLength>=0){if(oSettings._iDisplayStart+oSettings._iDisplayLength<oSettings.fnRecordsDisplay()){oSettings._iDisplayStart+=oSettings._iDisplayLength}}else{oSettings._iDisplayStart=0}}else{if(sAction=="last"){if(oSettings._iDisplayLength>=0){var iPages=parseInt((oSettings.fnRecordsDisplay()-1)/oSettings._iDisplayLength,10)+1;oSettings._iDisplayStart=(iPages-1)*oSettings._iDisplayLength}else{oSettings._iDisplayStart=0}}else{_fnLog(oSettings,0,"Unknown paging action: "+sAction)}}}}return iOldStart!=oSettings._iDisplayStart}function _fnFeatureHtmlInfo(oSettings){var nInfo=document.createElement("div");nInfo.className=oSettings.oClasses.sInfo;if(typeof oSettings.aanFeatures.i=="undefined"){oSettings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});if(oSettings.sTableId!==""){nInfo.setAttribute("id",oSettings.sTableId+"_info")}}return nInfo}function _fnUpdateInfo(oSettings){if(!oSettings.oFeatures.bInfo||oSettings.aanFeatures.i.length===0){return}var iStart=oSettings._iDisplayStart+1,iEnd=oSettings.fnDisplayEnd(),iMax=oSettings.fnRecordsTotal(),iTotal=oSettings.fnRecordsDisplay(),sStart=oSettings.fnFormatNumber(iStart),sEnd=oSettings.fnFormatNumber(iEnd),sMax=oSettings.fnFormatNumber(iMax),sTotal=oSettings.fnFormatNumber(iTotal),sOut;if(oSettings.oScroll.bInfinite){sStart=oSettings.fnFormatNumber(1)}if(oSettings.fnRecordsDisplay()===0&&oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfoEmpty+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()===0){sOut=oSettings.oLanguage.sInfoEmpty+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",sMax)+oSettings.oLanguage.sInfoPostFix}else{if(oSettings.fnRecordsDisplay()==oSettings.fnRecordsTotal()){sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+oSettings.oLanguage.sInfoPostFix}else{sOut=oSettings.oLanguage.sInfo.replace("_START_",sStart).replace("_END_",sEnd).replace("_TOTAL_",sTotal)+" "+oSettings.oLanguage.sInfoFiltered.replace("_MAX_",oSettings.fnFormatNumber(oSettings.fnRecordsTotal()))+oSettings.oLanguage.sInfoPostFix}}}if(oSettings.oLanguage.fnInfoCallback!==null){sOut=oSettings.oLanguage.fnInfoCallback(oSettings,iStart,iEnd,iMax,iTotal,sOut)}var n=oSettings.aanFeatures.i;for(var i=0,iLen=n.length;i<iLen;i++){$(n[i]).html(sOut)}}function _fnFeatureHtmlLength(oSettings){if(oSettings.oScroll.bInfinite){return null}var sName=(oSettings.sTableId==="")?"":'name="'+oSettings.sTableId+'_length"';var sStdMenu='<select size="1" '+sName+">";var i,iLen;if(oSettings.aLengthMenu.length==2&&typeof oSettings.aLengthMenu[0]=="object"&&typeof oSettings.aLengthMenu[1]=="object"){for(i=0,iLen=oSettings.aLengthMenu[0].length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[0][i]+'">'+oSettings.aLengthMenu[1][i]+"</option>"}}else{for(i=0,iLen=oSettings.aLengthMenu.length;i<iLen;i++){sStdMenu+='<option value="'+oSettings.aLengthMenu[i]+'">'+oSettings.aLengthMenu[i]+"</option>"}}sStdMenu+="</select>";var nLength=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.l=="undefined"){nLength.setAttribute("id",oSettings.sTableId+"_length")}nLength.className=oSettings.oClasses.sLength;nLength.innerHTML=oSettings.oLanguage.sLengthMenu.replace("_MENU_",sStdMenu);$('select option[value="'+oSettings._iDisplayLength+'"]',nLength).attr("selected",true);$("select",nLength).change(function(e){var iVal=$(this).val();var n=oSettings.aanFeatures.l;for(i=0,iLen=n.length;i<iLen;i++){if(n[i]!=this.parentNode){$("select",n[i]).val(iVal)}}oSettings._iDisplayLength=parseInt(iVal,10);_fnCalculateEnd(oSettings);if(oSettings.fnDisplayEnd()==oSettings.fnRecordsDisplay()){oSettings._iDisplayStart=oSettings.fnDisplayEnd()-oSettings._iDisplayLength;if(oSettings._iDisplayStart<0){oSettings._iDisplayStart=0}}if(oSettings._iDisplayLength==-1){oSettings._iDisplayStart=0}_fnDraw(oSettings)});return nLength}function _fnFeatureHtmlProcessing(oSettings){var nProcessing=document.createElement("div");if(oSettings.sTableId!==""&&typeof oSettings.aanFeatures.r=="undefined"){nProcessing.setAttribute("id",oSettings.sTableId+"_processing")}nProcessing.innerHTML=oSettings.oLanguage.sProcessing;nProcessing.className=oSettings.oClasses.sProcessing;oSettings.nTable.parentNode.insertBefore(nProcessing,oSettings.nTable);return nProcessing}function _fnProcessingDisplay(oSettings,bShow){if(oSettings.oFeatures.bProcessing){var an=oSettings.aanFeatures.r;for(var i=0,iLen=an.length;i<iLen;i++){an[i].style.visibility=bShow?"visible":"hidden"}}}function _fnVisibleToColumnIndex(oSettings,iMatch){var iColumn=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iColumn++}if(iColumn==iMatch){return i}}return null}function _fnColumnIndexToVisible(oSettings,iMatch){var iVisible=-1;for(var i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible===true){iVisible++}if(i==iMatch){return oSettings.aoColumns[i].bVisible===true?iVisible:null}}return null}function _fnNodeToDataIndex(s,n){var i,iLen;for(i=s._iDisplayStart,iLen=s._iDisplayEnd;i<iLen;i++){if(s.aoData[s.aiDisplay[i]].nTr==n){return s.aiDisplay[i]}}for(i=0,iLen=s.aoData.length;i<iLen;i++){if(s.aoData[i].nTr==n){return i}}return null}function _fnVisbleColumns(oS){var iVis=0;for(var i=0;i<oS.aoColumns.length;i++){if(oS.aoColumns[i].bVisible===true){iVis++}}return iVis}function _fnCalculateEnd(oSettings){if(oSettings.oFeatures.bPaginate===false){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{if(oSettings._iDisplayStart+oSettings._iDisplayLength>oSettings.aiDisplay.length||oSettings._iDisplayLength==-1){oSettings._iDisplayEnd=oSettings.aiDisplay.length}else{oSettings._iDisplayEnd=oSettings._iDisplayStart+oSettings._iDisplayLength}}}function _fnConvertToWidth(sWidth,nParent){if(!sWidth||sWidth===null||sWidth===""){return 0}if(typeof nParent=="undefined"){nParent=document.getElementsByTagName("body")[0]}var iWidth;var nTmp=document.createElement("div");nTmp.style.width=sWidth;nParent.appendChild(nTmp);iWidth=nTmp.offsetWidth;nParent.removeChild(nTmp);return(iWidth)}function _fnCalculateColumnWidths(oSettings){var iTableWidth=oSettings.nTable.offsetWidth;var iUserInputs=0;var iTmpWidth;var iVisibleColumns=0;var iColums=oSettings.aoColumns.length;var i;var oHeaders=$("th",oSettings.nTHead);for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){iVisibleColumns++;if(oSettings.aoColumns[i].sWidth!==null){iTmpWidth=_fnConvertToWidth(oSettings.aoColumns[i].sWidthOrig,oSettings.nTable.parentNode);if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}iUserInputs++}}}if(iColums==oHeaders.length&&iUserInputs===0&&iVisibleColumns==iColums&&oSettings.oScroll.sX===""&&oSettings.oScroll.sY===""){for(i=0;i<oSettings.aoColumns.length;i++){iTmpWidth=$(oHeaders[i]).width();if(iTmpWidth!==null){oSettings.aoColumns[i].sWidth=_fnStringToCss(iTmpWidth)}}}else{var nCalcTmp=oSettings.nTable.cloneNode(false),nBody=document.createElement("tbody"),nTr=document.createElement("tr"),nDivSizing;nCalcTmp.removeAttribute("id");nCalcTmp.appendChild(oSettings.nTHead.cloneNode(true));if(oSettings.nTFoot!==null){nCalcTmp.appendChild(oSettings.nTFoot.cloneNode(true));_fnApplyToChildren(function(n){n.style.width=""},nCalcTmp.getElementsByTagName("tr"))}nCalcTmp.appendChild(nBody);nBody.appendChild(nTr);var jqColSizing=$("thead th",nCalcTmp);if(jqColSizing.length===0){jqColSizing=$("tbody tr:eq(0)>td",nCalcTmp)}jqColSizing.each(function(i){this.style.width="";var iIndex=_fnVisibleToColumnIndex(oSettings,i);if(iIndex!==null&&oSettings.aoColumns[iIndex].sWidthOrig!==""){this.style.width=oSettings.aoColumns[iIndex].sWidthOrig}});for(i=0;i<iColums;i++){if(oSettings.aoColumns[i].bVisible){var nTd=_fnGetWidestNode(oSettings,i);if(nTd!==null){nTd=nTd.cloneNode(true);nTr.appendChild(nTd)}}}var nWrapper=oSettings.nTable.parentNode;nWrapper.appendChild(nCalcTmp);if(oSettings.oScroll.sX!==""&&oSettings.oScroll.sXInner!==""){nCalcTmp.style.width=_fnStringToCss(oSettings.oScroll.sXInner)}else{if(oSettings.oScroll.sX!==""){nCalcTmp.style.width="";if($(nCalcTmp).width()<nWrapper.offsetWidth){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}else{if(oSettings.oScroll.sY!==""){nCalcTmp.style.width=_fnStringToCss(nWrapper.offsetWidth)}}}nCalcTmp.style.visibility="hidden";_fnScrollingWidthAdjust(oSettings,nCalcTmp);var oNodes=$("tbody tr:eq(0)>td",nCalcTmp);if(oNodes.length===0){oNodes=$("thead tr:eq(0)>th",nCalcTmp)}var iIndex,iCorrector=0,iWidth;for(i=0;i<oSettings.aoColumns.length;i++){if(oSettings.aoColumns[i].bVisible){iWidth=$(oNodes[iCorrector]).width();if(iWidth!==null&&iWidth>0){oSettings.aoColumns[i].sWidth=_fnStringToCss(iWidth)}iCorrector++}}oSettings.nTable.style.width=_fnStringToCss($(nCalcTmp).outerWidth());nCalcTmp.parentNode.removeChild(nCalcTmp)}}function _fnScrollingWidthAdjust(oSettings,n){if(oSettings.oScroll.sX===""&&oSettings.oScroll.sY!==""){var iOrigWidth=$(n).width();n.style.width=_fnStringToCss($(n).outerWidth()-oSettings.oScroll.iBarWidth)}else{if(oSettings.oScroll.sX!==""){n.style.width=_fnStringToCss($(n).outerWidth())}}}function _fnGetWidestNode(oSettings,iCol,bFast){if(typeof bFast=="undefined"||bFast){var iMaxLen=_fnGetMaxLenString(oSettings,iCol);var iFastVis=_fnColumnIndexToVisible(oSettings,iCol);if(iMaxLen<0){return null}return oSettings.aoData[iMaxLen].nTr.getElementsByTagName("td")[iFastVis]}var iMax=-1,i,iLen,iMaxIndex=-1,n=document.createElement("div");n.style.visibility="hidden";n.style.position="absolute";document.body.appendChild(n);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++){n.innerHTML=oSettings.aoData[i]._aData[iCol];if(n.offsetWidth>iMax){iMax=n.offsetWidth;iMaxIndex=i}}document.body.removeChild(n);if(iMaxIndex>=0){var iVis=_fnColumnIndexToVisible(oSettings,iCol);var nRet=oSettings.aoData[iMaxIndex].nTr.getElementsByTagName("td")[iVis];if(nRet){return nRet}}return null}function _fnGetMaxLenString(oSettings,iCol){var iMax=-1;var iMaxIndex=-1;for(var i=0;i<oSettings.aoData.length;i++){var s=oSettings.aoData[i]._aData[iCol];if(s.length>iMax){iMax=s.length;iMaxIndex=i}}return iMaxIndex}function _fnStringToCss(s){if(s===null){return"0px"}if(typeof s=="number"){if(s<0){return"0px"}return s+"px"}var c=s.charCodeAt(s.length-1);if(c<48||c>57){return s}return s+"px"}function _fnArrayCmp(aArray1,aArray2){if(aArray1.length!=aArray2.length){return 1}for(var i=0;i<aArray1.length;i++){if(aArray1[i]!=aArray2[i]){return 2}}return 0}function _fnDetectType(sData){var aTypes=_oExt.aTypes;var iLen=aTypes.length;for(var i=0;i<iLen;i++){var sType=aTypes[i](sData);if(sType!==null){return sType}}return"string"}function _fnSettingsFromNode(nTable){for(var i=0;i<_aoSettings.length;i++){if(_aoSettings[i].nTable==nTable){return _aoSettings[i]}}return null}function _fnGetDataMaster(oSettings){var aData=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aData.push(oSettings.aoData[i]._aData)}return aData}function _fnGetTrNodes(oSettings){var aNodes=[];var iLen=oSettings.aoData.length;for(var i=0;i<iLen;i++){aNodes.push(oSettings.aoData[i].nTr)}return aNodes}function _fnGetTdNodes(oSettings){var nTrs=_fnGetTrNodes(oSettings);var nTds=[],nTd;var anReturn=[];var iCorrector;var iRow,iRows,iColumn,iColumns;for(iRow=0,iRows=nTrs.length;iRow<iRows;iRow++){nTds=[];for(iColumn=0,iColumns=nTrs[iRow].childNodes.length;iColumn<iColumns;iColumn++){nTd=nTrs[iRow].childNodes[iColumn];if(nTd.nodeName.toUpperCase()=="TD"){nTds.push(nTd)}}iCorrector=0;for(iColumn=0,iColumns=oSettings.aoColumns.length;iColumn<iColumns;iColumn++){if(oSettings.aoColumns[iColumn].bVisible){anReturn.push(nTds[iColumn-iCorrector])}else{anReturn.push(oSettings.aoData[iRow]._anHidden[iColumn]);iCorrector++}}}return anReturn}function _fnEscapeRegex(sVal){var acEscape=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];var reReplace=new RegExp("(\\"+acEscape.join("|\\")+")","g");return sVal.replace(reReplace,"\\$1")}function _fnDeleteIndex(a,iTarget){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i}else{if(a[i]>iTarget){a[i]--}}}if(iTargetIndex!=-1){a.splice(iTargetIndex,1)}}function _fnReOrderIndex(oSettings,sColumns){var aColumns=sColumns.split(",");var aiReturn=[];for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){for(var j=0;j<iLen;j++){if(oSettings.aoColumns[i].sName==aColumns[j]){aiReturn.push(j);break}}}return aiReturn}function _fnColumnOrdering(oSettings){var sNames="";for(var i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){sNames+=oSettings.aoColumns[i].sName+","}if(sNames.length==iLen){return""}return sNames.slice(0,-1)}function _fnLog(oSettings,iLevel,sMesg){var sAlert=oSettings.sTableId===""?"DataTables warning: "+sMesg:"DataTables warning (table id = '"+oSettings.sTableId+"'): "+sMesg;if(iLevel===0){if(_oExt.sErrMode=="alert"){alert(sAlert)}else{throw sAlert}return}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){console.log(sAlert)}}}function _fnClearTable(oSettings){oSettings.aoData.splice(0,oSettings.aoData.length);oSettings.aiDisplayMaster.splice(0,oSettings.aiDisplayMaster.length);oSettings.aiDisplay.splice(0,oSettings.aiDisplay.length);_fnCalculateEnd(oSettings)}function _fnSaveState(oSettings){if(!oSettings.oFeatures.bStateSave||typeof oSettings.bDestroying!="undefined"){return}var i,iLen,sTmp;var sValue="{";sValue+='"iCreate":'+new Date().getTime()+",";sValue+='"iStart":'+oSettings._iDisplayStart+",";sValue+='"iEnd":'+oSettings._iDisplayEnd+",";sValue+='"iLength":'+oSettings._iDisplayLength+",";sValue+='"sFilter":"'+encodeURIComponent(oSettings.oPreviousSearch.sSearch)+'",';sValue+='"sFilterEsc":'+!oSettings.oPreviousSearch.bRegex+",";sValue+='"aaSorting":[ ';for(i=0;i<oSettings.aaSorting.length;i++){sValue+="["+oSettings.aaSorting[i][0]+',"'+oSettings.aaSorting[i][1]+'"],'}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"aaSearchCols":[ ';for(i=0;i<oSettings.aoPreSearchCols.length;i++){sValue+='["'+encodeURIComponent(oSettings.aoPreSearchCols[i].sSearch)+'",'+!oSettings.aoPreSearchCols[i].bRegex+"],"}sValue=sValue.substring(0,sValue.length-1);sValue+="],";sValue+='"abVisCols":[ ';for(i=0;i<oSettings.aoColumns.length;i++){sValue+=oSettings.aoColumns[i].bVisible+","}sValue=sValue.substring(0,sValue.length-1);sValue+="]";for(i=0,iLen=oSettings.aoStateSave.length;i<iLen;i++){sTmp=oSettings.aoStateSave[i].fn(oSettings,sValue);if(sTmp!==""){sValue=sTmp}}sValue+="}";_fnCreateCookie(oSettings.sCookiePrefix+oSettings.sInstance,sValue,oSettings.iCookieDuration,oSettings.sCookiePrefix,oSettings.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave){return}var oData,i,iLen;var sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=(typeof $.parseJSON=="function")?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++){if(!oSettings.aoStateLoad[i].fn(oSettings,oData)){return}}oSettings.oLoadedState=$.extend(true,{},oData);oSettings._iDisplayStart=oData.iStart;oSettings.iInitDisplayStart=oData.iStart;oSettings._iDisplayEnd=oData.iEnd;oSettings._iDisplayLength=oData.iLength;oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter);oSettings.aaSorting=oData.aaSorting.slice();oSettings.saved_aaSorting=oData.aaSorting.slice();if(typeof oData.sFilterEsc!="undefined"){oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc}if(typeof oData.aaSearchCols!="undefined"){for(i=0;i<oData.aaSearchCols.length;i++){oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]}}}if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++){oInit.saved_aoColumns[i]={};oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date();date.setTime(date.getTime()+(iSecs*1000));var aParts=window.location.pathname.split("/");var sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase();var sFullCookie,oData;if(fnCallback!==null){oData=(typeof $.parseJSON=="function")?$.parseJSON(sValue):eval("("+sValue+")");sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")}else{sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/"}var sOldName="",iOldTime=9999999999999;var iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++){if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}if(typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime){sOldName=aSplitCookie[0];iOldTime=oData.iCreate}}}if(sOldName!==""){document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(sName){var aParts=window.location.pathname.split("/"),sNameEQ=sName+"_"+aParts[aParts.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",sCookieContents=document.cookie.split(";");for(var i=0;i<sCookieContents.length;i++){var c=sCookieContents[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(sNameEQ)===0){return decodeURIComponent(c.substring(sNameEQ.length,c.length))}}return null}function _fnGetUniqueThs(nThead){var nTrs=nThead.getElementsByTagName("tr");if(nTrs.length==1){return nTrs[0].getElementsByTagName("th")}var aLayout=[],aReturn=[];var ROWSPAN=2,COLSPAN=3,TDELEM=4;var i,j,k,iLen,jLen,iColumnShifted;var fnShiftCol=function(a,i,j){while(typeof a[i][j]!="undefined"){j++}return j};var fnAddRow=function(i){if(typeof aLayout[i]=="undefined"){aLayout[i]=[]}};for(i=0,iLen=nTrs.length;i<iLen;i++){fnAddRow(i);var iColumn=0;var nTds=[];for(j=0,jLen=nTrs[i].childNodes.length;j<jLen;j++){if(nTrs[i].childNodes[j].nodeName.toUpperCase()=="TD"||nTrs[i].childNodes[j].nodeName.toUpperCase()=="TH"){nTds.push(nTrs[i].childNodes[j])}}for(j=0,jLen=nTds.length;j<jLen;j++){var iColspan=nTds[j].getAttribute("colspan")*1;var iRowspan=nTds[j].getAttribute("rowspan")*1;if(!iColspan||iColspan===0||iColspan===1){iColumnShifted=fnShiftCol(aLayout,i,iColumn);aLayout[i][iColumnShifted]=(nTds[j].nodeName.toUpperCase()=="TD")?TDELEM:nTds[j];if(iRowspan||iRowspan===0||iRowspan===1){for(k=1;k<iRowspan;k++){fnAddRow(i+k);aLayout[i+k][iColumnShifted]=ROWSPAN}}iColumn++}else{iColumnShifted=fnShiftCol(aLayout,i,iColumn);for(k=0;k<iColspan;k++){aLayout[i][iColumnShifted+k]=COLSPAN}iColumn+=iColspan}}}for(i=0,iLen=aLayout.length;i<iLen;i++){for(j=0,jLen=aLayout[i].length;j<jLen;j++){if(typeof aLayout[i][j]=="object"){aReturn[j]=aLayout[i][j]}}}return aReturn}function _fnScrollBarWidth(){var inner=document.createElement("p");var style=inner.style;style.width="100%";style.height="200px";var outer=document.createElement("div");style=outer.style;style.position="absolute";style.top="0px";style.left="0px";style.visibility="hidden";style.width="200px";style.height="150px";style.overflow="hidden";outer.appendChild(inner);document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="scroll";var w2=inner.offsetWidth;if(w1==w2){w2=outer.clientWidth}document.body.removeChild(outer);return(w1-w2)}function _fnApplyToChildren(fn,an1,an2){for(var i=0,iLen=an1.length;i<iLen;i++){for(var j=0,jLen=an1[i].childNodes.length;j<jLen;j++){if(an1[i].childNodes[j].nodeType==1){if(typeof an2!="undefined"){fn(an1[i].childNodes[j],an2[i].childNodes[j])}else{fn(an1[i].childNodes[j])}}}}}function _fnMap(oRet,oSrc,sName,sMappedName){if(typeof sMappedName=="undefined"){sMappedName=sName}if(typeof oSrc[sName]!="undefined"){oRet[sMappedName]=oSrc[sName]}}this.oApi._fnExternApiFunc=_fnExternApiFunc;this.oApi._fnInitalise=_fnInitalise;this.oApi._fnLanguageProcess=_fnLanguageProcess;this.oApi._fnAddColumn=_fnAddColumn;this.oApi._fnColumnOptions=_fnColumnOptions;this.oApi._fnAddData=_fnAddData;this.oApi._fnGatherData=_fnGatherData;this.oApi._fnDrawHead=_fnDrawHead;this.oApi._fnDraw=_fnDraw;this.oApi._fnReDraw=_fnReDraw;this.oApi._fnAjaxUpdate=_fnAjaxUpdate;this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw;this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml;this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable;this.oApi._fnScrollDraw=_fnScrollDraw;this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing;this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter;this.oApi._fnFilterComplete=_fnFilterComplete;this.oApi._fnFilterCustom=_fnFilterCustom;this.oApi._fnFilterColumn=_fnFilterColumn;this.oApi._fnFilter=_fnFilter;this.oApi._fnBuildSearchArray=_fnBuildSearchArray;this.oApi._fnBuildSearchRow=_fnBuildSearchRow;this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch;this.oApi._fnDataToSearch=_fnDataToSearch;this.oApi._fnSort=_fnSort;this.oApi._fnSortAttachListener=_fnSortAttachListener;this.oApi._fnSortingClasses=_fnSortingClasses;this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate;this.oApi._fnPageChange=_fnPageChange;this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo;this.oApi._fnUpdateInfo=_fnUpdateInfo;this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength;this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing;this.oApi._fnProcessingDisplay=_fnProcessingDisplay;this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex;this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible;this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex;this.oApi._fnVisbleColumns=_fnVisbleColumns;this.oApi._fnCalculateEnd=_fnCalculateEnd;this.oApi._fnConvertToWidth=_fnConvertToWidth;this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths;this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust;this.oApi._fnGetWidestNode=_fnGetWidestNode;this.oApi._fnGetMaxLenString=_fnGetMaxLenString;this.oApi._fnStringToCss=_fnStringToCss;this.oApi._fnArrayCmp=_fnArrayCmp;this.oApi._fnDetectType=_fnDetectType;this.oApi._fnSettingsFromNode=_fnSettingsFromNode;this.oApi._fnGetDataMaster=_fnGetDataMaster;this.oApi._fnGetTrNodes=_fnGetTrNodes;this.oApi._fnGetTdNodes=_fnGetTdNodes;this.oApi._fnEscapeRegex=_fnEscapeRegex;this.oApi._fnDeleteIndex=_fnDeleteIndex;this.oApi._fnReOrderIndex=_fnReOrderIndex;this.oApi._fnColumnOrdering=_fnColumnOrdering;this.oApi._fnLog=_fnLog;this.oApi._fnClearTable=_fnClearTable;this.oApi._fnSaveState=_fnSaveState;this.oApi._fnLoadState=_fnLoadState;this.oApi._fnCreateCookie=_fnCreateCookie;this.oApi._fnReadCookie=_fnReadCookie;this.oApi._fnGetUniqueThs=_fnGetUniqueThs;this.oApi._fnScrollBarWidth=_fnScrollBarWidth;this.oApi._fnApplyToChildren=_fnApplyToChildren;this.oApi._fnMap=_fnMap;var _that=this;return this.each(function(){var i=0,iLen,j,jLen,k,kLen;for(i=0,iLen=_aoSettings.length;i<iLen;i++){if(_aoSettings[i].nTable==this){if(typeof oInit=="undefined"||(typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===true)){return _aoSettings[i].oInstance}else{if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===true){_aoSettings[i].oInstance.fnDestroy();break}else{_fnLog(_aoSettings[i],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}}}if(_aoSettings[i].sTableId!==""&&_aoSettings[i].sTableId==this.getAttribute("id")){_aoSettings.splice(i,1);break}}var oSettings=new classSettings();_aoSettings.push(oSettings);var bInitHandedOff=false;var bUsePassedData=false;var sId=this.getAttribute("id");if(sId!==null){oSettings.sTableId=sId;oSettings.sInstance=sId}else{oSettings.sInstance=_oExt._oExternConfig.iNextUnique++}if(this.nodeName.toLowerCase()!="table"){_fnLog(oSettings,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}oSettings.oInstance=_that;oSettings.nTable=this;oSettings.oApi=_that.oApi;oSettings.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){oSettings.oInit=oInit;_fnMap(oSettings.oFeatures,oInit,"bPaginate");_fnMap(oSettings.oFeatures,oInit,"bLengthChange");_fnMap(oSettings.oFeatures,oInit,"bFilter");_fnMap(oSettings.oFeatures,oInit,"bSort");_fnMap(oSettings.oFeatures,oInit,"bInfo");_fnMap(oSettings.oFeatures,oInit,"bProcessing");_fnMap(oSettings.oFeatures,oInit,"bAutoWidth");_fnMap(oSettings.oFeatures,oInit,"bSortClasses");_fnMap(oSettings.oFeatures,oInit,"bServerSide");_fnMap(oSettings.oScroll,oInit,"sScrollX","sX");_fnMap(oSettings.oScroll,oInit,"sScrollXInner","sXInner");_fnMap(oSettings.oScroll,oInit,"sScrollY","sY");_fnMap(oSettings.oScroll,oInit,"bScrollCollapse","bCollapse");_fnMap(oSettings.oScroll,oInit,"bScrollInfinite","bInfinite");_fnMap(oSettings.oScroll,oInit,"iScrollLoadGap","iLoadGap");_fnMap(oSettings,oInit,"asStripClasses");_fnMap(oSettings,oInit,"fnRowCallback");_fnMap(oSettings,oInit,"fnHeaderCallback");_fnMap(oSettings,oInit,"fnFooterCallback");_fnMap(oSettings,oInit,"fnCookieCallback");_fnMap(oSettings,oInit,"fnInitComplete");_fnMap(oSettings,oInit,"fnServerData");_fnMap(oSettings,oInit,"fnFormatNumber");_fnMap(oSettings,oInit,"aaSorting");_fnMap(oSettings,oInit,"aaSortingFixed");_fnMap(oSettings,oInit,"aLengthMenu");_fnMap(oSettings,oInit,"sPaginationType");_fnMap(oSettings,oInit,"sAjaxSource");_fnMap(oSettings,oInit,"iCookieDuration");_fnMap(oSettings,oInit,"sCookiePrefix");_fnMap(oSettings,oInit,"sDom");_fnMap(oSettings,oInit,"oSearch","oPreviousSearch");_fnMap(oSettings,oInit,"aoSearchCols","aoPreSearchCols");_fnMap(oSettings,oInit,"iDisplayLength","_iDisplayLength");_fnMap(oSettings,oInit,"bJQueryUI","bJUI");_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");if(typeof oInit.fnDrawCallback=="function"){oSettings.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"})}if(typeof oInit.fnStateSaveCallback=="function"){oSettings.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"})}if(typeof oInit.fnStateLoadCallback=="function"){oSettings.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"})}if(oSettings.oFeatures.bServerSide&&oSettings.oFeatures.bSort&&oSettings.oFeatures.bSortClasses){oSettings.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"})}if(typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI){oSettings.oClasses=_oExt.oJUIClasses;if(typeof oInit.sDom=="undefined"){oSettings.sDom='<"H"lfr>t<"F"ip>'}}if(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!==""){oSettings.oScroll.iBarWidth=_fnScrollBarWidth()}if(typeof oInit.iDisplayStart!="undefined"&&typeof oSettings.iInitDisplayStart=="undefined"){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}if(typeof oInit.bStateSave!="undefined"){oSettings.oFeatures.bStateSave=oInit.bStateSave;_fnLoadState(oSettings,oInit);oSettings.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})}if(typeof oInit.aaData!="undefined"){bUsePassedData=true}if(typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"){oInit.aoColumns=oInit.aoData}if(typeof oInit.oLanguage!="undefined"){if(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""){oSettings.oLanguage.sUrl=oInit.oLanguage.sUrl;$.getJSON(oSettings.oLanguage.sUrl,null,function(json){_fnLanguageProcess(oSettings,json,true)});bInitHandedOff=true}else{_fnLanguageProcess(oSettings,oInit.oLanguage,false)}}}else{oInit={}}if(typeof oInit.asStripClasses=="undefined"){oSettings.asStripClasses.push(oSettings.oClasses.sStripOdd);oSettings.asStripClasses.push(oSettings.oClasses.sStripEven)}var bStripeRemove=false;var anRows=$("tbody>tr",this);for(i=0,iLen=oSettings.asStripClasses.length;i<iLen;i++){if(anRows.filter(":lt(2)").hasClass(oSettings.asStripClasses[i])){bStripeRemove=true;break}}if(bStripeRemove){oSettings.asDestoryStrips=["",""];if($(anRows[0]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[0]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[0]+=oSettings.oClasses.sStripEven}if($(anRows[1]).hasClass(oSettings.oClasses.sStripOdd)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripOdd+" "}if($(anRows[1]).hasClass(oSettings.oClasses.sStripEven)){oSettings.asDestoryStrips[1]+=oSettings.oClasses.sStripEven}anRows.removeClass(oSettings.asStripClasses.join(" "))}var nThead=this.getElementsByTagName("thead");var anThs=nThead.length===0?[]:_fnGetUniqueThs(nThead[0]);var aoColumnsInit;if(typeof oInit.aoColumns=="undefined"){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null)}}else{aoColumnsInit=oInit.aoColumns}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){if(typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==iLen){if(aoColumnsInit[i]===null){aoColumnsInit[i]={}}aoColumnsInit[i].bVisible=oInit.saved_aoColumns[i].bVisible}_fnAddColumn(oSettings,anThs?anThs[i]:null)}if(typeof oInit.aoColumnDefs!="undefined"){for(i=oInit.aoColumnDefs.length-1;i>=0;i--){var aTargets=oInit.aoColumnDefs[i].aTargets;if(!$.isArray(aTargets)){_fnLog(oSettings,1,"aTargets must be an array of targets, not a "+(typeof aTargets))}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]=="number"&&aTargets[j]>=0){while(oSettings.aoColumns.length<=aTargets[j]){_fnAddColumn(oSettings)}_fnColumnOptions(oSettings,aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="number"&&aTargets[j]<0){_fnColumnOptions(oSettings,oSettings.aoColumns.length+aTargets[j],oInit.aoColumnDefs[i])}else{if(typeof aTargets[j]=="string"){for(k=0,kLen=oSettings.aoColumns.length;k<kLen;k++){if(aTargets[j]=="_all"||oSettings.aoColumns[k].nTh.className.indexOf(aTargets[j])!=-1){_fnColumnOptions(oSettings,k,oInit.aoColumnDefs[i])}}}}}}}}if(typeof aoColumnsInit!="undefined"){for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnColumnOptions(oSettings,i,aoColumnsInit[i])}}for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++){if(oSettings.aaSorting[i][0]>=oSettings.aoColumns.length){oSettings.aaSorting[i][0]=0}var oColumn=oSettings.aoColumns[oSettings.aaSorting[i][0]];if(typeof oSettings.aaSorting[i][2]=="undefined"){oSettings.aaSorting[i][2]=0}if(typeof oInit.aaSorting=="undefined"&&typeof oSettings.saved_aaSorting=="undefined"){oSettings.aaSorting[i][1]=oColumn.asSorting[0]}for(j=0,jLen=oColumn.asSorting.length;j<jLen;j++){if(oSettings.aaSorting[i][1]==oColumn.asSorting[j]){oSettings.aaSorting[i][2]=j;break}}}_fnSortingClasses(oSettings);if(this.getElementsByTagName("thead").length===0){this.appendChild(document.createElement("thead"))}if(this.getElementsByTagName("tbody").length===0){this.appendChild(document.createElement("tbody"))}oSettings.nTHead=this.getElementsByTagName("thead")[0];oSettings.nTBody=this.getElementsByTagName("tbody")[0];if(this.getElementsByTagName("tfoot").length>0){oSettings.nTFoot=this.getElementsByTagName("tfoot")[0]}if(bUsePassedData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i])}}else{_fnGatherData(oSettings)}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitalise(oSettings)}})}})(jQuery,window,document);(function(j){var d=16;var v=5;var n;var q;j.fn.PercDataTable=function(z){if(z.percVisibleColumns&&z.aoColumns){var G=[];j.each(z.percVisibleColumns,function(K,L){G.push(z.aoColumns[L])});z.aoColumns=G}for(var E=0;E<z.aoColumns.length;E++){var y=z.aoColumns[E];y.sSortDataType="perc-type-"+y.sType}z=j.extend(true,{},h,z);q=z;n=f(z);j(this).append(n);n.dataTable(z).data("config",z);if(z.percExpandParentFrameVertically){var H=n.parents(".dataTables_wrapper").outerHeight()+d;var x=n.parents(".dataTables_wrapper").outerWidth()+d;var I=e();var C=H;var F=z.additionalIframeHeight?z.additionalIframeHeight:0;if(z.iDisplayLength){var B=n.find("thead").height();var w=j(n.find("tbody tr")[0]).height();var D=j(".dataTables_paginate").height();var J=B+w*z.iDisplayLength+D+F;C=J}if(z.percStayBelow){var A=j(z.percStayBelow);C+=A.offset().top+A.outerHeight()+d}j(I).height(C+v)}return n};function t(){var x=j(this);var w=x.data("config");if(w&&w.percTableRedrawCallback){if(typeof(w.percTableRedrawCallback)==="object"){j.each(w.percTableRedrawCallback,function(y,z){this(x)})}else{if(typeof(w.percTableRedrawCallback)==="function"){w.percTableRedrawCallback(x)}}}setTimeout(function(){var z=x.parent().children(".dataTables_paginate.paging_full_numbers");z.find(".perc-datatable-paginator-pages-label").removeClass("paginate_button");var y=z.find("span span.paginate_button, span span.paginate_active");j.each(y,function(A,B){j(B).attr("perc-page",A+1)});if(!y||y.length<2){z.hide()}else{z.show()}z.css("position","absolute")},1)}function e(){var x=parent.document.getElementsByTagName("IFRAME");for(var w=0;w<x.length;w++){if(x[w].contentWindow==window){return x[w]}}}function p(F,z,y,I,E){if(q.bPaginate){var C=q;var A=C.iDisplayLength;var D=E.length;var B=Math.ceil(D/A);var x=Math.ceil(I/A);var w=x+" of "+B+(B==1?" Page":" Pages");if(B==0){w=""}var H=j(".perc-datatables-info");if(H.length>0){H.html(w)}else{j("<div class='datatables_info perc-datatables-info'>"+w+"</div>").appendTo("body")}var G=j(".perc-footer-bar");if(G.length==0){j("<div class='perc-footer-bar'>&nbsp;</div>").appendTo("body")}}}var h={percExpandParentFrameVertically:true,additionalIframeHeight:0,percColumnWidths:["*","123"],percRowDblclickCallback:j.PercOpenPage,showPreviewBtnOnHover:false,iDisplayLength:5,bFilter:false,bAutoWidth:false,bPaginate:true,bSort:true,sPaginationType:"full_numbers",bLengthChange:false,bInfo:true,fnDrawCallback:t,fnFooterCallback:p,oLanguage:{sZeroRecords:"No Pages Found",oPaginate:{sFirst:"&lt;&lt;",sPrevious:"&lt;",sNext:"&gt;",sLast:"&gt;&gt;"},sInfo:" ",sInfoEmpty:" "}};function f(x){var y=x.percData;var w=x.percHeaders;var C=j("<table class='perc-datatable' style='table-layout : fixed' cellpadding='0' cellspacing='0'>");var z=j("<tbody>");var B=x.aoColumns;j.each(y,function(K,F){var J=F;var H="";if(K==0){H="perc-first"}else{if(K==y.length-1){H="perc-last"}}var G=j("<tr class='perc-datatable-row perc-index-"+K+" "+H+"'>");if(J.rowData){G.data("percRowData",J.rowData)}if(x.percRowClickCallback){if(J.rowData){G.click(J.rowData,x.percRowClickCallback)}else{G.click(x.percRowClickCallback)}}if(x.showPreviewBtnOnHover){G.mouseover(function(){j(this).css("background-color","#CAF589");j(this).find(".perc-preview-col").show()}).mouseout(function(){j(this).css("background-color","white");j(this).find(".perc-preview-col").hide()})}if(x.percRowDblclickCallback){if(J.rowData){G.dblclick(J.rowData,x.percRowDblclickCallback)}else{G.dblclick(x.percRowDblclickCallback)}}var I=0;j.each(J.rowContent,function(W,S){if(x.percVisibleColumns){if(j.inArray(W,x.percVisibleColumns)==-1){return true}}var O=B[I++];var L=O.sType;var N="perc-type-"+L;var Q=S;var U="";if(W==0){U="perc-first"}else{if(W==J.rowContent.length-1){U="perc-last"}else{U="perc-middle"}}var M="";if(x.percHeaderClasses&&x.percHeaderClasses[W]){M="perc-"+x.percHeaderClasses[W].replace(/ /g,"-").toLowerCase()}else{M="perc-"+x.percHeaders[W].replace(/ /g,"-").toLowerCase()}var P=j("<td class='"+N+" "+M+" perc-datatable-column perc-ellipsis perc-index-"+W+" perc-cell-"+W+"-"+K+" "+U+"' valign='top'>");if(typeof Q=="object"){var T="";var V="";var R;if(j.isArray(Q)){j.each(Q,function(Z,X){if(!X){X="&nbsp;"}var Y=X;var aa="";if(Z==0){aa="perc-first"}else{if(Z==Q.length-1){aa="perc-last"}else{aa="perc-middle"}}if(typeof Y=="string"){T=Y}else{Y=j.extend({content:"",title:""},Y);T=Y.content;V=Y.title}if(V=="&nbsp;"){V=""}R=j("<div style='width:100%' class='perc-datatable-columnrow perc-ellipsis perc-index-"+Z+" "+aa+"'>");if(Y.callback){var ab=j("<span>").attr("title",V).append(T);ab.css("cursor","pointer").addClass("perc-callback");R.append(ab);if(J.rowData){ab.click(J.rowData,Y.callback)}else{ab.click(Y.callback)}}else{R.attr("title",V).append(T)}P.append(R)})}else{var V=S.title;var T=S.content;var R=j("<div title='"+V+"' class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(T);P.append(R)}}else{var R=j("<div class='perc-datatable-columnrow perc-ellipsis perc-index-0 perc-first'>").append(S);P.append(R)}G.append(P)});z.append(G)});C.append(z);if(w){var A=j("<thead>");var E=j("<tr class='perc-datatable-head-row'>");var D=0;j.each(w,function(N,L){if(x.percVisibleColumns){if(j.inArray(N,x.percVisibleColumns)==-1){return true}}var J=B[D++];var F=J.sType;var I="perc-type-"+F;var H="";if(x.percColumnWidths){if(N<x.percColumnWidths.length-1){H=x.percColumnWidths[N];if(H=="*"){H=""}}else{H=x.percColumnWidths[x.percColumnWidths.length-1]}}if(j.browser.msie||j.browser.webkit){H=parseInt(H)+20}H+="px";var G="";if(x.percHeaderClasses&&x.percHeaderClasses[N]){G="perc-"+x.percHeaderClasses[N].replace(/ /g,"-").toLowerCase()}else{G="perc-"+x.percHeaders[N].replace(/ /g,"-").toLowerCase()}var O="";if(N==0){O="perc-first"}else{if(N==w.length-1){O="perc-last"}else{O="perc-middle"}}var P=j("<th class='"+I+" "+G+" perc-datatable-head-column perc-index-"+N+" "+O+"'>").css("width",H);var M=j("<span class='perc-sort' style='padding: 0px 10px 0px 0px; border-bottom:none'>&nbsp;</span>");if(typeof(x.sortFunction)!="undefined"&&!x.bSort){var Q=x.percColNames[N];var K={};K.colName=Q;K.sortFunction=x.sortFunction;P.click(K,k);if(j.browser.mozilla){P.css("MozUserSelect","none")}else{if(j.browser.msie){P.bind("selectstart",function(){return false})}}if(Q==x.sortColumn){P.addClass("sorting_"+x.sortOrder)}}P.append(L);P.append(M);E.append(P)});A.append(E);C.append(A)}if(x.bSort){b()}return C}function k(z){var y=j(this);var x=z.data.colName;var A=z.data.sortFunction;y.siblings().removeClass("sorting_asc").removeClass("sorting_desc");var w="asc";if(y.is(".sorting_asc")){y.removeClass("sorting_asc").addClass("sorting_desc");w="desc"}else{if(y.is(".sorting_desc")){y.removeClass("sorting_desc").addClass("sorting_asc")}else{y.addClass("sorting_asc")}}A(x,w)}function b(){j.fn.dataTableExt.afnSortData["perc-type-string"]=function(z,x){var w=[];var y;j("td:eq("+x+")",z.oApi._fnGetTrNodes(z)).each(function(){y=j(this).text();w.push(y)});return w};j.fn.dataTableExt.afnSortData["perc-type-numeric"]=j.fn.dataTableExt.afnSortData["perc-type-string"];j.fn.dataTableExt.afnSortData["perc-type-date"]=function(y,x){var w=[];j("td:eq("+x+")",y.oApi._fnGetTrNodes(y)).each(function(){var C=Array("","");var A=j(this).find("div");C[0]=j(A[0]).text();C[1]=j(A[1]).text();var B=C.join(" ");var z=new Date(B);w.push(z)});return w}}})(jQuery);(function(k){var h;var f;var e;var b=null;var j;var d;k.fn.PercFixedTableHeader=function(n){k(".perc-fixedtableheader").remove();d=n;j=k(this);var q=j.css("z-index");if(q=="auto"){q="1000"}if(k.browser.msie||k.browser.chrome||k.browser.safari){var p="-3px"}else{var p="1px"}b=k(this).clone(true);b.find("tbody").remove();b.css("position","relative").css("margin-bottom","-30px").css("top",p).css("left","1px").css("z-index",q+1).css("background","white").attr("cellpadding","0").addClass("perc-fixedtableheader");d.container.prepend(b);remove=n.remove;if(remove){remove.bind("click",function(){b.remove()})}h=n.resizable;if(h){h.bind("resize",function(){t()})}k(window).resize(function(){t()});function t(){b.css("width",j.css("width"))}t()}})(jQuery);(function(h){var e={};var b=function(){};h.fn.PercFinderListView=function(v,B){var H=h(this);var G;if(h.isFunction(v.folderDblClickCallback)){b=v.folderDblClickCallback}if(B.PagedItemList!=undefined){G=h.perc_utils.convertCXFArray(B.PagedItemList["childrenInPage"]);H.data("totalResult",B.PagedItemList["childrenCount"]);H.data("startIndex",B.PagedItemList["startIndex"])}else{G=h.perc_utils.convertCXFArray(B.PathItem)}var A=p(v.displayFormat,G);var C=A.percData;var D=A.percTypes;if(C.length>0){var t=[];for(s=0;s<D.length;s++){t.push("&nbsp;")}C.push({rowContent:t})}var z=A.percHeaders;var w=A.percColNames;var x=A.percWidths;var y=x;var F={percRowClickCallback:n,percRowDblclickCallback:j,percColumnWidths:y,percData:C,percHeaders:z,aoColumns:D};F.oLanguage={sZeroRecords:"No Files Found"};F.bPaginate=false;F.bInfo=false;F.bSort=false;F.oLanguage.sZeroRecords="No Items Found";F.sortFunction=v.sortFunction;F.sortColumn=v.sortColumn;F.sortOrder=v.sortOrder;F.percColNames=w;H.empty();H.PercDataTable(F);var E=h(H.find("table"));var q=h(E.parents(".mcol-direc"));E.PercFixedTableHeader({resizable:h(".perc-finder-body.ui-resizable"),remove:h("#perc-finder-choose-columnview"),container:q});if(typeof(v.callback)!="undefined"){v.callback(H)}f(E);h(".perc-datatable-row:last").unbind()};function f(t){var q=t.find(".perc-datatable-row");h.map(q,function(w,v){if(h(w).data("percRowData")!=undefined&&h(w).data("percRowData").category=="ASSET"){h(w).css("cursor","default");h(w).draggable({helper:function(){return h("<div />").html(h(this).find(".perc-datatable-columnrow").html()).addClass("dataTables_wrapper").css("color","white")},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:h.perc_finder().onDragStart,stop:h.perc_finder().onDragStop,delay:h.perc_finder().dragDelay})}});h(t).droppable({tolerance:"pointer",accept:false,over:function(){},out:function(){},drop:function(){}})}function n(t){h(".perc-datatable-row").removeClass("perc-datatable-row-highlighted");h(this).addClass("perc-datatable-row-highlighted");var q=h.merge([""],k(t));h("#mcol-path-summary").val(q.join("/"));if(typeof(t.data.id)!="undefined"){h.perc_finder().setCurrentItem(t.data)}h.perc_finder().flagChangeView=false;h.perc_finder().executePathChangedListeners(q);h.perc_finder().flagChangeView=true}function k(t){if(!t.data){return""}var q=t.data.folderPaths;if(t.data.type=="site"){q=t.data.folderPaths}else{q=t.data.folderPaths+"/"+t.data.name}return q.replace("Folders/$System$/","").substring(2,q.length).split("/")}function j(q){if(q.data.type=="Folder"||q.data.type=="FSFolder"){b("/"+k(q).join("/"))}else{h.PercNavigationManager.openPathItem("/"+k(q).join("/"))}}function p(S,A){var x=[];var L=[];var J=[];var I=[];var M=[];var t=S.SimpleDisplayFormat.columns;var Q,C;for(C=0;C<A.length;C++){var B=h.perc_utils.convertCXFArray(A[C].columnData.column);var F=d(B,"@name","$");var O=[];var P=h.perc_utils.choose_icon(A[C].type,A[C].icon,k({data:A[C]}));var K='<img style="float:left;" src="'+P+'" />';for(Q=0;Q<t.length;Q++){var v=t[Q];var D=v.name;var E=v.label;var T=F[D];if(v.type.toLowerCase()=="date"&&T!=null&&T!=""){var N=h.perc_utils.splitDateTime(T);var G=N.date+", "+N.time;T="<div title='"+G+"'>"+N.date+"</div>"}if(v.type.toLowerCase()=="number"&&T!=null&&T!=""){T='<div title = "'+T+' Bytes" style="text-align:right;">'+h.perc_utils.formatFileSize(T)+"</div>"}if(v.type.toLowerCase()=="text"&&T!=null&&T!=""&&Q!=0){T='<span title = "'+T+'" style="font-weight: normal;">'+T+"</span>"}if(T==null||T==""){T="&nbsp;"}if(Q==0&&K!=""){var z="",H,q=A[C];if(h.isArray(q.folderPaths)){H=q.folderPaths[0]}else{H=q.folderPaths}if(A[C].type=="site"){z=H.replace("/"+h.perc_paths.SITES_ROOT,"")}else{z=H.replace("/"+h.perc_paths.SITES_ROOT,"").replace("/"+h.perc_paths.DESIGN_ROOT,"").replace("//Folders/$System$"+h.perc_paths.ASSETS_ROOT,"")+"/"+A[C].name}T=K+'<span title = "'+z+'" style="padding-left:4px;">'+T+"</span>"}O.push(T)}var y={rowContent:O,rowData:A[C]};x.push(y)}for(Q=0;Q<t.length;Q++){var v=t[Q];J.push(v.name);I.push(v.label);M.push((v.width==-1?"*":(h.browser.msie?v.width-20:v.width)));var w=v.type.toLowerCase();if(w=="text"){w="string"}if(Q==0){w="html"}L.push({sType:w})}var R={percData:x,percColNames:J,percHeaders:I,percTypes:L,percWidths:M};return R}function d(t,v,w){var A;var z={};for(A=0;A<t.length;A++){var y=t[A];var q=y[v];var x=y[w];z[q]=x}return z}})(jQuery);(function(d){d.fn.PercScrollingTemplateBrowser=function(e){var p=d("<div class='perc-scrollable'>");var n=d("<div class='perc-items'>");p.append(n);var f=d("<a style = 'margin:50px 0px' class='prevPage browse left' ></a>");var j=d("<a style = 'margin:50px 0px' class='nextPage browse right'></a>");var q=d("<div style='clear:both'>");d(this).append(f).append(p).append(j).append(q);if(e.width){p.width(e.width)}var h=null;if(e.widgetDefId){h=e.widgetDefId}var k=e.siteName;var v=e.hiddenFieldId?e.hiddenFieldId:"perc-select-template";var t=function(w,y){if(y.TemplateSummary.length==0){var x=d("<div class='perc-empty'>No Templates Found</div>").css("margin-top","70px");p.css("text-align","center").css("background","white").append(x)}else{d.each(y.TemplateSummary,function(z,A){n.append(b(this,e));n.find(".item .item-id").hide();n.find(".item").bind("click",function(){var B=d(this).find(".item-id").text();d("#"+e.hiddenFieldId).val(B);n.find(".item").removeClass("perc-selected-item");d(this).addClass("perc-selected-item")});$firstItem=n.find(".item:first");d("#"+e.hiddenFieldId).val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});p.scrollable({items:n,size:4,keyboard:true})}};if(!e.isBase){d.PercSiteService.getTemplates(k,t,h)}else{d.PercSiteService.getBaseTemplates(e.baseType,t)}return d(this)};function b(j,f){var e="<div for=\"@ITEM_ID@\" class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";var k=j.name;var h=j.id;if(f.isBase){k=k.replace("perc."+f.baseType+".","");h=j.name}return e.replace(/@IMG_SRC@/,j.imageThumbPath).replace(/@ITEM_ID@/g,h).replace(/@ITEM_LABEL@/,k).replace(/@ITEM_TT@/g,k)}})(jQuery);(function($,P){P.PercFinderView=function(){var percFinderListviewContainerInitialHeight;var percFinderListviewContainer;var PERC_FINDER_VIEW_COLUMN="column";var PERC_FINDER_VIEW_LIST="list";var PERC_FINDER_SEARCH_RESULTS="search";var PERC_FINDER_SEARCH_TYPE_MYPAGES="MyPages";var PERC_FINDER_RESULT="result";var MAX_RESULTS;var utils=$.perc_utils;var currentContentPath;var currentContentId;var finderButtons;var dirty=false;var finder=$.perc_finder();var contentId=null;var pageView=P.pageView();var dialogFlag=true;this.setView=setView;var chooseColumnView=$("#perc-finder-choose-columnview").click(setViewColumn);var chooseListView=$("#perc-finder-choose-listview").click(setViewList);var chooseSearchView=$("#perc-finder-search-submit").click(setViewSearch);var chooseMyPagesView=$("#perc-finder-choose-mypagesview").click(setMyPagesView);setColumnViewButtonOn();var dirtyController=$.PercDirtyController;var percFinderViewAPI={reload:function(){},getContentId:function(){return currentContentId},clear:function(){$("#frame").each(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},confirm_if_dirty:confirm_if_dirty,save:save};this.disableSearchBar=function disableSearchBar(disable){if(disable){$("#perc-finder-item-search").attr("disabled",true);$("#perc-finder-item-search").val("");chooseSearchView.unbind("click")}else{$("#perc-finder-item-search").removeAttr("disabled");chooseSearchView.click(setViewSearch)}};this.disableListViewButton=function disableListViewButton(disable){if(disable){chooseListView.unbind("click")}else{chooseListView.click(setViewList)}};var currentFinderView=PERC_FINDER_VIEW_COLUMN;this.getCurrentFinderView=function(){return currentFinderView};this.PERC_FINDER_VIEW_COLUMN=PERC_FINDER_VIEW_COLUMN;this.PERC_FINDER_VIEW_LIST=PERC_FINDER_VIEW_LIST;this.PERC_FINDER_SEARCH_RESULTS=PERC_FINDER_SEARCH_RESULTS;this.PERC_FINDER_RESULT=PERC_FINDER_RESULT;var pagingBar="";$("#perc-finder-item-search").focus(function(){$(this).css("color","#FFFFFF").css("background-color","#5a5d69")}).bind("keyup",function(evt){if(evt.keyCode==13){$("#perc-finder-item-search").blur();performSearch();$("#perc-finder-item-search").focus();evt.preventDefault();evt.stopPropagation()}if(evt.keyCode==27||evt.keyCode==9){$("#perc-finder-item-search").css("color","#CCCCCC").css("background-color","#41434F").blur();evt.preventDefault();evt.stopPropagation()}$(".perc-finder-message").fadeOut(function(){$(this).empty()})});function pagePrevious(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")-MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function pageNext(newStartIndex){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",percFinderListviewContainer.data("startIndex")+MAX_RESULTS);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function refreshView(){percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");$(".perc-fixedtableheader").remove();percFinderListviewContainer.empty();percFinderListviewContainer.css("text-align","left");percFinderListviewContainer.append($('<div class="perc-finder-panel-loading"><span class="icon-spinner icon-spin icon-2x"></span>&nbsp;Loading...</div>'));var column=percFinderListviewContainer.data("sortColumn");var order=percFinderListviewContainer.data("sortOrder");var startIndex=percFinderListviewContainer.data("startIndex");var callbackFunction=percFinderListviewContainer.data("callback");var config={startIndex:startIndex,maxResults:MAX_RESULTS,callback:callbackFunction,sortFunction:sortView,sortColumn:column,sortOrder:order};percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height();if(currentFinderView===PERC_FINDER_VIEW_LIST){config.path=percFinderListviewContainer.data("path");fillListView(config,function(){expandTableBorders(true)})}else{if(currentFinderView===PERC_FINDER_SEARCH_RESULTS||currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES){var searchQuery=$("#perc-finder-listview").data("searchQuery");var searchType=percFinderListviewContainer.data("searchType");config.searchCriteria={SearchCriteria:{query:searchQuery,searchType:searchType,startIndex:startIndex,maxResults:MAX_RESULTS,sortColumn:column,sortOrder:order}};fillResultView(config,function(){expandTableBorders(true)})}}}function expandTableBorders(expand){if(percFinderListviewContainer){var finder=$(".perc-finder");var lastRow=percFinderListviewContainer.find("tr:last");lastRowHeight=lastRow.height();var containerElement=$("#perc-finder-listview table:first");var containerHeight=containerElement.height();var fixedColumnHeight=$(".perc-view-column-fixed").height();var differenceValue=fixedColumnHeight-containerHeight;if(expand){if(lastRowHeight>0){lastRow.height(lastRowHeight+differenceValue)}}else{lastRow.height(20)}}}function fillPagingBar(dir){var startIndex=dir.data("startIndex");var totalResult=dir.data("totalResult");var endIndex=((startIndex-1+MAX_RESULTS>totalResult)?totalResult:(startIndex-1+MAX_RESULTS));var itemText="0 Items";if(totalResult!=0){itemText=startIndex+" - "+endIndex+" of "+totalResult+" Total"}pagingBar.find(".perc-pagingbar-items").text(itemText);if((totalResult-(startIndex-1+MAX_RESULTS))>0){pagingBar.find(".perc-pagingbar-next").removeClass("perc-disabled-navigator").unbind("click").click(pageNext)}else{pagingBar.find(".perc-pagingbar-next").addClass("perc-disabled-navigator").unbind("click")}if(startIndex>MAX_RESULTS){pagingBar.find(".perc-pagingbar-previous").removeClass("perc-disabled-navigator").unbind("click").click(pagePrevious)}else{pagingBar.find(".perc-pagingbar-previous").addClass("perc-disabled-navigator").unbind("click")}}function showPagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){var finderDiv=$(".perc-finder");pagingBar=$('<div class="perc-pagingbar-finder"/>').append($('<div class="perc-pagingbar-navigator" />').append($('<a class="perc-pagingbar-previous" />').attr("title","Previous")).append($('<a class="perc-pagingbar-next"/>').attr("title","Next"))).append($('<span class="perc-pagingbar-items" />'));fillPagingBar(dir);var newHeight=finderDiv.height();finderDiv.append(pagingBar);fixIframeHeight();fixHeight()}var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}finder.update_finder_height()}function updatePagingBar(dir){if(currentFinderView===PERC_FINDER_VIEW_LIST||currentFinderView==PERC_FINDER_SEARCH_RESULTS){fillPagingBar(dir)}}function addListViewContainer(){var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");$(allColumns[0]).siblings().hide();var newColumn=$.perc_finderInstance.insertAfter(lastColumn);newColumn.css("width","100%");var newColumnContent=newColumn.find(".mcol-direc-wrapper");newColumnContent.find(".ui-resizable-handle").remove();percFinderListviewContainer=$("<div id='perc-finder-listview'>");newColumnContent.css("width","100%");newColumnContent.append(percFinderListviewContainer);return percFinderListviewContainer}function fillListView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercPathService.getContentForPath(displayFormat.SimpleDisplayFormat,config,function(status,content){if(status){percFinderListviewContainer.PercFinderListView(config,content);var newPath=$.trim($("#mcol-path-summary").val());$.PercPathService.getPathItemForPath(newPath,function(status,content){if(content.PathItem.type=="Folder"||content.PathItem.type=="FSFolder"){$(".perc-finder-menu #perc-finder-delete").removeClass("ui-enabled").addClass("ui-disabled").unbind("click");if(callback){callback()}return}var index=newPath.lastIndexOf("/");newPath=newPath.substring(index+1);$("#perc-finder-listview td.perc-first").each(function(){var self=$(this);var selectedText=self.find("span").text();if(newPath==selectedText){self.parent().click();finder.scrollIntoView(self)}});if(callback){callback()}})}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}percFinderListviewContainer=$("#perc-finder-listview");percFinderListviewContainerInitialHeight=percFinderListviewContainer.height()})})}function fillResultView(config,callback){$.PercPathService.getDisplayFormat(function(status,displayFormat){config.displayFormat=displayFormat;config.searchCriteria.SearchCriteria.formatId=displayFormat.SimpleDisplayFormat.id;config.folderDblClickCallback=function(contentPath){_updateListViewContainerData(contentPath,1,updatePagingBar)};$.PercSearchService.getSearchResult(config.searchCriteria,function(status,result){if(status){$("#perc-finder-listview").PercFinderListView(config,result);if(callback){callback()}}else{var error=$("<span style='font-weight: normal; margin-top: 15px; display:block'/>").text(result);$("#perc-finder-listview").css("text-align","center").append(error);$(".perc-finder-panel-loading").remove()}})})}function performSearch(){if(currentFinderView===PERC_FINDER_SEARCH_RESULTS){var encodedSearchText=encodeURIComponent($.trim($("#perc-finder-item-search").val()));var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("searchQuery",encodedSearchText);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}else{setView(PERC_FINDER_SEARCH_RESULTS)}setSearchViewButtonsStates();$("#mcol-path-summary").val("")}function sortView(column,order){var percFinderListviewContainer=$(".perc-finder").find("#perc-finder-listview");percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn",column);percFinderListviewContainer.data("sortOrder",order);percFinderListviewContainer.data("callback",updatePagingBar);refreshView()}function setViewColumn(){setView(PERC_FINDER_VIEW_COLUMN)}function setViewList(){setView(PERC_FINDER_VIEW_LIST)}function setViewSearch(){performSearch()}function setMyPagesView(){setView(PERC_FINDER_SEARCH_TYPE_MYPAGES,true)}function set_view_options_button_state(view){$(".perc-finder-view-options a").removeClass("ui-active");switch(view){case PERC_FINDER_VIEW_COLUMN:chooseColumnView.addClass("ui-active");break;case PERC_FINDER_VIEW_LIST:case PERC_FINDER_SEARCH_RESULTS:chooseListView.addClass("ui-active");break;case PERC_FINDER_SEARCH_TYPE_MYPAGES:chooseMyPagesView.addClass("ui-active");break;default:chooseColumnView.addClass("ui-active")}}function setView(view,forceSet){var force=forceSet?true:false;MAX_RESULTS=$.perc_finderInstance.maxResults;set_view_options_button_state(view);if(view===currentFinderView&&!force){return}if((currentFinderView===PERC_FINDER_SEARCH_RESULTS&&view===PERC_FINDER_VIEW_LIST)||(currentFinderView===PERC_FINDER_SEARCH_TYPE_MYPAGES&&view===PERC_FINDER_VIEW_LIST)){return}currentFinderView=view;var finderTable=$(".perc-finder-table");var allColumns=finderTable.find("td.mcol-direc");var lastColumn=finderTable.find("td.mcol-direc:last");allColumns.find("#perc-finder-listview").parents("td").remove();var finderDiv=$(".perc-finder");if(pagingBar){pagingBar.remove();fixIframeHeight();fixHeight();pagingBar=null;var currentView=$.PercNavigationManager.getView();if(currentView==$.PercNavigationManager.VIEW_SITE_ARCH||currentView==$.PercNavigationManager.VIEW_USERS){fixIframeHeight();fixBottomHeight();fixHeight();if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}}}$(".perc-finder-body").attr("perc-view",view);if(view===PERC_FINDER_VIEW_COLUMN){allColumns.show();finder.open(finder.getCurrentPath());setColumnViewButtonOn()}else{if(view===PERC_FINDER_VIEW_LIST){percFinderListviewContainer=addListViewContainer();var contentPath=lastColumn.data("path");if(typeof(contentPath)=="undefined"){lastColumn=lastColumn.prev();contentPath=lastColumn.data("path").join("/")}else{contentPath=contentPath.join("/")}_updateListViewContainerData(contentPath,lastColumn.data("startIndex"),showPagingBar);setListViewButtonOn()}else{if(view===PERC_FINDER_SEARCH_RESULTS||view===PERC_FINDER_SEARCH_TYPE_MYPAGES){$(".perc-view-column-fixed a").removeClass("mcol-opened");$("#perc-finder-listing-Search").addClass("mcol-opened");var percFinderListviewContainer=addListViewContainer();var searchQuery=encodeURIComponent($.trim($("#perc-finder-item-search").val()));if(searchQuery==null){searchQuery==""}percFinderListviewContainer.data("searchQuery",searchQuery);percFinderListviewContainer.data("startIndex",1);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",showPagingBar);if(view===PERC_FINDER_SEARCH_TYPE_MYPAGES){percFinderListviewContainer.data("searchType",PERC_FINDER_SEARCH_TYPE_MYPAGES)}refreshView();setListViewButtonOn(view);setSearchViewButtonsStates();finder.setStateButtonsDesignNode(false);$("#mcol-path-summary").val(searchQuery)}}}}function _updateListViewContainerData(contentPath,startIndex,pagingBarCallback){percFinderListviewContainer.data("path",contentPath);percFinderListviewContainer.data("startIndex",startIndex);percFinderListviewContainer.data("sortColumn","sys_title");percFinderListviewContainer.data("sortOrder","asc");percFinderListviewContainer.data("callback",pagingBarCallback);refreshView()}function setListViewButtonOn(view){$("#perc-finder-choose-view #perc-finder-choose-columnview").removeClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").addClass("ui-enabled")}function setColumnViewButtonOn(){$("#perc-finder-choose-view #perc-finder-choose-columnview").addClass("ui-enabled");$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setViewButtonsOff(){$("#perc-finder-choose-view #perc-finder-choose-listview").removeClass("ui-enabled")}function setSearchViewButtonsStates(){$.percFinderButtons().disableAllButtonsButSite()}function confirm_if_dirty(callback,errorCallback,options){dirtyController.confirmIfDirty(callback,errorCallback,options)}function openAsset(assetId,isEditMode){$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,assetId).done(function(){$.perc_utils.info("Added asset with id "+assetId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)});var aName=$.PercNavigationManager.getName();var handler=isEditMode?$.PercAssetController.getAssetEditorForAssetId:$.PercAssetController.getAssetViewForAssetId;handler(assetId,function(status,assetEditorUrl){if(status==$.PercServiceUtils.STATUS_SUCCESS){$.PercIFrameView.renderAssetEditor(finder,null,assetEditorUrl,null,null,false);addTransitionButtons("percAsset");$("#perc-revisions-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){var isEditMode=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT;_openRevisions(assetId,aName,isEditMode)});$("#perc-pubhistory-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){_openPublishingHistory(assetId,aName)});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(assetId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{assetId:assetId,aName:aName,trName:"Publish"},{assetId:assetId,aName:aName},{assetId:assetId,aName:aName,trName:"Take Down"},{assetId:assetId,aName:aName,trName:"Stage"},{assetId:assetId,aName:aName,trName:"Remove from Staging"},assetId],percDropdownDisabledFlag:disableAction})}}})}}else{var dlgTitle="Error";var dlgContent=assetEditorUrl;if(assetEditorUrl.indexOf("must be checked out by the current user")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Overridden",[contentName])}else{if(assetEditorUrl.indexOf("Item not found")!=-1){dlgTitle=I18N.message("perc.ui.webmgt.contentbrowser.warning.title@Open Asset");dlgContent=I18N.message("perc.ui.webmgt.contentbrowser.warning@Asset Deleted",[contentName])}}$.perc_utils.alert_dialog({title:dlgTitle,content:dlgContent,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}})}function _openRevisions(assetId,assetName,isEditMode){var mode=isEditMode?$.PercRevisionDialog.ITEM_MODE_VIEW:$.PercRevisionDialog.ITEM_MODE_EDIT;$.PercRevisionDialog.open(assetId,assetName,$.PercRevisionDialog.ITEM_TYPE_ASSET,mode)}function _openPublishingHistory(assetId,assetName){$.PercPublishingHistoryDialog.open(assetId,assetName,$.PercPublishingHistoryDialog.ITEM_TYPE_ASSET)}function checkOutCheckInPage(newId,notificationId,notifyComplete,pathType){if(newId!=null){var type="percPage";if(pathType==$.PercNavigationManager.PATH_TYPE_ASSET){type="percAsset"}$.PercWorkflowController().checkOut(type,newId,function(status){if(status){if(contentId&&(newId!=contentId)){$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}else{notifyComplete(notificationId,true)}}else{notifyComplete(notificationId,false)}})}else{$.PercWorkflowController().checkIn(contentId,function(status){notifyComplete(notificationId,true)})}}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}function save(type,callback){if(type=="asset"){var newAsset=true;if($.PercNavigationManager.getId()){newAsset=false}$.PercIFrameView.saveContent(newAsset);callback()}else{if(type=="page"||type=="template"){if(layoutModel!=undefined&&layoutModel!=null){$.PercBlockUI();layoutModel.save(function(){$.unblockUI();callback()})}}}}function addTransitionButtons(itemType){function addSaveAndCloseButtons(){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&view==$.PercNavigationManager.VIEW_EDIT_ASSET){var saveButton='<a style="float: right;" name="perc_wizard_save" title="Save" class="perc-save" id="perc-save-content">  </a>';$("#perc-content-menu").append($(saveButton));$("#perc-save-content").click(function(){var newAsset=!contentId||contentId==null;if(!newAsset){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){$.PercIFrameView.saveContent(newAsset)},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:I18N.message("perc.ui.common.label@Save"),content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",["asset"]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})}else{$.PercIFrameView.saveContent(newAsset)}})}if($.PercNavigationManager.getMode()!=$.PercNavigationManager.MODE_EDIT){var editButton='<a style="float: right;" name="perc_page_edit" title="Edit" class="perc-edit-button" id="perc-page-edit">  </a>';$("#perc-content-menu").append($(editButton));currentContentPath=$.PercNavigationManager.getPath();$.PercPathService.getPathItemForPath(currentContentPath,function(message,item){var currentItem=item.PathItem;$("#perc-page-edit").data("currentItem",currentItem).click(function(){var item=$(this).data("currentItem");if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.PercNavigationManager.handleOpenPage(item,true)}else{if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDIT_ASSET){$.PercNavigationManager.handleOpenAsset(item,true)}else{var eMsg="Cannot open unknown view.";$.perc_utils.alert_dialog({title:"Error",content:eMsg})}}})})}var closeButton="<a style='float: right;' class='perc-close' title='Close' id='perc-page-close'></a>";$("#perc-content-menu").append($(closeButton));$("#perc-page-close").click(function(){if(contentId){doIfItemExists(contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){confirm_if_dirty(function(){$.PercBlockUI($.PercBlockUIMode.CURSORONLY);if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkIn(contentId,function(status){contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()})}else{contentId=null;$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})},function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}})}function addCommentsIcon(){$.PercRevisionService.getLastComment(contentId,function(status,result){if(status==$.PercServiceUtils.STATUS_SUCCESS){if(result.data&&result.data.length>0){var commentIcon=$("<a style='float: right;' tooltip='"+result.data+"' class='perc-last-comment-menubar'><span class='perc-font-icon icon-comment'/></a>");commentIcon.tooltip({delay:500,left:-150,top:25,bodyHandler:function(){return"<p style='padding:5px 20px 5px 20px;'>"+result.data+"</p>"}});$("#tooltip").css("margin-right","20px");$("#perc-content-menu").append(commentIcon)}else{$.perc_utils.info("No comment for this page in its last transaction.")}}else{$.perc_utils.info("Failed to get the last comment information from server for page id: "+contentId+". See server log for more details.")}})}if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT&&contentId){$.PercWorkflowController().getTransitions(contentId,function(status,results){if(status){var dropdownLabels=[];var dropdownParams=[];var dropdownActions=[];var dropdownButtonImage="";var dropdownButtonImageOver="";results.unshift(results[0]);$.each(results,function(index){var trName=results[index].name;var trClass=results[index].cssClass;var trAlt=results[index].alt;trClass+=" perc-wf-button";var trNameNormal=trName.toLowerCase().replace(/[^a-zA-Z0-9\/]/g,"_");var trId="perc_item_transition_"+trNameNormal;var baseImageName="/cm/images/images/splitButtonWf"+trNameNormal;var imageExt=".gif";var regImageFilename=baseImageName+imageExt;var overImageFilename=baseImageName+"Over"+imageExt;if(index==0){defaultButtonImage=regImageFilename;defaultButtonImageOver=overImageFilename;dropdownButtonImage="/cm/images/images/splitButtonArrow.gif";dropdownButtonImageOver="/cm/images/images/splitButtonArrowOn.gif";name}var param={name:trName,contentId:contentId,itemType:itemType};dropdownParams.push(param);dropdownLabels.push(trName);dropdownActions.push(handlePageWorkflowDropdownAction)});var pageWorkflowDropdown=$("#perc-dropdown-page-workflow");pageWorkflowDropdown.append($("<a />").attr("href","#").html("&nbsp;").css("display","inline-block").addClass("perc-workflow-split-button-"+$.perc_textFilters.IDNAMECDATA(dropdownLabels[0]))).append($("<div />").addClass("perc-workflow").css("display","inline-block"));pageWorkflowDropdown.children("div").eq(0).PercDropdown({percDropdownRootClass:"perc-workflow",percDropdownOptionLabels:dropdownLabels,percDropdownCallbacks:dropdownActions,percDropdownCallbackData:dropdownParams,percDropdownTitleImage:dropdownButtonImage,percDropdownTitleImageOver:dropdownButtonImageOver,percDropdownShowExpandIcon:false,percDropdownResizeToElement:"#perc-dropdown-page-workflow"});pageWorkflowDropdown.find(".perc-dropdown-title").unbind("click");pageWorkflowDropdown.children("a").click(function(){dropdownActions[0](dropdownParams[0])});addSaveAndCloseButtons()}})}else{addSaveAndCloseButtons();addCommentsIcon()}}finder.addPathChangedListener(function(p){if(currentFinderView===PERC_FINDER_VIEW_COLUMN){return}if(finder.flagChangeView){setView(PERC_FINDER_VIEW_COLUMN)}});$.PercNavigationManager.registerFinder(finder);$.PercNavigationManager.addLocationChangeListener(function(url,id,notifyComplete,params){var newId=params.id;var modeSwitch=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY&&params.mode==$.PercNavigationManager.MODE_EDIT;if(!modeSwitch&&!$.PercNavigationManager.isReopenAllowed()&&contentId&&contentId==newId){var options={title:"Open "+type,content:"The "+type+" '"+$.PercNavigationManager.getName()+"' is already open."};$.perc_utils.alert_dialog(options);notifyComplete(id,false);return}var ok=false;dirty=dirtyController.isDirty();if(dirty){confirm_if_dirty(function(){if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}return})}else{if(params.mode==$.PercNavigationManager.MODE_EDIT&&contentId!=null){checkOutCheckInPage(newId,id,notifyComplete,params.pathType)}else{checkOutCheckInPage(null,id,notifyComplete,params.pathType);notifyComplete(id,true)}}});$(".perc-finder").append(finder.elem);finder.on("resize",function(event,ui){if($("#perc_site_map").length>0){$("#perc_site_map").perc_site_map("layoutAll")}});finder.update_finder_height();finderButtons=$.percFinderButtons().createButtons(finder,percFinderViewAPI);var contentId=$.PercNavigationManager.getId();var pageMode=$.PercNavigationManager.getMode();var contentName=$.PercNavigationManager.getName();var type=$.PercNavigationManager.getPathType();var view=$.PercNavigationManager.getView();function checkForMigrationWarnings(contentId){function onPageHasEmptyMigrationWidgets(){$.perc_utils.alert_dialog({title:I18N.message("Warning"),content:I18N.message("Content migration did not populate all widgets on the page. The original content can be accessed in the Unused Asset tray."),okCallBack:function(){$.PercPageService.clearFlagShowMigrationEmptyMessage(contentId)}})}$.PercPageService.checkForEmptyMigrationWidgets(contentId,onPageHasEmptyMigrationWidgets)}if(type==$.PercNavigationManager.PATH_TYPE_PAGE&&contentId&&contentName){if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percPage",contentId,function(status){if(!status){contentId=null;contentName=null;var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}return}else{checkForMigrationWarnings(contentId);pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}})}else{pageView.openPage(contentId,contentName);addTransitionButtons("percPage")}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&contentId){var assetId=contentId;var path=$.PercNavigationManager.getPath();$("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name' title = "+contentName+"> "+contentName+"</span>");if(pageMode==$.PercNavigationManager.MODE_EDIT){$.PercWorkflowController().checkOut("percAsset",assetId,function(status){if(status){openAsset(assetId,true)}})}else{openAsset(assetId,false)}}else{if(view==$.PercNavigationManager.VIEW_EDIT_ASSET&&!contentId){var memento=$j.PercNavigationManager.getMemento();if(memento.widgetId){$.PercNewAssetDialog.openViewer(memento.folderPath,memento.widgetId)}else{$.PercNewAssetDialog.open()}}else{if(!contentId){var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}}}}}if(contentName!=null){$("#perc-editor-inline-help").hide()}function handlePageWorkflowDropdownAction(params){var contentId=params.contentId;var itemType=params.itemType;var trName=params.name;confirm_if_dirty(function(){var type=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"asset":"page";doIfItemExists(params.contentId,function(){doIfCheckedOutToCurrentUser(contentId,function(){var buttons={};buttons[trName]={click:function(){userComment=$("#perc-workflow-comment").val();commentDialog.remove();$.PercBlockUI();$.PercWorkflowController().transition(contentId,itemType,trName,encodeURIComponent(userComment),function(status){if(status){contentId=null;$.unblockUI();if(type=="page"&&trName=="Archive"){$.PercRedirectHandler.createRedirect($.PercNavigationManager.getPath(),"","page").fail(function(errMsg){$.perc_utils.alert_dialog({title:"Redirect creation error",content:errMsg,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}).done(function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}else{$.unblockUI()}})},id:"perc-workflow-comment-ok"};buttons.Cancel={click:function(){commentDialog.remove()},id:"perc-workflow-comment-cancel"};var userComment="";var commentDialog=$("<div><div class='perc-workflow-comment-label' data='"+trName+'\'>Enter comments (limit to 255 characters)</div><textarea id="perc-workflow-comment" name="perc-workflow-comment" maxlength="255"></textarea></div>').perc_dialog({dialogClass:"perc-workflow-comment-dialog",title:"Enter Comments",modal:true,resizable:false,percButtons:buttons,width:400,id:"perc-workflow-comment-dialog"})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _openSchedule(callbackData){var itemId=callbackData.assetId;var assetName=callbackData.aName;if(dialogFlag){$.PercScheduleDialog.open(itemId,assetName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,assetName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,assetName)}}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Continue to publish now?",success:function(){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}}function _publishItem(callbackData){var itemId=callbackData.assetId;var trName=callbackData.trName;var view=$.PercNavigationManager.getView();var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){$.unblockUI();if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var SitePublishResponse=JSON.parse(results[0]).SitePublishResponse;if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG_MULTIPLE_SITES){$.perc_utils.alert_dialog({title:"Warning",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration multiple sites",[SitePublishResponse.warningMessage])})}else{if(SitePublishResponse.status===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{if(typeof(SitePublishResponse.warningMessage)!="undefined"&&SitePublishResponse.warningMessage!=""){$.perc_utils.alert_dialog({title:"Warning",content:SitePublishResponse.warningMessage,okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}}}}}}}})(jQuery,jQuery.Percussion);(function(p){p.PercIFrameView={renderAssetEditor:e,saveContent:v};var d=p.PercDirtyController;var k=false;var x=null;var t,q,h,f;function e(z,C,A,H,B,D){h=p("#frame");h.contents().remove();h.unbind(".reload");x=H;t=D;q=C;h[0].src=A;var E=/sys_folderid=([0-9]+)/;E=E.exec(A);f=E&&E.length>0?E[1]:null;p.PercContentPreSubmitHandlers.clearHandlers();h.load(function(){if(k==false){k=true;w()}else{n()}});fixIframeHeight();if(t){var F=p("#perc-layout-menu").length>0?"#perc-layout-menu":"#perc-content-menu";p(F).html("");p('<a style="float: right;" name="perc_wizard_save" class="perc-save" id="perc-save-content">  </a>').appendTo(F);p('<a style="float: right;" class="perc-close" id="perc-cancel-content">  </a>').appendTo(F);p("#perc-save-content").unbind("click").click(function(){v(true)});p("#perc-cancel-content").unbind("click").click(function(){G()});function G(){p.PercNavigationManager.goToDashboard()}}}function n(){if(h.contents().find("#perc-content-edit-errors").length==0){if(t){y(h);p.unblockUI()}else{p.PercPathService.getPathItemById(p.PercNavigationManager.getId(),function(A,z){if(A==p.PercServiceUtils.STATUS_SUCCESS){var B=z.PathItem.name;p.PercNavigationManager.setReopenAllowed(true);p.PercNavigationManager.goToLocation(p.PercNavigationManager.VIEW_EDIT_ASSET,p.PercNavigationManager.getSiteName(),p.PercNavigationManager.getMode(),p.PercNavigationManager.getId(),B,p.PercNavigationManager.getPath(),p.PercNavigationManager.PATH_TYPE_ASSET);p.unblockUI()}else{p.unblockUI();p.perc_utils.alert_dialog({title:"Error",content:z})}})}}else{b(h.contents().find("#perc-content-form"));p.unblockUI()}}function w(){if(t&&q){h.contents().find("[name=sys_workflowid]").val(q)}var z=h.contents().find("#perc-content-form");b(z);if(!t){h.contents().find("#perc-site-impact-panel").show();p.PercSiteImpactView.renderSiteImpact(p.PercNavigationManager.getId(),p.PercSiteImpactView.ITEM_TYPE_ASSET,h.contents().find("#perc-site-impact-panel"))}}function v(z){d.setDirty(false,"asset");p.PercBlockUI();var A=true;p.each(p.PercContentPreSubmitHandlers.getHandlers(),function(){if(!this()){A=false}});if(!A){p.unblockUI();return}p.PercContentPreSubmitHandlers.clearHandlers();p(window).removeData();h.removeData();h.contents().find("#perc-content-form").submit()}function j(z,B,A){p.PercNavigationManager.goToLocation(p.PercNavigationManager.VIEW_EDIT_ASSET,p.PercNavigationManager.getSiteName(),p.PercNavigationManager.getMode(),A,B,z+"/"+B,p.PercNavigationManager.PATH_TYPE_ASSET)}function b(A){if(f){var B=A.attr("action");B=B+"?sys_folderid="+f+"&sys_asset_folderid="+f;A.attr("action",B)}var z=A.find("[name=sys_title]");var z=A.find("[name=sys_title]");if(z.length>0){p.perc_filterField(z,p.perc_textFilters.URL)}A.find("[type=text]").keypress(function(C){if(C.keyCode==13){return false}})}function y(A){var z=A.contents().find("[name=sys_contentid]").val();if(z==""){p.perc_utils.alert_dialog({title:"Error",content:"Unable to create asset"});return}var z="-1-101-"+z;path="//Folders/$System$/Assets"+x;p.PercAssetController.putAssetInFolder(z,path,function(B,C){j(p.perc_paths.ASSETS_ROOT+x,A.contents().find("[name=sys_title]").val(),C.AssetFolderRelationship.assetId)})}})(jQuery);(function(b){b.PercNewPageDialog=function(){var e={openDialog:d};function d(n,j){var y="";if(n){n=n.split("/");if(n[1]==b.perc_paths.SITES_ROOT_NO_SLASH){y=n[2]}}var f=30;var z="<div><p class='perc-field-error' id='perc-save-error'></p><br/><span style='position: relative; float: right; margin-top: -44px; margin-right: -2px;'><label>* - denotes required field</label></span><form action='' method='GET'> ";if(!j){z=z+"<label for='perc-select-template'>Select a template: </label><br/><a class='prevPage browse left'></a><div class='perc-scrollable'><input type='hidden' id='perc-select-template' name='template'/><div class='perc-items'></div></div><a class='nextPage browse right' ></a>"}else{z=z+"<input type='hidden' id='perc-select-template' name='template' value='"+j+"'/>"}z=z+"<div style='float:left;><fieldset><label for='perc-page-linktext' class='perc-required-field'>"+(!j?I18N.message("perc.ui.newpagedialog.label@Page link text"):I18N.message("perc.ui.newblogpostdialog.label@Post title"))+":</label> <br/> <input type='text' tabindex='"+f+"' class='required' id='perc-page-linktext' name='page_linktext' maxlength='512'/> <br/> ";if(!j){z=z+"<input type='text' style = 'display:none' tabindex='"+f+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> "}else{z=z+"<label for='perc-page-title' class='perc-required-field' style='display: none;'>"+I18N.message("perc.ui.newblogpostdialog.label@Hidden Post title")+":</label> <br style='display: none;'/> <input type='hidden' tabindex='"+f+"' id='perc-page-title' class='required' name='page_title' maxlength='512'/> <br style='display: none;'/>"}z=z+"<label for='perc-page-name' class='perc-required-field'>"+(!j?I18N.message("perc.ui.newpagedialog.label@Page name"):I18N.message("perc.ui.newblogpostdialog.label@Post name"))+":</label> <br/> <input type='text' tabindex='"+f+"' class='required' id='perc-page-name' name='page_name' maxlength='255'/><br/> </fieldset></div><div class='ui-layout-south'><div id='perc_buttons' style='z-index: 100;'></div></div></form> </div>";var q=!j?800:420;var A=b(z).perc_dialog({title:(!j?I18N.message("perc.ui.newpagedialog.title@New Page"):I18N.message("perc.ui.newblogpostdialog.title@New Post")),buttons:{},percButtons:{Save:{click:function(){h(y)},id:"perc-page-save"},Cancel:{click:function(){C()},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:q,resizable:false,modal:true});if(!j){w()}function x(F){var G=b.PercServiceUtils.extractDefaultErrorMessage(F);var E=b.PercServiceUtils.extractFieldErrorCode(F);b.perc_utils.alert_dialog({title:"Error",id:"perc-error-dialog-confirm",content:G,okCallBack:function(){if(E=="page.alreadyExists"){b("#perc-page-name").focus()}}})}function C(){A.remove()}function h(E){b.PercSiteService.getSiteProperties(E,function(G,F){if(G==b.PercServiceUtils.STATUS_SUCCESS){var I=b(A.find("#perc-page-name")[0]).val();var H=F.SiteProperties.defaultFileExtention;if(H&&I.lastIndexOf(".")<0){if(I.length+H.length<255){I+="."+H}else{I=I.substring(0,254-H.length)+"."+H}b(A.find("#perc-page-name")[0]).val(I)}}else{b.perc_utils.alert_dialog({title:"Error",content:F})}A.find("form").submit()})}var k=A.find("form").validate({errorClass:"perc_field_error",validClass:"perc_field_success",wrapper:"p",validateHiddenFields:false,messages:p(),debug:true,submitHandler:function(F){var E=b(F).find("[name=page_name]").val();E=b.trim(E);E=b.perc_textFilters.WINDOWS_FILE_NAME(E);b(F).find("[name=page_name]").val(E);b.perc_pathmanager.open_containing_folder(n,function(H,G){b.perc_pagemanager.create_new_page(G,b(F).serializeArray(),function(I){A.remove();B(G.join("/"),E,I.Page.id)},x)})}});function w(){var G=A.find("div.perc-scrollable div.perc-items");var H="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";b("#perc-select-template_perc_is").attr("style",H);var F;if(n[1]==b.perc_paths.SITES_ROOT_NO_SLASH){F=b.perc_paths.TEMPLATES_BY_SITE+"/"+n[2]}else{F=b.perc_paths.TEMPLATES_USER}b.getJSON(F,function(I){b.each(I.TemplateSummary,function(){G.append(E(this));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item").bind("click",function(){var J=b(this).find(".item-id").text();b("#perc-select-template").val(J);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());$firstItem.addClass("perc-selected-item")});b.PercTextOverflow(b("div.perc-text-overflow"),122)});function E(J){var I="<div class=\"item\"><div class=\"item-id\">@ITEM_ID@</div>    <table>        <tr><td align='left'>            <img style='border:1px solid #E6E6E9' height = '86px' width = '122px' src=\"@IMG_SRC@\"/>        </td></tr>        <tr><td>            <div class='perc-text-overflow-container' style='text-overflow:ellipsis;width:122px;overflow:hidden;white-space:nowrap'>                <div class='perc-text-overflow' style='float:none' title='@ITEM_TT@' alt='@ITEM_TT@'>@ITEM_LABEL@</div>        </td></tr>    </table></div>";return I.replace(/@IMG_SRC@/,J.imageThumbPath).replace(/@ITEM_ID@/,J.id).replace(/@ITEM_LABEL@/,J.name).replace(/@ITEM_TT@/g,J.name)}}var v=b("#perc-page-linktext");var t=b("#perc-page-title");var D=b("#perc-page-name");b.perc_textAutoFill(v,t);b.perc_textAutoFill(v,D,b.perc_autoFillTextFilters.URL,null,255);b.perc_filterField(D,b.perc_textFilters.URL);function p(){var E={page_linktext:{required:(!j?"Page link text":"Post Title")+"  is a required field."},page_title:{required:(!j?"Page":"Hidden Post")+" title is a required field."},page_name:{required:(!j?"Page":"Post")+" name is a required field."}};return E}function B(G,E,F){b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDITOR,b.PercNavigationManager.getSiteName(),b.PercNavigationManager.MODE_EDIT,F,E,G+"/"+E,b.PercNavigationManager.PATH_TYPE_PAGE)}}return e}})(jQuery);(function(b){b.PercNewAssetDialog={};b.PercNewAssetDialog.init=function(d,n){var t=b.perc_utils;var j;b.PercNewAssetDialog.open=function(){var y=30;var F;var C;var D={};C=b("<div><p class='perc-field-error' id='perc-save-error'></p><form action='' method='GET'>   <label for='perc-select-template'>"+I18N.message("perc.ui.newassetdialog.label@Select Asset Type")+": </label><br/>  <a class='prevPage browse left' style = 'margin:21px 0px 30px 0px'></a>  <div class='perc-scrollable' style = 'height:64px'>    <input type='hidden' id='perc-select-template'   name='template'/>    <input type='hidden' id='perc-editor-url'        name='url'/>    <input type='hidden' id='perc-workflow-id'       name='workflowId'/>    <div class='perc-items'>    </div>  </div>  <a class='nextPage browse right'style = 'margin:21px 0px 30px 0px' ></a>  <div class='ui-layout-south'>    <div id='perc_buttons' style='z-index: 100;'></div>  </div></form></div>").perc_dialog({title:I18N.message("perc.ui.newassetdialog.title@New Asset"),buttons:D,percButtons:{Next:{click:function(){var v=b.PercNavigationManager.getMemento().lastOpenedItem;if(!t.isBlankString(v)){b.PercWorkflowController().checkIn(v,function(J){z()})}else{z()}},id:"perc-page-save"},Cancel:{click:function(){G();if(typeof(b.PercNavigationManager.getMemento().lastLocation)!="undefined"){var v=b.PercNavigationManager.getBookmark();var J=b.PercNavigationManager.getMemento().lastLocation;if(decodeURIComponent(v)!=J){window.location.href=J}else{b.PercNavigationManager.goTo(b.PercNavigationManager.VIEW_EDITOR,true)}}},id:"perc-page-cancel"}},id:"perc-new-page-dialog",width:774,modal:true});var A=b("#perc-select-template_perc_is");var E="height: 160px; width: 410px; overflow-x: scroll; overflow-y: hidden;";A.attr("style",E);function G(){C.remove()}function z(){C.find("form").submit()}F=C.find("form").validate({errorClass:"perc-field-error",validClass:"perc-field-success",wrapper:"p",validateHiddenFields:false,debug:true,submitHandler:function(J){var v=b("#perc-editor-url").val();var K=b("#perc-workflow-id").val();b.perc_pathmanager.open_containing_folder(j,function(M,L){C.remove();path=L.toString().replace(/,/g,"/");pathtemp=path;path=path.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(pathtemp,function(O){var N=O.id;var P=N.substring(N.lastIndexOf("-")+1);v+="&sys_folderid="+P+"&sys_asset_folderid="+P+"&sys_workflowid="+K;b.PercIFrameView.renderAssetEditor(d,K,v,path,L,true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})}});b.PercAssetController.getAssetEditorLibrary(h(),function(K){var J=C.find("div.perc-scrollable div.perc-items");for(a in K){var v=K[a];J.append(f(v));b("div.perc-scrollable").scrollable({items:".perc-items",size:4,keyboard:false});b(".perc-items .item .item-id").hide();b(".perc-items .item .item-editor-url").hide();b(".perc-items .item .item-workflow-id").hide();b(".perc-items .item").bind("click",function(){var L=b(this).find(".item-editor-url").text();var M=b(this).find(".item-workflow-id").text();b("#perc-select-template").val(b(this).find(".item-id").text());b("#perc-editor-url").val(L);b("#perc-workflow-id").val(M);b(".perc-items .item").removeClass("perc-selected-item");b(this).addClass("perc-selected-item")});$firstItem=b(".perc-items .item:first");b("#perc-select-template").val($firstItem.find(".item-id").text());b("#perc-editor-url").val($firstItem.find(".item-editor-url").text());b("#perc-workflow-id").val($firstItem.find(".item-workflow-id").text());$firstItem.addClass("perc-selected-item")}});var I=b("#perc-page-name");var x=b("#perc-page-title");var w=b("#perc-page-url");function B(v){return v.replace(/\s/g,"-").replace(/[^\$\{\}\^\[\]\`\=\,\;\`a-zA-Z0-9\-]/g,"")}function H(v){return v.replace(/\\/g,"")}b.perc_textAutoFill(I,x,H);b.perc_textAutoFill(I,w,B);b.perc_textAutoFill(I,"#perc-page-linktitle",H);b.perc_filterField(I,H);b.perc_filterField(x,H);b.perc_filterField(w,B);b.perc_filterField("#perc-page-linktitle",H)};b.PercNewAssetDialog.openViewer=function(v,w){b.PercAssetService.getAssetEditorForWidgetAndFolder(v,w,function(y,x){if(y==b.PercServiceUtils.STATUS_ERROR){b.perc_utils.alert_dialog({title:"Error",content:"Unknown error occurred while opening the asset editor. Please refresh your browser and try again."});return}var A=x.AssetEditor.pop();var z=A.url;var B=A.workflowId;path=v.replace(b.perc_paths.ASSETS_ROOT,"");b.PercAssetController.getPathItemForPath(v,function(D){var C=D.id;var E=C.substring(C.lastIndexOf("-")+1);z+="&sys_folderid="+E+"&sys_asset_folderid="+E+"&sys_workflowid="+B;b.PercIFrameView.renderAssetEditor(d,B,z,path,v.split("/"),true);b("#perc-page-button").html("Asset:").append("<span id='perc-pageEditor-menu-name'> (New Asset)</span>");b.PercNavigationManager.clearId();b("#perc-editor-inline-help").hide();fixIframeHeight()})})};function e(){b.PercFolderHelper().getAccessLevelByPath(j.join("/"),false,function(w,v){if(w==b.PercFolderHelper().PERMISSION_ERROR||v==b.PercFolderHelper().PERMISSION_READ){b.perc_utils.alert_dialog({title:"Warning",content:"You do not have permission to create an asset here."});return}else{var y=d.getCurrentItem();var x="";if(y!=null){x=y.folderPaths;if(y.type=="Folder"){x=y.folderPath}}b.PercUserService.getAccessLevel(null,-1,function(A,z){if(A==b.PercServiceUtils.STATUS_ERROR||z==b.PercUserService.ACCESS_READ||z==b.PercUserService.ACCESS_NONE){b.perc_utils.alert_dialog({title:"New Asset",content:"You are not authorized to create a new asset."});return}else{n.confirm_if_dirty(function(){if(b.PercNavigationManager.getView()==b.PercNavigationManager.VIEW_EDIT_ASSET){b.PercNavigationManager.clearMemento()}b.PercNavigationManager.goToLocation(b.PercNavigationManager.VIEW_EDIT_ASSET,b.PercNavigationManager.getSiteName(),"edit",null,null,b.PercNavigationManager.getPath(),b.PercNavigationManager.PATH_TYPE_ASSET,{lastLocation:b.PercNavigationManager.getBookmark(),lastOpenedItem:b.PercNavigationManager.getId()})})}},x)}})}function f(w){var v="<div class='item' for='@ITEM_ID@'>   <div class='item-id'>@ITEM_ID@</div>   <div class='item-editor-url'>@ITEM_URL@</div>   <div class='item-workflow-id'>@ITEM_WORKFLOW_ID@</div>   <table style='vertical-align:middle'>       <tr><td align='center' valign='middle'>           <img src='/Rhythmyx@IMG_SRC@'/>       </td><td style='vertical-align:middle'><span>@ITEM_LABEL@</span></td></tr>   </table></div>";return v.replace(/@IMG_SRC@/,w.icon).replace(/@ITEM_ID@/g,w.title).replace(/@ITEM_URL@/,w.url).replace(/@ITEM_WORKFLOW_ID@/,w.workflowId).replace(/@ITEM_LABEL@/,w.title)}function h(){return b.deparam.querystring().path}var q=b('<a id="mcol-new-asset" class="perc-font-icon" title="Click to create new asset" href="#" class="ui-disabled"><span class="icon-plus"></span><span class="icon-file-alt"></span></a>').perc_button();function k(v){j=v;if(b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_SEARCH_RESULTS||b.Percussion.getCurrentFinderView()==b.Percussion.PERC_FINDER_RESULT){p(false)}else{if(v[1]==b.perc_paths.ASSETS_ROOT_NO_SLASH){q.show();p(true);if(v.length<3){p(false)}else{b.PercFolderHelper().getAccessLevelByPath(v.join("/"),true,function(x,w){if(x==b.PercFolderHelper().PERMISSION_ERROR||w==b.PercFolderHelper().PERMISSION_READ){p(false)}})}}else{if(v[1]==b.perc_paths.DESIGN_ROOT_NO_SLASH||v[1]==b.perc_paths.SITES_ROOT_NO_SLASH){q.hide()}}}}function p(v){if(v){q.removeClass("ui-disabled").addClass("ui-enabled").unbind("click").click(e)}else{q.addClass("ui-disabled").removeClass("ui-enabled").unbind("click")}}d.addPathChangedListener(k);return q}})(jQuery);(function($,P){var CONTENT_TAB=0;var LAYOUT_TAB=1;var STYLES_TAB=2;var view=$.PercNavigationManager.getView();var dialogFlag=true;var querystring=$.deparam.querystring();var pageMode=$.PercNavigationManager.getMode();var isAdmin=$.PercNavigationManager.isAdmin();var isDesigner=$.PercNavigationManager.isDesigner();P.pageView=function(){$(".perc-page-status").hide();$(".perc-page-name").hide();var dirtyController=$.PercDirtyController;if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR){$.perc_iframe_fix($("#frame"))}var utils=$.perc_utils;var pageModel;var currentPageId;var unassigned="UNASSIGNED";var dirty=false;var pageViewAPI={resetPageName:resetPageName,reload:function(){loadTab($("#perc-pageEditor-tabs").tabs("selected"))},getPageId:function(){return currentPageId},clear:function(){$("#frame").each(function(){this.open();this.close()})},confirm_if_dirty:confirm_if_dirty,openPage:openPage,isDirty:isDirty};$("#region-tool, #region-tool-help, #perc-region-tool-inspector, #perc-region-tool-menu, #perc-error-alert").css("visibility","hidden");function openPage(pageId,pageName){try{$.PercRecentListService.setRecent($.PercRecentListService.RECENT_TYPE_ITEM,pageId).done(function(){$.perc_utils.info("Added page with id "+pageId+" to recent item list.")}).fail(function(message){$.perc_utils.error(message)})}catch(err){$.perc_utils.error("Error adding page with id "+pageId+" to recent item list.")}currentPageId=pageId;$(".perc-page-status").show();$(".perc-page-name").show();getPageStatus(currentPageId);var pglabel=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"Editing Page:":"Viewing Page:";var pgType=$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT?"page-editing":"page-viewing";if(pageName){var titleValue=$.PercNavigationManager.getPath();$(".perc-page-name-name").html('<span class = "perc-title-value"><span class = "perc-page-name-text">'+pageName+"</span></span>");$(".perc-title-value").attr("title",titleValue);$(".perc-title-value").prepend('<span class = "perc-page-name-label">'+pglabel+"</span>");$(".perc-page-details").attr("type",pgType);$("#perc-pageEditor-menu-name").html(pageName);_addMyPagesAction(pageId);$(".perc-page-details").show()}var $tabs=$("#perc-pageEditor-tabs");var currentTabIndex=$tabs.tabs().tabs("option","selected");var defaultTabIndex=0;if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,function(){$tabs.data("disabled.tabs",[]).tabs("select",defaultTabIndex);$("#perc-pageEditor-tabs").find("li").each(function(i){if(pageModel.getTemplateModel().getTemplateType()!==unassigned){$(this).removeClass("ui-state-disabled")}});var enableMenu=pageModel.getTemplateModel().getTemplateType()!==unassigned;if(isAdmin||isDesigner){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Edit Template","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,enableMenu,true]})}else{actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","Edit Meta-data","Change Template"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)},_changeTemplate],percDropdownCallbackData:["Action","Edit Meta-data","Change Template"],percDropdownDisabledFlag:[false,true,true]})}addMoreMenus()})}$("#perc-metadata-button").unbind().perc_button().removeClass("ui-meta-pre-disabled").addClass("ui-meta-pre-enabled").click(function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)});var actionsDropdown=$("#perc-dropdown-actions");var viewDropdown=$("#perc-dropdown-view");if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_READONLY){actionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-actions",percDropdownOptionLabels:["Actions","View Meta-data"],percDropdownCallbacks:[function(){},function(){$.perc_page_edit_dialog($.perc_finder(),pageViewAPI,currentPageId)}],percDropdownCallbackData:["Action","View Meta-data"],percDropdownDisabledFlag:[false,true]});viewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History"],percDropdownCallbacks:[function(){},_openRevisions,_openComments,_previewPage,_openPublishingHistory],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"View"],percDropdownDisabledFlag:[false,true,true,true,true]});addMoreMenus()}function _addMyPagesAction(pageId){$.PercPageService.isMyPage(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$(".perc-my-pages-action").addClass("perc-my-pages-error").attr("title","Error occurred retreving the status.")}else{if(result){$(".perc-my-pages-action").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").click(function(){_removeFromMyPages(pageId)})}else{$(".perc-my-pages-action").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").click(function(){_addToMyPages(pageId)})}}})}function _addToMyPages(pageId){$.PercPageService.addToMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-add-to-my-pages").addClass("perc-remove-from-my-pages").attr("title","Remove from My Pages").unbind().click(function(){_removeFromMyPages(pageId)})}})}function _removeFromMyPages(pageId){$.PercPageService.removeFromMyPages(pageId,function(status,result){if(status==$.PercServiceUtils.STATUS_ERROR){$.perc_utils.alert_dialog({title:"Error",content:result})}else{$(".perc-my-pages-action").removeClass("perc-remove-from-my-pages").addClass("perc-add-to-my-pages").attr("title","Add to My Pages").unbind().click(function(){_addToMyPages(pageId)})}})}function addMoreMenus(){if(isAdmin||isDesigner){var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-layout",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Edit Template","Change Template"],percDropdownCallbacks:[function(){},_loadTemplate,_changeTemplate],percDropdownCallbackData:["Action","Edit Template","Change Template"],percDropdownDisabledFlag:[false,true,true]})}else{var layoutActionsDropdown=$("#perc-dropdown-actions-layout");layoutActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-layout-actions",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]});var styleActionsDropdown=$("#perc-dropdown-actions-style");styleActionsDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-actions-style",percDropdownOptionLabels:["Actions","Change Template"],percDropdownCallbacks:[function(){},_changeTemplate],percDropdownCallbackData:["Action","Change Template"],percDropdownDisabledFlag:[false,true]})}var layoutViewDropdown=$("#perc-dropdown-view-layout");layoutViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-layout",percDropdownOptionLabels:["View","Disable JavaScript","Hide Guides"],percDropdownCallbacks:[function(){},function(){},function(){}],percDropdownCallbackData:["View","View","View"],percDropdownDisabledFlag:[false,true,true]});var styleViewDropdown=$("#perc-dropdown-view-style");styleViewDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-view-style",percDropdownOptionLabels:["View","Disable JavaScript"],percDropdownCallbacks:[function(){},function(){}],percDropdownCallbackData:["View","Disable JavaScript"],percDropdownDisabledFlag:[false,true]});if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$.PercItemPublisherService.getPublishActions(currentPageId,function(status,result){if(status){var pubActions=eval("("+result+")").PSPublishingAction;if(pubActions.length>0){var actionNames=["Publishing"];var disableAction=[false];$.each(pubActions,function(){actionNames.push(this.name);disableAction.push(this.enabled)});var publishNowDropdown=$("#perc-dropdown-publish-now");publishNowDropdown.PercDropdown({percDropdownRootClass:"perc-dropdown-publish-now",percDropdownOptionLabels:actionNames,percDropdownCallbacks:[function(){},_publishItem,_openSchedule,_publishItem,_publishItem,_publishItem],percDropdownCallbackData:["Publishing",{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Publish"},{pageId:currentPageId,pageName:pageName,trName:"Take Down"},{pageId:currentPageId,pageName:pageName,trName:"Stage"},{pageId:currentPageId,pageName:pageName,trName:"Remove from Staging"},currentPageId],percDropdownDisabledFlag:disableAction})}}});$.PercAssetService.getUnusedAssets(currentPageId,populateOrphanAssets);var viewDropDownData={percDropdownRootClass:"perc-dropdown-page-view",percDropdownOptionLabels:["View","Revisions","Comments","Preview","Publishing History","Disable JavaScript"],percDropdownCallbacks:[$.noop,_openRevisions,_openComments,_previewPage,_openPublishingHistory,$.noop],percDropdownCallbackData:["View",{pageId:currentPageId,pageName:pageName},{pageId:currentPageId,pageName:pageName},currentPageId,{pageId:currentPageId,pageName:pageName},"Disable JavaScript"],percDropdownDisabledFlag:[false,true,true,true,true,true]};viewDropdown.PercDropdown(viewDropDownData)}if(currentTabIndex==defaultTabIndex){loadTab(defaultTabIndex)}initOrphanAssetsMenu()}}function handleIn(){var self=$(this);self.attr("src",self.data("overIconSrc"))}function handleOut(){var self=$(this);self.attr("src",self.data("iconSrc"))}function populateOrphanAssets(status,unusedAssets){$("#perc_orphan_assets_expander").show();if(status==$.PercServiceUtils.STATUS_ERROR){$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled");$.perc_utils.alert_dialog({title:"Error",content:unusedAssets});return}if(unusedAssets.length>0){var orphanAssetsContainer=$(".perc-orphan-assets-list");orphanAssetsContainer.empty();var htmlAssets="";for(var i=0;i<unusedAssets.length;i++){var asset=unusedAssets[i];var hoverText="Local";var folderPaths="";if(typeof(asset.folderPaths)!="undefined"){hoverText=asset.folderPaths.replace("//Folders/$System$","")+"/"+asset.name;folderPaths=asset.folderPaths}orphanAssetsContainer.append($("<a />").attr("alt",hoverText).attr("title",hoverText).addClass("perc-orphan-asset").data("spec",{type:asset.type,id:asset.id,relationshipId:asset.relationshipId}).append($("<div />").css("position","relative").addClass("perc-widget-tool").append($("<img />").attr("src",asset.icon).data("iconSrc",asset.icon).data("overIconSrc",asset.overIcon).hover(handleIn,handleOut)).append($("<div />").css("overflow","hidden").addClass("perc-asset-label").append($("<nobr />").html(asset.title)))).css("cursor","pointer").data("assetId",asset.id).data("assetType",asset.type).data("assetFolderPaths",folderPaths).data("widgetId",asset.widgetId).unbind().click(selectOrphanAsset))}$("#perc_orphan_assets_expander").unbind().click(function(){clearSelection();$.fn.percOrphanAssetsMaximizer(P)});orphanAssetsContainer.find(".perc-orphan-asset").draggable({helper:function(){var helper=$(this).clone();helper.find(".perc-asset-label").css("padding","0px 0px 5px 5px");return helper},appendTo:"body",refreshPositions:true,zIndex:9990,revert:true,revertDuration:0,start:function(){$("body").css("overflow","hidden")},stop:function(){$("body").css("overflow","auto")},delay:25});$("#perc_orphan_assets_maximizer").removeClass("perc-disabled");$("#perc_orphan_assets_expander").removeClass("perc-disabled")}else{$("#perc_orphan_assets_maximizer").addClass("perc-disabled");$("#perc_orphan_assets_expander").addClass("perc-disabled")}}$(window).resize(function(){fixIframeHeight()});function initOrphanAssetsMenu(){$("#perc_asset_library").disableSelection();$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}function deleteOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanIds=[];var orphanTypes=[];var orphanIsShared=[];var orphanWidgetsIds=[];for(var i=0;i<unused.length;i++){orphanIds.push($(unused[i]).data("assetId"));orphanTypes.push($(unused[i]).data("assetType"));orphanWidgetsIds.push($(unused[i]).data("widgetId"));var folderPaths=$(unused).data("assetFolderPaths");if(typeof(folderPaths)!="undefined"){orphanIsShared.push(true)}else{orphanIsShared.push(false)}}var title="Remove Unused Asset";var assetmsg=(i<2)?"asset":"assets";var msg="Are you sure you want to remove the unused "+assetmsg+"?";var options={id:"perc-orphan-asset-delete-dialog",title:title,question:msg,type:"YES_PREFERRED_NO",cancel:function(){},success:function(){pageModel.clearOrphanAssets(orphanWidgetsIds,orphanTypes,orphanIds,orphanAssetDeleted)}};$.perc_utils.confirm_dialog(options)}function orphanAssetDeleted(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");$(unused).remove();clearSelection();var remainingAssets=$("#perc_asset_library").find(".perc-orphan-assets-list").find("a");if(remainingAssets.length==0){$.fn.percOrphanAssetsMaximizer(P);$("#perc_orphan_assets_expander").addClass("perc-disabled").unbind();$("#perc_orphan_assets_maximizer").addClass("perc-disabled")}}function editOrphanAsset(){var assets=$("#perc_asset_library").find(".perc-orphan-assets-list");var unused=assets.find(".perc-orphan-assets-selected");var orphanId=$(unused).data("assetId");var orphanType=$(unused).data("assetType");var orphanWidgetId=$(unused).data("widgetId");var orphanIsShared=false;var widgetData={widgetid:orphanWidgetId,widgetdefid:orphanType};pageModel.configureAsset(widgetData,orphanId,orphanIsShared,orphanAssetEdited)}function orphanAssetEdited(){}function selectOrphanAsset(e){if(e.shiftKey){$(this).toggleClass("perc-orphan-assets-selected")}else{if($(this).is(".perc-orphan-assets-selected")){clearSelection()}else{clearSelection();$(this).toggleClass("perc-orphan-assets-selected")}}var parent=$(this).parent();var selected=$(parent).find(".perc-orphan-assets-selected");if(selected.length>0){$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/delete.png").unbind().click(deleteOrphanAsset);$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/edit.png").unbind().click(editOrphanAsset)}else{$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}if(selected.length>=2){$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}}function clearSelection(){$(".perc-orphan-assets-list").find("a").removeClass("perc-orphan-assets-selected");$(".perc-ui-delete-asset").attr("src","/cm/images/icons/editor/deleteInactive.png").unbind();$(".perc-ui-edit-asset").attr("src","/cm/images/icons/editor/editInactive.png").unbind()}$("#perc-pageEditor-tabs").tabs({disabled:[1,2],select:function(event,ui){if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);$("#perc-pageEditor-tabs").tabs("select",ui.index);resetJavaScriptMenu()});return false}else{resetJavaScriptMenu()}loadTab(ui.index,true)}});if($.PercNavigationManager.getView()==$.PercNavigationManager.VIEW_EDITOR&&$.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){$("#perc-wid-lib-expander").click(function(){$.fn.percWidLibMaximizer(P)})}function loadTab(index,addWrapper){if(addWrapper){var viewWrapper=$j.PercComponentWrapper("perc-action-page-tab-selected",["perc-ui-component-editor-toolbar","perc-ui-component-editor-frame"]);var isWrapperSet=$j.PercViewReadyManager.setWrapper(viewWrapper);if(!isWrapperSet){$j.PercViewReadyManager.showRenderingProgressWarning();return}}if(index==CONTENT_TAB){loadContent(currentPageId)}else{if(index==LAYOUT_TAB){loadLayout(currentPageId)}else{if(index==STYLES_TAB){loadCss(currentPageId)}}}}function _changeTemplate(){var successCallBack=function(){window.location.reload()};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(function(){setDirty(false);openChangeTemplateDialog()});return false}else{openChangeTemplateDialog()}function openChangeTemplateDialog(){$.PercChangeTemplateDialog().openDialog(currentPageId,pageModel.getTemplateModel().getId(),$.PercNavigationManager.getSiteName(),successCallBack)}}function _loadTemplate(){var memento={templateId:pageModel.getTemplateModel().getId(),pageId:currentPageId,tabId:"perc-tab-layout"};$j.PercNavigationManager.goToLocation($j.PercNavigationManager.VIEW_EDIT_TEMPLATE,$.PercNavigationManager.getSiteName(),null,null,null,$.PercNavigationManager.getPath(),null,memento)}function resetJavaScriptMenu(){$(".perc-dropdown-option-DisableJavaScript").text(I18N.message("perc.ui.menu@JavaScript Off"))}function resetPageName(){$.ajax({url:$.perc_paths.PAGE_CREATE+"/"+currentPageId,success:function(data){$("#perc-pageEditor-menu-name").html(data.Page.name)},type:"GET",dataType:"json"})}function confirm_if_dirty(callback,errorCallback,options){options=options||{};errorCallback=errorCallback||function(){};if(dirtyController.isDirty()){dirtyController.confirmIfDirty(callback,errorCallback,options)}else{callback()}}function loadContent(pageId){if($.PercNavigationManager.getMode()==$.PercNavigationManager.MODE_EDIT){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupContent);$.PercAssetService.getUnusedAssets(pageId,populateOrphanAssets);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}else{var previewPath=$.perc_paths.PAGE_PREVIEW+currentPageId;$("#frame").contents().remove();$("#frame").attr("src",previewPath);$("#frame").unbind().load(function(){fixIframeHeight();window.setTimeout(function(){$.perc_utils.handleLinks($("#frame"))},500);var frwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-frame");if(frwrapper!=null){frwrapper.handleComponentProgress("perc-ui-component-editor-frame","complete")}var tbwrapper=$.PercViewReadyManager.getWrapper("perc-ui-component-editor-toolbar");if(tbwrapper!=null){tbwrapper.handleComponentProgress("perc-ui-component-editor-toolbar","complete")}})}}function loadLayout(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setupLayout);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function loadCss(pageId){pageModel=P.pageModel($.perc_pagemanager,$.perc_templatemanager,pageId,setUpCss);if($.PercNavigationManager.isJavascriptOff()){pageModel.setJavaScriptOff(true)}}function setupContent(){fixIframeHeight();P.contentView($("#frame"),pageModel)}function setupLayout(){fixIframeHeight();var layoutController=P.layoutController(pageModel);var sizeController=P.sizeController(pageModel);P.layoutView($("#frame"),pageModel,layoutController,sizeController,function(isDirty){setDirty(isDirty)});$("#region-tool").draggable({helper:"clone"})}function setDirty(isDirty){dirtyController.setDirty(isDirty,"page");dirty=isDirty}function isDirty(){return dirty}function setUpCss(){fixIframeHeight();var cssController=P.cssController(pageModel,$("#frame"),P.CSSPreviewView($("#frame"),pageModel));$("#perc-css-editor-save").click(function(){cssController.save(function(){})});$("#perc-css-editor-cancel").click(function(){pageModel.load();dirtyController.setDirty(false,"template")})}function _openSchedule(callbackData){var itemId=callbackData.pageId;var pageName=callbackData.pageName;if(dialogFlag){$.PercScheduleDialog.open(itemId,pageName);$(".ui-datepicker-trigger").click();$("#ui-datepicker-div").css("z-index",9501).css("display","none");$("#ui-timepicker-div").css("z-index",9501).css("display","none");$("#perc-schedule-dialog-cancel").click();$.PercScheduleDialog.open(itemId,pageName);dialogFlag=false}else{$("#ui-datepicker-div").css("z-index",100000);$("#ui-timepicker-div").css("z-index",100000);$.PercScheduleDialog.open(itemId,pageName)}}function getPageStatus(pageId){var pagePath=$.PercNavigationManager.getPath();$.perc_pathmanager.getItemProperties(pagePath,function(status,itemProps){var pageStatus=itemProps.status;$(".perc-page-status-status").html(pageStatus);$.PercItemPublisherService.getScheduleDates(pageId,function(status,result){var scheduleDates=eval("("+result+")").ItemDates;if(scheduleDates.startDate&&pageStatus=="Pending"){$(".perc-page-status-status").html("Approved for "+scheduleDates.startDate)}})})}function _confirmPublish(scheduleDates){var startDate=scheduleDates.startDate;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var itemId=scheduleDates.itemId;if(startDate!=""){var settings={id:"perc-confirm-publish-dialog",title:"Warning",question:"This item is scheduled to be published on "+startDate+". Clear the schedule and continue to publish now?",success:function(){_immediateItemPublish(itemId,itemType)},cancel:function(){},yes:"Continue anyway"};utils.confirm_dialog(settings)}else{_immediateItemPublish(itemId,itemType)}}function _immediateItemPublish(itemId,itemType){$.PercBlockUI();$.PercItemPublisherService.publishItem(itemId,itemType,_afterPublish)}function _publishItem(callbackData){var itemId=callbackData.pageId;var trName=callbackData.trName;var itemType=view==$.PercNavigationManager.VIEW_EDIT_ASSET?"Asset":"Page";var siteName=$.PercNavigationManager.getSiteName();if(siteName===undefined&&itemType=="Page"){var currentItemPath=$.perc_finder().getPathItemById(itemId).folderPath;siteName=currentItemPath.replace("/"+$.perc_paths.SITES_ROOT,"").split("/")[1]}confirm_if_dirty(function(){doIfItemExists(itemId,function(){doIfCheckedOutToCurrentUser(itemId,function(){doIfDefaultServerNotModified(siteName,function(){if(trName=="Publish"){$.PercItemPublisherService.getScheduleDates(itemId,function(status,result){if(status){var scheduleDates=eval("("+result+")").ItemDates;_confirmPublish(scheduleDates)}else{$.perc_utils.alert_dialog({content:"Unable to get the saved schedule dates",title:"Error"});return false}})}else{if(trName=="Take Down"){$.PercBlockUI();$.PercItemPublisherService.takeDownItem(itemId,itemType,_afterPublish)}else{if(trName=="Stage"){$.PercBlockUI();$.PercItemPublisherService.publishToStaging(itemId,itemType,_afterPublish)}else{if(trName=="Remove from Staging"){$.PercBlockUI();$.PercItemPublisherService.removeFromStaging(itemId,itemType,_afterPublish)}}}}})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Overridden",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})},function(){$.perc_utils.alert_dialog({title:trName,content:I18N.message("perc.ui.webmgt.contentbrowser.warning@Action Not Performed Deleted",[type]),okCallBack:function(){$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true)}})})})}function _afterPublish(success,results){if(!success){var defMsg=$.PercServiceUtils.extractDefaultErrorMessage(results[0]);$.unblockUI();$.perc_utils.alert_dialog({title:"Error",content:defMsg})}else{var publishStatus=JSON.parse(results[0]).SitePublishResponse.status;if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_FORBIDDEN){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Publish Not Allowed")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_BADCONFIG){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("perc.ui.publish.errordialog.message@Bad configuration")})}else{if(publishStatus===$.PercItemPublisherService.PUBLISHER_JOB_STATUS_NOSTAGING_SERVERS){$.unblockUI();$.perc_utils.alert_dialog({title:"Server Publish",content:I18N.message("No staging servers available to publish/unpublish, please refresh the page to see updated menu.")})}else{$.PercNavigationManager.goTo($.PercNavigationManager.VIEW_EDITOR,true);$.unblockUI()}}}}}function _openRevisions(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercRevisionDialog.open(pageId,pageName,$.PercRevisionDialog.ITEM_TYPE_PAGE,$.PercRevisionDialog.ITEM_MODE_VIEW)}function _openComments(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercCommentsDialog.open(pageId,pageName,$.PercCommentsDialog.ITEM_TYPE_PAGE)}function _openPublishingHistory(callbackData){var pageId=callbackData.pageId;var pageName=callbackData.pageName;$.PercPublishingHistoryDialog.open(pageId,pageName,$.PercPublishingHistoryDialog.ITEM_TYPE_PAGE)}function _openOptimizer(callbackData){$.PercPageOptimizerDialog.open(callbackData.pageId,callbackData.pageName)}function _previewPage(currentPageId){confirm_if_dirty(function(){jQuery.perc_finder().launchPagePreview(currentPageId)})}function doIfCheckedOutToCurrentUser(contentId,yesCallback,noCallback){$.PercWorkflowController().isCheckedOutToCurrentUser(contentId,function(result){if(result){yesCallback()}else{noCallback()}})}function doIfDefaultServerNotModified(siteName,callback){$.PercNavigationManager.loadSiteProperties(siteName,function(siteProperties){$.PercItemPublisherService.isDefaultServerModified(siteProperties.id,function(status,result){if(status){if(result){$.perc_utils.alert_dialog({content:"Cannot publish or remove this item until the CM1 server is restarted.",title:"Warning"})}else{callback()}}})})}function doIfItemExists(contentId,existsCallback,doesNotExistCallback){$.PercWorkflowController().doesItemExist(contentId,function(result){if(result){existsCallback()}else{doesNotExistCallback()}})}return pageViewAPI}})(jQuery,jQuery.Percussion);(function(h){h.PercAssetController={getAssetEditorLibrary:e,getAssetEditorForAssetId:b,getAssetViewForAssetId:d,getPathItemForPath:f,putAssetInFolder:j};function e(n,k){function p(x,v){var w=[];var t=v.AssetEditor;for(i in t){var A=t[i].icon;var B=t[i].title;var q=t[i].url;var y=t[i].workflowId;var z=new h.PercAssetEditorModel(A,B,q,y);w.push(z)}k(w)}h.PercAssetService.getAssetEditorLibrary(n,p)}function b(k,n){h.PercAssetService.getAssetEditorForAssetId(k,function(p,q){n(p,q)})}function d(k,n){h.PercAssetService.getAssetViewForAssetId(k,function(p,q){n(p,q)})}function f(n,k){function p(q,t){var v=new h.PercPathItemModel(t.PathItem.id,t.PathItem.folderPaths,t.PathItem.icon,t.PathItem.name,t.PathItem.type,t.PathItem.folderPath,t.PathItem.leaf,t.PathItem.path);k(v)}h.PercPathService.getPathItemForPath(n,p)}function j(q,p,k){var n={AssetFolderRelationship:{assetId:q,folderPath:p}};h.PercAssetService.putAssetInFolder(n,k)}})(jQuery);(function(f){f.PercWorkflowController=function(){return{checkIn:e,checkOut:j,transition:n,getTransitions:p,isCheckedOutToCurrentUser:h,doesItemExist:q}};var k=f.PercWorkflowService();function e(x,y){y=y==null?function(){}:y;var w=function(z,A){if(z==f.PercServiceUtils.STATUS_ERROR){var B=f.PercServiceUtils.extractDefaultErrorMessage(A.request);f.perc_utils.debug("Error : "+B);y(false)}else{y(true)}};k.checkIn(x,w)}function j(x,w,y){y=y==null?function(){}:y;k.checkOut(w,function(A,C){if(A==f.PercServiceUtils.STATUS_SUCCESS){var z=C.data.ItemUserInfo;if(z.checkOutUser!=z.currentUser){if(z.assignmentType=="Admin"){var B={title:d[x],question:b(0,z,x),cancel:function(){y(false)},success:function(){t(w,y)},type:"OVERRIDE_OK"};f.perc_utils.confirm_dialog(B)}else{if(z.assignmentType=="Assignee"){var B={title:d[x],content:b(1,z,x)};f.perc_utils.alert_dialog(B);y(false);return}else{var B={title:d[x],content:b(2,z,x)};f.perc_utils.alert_dialog(B);y(false);return}}}else{y(true)}}else{var D=f.PercServiceUtils.extractDefaultErrorMessage(C.request);if(D.indexOf("Not a valid content id")!=-1){var B={title:d[x],content:b(3,z,x)};f.perc_utils.alert_dialog(B);y(false);return}f.perc_utils.alert_dialog({title:"Error",content:D});y(false)}})}function t(w,x){x=x==null?function(){}:x;k.forceCheckOut(w,function(y,z){if(y==f.PercServiceUtils.STATUS_SUCCESS){x(true)}else{var A=f.PercServiceUtils.extractDefaultErrorMessage(z.request);f.perc_utils.alert_dialog({title:"Error",content:A});x(false)}})}function n(z,y,x,B,A){A=A==null?function(){}:A;var w=function(D,F){if(D==f.PercServiceUtils.STATUS_ERROR){var J=f.PercServiceUtils.extractDefaultErrorMessage(F.request);f.perc_utils.alert_dialog({title:"Error",content:J});A(false)}else{var C=F.data;var H=C.ItemTransitionResults.failedAssets;if(H){var G=(y=="percAsset")?"asset":"page";var I="Could not publish the "+G+" because the following related asset(s) could not be published.<br/><br/>";if(f.isArray(H)){f.each(H,function(){var K=this.folderPaths;K=K.substring(K.indexOf("/Assets"))+"/"+this.name;I+="<b>"+K+"</b><br/>"})}else{var E=H.folderPaths;E=E.substring(E.indexOf("/Assets"))+"/"+H.name;I+="<b>"+E+"</b><br/>"}I+="<br/>Either remove the related asset(s) or publish them first and then publish this "+G+".";f.perc_utils.alert_dialog({title:"Error",content:I});A(false)}else{A(true)}}};k.transition(z,x,B,w)}function p(w,x){x=x==null?function(){}:x;k.getTransitions(w,function(y,A){if(y==f.PercServiceUtils.STATUS_SUCCESS){var z=[];var B=A.data.ItemStateTransition.transitionTriggers;if(f.isArray(B)){f.each(B,function(D){if(v[B[D]]){z.push(v[B[D]])}})}else{if(v[B]){z.push(v[B])}}x(true,z)}else{var C=f.PercServiceUtils.extractDefaultErrorMessage(A.request);f.perc_utils.alert_dialog({title:"Error",content:C});x(false,[])}})}function h(x,y){y=y==null?function(){}:y;var w=function(z,A){if(z==f.PercServiceUtils.STATUS_SUCCESS){y(A.data==true,A.data)}else{y(false,f.PercServiceUtils.extractDefaultErrorMessage(A.request))}};k.isCheckedOutToCurrentUser(x,w)}function q(w,x){x=x==null?function(){}:x;h(w,function(y,z){if(typeof z=="string"){x(y||z.indexOf("does not exist")==-1)}else{x(y)}})}function b(x,w,A){var z="";var y="page";if(A=="percAsset"){y="asset"}if(x==0){z="The "+y+" '"+w.itemName+"' is currently being edited by '"+w.checkOutUser+"'.<br/>Select 'Override' to edit this "+y+" anyway. <br/>Unsaved changes to '"+w.itemName+"' may be lost."}else{if(x==1){z="The "+y+" '"+w.itemName+"' is currently being edited by '"+w.checkOutUser+"'."}else{if(x==2){z="You are not authorized to edit the "+y+" '"+w.itemName+"'."}else{if(x==3){z="The "+y+" has been deleted in another session."}}}}return z}var d=[];d.percPage="Open Page";d.percAsset="Open Asset";var v=[];v.Reject={name:"Reject",cssClass:"perc-wf-reject",alt:"Reject"};v.Submit={name:"Submit",cssClass:"perc-wf-submit",alt:"Submit"};v.Approve={name:"Approve",cssClass:"perc-wf-approve",alt:"Approve"};v.Resubmit={name:"Resubmit",cssClass:"perc-wf-resubmit",alt:"Resubmit"};v["Quick Edit"]={name:"Quick Edit",cssClass:"perc-wf-edit",alt:"Edit"};v.Archive={name:"Archive",cssClass:"perc-wf-archive",alt:"Archive"}})(jQuery);(function(b){b.PercPathItemModel=function(p,e,k,h,j,f,d,n){this.id=p;this.folderPaths=e;this.icon=k;this.name=h;this.type=j;this.folderPath=f;this.leaf=d;this.path=n}})(jQuery);(function(b){b.PercWidgetModel=function(){this.id=null;this.locked=false;this.html=null;this.ccs=null;this.definitionId=null;this.name=null;this.properties=null;this.assetIds=null;this.relationshipId=-1;this.setId=function(d){this.id=d};this.getId=function(){return this.id};this.setHtml=function(d){this.html=d};this.getHtml=function(){return this.html};this.setCss=function(d){this.css=d};this.getCss=function(){return this.css};this.setDefinitionId=function(d){this.definitionId=d};this.getDefinitionId=function(){return this.definitionId};this.setProperties=function(d){this.properties=d};this.getProperties=function(){return this.properties};this.setName=function(d){this.name=d};this.getName=function(){return this.name};this.setAssetIds=function(d){this.assetIds=d};this.getAssetIds=function(){return this.assetIds};this.setRelationshipId=function(d){this.relationshipId=d};this.getRelationshipId=function(){return this.relationshipId}};b.PercAssetDropCriteriaModel=function(j,n,e,h,d,p,k,f){this.widgetId=j;this.appendSupport=n;this.locked=e;this.multiItemSupport=h;this.ownerId=d;this.supportedContentTypes=p;this.assetShared=k;this.relationshipId=f;this.log=function(){console.log("widgetId              = "+this.widgetId);console.log("appendSupport         = "+this.appendSupport);console.log("locked                = "+this.locked);console.log("multiItemSupport      = "+this.multiItemSupport);console.log("ownerId               = "+this.ownerId);console.log("supportedContentTypes = "+this.supportedContentTypes)}};b.PercAssetEditorModel=function(e,h,d,f){this.icon=e;this.title=h;this.url=d;this.workflowId=f;this.log=function(){console.log("icon       = "+this.icon);console.log("title      = "+this.title);console.log("url        = "+this.url);console.log("workFlowId = "+this.workflowId)}}})(jQuery);